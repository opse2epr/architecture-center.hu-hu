---
title: "Tartomány-elemzés mikroszolgáltatások"
description: "Tartomány-elemzés mikroszolgáltatások"
author: MikeWasson
ms.date: 12/08/2017
ms.openlocfilehash: c3c353a6b30507369357af4b520a51f8afc2fb8d
ms.sourcegitcommit: 3d6dba524cc7661740bdbaf43870de7728d60a01
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 01/11/2018
---
# <a name="designing-microservices-domain-analysis"></a><span data-ttu-id="cff3d-103">Mikroszolgáltatások tervezése: tartomány elemzés</span><span class="sxs-lookup"><span data-stu-id="cff3d-103">Designing microservices: Domain analysis</span></span> 

<span data-ttu-id="cff3d-104">A legnagyobb kihívást az mikroszolgáltatások egyik határozza meg az egyes szolgáltatások határait.</span><span class="sxs-lookup"><span data-stu-id="cff3d-104">One of the biggest challenges of microservices is to define the boundaries of individual services.</span></span> <span data-ttu-id="cff3d-105">Az általános szabály az, hogy egy szolgáltatás hajthatja végre a "jó" &mdash; azonban gondosan meg kell hogy, hogy a szabály üzembe eljárás szükséges.</span><span class="sxs-lookup"><span data-stu-id="cff3d-105">The general rule is that a service should do "one thing" &mdash; but putting that rule into practice requires careful thought.</span></span> <span data-ttu-id="cff3d-106">Nincs egyetlen gépi folyamat, amely a "jobb oldali" Tervező eredményez.</span><span class="sxs-lookup"><span data-stu-id="cff3d-106">There is no mechanical process that will produce the "right" design.</span></span> <span data-ttu-id="cff3d-107">A mélyen gondolja át a vállalati tartományhoz, követelmények és célok kell.</span><span class="sxs-lookup"><span data-stu-id="cff3d-107">You have to think deeply about your business domain, requirements, and goals.</span></span> <span data-ttu-id="cff3d-108">Ellenkező esetben fejezheti haphazard kialakítás néhány nemkívánatos jellemzőit, például a szolgáltatások, a rövid kapcsoló vagy rosszul tervezett felületek közötti rejtett függőségek mutat.</span><span class="sxs-lookup"><span data-stu-id="cff3d-108">Otherwise, you can end up with a haphazard design that exhibits some undesirable characteristics, such as hidden dependencies between services, tight coupling, or poorly designed interfaces.</span></span> <span data-ttu-id="cff3d-109">Ebben a fejezetben azt mikroszolgáltatások létrehozására az a tartomány adatvezérelt megközelítés igénybe vehet.</span><span class="sxs-lookup"><span data-stu-id="cff3d-109">In this chapter, we take a domain-driven approach to designing microservices.</span></span> 

<span data-ttu-id="cff3d-110">Mikroszolgáltatások úgy kell megtervezni, üzleti képességeit, például az adatok elérése vagy az üzenetkezelési nem vízszintes rétegek körül.</span><span class="sxs-lookup"><span data-stu-id="cff3d-110">Microservices should be designed around business capabilities, not horizontal layers such as data access or messaging.</span></span> <span data-ttu-id="cff3d-111">Ezenkívül laza kapcsoló és a magas működési kohézió kell rendelkezniük.</span><span class="sxs-lookup"><span data-stu-id="cff3d-111">In addition, they should have loose coupling and high functional cohesion.</span></span> <span data-ttu-id="cff3d-112">Mikroszolgáltatások vannak *lazán összekapcsolt* Ha egy szolgáltatás anélkül, hogy más szolgáltatások egyszerre frissítendő bármikor módosíthatja.</span><span class="sxs-lookup"><span data-stu-id="cff3d-112">Microservices are *loosely coupled* if you can change one service without requiring other services to be updated at the same time.</span></span> <span data-ttu-id="cff3d-113">Egy mikroszolgáltatási van *javul* rendelkezik-e a egyetlen, jól meghatározott célú, például a felhasználói fiókok kezelése vagy küldési előzményeinek nyomon követését.</span><span class="sxs-lookup"><span data-stu-id="cff3d-113">A microservice is *cohesive* if it has a single, well-defined purpose, such as managing user accounts or tracking delivery history.</span></span> <span data-ttu-id="cff3d-114">A szolgáltatás kell foglalják magukban a tartomány Tudásbázis és absztrakt ezt az információt az ügyfelektől.</span><span class="sxs-lookup"><span data-stu-id="cff3d-114">A service should encapsulate domain knowledge and abstract that knowledge from clients.</span></span> <span data-ttu-id="cff3d-115">Például egy ügyfél kell tudni egy dron ütemezése az ütemezési algoritmus vagy módjára vonatkozik. a dron járműflotta részleteinek ismerete nélkül.</span><span class="sxs-lookup"><span data-stu-id="cff3d-115">For example, a client should be able to schedule a drone without knowing the details of the scheduling algorithm or how the drone fleet is managed.</span></span>

<span data-ttu-id="cff3d-116">Tartomány-központú kialakítás (nnn), amely szerezheti meg legtöbb keretet biztosít annak, ahogyan egy csoportjának tetszetős mikroszolgáltatások létrehozására.</span><span class="sxs-lookup"><span data-stu-id="cff3d-116">Domain-driven design (DDD) provides a framework that can get you most of the way to a set of well-designed microservices.</span></span> <span data-ttu-id="cff3d-117">DDD stratégiai és taktikai fázisa van két különböző.</span><span class="sxs-lookup"><span data-stu-id="cff3d-117">DDD has two distinct phases, strategic and tactical.</span></span> <span data-ttu-id="cff3d-118">A stratégiai nnn a rendszer a felügyeleti teendők központjaként struktúra meghatározásakor.</span><span class="sxs-lookup"><span data-stu-id="cff3d-118">In strategic DDD, you are defining the large-scale structure of the system.</span></span> <span data-ttu-id="cff3d-119">Stratégiai DDD biztosíthatja, hogy az architektúrák továbbra is üzleti képességeit összpontosítanak.</span><span class="sxs-lookup"><span data-stu-id="cff3d-119">Strategic DDD helps to ensure that your architecture remains focused on business capabilities.</span></span> <span data-ttu-id="cff3d-120">Taktikai DDD-kialakítási minta, használhatja a modell létrehozásához biztosít.</span><span class="sxs-lookup"><span data-stu-id="cff3d-120">Tactical DDD provides a set of design patterns that you can use to create the domain model.</span></span> <span data-ttu-id="cff3d-121">Ezek a minták entitásokat, az összesítések és a tartományi szolgáltatások közé tartozik.</span><span class="sxs-lookup"><span data-stu-id="cff3d-121">These patterns include entities, aggregates, and domain services.</span></span> <span data-ttu-id="cff3d-122">Ezen taktikai minták segítséget mikroszolgáltatások létrehozására, amelyek lazán összekapcsolt és is javul tervezéséhez.</span><span class="sxs-lookup"><span data-stu-id="cff3d-122">These tactical patterns will help you to design microservices that are both loosely coupled and cohesive.</span></span>

![](./images/ddd-process.png)

<span data-ttu-id="cff3d-123">Ez a fejezet, a következő, a végigvesszük az alábbi lépéseket, azok alkalmazása a dron továbbítási alkalmazást hozhat létre:</span><span class="sxs-lookup"><span data-stu-id="cff3d-123">In this chapter and the next, we'll walk through the following steps, applying them to the Drone Delivery application:</span></span> 

1. <span data-ttu-id="cff3d-124">Indítsa el a vállalati tartomány, az alkalmazás működési követelmények megértése érdekében elemzése.</span><span class="sxs-lookup"><span data-stu-id="cff3d-124">Start by analyzing the business domain to understand the application's functional requirements.</span></span> <span data-ttu-id="cff3d-125">Ez a lépés eredménye az is lehet is tartományi modellek formális készletére tartomány nem hivatalos leírását.</span><span class="sxs-lookup"><span data-stu-id="cff3d-125">The output of this step is an informal description of the domain, which can be refined into a more formal set of domain models.</span></span> 

2. <span data-ttu-id="cff3d-126">Ezt követően adja meg a *környezetek határolt* annak a tartománynak.</span><span class="sxs-lookup"><span data-stu-id="cff3d-126">Next, define the *bounded contexts* of the domain.</span></span> <span data-ttu-id="cff3d-127">Minden egyes kötött környezetben a nagyobb alkalmazás adott altartomány jelölő tartománymodell tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="cff3d-127">Each bounded context contains a domain model that represents a particular subdomain of the larger application.</span></span> 

3. <span data-ttu-id="cff3d-128">A kötött környezeten belül taktikai DDD minták adható meg entitások, az összesítések és a tartományi szolgáltatások alkalmazni.</span><span class="sxs-lookup"><span data-stu-id="cff3d-128">Within a bounded context, apply tactical DDD patterns to define entities, aggregates, and domain services.</span></span> 
 
4. <span data-ttu-id="cff3d-129">Az előző lépésből származó eredmények segítségével azonosíthatja a mikroszolgáltatások az alkalmazásban.</span><span class="sxs-lookup"><span data-stu-id="cff3d-129">Use the results from the previous step to identify the microservices in your application.</span></span>

<span data-ttu-id="cff3d-130">Ebben a fejezetben azt az első három lépést, amely elsősorban DDD fedik le.</span><span class="sxs-lookup"><span data-stu-id="cff3d-130">In this chapter, we cover the first three steps, which are primarily concerned with DDD.</span></span> <span data-ttu-id="cff3d-131">A következő fejezetben azt azonosítja a mikroszolgáltatások létrehozására.</span><span class="sxs-lookup"><span data-stu-id="cff3d-131">In the next chapter, we will identify the microservices.</span></span> <span data-ttu-id="cff3d-132">Fontos azonban megjegyezni, hogy DDD egy iteratív, folyamatban lévő folyamat.</span><span class="sxs-lookup"><span data-stu-id="cff3d-132">However, it's important to remember that DDD is an iterative, ongoing process.</span></span> <span data-ttu-id="cff3d-133">Szolgáltatás határok nem rögzített követ.</span><span class="sxs-lookup"><span data-stu-id="cff3d-133">Service boundaries aren't fixed in stone.</span></span> <span data-ttu-id="cff3d-134">Egy alkalmazás fejlődésének dönthet felosztása egymástól szolgáltatás több kisebb szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="cff3d-134">As an application evolves, you may decide to break apart a service into several smaller services.</span></span>

> [!NOTE]
> <span data-ttu-id="cff3d-135">Ez a fejezet nem célja, hogy a teljes, átfogó tartomány elemzésre megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="cff3d-135">This chapter is not meant to show a complete and comprehensive domain analysis.</span></span> <span data-ttu-id="cff3d-136">A Microsoft szándékosan tartani a példa rövid, ahhoz, hogy bemutassa a főbb pontjai.</span><span class="sxs-lookup"><span data-stu-id="cff3d-136">We deliberately kept the example brief, in order to illustrate the main points.</span></span> <span data-ttu-id="cff3d-137">További háttere DDD, azt javasoljuk, Eric Evans *Domain-Driven tervezési*, a címjegyzék-alkalmazásával, amely először a kifejezés.</span><span class="sxs-lookup"><span data-stu-id="cff3d-137">For more background on DDD, we recommend Eric Evans' *Domain-Driven Design*, the book that first introduced the term.</span></span> <span data-ttu-id="cff3d-138">Egy másik a helyes hivatkozás *Implementing Domain-Driven tervezési* Vaughn Vernon által.</span><span class="sxs-lookup"><span data-stu-id="cff3d-138">Another good reference is *Implementing Domain-Driven Design* by Vaughn Vernon.</span></span> 

## <a name="analyze-the-domain"></a><span data-ttu-id="cff3d-139">A tartomány elemzése</span><span class="sxs-lookup"><span data-stu-id="cff3d-139">Analyze the domain</span></span>

<span data-ttu-id="cff3d-140">Egy DDD megközelítéssel segítséget mikroszolgáltatások kialakítani, hogy minden szolgáltatás űrlapok működési üzleti igény a természetes megfelelően.</span><span class="sxs-lookup"><span data-stu-id="cff3d-140">Using a DDD approach will help you to design microservices so that every service forms a natural fit to a functional business requirement.</span></span> <span data-ttu-id="cff3d-141">Segítségével elkerülhetők a trap lehetővé teszik a szervezet határain kívülre vagy technológia döntések előírják a tervező.</span><span class="sxs-lookup"><span data-stu-id="cff3d-141">It can help you to avoid the trap of letting organizational boundaries or technology choices dictate your design.</span></span>

<span data-ttu-id="cff3d-142">Előtt kódot írnia kell egy Madártávlatból létrehozásakor a rendszer.</span><span class="sxs-lookup"><span data-stu-id="cff3d-142">Before writing any code, you need a bird's eye view of the system that you are creating.</span></span> <span data-ttu-id="cff3d-143">DDD indítja el a vállalati tartomány modellezési és létrehozása egy *tartománymodell*.</span><span class="sxs-lookup"><span data-stu-id="cff3d-143">DDD starts by modeling the business domain and creating a *domain model*.</span></span> <span data-ttu-id="cff3d-144">A modell egy absztrakt modell az üzleti tartomány.</span><span class="sxs-lookup"><span data-stu-id="cff3d-144">The domain model is an abstract model of the business domain.</span></span> <span data-ttu-id="cff3d-145">Az kigyűjti tartomány Tudásbázis rendezi és a közös nyelvi biztosít a fejlesztők és a tartomány szakértői.</span><span class="sxs-lookup"><span data-stu-id="cff3d-145">It distills and organizes domain knowledge, and provides a common language for developers and domain experts.</span></span> 

<span data-ttu-id="cff3d-146">Első lépésként leképezési összes üzleti funkciók és a kapcsolatokat.</span><span class="sxs-lookup"><span data-stu-id="cff3d-146">Start by mapping all of the business functions and their connections.</span></span> <span data-ttu-id="cff3d-147">Ez valószínűleg egy együttműködési erőfeszítés, amely magában foglalja a tartomány szakértők szoftver mérnökök és egyéb érintett felek.</span><span class="sxs-lookup"><span data-stu-id="cff3d-147">This will likely be a collaborative effort that involves domain experts, software architects, and other stakeholders.</span></span> <span data-ttu-id="cff3d-148">Nem kell minden egyes formalism használja.</span><span class="sxs-lookup"><span data-stu-id="cff3d-148">You don't need to use any particular formalism.</span></span>  <span data-ttu-id="cff3d-149">A diagram Vázlat vagy Faliújságra megrajzolásához.</span><span class="sxs-lookup"><span data-stu-id="cff3d-149">Sketch a diagram or draw on whiteboard.</span></span>

<span data-ttu-id="cff3d-150">Írja be a diagram, előfordulhat, hogy kezdené diszkrét altartományok azonosításához.</span><span class="sxs-lookup"><span data-stu-id="cff3d-150">As you fill in the diagram, you may start to identify discrete subdomains.</span></span> <span data-ttu-id="cff3d-151">Mely függvények szorosan kapcsolódó?</span><span class="sxs-lookup"><span data-stu-id="cff3d-151">Which functions are closely related?</span></span> <span data-ttu-id="cff3d-152">Funkciók core az üzleti tevékenységre vonatkozóan, és kiegészítő szolgáltatásokat nyújt?</span><span class="sxs-lookup"><span data-stu-id="cff3d-152">Which functions are core to the business, and which provide ancillary services?</span></span> <span data-ttu-id="cff3d-153">Mi az a függőségi grafikon?</span><span class="sxs-lookup"><span data-stu-id="cff3d-153">What is the dependency graph?</span></span> <span data-ttu-id="cff3d-154">A kezdeti fázisában nem érintett technológiák vagy megvalósítás részletei.</span><span class="sxs-lookup"><span data-stu-id="cff3d-154">During this initial phase, you aren't concerned with technologies or implementation details.</span></span> <span data-ttu-id="cff3d-155">Említett, vegye figyelembe a hely, ahol az alkalmazás lesz integrálni kell külső rendszerekkel, például a CRM, feldolgozás, vagy számlázási rendszerek fizetési.</span><span class="sxs-lookup"><span data-stu-id="cff3d-155">That said, you should note the place where the application will need to integrate with external systems, such as CRM, payment processing, or billing systems.</span></span> 

## <a name="drone-delivery-analyzing-the-business-domain"></a><span data-ttu-id="cff3d-156">Dron kézbesítési: Elemzése a vállalati tartományhoz.</span><span class="sxs-lookup"><span data-stu-id="cff3d-156">Drone Delivery: Analyzing the business domain.</span></span>

<span data-ttu-id="cff3d-157">Néhány kezdeti tartomány az elemzést a Fabrikam team le egy durva ábrát, amely a dron kézbesítési tartomány ábrázol.</span><span class="sxs-lookup"><span data-stu-id="cff3d-157">After some initial domain analysis, the Fabrikam team came up with a rough sketch that depicts the Drone Delivery domain.</span></span>

![](./images/ddd1.svg) 

- <span data-ttu-id="cff3d-158">**Szállítási** helyezkedik el a diagramon közepére, mert az üzleti core.</span><span class="sxs-lookup"><span data-stu-id="cff3d-158">**Shipping** is placed in the center of the diagram, because it's core to the business.</span></span> <span data-ttu-id="cff3d-159">Minden más, az ábrán létezik, és ennek a funkciónak.</span><span class="sxs-lookup"><span data-stu-id="cff3d-159">Everything else in the diagram exists to enable this functionality.</span></span>
- <span data-ttu-id="cff3d-160">**Felügyeleti dron** egyben core az üzleti tevékenységre vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="cff3d-160">**Drone management** is also core to the business.</span></span> <span data-ttu-id="cff3d-161">Szorosan kapcsolódó dron kezelési funkciókat tartalmaz **dron javítási** és **prediktív elemzési** előre jelezni, amikor dronok kell karbantartása.</span><span class="sxs-lookup"><span data-stu-id="cff3d-161">Functionality that is closely related to drone management includes **drone repair** and using **predictive analysis** to predict when drones need servicing and maintenance.</span></span> 
- <span data-ttu-id="cff3d-162">**Európai elemzés** biztosít a felvételi és kézbesítési becsült idő.</span><span class="sxs-lookup"><span data-stu-id="cff3d-162">**ETA analysis** provides time estimates for pickup and delivery.</span></span> 
- <span data-ttu-id="cff3d-163">**Külső szállítására** szállítására alternatív módszerek ütemezése, ha a csomag nem szállítják teljesen dron által az alkalmazás lehetővé teszi.</span><span class="sxs-lookup"><span data-stu-id="cff3d-163">**Third-party transportation** will enable the application to schedule alternative transportation methods if a package cannot be shipped entirely by drone.</span></span>
- <span data-ttu-id="cff3d-164">**Megosztás dron** a fő üzleti lehetséges bővítménye.</span><span class="sxs-lookup"><span data-stu-id="cff3d-164">**Drone sharing** is a possible extension of the core business.</span></span> <span data-ttu-id="cff3d-165">A vállalat esetleg felesleges dron kapacitás egyes órában, és sikerült bérleti dronok, amelyek egyébként üresjárati ki.</span><span class="sxs-lookup"><span data-stu-id="cff3d-165">The company may have excess drone capacity during certain hours, and could rent out drones that would otherwise be idle.</span></span> <span data-ttu-id="cff3d-166">Ez a funkció nem lesz az eredeti kiadását.</span><span class="sxs-lookup"><span data-stu-id="cff3d-166">This feature will not be in the initial release.</span></span>
- <span data-ttu-id="cff3d-167">**Figyelőrendszer** van egy másik olyan területen, amely a vállalat később lehet, hogy kibővítése.</span><span class="sxs-lookup"><span data-stu-id="cff3d-167">**Video surveillance** is another area that the company might expand into later.</span></span>
- <span data-ttu-id="cff3d-168">**Felhasználói fiókok**, **számlázás**, és **ügyfélszolgálatával** , amely támogatja a fő üzleti altartományok vannak.</span><span class="sxs-lookup"><span data-stu-id="cff3d-168">**User accounts**, **Invoicing**, and **Call center** are subdomains that support the core business.</span></span>
 
<span data-ttu-id="cff3d-169">Figyelje meg, hogy ezen a ponton a folyamat során is még nem jutott megvalósítási és technológiák kapcsolatos döntések meghozatala.</span><span class="sxs-lookup"><span data-stu-id="cff3d-169">Notice that at this point in the process, we haven't made any decisions about implementation or technologies.</span></span> <span data-ttu-id="cff3d-170">Néhány az alrendszerek magában foglalhatja külső szoftver rendszerek vagy harmadik féltől származó szolgáltatással.</span><span class="sxs-lookup"><span data-stu-id="cff3d-170">Some of the subsystems may involve external software systems or third-party services.</span></span> <span data-ttu-id="cff3d-171">Még ha így az alkalmazást kell együttműködhet ezen rendszerek és a szolgáltatások, ezért fontos, a tartomány modell felvenni.</span><span class="sxs-lookup"><span data-stu-id="cff3d-171">Even so, the application needs to interact with these systems and services, so it's important to include them in the domain model.</span></span> 

> [!NOTE]
> <span data-ttu-id="cff3d-172">Ha egy alkalmazás olyan külső rendszertől függ, nincs a veszélye, hogy a külső rendszer Adatséma vagy API fog szivárgás lépett fel az alkalmazásba a architekturális tervezési végső soron veszélyeztetése.</span><span class="sxs-lookup"><span data-stu-id="cff3d-172">When an application depends on an external system, there is a risk that the external system's data schema or API will leak into your application, ultimately compromising the architectural design.</span></span> <span data-ttu-id="cff3d-173">Ez különösen igaz a régebbi rendszerekre, amelyek nem mindig a modern ajánlott eljárásokat, és előfordulhat, hogy csavart adatok sémák vagy elavult API-k.</span><span class="sxs-lookup"><span data-stu-id="cff3d-173">This is particularly true with legacy systems that may not follow modern best practices, and may use convoluted data schemas or obsolete APIs.</span></span> <span data-ttu-id="cff3d-174">Ebben az esetben fontos rendelkezik a külső rendszerekből és az alkalmazás jól meghatározott határt.</span><span class="sxs-lookup"><span data-stu-id="cff3d-174">In that case, it's important to have a well-defined boundary between these external systems and the application.</span></span> <span data-ttu-id="cff3d-175">Érdemes lehet a [Strangler mintát](../patterns/strangler.md) vagy a [elleni sérülés réteg mintát](../patterns/anti-corruption-layer.md) erre a célra.</span><span class="sxs-lookup"><span data-stu-id="cff3d-175">Consider using the [Strangler Pattern](../patterns/strangler.md) or the [Anti-Corruption Layer Pattern](../patterns/anti-corruption-layer.md) for this purpose.</span></span>

## <a name="define-bounded-contexts"></a><span data-ttu-id="cff3d-176">A kötött környezetek meghatározása</span><span class="sxs-lookup"><span data-stu-id="cff3d-176">Define bounded contexts</span></span>

<span data-ttu-id="cff3d-177">A modell tartalmazza a világ valós dolgot ábrázolásai &mdash; felhasználók, dronok, csomagokat és így tovább.</span><span class="sxs-lookup"><span data-stu-id="cff3d-177">The domain model will include representations of real things in the world &mdash; users, drones, packages, and so forth.</span></span> <span data-ttu-id="cff3d-178">Azonban, hogy nem jelenti azt, hogy a rendszer minden részét kell használni a azonos felelősséget ugyanazokat a műveleteket.</span><span class="sxs-lookup"><span data-stu-id="cff3d-178">But that doesn't mean that every part of the system needs to use the same representations for the same things.</span></span> 

<span data-ttu-id="cff3d-179">Például dron javítása és a prediktív elemzési alrendszerek kell meghatároznia sok fizikai jellemzők dronok, például a karbantartási előzmények, távolság, kor, teljesítményt nyújt, és a stb.</span><span class="sxs-lookup"><span data-stu-id="cff3d-179">For example, subsystems that handle drone repair and predictive analysis will need to represent many physical characteristics drones, such as their maintenance history, mileage, age, model number, performance characteristics, and so on.</span></span> <span data-ttu-id="cff3d-180">De amikor egy kézbesítési ütemezését, azt nem érdeklik ezeket a beállításokat.</span><span class="sxs-lookup"><span data-stu-id="cff3d-180">But when it's time to schedule a delivery, we don't care about those things.</span></span> <span data-ttu-id="cff3d-181">Az ütemezési alrendszer csak tudnia kell, hogy rendelkezésre áll-e egy dron, és az Európai a felvételi és kézbesítési.</span><span class="sxs-lookup"><span data-stu-id="cff3d-181">The scheduling subsystem only needs to know whether a drone is available, and the ETA for pickup and delivery.</span></span> 

<span data-ttu-id="cff3d-182">Nem sikerült mindkét alrendszereket egyetlen modell létrehozása, ha feleslegesen összetett lenne.</span><span class="sxs-lookup"><span data-stu-id="cff3d-182">If we tried to create a single model for both of these subsystems, it would be unnecessarily complex.</span></span> <span data-ttu-id="cff3d-183">Azt is válna nehezebb a modell a verzióinformációk, mert módosításokat kell több csapat dolgozik a különböző alrendszereket kielégítéséhez.</span><span class="sxs-lookup"><span data-stu-id="cff3d-183">It would also become harder for the model to evolve over time, because any changes will need to satisfy multiple teams working on separate subsystems.</span></span> <span data-ttu-id="cff3d-184">Ezért érdemes gyakran külön modellek, amelyek megfelelnek az azonos valós entitás (ebben az esetben egy dron) kétszer tervezéséhez.</span><span class="sxs-lookup"><span data-stu-id="cff3d-184">Therefore, it's often better to design separate models that represent the same real-world entity (in this case, a drone) in two different contexts.</span></span> <span data-ttu-id="cff3d-185">Egyes modellek csak funkcióit és attribútumokat, amelyek az adott környezetben megfelelő tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="cff3d-185">Each model contains only the features and attributes that are relevant within its particular context.</span></span>

<span data-ttu-id="cff3d-186">Ez akkor, ha a DDD fogalmát *környezetek kötve* játékba származik.</span><span class="sxs-lookup"><span data-stu-id="cff3d-186">This is where the DDD concept of *bounded contexts* comes into play.</span></span> <span data-ttu-id="cff3d-187">A kötött környezetben egyszerűen a határt, a tartományban, ahol egy adott modell alkalmazza.</span><span class="sxs-lookup"><span data-stu-id="cff3d-187">A bounded context is simply the boundary within a domain where a particular domain model applies.</span></span> <span data-ttu-id="cff3d-188">Az előző ábrán megnézi, azt csoportosíthatja, hogy különböző függvényeket egytartományos modell megosztja a szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="cff3d-188">Looking at the previous diagram, we can group functionality according to whether various functions will share a single domain model.</span></span> 

![](./images/ddd2.svg) 
 
<span data-ttu-id="cff3d-189">A kötött környezetek, amelyek nem feltétlenül elkülönülnek egymástól.</span><span class="sxs-lookup"><span data-stu-id="cff3d-189">Bounded contexts are not necessarily isolated from one another.</span></span> <span data-ttu-id="cff3d-190">Ezen a diagramon a csatlakozás a kötött környezetek folytonos vonal képviselő helyen, ahol két kötött környezetben interakciót.</span><span class="sxs-lookup"><span data-stu-id="cff3d-190">In this diagram, the solid lines connecting the bounded contexts represent places where two bounded contexts interact.</span></span> <span data-ttu-id="cff3d-191">Szállítási például felhasználói fiókokat az ügyfelek kapcsolatos információkat, és ütemezni a járműflotta a dronok dron felügyeleti függ.</span><span class="sxs-lookup"><span data-stu-id="cff3d-191">For example, Shipping depends on User Accounts to get information about customers, and on Drone Management to schedule drones from the fleet.</span></span>

<span data-ttu-id="cff3d-192">A könyv *tartomány vezérelt tervezési*, Eric Evans karbantartásához tartománymodell integritását, amikor hatással van egy másik kötött környezetben az több mintákat ismerteti.</span><span class="sxs-lookup"><span data-stu-id="cff3d-192">In the book *Domain Driven Design*, Eric Evans describes several patterns for maintaining the integrity of a domain model when it interacts with another bounded context.</span></span> <span data-ttu-id="cff3d-193">A fő alapelvek mikroszolgáltatások egyik, a szolgáltatások kommunikálni a jól meghatározott API-k segítségével.</span><span class="sxs-lookup"><span data-stu-id="cff3d-193">One of the main principles of microservices is that services communicate through well-defined APIs.</span></span> <span data-ttu-id="cff3d-194">Ez a megközelítés megfelel két mintát, hogy Evans meghívja a gazdaszolgáltatás megnyitása és közzétett nyelv.</span><span class="sxs-lookup"><span data-stu-id="cff3d-194">This approach corresponds to two patterns that Evans calls Open Host Service and Published Language.</span></span> <span data-ttu-id="cff3d-195">A nyitott Host szolgáltatás lényege, hogy egy alrendszer határozza meg a formális protokoll (API) más alrendszerek kommunikálni.</span><span class="sxs-lookup"><span data-stu-id="cff3d-195">The idea of Open Host Service is that a subsystem defines a formal protocol (API) for other subsystems to communicate with it.</span></span> <span data-ttu-id="cff3d-196">Közzétett nyelvi ezt az elképzelést kiterjeszti közzététele az API-t, amely más csapatokkal használja a ügyfelek űrlap.</span><span class="sxs-lookup"><span data-stu-id="cff3d-196">Published Language extends this idea by publishing the API in a form that other teams can use to write clients.</span></span> <span data-ttu-id="cff3d-197">A fejezet a [API tervezési](./api-design.md), arról lesz szó használatával [OpenAPI Specification](https://www.openapis.org/specification/repo) (korábbi néven Swagger) JSON- vagy YAM formátumban kifejezett REST API-k, nyelvtől független felület leírásainak meghatározásához.</span><span class="sxs-lookup"><span data-stu-id="cff3d-197">In the chapter on [API Design](./api-design.md), we discuss using [OpenAPI Specification](https://www.openapis.org/specification/repo) (formerly known as Swagger) to define language-agnostic interface descriptions for REST APIs, expressed in JSON or YAML format.</span></span>

<span data-ttu-id="cff3d-198">Ez út további tárgyaljuk, amelyet szállítási környezetében.</span><span class="sxs-lookup"><span data-stu-id="cff3d-198">For the rest of this journey, we will focus on the Shipping bounded context.</span></span> 

## <a name="tactical-ddd"></a><span data-ttu-id="cff3d-199">Taktikai DDD</span><span class="sxs-lookup"><span data-stu-id="cff3d-199">Tactical DDD</span></span>

<span data-ttu-id="cff3d-200">DDD stratégiai fázisában végzett el a vállalati tartományhoz, és meghatározása, amelyet a tartomány modellek környezeteket.</span><span class="sxs-lookup"><span data-stu-id="cff3d-200">During the strategic phase of DDD, you are mapping out the business domain and defining bounded contexts for your domain models.</span></span> <span data-ttu-id="cff3d-201">Taktikai DDD van, a tartomány modellek pontosabb definiálásakor.</span><span class="sxs-lookup"><span data-stu-id="cff3d-201">Tactical DDD is when you define your domain models with more precision.</span></span> <span data-ttu-id="cff3d-202">Taktikai mintázatokat a egyetlen kötött környezeten belül érvényesek.</span><span class="sxs-lookup"><span data-stu-id="cff3d-202">The tactical patterns are applied within a single bounded context.</span></span> <span data-ttu-id="cff3d-203">Mikroszolgáltatások architektúra esetén azt is különösen az entitás és összesített kombinációját.</span><span class="sxs-lookup"><span data-stu-id="cff3d-203">In a microservices architecture, we are particularly interested in the entity and aggregate patterns.</span></span> <span data-ttu-id="cff3d-204">Ezeket a mintákat alkalmazása segíthet számunkra a természetes határok az alkalmazás a szolgáltatásokhoz azonosítása (lásd: [következő fejezet](./microservice-boundaries.md)).</span><span class="sxs-lookup"><span data-stu-id="cff3d-204">Applying these patterns will help us to identify natural boundaries for the services in our application (see [next chapter](./microservice-boundaries.md)).</span></span> <span data-ttu-id="cff3d-205">Általános szabály egy mikroszolgáltatási összesítő kifejezés nem kisebb, és nem lehet nagyobb a kötött környezetben kell lennie.</span><span class="sxs-lookup"><span data-stu-id="cff3d-205">As a general principle, a microservice should be no smaller than an aggregate, and no larger than a bounded context.</span></span> <span data-ttu-id="cff3d-206">Először igazolnia áttekinti a taktikai minták.</span><span class="sxs-lookup"><span data-stu-id="cff3d-206">First, we'll review the tactical patterns.</span></span> <span data-ttu-id="cff3d-207">Ezután azt fogja alkalmazni azokat a szállítási, amelyet a környezetben, a dron továbbítási alkalmazást hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="cff3d-207">Then we'll apply them to the Shipping bounded context in the Drone Delivery application.</span></span> 

### <a name="overview-of-the-tactical-patterns"></a><span data-ttu-id="cff3d-208">A taktikai minták áttekintése</span><span class="sxs-lookup"><span data-stu-id="cff3d-208">Overview of the tactical patterns</span></span>

<span data-ttu-id="cff3d-209">Ez a témakör röviden összefoglalva a taktikai DDD mintákra, így ha már ismeri a DDD, ez a szakasz valószínűleg kihagyhatja.</span><span class="sxs-lookup"><span data-stu-id="cff3d-209">This section provides a brief summary of the tactical DDD patterns, so if you are already familiar with DDD, you can probably skip this section.</span></span> <span data-ttu-id="cff3d-210">A minták fejezetek 5 részletesen ismerteti a &ndash; 6 Eric Evans címjegyzék-alkalmazásával, valamint a *Implementing Domain-Driven tervezési* Vaughn Vernon által.</span><span class="sxs-lookup"><span data-stu-id="cff3d-210">The patterns are described in more detail in chapters 5 &ndash; 6 of Eric Evans' book, and in *Implementing Domain-Driven Design* by Vaughn Vernon.</span></span> 

![](./images/ddd-patterns.png)

<span data-ttu-id="cff3d-211">**Entitások**.</span><span class="sxs-lookup"><span data-stu-id="cff3d-211">**Entities**.</span></span> <span data-ttu-id="cff3d-212">Egy entitás egyedi azonosítóval, amely adott idő alatt továbbra is fennáll objektum.</span><span class="sxs-lookup"><span data-stu-id="cff3d-212">An entity is an object with a unique identity that persists over time.</span></span> <span data-ttu-id="cff3d-213">Például egy banki alkalmazás, ügyfél és a fiókok lenne entitások.</span><span class="sxs-lookup"><span data-stu-id="cff3d-213">For example, in a banking application, customers and accounts would be entities.</span></span> 

- <span data-ttu-id="cff3d-214">Egy entitás egyedi azonosítóval rendelkezik, a rendszer, amely kereshető vagy bejegyzés lekérdezésére használható.</span><span class="sxs-lookup"><span data-stu-id="cff3d-214">An entity has a unique identifier in the system, which can be used to look up or retrieve the entity.</span></span> <span data-ttu-id="cff3d-215">Ez a nem jelenti azt, a azonosítója mindig ki van téve közvetlenül a felhasználók számára.</span><span class="sxs-lookup"><span data-stu-id="cff3d-215">That doesn't mean the identifier is always exposed directly to users.</span></span> <span data-ttu-id="cff3d-216">Lehet, hogy a GUID-nak vagy az adatbázis elsődleges kulcs.</span><span class="sxs-lookup"><span data-stu-id="cff3d-216">It could be a GUID or a primary key in a database.</span></span> 
- <span data-ttu-id="cff3d-217">Az identitás előfordulhat, hogy több kötött környezet span, és előfordulhat, hogy rutinszerű túl az élettartama.</span><span class="sxs-lookup"><span data-stu-id="cff3d-217">An identity may span multiple bounded contexts, and may endure beyond the lifetime of the application.</span></span> <span data-ttu-id="cff3d-218">Például banki számokat vagy azonosító kormánya által kiállított nem kötődnek, egy adott alkalmazás élettartamát.</span><span class="sxs-lookup"><span data-stu-id="cff3d-218">For example, bank account numbers or government-issued IDs are not tied to the lifetime of a particular application.</span></span>
- <span data-ttu-id="cff3d-219">Egy entitás attribútumait idővel megváltozhat.</span><span class="sxs-lookup"><span data-stu-id="cff3d-219">The attributes of an entity may change over time.</span></span> <span data-ttu-id="cff3d-220">Például egy személy nevét vagy címét változhatnak, ugyanakkor továbbra is ugyanaz a személy.</span><span class="sxs-lookup"><span data-stu-id="cff3d-220">For example, a person's name or address might change, but they are still the same person.</span></span> 
- <span data-ttu-id="cff3d-221">Egy entitás egyéb entitások mutató hivatkozásokat is tárolhatják.</span><span class="sxs-lookup"><span data-stu-id="cff3d-221">An entity can hold references to other entities.</span></span>
 
<span data-ttu-id="cff3d-222">**Objektumok érték**.</span><span class="sxs-lookup"><span data-stu-id="cff3d-222">**Value objects**.</span></span> <span data-ttu-id="cff3d-223">Egy érték objektumnak nincs identitás.</span><span class="sxs-lookup"><span data-stu-id="cff3d-223">A value object has no identity.</span></span> <span data-ttu-id="cff3d-224">Az attribútum értéke csak által van definiálva.</span><span class="sxs-lookup"><span data-stu-id="cff3d-224">It is defined only by the values of its attributes.</span></span> <span data-ttu-id="cff3d-225">Érték objektumok is nem módosíthatók.</span><span class="sxs-lookup"><span data-stu-id="cff3d-225">Value objects are also immutable.</span></span> <span data-ttu-id="cff3d-226">Egy érték objektum frissítéséhez, mindig egy új példányának létrehozása lecseréli a régi kiszolgálóéval.</span><span class="sxs-lookup"><span data-stu-id="cff3d-226">To update a value object, you always create a new instance to replace the old one.</span></span> <span data-ttu-id="cff3d-227">Érték objektumoknak is lehetnek, amellyel ágyazható be a tartomány logika módszerek, de azokat a módszereket az objektum állapota nem mellékhatásokkal kell.</span><span class="sxs-lookup"><span data-stu-id="cff3d-227">Value objects can have methods that encapsulate domain logic, but those methods should have no side-effects on the object's state.</span></span> <span data-ttu-id="cff3d-228">Tipikus érték objektumok például színek, dátumok és idők és pénznemek.</span><span class="sxs-lookup"><span data-stu-id="cff3d-228">Typical examples of value objects include colors, dates and times, and currency values.</span></span> 

<span data-ttu-id="cff3d-229">**Aggregátumok**.</span><span class="sxs-lookup"><span data-stu-id="cff3d-229">**Aggregates**.</span></span> <span data-ttu-id="cff3d-230">Összesítő kifejezés határozza meg a konzisztencia-határ egy vagy több entitás körül.</span><span class="sxs-lookup"><span data-stu-id="cff3d-230">An aggregate defines a consistency boundary around one or more entities.</span></span> <span data-ttu-id="cff3d-231">Az összesítő pontosan egy entitás a legfelső szintű.</span><span class="sxs-lookup"><span data-stu-id="cff3d-231">Exactly one entity in an aggregate is the root.</span></span> <span data-ttu-id="cff3d-232">Keresési történik, a legfelső szintű entitás azonosítója.</span><span class="sxs-lookup"><span data-stu-id="cff3d-232">Lookup is done using the root entity's identifier.</span></span> <span data-ttu-id="cff3d-233">Minden más entitás aggregált a legfelső szintű gyermek, és a legfelső szintű következő mutatók hivatkoznak.</span><span class="sxs-lookup"><span data-stu-id="cff3d-233">Any other entities in the aggregate are children of the root, and are referenced by following pointers from the root.</span></span> 

<span data-ttu-id="cff3d-234">Összesítő célja a modellhez tartozó tranzakciós invariants.</span><span class="sxs-lookup"><span data-stu-id="cff3d-234">The purpose of an aggregate is to model transactional invariants.</span></span> <span data-ttu-id="cff3d-235">A valós életben dolgot kapcsolatok összetett webhelyek rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="cff3d-235">Things in the real world have complex webs of relationships.</span></span> <span data-ttu-id="cff3d-236">Az ügyfelek létre rendelések rendelések tartalmazzák a termékek, termékek szállítók rendelkezik, és így tovább.</span><span class="sxs-lookup"><span data-stu-id="cff3d-236">Customers create orders, orders contain products, products have suppliers, and so on.</span></span> <span data-ttu-id="cff3d-237">Ha az alkalmazás több kapcsolódó objektumot sem módosítja, hogy nem garantálja a konzisztencia?</span><span class="sxs-lookup"><span data-stu-id="cff3d-237">If the application modifies several related objects, how does it guarantee consistency?</span></span> <span data-ttu-id="cff3d-238">Hogyan azt invariants nyomon követheti, és kényszeríteni azokat?</span><span class="sxs-lookup"><span data-stu-id="cff3d-238">How do we keep track of invariants and enforce them?</span></span>  

<span data-ttu-id="cff3d-239">Hagyományos alkalmazások gyakran használt adatbázis-tranzakció konzisztencia érvényesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="cff3d-239">Traditional applications have often used database transactions to enforce consistency.</span></span> <span data-ttu-id="cff3d-240">Az elosztott alkalmazásokban azonban ez gyakran nem valósítható meg.</span><span class="sxs-lookup"><span data-stu-id="cff3d-240">In a distributed application, however, that's often not feasible.</span></span> <span data-ttu-id="cff3d-241">Egyetlen üzleti tranzakció több adattárolókhoz, előfordulhat, hogy span lehet, hogy hosszú ideig futó, vagy külső szolgáltatásokat tartalmazhatnak.</span><span class="sxs-lookup"><span data-stu-id="cff3d-241">A single business transaction may span multiple data stores, or may be long running, or may involve third-party services.</span></span> <span data-ttu-id="cff3d-242">Végső soron is az alkalmazáshoz, nem a réteget, a tartomány szükséges invariants kényszerítésére.</span><span class="sxs-lookup"><span data-stu-id="cff3d-242">Ultimately it's up to the application, not the data layer, to enforce the invariants required for the domain.</span></span> <span data-ttu-id="cff3d-243">Ez milyen összesítések úgy van kialakítva, hogy a modell.</span><span class="sxs-lookup"><span data-stu-id="cff3d-243">That's what aggregates are meant to model.</span></span>

> [!NOTE]
> <span data-ttu-id="cff3d-244">Összesítő állhat egyetlen entitás, gyermek entitások nélkül.</span><span class="sxs-lookup"><span data-stu-id="cff3d-244">An aggregate might consist of a single entity, without child entities.</span></span> <span data-ttu-id="cff3d-245">Mi teszi összesítő a tranzakciós határ.</span><span class="sxs-lookup"><span data-stu-id="cff3d-245">What makes it an aggregate is the transactional boundary.</span></span>

<span data-ttu-id="cff3d-246">**Tartomány-és alkalmazás**.</span><span class="sxs-lookup"><span data-stu-id="cff3d-246">**Domain and application services**.</span></span> <span data-ttu-id="cff3d-247">A DDD terminológiát a szolgáltatás olyan olyan objektum, amely megvalósítja az egyes logikai bármely állapotban tartása nélkül.</span><span class="sxs-lookup"><span data-stu-id="cff3d-247">In DDD terminology, a service is an object that implements some logic without holding any state.</span></span> <span data-ttu-id="cff3d-248">Evans különböztet *tartományi szolgáltatások*, amely foglalják magukban a tartomány programot, és *alkalmazásszolgáltatások*, műszaki funkciókat, például a felhasználói hitelesítést és az SMS küldő nyújt üzenet.</span><span class="sxs-lookup"><span data-stu-id="cff3d-248">Evans distinguishes between *domain services*, which encapsulate domain logic, and *application services*, which provide technical functionality, such as user authentication or sending an SMS message.</span></span> <span data-ttu-id="cff3d-249">Tartományi szolgáltatások több entitás kiterjedő modellként viselkedő gyakran szolgálnak.</span><span class="sxs-lookup"><span data-stu-id="cff3d-249">Domain services are often used to model behavior that spans multiple entities.</span></span> 

> [!NOTE]
> <span data-ttu-id="cff3d-250">A kifejezés *szolgáltatás* a szoftver fejlesztési túl van terhelve.</span><span class="sxs-lookup"><span data-stu-id="cff3d-250">The term *service* is overloaded in software development.</span></span> <span data-ttu-id="cff3d-251">Itt nem közvetlenül kapcsolódik mikroszolgáltatások létrehozására.</span><span class="sxs-lookup"><span data-stu-id="cff3d-251">The definition here is not directly related to microservices.</span></span>

<span data-ttu-id="cff3d-252">**Kapcsolódó**.</span><span class="sxs-lookup"><span data-stu-id="cff3d-252">**Domain events**.</span></span> <span data-ttu-id="cff3d-253">Tartomány események segítségével a rendszer egyéb részeivel értesítése, ha olyan esemény történik.</span><span class="sxs-lookup"><span data-stu-id="cff3d-253">Domain events can be used to notify other parts of the system when something happens.</span></span> <span data-ttu-id="cff3d-254">A neve alapján, mint a kapcsolódó valamit a tartományon belül kell jelenti.</span><span class="sxs-lookup"><span data-stu-id="cff3d-254">As the name suggests, domain events should mean something within the domain.</span></span> <span data-ttu-id="cff3d-255">Például "rekord tábla illesztett" az nem tartományi esemény.</span><span class="sxs-lookup"><span data-stu-id="cff3d-255">For example, "a record was inserted into a table" is not a domain event.</span></span> <span data-ttu-id="cff3d-256">"Egy kézbesítési meg lett szakítva" az tartomány esemény.</span><span class="sxs-lookup"><span data-stu-id="cff3d-256">"A delivery was cancelled" is a domain event.</span></span> <span data-ttu-id="cff3d-257">Tartomány események gyakran mikroszolgáltatások architektúra.</span><span class="sxs-lookup"><span data-stu-id="cff3d-257">Domain events are especially relevant in a microservices architecture.</span></span> <span data-ttu-id="cff3d-258">Mikroszolgáltatások küld, és ne ossza meg adattárolókhoz, mert a tartomány események teszik lehetővé az egymással koordinálására mikroszolgáltatások létrehozására.</span><span class="sxs-lookup"><span data-stu-id="cff3d-258">Because microservices are distributed and don't share data stores, domain events provide a way for microservices to coordinate with each other.</span></span> <span data-ttu-id="cff3d-259">A fejezet [kommunikációs Interservice](./interservice-communication.md) aszinkron üzenetkezelési részletesebben ismerteti.</span><span class="sxs-lookup"><span data-stu-id="cff3d-259">The chapter [Interservice communication](./interservice-communication.md) discusses asynchronous messaging in more detail.</span></span>
 
<span data-ttu-id="cff3d-260">Nincsenek néhány más DDD minták itt nem látható előállítók, a tárolóhelyekkel és a modulok.</span><span class="sxs-lookup"><span data-stu-id="cff3d-260">There are a few other DDD patterns not listed here, including factories, repositories, and modules.</span></span> <span data-ttu-id="cff3d-261">Ha egy mikroszolgáltatási webkiszolgálókból hasznos mintái is lehetnek, ugyanakkor kevesebb vonatkozó mikroszolgáltatási közötti határokat tervezésekor.</span><span class="sxs-lookup"><span data-stu-id="cff3d-261">These can be useful patterns for when you are implementing a microservice, but they are less relevant when designing the boundaries between microservice.</span></span>

## <a name="drone-delivery-applying-the-patterns"></a><span data-ttu-id="cff3d-262">Kézbesítési dron: a minta alkalmazása</span><span class="sxs-lookup"><span data-stu-id="cff3d-262">Drone delivery: Applying the patterns</span></span>

<span data-ttu-id="cff3d-263">Először a forgatókönyvek, amelyet a szállítási, amelyet a környezetben kell kezelni.</span><span class="sxs-lookup"><span data-stu-id="cff3d-263">We start with the scenarios that the Shipping bounded context must handle.</span></span>

- <span data-ttu-id="cff3d-264">Az ügyfél kérhet egy dron a dron kézbesítési szolgáltatás regisztrált üzleti termékek átvételéhez.</span><span class="sxs-lookup"><span data-stu-id="cff3d-264">A customer can request a drone to pick up goods from a business that is registered with the drone delivery service.</span></span>
- <span data-ttu-id="cff3d-265">A küldő a címke (vonalkóddal vagy RFID) helyezhető el a csomagot hoz létre.</span><span class="sxs-lookup"><span data-stu-id="cff3d-265">The sender generates a tag (barcode or RFID) to put on the package.</span></span> 
- <span data-ttu-id="cff3d-266">Egy dron átvételéhez, és a csomag forráshelyéről kézbesíthet a célhelyen.</span><span class="sxs-lookup"><span data-stu-id="cff3d-266">A drone will pick up and deliver a package from the source location to the destination location.</span></span>
- <span data-ttu-id="cff3d-267">Amikor egy ügyfél egy kézbesítési ütemezi, a rendszer biztosítja az Európai műszaki engedély az útvonal-információkat, a időjárási feltételek és a korábbi adatok alapján.</span><span class="sxs-lookup"><span data-stu-id="cff3d-267">When a customer schedules a delivery, the system provides an ETA based on route information, weather conditions, and historical data.</span></span> 
- <span data-ttu-id="cff3d-268">Ha a dron útban, a felhasználó nyomon követheti az aktuális hely és a legújabb Európai.</span><span class="sxs-lookup"><span data-stu-id="cff3d-268">When the drone is in flight, a user can track the current location and the latest ETA.</span></span> 
- <span data-ttu-id="cff3d-269">A csomag egy dron rendelkezik felvenni, amíg az ügyfél egy kézbesítési szüntetheti meg.</span><span class="sxs-lookup"><span data-stu-id="cff3d-269">Until a drone has picked up the package, the customer can cancel a delivery.</span></span>
- <span data-ttu-id="cff3d-270">Az ügyfél a kézbesítési befejezésekor értesítést kap.</span><span class="sxs-lookup"><span data-stu-id="cff3d-270">The customer is notified when the delivery is completed.</span></span>
- <span data-ttu-id="cff3d-271">A küldő kézbesítési megerősítő kérhetnek az ügyfél egy aláírás vagy a nyomtatási ujját formájában.</span><span class="sxs-lookup"><span data-stu-id="cff3d-271">The sender can request delivery confirmation from the customer, in the form of a signature or finger print.</span></span>
- <span data-ttu-id="cff3d-272">Felhasználók befejezett kézbesítési előzményeinek is kereshet.</span><span class="sxs-lookup"><span data-stu-id="cff3d-272">Users can look up the history of a completed delivery.</span></span>

<span data-ttu-id="cff3d-273">A fenti forgatókönyvek a fejlesztői csapat a következő azonosított **entitások**.</span><span class="sxs-lookup"><span data-stu-id="cff3d-273">From these scenarios, the development team identified the following **entities**.</span></span>

- <span data-ttu-id="cff3d-274">Kézbesítési</span><span class="sxs-lookup"><span data-stu-id="cff3d-274">Delivery</span></span>
- <span data-ttu-id="cff3d-275">Csomag</span><span class="sxs-lookup"><span data-stu-id="cff3d-275">Package</span></span>
- <span data-ttu-id="cff3d-276">Dron</span><span class="sxs-lookup"><span data-stu-id="cff3d-276">Drone</span></span>
- <span data-ttu-id="cff3d-277">Fiók</span><span class="sxs-lookup"><span data-stu-id="cff3d-277">Account</span></span>
- <span data-ttu-id="cff3d-278">Megerősítés</span><span class="sxs-lookup"><span data-stu-id="cff3d-278">Confirmation</span></span>
- <span data-ttu-id="cff3d-279">Értesítés</span><span class="sxs-lookup"><span data-stu-id="cff3d-279">Notification</span></span>
- <span data-ttu-id="cff3d-280">Címke</span><span class="sxs-lookup"><span data-stu-id="cff3d-280">Tag</span></span>

<span data-ttu-id="cff3d-281">Az első négy, a kézbesítés, a csomag, a dron és a fiók, nincs minden **összesítések** , amelyek egységessége határok jelölik.</span><span class="sxs-lookup"><span data-stu-id="cff3d-281">The first four, Delivery, Package, Drone, and Account, are all **aggregates** that represent transactional consistency boundaries.</span></span> <span data-ttu-id="cff3d-282">Visszaigazolások és értesítések gyermek entitásai számára kézbesítések, és címkék alárendelt entitások csomagok.</span><span class="sxs-lookup"><span data-stu-id="cff3d-282">Confirmations and Notifications are child entities of Deliveries, and Tags are child entities of Packages.</span></span> 

<span data-ttu-id="cff3d-283">A **objektumok érték** Ez a kialakítás például a hely, az Európai, a PackageWeight és a PackageSize.</span><span class="sxs-lookup"><span data-stu-id="cff3d-283">The **value objects** in this design include Location, ETA, PackageWeight, and PackageSize.</span></span> 

<span data-ttu-id="cff3d-284">Mutatja be, ez a kézbesítési összesítés UML ábrázoló diagram.</span><span class="sxs-lookup"><span data-stu-id="cff3d-284">To illustrate, here is a UML diagram of the Delivery aggregate.</span></span> <span data-ttu-id="cff3d-285">Figyelje meg, hogy rendelkezik-e további összesítést, beleértve a fiók, a csomag és a dron hivatkozik.</span><span class="sxs-lookup"><span data-stu-id="cff3d-285">Notice that it holds references to other aggregates, including Account, Package, and Drone.</span></span>

![](./images/delivery-entity.png)

<span data-ttu-id="cff3d-286">Két kapcsolódó van:</span><span class="sxs-lookup"><span data-stu-id="cff3d-286">There are two domain events:</span></span>

- <span data-ttu-id="cff3d-287">Míg egy dron útban, a dron entitás elküldi a dron hely és az állapot (üzenetsoroktól, szállítási) leíró DroneStatus események.</span><span class="sxs-lookup"><span data-stu-id="cff3d-287">While a drone is in flight, the Drone entity sends DroneStatus events that describe the drone's location and status (in-flight, landed).</span></span>

- <span data-ttu-id="cff3d-288">A szállítási entitás DeliveryTracking az eseményeket egy szállítási megváltozásakor küldi.</span><span class="sxs-lookup"><span data-stu-id="cff3d-288">The Delivery entity sends DeliveryTracking events whenever the stage of a delivery changes.</span></span> <span data-ttu-id="cff3d-289">Ezek közé tartozik a DeliveryCreated, DeliveryRescheduled, DeliveryHeadedToDropoff és DeliveryCompleted.</span><span class="sxs-lookup"><span data-stu-id="cff3d-289">These include DeliveryCreated, DeliveryRescheduled, DeliveryHeadedToDropoff, and DeliveryCompleted.</span></span> 

<span data-ttu-id="cff3d-290">Figyelje meg, hogy ezek az események leírása dolgot bíró belül a modell.</span><span class="sxs-lookup"><span data-stu-id="cff3d-290">Notice that these events describe things that are meaningful within the domain model.</span></span> <span data-ttu-id="cff3d-291">Írja le, valamit a tartománnyal kapcsolatos információk, és egy adott programozási nyelv szerkezet nem kötődik.</span><span class="sxs-lookup"><span data-stu-id="cff3d-291">They describe something about the domain, and aren't tied to a particular programming language construct.</span></span>

<span data-ttu-id="cff3d-292">A fejlesztői csapat azonosított működését, ami nem fér el szépen minden eddigi leírt entitások egy további területén.</span><span class="sxs-lookup"><span data-stu-id="cff3d-292">The development team identified one more area of functionality, which doesn't fit neatly into any of the entities described so far.</span></span> <span data-ttu-id="cff3d-293">A rendszer egyes részei kell koordinálja ütemezés vagy frissítésekor. a kézbesítési részt lépéseket.</span><span class="sxs-lookup"><span data-stu-id="cff3d-293">Some part of the system must coordinate all of the steps involved in scheduling or updating a delivery.</span></span> <span data-ttu-id="cff3d-294">Ezért, a fejlesztői csapat hozzá két **tartományi szolgáltatások** terve: egy *Feladatütemező* koordináló a lépéseket, és egy *felügyelő* , amely az egyes állapotának figyelése lépés annak észleléséhez, hogy olyan lépéseket a sikertelen vagy túllépte az időkorlátot. Ez a módosítás a [Feladatütemező ügynök felügyelő mintát](../patterns/scheduler-agent-supervisor.md).</span><span class="sxs-lookup"><span data-stu-id="cff3d-294">Therefore, the development team added two **domain services** to the design: a *Scheduler* that coordinates the steps, and a *Supervisor* that monitors the status of each step, in order to detect whether any steps have failed or timed out. This is a variation of the [Scheduler Agent Supervisor pattern](../patterns/scheduler-agent-supervisor.md).</span></span>

![](./images/drone-ddd.png)

> [!div class="nextstepaction"]
> [<span data-ttu-id="cff3d-295">Mikroszolgáltatási határok azonosítása</span><span class="sxs-lookup"><span data-stu-id="cff3d-295">Identifying microservice boundaries</span></span>](./microservice-boundaries.md)
