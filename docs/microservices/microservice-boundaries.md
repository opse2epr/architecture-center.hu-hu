---
title: Mikroszolgáltatások határainak azonosítása
description: Mikroszolgáltatások határainak azonosítása.
author: MikeWasson
ms.date: 10/23/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: microservices
ms.openlocfilehash: 961dd98081978c312ca6e0e347c66bef70f01624
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 01/23/2019
ms.locfileid: "54484193"
---
# <a name="designing-microservices-identifying-microservice-boundaries"></a><span data-ttu-id="4aa2b-103">Mikroszolgáltatások tervezése: Mikroszolgáltatások határainak azonosítása</span><span class="sxs-lookup"><span data-stu-id="4aa2b-103">Designing microservices: Identifying microservice boundaries</span></span>

<span data-ttu-id="4aa2b-104">Mi az a megfelelő méretű, a mikroszolgáltatások?</span><span class="sxs-lookup"><span data-stu-id="4aa2b-104">What is the right size for a microservice?</span></span> <span data-ttu-id="4aa2b-105">Gyakran Hallott valamit a hatását, "túl nagy és túl kicsi" &mdash; , és bár ez természetesen megfelelő, nem a gyakorlatban nagyon hasznos.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-105">You often hear something to the effect of, "not too big and not too small" &mdash; and while that's certainly correct, it's not very helpful in practice.</span></span> <span data-ttu-id="4aa2b-106">De ha elindítja a gondosan megtervezett tartományi modell, sokkal egyszerűbb mikroszolgáltatás-alapú vonatkozó döntések meghozatalát.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-106">But if you start from a carefully designed domain model, it's much easier to reason about microservices.</span></span>

![Kapcsolódó kontextusokat ábrája](./images/bounded-contexts.png)

## <a name="from-domain-model-to-microservices"></a><span data-ttu-id="4aa2b-108">A tartományi modellben mikroszolgáltatások</span><span class="sxs-lookup"><span data-stu-id="4aa2b-108">From domain model to microservices</span></span>

<span data-ttu-id="4aa2b-109">Az a [előző fejezetben](./domain-analysis.md), a Drone Delivery alkalmazás kapcsolódó kontextusokat készletét meghatározott.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-109">In the [previous chapter](./domain-analysis.md), we defined a set of bounded contexts for the Drone Delivery application.</span></span> <span data-ttu-id="4aa2b-110">A kapcsolódó kontextusokat, ezek a szállítási korlátozott környezet egyik jobban megvizsgálta és azonosítja az entitásokban, az összesítések, és a tartományi szolgáltatásokat, amelyek korlátozott környezet.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-110">Then we looked more closely at one of these bounded contexts, the Shipping bounded context, and identified a set of entities, aggregates, and domain services for that bounded context.</span></span>

<span data-ttu-id="4aa2b-111">Most már készen állunk nyissa meg a tartományi modellben alkalmazás-tervezés.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-111">Now we're ready to go from domain model to application design.</span></span> <span data-ttu-id="4aa2b-112">Itt látható, amely mikroszolgáltatások származtassa a tartományi modellben használható.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-112">Here's an approach that you can use to derive microservices from the domain model.</span></span>

1. <span data-ttu-id="4aa2b-113">Kezdje egy körülhatárolt kontextus.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-113">Start with a bounded context.</span></span> <span data-ttu-id="4aa2b-114">A funkció a mikroszolgáltatások általában nem kell span egynél több körülhatárolt kontextus.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-114">In general, the functionality in a microservice should not span more than one bounded context.</span></span> <span data-ttu-id="4aa2b-115">Definíció szerint egy körülhatárolt kontextus egy adott modell határait jelöli meg.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-115">By definition, a bounded context marks the boundary of a particular domain model.</span></span> <span data-ttu-id="4aa2b-116">Ha azt tapasztalja, hogy mikroszolgáltatások együtt eredményét-e ugyanaz a tartományi modellekkel, lépjen vissza és finomíthatja a tartományelemzés szükség lehet, hogy ez.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-116">If you find that a microservice mixes different domain models together, that's a sign that you may need to go back and refine your domain analysis.</span></span>

2. <span data-ttu-id="4aa2b-117">Ezután tekintse meg az összesítések, a tartományi modellben.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-117">Next, look at the aggregates in your domain model.</span></span> <span data-ttu-id="4aa2b-118">Összesítések között gyakran érdemes mikroszolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-118">Aggregates are often good candidates for microservices.</span></span> <span data-ttu-id="4aa2b-119">Egy jól megtervezett összesítés szolgáltatásnak számos egy jól megtervezett mikroszolgáltatás jellemzői, például:</span><span class="sxs-lookup"><span data-stu-id="4aa2b-119">A well-designed aggregate exhibits many of the characteristics of a well-designed microservice, such as:</span></span>

    - <span data-ttu-id="4aa2b-120">Összesítés üzleti követelmények, nem pedig például az adatok elérése vagy az üzenetkezelési a technikai problémák származik.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-120">An aggregate is derived from business requirements, rather than technical concerns such as data access or messaging.</span></span>
    - <span data-ttu-id="4aa2b-121">Összesítés magas működési kohézióval kell rendelkezniük.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-121">An aggregate should have high functional cohesion.</span></span>
    - <span data-ttu-id="4aa2b-122">Összesítés az adatmegőrzés szegélyére.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-122">An aggregate is a boundary of persistence.</span></span>
    - <span data-ttu-id="4aa2b-123">Összesítések lazán kell lennie.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-123">Aggregates should be loosely coupled.</span></span>

3. <span data-ttu-id="4aa2b-124">Tartományi szolgáltatások között is érdemes mikroszolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-124">Domain services are also good candidates for microservices.</span></span> <span data-ttu-id="4aa2b-125">Tartományi szolgáltatások állapot nélküli műveletek, amelyek között több összesítések.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-125">Domain services are stateless operations across multiple aggregates.</span></span> <span data-ttu-id="4aa2b-126">Egy tipikus példája egy munkafolyamatot, amely magában foglalja a több mikroszolgáltatás-alapú.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-126">A typical example is a workflow that involves several microservices.</span></span> <span data-ttu-id="4aa2b-127">Példa erre a Drone Delivery alkalmazás lesz látható.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-127">We'll see an example of this in the Drone Delivery application.</span></span>

4. <span data-ttu-id="4aa2b-128">Végül vegye figyelembe a nem funkcionális követelményeket.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-128">Finally, consider non-functional requirements.</span></span> <span data-ttu-id="4aa2b-129">Tekintse meg a tényezők, például a csapat mérete, adattípusok, technológiák, méretezhetőségi követelményeinek, rendelkezésre állással és biztonsági követelményeket.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-129">Look at factors such as team size, data types, technologies, scalability requirements, availability requirements, and security requirements.</span></span> <span data-ttu-id="4aa2b-130">Ezek a tényezők vezethet, hogy tovább bontható fel a mikroszolgáltatások két vagy több kisebb servicesbe, vagy ennek az ellenkezője tegye, és néhány a mikroszolgáltatások egyesítése egy.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-130">These factors may lead you to further decompose a microservice into two or more smaller services, or do the opposite and combine several microservices into one.</span></span>

<span data-ttu-id="4aa2b-131">Miután azonosította a mikroszolgáltatások az alkalmazásban, ellenőrizze a kialakítás az alábbi feltételek alapján:</span><span class="sxs-lookup"><span data-stu-id="4aa2b-131">After you identify the microservices in your application, validate your design against the following criteria:</span></span>

- <span data-ttu-id="4aa2b-132">Minden szolgáltatás egyetlen felelősséget rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-132">Each service has a single responsibility.</span></span>
- <span data-ttu-id="4aa2b-133">Nincsenek forgalmas hívások nem szolgáltatások között.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-133">There are no chatty calls between services.</span></span> <span data-ttu-id="4aa2b-134">Ha felosztása két szolgáltatás funkciókat okoz, ha túlságosan forgalmas meg, ezek a függvények az egyazon szolgáltatáshoz tartozó szokásostól eltérő lehet.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-134">If splitting functionality into two services causes them to be overly chatty, it may be a symptom that these functions belong in the same service.</span></span>
- <span data-ttu-id="4aa2b-135">Egyes szolgáltatások általában elég kis méretűek, hogy azt is lehet fejlesztőcsapata által készített egy kis egymástól függetlenül működik.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-135">Each service is small enough that it can be built by a small team working independently.</span></span>
- <span data-ttu-id="4aa2b-136">Nincsenek két vagy több szolgáltatás zárolási lépésben telepíteni fog igénylő közötti függőségek.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-136">There are no inter-dependencies that will require two or more services to be deployed in lock-step.</span></span> <span data-ttu-id="4aa2b-137">Mindig kell egy szolgáltatás telepíthető bármilyen egyéb szolgáltatás újbóli telepítése nélkül.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-137">It should always be possible to deploy a service without redeploying any other services.</span></span>
- <span data-ttu-id="4aa2b-138">Szolgáltatások nem szorosan összekapcsolt, és egymástól függetlenül tovább lehessen fejleszteni.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-138">Services are not tightly coupled, and can evolve independently.</span></span>
- <span data-ttu-id="4aa2b-139">A szolgáltatások határait nem hoz létre a problémák adatkonzisztencia vagy -integritást.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-139">Your service boundaries will not create problems with data consistency or integrity.</span></span> <span data-ttu-id="4aa2b-140">Egyes esetekben fontos funkciók üzembe egyetlen mikroszolgáltatást adatkonzisztencia karbantartásához.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-140">Sometimes it's important to maintain data consistency by putting functionality into a single microservice.</span></span> <span data-ttu-id="4aa2b-141">Ezzel együtt az üzemeltetés, vegye figyelembe, hogy valóban szükséges-e konzisztenciát.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-141">That said, consider whether you really need strong consistency.</span></span> <span data-ttu-id="4aa2b-142">Végleges konzisztencia az elosztott rendszerekben címzéshez stratégiák, és a szolgáltatások gyakran decomposing előnyei nyomósabbak a végleges konzisztencia kezelése kihívást.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-142">There are strategies for addressing eventual consistency in a distributed system, and the benefits of decomposing services often outweigh the challenges of managing eventual consistency.</span></span>

<span data-ttu-id="4aa2b-143">Mindenekelőtt fontos pragmatikus, és ne feledje, hogy tartományvezérelt tervezési iteratív folyamat.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-143">Above all, it's important to be pragmatic, and remember that domain-driven design is an iterative process.</span></span> <span data-ttu-id="4aa2b-144">Ha kétségei vannak, indítsa el a további coarse-grained mikroszolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-144">When in doubt, start with more coarse-grained microservices.</span></span> <span data-ttu-id="4aa2b-145">Egyszerűbb, mint a funkció számos meglévő mikroszolgáltatások túlnyúló újrabontás mikroszolgáltatások felosztása két kisebb szolgáltatásra.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-145">Splitting a microservice into two smaller services is easier than refactoring functionality across several existing microservices.</span></span>
  
## <a name="drone-delivery-defining-the-microservices"></a><span data-ttu-id="4aa2b-146">Drone Delivery: A mikroszolgáltatások meghatározó</span><span class="sxs-lookup"><span data-stu-id="4aa2b-146">Drone Delivery: Defining the microservices</span></span>

<span data-ttu-id="4aa2b-147">Idézze, hogy a fejlesztői csapat kellett azonosítja a négy összesítések &mdash; kézbesítési, a csomag, a Drone és a fiók &mdash; és a két tartomány szolgáltatás, az ütemező és a felügyelő.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-147">Recall that the development team had identified the four aggregates &mdash; Delivery, Package, Drone, and Account &mdash; and two domain services, Scheduler and Supervisor.</span></span>

<span data-ttu-id="4aa2b-148">Teljesítés és a Csomagmegosztás deduplikációra nyilvánvaló mikroszolgáltatás-alapú.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-148">Delivery and Package are obvious candidates for microservices.</span></span> <span data-ttu-id="4aa2b-149">Az ütemező és a felügyelő koordinálja a tevékenységét más mikroszolgáltatás-alapú, ezért érdemes megvalósítani a ezeket domain servicesben mikroszolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-149">The Scheduler and Supervisor coordinate the activities performed by other microservices, so it makes sense to implement these domain services as microservices.</span></span>

<span data-ttu-id="4aa2b-150">Drónos és fiókot is érdekes, mert egyéb kapcsolódó kontextusokat tartoznak.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-150">Drone and Account are interesting because they belong to other bounded contexts.</span></span> <span data-ttu-id="4aa2b-151">Az egyik lehetőség az ütemező a Drone meghívásához és fiókot, amelyet környezetek közvetlenül.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-151">One option is for the Scheduler to call the Drone and Account bounded contexts directly.</span></span> <span data-ttu-id="4aa2b-152">Egy másik lehetőség, a Drone és a fiók mikroszolgáltatások belül a szállítási korlátozott környezet létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-152">Another option is to create Drone and Account microservices inside the Shipping bounded context.</span></span> <span data-ttu-id="4aa2b-153">Ilyen mikroszolgáltatásokból lenne résidőkiosztással között a kapcsolódó kontextusokat, API-k és adatsémák, amely a szállítási címhez tartozó környezeti érdemesebb teszi elérhetővé.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-153">These microservices would mediate between the bounded contexts, by exposing APIs or data schemas that are more suited to the Shipping context.</span></span>

<span data-ttu-id="4aa2b-154">A Drone, valamint a fiók, amelyet környezetekben ez az útmutató nem terjed vannak, így azok utánzatként funkcionáló szolgáltatások referenciaimplementáció létrehoztunk.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-154">The details of the Drone and Account bounded contexts are beyond the scope of this guidance, so we created mock services for them in our reference implementation.</span></span> <span data-ttu-id="4aa2b-155">De Íme néhány tényező ebben a helyzetben érdemes figyelembe venni:</span><span class="sxs-lookup"><span data-stu-id="4aa2b-155">But here are some factors to consider in this situation:</span></span>

- <span data-ttu-id="4aa2b-156">Mi az a hálózati többletterhelést okoz, közvetlenül a többi körülhatárolt kontextus-be irányuló hívás?</span><span class="sxs-lookup"><span data-stu-id="4aa2b-156">What is the network overhead of calling directly into the other bounded context?</span></span>

- <span data-ttu-id="4aa2b-157">Ideális a sémát a többi körülhatárolt kontextus az ebben a környezetben, vagy jobban szeretné, hogy egy sémát, amely a körülhatárolt kontextus személyre szabott?</span><span class="sxs-lookup"><span data-stu-id="4aa2b-157">Is the data schema for the other bounded context suitable for this context, or is it better to have a schema that's tailored to this bounded context?</span></span>

- <span data-ttu-id="4aa2b-158">Az a többi körülhatárolt kontextus egy korábbi rendszer?</span><span class="sxs-lookup"><span data-stu-id="4aa2b-158">Is the other bounded context a legacy system?</span></span> <span data-ttu-id="4aa2b-159">Ha tehát, előfordulhat, hogy létrehoz egy szolgáltatást, amely indextáblaként egy [sérülésgátló réteg](../patterns/anti-corruption-layer.md) az átalakításra a régi rendszer és a modern alkalmazás között.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-159">If so, you might create a service that acts as an [anti-corruption layer](../patterns/anti-corruption-layer.md) to translate between the legacy system and the modern application.</span></span>

- <span data-ttu-id="4aa2b-160">Mi az a csapat struktúra?</span><span class="sxs-lookup"><span data-stu-id="4aa2b-160">What is the team structure?</span></span> <span data-ttu-id="4aa2b-161">Az egyszerű, a többi körülhatárolt kontextus felelős csapat kommunikálni?</span><span class="sxs-lookup"><span data-stu-id="4aa2b-161">Is it easy to communicate with the team that's responsible for the other bounded context?</span></span> <span data-ttu-id="4aa2b-162">Ha nem, egy szolgáltatás, amely a két környezet közötti közvetítő létrehozása segíthet közötti kommunikáció költségeinek csökkentése érdekében.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-162">If not, creating a service that mediates between the two contexts can help to mitigate the cost of cross-team communication.</span></span>

<span data-ttu-id="4aa2b-163">Az eddigi azt még nem tekinthető minden olyan nem funkcionális követelmények.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-163">So far, we haven't considered any non-functional requirements.</span></span> <span data-ttu-id="4aa2b-164">Az alkalmazás átviteli sebességet megkövetelő mértékegységeként, a fejlesztői csapat úgy döntött, hogy hozzon létre egy külön Adatbetöltési mikroszolgáltatás, amely az ügyfél kérelmek feldolgozására.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-164">Thinking about the application's throughput requirements, the development team decided to create a separate Ingestion microservice that is responsible for ingesting client requests.</span></span> <span data-ttu-id="4aa2b-165">A mikroszolgáltatások megvalósítandó [Terheléskiegyenlítés](../patterns/queue-based-load-leveling.md) feldolgozásra a pufferbe írja a bejövő kérelmek.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-165">This microservice will implement [load leveling](../patterns/queue-based-load-leveling.md) by putting incoming requests into a buffer for processing.</span></span> <span data-ttu-id="4aa2b-166">Az ütemező beolvassa a kérelmeket a buffer szolgáltatásból származó és a munkafolyamat végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-166">The Scheduler will read the requests from the buffer and execute the workflow.</span></span>

<span data-ttu-id="4aa2b-167">Nem funkcionális követelmények a csapata egy kiegészítő szolgáltatás létrehozásához vezetett.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-167">Non-functional requirements led the team to create one additional service.</span></span> <span data-ttu-id="4aa2b-168">A szolgáltatásokhoz, amennyiben az ütemezés és a csomagok továbbítása valós időben a folyamat lett.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-168">All of the services so far have been about the process of scheduling and delivering packages in real time.</span></span> <span data-ttu-id="4aa2b-169">De a rendszer is kell tárolnia minden szállítás előzményei a data-elemzéshez hosszú távú tároláshoz.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-169">But the system also needs to store the history of every delivery in long-term storage for data analysis.</span></span> <span data-ttu-id="4aa2b-170">A csapata tekintett feladata a Licenctovábbítási szolgáltatása, ami.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-170">The team considered making this the responsibility of the Delivery service.</span></span> <span data-ttu-id="4aa2b-171">De az adattárolási követelmények is igen különböző az előzményadatokat és átvitel közben az operations (lásd: [adatok szempontok](./data-considerations.md)).</span><span class="sxs-lookup"><span data-stu-id="4aa2b-171">However, the data storage requirements are quite different for historical analysis versus in-flight operations (see [Data considerations](./data-considerations.md)).</span></span> <span data-ttu-id="4aa2b-172">Ezért a csapat úgy döntött, hogy hozzon létre egy külön szállítás előzményei szolgáltatás, amely DeliveryTracking események kézbesítés a szolgáltatás figyelésére, és írja az események, hosszú távú tároláshoz.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-172">Therefore, the team decided to create a separate Delivery History service, which will listen for DeliveryTracking events from the Delivery service and write the events into long-term storage.</span></span>

<span data-ttu-id="4aa2b-173">Az alábbi ábrán látható ezen a ponton a terv:</span><span class="sxs-lookup"><span data-stu-id="4aa2b-173">The following diagram shows the design at this point:</span></span>

![Tervezési diagramja](./images/microservices.png)

## <a name="choosing-a-compute-option"></a><span data-ttu-id="4aa2b-175">Számítási lehetőség kiválasztása</span><span class="sxs-lookup"><span data-stu-id="4aa2b-175">Choosing a compute option</span></span>

<span data-ttu-id="4aa2b-176">A *számítás* kifejezés azon számítási erőforrások futtatási modelljére utal, amelyeken az alkalmazás fut.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-176">The term *compute* refers to the hosting model for the computing resources that your application runs on.</span></span> <span data-ttu-id="4aa2b-177">A mikroszolgáltatási architektúrában a két módszer különösen népszerű:</span><span class="sxs-lookup"><span data-stu-id="4aa2b-177">For a microservices architecture, two approaches are especially popular:</span></span>

- <span data-ttu-id="4aa2b-178">A szolgáltatás az orchestrator által felügyelt dedikált csomópontok (virtuális gépek) futó szolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-178">A service orchestrator that manages services running on dedicated nodes (VMs).</span></span>
- <span data-ttu-id="4aa2b-179">A functions egy kiszolgáló nélküli architektúra használatával szolgáltatásként (FaaS).</span><span class="sxs-lookup"><span data-stu-id="4aa2b-179">A serverless architecture using functions as a service (FaaS).</span></span>

<span data-ttu-id="4aa2b-180">Bár ezek nem az egyetlen lehetőség, mind a mikroszolgáltatások megközelítéseket.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-180">While these aren't the only options, they are both proven approaches to building microservices.</span></span> <span data-ttu-id="4aa2b-181">Egy alkalmazás tartalmazhat mindkét módszerénél.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-181">An application might include both approaches.</span></span>

### <a name="service-orchestrators"></a><span data-ttu-id="4aa2b-182">Szolgáltatás vezénylők</span><span class="sxs-lookup"><span data-stu-id="4aa2b-182">Service orchestrators</span></span>

<span data-ttu-id="4aa2b-183">Az orchestrator szolgáltatások használatával történő üzembe helyezéséről kapcsolódó feladatokat végzi.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-183">An orchestrator handles tasks related to deploying and managing a set of services.</span></span> <span data-ttu-id="4aa2b-184">Ezek a feladatok közé tartozik például a szolgáltatások csomópontok,-szolgáltatások újraindítása a nem megfelelő állapotú szolgáltatások állapotának figyelése, terheléselosztási hálózati forgalom elosztását a szolgáltatáspéldány, a szolgáltatásészlelés, a szolgáltatáspéldányok számának méretezése és alkalmazása konfiguráció frissítéseit.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-184">These tasks include placing services on nodes, monitoring the health of services, restarting unhealthy services, load balancing network traffic across service instances, service discovery, scaling the number of instances of a service, and applying configuration updates.</span></span> <span data-ttu-id="4aa2b-185">Népszerű szervezőeszközökkel helyezheti őket a Kubernetes, a Service Fabric, DC/OS és Docker Swarm közé tartozik.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-185">Popular orchestrators include Kubernetes, Service Fabric, DC/OS, and Docker Swarm.</span></span>

<span data-ttu-id="4aa2b-186">Az Azure platformon vegye figyelembe a következő beállításokat:</span><span class="sxs-lookup"><span data-stu-id="4aa2b-186">On the Azure platform, consider the following options:</span></span>

- <span data-ttu-id="4aa2b-187">[Az Azure Kubernetes Service](/azure/aks/) (AKS) egy olyan felügyelt Kubernetes szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-187">[Azure Kubernetes Service](/azure/aks/) (AKS) is a managed Kubernetes service.</span></span> <span data-ttu-id="4aa2b-188">Az AKS rendelkezések Kubernetes és közzéteszi a Kubernetes API-végpontokat, de üzemelteti, és felügyeli a Kubernetes vezérlősík hajt végre automatikus frissítésekre és automatikus javításokat, automatikus skálázást és más felügyeleti feladatokat.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-188">AKS provisions Kubernetes and exposes the Kubernetes API endpoints, but hosts and manages the Kubernetes control plane, performing automated upgrades, automated patching, autoscaling, and other management tasks.</span></span> <span data-ttu-id="4aa2b-189">Is felfoghatók AKS, hogy a "Kubernetes API-k szolgáltatás."</span><span class="sxs-lookup"><span data-stu-id="4aa2b-189">You can think of AKS as being "Kubernetes APIs as a service."</span></span>

- <span data-ttu-id="4aa2b-190">[A Service Fabric](/azure/service-fabric/) csomagolása, üzembe helyezése és kezelése a mikroszolgáltatások egy elosztott rendszerplatform.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-190">[Service Fabric](/azure/service-fabric/) is a distributed systems platform for packaging, deploying, and managing microservices.</span></span> <span data-ttu-id="4aa2b-191">Mikroszolgáltatások Service Fabric telepíthetők, tárolók, bináris végrehajtható fájlok, vagy mint [Reliable Services](/azure/service-fabric/service-fabric-reliable-services-introduction).</span><span class="sxs-lookup"><span data-stu-id="4aa2b-191">Microservices can be deployed to Service Fabric as containers, as binary executables, or as [Reliable Services](/azure/service-fabric/service-fabric-reliable-services-introduction).</span></span> <span data-ttu-id="4aa2b-192">A Reliable Services programozási modell révén szolgáltatások közvetlenül a Service Fabric programozási API-kat a rendszer, a jelentés állapotának lekérdezése, konfigurálásról és a kód módosításait az értesítések fogadásához és egyéb szolgáltatások észlelését.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-192">Using the Reliable Services programming model, services can directly use Service Fabric programming APIs to query the system, report health, receive notifications about configuration and code changes, and discover other services.</span></span> <span data-ttu-id="4aa2b-193">A Service Fabric legfontosabb különbséget az állapotalapú szolgáltatások használatával erős koncentrálhat [a Reliable Collections](/azure/service-fabric/service-fabric-reliable-services-reliable-collections).</span><span class="sxs-lookup"><span data-stu-id="4aa2b-193">A key differentiation with Service Fabric is its strong focus on building stateful services using [Reliable Collections](/azure/service-fabric/service-fabric-reliable-services-reliable-collections).</span></span>

- <span data-ttu-id="4aa2b-194">[Az Azure Container Service](/azure/container-service/) (ACS) egy Azure-szolgáltatás, amely lehetővé teszi egy üzemkész DC/OS, Docker Swarm vagy Kubernetes-fürt üzembe helyezése.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-194">[Azure Container Service](/azure/container-service/) (ACS) is an Azure service that lets you deploy a production-ready DC/OS, Docker Swarm, or Kubernetes cluster.</span></span>

  > [!NOTE]
  > <span data-ttu-id="4aa2b-195">Kubernetes ACS által támogatott, bár javasoljuk az AKS az Azure-on futó Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-195">Although Kubernetes is supported by ACS, we recommended AKS for running Kubernetes on Azure.</span></span> <span data-ttu-id="4aa2b-196">Az AKS továbbfejlesztett felügyeleti funkciók és a költséget biztosít.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-196">AKS provides enhanced management capabilities and cost benefits.</span></span>

### <a name="containers"></a><span data-ttu-id="4aa2b-197">Tárolók</span><span class="sxs-lookup"><span data-stu-id="4aa2b-197">Containers</span></span>

<span data-ttu-id="4aa2b-198">Más személyek beszélni tárolók és mikroszolgáltatások ugyanaz, mintha.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-198">Sometimes people talk about containers and microservices as if they were the same thing.</span></span> <span data-ttu-id="4aa2b-199">Bár ez nem igaz &mdash; nem szükséges tárolók, mikroszolgáltatások &mdash; tárolók rendelkezik, amely különösen a mikroszolgáltatások, mint például előnyöket:</span><span class="sxs-lookup"><span data-stu-id="4aa2b-199">While that's not true &mdash; you don't need containers to build microservices &mdash; containers do have some benefits that are particularly relevant to microservices, such as:</span></span>

- <span data-ttu-id="4aa2b-200">**Hordozhatóság**.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-200">**Portability**.</span></span> <span data-ttu-id="4aa2b-201">Tárolórendszerkép csomag egy különálló futtató anélkül, hogy kódtárakat vagy egyéb függőségek telepítése.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-201">A container image is a standalone package that runs without needing to install libraries or other dependencies.</span></span> <span data-ttu-id="4aa2b-202">Így azok egyszerűen üzembe helyezhetők.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-202">That makes them easy to deploy.</span></span> <span data-ttu-id="4aa2b-203">Tárolók indíthatók és úgy regisztrálhat új példányokat további terhelés kezeléséhez, illetve a csomóponthibák gyorsan, leállt.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-203">Containers can be started and stopped quickly, so you can spin up new instances to handle more load or to recover from node failures.</span></span>

- <span data-ttu-id="4aa2b-204">**Sűrűségű**.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-204">**Density**.</span></span> <span data-ttu-id="4aa2b-205">Tárolók olyan egyszerűsített képest a futó virtuális gép, mert ugyanazt az operációs rendszer-erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-205">Containers are lightweight compared with running a virtual machine, because they share OS resources.</span></span> <span data-ttu-id="4aa2b-206">Amely lehetővé teszi, hogy több tároló telepítését egyetlen csomópont, amely akkor különösen hasznos, ha az alkalmazást több kis szolgáltatásra áll.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-206">That makes it possible to pack multiple containers onto a single node, which is especially useful when the application consists of many small services.</span></span>

- <span data-ttu-id="4aa2b-207">**Erőforrás-elkülönítést**.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-207">**Resource isolation**.</span></span> <span data-ttu-id="4aa2b-208">Korlátozhatja a mennyi memóriát és CPU, amely elérhető egy tárolóba, amely segít annak biztosításában, hogy egy elszabadult folyamat nem lefoglalhat gazdagép-erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-208">You can limit the amount of memory and CPU that is available to a container, which can help to ensure that a runaway process doesn't exhaust the host resources.</span></span> <span data-ttu-id="4aa2b-209">Tekintse meg a [válaszfal minta](../patterns/bulkhead.md) további információt.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-209">See the [Bulkhead pattern](../patterns/bulkhead.md) for more information.</span></span>

### <a name="serverless-functions-as-a-service"></a><span data-ttu-id="4aa2b-210">Kiszolgáló nélküli (Functions szolgáltatás)</span><span class="sxs-lookup"><span data-stu-id="4aa2b-210">Serverless (Functions as a Service)</span></span>

<span data-ttu-id="4aa2b-211">Az egy [kiszolgáló nélküli](https://azure.microsoft.com/solutions/serverless/) architektúra, nem kell felügyelnie a virtuális gépek vagy a virtuális hálózati infrastruktúra.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-211">With a [serverless](https://azure.microsoft.com/solutions/serverless/) architecture, you don't manage the VMs or the virtual network infrastructure.</span></span> <span data-ttu-id="4aa2b-212">Ehelyett kell telepíteni, kód és az üzemeltetési szolgáltatás kezeli a kód üzembe egy virtuális Gépet az alakzatot, és futtassa a jelentést.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-212">Instead, you deploy code and the hosting service handles putting that code onto a VM and executing it.</span></span> <span data-ttu-id="4aa2b-213">Ez a megközelítés általában kis részletes funkciók, amelyek koordinált eseményalapú eseményindítókat használó alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-213">This approach tends to favor small granular functions that are coordinated using event-based triggers.</span></span> <span data-ttu-id="4aa2b-214">Ha például egy üzenetet egy üzenetsorba való elhelyezni kívánt is kiválthatják a függvény, amely az üzenetsorból olvas, és feldolgozza az üzenetet.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-214">For example, a message being placed onto a queue might trigger a function that reads from the queue and processes the message.</span></span>

<span data-ttu-id="4aa2b-215">[Az Azure Functions] [ functions] egy kiszolgáló nélküli számítási szolgáltatás, amely támogatja a különböző függvény eseményindítók, beleértve a HTTP-kérelmekre, Service Bus-üzenetsorok és az Event Hubs-események.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-215">[Azure Functions][functions] is a serverless compute service that supports various function triggers, including HTTP requests, Service Bus queues, and Event Hubs events.</span></span> <span data-ttu-id="4aa2b-216">Teljes listáját lásd: [Azure Functions eseményindítók és kötések fogalmak][functions-triggers].</span><span class="sxs-lookup"><span data-stu-id="4aa2b-216">For a complete list, see [Azure Functions triggers and bindings concepts][functions-triggers].</span></span> <span data-ttu-id="4aa2b-217">Emellett érdemes lehet [Azure Event Grid][event-grid], ez egy felügyelt esemény-útválasztó szolgáltatás az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-217">Also consider [Azure Event Grid][event-grid], which is a managed event routing service in Azure.</span></span>

<!-- markdownlint-disable MD026 -->

### <a name="orchestrator-or-serverless"></a><span data-ttu-id="4aa2b-218">Az orchestrator vagy a kiszolgáló nélküli?</span><span class="sxs-lookup"><span data-stu-id="4aa2b-218">Orchestrator or serverless?</span></span>

<!-- markdownlint-enable MD026 -->

<span data-ttu-id="4aa2b-219">Az alábbiakban néhány szempontot figyelembe kell venni egy orchestrator-módszert és a egy kiszolgáló nélküli megközelítés közötti választáshoz.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-219">Here are some factors to consider when choosing between an orchestrator approach and a serverless approach.</span></span>

<span data-ttu-id="4aa2b-220">**Kezelhetőségi** kiszolgáló nélküli alkalmazás a könnyen kezelhető, mert a platform kezeli az összes a számítási erőforrásokat az Ön számára.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-220">**Manageability** A serverless application is easy to manage, because the platform manages all the of compute resources for you.</span></span> <span data-ttu-id="4aa2b-221">Az orchestrator felügyelete és a egy fürt konfigurálása bizonyos aspektusainak kivonatolja, amíg azt nem teljesen rejt el az alapul szolgáló virtuális gépeket.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-221">While an orchestrator abstracts some aspects of managing and configuring a cluster, it does not completely hide the underlying VMs.</span></span> <span data-ttu-id="4aa2b-222">Az orchestrator-kell kapcsolatos problémák, például a terheléselosztás, a CPU és memória-felhasználás, és a hálózati terhelés.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-222">With an orchestrator, you will need to think about issues such as load balancing, CPU and memory usage, and networking.</span></span>

<span data-ttu-id="4aa2b-223">**Rugalmasság és irányítás**.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-223">**Flexibility and control**.</span></span> <span data-ttu-id="4aa2b-224">Az orchestrator felett konfigurálása és kezelése a szolgáltatások és a fürt nagy fokú biztosítja.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-224">An orchestrator gives you a great deal of control over configuring and managing your services and the cluster.</span></span> <span data-ttu-id="4aa2b-225">Az egyensúlyt a további összetettséget.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-225">The tradeoff is additional complexity.</span></span> <span data-ttu-id="4aa2b-226">Kiszolgáló nélküli architektúrával adjon be néhány magas fokú felügyeletet mivel ezeket az adatokat emeli ki.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-226">With a serverless architecture, you give up some degree of control because these details are abstracted.</span></span>

<span data-ttu-id="4aa2b-227">**Hordozhatóság**.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-227">**Portability**.</span></span> <span data-ttu-id="4aa2b-228">Az itt felsorolt vezénylők (Kubernetes, DC/OS, Docker Swarm és a Service Fabric) is futtathatja a helyszíni vagy több nyilvános felhőkben.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-228">All of the orchestrators listed here (Kubernetes, DC/OS, Docker Swarm, and Service Fabric) can run on-premises or in multiple public clouds.</span></span>

<span data-ttu-id="4aa2b-229">**Alkalmazásintegráció**.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-229">**Application integration**.</span></span> <span data-ttu-id="4aa2b-230">Ez egy-egy kiszolgáló nélküli architektúra használatával összetett alkalmazások kihívást jelenthet.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-230">It can be challenging to build a complex application using a serverless architecture.</span></span> <span data-ttu-id="4aa2b-231">Az Azure-ban egy lehetőség [Azure Logic Apps](/azure/logic-apps/) az Azure Functions egy készletét.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-231">One option in Azure is to use [Azure Logic Apps](/azure/logic-apps/) to coordinate a set of Azure Functions.</span></span> <span data-ttu-id="4aa2b-232">Erre a megközelítésre példa: [Azure Logic Apps szolgáltatással integrálható függvények létrehozása](/azure/azure-functions/functions-twitter-email).</span><span class="sxs-lookup"><span data-stu-id="4aa2b-232">For an example of this approach, see [Create a function that integrates with Azure Logic Apps](/azure/azure-functions/functions-twitter-email).</span></span>

<span data-ttu-id="4aa2b-233">**Költség**.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-233">**Cost**.</span></span> <span data-ttu-id="4aa2b-234">Az orchestrator-fizet a virtuális gépek, amelyek a fürtön futtatják.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-234">With an orchestrator, you pay for the VMs that are running in the cluster.</span></span> <span data-ttu-id="4aa2b-235">Az egy kiszolgáló nélküli alkalmazást akkor kell fizetnie csak a tényleges számítási erőforrások felhasználásának.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-235">With a serverless application, you pay only for the actual compute resources consumed.</span></span> <span data-ttu-id="4aa2b-236">Mindkét esetben kell figyelembe vennie a költség, a további szolgáltatások, például a tárolás, adatbázisok és üzenetküldési szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-236">In both cases, you need to factor in the cost of any additional services, such as storage, databases, and messaging services.</span></span>

<span data-ttu-id="4aa2b-237">**Méretezhetőség**.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-237">**Scalability**.</span></span> <span data-ttu-id="4aa2b-238">Az Azure Functions automatikusan méretezi az igényeknek, a bejövő események száma alapján.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-238">Azure Functions scales automatically to meet demand, based on the number of incoming events.</span></span> <span data-ttu-id="4aa2b-239">Az orchestrator-horizontálisan növelje a fürtben futó szolgáltatás példányainak számát.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-239">With an orchestrator, you can scale out by increasing the number of service instances running in the cluster.</span></span> <span data-ttu-id="4aa2b-240">A fürthöz további virtuális gépek hozzáadásával is méretezheti.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-240">You can also scale by adding additional VMs to the cluster.</span></span>

<span data-ttu-id="4aa2b-241">Referenciaimplementáció elsősorban használja a Kubernetes, de fejeződött használjuk az Azure Functions egy szolgáltatáshoz, azaz a szállítás előzményei szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-241">Our reference implementation primarily uses Kubernetes, but we did use Azure Functions for one service, namely the Delivery History service.</span></span> <span data-ttu-id="4aa2b-242">Az Azure Functions remekül beválik, ha az adott szolgáltatáshoz, volt, mert egy eseményvezérelt munkaterhelés.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-242">Azure Functions was a good fit for this particular service, because it's is an event-driven workload.</span></span> <span data-ttu-id="4aa2b-243">A függvény meghívása egy Event Hubs-trigger használatával, a szolgáltatás szükséges minimális mennyiségű kódot.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-243">By using an Event Hubs trigger to invoke the function, the service needed a minimal amount of code.</span></span> <span data-ttu-id="4aa2b-244">Emellett a szállítás előzményei szolgáltatás nem képezi részét a fő munkafolyamat, a Kubernetes-fürt-on kívül futnak, nem befolyásolja a felhasználó által kezdeményezett műveletek végpontok közötti késését.</span><span class="sxs-lookup"><span data-stu-id="4aa2b-244">Also, the Delivery History service is not part of the main workflow, so running it outside of the Kubernetes cluster doesn't affect the end-to-end latency of user-initiated operations.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="4aa2b-245">Az adatok kapcsolatos szempontok</span><span class="sxs-lookup"><span data-stu-id="4aa2b-245">Data considerations</span></span>](./data-considerations.md)

<!-- links -->

[acs-engine]: https://github.com/Azure/acs-engine
[acs-faq]: /azure/container-service/dcos-swarm/container-service-faq
[event-grid]: /azure/event-grid/
[functions]: /azure/azure-functions/functions-overview
[functions-triggers]: /azure/azure-functions/functions-triggers-bindings
