---
title: Mikroszolgáltatások határainak azonosítása
description: Mikroszolgáltatások határainak azonosítása.
author: MikeWasson
ms.date: 02/25/2019
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: microservices
ms.openlocfilehash: 69213701b87f052811a1f032c056f05be7097c14
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 03/20/2019
ms.locfileid: "58299033"
---
# <a name="identifying-microservice-boundaries"></a><span data-ttu-id="54e9e-103">Mikroszolgáltatások határainak azonosítása</span><span class="sxs-lookup"><span data-stu-id="54e9e-103">Identifying microservice boundaries</span></span>

<span data-ttu-id="54e9e-104">Mi az a megfelelő méretű, a mikroszolgáltatások?</span><span class="sxs-lookup"><span data-stu-id="54e9e-104">What is the right size for a microservice?</span></span> <span data-ttu-id="54e9e-105">Gyakran Hallott valamit a hatását, "túl nagy és túl kicsi" &mdash; , és bár ez természetesen megfelelő, nem a gyakorlatban nagyon hasznos.</span><span class="sxs-lookup"><span data-stu-id="54e9e-105">You often hear something to the effect of, "not too big and not too small" &mdash; and while that's certainly correct, it's not very helpful in practice.</span></span> <span data-ttu-id="54e9e-106">De ha elindítja a gondosan megtervezett tartományi modell, sokkal egyszerűbb mikroszolgáltatás-alapú vonatkozó döntések meghozatalát.</span><span class="sxs-lookup"><span data-stu-id="54e9e-106">But if you start from a carefully designed domain model, it's much easier to reason about microservices.</span></span>

![Kapcsolódó kontextusokat ábrája](../images/bounded-contexts.png)

<span data-ttu-id="54e9e-108">Ez a cikk egy drónos szállítási szolgáltatást használ egy futó példát.</span><span class="sxs-lookup"><span data-stu-id="54e9e-108">This article uses a drone delivery service as a running example.</span></span> <span data-ttu-id="54e9e-109">Talál további információt a forgatókönyv és a megfelelő megvalósításának hivatkozhat [Itt](../design/index.md).</span><span class="sxs-lookup"><span data-stu-id="54e9e-109">You can read more about the scenario and the corresponding reference implementation [here](../design/index.md).</span></span>

## <a name="from-domain-model-to-microservices"></a><span data-ttu-id="54e9e-110">A tartományi modellben mikroszolgáltatások</span><span class="sxs-lookup"><span data-stu-id="54e9e-110">From domain model to microservices</span></span>

<span data-ttu-id="54e9e-111">Az a [előző cikk](./domain-analysis.md), a Drone Delivery alkalmazás kapcsolódó kontextusokat készletét meghatározott.</span><span class="sxs-lookup"><span data-stu-id="54e9e-111">In the [previous article](./domain-analysis.md), we defined a set of bounded contexts for a Drone Delivery application.</span></span> <span data-ttu-id="54e9e-112">A kapcsolódó kontextusokat, ezek a szállítási korlátozott környezet egyik jobban megvizsgálta és azonosítja az entitásokban, az összesítések, és a tartományi szolgáltatásokat, amelyek korlátozott környezet.</span><span class="sxs-lookup"><span data-stu-id="54e9e-112">Then we looked more closely at one of these bounded contexts, the Shipping bounded context, and identified a set of entities, aggregates, and domain services for that bounded context.</span></span>

<span data-ttu-id="54e9e-113">Most már készen állunk nyissa meg a tartományi modellben alkalmazás-tervezés.</span><span class="sxs-lookup"><span data-stu-id="54e9e-113">Now we're ready to go from domain model to application design.</span></span> <span data-ttu-id="54e9e-114">Itt látható, amely mikroszolgáltatások származtassa a tartományi modellben használható.</span><span class="sxs-lookup"><span data-stu-id="54e9e-114">Here's an approach that you can use to derive microservices from the domain model.</span></span>

1. <span data-ttu-id="54e9e-115">Kezdje egy körülhatárolt kontextus.</span><span class="sxs-lookup"><span data-stu-id="54e9e-115">Start with a bounded context.</span></span> <span data-ttu-id="54e9e-116">A funkció a mikroszolgáltatások általában nem kell span egynél több körülhatárolt kontextus.</span><span class="sxs-lookup"><span data-stu-id="54e9e-116">In general, the functionality in a microservice should not span more than one bounded context.</span></span> <span data-ttu-id="54e9e-117">Definíció szerint egy körülhatárolt kontextus egy adott modell határait jelöli meg.</span><span class="sxs-lookup"><span data-stu-id="54e9e-117">By definition, a bounded context marks the boundary of a particular domain model.</span></span> <span data-ttu-id="54e9e-118">Ha azt tapasztalja, hogy mikroszolgáltatások együtt eredményét-e ugyanaz a tartományi modellekkel, lépjen vissza és finomíthatja a tartományelemzés szükség lehet, hogy ez.</span><span class="sxs-lookup"><span data-stu-id="54e9e-118">If you find that a microservice mixes different domain models together, that's a sign that you may need to go back and refine your domain analysis.</span></span>

2. <span data-ttu-id="54e9e-119">Ezután tekintse meg az összesítések, a tartományi modellben.</span><span class="sxs-lookup"><span data-stu-id="54e9e-119">Next, look at the aggregates in your domain model.</span></span> <span data-ttu-id="54e9e-120">Összesítések között gyakran érdemes mikroszolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="54e9e-120">Aggregates are often good candidates for microservices.</span></span> <span data-ttu-id="54e9e-121">Egy jól megtervezett összesítés szolgáltatásnak számos egy jól megtervezett mikroszolgáltatás jellemzői, például:</span><span class="sxs-lookup"><span data-stu-id="54e9e-121">A well-designed aggregate exhibits many of the characteristics of a well-designed microservice, such as:</span></span>

    - <span data-ttu-id="54e9e-122">Összesítés üzleti követelmények, nem pedig például az adatok elérése vagy az üzenetkezelési a technikai problémák származik.</span><span class="sxs-lookup"><span data-stu-id="54e9e-122">An aggregate is derived from business requirements, rather than technical concerns such as data access or messaging.</span></span>
    - <span data-ttu-id="54e9e-123">Összesítés magas működési kohézióval kell rendelkezniük.</span><span class="sxs-lookup"><span data-stu-id="54e9e-123">An aggregate should have high functional cohesion.</span></span>
    - <span data-ttu-id="54e9e-124">Összesítés az adatmegőrzés szegélyére.</span><span class="sxs-lookup"><span data-stu-id="54e9e-124">An aggregate is a boundary of persistence.</span></span>
    - <span data-ttu-id="54e9e-125">Összesítések lazán kell lennie.</span><span class="sxs-lookup"><span data-stu-id="54e9e-125">Aggregates should be loosely coupled.</span></span>

3. <span data-ttu-id="54e9e-126">Tartományi szolgáltatások között is érdemes mikroszolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="54e9e-126">Domain services are also good candidates for microservices.</span></span> <span data-ttu-id="54e9e-127">Tartományi szolgáltatások állapot nélküli műveletek, amelyek között több összesítések.</span><span class="sxs-lookup"><span data-stu-id="54e9e-127">Domain services are stateless operations across multiple aggregates.</span></span> <span data-ttu-id="54e9e-128">Egy tipikus példája egy munkafolyamatot, amely magában foglalja a több mikroszolgáltatás-alapú.</span><span class="sxs-lookup"><span data-stu-id="54e9e-128">A typical example is a workflow that involves several microservices.</span></span> <span data-ttu-id="54e9e-129">Példa erre a Drone Delivery alkalmazás lesz látható.</span><span class="sxs-lookup"><span data-stu-id="54e9e-129">We'll see an example of this in the Drone Delivery application.</span></span>

4. <span data-ttu-id="54e9e-130">Végül vegye figyelembe a nem funkcionális követelményeket.</span><span class="sxs-lookup"><span data-stu-id="54e9e-130">Finally, consider non-functional requirements.</span></span> <span data-ttu-id="54e9e-131">Tekintse meg a tényezők, például a csapat mérete, adattípusok, technológiák, méretezhetőségi követelményeinek, rendelkezésre állással és biztonsági követelményeket.</span><span class="sxs-lookup"><span data-stu-id="54e9e-131">Look at factors such as team size, data types, technologies, scalability requirements, availability requirements, and security requirements.</span></span> <span data-ttu-id="54e9e-132">Ezek a tényezők vezethet, hogy tovább bontható fel a mikroszolgáltatások két vagy több kisebb servicesbe, vagy ennek az ellenkezője tegye, és néhány a mikroszolgáltatások egyesítése egy.</span><span class="sxs-lookup"><span data-stu-id="54e9e-132">These factors may lead you to further decompose a microservice into two or more smaller services, or do the opposite and combine several microservices into one.</span></span>

<span data-ttu-id="54e9e-133">Miután azonosította a mikroszolgáltatások az alkalmazásban, ellenőrizze a kialakítás az alábbi feltételek alapján:</span><span class="sxs-lookup"><span data-stu-id="54e9e-133">After you identify the microservices in your application, validate your design against the following criteria:</span></span>

- <span data-ttu-id="54e9e-134">Minden szolgáltatás egyetlen felelősséget rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="54e9e-134">Each service has a single responsibility.</span></span>
- <span data-ttu-id="54e9e-135">Nincsenek forgalmas hívások nem szolgáltatások között.</span><span class="sxs-lookup"><span data-stu-id="54e9e-135">There are no chatty calls between services.</span></span> <span data-ttu-id="54e9e-136">Ha felosztása két szolgáltatás funkciókat okoz, ha túlságosan forgalmas meg, ezek a függvények az egyazon szolgáltatáshoz tartozó szokásostól eltérő lehet.</span><span class="sxs-lookup"><span data-stu-id="54e9e-136">If splitting functionality into two services causes them to be overly chatty, it may be a symptom that these functions belong in the same service.</span></span>
- <span data-ttu-id="54e9e-137">Egyes szolgáltatások általában elég kis méretűek, hogy azt is lehet fejlesztőcsapata által készített egy kis egymástól függetlenül működik.</span><span class="sxs-lookup"><span data-stu-id="54e9e-137">Each service is small enough that it can be built by a small team working independently.</span></span>
- <span data-ttu-id="54e9e-138">Nincsenek két vagy több szolgáltatás zárolási lépésben telepíteni fog igénylő közötti függőségek.</span><span class="sxs-lookup"><span data-stu-id="54e9e-138">There are no inter-dependencies that will require two or more services to be deployed in lock-step.</span></span> <span data-ttu-id="54e9e-139">Mindig kell egy szolgáltatás telepíthető bármilyen egyéb szolgáltatás újbóli telepítése nélkül.</span><span class="sxs-lookup"><span data-stu-id="54e9e-139">It should always be possible to deploy a service without redeploying any other services.</span></span>
- <span data-ttu-id="54e9e-140">Szolgáltatások nem szorosan összekapcsolt, és egymástól függetlenül tovább lehessen fejleszteni.</span><span class="sxs-lookup"><span data-stu-id="54e9e-140">Services are not tightly coupled, and can evolve independently.</span></span>
- <span data-ttu-id="54e9e-141">A szolgáltatások határait nem hoz létre a problémák adatkonzisztencia vagy -integritást.</span><span class="sxs-lookup"><span data-stu-id="54e9e-141">Your service boundaries will not create problems with data consistency or integrity.</span></span> <span data-ttu-id="54e9e-142">Egyes esetekben fontos funkciók üzembe egyetlen mikroszolgáltatást adatkonzisztencia karbantartásához.</span><span class="sxs-lookup"><span data-stu-id="54e9e-142">Sometimes it's important to maintain data consistency by putting functionality into a single microservice.</span></span> <span data-ttu-id="54e9e-143">Ezzel együtt az üzemeltetés, vegye figyelembe, hogy valóban szükséges-e konzisztenciát.</span><span class="sxs-lookup"><span data-stu-id="54e9e-143">That said, consider whether you really need strong consistency.</span></span> <span data-ttu-id="54e9e-144">Végleges konzisztencia az elosztott rendszerekben címzéshez stratégiák, és a szolgáltatások gyakran decomposing előnyei nyomósabbak a végleges konzisztencia kezelése kihívást.</span><span class="sxs-lookup"><span data-stu-id="54e9e-144">There are strategies for addressing eventual consistency in a distributed system, and the benefits of decomposing services often outweigh the challenges of managing eventual consistency.</span></span>

<span data-ttu-id="54e9e-145">Mindenekelőtt fontos pragmatikus, és ne feledje, hogy tartományvezérelt tervezési iteratív folyamat.</span><span class="sxs-lookup"><span data-stu-id="54e9e-145">Above all, it's important to be pragmatic, and remember that domain-driven design is an iterative process.</span></span> <span data-ttu-id="54e9e-146">Ha kétségei vannak, indítsa el a további coarse-grained mikroszolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="54e9e-146">When in doubt, start with more coarse-grained microservices.</span></span> <span data-ttu-id="54e9e-147">Egyszerűbb, mint a funkció számos meglévő mikroszolgáltatások túlnyúló újrabontás mikroszolgáltatások felosztása két kisebb szolgáltatásra.</span><span class="sxs-lookup"><span data-stu-id="54e9e-147">Splitting a microservice into two smaller services is easier than refactoring functionality across several existing microservices.</span></span>
  
## <a name="example-defining-microservices-for-the-drone-delivery-application"></a><span data-ttu-id="54e9e-148">Példa: Mikroszolgáltatások a Drone Delivery alkalmazás meghatározása</span><span class="sxs-lookup"><span data-stu-id="54e9e-148">Example: Defining microservices for the Drone Delivery application</span></span>

<span data-ttu-id="54e9e-149">Idézze, hogy a fejlesztői csapat kellett azonosítja a négy összesítések &mdash; kézbesítési, a csomag, a Drone és a fiók &mdash; és a két tartomány szolgáltatás, az ütemező és a felügyelő.</span><span class="sxs-lookup"><span data-stu-id="54e9e-149">Recall that the development team had identified the four aggregates &mdash; Delivery, Package, Drone, and Account &mdash; and two domain services, Scheduler and Supervisor.</span></span>

<span data-ttu-id="54e9e-150">Teljesítés és a Csomagmegosztás deduplikációra nyilvánvaló mikroszolgáltatás-alapú.</span><span class="sxs-lookup"><span data-stu-id="54e9e-150">Delivery and Package are obvious candidates for microservices.</span></span> <span data-ttu-id="54e9e-151">Az ütemező és a felügyelő koordinálja a tevékenységét más mikroszolgáltatás-alapú, ezért érdemes megvalósítani a ezeket domain servicesben mikroszolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="54e9e-151">The Scheduler and Supervisor coordinate the activities performed by other microservices, so it makes sense to implement these domain services as microservices.</span></span>

<span data-ttu-id="54e9e-152">Drónos és fiókot is érdekes, mert egyéb kapcsolódó kontextusokat tartoznak.</span><span class="sxs-lookup"><span data-stu-id="54e9e-152">Drone and Account are interesting because they belong to other bounded contexts.</span></span> <span data-ttu-id="54e9e-153">Az egyik lehetőség az ütemező a Drone meghívásához és fiókot, amelyet környezetek közvetlenül.</span><span class="sxs-lookup"><span data-stu-id="54e9e-153">One option is for the Scheduler to call the Drone and Account bounded contexts directly.</span></span> <span data-ttu-id="54e9e-154">Egy másik lehetőség, a Drone és a fiók mikroszolgáltatások belül a szállítási korlátozott környezet létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="54e9e-154">Another option is to create Drone and Account microservices inside the Shipping bounded context.</span></span> <span data-ttu-id="54e9e-155">Ilyen mikroszolgáltatásokból lenne résidőkiosztással között a kapcsolódó kontextusokat, API-k és adatsémák, amely a szállítási címhez tartozó környezeti érdemesebb teszi elérhetővé.</span><span class="sxs-lookup"><span data-stu-id="54e9e-155">These microservices would mediate between the bounded contexts, by exposing APIs or data schemas that are more suited to the Shipping context.</span></span>

<span data-ttu-id="54e9e-156">A Drone, valamint a fiók, amelyet környezetekben ez az útmutató nem terjed vannak, így azok utánzatként funkcionáló szolgáltatások referenciaimplementáció létrehoztunk.</span><span class="sxs-lookup"><span data-stu-id="54e9e-156">The details of the Drone and Account bounded contexts are beyond the scope of this guidance, so we created mock services for them in our reference implementation.</span></span> <span data-ttu-id="54e9e-157">De Íme néhány tényező ebben a helyzetben érdemes figyelembe venni:</span><span class="sxs-lookup"><span data-stu-id="54e9e-157">But here are some factors to consider in this situation:</span></span>

- <span data-ttu-id="54e9e-158">Mi az a hálózati többletterhelést okoz, közvetlenül a többi körülhatárolt kontextus-be irányuló hívás?</span><span class="sxs-lookup"><span data-stu-id="54e9e-158">What is the network overhead of calling directly into the other bounded context?</span></span>

- <span data-ttu-id="54e9e-159">Ideális a sémát a többi körülhatárolt kontextus az ebben a környezetben, vagy jobban szeretné, hogy egy sémát, amely a körülhatárolt kontextus személyre szabott?</span><span class="sxs-lookup"><span data-stu-id="54e9e-159">Is the data schema for the other bounded context suitable for this context, or is it better to have a schema that's tailored to this bounded context?</span></span>

- <span data-ttu-id="54e9e-160">Az a többi körülhatárolt kontextus egy korábbi rendszer?</span><span class="sxs-lookup"><span data-stu-id="54e9e-160">Is the other bounded context a legacy system?</span></span> <span data-ttu-id="54e9e-161">Ha tehát, előfordulhat, hogy létrehoz egy szolgáltatást, amely indextáblaként egy [sérülésgátló réteg](../../patterns/anti-corruption-layer.md) az átalakításra a régi rendszer és a modern alkalmazás között.</span><span class="sxs-lookup"><span data-stu-id="54e9e-161">If so, you might create a service that acts as an [anti-corruption layer](../../patterns/anti-corruption-layer.md) to translate between the legacy system and the modern application.</span></span>

- <span data-ttu-id="54e9e-162">Mi az a csapat struktúra?</span><span class="sxs-lookup"><span data-stu-id="54e9e-162">What is the team structure?</span></span> <span data-ttu-id="54e9e-163">Az egyszerű, a többi körülhatárolt kontextus felelős csapat kommunikálni?</span><span class="sxs-lookup"><span data-stu-id="54e9e-163">Is it easy to communicate with the team that's responsible for the other bounded context?</span></span> <span data-ttu-id="54e9e-164">Ha nem, egy szolgáltatás, amely a két környezet közötti közvetítő létrehozása segíthet közötti kommunikáció költségeinek csökkentése érdekében.</span><span class="sxs-lookup"><span data-stu-id="54e9e-164">If not, creating a service that mediates between the two contexts can help to mitigate the cost of cross-team communication.</span></span>

<span data-ttu-id="54e9e-165">Az eddigi azt még nem tekinthető minden olyan nem funkcionális követelmények.</span><span class="sxs-lookup"><span data-stu-id="54e9e-165">So far, we haven't considered any non-functional requirements.</span></span> <span data-ttu-id="54e9e-166">Az alkalmazás átviteli sebességet megkövetelő mértékegységeként, a fejlesztői csapat úgy döntött, hogy hozzon létre egy külön Adatbetöltési mikroszolgáltatás, amely az ügyfél kérelmek feldolgozására.</span><span class="sxs-lookup"><span data-stu-id="54e9e-166">Thinking about the application's throughput requirements, the development team decided to create a separate Ingestion microservice that is responsible for ingesting client requests.</span></span> <span data-ttu-id="54e9e-167">A mikroszolgáltatások megvalósítandó [Terheléskiegyenlítés](../../patterns/queue-based-load-leveling.md) feldolgozásra a pufferbe írja a bejövő kérelmek.</span><span class="sxs-lookup"><span data-stu-id="54e9e-167">This microservice will implement [load leveling](../../patterns/queue-based-load-leveling.md) by putting incoming requests into a buffer for processing.</span></span> <span data-ttu-id="54e9e-168">Az ütemező beolvassa a kérelmeket a buffer szolgáltatásból származó és a munkafolyamat végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="54e9e-168">The Scheduler will read the requests from the buffer and execute the workflow.</span></span>

<span data-ttu-id="54e9e-169">Nem funkcionális követelmények a csapata egy kiegészítő szolgáltatás létrehozásához vezetett.</span><span class="sxs-lookup"><span data-stu-id="54e9e-169">Non-functional requirements led the team to create one additional service.</span></span> <span data-ttu-id="54e9e-170">A szolgáltatásokhoz, amennyiben az ütemezés és a csomagok továbbítása valós időben a folyamat lett.</span><span class="sxs-lookup"><span data-stu-id="54e9e-170">All of the services so far have been about the process of scheduling and delivering packages in real time.</span></span> <span data-ttu-id="54e9e-171">De a rendszer is kell tárolnia minden szállítás előzményei a data-elemzéshez hosszú távú tároláshoz.</span><span class="sxs-lookup"><span data-stu-id="54e9e-171">But the system also needs to store the history of every delivery in long-term storage for data analysis.</span></span> <span data-ttu-id="54e9e-172">A csapata tekintett feladata a Licenctovábbítási szolgáltatása, ami.</span><span class="sxs-lookup"><span data-stu-id="54e9e-172">The team considered making this the responsibility of the Delivery service.</span></span> <span data-ttu-id="54e9e-173">De az adattárolási követelmények is igen különböző az előzményadatokat és átvitel közben az operations (lásd: [adatok szempontok](../design/data-considerations.md)).</span><span class="sxs-lookup"><span data-stu-id="54e9e-173">However, the data storage requirements are quite different for historical analysis versus in-flight operations (see [Data considerations](../design/data-considerations.md)).</span></span> <span data-ttu-id="54e9e-174">Ezért a csapat úgy döntött, hogy hozzon létre egy külön szállítás előzményei szolgáltatás, amely DeliveryTracking események kézbesítés a szolgáltatás figyelésére, és írja az események, hosszú távú tároláshoz.</span><span class="sxs-lookup"><span data-stu-id="54e9e-174">Therefore, the team decided to create a separate Delivery History service, which will listen for DeliveryTracking events from the Delivery service and write the events into long-term storage.</span></span>

<span data-ttu-id="54e9e-175">Az alábbi ábrán látható ezen a ponton a terv:</span><span class="sxs-lookup"><span data-stu-id="54e9e-175">The following diagram shows the design at this point:</span></span>

![Tervezési diagramja](../images/drone-delivery.png)

## <a name="next-steps"></a><span data-ttu-id="54e9e-177">További lépések</span><span class="sxs-lookup"><span data-stu-id="54e9e-177">Next steps</span></span>

<span data-ttu-id="54e9e-178">Ezen a ponton kell erre a célra egyértelművé, illetve a funkciók köre az egyes mikroszolgáltatások a tervezés.</span><span class="sxs-lookup"><span data-stu-id="54e9e-178">At this point, you should have a clear understanding of the purpose and functionality of each microservice in your design.</span></span> <span data-ttu-id="54e9e-179">A rendszer most már Ön is tervezhet.</span><span class="sxs-lookup"><span data-stu-id="54e9e-179">Now you can architect the system.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="54e9e-180">Mikroszolgáltatási architektúra tervezése</span><span class="sxs-lookup"><span data-stu-id="54e9e-180">Design a microservices architecture</span></span>](../design/index.md)

<!-- links -->

[event-grid]: /azure/event-grid/
[functions]: /azure/azure-functions/functions-overview
[functions-triggers]: /azure/azure-functions/functions-triggers-bindings
