---
title: Biztonságos webalkalmazások kiépítése Windows rendszerű virtuális gépekkel
titleSuffix: Azure Example Scenarios
description: Biztonságos, többszintű webalkalmazást hozhat létre a Windows Serverrel az Azure-ban méretezési csoportok, az Application Gateway és terheléselosztók használatával.
author: iainfoulds
ms.date: 12/06/2018
ms.topic: example-scenario
ms.service: architecture-center
ms.subservice: example-scenario
ms.custom: seodec18, Windows
social_image_url: /azure/architecture/example-scenario/infrastructure/media/architecture-regulated-multitier-app.png
ms.openlocfilehash: 2e3bb28abf870a1ce358dd67efeb3f422b983651
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59639937"
---
# <a name="building-secure-web-applications-with-windows-virtual-machines-on-azure"></a><span data-ttu-id="6225a-103">Biztonságos webes alkalmazások létrehozása a Windows virtual machines az Azure-ban</span><span class="sxs-lookup"><span data-stu-id="6225a-103">Building secure web applications with Windows virtual machines on Azure</span></span>

<span data-ttu-id="6225a-104">Ebben a forgatókönyvben a biztonságos és többszintű webalkalmazások a Microsoft Azure-on futó architektúra és kialakítás útmutatást nyújt.</span><span class="sxs-lookup"><span data-stu-id="6225a-104">This scenario provides architecture and design guidance for running secure, multi-tier web applications on Microsoft Azure.</span></span> <span data-ttu-id="6225a-105">Ebben a példában az ASP.NET-alkalmazások biztonságos módon csatlakozik egy védett háttér-Microsoft SQL Server-fürt virtuális gépek használatával.</span><span class="sxs-lookup"><span data-stu-id="6225a-105">In this example, an ASP.NET application securely connects to a protected back-end Microsoft SQL Server cluster using virtual machines.</span></span>

<span data-ttu-id="6225a-106">Hagyományosan szervezetek kellett karbantartása örökölt helyszíni alkalmazások és szolgáltatások biztonságos infrastruktúrát biztosít.</span><span class="sxs-lookup"><span data-stu-id="6225a-106">Traditionally, organizations had to maintain legacy on-premises applications and services to provide a secure infrastructure.</span></span> <span data-ttu-id="6225a-107">Ezek a Windows Server az alkalmazások biztonságos az Azure-beli üzembe helyezésével, szervezetek korszerűsítheti a telepítések és csökkentheti a helyszíni üzemeltetési költségeket és munkaterhelést.</span><span class="sxs-lookup"><span data-stu-id="6225a-107">By deploying these Windows Server applications securely in Azure, organizations can modernize their deployments and reduce their on-premises operating costs and management overhead.</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="6225a-108">Alkalmazási helyzetek</span><span class="sxs-lookup"><span data-stu-id="6225a-108">Relevant use cases</span></span>

<span data-ttu-id="6225a-109">Néhány példa, ahol az ebben a forgatókönyvben alkalmazhatja:</span><span class="sxs-lookup"><span data-stu-id="6225a-109">A few examples of where this scenario may apply:</span></span>

- <span data-ttu-id="6225a-110">Alkalmazástelepítések alapú modernizálásánál megfelelő választás a következő biztonságos felhőalapú környezetben.</span><span class="sxs-lookup"><span data-stu-id="6225a-110">Modernizing application deployments in a secure cloud environment.</span></span>
- <span data-ttu-id="6225a-111">Csökkenti a kezelési terhelést örökölt helyszíni alkalmazások és szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="6225a-111">Reducing the management overhead of legacy on-premises applications and services.</span></span>
- <span data-ttu-id="6225a-112">Betegek healthcare javítása és a élményük az új alkalmazás-platformokat.</span><span class="sxs-lookup"><span data-stu-id="6225a-112">Improving patient healthcare and experience with new application platforms.</span></span>

## <a name="architecture"></a><span data-ttu-id="6225a-113">Architektúra</span><span class="sxs-lookup"><span data-stu-id="6225a-113">Architecture</span></span>

![Az Azure-összetevőket Windows Server alkalmazás többrétegű szabályozott iparágakban részt architektúrájának áttekintése][architecture]

<span data-ttu-id="6225a-115">Ebből a forgatókönyvből megtudhatja csatlakozik egy háttér-adatbázishoz, mindkét Windows Server 2016-on futó előtér-webalkalmazást.</span><span class="sxs-lookup"><span data-stu-id="6225a-115">This scenario shows a front-end web application connecting to a back-end database, both running on Windows Server 2016.</span></span> <span data-ttu-id="6225a-116">A áramlanak keresztül az adatok a forgatókönyv a következő:</span><span class="sxs-lookup"><span data-stu-id="6225a-116">The data flows through the scenario as follows:</span></span>

1. <span data-ttu-id="6225a-117">Felhasználók keresztül az Azure Application Gateway az előtérbeli ASP.NET-alkalmazás elérésére.</span><span class="sxs-lookup"><span data-stu-id="6225a-117">Users access the front-end ASP.NET application through an Azure Application Gateway.</span></span>
2. <span data-ttu-id="6225a-118">Az Application Gateway elosztja a forgalmat egy Azure-beli virtuálisgép-méretezési csoportban lévő Virtuálisgép-példányok között.</span><span class="sxs-lookup"><span data-stu-id="6225a-118">The Application Gateway distributes traffic to VM instances within an Azure virtual machine scale set.</span></span>
3. <span data-ttu-id="6225a-119">Az alkalmazás a Microsoft SQL Server-fürtöt a háttér-szinten az Azure load balancer keresztül csatlakozik.</span><span class="sxs-lookup"><span data-stu-id="6225a-119">The application connects to Microsoft SQL Server cluster in a back-end tier via an Azure load balancer.</span></span> <span data-ttu-id="6225a-120">A háttér-az SQL Server példányai egy külön Azure virtuális hálózatban, védi a hálózati biztonsági csoport szabályait, amelyek korlátozzák a forgalmat.</span><span class="sxs-lookup"><span data-stu-id="6225a-120">These back-end SQL Server instances are in a separate Azure virtual network, secured by network security group rules that limit traffic flow.</span></span>
4. <span data-ttu-id="6225a-121">A terheléselosztó elosztja a forgalmat az SQL Server egy másik virtuálisgép-méretezési csoportban lévő Virtuálisgép-példányok között.</span><span class="sxs-lookup"><span data-stu-id="6225a-121">The load balancer distributes SQL Server traffic to VM instances in another virtual machine scale set.</span></span>
5. <span data-ttu-id="6225a-122">Az Azure Blob Storage úgy működik, mint egy [felhőbeli tanúsító] [ cloud-witness] a háttér-szintű SQL Server-fürt számára.</span><span class="sxs-lookup"><span data-stu-id="6225a-122">Azure Blob Storage acts as a [cloud witness][cloud-witness] for the SQL Server cluster in the back-end tier.</span></span> <span data-ttu-id="6225a-123">A kapcsolat a virtuális hálózaton belül a virtuális hálózati szolgáltatásvégpontot az Azure Storage engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="6225a-123">The connection from within the VNet is enabled with a VNet Service Endpoint for Azure Storage.</span></span>

### <a name="components"></a><span data-ttu-id="6225a-124">Összetevők</span><span class="sxs-lookup"><span data-stu-id="6225a-124">Components</span></span>

- <span data-ttu-id="6225a-125">[Az Azure Application Gateway] [ appgateway-docs] egy 7. rétegbeli webes forgalom terheléselosztó, amely alkalmazásbarát és terjeszthetnek a forgalmat az adott útválasztási szabályok alapján.</span><span class="sxs-lookup"><span data-stu-id="6225a-125">[Azure Application Gateway][appgateway-docs] is a layer 7 web traffic load balancer that is application-aware and can distribute traffic based on specific routing rules.</span></span> <span data-ttu-id="6225a-126">Alkalmazásátjáró is képes kezelni az SSL-kiürítés, a továbbfejlesztett webkiszolgáló teljesítményét.</span><span class="sxs-lookup"><span data-stu-id="6225a-126">App Gateway can also handle SSL offloading for improved web server performance.</span></span>
- <span data-ttu-id="6225a-127">[Az Azure Virtual Network] [ vnet-docs] lehetővé teszi az erőforrások, például virtuális gépek biztonságosan kommunikálnak egymással, az internethez, és a helyszíni hálózatokkal.</span><span class="sxs-lookup"><span data-stu-id="6225a-127">[Azure Virtual Network][vnet-docs] allows resources such as VMs to securely communicate with each other, the Internet, and on-premises networks.</span></span> <span data-ttu-id="6225a-128">Virtuális hálózatok adja meg az elkülönítés és Szegmentálás, szűrő és útvonal-forgalom és helyek közötti kapcsolat engedélyezését.</span><span class="sxs-lookup"><span data-stu-id="6225a-128">Virtual networks provide isolation and segmentation, filter and route traffic, and allow connection between locations.</span></span> <span data-ttu-id="6225a-129">Két virtuális hálózat kombinálva a megfelelő NSG-k segítségével ebben a forgatókönyvben adja meg egy [demilitarizált zóna] [ dmz] (DMZ) és az alkalmazás-összetevők elkülönítését.</span><span class="sxs-lookup"><span data-stu-id="6225a-129">Two virtual networks combined with the appropriate NSGs are used in this scenario to provide a [demilitarized zone][dmz] (DMZ) and isolation of the application components.</span></span> <span data-ttu-id="6225a-130">A két hálózat virtuális hálózatok közötti társviszony együtt kapcsolódik.</span><span class="sxs-lookup"><span data-stu-id="6225a-130">Virtual network peering connects the two networks together.</span></span>
- <span data-ttu-id="6225a-131">[Azure-beli virtuálisgép-méretezési csoport] [ scaleset-docs] lehetővé teszi, hogy hozzon létre és manager azonos, load csoportja elosztott terhelésű virtuális gépek.</span><span class="sxs-lookup"><span data-stu-id="6225a-131">[Azure virtual machine scale set][scaleset-docs] lets you create and manager a group of identical, load balanced, VMs.</span></span> <span data-ttu-id="6225a-132">A virtuálisgép-példányok száma automatikusan növelhető vagy csökkenthető a pillanatnyi igényeknek megfelelően vagy egy meghatározott ütemezés szerint.</span><span class="sxs-lookup"><span data-stu-id="6225a-132">The number of VM instances can automatically increase or decrease in response to demand or a defined schedule.</span></span> <span data-ttu-id="6225a-133">Ez a forgatókönyv - egyet az előtér-ASP.NET alkalmazás példányai, és a egy SQL Server fürt háttérbeli Virtuálisgép-példányokhoz két külön virtuálisgép-méretezési csoportok használhatók.</span><span class="sxs-lookup"><span data-stu-id="6225a-133">Two separate virtual machine scale sets are used in this scenario - one for the front-end ASP.NET application instances, and one for the back-end SQL Server cluster VM instances.</span></span> <span data-ttu-id="6225a-134">PowerShell kívánt állapot configuration (DSC) vagy az Azure egyéni szkriptek futtatására szolgáló bővítmény a szükséges szoftverekkel és a konfigurációs beállítások VM-példányok kiépítéséhez használható.</span><span class="sxs-lookup"><span data-stu-id="6225a-134">PowerShell desired state configuration (DSC) or the Azure custom script extension can be used to provision the VM instances with the required software and configuration settings.</span></span>
- <span data-ttu-id="6225a-135">[Azure-beli hálózati biztonsági csoportok] [ nsg-docs] tartalmaznak, amelyek engedélyezik vagy megtagadják a bejövő vagy kimenő hálózati forgalmat a forrás vagy cél IP-cím, port és protokoll alapján biztonsági szabályokból álló listát.</span><span class="sxs-lookup"><span data-stu-id="6225a-135">[Azure network security groups][nsg-docs] contain a list of security rules that allow or deny inbound or outbound network traffic based on source or destination IP address, port, and protocol.</span></span> <span data-ttu-id="6225a-136">Ebben a forgatókönyvben a virtuális hálózatok a hálózati biztonsági csoport szabályait, amelyek korlátozzák a forgalmat az alkalmazás-összetevők közötti biztonságosak.</span><span class="sxs-lookup"><span data-stu-id="6225a-136">The virtual networks in this scenario are secured with network security group rules that restrict the flow of traffic between the application components.</span></span>
- <span data-ttu-id="6225a-137">[Az Azure load balancer] [ loadbalancer-docs] osztja el a szabályok és az állapotmintákat megfelelően bejövő forgalmat.</span><span class="sxs-lookup"><span data-stu-id="6225a-137">[Azure load balancer][loadbalancer-docs] distributes inbound traffic according to rules and health probes.</span></span> <span data-ttu-id="6225a-138">Egy terheléselosztót biztosít alacsony késéssel és nagy átviteli sebességet, és akár több milliónyi összes TCP és UDP-alkalmazás méretezhető.</span><span class="sxs-lookup"><span data-stu-id="6225a-138">A load balancer provides low latency and high throughput, and scales up to millions of flows for all TCP and UDP applications.</span></span> <span data-ttu-id="6225a-139">Belső terheléselosztó szolgál ebben a forgatókönyvben a háttér SQL Server-fürt az előtér-alkalmazás szintről forgalom elosztása.</span><span class="sxs-lookup"><span data-stu-id="6225a-139">An internal load balancer is used in this scenario to distribute traffic from the front-end application tier to the back-end SQL Server cluster.</span></span>
- <span data-ttu-id="6225a-140">[Az Azure Blob Storage] [ cloudwitness-docs] működik az SQL Server-fürt Felhőbeli tanúsító helyét.</span><span class="sxs-lookup"><span data-stu-id="6225a-140">[Azure Blob Storage][cloudwitness-docs] acts a Cloud Witness location for the SQL Server cluster.</span></span> <span data-ttu-id="6225a-141">A tanúsító szolgál a fürt működését és a egy dönthet arról, hogy a kvórum további szavazata szükséges döntéseket.</span><span class="sxs-lookup"><span data-stu-id="6225a-141">This witness is used for cluster operations and decisions that require an additional vote to decide quorum.</span></span> <span data-ttu-id="6225a-142">Használatával a Felhőbeli tanúsító nincs szükség az működjön egy hagyományos tanúsító fájlmegosztást, egy további virtuális Gépre.</span><span class="sxs-lookup"><span data-stu-id="6225a-142">Using Cloud Witness removes the need for an additional VM to act as a traditional File Share Witness.</span></span>

### <a name="alternatives"></a><span data-ttu-id="6225a-143">Alternatív megoldások</span><span class="sxs-lookup"><span data-stu-id="6225a-143">Alternatives</span></span>

- <span data-ttu-id="6225a-144">A Linux és Windows felcserélhetők óta az infrastruktúra nem függ az operációs rendszer.</span><span class="sxs-lookup"><span data-stu-id="6225a-144">Linux and Windows can be used interchangeably since the infrastructure isn't dependent on the operating system.</span></span>

- <span data-ttu-id="6225a-145">[Az SQL Server for Linux] [ sql-linux] lecserélheti a háttér-tárolót.</span><span class="sxs-lookup"><span data-stu-id="6225a-145">[SQL Server for Linux][sql-linux] can replace the back-end data store.</span></span>

- <span data-ttu-id="6225a-146">[A cosmos DB](/azure/cosmos-db/introduction) egy másik alternatíva az adattároló.</span><span class="sxs-lookup"><span data-stu-id="6225a-146">[Cosmos DB](/azure/cosmos-db/introduction) is another alternative for the data store.</span></span>

## <a name="considerations"></a><span data-ttu-id="6225a-147">Megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="6225a-147">Considerations</span></span>

### <a name="availability"></a><span data-ttu-id="6225a-148">Rendelkezésre állás</span><span class="sxs-lookup"><span data-stu-id="6225a-148">Availability</span></span>

<span data-ttu-id="6225a-149">Ebben a forgatókönyvben a VM-példányokon telepített [rendelkezésre állási zónák](/azure/availability-zones/az-overview).</span><span class="sxs-lookup"><span data-stu-id="6225a-149">The VM instances in this scenario are deployed across [Availability Zones](/azure/availability-zones/az-overview).</span></span> <span data-ttu-id="6225a-150">Minden zóna egy vagy több adatközpont független áramellátással, hűtéssel és hálózati található tevődik össze.</span><span class="sxs-lookup"><span data-stu-id="6225a-150">Each zone is made up of one or more datacenters equipped with independent power, cooling, and networking.</span></span> <span data-ttu-id="6225a-151">Minden egyes engedélyezett régió számára legalább három rendelkezésre állási zónák.</span><span class="sxs-lookup"><span data-stu-id="6225a-151">Each enabled region has a minimum of three availability zones.</span></span> <span data-ttu-id="6225a-152">Ehhez a terjesztéshez zónákban Virtuálisgép-példányok az alkalmazásrétegek magas rendelkezésre állást biztosít.</span><span class="sxs-lookup"><span data-stu-id="6225a-152">This distribution of VM instances across zones provides high availability to the application tiers.</span></span>

<span data-ttu-id="6225a-153">Az adatbázisszint Always On rendelkezésre állási csoportok használatára konfigurálható.</span><span class="sxs-lookup"><span data-stu-id="6225a-153">The database tier can be configured to use Always On availability groups.</span></span> <span data-ttu-id="6225a-154">Ez az SQL Server-konfigurációval a fürtön belül több elsődleges adatbázis nyolc másodlagos adatbázisok van konfigurálva.</span><span class="sxs-lookup"><span data-stu-id="6225a-154">With this SQL Server configuration, one primary database within a cluster is configured with up to eight secondary databases.</span></span> <span data-ttu-id="6225a-155">Ha a probléma akkor fordul elő, az elsődleges adatbázissal, a fürt átadja a feladatokat egy másodlagos adatbázis, amely lehetővé teszi az alkalmazás továbbra is elérhetők.</span><span class="sxs-lookup"><span data-stu-id="6225a-155">If an issue occurs with the primary database, the cluster fails over to one of the secondary databases, which allows the application to continue to be available.</span></span> <span data-ttu-id="6225a-156">További információkért lásd: [áttekintése az Always On rendelkezésre állási csoportokat az SQL Server][sqlalwayson-docs].</span><span class="sxs-lookup"><span data-stu-id="6225a-156">For more information, see [Overview of Always On availability groups for SQL Server][sqlalwayson-docs].</span></span>

### <a name="scalability"></a><span data-ttu-id="6225a-157">Méretezhetőség</span><span class="sxs-lookup"><span data-stu-id="6225a-157">Scalability</span></span>

<span data-ttu-id="6225a-158">Ebben a forgatókönyvben a virtual machine scale sets az előtér- és összetevőket használ.</span><span class="sxs-lookup"><span data-stu-id="6225a-158">This scenario uses virtual machine scale sets for the front-end and back-end components.</span></span> <span data-ttu-id="6225a-159">A méretezési csoportok az előtér-alkalmazás szinten futtató Virtuálisgép-példányok száma automatikusan méretezheti az ügyfelek igényei szerint válaszul, vagy egy meghatározott ütemezés alapján.</span><span class="sxs-lookup"><span data-stu-id="6225a-159">With scale sets, the number of VM instances that run the front-end application tier can automatically scale in response to customer demand, or based on a defined schedule.</span></span> <span data-ttu-id="6225a-160">További információkért lásd: [az automatikus méretezés a virtual machine scale sets áttekintése][vmssautoscale-docs].</span><span class="sxs-lookup"><span data-stu-id="6225a-160">For more information, see [Overview of autoscale with virtual machine scale sets][vmssautoscale-docs].</span></span>

<span data-ttu-id="6225a-161">Méretezhetőség témaköröket talál a [méretezési ellenőrzőlista] [ scalability] a az Azure Architecture Centert.</span><span class="sxs-lookup"><span data-stu-id="6225a-161">For other scalability topics, see the [scalability checklist][scalability] in the Azure Architecture Center.</span></span>

### <a name="security"></a><span data-ttu-id="6225a-162">Biztonság</span><span class="sxs-lookup"><span data-stu-id="6225a-162">Security</span></span>

<span data-ttu-id="6225a-163">A virtuális hálózat hálózati biztonsági csoportok által védett, és a forgalom az előtér-alkalmazás szinten be.</span><span class="sxs-lookup"><span data-stu-id="6225a-163">All the virtual network traffic into the front-end application tier and protected by network security groups.</span></span> <span data-ttu-id="6225a-164">A szabályok korlátozzák a forgalmat, hogy csak az előtér-alkalmazás szintű Virtuálisgép-példányok férhessenek hozzá a háttér adatbázis szint.</span><span class="sxs-lookup"><span data-stu-id="6225a-164">Rules limit the flow of traffic so that only the front-end application tier VM instances can access the back-end database tier.</span></span> <span data-ttu-id="6225a-165">Nincs kimenő internetes forgalom engedélyezve van az adatbázisszint.</span><span class="sxs-lookup"><span data-stu-id="6225a-165">No outbound Internet traffic is allowed from the database tier.</span></span> <span data-ttu-id="6225a-166">A támadás által elfoglalt tárterület csökkentéséhez nincs közvetlen Távoli szolgáltatásfelügyelet portjai nyitva.</span><span class="sxs-lookup"><span data-stu-id="6225a-166">To reduce the attack footprint, no direct remote management ports are open.</span></span> <span data-ttu-id="6225a-167">További információkért lásd: [Azure-beli hálózati biztonsági csoportok][nsg-docs].</span><span class="sxs-lookup"><span data-stu-id="6225a-167">For more information, see [Azure network security groups][nsg-docs].</span></span>

<span data-ttu-id="6225a-168">Útmutató megtekintése a Payment Card Industry Data Security Standards (PCI DSS 3.2) üzembe helyezése [megfelelő infrastruktúra][pci-dss].</span><span class="sxs-lookup"><span data-stu-id="6225a-168">To view guidance on deploying Payment Card Industry Data Security Standards (PCI DSS 3.2) [compliant infrastructure][pci-dss].</span></span> <span data-ttu-id="6225a-169">Biztonságos forgatókönyvek tervezésével kapcsolatos általános útmutatásért tekintse meg a [Azure Security dokumentációja][security].</span><span class="sxs-lookup"><span data-stu-id="6225a-169">For general guidance on designing secure scenarios, see the [Azure Security Documentation][security].</span></span>

### <a name="resiliency"></a><span data-ttu-id="6225a-170">Rugalmasság</span><span class="sxs-lookup"><span data-stu-id="6225a-170">Resiliency</span></span>

<span data-ttu-id="6225a-171">A rendelkezésre állási zónák és a virtual machine scale sets együtt ebben a forgatókönyvben az Azure Application Gateway és a load balancer használ.</span><span class="sxs-lookup"><span data-stu-id="6225a-171">In combination with the use of Availability Zones and virtual machine scale sets, this scenario uses Azure Application Gateway and load balancer.</span></span> <span data-ttu-id="6225a-172">E két hálózati összetevők csatlakoztatott Virtuálisgép-példányok forgalom elosztását, és biztosíthatja, hogy a forgalom csak megtörténik a kifogástalan állapotú virtuális gépeket az állapot-mintavételei bele.</span><span class="sxs-lookup"><span data-stu-id="6225a-172">These two networking components distribute traffic to the connected VM instances, and include health probes that ensure traffic is only distributed to healthy VMs.</span></span> <span data-ttu-id="6225a-173">Két Application Gateway-példány egy aktív-passzív konfigurációban vannak konfigurálva, és a egy zónaredundáns load balancert használja.</span><span class="sxs-lookup"><span data-stu-id="6225a-173">Two Application Gateway instances are configured in an active-passive configuration, and a zone-redundant load balancer is used.</span></span> <span data-ttu-id="6225a-174">Ez a konfiguráció lehetővé teszi a hálózati erőforrásokhoz, és az alkalmazás rugalmas problémákra utal, amelyek egyébként zavarja a forgalom és végfelhasználói hozzáférése.</span><span class="sxs-lookup"><span data-stu-id="6225a-174">This configuration makes the networking resources and application resilient to issues that would otherwise disrupt traffic and impact end-user access.</span></span>

<span data-ttu-id="6225a-175">Rugalmas megoldások tervezésével kapcsolatos általános útmutatásért lásd: [megbízható Azure-alkalmazások tervezése](../../reliability/index.md).</span><span class="sxs-lookup"><span data-stu-id="6225a-175">For general guidance on designing resilient solutions, see [Designing reliable Azure applications](../../reliability/index.md).</span></span>

## <a name="deploy-the-scenario"></a><span data-ttu-id="6225a-176">A forgatókönyv megvalósításához</span><span class="sxs-lookup"><span data-stu-id="6225a-176">Deploy the scenario</span></span>

### <a name="prerequisites"></a><span data-ttu-id="6225a-177">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="6225a-177">Prerequisites</span></span>

- <span data-ttu-id="6225a-178">Meglévő Azure-fiókkal kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="6225a-178">You must have an existing Azure account.</span></span> <span data-ttu-id="6225a-179">Ha nem rendelkezik Azure-előfizetéssel, mindössze néhány perc alatt létrehozhat egy [ingyenes fiókot](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) a virtuális gép létrehozásának megkezdése előtt.</span><span class="sxs-lookup"><span data-stu-id="6225a-179">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) before you begin.</span></span>

- <span data-ttu-id="6225a-180">A háttér-méretezési csoportot az SQL Server-fürt üzembe helyezése, meg kell lennie egy tartományhoz az Azure Active Directory (AD) Domain Servicesben.</span><span class="sxs-lookup"><span data-stu-id="6225a-180">To deploy a SQL Server cluster into the back-end scale set, you would need a domain in Azure Active Directory (AD) Domain Services.</span></span>

### <a name="deploy-the-components"></a><span data-ttu-id="6225a-181">Az összetevők üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="6225a-181">Deploy the components</span></span>

<span data-ttu-id="6225a-182">Az alapvető infrastruktúra ebben a forgatókönyvben egy Azure Resource Manager-sablon üzembe helyezéséhez hajtsa végre az alábbi lépéseket.</span><span class="sxs-lookup"><span data-stu-id="6225a-182">To deploy the core infrastructure for this scenario with an Azure Resource Manager template, perform the following steps.</span></span>

<!-- markdownlint-disable MD033 -->

1. <span data-ttu-id="6225a-183">Válassza ki a **üzembe helyezés az Azure** gombra:</span><span class="sxs-lookup"><span data-stu-id="6225a-183">Select the **Deploy to Azure** button:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Fsolution-architectures%2Fmaster%2Finfrastructure%2Fregulated-multitier-app.json" target="_blank"><img src="https://azuredeploy.net/deploybutton.png"/></a>
2. <span data-ttu-id="6225a-184">Várja meg a sablon üzembe helyezéséhez az Azure Portal megnyitásához, majd kövesse az alábbi lépéseket:</span><span class="sxs-lookup"><span data-stu-id="6225a-184">Wait for the template deployment to open in the Azure portal, then complete the following steps:</span></span>
   - <span data-ttu-id="6225a-185">Válassza ki a **új létrehozása** erőforrás csoportra, majd adjon meg egy nevet például *myWindowsscenario* a szövegmezőben.</span><span class="sxs-lookup"><span data-stu-id="6225a-185">Choose to **Create new** resource group, then provide a name such as *myWindowsscenario* in the text box.</span></span>
   - <span data-ttu-id="6225a-186">Válassza ki a régiót, a **hely** legördülő listából.</span><span class="sxs-lookup"><span data-stu-id="6225a-186">Select a region from the **Location** drop-down box.</span></span>
   - <span data-ttu-id="6225a-187">Adjon meg egy felhasználónevet és a biztonságos jelszó a virtuális gép méretezési csoport példányaihoz.</span><span class="sxs-lookup"><span data-stu-id="6225a-187">Provide a username and secure password for the virtual machine scale set instances.</span></span>
   - <span data-ttu-id="6225a-188">Tekintse át a használati feltételeket, majd ellenőrizze **elfogadom a feltételeket és a fenti feltételeket**.</span><span class="sxs-lookup"><span data-stu-id="6225a-188">Review the terms and conditions, then check **I agree to the terms and conditions stated above**.</span></span>
   - <span data-ttu-id="6225a-189">Válassza ki a **beszerzési** gombra.</span><span class="sxs-lookup"><span data-stu-id="6225a-189">Select the **Purchase** button.</span></span>

<!-- markdownlint-enable MD033 -->

<span data-ttu-id="6225a-190">Az üzembe helyezés befejeződik 15 – 20 percet is igénybe vehet.</span><span class="sxs-lookup"><span data-stu-id="6225a-190">It can take 15-20 minutes for the deployment to complete.</span></span>

## <a name="pricing"></a><span data-ttu-id="6225a-191">Díjszabás</span><span class="sxs-lookup"><span data-stu-id="6225a-191">Pricing</span></span>

<span data-ttu-id="6225a-192">Ebben a forgatókönyvben költségének megismeréséhez, a szolgáltatások mindegyike a költségkalkulátor az előre konfigurált.</span><span class="sxs-lookup"><span data-stu-id="6225a-192">To explore the cost of running this scenario, all of the services are pre-configured in the cost calculator.</span></span> <span data-ttu-id="6225a-193">Tekintse meg, hogyan díjszabását szeretné módosítani az adott használati esetekhez, módosítsa a megfelelő változókat egyezik a várt forgalomhoz.</span><span class="sxs-lookup"><span data-stu-id="6225a-193">To see how the pricing would change for your particular use case, change the appropriate variables to match your expected traffic.</span></span>

<span data-ttu-id="6225a-194">A méretezési csoport Virtuálisgép-példányain az alkalmazásokat futtató száma alapján három példa költség profilok adtunk meg.</span><span class="sxs-lookup"><span data-stu-id="6225a-194">We have provided three sample cost profiles based on the number of scale set VM instances that run your applications.</span></span>

- <span data-ttu-id="6225a-195">[Kis][small-pricing]: a díjszabási példa korrelációt keres a két előtér-és két háttérbeli Virtuálisgép-példányok között.</span><span class="sxs-lookup"><span data-stu-id="6225a-195">[Small][small-pricing]: this pricing example correlates to two front-end and two back-end VM instances.</span></span>
- <span data-ttu-id="6225a-196">[Közepes][medium-pricing]: 20 előtér- és 5 háttérbeli Virtuálisgép-példányok a díjszabási példa utal.</span><span class="sxs-lookup"><span data-stu-id="6225a-196">[Medium][medium-pricing]: this pricing example correlates to 20 front-end and 5 back-end VM instances.</span></span>
- <span data-ttu-id="6225a-197">[Nagy][large-pricing]: 100 előtérrendszer, mind a 10 háttérbeli Virtuálisgép-példányok a díjszabási példa utal.</span><span class="sxs-lookup"><span data-stu-id="6225a-197">[Large][large-pricing]: this pricing example correlates to 100 front-end and 10 back-end VM instances.</span></span>

## <a name="related-resources"></a><span data-ttu-id="6225a-198">Kapcsolódó források (lehet, hogy a cikkek angol nyelvűek)</span><span class="sxs-lookup"><span data-stu-id="6225a-198">Related resources</span></span>

<span data-ttu-id="6225a-199">Ebben a forgatókönyvben egy háttérbeli virtuális gép méretezési csoportot, amely a Microsoft SQL Server-fürt használja.</span><span class="sxs-lookup"><span data-stu-id="6225a-199">This scenario used a back-end virtual machine scale set that runs a Microsoft SQL Server cluster.</span></span> <span data-ttu-id="6225a-200">A cosmos DB is használható, méretezhető és biztonságos adatbázis-rétegből az alkalmazásadatok számára.</span><span class="sxs-lookup"><span data-stu-id="6225a-200">Cosmos DB could also be used as a scalable and secure database tier for the application data.</span></span> <span data-ttu-id="6225a-201">Egy [Azure virtuális hálózati szolgáltatásvégpont] [ vnetendpoint-docs] lehetővé teszi, hogy csak a virtuális hálózatot a kritikus fontosságú Azure-szolgáltatási erőforrások védelmét.</span><span class="sxs-lookup"><span data-stu-id="6225a-201">An [Azure virtual network service endpoint][vnetendpoint-docs] allows you to secure your critical Azure service resources to only your virtual networks.</span></span> <span data-ttu-id="6225a-202">Ebben a forgatókönyvben a VNet-végpontok engedélyezése az előtér-alkalmazás szint és a Cosmos DB közötti adatforgalom biztonságossá teheti.</span><span class="sxs-lookup"><span data-stu-id="6225a-202">In this scenario, VNet endpoints allow you to secure traffic between the front-end application tier and Cosmos DB.</span></span> <span data-ttu-id="6225a-203">További információkért lásd: a [Azure Cosmos DB áttekintő](/azure/cosmos-db/introduction).</span><span class="sxs-lookup"><span data-stu-id="6225a-203">For more information, see the [Azure Cosmos DB overview](/azure/cosmos-db/introduction).</span></span>

<span data-ttu-id="6225a-204">Részletes megvalósítási útmutatók, tekintse át a [referenciaarchitektúra az SQL Server használatával N szintű alkalmazások][ntiersql-ra].</span><span class="sxs-lookup"><span data-stu-id="6225a-204">For more detailed implementation guides, review the [reference architecture for N-tier applications using SQL Server][ntiersql-ra].</span></span>

<!-- links -->
[appgateway-docs]: /azure/application-gateway/overview
[architecture]: ./media/architecture-regulated-multitier-app.png
[autoscaling]: /azure/architecture/best-practices/auto-scaling
[cloudwitness-docs]: /windows-server/failover-clustering/deploy-cloud-witness
[loadbalancer-docs]: /azure/load-balancer/load-balancer-overview
[nsg-docs]: /azure/virtual-network/security-overview
[ntiersql-ra]: /azure/architecture/reference-architectures/n-tier/n-tier-sql-server
[security]: /azure/security/
[scalability]: /azure/architecture/checklist/scalability
[scaleset-docs]: /azure/virtual-machine-scale-sets/overview
[sqlalwayson-docs]: /sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server
[vmssautoscale-docs]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview
[vnet-docs]: /azure/virtual-network/virtual-networks-overview
[vnetendpoint-docs]: /azure/virtual-network/virtual-network-service-endpoints-overview
[pci-dss]: /azure/security/blueprints/pcidss-iaaswa-overview
[dmz]: /azure/virtual-network/virtual-networks-dmz-nsg
[sql-linux]: /sql/linux/sql-server-linux-overview?view=sql-server-linux-2017
[cloud-witness]: /windows-server/failover-clustering/deploy-cloud-witness
[small-pricing]: https://azure.com/e/711bbfcbbc884ef8aa91cdf0f2caff72
[medium-pricing]: https://azure.com/e/b622d82d79b34b8398c4bce35477856f
[large-pricing]: https://azure.com/e/1d99d8b92f90496787abecffa1473a93
