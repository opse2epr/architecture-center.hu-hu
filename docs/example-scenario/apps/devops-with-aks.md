---
title: A DevOps és a Jenkins és az Azure Kubernetes Service
description: Már bizonyított megoldást kínál a Node.js-webalkalmazás, amely használja a Jenkins, a Azure Container Registry, az Azure Kubernetes Service, a Cosmos DB és a Grafana fejlesztési és üzemeltetési folyamat felépítésével bajlódnia.
author: iainfoulds
ms.date: 07/05/2018
ms.openlocfilehash: 775480b711f5457866ea8537fb354cebb6cf6720
ms.sourcegitcommit: 776b8c1efc662d42273a33de3b82ec69e3cd80c5
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/12/2018
ms.locfileid: "38987607"
---
# <a name="deploy-a-container-based-devops-pipeline-for-modern-application-development-with-jenkins-and-azure-kubernetes-service"></a><span data-ttu-id="3f09a-103">Telepítsen egy probléma a modern alkalmazások fejlesztése a Jenkins és az Azure Kubernetes Service-ben tároló-alapú fejlesztési és üzemeltetési folyamatot</span><span class="sxs-lookup"><span data-stu-id="3f09a-103">Deploy a container-based DevOps pipeline for modern application development with Jenkins and Azure Kubernetes Service</span></span>

<span data-ttu-id="3f09a-104">Ebben a példaforgatókönyvben olyan vállalatok, amelyek fejlesztése korszerűsítheti a tárolók és a DevOps-munkafolyamatokba használatával szeretne alkalmazható.</span><span class="sxs-lookup"><span data-stu-id="3f09a-104">This example scenario is applicable to businesses that want to modernize application development by using containers and DevOps workflows.</span></span> <span data-ttu-id="3f09a-105">Ebben a megoldásban a Node.js-webalkalmazás összeállítása és a Jenkins által üzembe helyezett egy Azure Container Registry és Azure Kubernetes Service-ben.</span><span class="sxs-lookup"><span data-stu-id="3f09a-105">In this solution, a Node.js web app is built and deployed by Jenkins into an Azure Container Registry and Azure Kubernetes Service.</span></span> <span data-ttu-id="3f09a-106">Globálisan elosztott adatbázis-rétegből, az Azure Cosmos DB-hez használható.</span><span class="sxs-lookup"><span data-stu-id="3f09a-106">For a globally distributed database tier, Azure Cosmos DB is used.</span></span> <span data-ttu-id="3f09a-107">Figyelheti, és az alkalmazás teljesítményproblémáinak elhárítása, az Azure Monitor integrálható a Grafana példány és az irányítópult.</span><span class="sxs-lookup"><span data-stu-id="3f09a-107">To monitor and troubleshoot application performance, Azure Monitor integrates with a Grafana instance and dashboard.</span></span>

<span data-ttu-id="3f09a-108">Példaforgatókönyvek alkalmazás például egy automatizált fejlesztési környezetet biztosít, új kódot véglegesítéseket ellenőrzése és hogyan lehet továbbítani rá új üzembe helyezésekhez, átmeneti és éles környezetekbe.</span><span class="sxs-lookup"><span data-stu-id="3f09a-108">Example application scenarios include providing an automated development environment, validating new code commits, and pushing new deployments into staging or production environments.</span></span> <span data-ttu-id="3f09a-109">Hagyományosan vállalkozások kellett manuálisan hozhat létre és fordítsa le az alkalmazásokat és frissítéseket, és egy nagy, monolitikus kódot alap kezelhet.</span><span class="sxs-lookup"><span data-stu-id="3f09a-109">Traditionally, businesses had to manually build and compile applications and updates, and maintain a large, monolithic code base.</span></span> <span data-ttu-id="3f09a-110">A folyamatos integrációs (CI) és a folyamatos készregyártás (CD) használó alkalmazások fejlesztését modern megközelítését gyorsabban hozhat létre programot, teszteléséhez, és a szolgáltatások üzembe helyezéséhez.</span><span class="sxs-lookup"><span data-stu-id="3f09a-110">With a modern approach to application development that uses continuous integration (CI) and continuous deployment (CD), you can more quickly build, test, and deploy services.</span></span> <span data-ttu-id="3f09a-111">Ez a modern módszer lehetővé teszi, hogy kiadási alkalmazásokat és frissítéseket az ügyfelekhez a gyorsabb és hatékonyabb módon üzleti változásaihoz.</span><span class="sxs-lookup"><span data-stu-id="3f09a-111">This modern approach lets you release applications and updates to your customers faster, and respond to changing business demands in a more agile manner.</span></span>

<span data-ttu-id="3f09a-112">Azure-szolgáltatások, például az Azure Kubernetes Service, Container Registry és Cosmos DB használatával vállalatok használhatja a legújabb, az alkalmazás fejlesztési technikákkal és eszközök segítségével egyszerűsítheti azok végrehajtási magas rendelkezésre állású.</span><span class="sxs-lookup"><span data-stu-id="3f09a-112">By using Azure services such as Azure Kubernetes Service, Container Registry, and Cosmos DB, companies can use the latest in application development techniques and tools to simplify the process of implementing high availability.</span></span>

## <a name="potential-use-cases"></a><span data-ttu-id="3f09a-113">A lehetséges alkalmazási helyzetek</span><span class="sxs-lookup"><span data-stu-id="3f09a-113">Potential use cases</span></span>

<span data-ttu-id="3f09a-114">Fontolja meg a megoldást a következő esetekben használja:</span><span class="sxs-lookup"><span data-stu-id="3f09a-114">Consider this solution for the following use cases:</span></span>

* <span data-ttu-id="3f09a-115">Modernizálhatja alkalmazás fejlesztési eljárásaikat mikroszolgáltatásokon és tárolókon alapuló megközelítést.</span><span class="sxs-lookup"><span data-stu-id="3f09a-115">Modernizing application development practices to a microservices, container-based approach.</span></span>
* <span data-ttu-id="3f09a-116">Felgyorsítható az alkalmazások fejlesztése és üzembe helyezési életciklusának.</span><span class="sxs-lookup"><span data-stu-id="3f09a-116">Speeding up application development and deployment lifecycles.</span></span>
* <span data-ttu-id="3f09a-117">Központi telepítések tesztelése és érvényesítési elfogadási környezetek automatizálása.</span><span class="sxs-lookup"><span data-stu-id="3f09a-117">Automating deployments to test or acceptance environments for validation.</span></span>

## <a name="architecture"></a><span data-ttu-id="3f09a-118">Architektúra</span><span class="sxs-lookup"><span data-stu-id="3f09a-118">Architecture</span></span>

![Részt vesz egy fejlesztési és üzemeltetési megoldást a Jenkins az Azure Container Registry és Azure Kubernetes Service használatával az Azure-összetevőket architektúrájának áttekintése][architecture]

<span data-ttu-id="3f09a-120">Ez a megoldás egy Node.js-webalkalmazás és adatbázis-háttérrendszer fejlesztési és üzemeltetési folyamatot ismerteti.</span><span class="sxs-lookup"><span data-stu-id="3f09a-120">This solution covers a DevOps pipeline for a Node.js web application and database backend.</span></span> <span data-ttu-id="3f09a-121">Az adatok a következőképpen folyamatok a megoldáson keresztül:</span><span class="sxs-lookup"><span data-stu-id="3f09a-121">The data flows through the solution as follows:</span></span>

1. <span data-ttu-id="3f09a-122">A fejlesztők a Node.js webes alkalmazás forráskódjának módosítást hajt végre.</span><span class="sxs-lookup"><span data-stu-id="3f09a-122">A developer makes changes to the Node.js web application source code.</span></span>
2. <span data-ttu-id="3f09a-123">A kód módosítása számára fontos, hogy a forrás vezérlő adattár, például a GitHub.</span><span class="sxs-lookup"><span data-stu-id="3f09a-123">The code change is committed to a source control respository, such as GitHub.</span></span>
3. <span data-ttu-id="3f09a-124">A folyamatos integrációs (CI) folyamat elindításához egy GitHub-webhook aktiválja a Jenkins projekt build.</span><span class="sxs-lookup"><span data-stu-id="3f09a-124">To start the continuous integration (CI) process, a GitHub webhook triggers a Jenkins project build.</span></span>
4. <span data-ttu-id="3f09a-125">A Jenkins készítése feladatot használ a dinamikus fordító-ügynökhöz az Azure Kubernetes Service egy tároló-létrehozási folyamat végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="3f09a-125">The Jenkins build job uses a dynamic build agent in Azure Kubernetes Service to perform a container build process.</span></span>
5. <span data-ttu-id="3f09a-126">Egy tárolórendszerkép jön létre a kódot verziókövetési rendszerben, és ezután a rendszer továbbítja egy Azure Container Registrybe.</span><span class="sxs-lookup"><span data-stu-id="3f09a-126">A container image is created from the code in source control, and is then pushed to an Azure Container Registry.</span></span>
6. <span data-ttu-id="3f09a-127">Jenkins folyamatos üzembe helyezés (CD) keresztül a Kubernetes-fürtöt helyezünk üzembe a a frissített tárolórendszerkép.</span><span class="sxs-lookup"><span data-stu-id="3f09a-127">Through continuous deployment (CD), Jenkins deploys this updated container image to the Kubernetes cluster.</span></span>
7. <span data-ttu-id="3f09a-128">A Node.js-webalkalmazás Azure Cosmos DB, a háttérbeli használja.</span><span class="sxs-lookup"><span data-stu-id="3f09a-128">The Node.js web application uses Azure Cosmos DB as it's backend.</span></span> <span data-ttu-id="3f09a-129">Cosmos DB és az Azure Kubernetes Service jelentéseket mérőszámok az Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="3f09a-129">Both Cosmos DB and Azure Kubernetes Service report metrics to Azure Monitor.</span></span>
8. <span data-ttu-id="3f09a-130">A Grafana példány nyújt az alkalmazásteljesítmény alapján az Azure Monitor az adatok vizuális irányítópultokkal.</span><span class="sxs-lookup"><span data-stu-id="3f09a-130">A Grafana instance provides visual dashboards of the application performance based on the data from Azure Monitor.</span></span>

### <a name="components"></a><span data-ttu-id="3f09a-131">Összetevők</span><span class="sxs-lookup"><span data-stu-id="3f09a-131">Components</span></span>

* <span data-ttu-id="3f09a-132">[A Jenkins] [ jenkins] egy nyílt forráskódú automatizáló kiszolgáló, amely integrálható az Azure-szolgáltatások engedélyezése a folyamatos integrációs (CI) és a folyamatos készregyártás (CD).</span><span class="sxs-lookup"><span data-stu-id="3f09a-132">[Jenkins][jenkins] is an open-source automation server that can integrate with Azure services to enable continuous integration (CI) and continuous deployment (CD).</span></span> <span data-ttu-id="3f09a-133">Ebben a megoldásban a Jenkins koordinálja véglegesítés verziókövetési alapján új tárolórendszerképek létrehozása, leküldi a rendszerképeket az Azure Container Registrybe, majd frissítések alkalmazáspéldányok Azure Kubernetes Service-ben.</span><span class="sxs-lookup"><span data-stu-id="3f09a-133">In this solution, Jenkins orchestrates the creation of new container images based on commits to source control, pushes those images to Azure Container Registry, then updates application instances in Azure Kubernetes Service.</span></span>
* <span data-ttu-id="3f09a-134">[Azure-beli Linux rendszerű virtuális gépek] [ azurevm-docs] a Jenkins és a Grafana példányok futtatásához használt.</span><span class="sxs-lookup"><span data-stu-id="3f09a-134">[Azure Linux Virtual Machines][azurevm-docs] are used to run the Jenkins and Grafana instances.</span></span>
* <span data-ttu-id="3f09a-135">[Az Azure Container Registry] [ azureacr-docs] tárolja és kezeli az Azure Kubernetes Service-fürt által használt tárolórendszerképek.</span><span class="sxs-lookup"><span data-stu-id="3f09a-135">[Azure Container Registry][azureacr-docs] stores and manages container images that are used by the Azure Kubernetes Service cluster.</span></span> <span data-ttu-id="3f09a-136">Képek a rendszer biztonságosan tárolja, és más régiókban is replikálja az Azure platform üzembe helyezéshez szükséges idő felgyorsítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="3f09a-136">Images are securely stored, and can replicated to other regions by the Azure platform to speed up deployment times.</span></span>
* <span data-ttu-id="3f09a-137">[Az Azure Kubernetes Service] [ azureaks-docs] egy felügyelt Kubernetes-platform, amely lehetővé teszi, hogy helyezhet üzembe és kezelhet tárolóalapú alkalmazásokat tárolóvezénylési szakértelem nélkül is.</span><span class="sxs-lookup"><span data-stu-id="3f09a-137">[Azure Kubernetes Service][azureaks-docs] is a managed Kubernetes platform that lets you deploy and manage containerized applications without container orchestration expertise.</span></span> <span data-ttu-id="3f09a-138">Üzemeltetett Kubernetes-szolgáltatásként az Azure olyan fontos műveleteket bonyolít le, mint az állapotmonitorozás és a karbantartás.</span><span class="sxs-lookup"><span data-stu-id="3f09a-138">As a hosted Kubernetes service, Azure handles critical tasks like health monitoring and maintenance for you.</span></span>
* <span data-ttu-id="3f09a-139">[Az Azure Cosmos DB] [ azurecosmosdb-docs] egy globálisan elosztott, többmodelles adatbázis, amely lehetővé teszi, hogy illeszkedjen az igényeihez különféle adatbázis és a konzisztencia modellek közül választhat.</span><span class="sxs-lookup"><span data-stu-id="3f09a-139">[Azure Cosmos DB][azurecosmosdb-docs] is a globally distributed, multi-model database that allows you to choose from various database and consistency models to suit your needs.</span></span> <span data-ttu-id="3f09a-140">A Cosmos DB használatával az adatok globális replikálása, és van nem fürt felügyeleti vagy a replikációs összetevő telepítését és konfigurálását.</span><span class="sxs-lookup"><span data-stu-id="3f09a-140">With Cosmos DB, your data can be globally replicated, and there is no cluster management or replication components to deploy and configure.</span></span>
* <span data-ttu-id="3f09a-141">[Az Azure Monitor] [ azuremonitor-docs] segít a teljesítmény, a biztonság fenntartására és a trendek azonosítására.</span><span class="sxs-lookup"><span data-stu-id="3f09a-141">[Azure Monitor][azuremonitor-docs] helps you track performance, maintain security, and identify trends.</span></span> <span data-ttu-id="3f09a-142">Figyelő által előállított metrikákat más erőforrásokat és eszközöket, mint a Grafana használhatják.</span><span class="sxs-lookup"><span data-stu-id="3f09a-142">Metrics obtained by Monitor can be used by other resources and tools, such as Grafana.</span></span>
* <span data-ttu-id="3f09a-143">[Grafana] [ grafana] egy nyílt forráskódú megoldás lekérdezésére, megjelenítése, riasztás és metrikák ismertetése.</span><span class="sxs-lookup"><span data-stu-id="3f09a-143">[Grafana][grafana] is an open-source solution to query, visualize, alert, and understand metrics.</span></span> <span data-ttu-id="3f09a-144">Egy adatforrás beépülő modul az Azure Monitor lehetővé teszi, hogy a Grafana létrehozása az Azure Kubernetes Service-ben futó és a Cosmos DB használatával az alkalmazások teljesítményének figyelése vizuális irányítópultokkal.</span><span class="sxs-lookup"><span data-stu-id="3f09a-144">A data source plugin for Azure Monitor allows Grafana to create visual dashboards to monitor the performance of your applications running in Azure Kubernetes Service and using Cosmos DB.</span></span>

### <a name="alternatives"></a><span data-ttu-id="3f09a-145">Alternatív megoldások</span><span class="sxs-lookup"><span data-stu-id="3f09a-145">Alternatives</span></span>

* <span data-ttu-id="3f09a-146">[A Visual Studio Team Services] [ vsts] és a egy folyamatos integrációs (CI), tesztelési és üzembe helyezése (CD) megvalósítása a Team Foundation Server Súgó folyamat-bármely alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="3f09a-146">[Visual Studio Team Services][vsts] and Team Foundation Server help you implement a continuous integration (CI), test, and deployment (CD) pipeline for any app.</span></span>
* <span data-ttu-id="3f09a-147">[Kubernetes] [ kubernetes] futtatható közvetlenül az Azure-beli virtuális gépek helyett egy felügyelt szolgáltatáson keresztül, ha szeretné jobban szabályozhatja a fürthöz.</span><span class="sxs-lookup"><span data-stu-id="3f09a-147">[Kubernetes][kubernetes] can be run directly on Azure VMs instead of via a managed service if you would like more control over the cluster.</span></span>
* <span data-ttu-id="3f09a-148">[A Service Fabric] [ service-fabric] van egy másik másodlagos tárolóvezénylő, mely lecserélheti az AKS.</span><span class="sxs-lookup"><span data-stu-id="3f09a-148">[Service Fabric][service-fabric] is another alternate container orchestrator that can replace AKS.</span></span>

## <a name="considerations"></a><span data-ttu-id="3f09a-149">Megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="3f09a-149">Considerations</span></span>

### <a name="availability"></a><span data-ttu-id="3f09a-150">Rendelkezésre állás</span><span class="sxs-lookup"><span data-stu-id="3f09a-150">Availability</span></span>

<span data-ttu-id="3f09a-151">Az alkalmazásteljesítmény monitorozásához és a jelentés a problémák, ez a megoldás egyesíti a Grafana az Azure Monitor-vizuális irányítópultokkal.</span><span class="sxs-lookup"><span data-stu-id="3f09a-151">To monitor your application performance and report on issues, this solution combines Azure Monitor with Grafana for visual dashboards.</span></span> <span data-ttu-id="3f09a-152">Ezek az eszközök teszik figyelheti, és előfordulhat, hogy az összes ezután központilag telepítheti a CI/CD-folyamat kódfrissítéseket igénylő teljesítménnyel kapcsolatos problémáinak elhárítása.</span><span class="sxs-lookup"><span data-stu-id="3f09a-152">These tools let you monitor and troubleshoot performance issues that may require code updates, which can all then be deployed with the CI/CD pipeline.</span></span>

<span data-ttu-id="3f09a-153">Az Azure Kubernetes Service-fürt részeként a terheléselosztó elosztja a forgalmat alkalmazás egy vagy több tárolók (podok) az alkalmazást futtató között.</span><span class="sxs-lookup"><span data-stu-id="3f09a-153">As part of the Azure Kubernetes Service cluster, a load balancer distributes application traffic to one or more containers (pods) that run your application.</span></span> <span data-ttu-id="3f09a-154">Ez a megközelítés a tárolóalapú alkalmazások Kubernetes-ben futó magas rendelkezésre állású infrastruktúrát biztosít az ügyfelek számára.</span><span class="sxs-lookup"><span data-stu-id="3f09a-154">This approach to running containerized applications in Kubernetes provides a highly-available infrastructure for your customers.</span></span>

<span data-ttu-id="3f09a-155">Rendelkezésre állási témaköröket talál a [rendelkezésre állási ellenőrzőlista] [ availability] az architektúra-központ érhető el.</span><span class="sxs-lookup"><span data-stu-id="3f09a-155">For other availability topics, see the [availability checklist][availability] available in the architecure center.</span></span>

### <a name="scalability"></a><span data-ttu-id="3f09a-156">Méretezhetőség</span><span class="sxs-lookup"><span data-stu-id="3f09a-156">Scalability</span></span>

<span data-ttu-id="3f09a-157">Az Azure Kubernetes Service lehetővé teszi a fürtcsomópontok, hogy a videólejátszást az alkalmazások számát.</span><span class="sxs-lookup"><span data-stu-id="3f09a-157">Azure Kubernetes Service lets you scale the number of cluster nodes to meet the demands of your applications.</span></span> <span data-ttu-id="3f09a-158">Ahogy az alkalmazás növekszik, ki lehet terjeszteni a szolgáltatás futtatásához Kubernetes-csomópontok száma.</span><span class="sxs-lookup"><span data-stu-id="3f09a-158">As your application increases, you can scale out the number of Kubernetes nodes that run your service.</span></span>

<span data-ttu-id="3f09a-159">Az Azure Cosmos DB egy globálisan elosztott, többmodelles adatbázis, amely globálisan méretezhető tárolt alkalmazásadatok.</span><span class="sxs-lookup"><span data-stu-id="3f09a-159">Application data is stored in Azure Cosmos DB, a globally distributed, multi-model database that can scale globally.</span></span> <span data-ttu-id="3f09a-160">A cosmos DB kivonatolja az infrastruktúra mint a hagyományos adatbázis-összetevőket kell, és dönthet úgy, hogy a Cosmos DB globálisan, hogy a videólejátszást az ügyfelek replikálni.</span><span class="sxs-lookup"><span data-stu-id="3f09a-160">Cosmos DB abstracts the need to scale your  infrastructure as with traditional database components, and you can choose to replicate your Cosmos DB globally to meet the demands of your customers.</span></span>

<span data-ttu-id="3f09a-161">Méretezhetőség témaköröket talál a [méretezési ellenőrzőlista] [ scalability] az architektúra-központ érhető el.</span><span class="sxs-lookup"><span data-stu-id="3f09a-161">For other scalability topics, see the [scalability checklist][scalability] available in the architecure center.</span></span>

### <a name="security"></a><span data-ttu-id="3f09a-162">Biztonság</span><span class="sxs-lookup"><span data-stu-id="3f09a-162">Security</span></span>

<span data-ttu-id="3f09a-163">A támadások bekövetkeztének minimalizálása érdekében a megoldás nem fedi fel a Jenkins Virtuálisgép-példány HTTP protokollon keresztül.</span><span class="sxs-lookup"><span data-stu-id="3f09a-163">To minimize the attack footprint, this solutions does not expose the Jenkins VM instance over HTTP.</span></span> <span data-ttu-id="3f09a-164">Minden olyan felügyeleti feladatok, amely a jenkins használatával kezelheti a helyi gépen SSH-alagút használatával biztonságos távoli kapcsolatot hoz létre.</span><span class="sxs-lookup"><span data-stu-id="3f09a-164">For any management tasks that require you to interact with Jenkins, you create a secure remote connection using an SSH tunnel from your local machine.</span></span> <span data-ttu-id="3f09a-165">A Jenkins és a Grafana Virtuálisgép-példányok csak az SSH nyilvános kulcsos hitelesítés engedélyezett.</span><span class="sxs-lookup"><span data-stu-id="3f09a-165">Only SSH public key authentication is allowed for the Jenkins and Grafana VM instances.</span></span> <span data-ttu-id="3f09a-166">Jelszóalapú belépési kísérletek le vannak tiltva.</span><span class="sxs-lookup"><span data-stu-id="3f09a-166">Password-based logins are disabled.</span></span> <span data-ttu-id="3f09a-167">További információkért lásd: [Jenkins-kiszolgáló futtatása az Azure-ban](../../reference-architectures/jenkins/index.md).</span><span class="sxs-lookup"><span data-stu-id="3f09a-167">For more information, see [Run a Jenkins server on Azure](../../reference-architectures/jenkins/index.md).</span></span>

<span data-ttu-id="3f09a-168">Ez a megoldás hitelesítő adataival és engedélyeivel szétválasztása használja az Azure Active Directory (AD) egyszerű dedikált szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="3f09a-168">For separation of credentials and permissions, this solution uses a dedicated Azure Active Directory (AD) service principal.</span></span> <span data-ttu-id="3f09a-169">Az egyszerű szolgáltatás hitelesítő adatai, egy biztonságos hitelesítő objektumot a Jenkins tárolódnak, így, hogy ne legyenek közvetlenül elérhetővé tett és szkriptek vagy a buildelési folyamat látható.</span><span class="sxs-lookup"><span data-stu-id="3f09a-169">The credentials for this service principal are stored as a secure credential object in Jenkins so that they are not directly exposed and visible within scripts or the build pipeline.</span></span>

<span data-ttu-id="3f09a-170">Általános megoldások biztonságos, tekintse át a [Azure Security dokumentációja][security].</span><span class="sxs-lookup"><span data-stu-id="3f09a-170">For general guidance on designing secure solutions, see the [Azure Security Documentation][security].</span></span>

### <a name="resiliency"></a><span data-ttu-id="3f09a-171">Rugalmasság</span><span class="sxs-lookup"><span data-stu-id="3f09a-171">Resiliency</span></span>

<span data-ttu-id="3f09a-172">Ez a megoldás Azure Kubernetes Service-ben az alkalmazás használ.</span><span class="sxs-lookup"><span data-stu-id="3f09a-172">This solution uses Azure Kubernetes Service for your application.</span></span> <span data-ttu-id="3f09a-173">Kubernetes épített összetevői rugalmasság figyelő, és ha a probléma, indítsa újra a tárolókat (podok).</span><span class="sxs-lookup"><span data-stu-id="3f09a-173">Built into Kubernetes are resiliency components that monitor and restart the containers (pods) if there is an issue.</span></span> <span data-ttu-id="3f09a-174">Kombinálva több Kubernetes-csomópontokon fut, az alkalmazás működését egy pod vagy a csomópont nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="3f09a-174">Combined with running multiple Kubernetes nodes, your application can tolerate a pod or node being unavailable.</span></span>

<span data-ttu-id="3f09a-175">Rugalmas megoldások tervezésével kapcsolatos általános útmutatásért lásd: [rugalmas alkalmazások tervezése az Azure][resiliency].</span><span class="sxs-lookup"><span data-stu-id="3f09a-175">For general guidance on designing resilient solutions, see [Designing resilient applications for Azure][resiliency].</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="3f09a-176">A megoldás üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="3f09a-176">Deploy the solution</span></span>

<span data-ttu-id="3f09a-177">**Előfeltételek.**</span><span class="sxs-lookup"><span data-stu-id="3f09a-177">**Prerequisites.**</span></span>

* <span data-ttu-id="3f09a-178">Meglévő Azure-fiókkal kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="3f09a-178">You must have an existing Azure account.</span></span> <span data-ttu-id="3f09a-179">Ha nem rendelkezik Azure-előfizetéssel, mindössze néhány perc alatt létrehozhat egy [ingyenes fiókot](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) a virtuális gép létrehozásának megkezdése előtt.</span><span class="sxs-lookup"><span data-stu-id="3f09a-179">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) before you begin.</span></span>
* <span data-ttu-id="3f09a-180">Nyilvános ssh-kulcs van szüksége.</span><span class="sxs-lookup"><span data-stu-id="3f09a-180">You need an SSH public key pair.</span></span> <span data-ttu-id="3f09a-181">Egy nyilvános kulcspárra létrehozásának lépéseiért lásd: [létrehozása és használata egy SSH-kulcsot a Linux rendszerű virtuális gépek párosítsa][sshkeydocs].</span><span class="sxs-lookup"><span data-stu-id="3f09a-181">For steps on how to create a public key pair, see [Create and use an SSH key pair for Linux VMs][sshkeydocs].</span></span>
* <span data-ttu-id="3f09a-182">A hitelesítési szolgáltatás és az erőforrások egy Azure Active Directory (AD) egyszerű szolgáltatást kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="3f09a-182">You need an Azure Active Directory (AD) service principal for the authentication of service and resources.</span></span> <span data-ttu-id="3f09a-183">Szükség esetén is létrehoz egy szolgáltatást, az egyszerű [az ad sp create-for-rbac][createsp]</span><span class="sxs-lookup"><span data-stu-id="3f09a-183">If needed, you can create a service principal with [az ad sp create-for-rbac][createsp]</span></span>

    ```azurecli-interactive
    az ad sp create-for-rbac --name myDevOpsSolution
    ```

    <span data-ttu-id="3f09a-184">Jegyezze fel a *appId* és *jelszó* Ez a parancs kimenetében.</span><span class="sxs-lookup"><span data-stu-id="3f09a-184">Make a note of the *appId* and *password* in the output from this command.</span></span> <span data-ttu-id="3f09a-185">A megoldás üzembe helyezésekor ezeket az értékeket a sablonhoz adnia.</span><span class="sxs-lookup"><span data-stu-id="3f09a-185">You provide these values to the template when you deploy the solution.</span></span>

<span data-ttu-id="3f09a-186">Ez a megoldás egy Azure Resource Manager-sablon üzembe helyezéséhez hajtsa végre az alábbi lépéseket.</span><span class="sxs-lookup"><span data-stu-id="3f09a-186">To deploy this solution with an Azure Resource Manager template, perform the following steps.</span></span>

1. <span data-ttu-id="3f09a-187">Kattintson a **üzembe helyezés az Azure** gombra:</span><span class="sxs-lookup"><span data-stu-id="3f09a-187">Click the **Deploy to Azure** button:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Fsolution-architectures%2Fmaster%2Fapps%2Fdevops-with-aks%2Fazuredeploy.json" target="_blank"><img src="https://azuredeploy.net/deploybutton.png"/></a>
2. <span data-ttu-id="3f09a-188">Várja meg a sablon üzembe helyezéséhez az Azure Portal megnyitásához, majd kövesse az alábbi lépéseket:</span><span class="sxs-lookup"><span data-stu-id="3f09a-188">Wait for the template deployment to open in the Azure portal, then complete the following steps:</span></span>
   * <span data-ttu-id="3f09a-189">Válassza ki a **új létrehozása** erőforrás csoportra, majd adjon meg egy nevet például *myAKSDevOpsSolution* a szövegmezőben.</span><span class="sxs-lookup"><span data-stu-id="3f09a-189">Choose to **Create new** resource group, then provide a name such as *myAKSDevOpsSolution* in the text box.</span></span>
   * <span data-ttu-id="3f09a-190">Válassza ki a régiót, a **hely** legördülő listából.</span><span class="sxs-lookup"><span data-stu-id="3f09a-190">Select a region from the **Location** drop-down box.</span></span>
   * <span data-ttu-id="3f09a-191">A szolgáltatás egyszerű alkalmazás Azonosítóját és jelszavát adja meg a `az ad sp create-for-rbac` parancsot.</span><span class="sxs-lookup"><span data-stu-id="3f09a-191">Enter your service principal app ID and password from the `az ad sp create-for-rbac` command.</span></span>
   * <span data-ttu-id="3f09a-192">Adjon meg egy felhasználónevet és a biztonságos jelszó a Jenkins-példány és a Grafana konzol.</span><span class="sxs-lookup"><span data-stu-id="3f09a-192">Provide a username and secure password for the Jenkins instance and Grafana console.</span></span>
   * <span data-ttu-id="3f09a-193">Adjon meg egy SSH-kulcsot a Linuxos virtuális gépekre történő bejelentkezések biztonságossá tételéhez.</span><span class="sxs-lookup"><span data-stu-id="3f09a-193">Provide an SSH key to secure logins to the Linux VMs.</span></span>
   * <span data-ttu-id="3f09a-194">Tekintse át a használati feltételeket, majd ellenőrizze **elfogadom a feltételeket és a fenti feltételeket**.</span><span class="sxs-lookup"><span data-stu-id="3f09a-194">Review the terms and conditions, then check **I agree to the terms and conditions stated above**.</span></span>
   * <span data-ttu-id="3f09a-195">Válassza ki a **beszerzési** gombra.</span><span class="sxs-lookup"><span data-stu-id="3f09a-195">Select the **Purchase** button.</span></span>

<span data-ttu-id="3f09a-196">Az üzembe helyezés befejeződik 15 – 20 percet is igénybe vehet.</span><span class="sxs-lookup"><span data-stu-id="3f09a-196">It can take 15-20 minutes for the deployment to complete.</span></span>

## <a name="pricing"></a><span data-ttu-id="3f09a-197">Díjszabás</span><span class="sxs-lookup"><span data-stu-id="3f09a-197">Pricing</span></span>

<span data-ttu-id="3f09a-198">Ez a megoldás költségének megismeréséhez, a szolgáltatások mindegyike a költségkalkulátor az előre konfigurált.</span><span class="sxs-lookup"><span data-stu-id="3f09a-198">To explore the cost of running this solution, all of the services are pre-configured in the cost calculator.</span></span> <span data-ttu-id="3f09a-199">Tekintse meg, hogyan díjszabását szeretné módosítani az adott használati esetekhez, módosítsa a megfelelő változókat egyezik a várt forgalomhoz.</span><span class="sxs-lookup"><span data-stu-id="3f09a-199">To see how the pricing would change for your particular use case, change the appropriate variables to match your expected traffic.</span></span> <span data-ttu-id="3f09a-200">egyezik a várt forgalomhoz.</span><span class="sxs-lookup"><span data-stu-id="3f09a-200">match your expected traffic.</span></span>

<span data-ttu-id="3f09a-201">Adtunk három példa költség profilok tárolólemezképek tárolására és az alkalmazások futtatása a Kubernetes-csomópontok száma alapján.</span><span class="sxs-lookup"><span data-stu-id="3f09a-201">We have provided three sample cost profiles based on the number of container images to store and Kubernetes nodes to run your applications.</span></span>

* <span data-ttu-id="3f09a-202">[Kis][small-pricing]: Ez havonta 1000 tároló buildek utal.</span><span class="sxs-lookup"><span data-stu-id="3f09a-202">[Small][small-pricing]: this correlates to 1000 container builds per month.</span></span>
* <span data-ttu-id="3f09a-203">[Közepes][medium-pricing]: Ez havonta 100 000 tároló buildek utal.</span><span class="sxs-lookup"><span data-stu-id="3f09a-203">[Medium][medium-pricing]: this correlates to 100,000 container builds per month.</span></span>
* <span data-ttu-id="3f09a-204">[Nagy][large-pricing]: Ez havonta 1 000 000 tároló buildek utal.</span><span class="sxs-lookup"><span data-stu-id="3f09a-204">[Large][large-pricing]: this correlates to 1,000,000 container builds per month.</span></span>

## <a name="related-resources"></a><span data-ttu-id="3f09a-205">Kapcsolódó erőforrások</span><span class="sxs-lookup"><span data-stu-id="3f09a-205">Related Resources</span></span>

<span data-ttu-id="3f09a-206">Ez a megoldás az Azure Container Registry és az Azure Kubernetes Service tárolására és használható a tárolóalapú alkalmazások futtatására.</span><span class="sxs-lookup"><span data-stu-id="3f09a-206">This solution used Azure Container Registry and Azure Kubernetes Service to store and run your container-based applications.</span></span> <span data-ttu-id="3f09a-207">Az Azure Container Instances a tárolóalapú alkalmazások futtatása bármely vezénylési összetevők üzembe helyezése nélkül is használható.</span><span class="sxs-lookup"><span data-stu-id="3f09a-207">Azure Container Instances can also be used to run container-based applications, without having to provision any orchestration components.</span></span> <span data-ttu-id="3f09a-208">További információkért lásd: [Azure Container Instances áttekintésében][azureaci-docs].</span><span class="sxs-lookup"><span data-stu-id="3f09a-208">For more information, see [Azure Container Instances overview][azureaci-docs].</span></span>

<!-- links -->
[architecture]: ./media/devops-with-aks/architecture-devops-with-aks.png
[autoscaling]: ../../best-practices/auto-scaling.md
[availability]: ../../checklist/availability.md
[azureaci-docs]: /azure/container-instances/container-instances-overview
[azureacr-docs]: /azure/container-registry/container-registry-intro
[azurecosmosdb-docs]: /azure/cosmos-db/introduction
[azureaks-docs]: /azure/aks/intro-kubernetes
[azuremonitor-docs]: /azure/monitoring-and-diagnostics/monitoring-overview
[azurevm-docs]: /azure/virtual-machines/linux/overview
[createsp]: /cli/azure/ad/sp#az-ad-sp-create
[grafana]: https://grafana.com/
[jenkins]: https://jenkins.io/
[resiliency]: ../../resiliency/index.md
[resource-groups]: /azure/azure-resource-manager/resource-group-overview
[security]: /azure/security/
[scalability]: ../../checklist/scalability.md
[sshkeydocs]: /azure/virtual-machines/linux/mac-create-ssh-keys
[vsts]: /vsts/?view=vsts
[kubernetes]: https://kubernetes.io/
[service-fabric]: /azure/service-fabric/

[small-pricing]: https://azure.com/e/841f0a75b1ea4802ba1ac8f7918a71e7
[medium-pricing]: https://azure.com/e/eea0e6d79b4e45618a96d33383ec77ba
[large-pricing]: https://azure.com/e/3faab662c54c473da55a1e93a27e0e64