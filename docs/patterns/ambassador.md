---
title: Diplomata minta
description: "Segítő szolgáltatások által küldött kérelmek nevében fogyasztói szolgáltatás vagy alkalmazás létrehozására."
author: dragon119
ms.date: 06/23/2017
ms.openlocfilehash: 6c545619aab6a5817e55854350e3769834df27cd
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 11/14/2017
---
# <a name="ambassador-pattern"></a><span data-ttu-id="5f82f-103">Diplomata minta</span><span class="sxs-lookup"><span data-stu-id="5f82f-103">Ambassador pattern</span></span>

<span data-ttu-id="5f82f-104">Segítő szolgáltatások által küldött kérelmek nevében fogyasztói szolgáltatás vagy alkalmazás létrehozására.</span><span class="sxs-lookup"><span data-stu-id="5f82f-104">Create helper services that send network requests on behalf of a consumer service or application.</span></span> <span data-ttu-id="5f82f-105">Diplomata szolgáltatásnak közösen van elhelyezve az ügyfél-folyamaton kívüli proxyként tekinthetők.</span><span class="sxs-lookup"><span data-stu-id="5f82f-105">An ambassador service can be thought of as an out-of-process proxy that is co-located with the client.</span></span>

<span data-ttu-id="5f82f-106">Ebben a mintában hasznosak lehetnek a gyakori ügyfél kapcsolat feladatait, például a figyelés, naplózási, útválasztást, biztonságot (például a TLS), és [rugalmassági minták] [ resiliency-patterns] nyelvű független módon.</span><span class="sxs-lookup"><span data-stu-id="5f82f-106">This pattern can be useful for offloading common client connectivity tasks such as monitoring, logging, routing, security (such as TLS), and [resiliency patterns][resiliency-patterns] in a language agnostic way.</span></span> <span data-ttu-id="5f82f-107">Gyakran használják az örökölt alkalmazások vagy más alkalmazásokat, amelyek a nehezen módosítása, hogy a hálózati lehetőségek bővítése.</span><span class="sxs-lookup"><span data-stu-id="5f82f-107">It is often used with legacy applications, or other applications that are difficult to modify, in order to extend their networking capabilities.</span></span> <span data-ttu-id="5f82f-108">Azt is engedélyezheti a speciális csoport valósít meg ezeket a funkciókat.</span><span class="sxs-lookup"><span data-stu-id="5f82f-108">It can also enable a specialized team to implement those features.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="5f82f-109">A környezetben, és probléma</span><span class="sxs-lookup"><span data-stu-id="5f82f-109">Context and problem</span></span>

<span data-ttu-id="5f82f-110">Rugalmas felhőalapú alkalmazások szükséges szolgáltatások, mint [áramkör legfrissebb][circuit-breaker], útválasztási, mérési és figyelésére és a hálózati konfigurációs módosításokat lehessen.</span><span class="sxs-lookup"><span data-stu-id="5f82f-110">Resilient cloud-based applications require features such as [circuit breaking][circuit-breaker], routing, metering and monitoring, and the ability to make network-related configuration updates.</span></span> <span data-ttu-id="5f82f-111">Nehéz vagy lehetetlen frissíteni örökölt alkalmazások vagy a meglévő kódot szalagtárak ezeket a szolgáltatásokat hozzáadni, mert a kód már nem kezelt, vagy egyszerűen nem lehet módosítani a fejlesztő csapat által.</span><span class="sxs-lookup"><span data-stu-id="5f82f-111">It may be difficult or impossible to update legacy applications or existing code libraries to add these features, because the code is no longer maintained or can't be easily modified by the development team.</span></span>

<span data-ttu-id="5f82f-112">Hálózati hívások is kapcsolat, hitelesítési és engedélyezési jelentős konfigurálásra lehet szükség.</span><span class="sxs-lookup"><span data-stu-id="5f82f-112">Network calls may also require substantial configuration for connection, authentication, and authorization.</span></span> <span data-ttu-id="5f82f-113">Ha az adott hívások is használ, több alkalmazás, segítségével több nyelv és keretrendszer, a hívások kell konfigurálni minden esetben.</span><span class="sxs-lookup"><span data-stu-id="5f82f-113">If these calls are used across multiple applications, built using multiple languages and frameworks, the calls must be configured for each of these instances.</span></span> <span data-ttu-id="5f82f-114">Ezenkívül hálózati és biztonsági funkcióinak esetleg a szervezeten belüli központi csoport felügyeli.</span><span class="sxs-lookup"><span data-stu-id="5f82f-114">In addition, network and security functionality may need to be managed by a central team within your organization.</span></span> <span data-ttu-id="5f82f-115">A nagyméretű kódbázis lehet, hogy a csoport frissítése az alkalmazás kódja nem ismeri a kockázatos.</span><span class="sxs-lookup"><span data-stu-id="5f82f-115">With a large code base, it can be risky for that team to update application code they aren't familiar with.</span></span>

## <a name="solution"></a><span data-ttu-id="5f82f-116">Megoldás</span><span class="sxs-lookup"><span data-stu-id="5f82f-116">Solution</span></span>

<span data-ttu-id="5f82f-117">Ügyfél keretrendszerek és könyvtárak üzembe egy külső folyamat, amely az alkalmazások és szolgáltatások külső közötti proxyként funkcionál.</span><span class="sxs-lookup"><span data-stu-id="5f82f-117">Put client frameworks and libraries into an external process that acts as a proxy between your application and external services.</span></span> <span data-ttu-id="5f82f-118">A-proxyt üzembe helyezni az ugyanabban a gazdagép-környezetben az alkalmazás útválasztási, a rugalmasság, a biztonsági funkciók lehetővé, és minden állomás kapcsolatos hozzáférési korlátozások elkerülése érdekében.</span><span class="sxs-lookup"><span data-stu-id="5f82f-118">Deploy the proxy on the same host environment as your application to allow control over routing, resiliency, security features, and to avoid any host-related access restrictions.</span></span> <span data-ttu-id="5f82f-119">A diplomata minta segítségével szabványosítására és instrumentation kiterjesztése.</span><span class="sxs-lookup"><span data-stu-id="5f82f-119">You can also use the ambassador pattern to standardize and extend instrumentation.</span></span> <span data-ttu-id="5f82f-120">A proxy figyelheti például várakozási ideje vagy erőforrás-használati metrikák, és a figyelés történik, az alkalmazás ugyanazon gazdagép-környezetben.</span><span class="sxs-lookup"><span data-stu-id="5f82f-120">The proxy can monitor performance metrics such as latency or resource usage, and this monitoring happens in the same host environment as the application.</span></span>

![](./_images/ambassador.png)

<span data-ttu-id="5f82f-121">Funkciókat, amelyek a diplomata-t kiszervezzen az alkalmazás függetlenül is felügyelhetők.</span><span class="sxs-lookup"><span data-stu-id="5f82f-121">Features that are offloaded to the ambassador can be managed independently of the application.</span></span> <span data-ttu-id="5f82f-122">Frissítheti és a diplomata módosíthatja az alkalmazás régebbi működését megzavarása nélkül.</span><span class="sxs-lookup"><span data-stu-id="5f82f-122">You can update and modify the ambassador without disturbing the application's legacy functionality.</span></span> <span data-ttu-id="5f82f-123">Azt is lehetővé teszi, hogy külön, speciális csoportjai bevezetéséhez és karbantartásához biztonsági, hálózati vagy hitelesítési szolgáltatások, amelyek a diplomata helyezte.</span><span class="sxs-lookup"><span data-stu-id="5f82f-123">It also allows for separate, specialized teams to implement and maintain security, networking, or authentication features that have been moved to the ambassador.</span></span>

<span data-ttu-id="5f82f-124">Diplomata szolgáltatások telepíthető központilag a [oldalkocsi] [ sidecar] kísérő egy fogyasztó alkalmazás vagy szolgáltatás teljes életciklusát.</span><span class="sxs-lookup"><span data-stu-id="5f82f-124">Ambassador services can be deployed as a [sidecar][sidecar] to accompany the lifecycle of a consuming application or service.</span></span> <span data-ttu-id="5f82f-125">Azt is megteheti Ha egy diplomata megosztott egy közös gazdagép több különálló folyamat, központilag telepíthető egy démon vagy a Windows-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="5f82f-125">Alternatively, if an ambassador is shared by multiple separate processes on a common host, it can be deployed as a daemon or Windows service.</span></span> <span data-ttu-id="5f82f-126">Ha a fogyasztó szolgáltatás van indexelése, a diplomata kell létrehozni külön tárolóként ugyanazon a gazdagépen, a megfelelő hivatkozások kommunikációra konfigurálva.</span><span class="sxs-lookup"><span data-stu-id="5f82f-126">If the consuming service is containerized, the ambassador should be created as a separate container on the same host, with the appropriate links configured for communication.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="5f82f-127">Problémákat és szempontok</span><span class="sxs-lookup"><span data-stu-id="5f82f-127">Issues and considerations</span></span>

- <span data-ttu-id="5f82f-128">A proxy ad némi késés többletterhelést okoz.</span><span class="sxs-lookup"><span data-stu-id="5f82f-128">The proxy adds some latency overhead.</span></span> <span data-ttu-id="5f82f-129">Vegye figyelembe, hogy egy ügyféloldali kódtár, közvetlenül az alkalmazás által elindított jobb megközelítés-e.</span><span class="sxs-lookup"><span data-stu-id="5f82f-129">Consider whether a client library, invoked directly by the application, is a better approach.</span></span>
- <span data-ttu-id="5f82f-130">Vegye figyelembe a lehetséges hatása általánosított szolgáltatásainak a proxy.</span><span class="sxs-lookup"><span data-stu-id="5f82f-130">Consider the possible impact of including generalized features in the proxy.</span></span> <span data-ttu-id="5f82f-131">Például a diplomata újrapróbálkozások tudta kezelni, de, amely nem feltétlenül biztonságos kivéve, ha minden műveletnél az idempotent.</span><span class="sxs-lookup"><span data-stu-id="5f82f-131">For example, the ambassador could handle retries, but that might not be safe unless all operations are idempotent.</span></span>
- <span data-ttu-id="5f82f-132">Fontolja meg az eljárást, amely engedélyezi az ügyfél környezete felelt meg a proxy felé, valamint az ügyfélnek.</span><span class="sxs-lookup"><span data-stu-id="5f82f-132">Consider a mechanism to allow the client to pass some context to the proxy, as well as back to the client.</span></span> <span data-ttu-id="5f82f-133">Például a HTTP-kérelmek fejléceinek tilthatják le az újra gombra, vagy adja meg a próbálkozások maximális számát.</span><span class="sxs-lookup"><span data-stu-id="5f82f-133">For example, include HTTP request headers to opt out of retry or specify the maximum number of times to retry.</span></span>
- <span data-ttu-id="5f82f-134">Vegye figyelembe, hogyan fogja csomagba, és a-proxyt üzembe helyezni.</span><span class="sxs-lookup"><span data-stu-id="5f82f-134">Consider how you will package and deploy the proxy.</span></span>
- <span data-ttu-id="5f82f-135">Vegye figyelembe, hogy egyetlen megosztott példány minden ügyfél vagy egy példányát minden ügyfél számára.</span><span class="sxs-lookup"><span data-stu-id="5f82f-135">Consider whether to use a single shared instance for all clients or an instance for each client.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="5f82f-136">Mikor érdemes használni ezt a mintát</span><span class="sxs-lookup"><span data-stu-id="5f82f-136">When to use this pattern</span></span>

<span data-ttu-id="5f82f-137">Használja ezt a mintát mikor meg:</span><span class="sxs-lookup"><span data-stu-id="5f82f-137">Use this pattern when you:</span></span>

- <span data-ttu-id="5f82f-138">Több nyelvet vagy keretrendszert az ügyfél-kapcsolati funkciók közös beállításkészletre készítéséhez szükséges.</span><span class="sxs-lookup"><span data-stu-id="5f82f-138">Need to build a common set of client connectivity features for multiple languages or frameworks.</span></span>
- <span data-ttu-id="5f82f-139">Több területet ügyfél kapcsolat kapcsolatos kérdéseket infrastruktúra fejlesztők vagy más konkrétabb csoportokkal kiszervezése kell.</span><span class="sxs-lookup"><span data-stu-id="5f82f-139">Need to offload cross-cutting client connectivity concerns to infrastructure developers or other more specialized teams.</span></span>
- <span data-ttu-id="5f82f-140">Támogatja a felhő vagy a fürt hálózati kapcsolati követelményeinek egy örökölt alkalmazás vagy egy alkalmazásban, bonyolult módosítani kell.</span><span class="sxs-lookup"><span data-stu-id="5f82f-140">Need to support cloud or cluster connectivity requirements in a legacy application or an application that is difficult to modify.</span></span>

<span data-ttu-id="5f82f-141">Ez a minta nem alkalmasak lehetnek:</span><span class="sxs-lookup"><span data-stu-id="5f82f-141">This pattern may not be suitable:</span></span>

- <span data-ttu-id="5f82f-142">Hálózati kérés várakozási ideje esetén fontos.</span><span class="sxs-lookup"><span data-stu-id="5f82f-142">When network request latency is critical.</span></span> <span data-ttu-id="5f82f-143">A proxy bevezet némi többletterhelést okoz, noha a minimális, és egyes esetekben ez hatással lehet az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="5f82f-143">A proxy will introduce some overhead, although minimal, and in some cases this may affect the application.</span></span>
- <span data-ttu-id="5f82f-144">Ha ügyfél-kapcsolati funkciók egyetlen nyelvet használnak fel.</span><span class="sxs-lookup"><span data-stu-id="5f82f-144">When client connectivity features are consumed by a single language.</span></span> <span data-ttu-id="5f82f-145">Ebben az esetben a jobb megoldás lehet egy ügyféloldali kódtára a fejlesztési csapat terjesztett csomag.</span><span class="sxs-lookup"><span data-stu-id="5f82f-145">In that case, a better option might be a client library that is distributed to the development teams as a package.</span></span>
- <span data-ttu-id="5f82f-146">Amikor kapcsolati funkciók nem általánosítva, és az ügyfél alkalmazással szorosabb integrációt igényel.</span><span class="sxs-lookup"><span data-stu-id="5f82f-146">When connectivity features cannot be generalized and require deeper integration with the client application.</span></span>

## <a name="example"></a><span data-ttu-id="5f82f-147">Példa</span><span class="sxs-lookup"><span data-stu-id="5f82f-147">Example</span></span>

<span data-ttu-id="5f82f-148">Az alábbi ábrán látható, a kérést továbbítja az egy diplomata proxyn keresztül egy távoli szolgáltatási kérelmet.</span><span class="sxs-lookup"><span data-stu-id="5f82f-148">The following diagram shows an application making a request to a remote service via an ambassador proxy.</span></span> <span data-ttu-id="5f82f-149">A diplomata biztosít útválasztási megtörje áramkör és naplózás.</span><span class="sxs-lookup"><span data-stu-id="5f82f-149">The ambassador provides routing, circuit breaking, and logging.</span></span> <span data-ttu-id="5f82f-150">Meghívja a távoli szolgáltatást, és majd visszaadja a választ az ügyfélalkalmazás:</span><span class="sxs-lookup"><span data-stu-id="5f82f-150">It calls the remote service and then returns the response to the client application:</span></span>

![](./_images/ambassador-example.png) 

## <a name="related-guidance"></a><span data-ttu-id="5f82f-151">Kapcsolódó útmutató</span><span class="sxs-lookup"><span data-stu-id="5f82f-151">Related guidance</span></span>

- [<span data-ttu-id="5f82f-152">Oldalkocsi minta</span><span class="sxs-lookup"><span data-stu-id="5f82f-152">Sidecar pattern</span></span>](./sidecar.md)

<!-- links -->

[circuit-breaker]: ./circuit-breaker.md
[resiliency-patterns]: ./category/resiliency.md
[sidecar]: ./sidecar.md
