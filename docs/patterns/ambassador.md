---
title: Nagykövet minta
titleSuffix: Cloud Design Patterns
description: Olyan segítő szolgáltatásokat hozhat létre, amelyek egy otthoni használatra szánt szolgáltatás vagy alkalmazás nevében küldenek hálózati kéréseket.
keywords: tervezési minta
author: dragon119
ms.date: 06/23/2017
ms.topic: design-pattern
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: bbf83cdd4bc850c641a0559942f71013e9ce9553
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 03/20/2019
ms.locfileid: "58298905"
---
# <a name="ambassador-pattern"></a><span data-ttu-id="a81b4-104">Nagykövet minta</span><span class="sxs-lookup"><span data-stu-id="a81b4-104">Ambassador pattern</span></span>

<span data-ttu-id="a81b4-105">Olyan segítő szolgáltatásokat hozhat létre, amelyek egy otthoni használatra szánt szolgáltatás vagy alkalmazás nevében küldenek hálózati kéréseket.</span><span class="sxs-lookup"><span data-stu-id="a81b4-105">Create helper services that send network requests on behalf of a consumer service or application.</span></span> <span data-ttu-id="a81b4-106">A nagykövet szolgáltatás elképzelhető egy folyamaton kívüli proxyként, amely az ügyféllel közös elhelyezésű.</span><span class="sxs-lookup"><span data-stu-id="a81b4-106">An ambassador service can be thought of as an out-of-process proxy that is co-located with the client.</span></span>

<span data-ttu-id="a81b4-107">Ez a minta hasznos lehet a gyakori ügyfélkapcsolati feladatok, például a monitorozás, naplózás, útválasztás, biztonság (pl. TLS), valamint [rugalmassági minták][resiliency-patterns] kiszervezésére, nyelvtől független módon.</span><span class="sxs-lookup"><span data-stu-id="a81b4-107">This pattern can be useful for offloading common client connectivity tasks such as monitoring, logging, routing, security (such as TLS), and [resiliency patterns][resiliency-patterns] in a language agnostic way.</span></span> <span data-ttu-id="a81b4-108">Gyakran használják a hálózati képességek bővítésére örökölt alkalmazások vagy más, nehezen módosítható alkalmazások esetében.</span><span class="sxs-lookup"><span data-stu-id="a81b4-108">It is often used with legacy applications, or other applications that are difficult to modify, in order to extend their networking capabilities.</span></span> <span data-ttu-id="a81b4-109">Továbbá lehetővé teszi, hogy a funkciókat egy specializált csapat implementálhassa.</span><span class="sxs-lookup"><span data-stu-id="a81b4-109">It can also enable a specialized team to implement those features.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="a81b4-110">Kontextus és probléma</span><span class="sxs-lookup"><span data-stu-id="a81b4-110">Context and problem</span></span>

<span data-ttu-id="a81b4-111">Rugalmas felhőalapú alkalmazások olyan funkciókat igényelnek, mint például [áramkör-megszakítás](./circuit-breaker.md), útválasztás, mérés és figyelési és a képesség a hálózati konfigurációs frissítések.</span><span class="sxs-lookup"><span data-stu-id="a81b4-111">Resilient cloud-based applications require features such as [circuit breaking](./circuit-breaker.md), routing, metering and monitoring, and the ability to make network-related configuration updates.</span></span> <span data-ttu-id="a81b4-112">Előfordulhat, hogy az örökölt alkalmazásokat vagy a meglévő kódtárakat nehéz vagy lehetetlen frissíteni ezen funkciók hozzáadásával, mert a kód már nem felügyelt, vagy a fejlesztőcsapat nem tudja egyszerűen módosítani.</span><span class="sxs-lookup"><span data-stu-id="a81b4-112">It may be difficult or impossible to update legacy applications or existing code libraries to add these features, because the code is no longer maintained or can't be easily modified by the development team.</span></span>

<span data-ttu-id="a81b4-113">Hálózati hívások esetén is jelentős konfigurációra lehet szükség a kapcsolat, hitelesítés és engedélyezés terén.</span><span class="sxs-lookup"><span data-stu-id="a81b4-113">Network calls may also require substantial configuration for connection, authentication, and authorization.</span></span> <span data-ttu-id="a81b4-114">Ha ezeket a hívásokat több, sokféle nyelvből és keretrendszerből álló alkalmazásban használjuk, a hívásokat minden példányra vonatkozóan külön kell konfigurálni.</span><span class="sxs-lookup"><span data-stu-id="a81b4-114">If these calls are used across multiple applications, built using multiple languages and frameworks, the calls must be configured for each of these instances.</span></span> <span data-ttu-id="a81b4-115">Ezenfelül lehetséges, hogy a hálózati és biztonsági funkciókat egy vállalaton belüli központi csapatnak kell majd felügyelnie.</span><span class="sxs-lookup"><span data-stu-id="a81b4-115">In addition, network and security functionality may need to be managed by a central team within your organization.</span></span> <span data-ttu-id="a81b4-116">Nagy méretű kódbázis esetén kockázatos lehet a csapat számára egy olyan alkalmazáskódot frissíteni, amelyet nem ismer.</span><span class="sxs-lookup"><span data-stu-id="a81b4-116">With a large code base, it can be risky for that team to update application code they aren't familiar with.</span></span>

## <a name="solution"></a><span data-ttu-id="a81b4-117">Megoldás</span><span class="sxs-lookup"><span data-stu-id="a81b4-117">Solution</span></span>

<span data-ttu-id="a81b4-118">Helyezze az ügyfél-keretrendszereket és -könyvtárakat egy külső folyamatba, amely proxyként funkcionál az alkalmazás és a külső szolgáltatások között.</span><span class="sxs-lookup"><span data-stu-id="a81b4-118">Put client frameworks and libraries into an external process that acts as a proxy between your application and external services.</span></span> <span data-ttu-id="a81b4-119">Telepítse a proxyt ugyanabban a gazdakörnyezetben, mint az alkalmazást, hogy így lehetővé tegye az útválasztás, a rugalmasság és a biztonsági funkciók irányítását, és elkerülje a kiszolgálóval kapcsolatos hozzáférési korlátozásokat.</span><span class="sxs-lookup"><span data-stu-id="a81b4-119">Deploy the proxy on the same host environment as your application to allow control over routing, resiliency, security features, and to avoid any host-related access restrictions.</span></span> <span data-ttu-id="a81b4-120">A nagykövet minta segítségével továbbá szabványosíthatja és kiterjesztheti a kialakítást.</span><span class="sxs-lookup"><span data-stu-id="a81b4-120">You can also use the ambassador pattern to standardize and extend instrumentation.</span></span> <span data-ttu-id="a81b4-121">A proxy figyelni tudja a teljesítmény-mérőszámokat, például a várakozási időt vagy az erőforrás-használatot, a monitorozás pedig ugyanabban a gazdakörnyezetben történik, ahol az alkalmazás is van.</span><span class="sxs-lookup"><span data-stu-id="a81b4-121">The proxy can monitor performance metrics such as latency or resource usage, and this monitoring happens in the same host environment as the application.</span></span>

![A Nagykövet minta ábrája](./_images/ambassador.png)

<span data-ttu-id="a81b4-123">A nagykövetre kiszervezett funkciók az alkalmazástól függetlenül is felügyelhetők.</span><span class="sxs-lookup"><span data-stu-id="a81b4-123">Features that are offloaded to the ambassador can be managed independently of the application.</span></span> <span data-ttu-id="a81b4-124">Frissítheti és módosíthatja a nagykövetet anélkül, hogy megzavarná az alkalmazás örökölt funkcióit.</span><span class="sxs-lookup"><span data-stu-id="a81b4-124">You can update and modify the ambassador without disturbing the application's legacy functionality.</span></span> <span data-ttu-id="a81b4-125">Azt is lehetővé teszi, hogy külön, specializált csapatok implementálhassák és tarthassák karban a nagykövetre ruházott biztonsági, hálózati és hitelesítési funkciókat.</span><span class="sxs-lookup"><span data-stu-id="a81b4-125">It also allows for separate, specialized teams to implement and maintain security, networking, or authentication features that have been moved to the ambassador.</span></span>

<span data-ttu-id="a81b4-126">Nagykövet-szolgáltatások telepíthető egy [oldalkocsi](./sidecar.md) , egy felhasználó alkalmazás vagy szolgáltatás életciklusának végigkísérésére.</span><span class="sxs-lookup"><span data-stu-id="a81b4-126">Ambassador services can be deployed as a [sidecar](./sidecar.md) to accompany the lifecycle of a consuming application or service.</span></span> <span data-ttu-id="a81b4-127">Vagy akár telepítheti a nagykövetet démonként vagy Windows szolgáltatásként, ha a nagyköveten több különálló, azonos gazdagépen futó folyamat osztozik.</span><span class="sxs-lookup"><span data-stu-id="a81b4-127">Alternatively, if an ambassador is shared by multiple separate processes on a common host, it can be deployed as a daemon or Windows service.</span></span> <span data-ttu-id="a81b4-128">Ha a felhasználó szolgáltatás tárolóba van helyezve, a nagykövetet külön tárolóként kell létrehozni ugyanazon a gazdagépen, és konfigurálni kell a megfelelő hivatkozásokat a kommunikációhoz.</span><span class="sxs-lookup"><span data-stu-id="a81b4-128">If the consuming service is containerized, the ambassador should be created as a separate container on the same host, with the appropriate links configured for communication.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="a81b4-129">Problémák és megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="a81b4-129">Issues and considerations</span></span>

- <span data-ttu-id="a81b4-130">A proxy némi késéses többletterhelést okoz.</span><span class="sxs-lookup"><span data-stu-id="a81b4-130">The proxy adds some latency overhead.</span></span> <span data-ttu-id="a81b4-131">Mérje fel, hogy esetleg jobb megközelítés-e egy ügyféloldali kódtár, amelyet közvetlenül az alkalmazás hív meg.</span><span class="sxs-lookup"><span data-stu-id="a81b4-131">Consider whether a client library, invoked directly by the application, is a better approach.</span></span>
- <span data-ttu-id="a81b4-132">Fontolja meg, milyen hatásai lehetnek, ha a proxy általánosított funkciókat is tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="a81b4-132">Consider the possible impact of including generalized features in the proxy.</span></span> <span data-ttu-id="a81b4-133">Például a nagykövet kezelheti az újrapróbálkozásokat, de ez kockázatos lehet, hacsak nem idempotens mindegyik művelet.</span><span class="sxs-lookup"><span data-stu-id="a81b4-133">For example, the ambassador could handle retries, but that might not be safe unless all operations are idempotent.</span></span>
- <span data-ttu-id="a81b4-134">Gondolja át, hogy milyen mechanizmussal teheti lehetővé az ügyfél számára, hogy kontextust továbbítson a proxy felé úgy, hogy ez visszafelé is működjön.</span><span class="sxs-lookup"><span data-stu-id="a81b4-134">Consider a mechanism to allow the client to pass some context to the proxy, as well as back to the client.</span></span> <span data-ttu-id="a81b4-135">Például kapcsolja ki a HTTP-kérelmek fejlécei esetében az újrapróbálkozást, vagy adja meg az újrapróbálkozások maximális számát.</span><span class="sxs-lookup"><span data-stu-id="a81b4-135">For example, include HTTP request headers to opt out of retry or specify the maximum number of times to retry.</span></span>
- <span data-ttu-id="a81b4-136">Gondolja át, hogyan fogja csomagolni és üzembe helyezni a proxyt.</span><span class="sxs-lookup"><span data-stu-id="a81b4-136">Consider how you will package and deploy the proxy.</span></span>
- <span data-ttu-id="a81b4-137">Fontolja meg, hogy egyetlen megosztott példányt szeretne-e használni minden ügyfél számára, vagy inkább ügyfelenként külön-külön példányt.</span><span class="sxs-lookup"><span data-stu-id="a81b4-137">Consider whether to use a single shared instance for all clients or an instance for each client.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="a81b4-138">Mikor érdemes ezt a mintát használni?</span><span class="sxs-lookup"><span data-stu-id="a81b4-138">When to use this pattern</span></span>

<span data-ttu-id="a81b4-139">Használja ezt a mintát, ha:</span><span class="sxs-lookup"><span data-stu-id="a81b4-139">Use this pattern when you:</span></span>

- <span data-ttu-id="a81b4-140">Egy közös ügyfélkapcsolati funkciókészletet kell létrehoznia különböző nyelvekhez és keretrendszerekhez.</span><span class="sxs-lookup"><span data-stu-id="a81b4-140">Need to build a common set of client connectivity features for multiple languages or frameworks.</span></span>
- <span data-ttu-id="a81b4-141">Ki kell szerveznie az egyidejű ügyfélkapcsolati problémákat infrastruktúra-fejlesztőkre vagy más specializált csapatokra.</span><span class="sxs-lookup"><span data-stu-id="a81b4-141">Need to offload cross-cutting client connectivity concerns to infrastructure developers or other more specialized teams.</span></span>
- <span data-ttu-id="a81b4-142">Támogatnia kell a felhő- vagy a fürtkapcsolati követelményeket egy örökölt vagy nehezen módosítható alkalmazásban.</span><span class="sxs-lookup"><span data-stu-id="a81b4-142">Need to support cloud or cluster connectivity requirements in a legacy application or an application that is difficult to modify.</span></span>

<span data-ttu-id="a81b4-143">Nem érdemes ezt a mintát használni, ha:</span><span class="sxs-lookup"><span data-stu-id="a81b4-143">This pattern may not be suitable:</span></span>

- <span data-ttu-id="a81b4-144">A hálózati kérések késései kritikus következményekkel járnak.</span><span class="sxs-lookup"><span data-stu-id="a81b4-144">When network request latency is critical.</span></span> <span data-ttu-id="a81b4-145">A proxy némi többletterhelést okoz (habár minimális mértékben), és ez esetenként befolyásolhatja az alkalmazás működését.</span><span class="sxs-lookup"><span data-stu-id="a81b4-145">A proxy will introduce some overhead, although minimal, and in some cases this may affect the application.</span></span>
- <span data-ttu-id="a81b4-146">Ha az ügyfélkapcsolati funkciókat egyetlen nyelv használja.</span><span class="sxs-lookup"><span data-stu-id="a81b4-146">When client connectivity features are consumed by a single language.</span></span> <span data-ttu-id="a81b4-147">Ebben az esetben jobb megoldás lehet egy ügyféloldali kódtár, amelyet csomag formájában oszthat szét a fejlesztői csapatok között.</span><span class="sxs-lookup"><span data-stu-id="a81b4-147">In that case, a better option might be a client library that is distributed to the development teams as a package.</span></span>
- <span data-ttu-id="a81b4-148">Ha a kapcsolati funkciók nem általánosíthatók, és mélyebb integrációjuk szükséges az ügyfélalkalmazással.</span><span class="sxs-lookup"><span data-stu-id="a81b4-148">When connectivity features cannot be generalized and require deeper integration with the client application.</span></span>

## <a name="example"></a><span data-ttu-id="a81b4-149">Példa</span><span class="sxs-lookup"><span data-stu-id="a81b4-149">Example</span></span>

<span data-ttu-id="a81b4-150">Az alábbi ábrán látható, ahogyan egy alkalmazás nagykövetproxyn keresztül küld egy kérést egy távoli szolgáltatásnak.</span><span class="sxs-lookup"><span data-stu-id="a81b4-150">The following diagram shows an application making a request to a remote service via an ambassador proxy.</span></span> <span data-ttu-id="a81b4-151">A nagykövet biztosítja az útválasztást, az áramköri megszakítást és a naplózást.</span><span class="sxs-lookup"><span data-stu-id="a81b4-151">The ambassador provides routing, circuit breaking, and logging.</span></span> <span data-ttu-id="a81b4-152">Meghívja a távoli szolgáltatást, majd visszaadja a választ az ügyfélalkalmazásnak:</span><span class="sxs-lookup"><span data-stu-id="a81b4-152">It calls the remote service and then returns the response to the client application:</span></span>

![A Nagykövet minta – példa](./_images/ambassador-example.png)

## <a name="related-guidance"></a><span data-ttu-id="a81b4-154">Kapcsolódó útmutatók</span><span class="sxs-lookup"><span data-stu-id="a81b4-154">Related guidance</span></span>

- [<span data-ttu-id="a81b4-155">Oldalkocsi minta</span><span class="sxs-lookup"><span data-stu-id="a81b4-155">Sidecar pattern</span></span>](./sidecar.md)

<!-- links -->

[resiliency-patterns]: ./category/resiliency.md
