---
title: Összevont identitás mintája
titleSuffix: Cloud Design Patterns
description: A hitelesítést delegálhatja egy külső identitásszolgáltatónak.
keywords: tervezési minta
author: dragon119
ms.date: 06/23/2017
ms.topic: design-pattern
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: f4e8d2dff1c653cf2b8ef0109f1cc3027e5428b9
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 03/20/2019
ms.locfileid: "58298585"
---
# <a name="federated-identity-pattern"></a><span data-ttu-id="0d8cf-104">Összevont identitás mintája</span><span class="sxs-lookup"><span data-stu-id="0d8cf-104">Federated Identity pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="0d8cf-105">A hitelesítést delegálhatja egy külső identitásszolgáltatónak.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-105">Delegate authentication to an external identity provider.</span></span> <span data-ttu-id="0d8cf-106">Ezzel leegyszerűsítheti a fejlesztést, minimalizálhatja a szükséges felhasználói adminisztrációt és javíthatja az alkalmazás felhasználói élményét.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-106">This can simplify development, minimize the requirement for user administration, and improve the user experience of the application.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="0d8cf-107">Kontextus és probléma</span><span class="sxs-lookup"><span data-stu-id="0d8cf-107">Context and problem</span></span>

<span data-ttu-id="0d8cf-108">A felhasználóknak általában több, különböző üzleti partner által biztosított és üzemeltetett alkalmazást kell használniuk.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-108">Users typically need to work with multiple applications provided and hosted by different organizations they have a business relationship with.</span></span> <span data-ttu-id="0d8cf-109">Előfordulhat, hogy ezeknek a felhasználóknak mindegyikhez adott (eltérő) hitelesítő adatokat kell használniuk.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-109">These users might be required to use specific (and different) credentials for each one.</span></span> <span data-ttu-id="0d8cf-110">Mindez:</span><span class="sxs-lookup"><span data-stu-id="0d8cf-110">This can:</span></span>

- <span data-ttu-id="0d8cf-111">**Nem egységes felhasználói élményt okozhat**.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-111">**Cause a disjointed user experience**.</span></span> <span data-ttu-id="0d8cf-112">A felhasználók gyakran elfelejtik a bejelentkezési hitelesítő adataikat, ha sok különböző adatot kell kezelniük.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-112">Users often forget sign-in credentials when they have many different ones.</span></span>

- <span data-ttu-id="0d8cf-113">**Biztonsági réseket idézhet elő**.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-113">**Expose security vulnerabilities**.</span></span> <span data-ttu-id="0d8cf-114">Ha egy felhasználó kilép a cégtől, a fiókját azonnal meg kell szüntetni.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-114">When a user leaves the company the account must immediately be deprovisioned.</span></span> <span data-ttu-id="0d8cf-115">Nagy cégeknél erről könnyű megfeledkezni.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-115">It's easy to overlook this in large organizations.</span></span>

- <span data-ttu-id="0d8cf-116">**Bonyolítja a felhasználókezelést**.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-116">**Complicate user management**.</span></span> <span data-ttu-id="0d8cf-117">A rendszergazdáknak kell kezelniük az összes felhasználó hitelesítő adatait, és pluszfeladatokat (például jelszó-emlékeztetők küldését) kell elvégezniük.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-117">Administrators must manage credentials for all of the users, and perform additional tasks such as providing password reminders.</span></span>

<span data-ttu-id="0d8cf-118">A felhasználók általában jobban szeretnék ugyanazokat a hitelesítő adatokat használni az összes alkalmazáshoz.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-118">Users typically prefer to use the same credentials for all these applications.</span></span>

## <a name="solution"></a><span data-ttu-id="0d8cf-119">Megoldás</span><span class="sxs-lookup"><span data-stu-id="0d8cf-119">Solution</span></span>

<span data-ttu-id="0d8cf-120">Használjon összevont identitás használatára képes hitelesítési mechanizmust.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-120">Implement an authentication mechanism that can use federated identity.</span></span> <span data-ttu-id="0d8cf-121">Különítse el a felhasználói hitelesítést az alkalmazáskódtól, és delegálja a hitelesítést egy megbízható identitásszolgáltatóra.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-121">Separate user authentication from the application code, and delegate authentication to a trusted identity provider.</span></span> <span data-ttu-id="0d8cf-122">Ezzel leegyszerűsítheti a fejlesztést, és lehetővé teheti, hogy a felhasználók szélesebb palettáról válasszanak identitásszolgáltatót a hitelesítéshez, és közben a lehető legkisebbre csökkentsék az adminisztratív terhelést.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-122">This can simplify development and allow users to authenticate using a wider range of identity providers (IdP) while minimizing the administrative overhead.</span></span> <span data-ttu-id="0d8cf-123">Azt is lehetővé teszi, hogy egyértelműen elválassza a hitelesítést az engedélyezéstől.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-123">It also allows you to clearly decouple authentication from authorization.</span></span>

<span data-ttu-id="0d8cf-124">A megbízható identitásszolgáltatók között vannak céges címtárak, helyszíni összevonási szolgáltatások, külső üzleti partnerek által biztosított biztonsági jegykiadó szolgáltatások (STS), vagy éppen közösségi identitásszolgáltatók, amelyek képesek kezelni például a Microsoft-, Google-, Yahoo!- vagy Facebook-fiókkal rendelkező felhasználók hitelesítését.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-124">The trusted identity providers include corporate directories, on-premises federation services, other security token services (STS) provided by business partners, or social identity providers that can authenticate users who have, for example, a Microsoft, Google, Yahoo!, or Facebook account.</span></span>

<span data-ttu-id="0d8cf-125">Az ábra az összevont identitás mintáját mutatja be, amikor egy ügyfélnek épp egy hitelesítést igénylő szolgáltatáshoz kell hozzáférnie.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-125">The figure illustrates the Federated Identity pattern when a client application needs to access a service that requires authentication.</span></span> <span data-ttu-id="0d8cf-126">A hitelesítést egy STS-sel együttműködő identitásszolgáltató hajtja végre.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-126">The authentication is performed by an IdP that works in concert with an STS.</span></span> <span data-ttu-id="0d8cf-127">Az identitásszolgáltató a hitelesített felhasználóról információt szolgáltató biztonsági jogkivonatokat ad ki.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-127">The IdP issues security tokens that provide information about the authenticated user.</span></span> <span data-ttu-id="0d8cf-128">Ez a jogcímnek is nevezett információ tartalmazza a felhasználó identitását, és tartalmazhat más adatokat is, például a szerepkörtagságot és részletesebb hozzáférési jogosultságokat.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-128">This information, referred to as claims, includes the user’s identity, and might also include other information such as role membership and more granular access rights.</span></span>

![Az összevont hitelesítés áttekintése](./_images/federated-identity-overview.png)

<span data-ttu-id="0d8cf-130">Ezt a modellt gyakran nevezik jogcímalapú hozzáférés-vezérlésnek.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-130">This model is often called claims-based access control.</span></span> <span data-ttu-id="0d8cf-131">Az alkalmazások és a szolgáltatások a jogkivonatban található jogcímek alapján engednek hozzáférést a szolgáltatásokhoz és funkciókhoz.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-131">Applications and services authorize access to features and functionality based on the claims contained in the token.</span></span> <span data-ttu-id="0d8cf-132">A hitelesítést igénylő szolgáltatásnak meg kell bíznia az identitásszolgáltatóban.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-132">The service that requires authentication must trust the IdP.</span></span> <span data-ttu-id="0d8cf-133">Az ügyfélalkalmazás kapcsolatba lép a hitelesítést elvégző identitásszolgáltatóval.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-133">The client application contacts the IdP that performs the authentication.</span></span> <span data-ttu-id="0d8cf-134">Ha a hitelesítés sikeres, az identitásszolgáltató a felhasználót azonosító jogcímeket tartalmazó jogkivonatot ad vissza az STS-nek (tartsa szem előtt, hogy az identitásszolgáltató és az STS lehet ugyanaz a szolgáltatás is).</span><span class="sxs-lookup"><span data-stu-id="0d8cf-134">If the authentication is successful, the IdP returns a token containing the claims that identify the user to the STS (note that the IdP and STS can be the same service).</span></span> <span data-ttu-id="0d8cf-135">Az STS az ügyfélnek való visszaadás előtt előre meghatározott szabályok alapján átalakíthatja és kiegészítheti a jogcímeket.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-135">The STS can transform and augment the claims in the token based on predefined rules, before returning it to the client.</span></span> <span data-ttu-id="0d8cf-136">Az ügyfélalkalmazás ezután továbbíthatja ezt a jogkivonatot a szolgáltatásnak az identitása bizonyítékaként.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-136">The client application can then pass this token to the service as proof of its identity.</span></span>

> <span data-ttu-id="0d8cf-137">A megbízhatósági láncban lehetnek további STS-ek.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-137">There might be additional STSs in the chain of trust.</span></span> <span data-ttu-id="0d8cf-138">A később ismertetett forgatókönyvben például egy helyszíni STS megbízik egy másik, a felhasználó hitelesítése céljából egy identitásszolgáltatóhoz való hozzáférésért felelős STS-ben.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-138">For example, in the scenario described later, an on-premises STS trusts another STS that is responsible for accessing an identity provider to authenticate the user.</span></span> <span data-ttu-id="0d8cf-139">Ez a megközelítés gyakori nagyvállalati forgatókönyvekben, ahol van helyszíni STS és címtár is.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-139">This approach is common in enterprise scenarios where there's an on-premises STS and directory.</span></span>

<span data-ttu-id="0d8cf-140">Az összevont hitelesítés szabványalapú megoldást nyújt a különböző tartományokban található identitásokba fektetett bizalom problémájára, és képes az egyszeri bejelentkezés támogatására.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-140">Federated authentication provides a standards-based solution to the issue of trusting identities across diverse domains, and can support single sign-on.</span></span> <span data-ttu-id="0d8cf-141">Minden típusú alkalmazásnál egyre elterjedtebb, különösen a felhőalapú alkalmazásoknál, mert anélkül támogatja az egyszeri bejelentkezést, hogy közvetlen hálózati kapcsolatot igényelne az identitásszolgáltatókhoz.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-141">It's becoming more common across all types of applications, especially cloud-hosted applications, because it supports single sign-on without requiring a direct network connection to identity providers.</span></span> <span data-ttu-id="0d8cf-142">A felhasználónak nem kell minden alkalmazáshoz megadnia a hitelesítő adatait.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-142">The user doesn't have to enter credentials for every application.</span></span> <span data-ttu-id="0d8cf-143">Ez növeli a biztonságot, mivel nem kell létrehozni a sok különböző alkalmazáshoz való hozzáféréshez szükséges hitelesítő adatokat, és az eredeti identitásszolgáltatón kívül minden alkalmazás elől elrejthetők a felhasználó hitelesítő adatai.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-143">This increases security because it prevents the creation of credentials required to access many different applications, and it also hides the user’s credentials from all but the original identity provider.</span></span> <span data-ttu-id="0d8cf-144">Az alkalmazások csak a jogkivonatban található hitelesített identitásadatokat látják.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-144">Applications see just the authenticated identity information contained within the token.</span></span>

<span data-ttu-id="0d8cf-145">Az összevont identitásnak az is nagy előnye, hogy az identitás és a hitelesítő adatok kezelése az identitásszolgáltató felelőssége.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-145">Federated identity also has the major advantage that management of the identity and credentials is the responsibility of the identity provider.</span></span> <span data-ttu-id="0d8cf-146">Az alkalmazásnak vagy szolgáltatásnak nem kell identitáskezelési funkciókat biztosítania.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-146">The application or service doesn't need to provide identity management features.</span></span> <span data-ttu-id="0d8cf-147">Ezenfelül céges forgatókönyvekben a céges címtárnak nem kell tudnia a felhasználóról, ha megbízik az identitásszolgáltatóban.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-147">In addition, in corporate scenarios, the corporate directory doesn't need to know about the user if it trusts the identity provider.</span></span> <span data-ttu-id="0d8cf-148">Ezzel megszűnik a felhasználók identitásának címtáron belül való kezelésének adminisztratív terhe.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-148">This removes all the administrative overhead of managing the user identity within the directory.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="0d8cf-149">Problémák és megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="0d8cf-149">Issues and considerations</span></span>

<span data-ttu-id="0d8cf-150">Összevont hitelesítést megvalósító alkalmazások tervezésekor vegye figyelembe az alábbiakat:</span><span class="sxs-lookup"><span data-stu-id="0d8cf-150">Consider the following when designing applications that implement federated authentication:</span></span>

- <span data-ttu-id="0d8cf-151">A hitelesítés kritikus hibapont lehet a rendszeren belül.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-151">Authentication can be a single point of failure.</span></span> <span data-ttu-id="0d8cf-152">Ha több adatközpontba telepíti az alkalmazását, érdemes lehet az identitáskezelő mechanizmust is telepíteni ugyanazokba az adatközpontokba, hogy megmaradjon az alkalmazás megbízhatósága és rendelkezésre állása.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-152">If you deploy your application to multiple datacenters, consider deploying your identity management mechanism to the same datacenters to maintain application reliability and availability.</span></span>

- <span data-ttu-id="0d8cf-153">A hitelesítési eszközök segítségével konfigurálható a hitelesítési jogkivonatban található szerepkörjogcímeken alapuló hozzáférés-vezérlés.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-153">Authentication tools make it possible to configure access control based on role claims contained in the authentication token.</span></span> <span data-ttu-id="0d8cf-154">Ezt gyakran nevezik szerepköralapú hozzáférés-vezérlésnek (RBAC), és részletesebb szintű hozzáférés-vezérlést tesz lehetővé a szolgáltatások és erőforrások vonatkozásában.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-154">This is often referred to as role-based access control (RBAC), and it can allow a more granular level of control over access to features and resources.</span></span>

- <span data-ttu-id="0d8cf-155">A céges címtáraktól eltérően a közösségi identitásszolgáltatókat használó jogcímalapú hitelesítés az e-mail-címen és esetleg a néven kívül általában nem ad meg más adatot a hitelesített felhasználóról.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-155">Unlike a corporate directory, claims-based authentication using social identity providers doesn't usually provide information about the authenticated user other than an email address, and perhaps a name.</span></span> <span data-ttu-id="0d8cf-156">Néhány közösségi identitásszolgáltató – például egy Microsoft-fiók – csak egy egyedi azonosítót biztosít.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-156">Some social identity providers, such as a Microsoft account, provide only a unique identifier.</span></span> <span data-ttu-id="0d8cf-157">Az alkalmazásnak általában kezelnie kell néhány adatot a regisztrált felhasználókról, és képesnek kell lennie megfeleltetni ezt az információt a jogkivonat jogcímeiben tárolt azonosítóval.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-157">The application usually needs to maintain some information on registered users, and be able to match this information to the identifier contained in the claims in the token.</span></span> <span data-ttu-id="0d8cf-158">Ezt általában a regisztráció során szerzi be, amikor a felhasználó először használja az alkalmazást, majd az adatok további jogcímekként kerülnek be a jogkivonatba az egyes hitelesítések után.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-158">Typically this is done through registration when the user first accesses the application, and information is then injected into the token as additional claims after each authentication.</span></span>

- <span data-ttu-id="0d8cf-159">Ha egynél több identitásszolgáltató van konfigurálva az STS-hez, annak észlelnie kell, hogy melyik identitásszolgáltatóhoz kell átirányítania az adott felhasználót hitelesítésre.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-159">If there's more than one identity provider configured for the STS, it must detect which identity provider the user should be redirected to for authentication.</span></span> <span data-ttu-id="0d8cf-160">Ennek a folyamatnak a kezdőtartomány felderítése a neve.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-160">This process is called home realm discovery.</span></span> <span data-ttu-id="0d8cf-161">Lehetséges, hogy az STS erre képes automatikusan a felhasználó által megadott e-mail-cím vagy felhasználónév, a felhasználó által használni kívánt alkalmazás altartománya, a felhasználó IP-címtartománya vagy egy, a felhasználó böngészőjében tárolt cookie tartalma alapján.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-161">The STS might be able to do this automatically based on an email address or user name that the user provides, a subdomain of the application that the user is accessing, the user’s IP address scope, or on the contents of a cookie stored in the user’s browser.</span></span> <span data-ttu-id="0d8cf-162">Ha például a felhasználó egy Microsoft-tartományba eső e-mail-címet adott meg (pl.: user@live.com), az STS a felhasználót a Microsoft-fiók bejelentkezési oldalára irányítja át.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-162">For example, if the user entered an email address in the Microsoft domain, such as user@live.com, the STS will redirect the user to the Microsoft account sign-in page.</span></span> <span data-ttu-id="0d8cf-163">A későbbi látogatások alkalmával az STS egy cookie segítségével jelezheti, hogy az utolsó bejelentkezés egy Microsoft-fiók segítségével történt.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-163">On later visits, the STS could use a cookie to indicate that the last sign in was with a Microsoft account.</span></span> <span data-ttu-id="0d8cf-164">Ha az automatikus észlelés nem tudja meghatározni a kezdőtartományt, az STS megjelenít egy kezdőtartomány-felderítő oldalt, amely kilistázza a megbízható identitásszolgáltatókat, és a felhasználónak kell kiválasztania, melyiket szeretné igénybe venni.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-164">If automatic discovery can't determine the home realm, the STS will display a home realm discovery page that lists the trusted identity providers, and the user must select the one they want to use.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="0d8cf-165">Mikor érdemes ezt a mintát használni?</span><span class="sxs-lookup"><span data-stu-id="0d8cf-165">When to use this pattern</span></span>

<span data-ttu-id="0d8cf-166">Ez a minta például az alábbi forgatókönyvek esetében lehet hasznos:</span><span class="sxs-lookup"><span data-stu-id="0d8cf-166">This pattern is useful for scenarios such as:</span></span>

- <span data-ttu-id="0d8cf-167">**Egyszeri bejelentkezés a vállalatban**.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-167">**Single sign-on in the enterprise**.</span></span> <span data-ttu-id="0d8cf-168">Ebben a forgatókönyvben az alkalmazottakat hitelesíteni kell a felhőben üzemeltetett, vállalati biztonsági határon kívül eső céges alkalmazásokhoz, de nem kell minden alkalommal bejelentkezniük, amikor használnak egy alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-168">In this scenario you need to authenticate employees for corporate applications that are hosted in the cloud outside the corporate security boundary, without requiring them to sign in every time they visit an application.</span></span> <span data-ttu-id="0d8cf-169">A felhasználói élmény ugyanaz, mint a helyszíni alkalmazások használatakor, azaz a hitelesítés egy vállalati hálózatra való bejelentkezéskor történik, és onnantól bejelentkezés nélkül használható az összes releváns alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-169">The user experience is the same as when using on-premises applications where they're authenticated when signing in to a corporate network, and from then on have access to all relevant applications without needing to sign in again.</span></span>

- <span data-ttu-id="0d8cf-170">**Összevont identitás több partnerrel**.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-170">**Federated identity with multiple partners**.</span></span> <span data-ttu-id="0d8cf-171">Ebben a forgatókönyvben a céges alkalmazottakat és a céges címtárban fiókkal nem rendelkező üzleti partnereket is hitelesítenie kell.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-171">In this scenario you need to authenticate both corporate employees and business partners who don't have accounts in the corporate directory.</span></span> <span data-ttu-id="0d8cf-172">Ez a gyakori a cégek közötti alkalmazások és a külső szolgáltatást integráló alkalmazások esetében, valamint olyan helyzetben, amely során különböző informatikai rendszert alkalmazó vállalatok egyesülnek vagy megosztják az erőforrásaikat.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-172">This is common in business-to-business applications, applications that integrate with third-party services, and where companies with different IT systems have merged or shared resources.</span></span>

- <span data-ttu-id="0d8cf-173">**Összevont identitás SaaS-alkalmazásokban**.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-173">**Federated identity in SaaS applications**.</span></span> <span data-ttu-id="0d8cf-174">Ebben a forgatókönyvben független szoftvergyártók biztosítanak használatra kész szolgáltatást több ügyfélnek vagy bérlőnek.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-174">In this scenario independent software vendors provide a ready-to-use service for multiple clients or tenants.</span></span> <span data-ttu-id="0d8cf-175">Mindegyik bérlő egy megfelelő identitásszolgáltató használatával végzi el a hitelesítést.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-175">Each tenant authenticates using a suitable identity provider.</span></span> <span data-ttu-id="0d8cf-176">Az üzleti felhasználók például a céges hitelesítő adatokat fogják használni, a bérlő felhasználói és ügyfelei pedig a közösségi identitásuk hitelesítő adatait.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-176">For example, business users will use their corporate credentials, while consumers and clients of the tenant will use their social identity credentials.</span></span>

<span data-ttu-id="0d8cf-177">Nem érdemes ezt a mintát használni a következő helyzetekben:</span><span class="sxs-lookup"><span data-stu-id="0d8cf-177">This pattern might not be useful in the following situations:</span></span>

- <span data-ttu-id="0d8cf-178">Az alkalmazás összes felhasználója hitelesíthető egy identitásszolgáltatóval, és nincs szükség más identitásszolgáltatóval való hitelesítésre.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-178">All users of the application can be authenticated by one identity provider, and there's no requirement to authenticate using any other identity provider.</span></span> <span data-ttu-id="0d8cf-179">Ez olyan üzleti alkalmazásoknál gyakori, amelyek az alkalmazásból elérhető céges címtárat használnak hitelesítéshez VPN- vagy (felhőben futtatott forgatókönyvek esetében) a helyszíni címtár és az alkalmazás közötti kapcsolatot biztosító virtuális hálózati kapcsolaton keresztül.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-179">This is typical in business applications that use a corporate directory (accessible within the application) for authentication, by using a VPN, or (in a cloud-hosted scenario) through a virtual network connection between the on-premises directory and the application.</span></span>

- <span data-ttu-id="0d8cf-180">Az alkalmazás eredetileg egy másik hitelesítési mechanizmussal készült, esetleg egyéni felhasználói tárolókkal, vagy nem képes kezelni a jogcímalapú technológiák által használt egyeztetési szabványokat.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-180">The application was originally built using a different authentication mechanism, perhaps with custom user stores, or doesn't have the capability to handle the negotiation standards used by claims-based technologies.</span></span> <span data-ttu-id="0d8cf-181">A jogcímalapú hitelesítés és hozzáférés-vezérlés meglévő alkalmazásokra történő alkalmazása összetett feladat, és valószínűleg nem túl költséghatékony.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-181">Retrofitting claims-based authentication and access control into existing applications can be complex, and probably not cost effective.</span></span>

## <a name="example"></a><span data-ttu-id="0d8cf-182">Példa</span><span class="sxs-lookup"><span data-stu-id="0d8cf-182">Example</span></span>

<span data-ttu-id="0d8cf-183">Egy cég több-bérlős szolgáltatott szoftvert (SaaS) üzemeltet alkalmazásként a Microsoft Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-183">An organization hosts a multi-tenant software as a service (SaaS) application in Microsoft Azure.</span></span> <span data-ttu-id="0d8cf-184">Az alkalmazás tartalmaz egy webhelyet, amelyet a bérlők használhatnak az alkalmazás a saját felhasználóik számára történő kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-184">The application includes a website that tenants can use to manage the application for their own users.</span></span> <span data-ttu-id="0d8cf-185">Az alkalmazás lehetővé teszi a bérlők számára a webhely elérését egy Active Directory összevonási szolgáltatások (ADFS) által létrehozott összevont identitás használatával, ha a felhasználót a cég saját Active Directoryja hitelesítette.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-185">The application allows tenants to access the website by using a federated identity that is generated by Active Directory Federation Services (ADFS) when a user is authenticated by that organization’s own Active Directory.</span></span>

![Az alkalmazás elérési módja a felhasználók számára nagyvállalati előfizető esetében](./_images/federated-identity-multitenat.png)

<span data-ttu-id="0d8cf-187">Az ábrán látható, hogyan történik meg a bérlők hitelesítése a saját identitásszolgáltatójukkal (1. lépés), ebben az esetben az ADFS-sel.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-187">The figure shows how tenants authenticate with their own identity provider (step 1), in this case ADFS.</span></span> <span data-ttu-id="0d8cf-188">Egy bérlő sikeres hitelesítése után az ADFS kiad egy jogkivonatot.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-188">After successfully authenticating a tenant, ADFS issues a token.</span></span> <span data-ttu-id="0d8cf-189">Az ügyfél böngészője továbbítja ezt a jogkivonatot a SaaS-alkalmazás összevonási szolgáltatójának – amely megbízik a bérlő ADFS-e által kiállított jogkivonatokban –, hogy egy, a SaaS összevonási szolgáltatójához érvényes jogkivonatot kapjon vissza (2. lépés).</span><span class="sxs-lookup"><span data-stu-id="0d8cf-189">The client browser forwards this token to the SaaS application’s federation provider, which trusts tokens issued by the tenant’s ADFS, in order to get back a token that is valid for the SaaS federation provider (step 2).</span></span> <span data-ttu-id="0d8cf-190">Ha szükséges, a SaaS összevonási szolgáltató a jogkivonatban található jogcímeket az új jogkivonat ügyfélböngészőnek való visszaadása előtt olyan jogcímekké alakítja, amelyeket az alkalmazás felismer (3. lépés).</span><span class="sxs-lookup"><span data-stu-id="0d8cf-190">If necessary, the SaaS federation provider performs a transformation on the claims in the token into claims that the application recognizes (step 3) before returning the new token to the client browser.</span></span> <span data-ttu-id="0d8cf-191">Az alkalmazás megbízik az SaaS összevonási szolgáltató által kiállított jogkivonatokban, és a jogkivonat jogcímeivel alkalmazza az engedélyezési szabályokat (4. lépés).</span><span class="sxs-lookup"><span data-stu-id="0d8cf-191">The application trusts tokens issued by the SaaS federation provider and uses the claims in the token to apply authorization rules (step 4).</span></span>

<span data-ttu-id="0d8cf-192">A bérlőknek nem kell emlékezniük a különböző hitelesítő adataikra az alkalmazás eléréséhez, és a bérlő vállalata konfigurálhatja azon felhasználók listáját a saját ADFS-ben, akik hozzáférhetnek az alkalmazáshoz.</span><span class="sxs-lookup"><span data-stu-id="0d8cf-192">Tenants won't need to remember separate credentials to access the application, and an administrator at the tenant’s company can configure in its own ADFS the list of users that can access the application.</span></span>

## <a name="related-guidance"></a><span data-ttu-id="0d8cf-193">Kapcsolódó útmutatók</span><span class="sxs-lookup"><span data-stu-id="0d8cf-193">Related guidance</span></span>

- [<span data-ttu-id="0d8cf-194">Microsoft Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="0d8cf-194">Microsoft Azure Active Directory</span></span>](https://azure.microsoft.com/services/active-directory/)
- [<span data-ttu-id="0d8cf-195">Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="0d8cf-195">Active Directory Domain Services</span></span>](https://msdn.microsoft.com/library/bb897402.aspx)
- [<span data-ttu-id="0d8cf-196">Active Directory összevonási szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="0d8cf-196">Active Directory Federation Services</span></span>](https://msdn.microsoft.com/library/bb897402.aspx)
- [<span data-ttu-id="0d8cf-197">Több-bérlős alkalmazások identitáskezelése a Microsoft Azure-ban</span><span class="sxs-lookup"><span data-stu-id="0d8cf-197">Identity management for multitenant applications in Microsoft Azure</span></span>](/azure/architecture/multitenant-identity)
- [<span data-ttu-id="0d8cf-198">Több-bérlős alkalmazások az Azure-ban</span><span class="sxs-lookup"><span data-stu-id="0d8cf-198">Multitenant Applications in Azure</span></span>](/azure/dotnet-develop-multitenant-applications)
