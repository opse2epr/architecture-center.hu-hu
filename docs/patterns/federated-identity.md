---
title: Összevont identitás
description: Egy külső identitásszolgáltatótól delegált hitelesítés.
keywords: Kialakítási mintája
author: dragon119
ms.date: 06/23/2017
pnp.series.title: Cloud Design Patterns
pnp.pattern.categories:
- security
ms.openlocfilehash: a1edbdd080309383201d33e73602e2f18928c080
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 11/14/2017
---
# <a name="federated-identity-pattern"></a><span data-ttu-id="c99bf-104">Összevont identitás-minta</span><span class="sxs-lookup"><span data-stu-id="c99bf-104">Federated Identity pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="c99bf-105">Egy külső identitásszolgáltatótól delegált hitelesítés.</span><span class="sxs-lookup"><span data-stu-id="c99bf-105">Delegate authentication to an external identity provider.</span></span> <span data-ttu-id="c99bf-106">Ez fejlesztési egyszerűsítése, minimalizálása érdekében a felhasználókezelés kapcsolatos követelmények és az alkalmazás a felhasználói élmény javításához.</span><span class="sxs-lookup"><span data-stu-id="c99bf-106">This can simplify development, minimize the requirement for user administration, and improve the user experience of the application.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="c99bf-107">A környezetben, és probléma</span><span class="sxs-lookup"><span data-stu-id="c99bf-107">Context and problem</span></span>

<span data-ttu-id="c99bf-108">Felhasználók általában kell az üzleti kapcsolattal rendelkeznek több alkalmazáshoz megadott és a különböző szervezetek üzemelteti.</span><span class="sxs-lookup"><span data-stu-id="c99bf-108">Users typically need to work with multiple applications provided and hosted by different organizations they have a business relationship with.</span></span> <span data-ttu-id="c99bf-109">Ezek a felhasználók előfordulhat, hogy kell minden egyes megadott (és más) hitelesítő adatokat használja.</span><span class="sxs-lookup"><span data-stu-id="c99bf-109">These users might be required to use specific (and different) credentials for each one.</span></span> <span data-ttu-id="c99bf-110">Ez a következőket teheti:</span><span class="sxs-lookup"><span data-stu-id="c99bf-110">This can:</span></span>

- <span data-ttu-id="c99bf-111">**Egy különálló felhasználói felület miatt**.</span><span class="sxs-lookup"><span data-stu-id="c99bf-111">**Cause a disjointed user experience**.</span></span> <span data-ttu-id="c99bf-112">Felhasználók gyakran elfelejti bejelentkezési hitelesítő adataival, ha sok különböző néhányat a meglévők közül.</span><span class="sxs-lookup"><span data-stu-id="c99bf-112">Users often forget sign-in credentials when they have many different ones.</span></span>

- <span data-ttu-id="c99bf-113">**Biztonsági rések elérhetővé**.</span><span class="sxs-lookup"><span data-stu-id="c99bf-113">**Expose security vulnerabilities**.</span></span> <span data-ttu-id="c99bf-114">Amikor egy felhasználó elhagyja a vállalatot a fiók azonnal kell megszüntetett.</span><span class="sxs-lookup"><span data-stu-id="c99bf-114">When a user leaves the company the account must immediately be deprovisioned.</span></span> <span data-ttu-id="c99bf-115">Akkor is könnyen eltéveszthetők ezt a nagy méretű szervezeteknek.</span><span class="sxs-lookup"><span data-stu-id="c99bf-115">It's easy to overlook this in large organizations.</span></span>

- <span data-ttu-id="c99bf-116">**Felhasználókezelés nehezíti**.</span><span class="sxs-lookup"><span data-stu-id="c99bf-116">**Complicate user management**.</span></span> <span data-ttu-id="c99bf-117">Rendszergazdák kell a felhasználói hitelesítő adatok kezelése és például a jelszó-emlékeztető kezeléséről további feladatok elvégzéséhez.</span><span class="sxs-lookup"><span data-stu-id="c99bf-117">Administrators must manage credentials for all of the users, and perform additional tasks such as providing password reminders.</span></span>

<span data-ttu-id="c99bf-118">Felhasználók általában inkább ugyanazokat a hitelesítő adatokat használja ezeket az alkalmazásokat.</span><span class="sxs-lookup"><span data-stu-id="c99bf-118">Users typically prefer to use the same credentials for all these applications.</span></span>

## <a name="solution"></a><span data-ttu-id="c99bf-119">Megoldás</span><span class="sxs-lookup"><span data-stu-id="c99bf-119">Solution</span></span>

<span data-ttu-id="c99bf-120">Olyan hitelesítési mechanizmus, amellyel összevont identitás megvalósításához.</span><span class="sxs-lookup"><span data-stu-id="c99bf-120">Implement an authentication mechanism that can use federated identity.</span></span> <span data-ttu-id="c99bf-121">Külön felhasználói hitelesítést az alkalmazáskódban, és delegálja a hitelesítés a megbízható identitásszolgáltató.</span><span class="sxs-lookup"><span data-stu-id="c99bf-121">Separate user authentication from the application code, and delegate authentication to a trusted identity provider.</span></span> <span data-ttu-id="c99bf-122">Ez leegyszerűsítheti a fejlesztési és engedélyezése a felhasználók hitelesítése az identitás-szolgáltatóktól (IdP) szélesebb körének elvégezhető ugyanakkor minimalizálja az adminisztratív terhek.</span><span class="sxs-lookup"><span data-stu-id="c99bf-122">This can simplify development and allow users to authenticate using a wider range of identity providers (IdP) while minimizing the administrative overhead.</span></span> <span data-ttu-id="c99bf-123">Lehetővé teszi egyértelműen absztrakcióhoz engedélyezési hitelesítést.</span><span class="sxs-lookup"><span data-stu-id="c99bf-123">It also allows you to clearly decouple authentication from authorization.</span></span>

<span data-ttu-id="c99bf-124">A megbízható Identitásszolgáltatók közé tartozik a vállalati könyvtárak, a helyszíni összevonási szolgáltatások, más biztonsági jogkivonat (STS) által nyújtott szolgáltatások üzleti partnerek vagy a közösségi Identitásszolgáltatók, amelyek felhasználókat hitelesítheti rendelkező, például egy Microsoft Google, Yahoo!-s vagy Facebook-fiókkal.</span><span class="sxs-lookup"><span data-stu-id="c99bf-124">The trusted identity providers include corporate directories, on-premises federation services, other security token services (STS) provided by business partners, or social identity providers that can authenticate users who have, for example, a Microsoft, Google, Yahoo!, or Facebook account.</span></span>

<span data-ttu-id="c99bf-125">Ábra bemutatja az összevont identitási mintát, amikor egy ügyfél-alkalmazás kell elérni egy szolgáltatást, amelyhez hitelesítés szükséges.</span><span class="sxs-lookup"><span data-stu-id="c99bf-125">The figure illustrates the Federated Identity pattern when a client application needs to access a service that requires authentication.</span></span> <span data-ttu-id="c99bf-126">Az IdP, hogy az STS szolgáltatással együttműködik a hitelesítés történik.</span><span class="sxs-lookup"><span data-stu-id="c99bf-126">The authentication is performed by an IdP that works in concert with an STS.</span></span> <span data-ttu-id="c99bf-127">Az IdP, amelyek információval szolgálnak a hitelesített felhasználó biztonsági jogkivonatokat bocsát ki.</span><span class="sxs-lookup"><span data-stu-id="c99bf-127">The IdP issues security tokens that provide information about the authenticated user.</span></span> <span data-ttu-id="c99bf-128">Néven jogcímek, az információ magában foglalja a felhasználó identitását, és más információkat, például a szerepköri tagság és részletesebb hozzáférési jogosultsággal is tartalmazhatja.</span><span class="sxs-lookup"><span data-stu-id="c99bf-128">This information, referred to as claims, includes the user’s identity, and might also include other information such as role membership and more granular access rights.</span></span>

![Összevont hitelesítés áttekintése](./_images/federated-identity-overview.png)


<span data-ttu-id="c99bf-130">Ez a modell jogcímalapú hozzáférés-vezérlés gyakran nevezik.</span><span class="sxs-lookup"><span data-stu-id="c99bf-130">This model is often called claims-based access control.</span></span> <span data-ttu-id="c99bf-131">Alkalmazások és szolgáltatások szolgáltatásait és funkcióit a token lévő jogcímek alapján történő hozzáférés engedélyezésére.</span><span class="sxs-lookup"><span data-stu-id="c99bf-131">Applications and services authorize access to features and functionality based on the claims contained in the token.</span></span> <span data-ttu-id="c99bf-132">A szolgáltatás, amelyhez hitelesítés szükséges a kiállító terjesztési hely megbízhatónak kell lennie.</span><span class="sxs-lookup"><span data-stu-id="c99bf-132">The service that requires authentication must trust the IdP.</span></span> <span data-ttu-id="c99bf-133">Az ügyfélalkalmazás kapcsolatba lép a kiállító terjesztési hely, amely végrehajtja a hitelesítést.</span><span class="sxs-lookup"><span data-stu-id="c99bf-133">The client application contacts the IdP that performs the authentication.</span></span> <span data-ttu-id="c99bf-134">Ha a hitelesítés sikeres, a kiállító terjesztési hely a jogcímeket, amely azonosítja a felhasználót, hogy az STS (vegye figyelembe, hogy a kiállító terjesztési hely és STS lehet ugyanazt a szolgáltatást) tartalmazó jogkivonatot ad vissza.</span><span class="sxs-lookup"><span data-stu-id="c99bf-134">If the authentication is successful, the IdP returns a token containing the claims that identify the user to the STS (note that the IdP and STS can be the same service).</span></span> <span data-ttu-id="c99bf-135">Az STS átalakíthatja és kiegészítheti a jogcímeket a jogkivonatban, előre meghatározott szabályok alapján, az ügyfélnek való visszaküldés előtt.</span><span class="sxs-lookup"><span data-stu-id="c99bf-135">The STS can transform and augment the claims in the token based on predefined rules, before returning it to the client.</span></span> <span data-ttu-id="c99bf-136">Az ügyfélalkalmazás majd továbbíthatja a jogkivonat a szolgáltatás, magát.</span><span class="sxs-lookup"><span data-stu-id="c99bf-136">The client application can then pass this token to the service as proof of its identity.</span></span>

> <span data-ttu-id="c99bf-137">A megbízhatósági lánc további STSs lehet.</span><span class="sxs-lookup"><span data-stu-id="c99bf-137">There might be additional STSs in the chain of trust.</span></span> <span data-ttu-id="c99bf-138">Például a forgatókönyvben a későbbiekben olvashat, egy a helyszíni STS bizalmi kapcsolatok egy másik STS fér hozzá a felhasználó hitelesítésére identitásszolgáltató felelős.</span><span class="sxs-lookup"><span data-stu-id="c99bf-138">For example, in the scenario described later, an on-premises STS trusts another STS that is responsible for accessing an identity provider to authenticate the user.</span></span> <span data-ttu-id="c99bf-139">A megoldás közös vállalati környezetben, ahol van egy helyszíni STS és könyvtár.</span><span class="sxs-lookup"><span data-stu-id="c99bf-139">This approach is common in enterprise scenarios where there's an on-premises STS and directory.</span></span>

<span data-ttu-id="c99bf-140">Összevont hitelesítés identitások megbízó különböző tartományok között kiadására szabványalapú megoldást nyújt, és egyszeri bejelentkezést támogatja.</span><span class="sxs-lookup"><span data-stu-id="c99bf-140">Federated authentication provides a standards-based solution to the issue of trusting identities across diverse domains, and can support single sign-on.</span></span> <span data-ttu-id="c99bf-141">Azt egyre gyakrabban, alkalmazások, különösen felhőben üzemeltetett alkalmazások, az összes típusa, mert identitás-szolgáltatóktól közvetlen hálózaton keresztül nélkül egyszeri bejelentkezést támogatja.</span><span class="sxs-lookup"><span data-stu-id="c99bf-141">It's becoming more common across all types of applications, especially cloud-hosted applications, because it supports single sign-on without requiring a direct network connection to identity providers.</span></span> <span data-ttu-id="c99bf-142">A felhasználó hitelesítő adatainak megadását minden alkalmazás nem rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="c99bf-142">The user doesn't have to enter credentials for every application.</span></span> <span data-ttu-id="c99bf-143">Ez növeli a biztonságot, mivel megakadályozza, hogy a különböző alkalmazások eléréséhez szükséges hitelesítő adatok létrehozása, és a felhasználó hitelesítő adatait az eredeti identitásszolgáltató kivételével az összes is elrejti.</span><span class="sxs-lookup"><span data-stu-id="c99bf-143">This increases security because it prevents the creation of credentials required to access many different applications, and it also hides the user’s credentials from all but the original identity provider.</span></span> <span data-ttu-id="c99bf-144">Alkalmazások információk csak a hitelesített identitást lévő a jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="c99bf-144">Applications see just the authenticated identity information contained within the token.</span></span>

<span data-ttu-id="c99bf-145">Összevont identitás is rendelkezik a legnagyobb előnye, hogy az identitás- és hitelesítő adatok kezelése az identity provider felelősségét-e.</span><span class="sxs-lookup"><span data-stu-id="c99bf-145">Federated identity also has the major advantage that management of the identity and credentials is the responsibility of the identity provider.</span></span> <span data-ttu-id="c99bf-146">Az alkalmazás vagy szolgáltatás nem szükséges felügyeleti funkciókat-azonosítót fog kérni.</span><span class="sxs-lookup"><span data-stu-id="c99bf-146">The application or service doesn't need to provide identity management features.</span></span> <span data-ttu-id="c99bf-147">Emellett a vállalati környezetben, a vállalati címtárban nem kell tudni a felhasználó ha megbízhatónak fogja tekinteni az identitásszolgáltató.</span><span class="sxs-lookup"><span data-stu-id="c99bf-147">In addition, in corporate scenarios, the corporate directory doesn't need to know about the user if it trusts the identity provider.</span></span> <span data-ttu-id="c99bf-148">Ezzel eltávolítja az összes adminisztratív terhek a címtáron belül a felhasználói identitás kezelése.</span><span class="sxs-lookup"><span data-stu-id="c99bf-148">This removes all the administrative overhead of managing the user identity within the directory.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="c99bf-149">Problémákat és szempontok</span><span class="sxs-lookup"><span data-stu-id="c99bf-149">Issues and considerations</span></span>

<span data-ttu-id="c99bf-150">Alkalmazások, amelyek megvalósítják az összevont hitelesítés tervezésekor vegye figyelembe a következőket:</span><span class="sxs-lookup"><span data-stu-id="c99bf-150">Consider the following when designing applications that implement federated authentication:</span></span>

- <span data-ttu-id="c99bf-151">A hitelesítés történhet a hibaérzékeny pontok kialakulását.</span><span class="sxs-lookup"><span data-stu-id="c99bf-151">Authentication can be a single point of failure.</span></span> <span data-ttu-id="c99bf-152">Ha több adatközpontot az alkalmazást telepít központilag, fontolja meg, az alkalmazás megbízhatósági és rendelkezésre állás fenntartása azonos adatközpontokban történő telepítésének az identity management mechanizmus.</span><span class="sxs-lookup"><span data-stu-id="c99bf-152">If you deploy your application to multiple datacenters, consider deploying your identity management mechanism to the same datacenters to maintain application reliability and availability.</span></span>

- <span data-ttu-id="c99bf-153">Hitelesítési eszközök a szerepkör jogcím szerepel a hitelesítési jogkivonat-alapú hozzáférés-vezérlés konfigurálása lehetővé teszik.</span><span class="sxs-lookup"><span data-stu-id="c99bf-153">Authentication tools make it possible to configure access control based on role claims contained in the authentication token.</span></span> <span data-ttu-id="c99bf-154">Ezt gyakran nevezik szerepköralapú hozzáférés-vezérlést (RBAC), és engedélyezheti, hogy a szolgáltatások és az erőforrásokhoz való hozzáférés ellenőrzése részletesebb felügyeletét.</span><span class="sxs-lookup"><span data-stu-id="c99bf-154">This is often referred to as role-based access control (RBAC), and it can allow a more granular level of control over access to features and resources.</span></span>

- <span data-ttu-id="c99bf-155">Ellentétben a vállalati címtárban szolgáltatáson alapuló Jogcímalapú hitelesítés használata a közösségi identitás-szolgáltatóktól általában egy e-mail címet, és lehet, hogy a nem hitelesített felhasználó adatainak nem megadása.</span><span class="sxs-lookup"><span data-stu-id="c99bf-155">Unlike a corporate directory, claims-based authentication using social identity providers doesn't usually provide information about the authenticated user other than an email address, and perhaps a name.</span></span> <span data-ttu-id="c99bf-156">Néhány közösségi Identitásszolgáltatók, például egy Microsoft-fiókot, adja meg a csak egy egyedi azonosítót.</span><span class="sxs-lookup"><span data-stu-id="c99bf-156">Some social identity providers, such as a Microsoft account, provide only a unique identifier.</span></span> <span data-ttu-id="c99bf-157">Az alkalmazás általában kell néhány regisztrált felhasználók adatainak megőrzése, és ezeket az adatokat az azonosító szerepel a jogkivonatában lévő jogcímeket egyező lesz.</span><span class="sxs-lookup"><span data-stu-id="c99bf-157">The application usually needs to maintain some information on registered users, and be able to match this information to the identifier contained in the claims in the token.</span></span> <span data-ttu-id="c99bf-158">Általában ez segítségével történik regisztrációs a felhasználó általi első elérésének a alkalmazást, és információt van majd be a nézetmodellbe, a jogkivonat további jogcímekként minden hitelesítés után.</span><span class="sxs-lookup"><span data-stu-id="c99bf-158">Typically this is done through registration when the user first accesses the application, and information is then injected into the token as additional claims after each authentication.</span></span>

- <span data-ttu-id="c99bf-159">Ha nincs konfigurálva az STS egynél több identitásszolgáltató, mely identitásszolgáltató, a felhasználó a hitelesítéshez a rendszer átirányítja azt kell észleli.</span><span class="sxs-lookup"><span data-stu-id="c99bf-159">If there's more than one identity provider configured for the STS, it must detect which identity provider the user should be redirected to for authentication.</span></span> <span data-ttu-id="c99bf-160">A folyamat elnevezése a hitelesítőtartomány feltárását.</span><span class="sxs-lookup"><span data-stu-id="c99bf-160">This process is called home realm discovery.</span></span> <span data-ttu-id="c99bf-161">Lehet, hogy az STS ehhez automatikusan egy e-mail cím vagy a felhasználó neve, amely a felhasználót, olyan altartomány, az alkalmazást, amely a felhasználó fér hozzá, a felhasználó IP-hatókört, vagy tárolja a felhasználó böngészőben a cookie tartalma alapján.</span><span class="sxs-lookup"><span data-stu-id="c99bf-161">The STS might be able to do this automatically based on an email address or user name that the user provides, a subdomain of the application that the user is accessing, the user’s IP address scope, or on the contents of a cookie stored in the user’s browser.</span></span> <span data-ttu-id="c99bf-162">Például, ha a felhasználó által megadott e-mail cím a Microsoft a tartományban, például a user@live.com, az STS átirányítja a felhasználót a Microsoft-fiókja bejelentkezési oldalára.</span><span class="sxs-lookup"><span data-stu-id="c99bf-162">For example, if the user entered an email address in the Microsoft domain, such as user@live.com, the STS will redirect the user to the Microsoft account sign-in page.</span></span> <span data-ttu-id="c99bf-163">A későbbi látogatások alkalmával az STS egy cookie-t használhatja annak jelzésére, hogy volt-e az utolsó bejelentkezés Microsoft-fiókkal.</span><span class="sxs-lookup"><span data-stu-id="c99bf-163">On later visits, the STS could use a cookie to indicate that the last sign in was with a Microsoft account.</span></span> <span data-ttu-id="c99bf-164">Automatikus észlelés nem határozható meg a hitelesítőtartomány, ha az STS megjeleníti a hitelesítőtartomány feltárási lapjának, amely tartalmazza a megbízható identitás-szolgáltatóktól, és a felhasználó használni kívánja azt kell választania.</span><span class="sxs-lookup"><span data-stu-id="c99bf-164">If automatic discovery can't determine the home realm, the STS will display a home realm discovery page that lists the trusted identity providers, and the user must select the one they want to use.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="c99bf-165">Mikor érdemes használni ezt a mintát</span><span class="sxs-lookup"><span data-stu-id="c99bf-165">When to use this pattern</span></span>

<span data-ttu-id="c99bf-166">Ez a kialakítás például akkor hasznos, ha forgatókönyvek:</span><span class="sxs-lookup"><span data-stu-id="c99bf-166">This pattern is useful for scenarios such as:</span></span>

- <span data-ttu-id="c99bf-167">**Egyszeri bejelentkezés a vállalati**.</span><span class="sxs-lookup"><span data-stu-id="c99bf-167">**Single sign-on in the enterprise**.</span></span> <span data-ttu-id="c99bf-168">Ebben a forgatókönyvben kell hitelesíteni az alkalmazottakat, anélkül, hogy azokat bejelentkezni, minden alkalommal, amikor egy alkalmazás, amikor meglátogatják a vállalati biztonsági határán kívüli a felhőben üzemeltetett vállalati alkalmazások esetében.</span><span class="sxs-lookup"><span data-stu-id="c99bf-168">In this scenario you need to authenticate employees for corporate applications that are hosted in the cloud outside the corporate security boundary, without requiring them to sign in every time they visit an application.</span></span> <span data-ttu-id="c99bf-169">A felhasználói élmény ugyanaz, mint a helyszíni alkalmazások használata, ha azok még hitelesített a vállalati hálózathoz történő bejelentkezéskor, és ezt követően hozzáféréssel rendelkezzenek az összes releváns alkalmazásokhoz anélkül, hogy jelentkezzen be újra.</span><span class="sxs-lookup"><span data-stu-id="c99bf-169">The user experience is the same as when using on-premises applications where they're authenticated when signing in to a corporate network, and from then on have access to all relevant applications without needing to sign in again.</span></span>

- <span data-ttu-id="c99bf-170">**Összevont identitás több partnerekkel**.</span><span class="sxs-lookup"><span data-stu-id="c99bf-170">**Federated identity with multiple partners**.</span></span> <span data-ttu-id="c99bf-171">Ebben a forgatókönyvben kell hitelesíti az alkalmazottak és az üzleti partnerek, akik nem rendelkeznek fiókkal a vállalati címtárban.</span><span class="sxs-lookup"><span data-stu-id="c99bf-171">In this scenario you need to authenticate both corporate employees and business partners who don't have accounts in the corporate directory.</span></span> <span data-ttu-id="c99bf-172">Ez a közös az olyan vállalatok alkalmazások, alkalmazások, amely harmadik féltől származó szolgáltatással integrálható, valamint arról, hogy a vállalatok különböző informatikai rendszerek ahol kell egyesíteni vagy megosztott erőforrások.</span><span class="sxs-lookup"><span data-stu-id="c99bf-172">This is common in business-to-business applications, applications that integrate with third-party services, and where companies with different IT systems have merged or shared resources.</span></span>

- <span data-ttu-id="c99bf-173">**Összevont identitás SaaS-alkalmazásokhoz az**.</span><span class="sxs-lookup"><span data-stu-id="c99bf-173">**Federated identity in SaaS applications**.</span></span> <span data-ttu-id="c99bf-174">Ebben a forgatókönyvben független szoftvergyártók kiszolgálása egy használatra kész több bérlők vagy ügyfelek számára.</span><span class="sxs-lookup"><span data-stu-id="c99bf-174">In this scenario independent software vendors provide a ready-to-use service for multiple clients or tenants.</span></span> <span data-ttu-id="c99bf-175">Mindegyik bérlő megfelelő identitásszolgáltató használatával hitelesít.</span><span class="sxs-lookup"><span data-stu-id="c99bf-175">Each tenant authenticates using a suitable identity provider.</span></span> <span data-ttu-id="c99bf-176">Például üzleti felhasználók fogja használni a vállalati hitelesítő adatok, amíg a fogyasztók és az ügyfelek a bérlő a közösségi identitás hitelesítő adatait fogja használni.</span><span class="sxs-lookup"><span data-stu-id="c99bf-176">For example, business users will use their corporate credentials, while consumers and clients of the tenant will use their social identity credentials.</span></span>

<span data-ttu-id="c99bf-177">Ez a minta nem lehet a következő esetekben lehet hasznos:</span><span class="sxs-lookup"><span data-stu-id="c99bf-177">This pattern might not be useful in the following situations:</span></span>

- <span data-ttu-id="c99bf-178">Az alkalmazás minden felhasználó hitelesítése egy identitásszolgáltatótól, és nincs szükség semmilyen más identitásszolgáltató hitelesítést.</span><span class="sxs-lookup"><span data-stu-id="c99bf-178">All users of the application can be authenticated by one identity provider, and there's no requirement to authenticate using any other identity provider.</span></span> <span data-ttu-id="c99bf-179">Ez az üzleti alkalmazásokat, amelyek használják a vállalati címtárban (elérhető az alkalmazásban) a hitelesítéshez, egy VPN-kapcsolattal, vagy (a felhőben üzemeltetett forgatókönyvek) a helyszíni címtár közötti virtuális hálózati kapcsolaton keresztül a tipikus és a az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="c99bf-179">This is typical in business applications that use a corporate directory (accessible within the application) for authentication, by using a VPN, or (in a cloud-hosted scenario) through a virtual network connection between the on-premises directory and the application.</span></span>

- <span data-ttu-id="c99bf-180">Az alkalmazás eredetileg egy másik hitelesítési módszert, lehet, hogy használatával egyéni felhasználói az áruházakkal, beépített, vagy nem rendelkezik a jogcímalapú technológiák által használt egyeztetés szabványok kezelésére képes.</span><span class="sxs-lookup"><span data-stu-id="c99bf-180">The application was originally built using a different authentication mechanism, perhaps with custom user stores, or doesn't have the capability to handle the negotiation standards used by claims-based technologies.</span></span> <span data-ttu-id="c99bf-181">Jogcímalapú hitelesítés és hozzáférés-vezérlés alkalmazásával meglévő alkalmazásokba összetett, és valószínűleg nem költséghatékony lehet.</span><span class="sxs-lookup"><span data-stu-id="c99bf-181">Retrofitting claims-based authentication and access control into existing applications can be complex, and probably not cost effective.</span></span>

## <a name="example"></a><span data-ttu-id="c99bf-182">Példa</span><span class="sxs-lookup"><span data-stu-id="c99bf-182">Example</span></span>

<span data-ttu-id="c99bf-183">A szervezetek egy több-bérlős szoftver a Microsoft Azure-ban szolgáltatott szoftverként (SaaS) alkalmazás üzemelteti.</span><span class="sxs-lookup"><span data-stu-id="c99bf-183">An organization hosts a multi-tenant software as a service (SaaS) application in Microsoft Azure.</span></span> <span data-ttu-id="c99bf-184">Az alkalmazás tartalmazza a webhelyet, ahol a bérlők a saját felhasználók kezelésére használható.</span><span class="sxs-lookup"><span data-stu-id="c99bf-184">The application includes a website that tenants can use to manage the application for their own users.</span></span> <span data-ttu-id="c99bf-185">Az alkalmazás lehetővé teszi, hogy a bérlők számára a webhely elérését egy összevont identitás, amely szerint az Active Directory összevonási szolgáltatások (ADFS) jön létre, amikor a felhasználók hitelesítése azzal az adott szervezete saját Active Directory használatával.</span><span class="sxs-lookup"><span data-stu-id="c99bf-185">The application allows tenants to access the website by using a federated identity that is generated by Active Directory Federation Services (ADFS) when a user is authenticated by that organization’s own Active Directory.</span></span>

![Hogyan egy nagyvállalati előfizetőn felhasználók az alkalmazás elérése](./_images/federated-identity-multitenat.png)


<span data-ttu-id="c99bf-187">Az ábrán látható, hogyan bérlők hitelesítik magukat a saját identitásszolgáltató (1. lépés), ebben az esetben az AD FS.</span><span class="sxs-lookup"><span data-stu-id="c99bf-187">The figure shows how tenants authenticate with their own identity provider (step 1), in this case ADFS.</span></span> <span data-ttu-id="c99bf-188">A bérlő a sikeres hitelesítés után az AD FS jogkivonatot ad ki.</span><span class="sxs-lookup"><span data-stu-id="c99bf-188">After successfully authenticating a tenant, ADFS issues a token.</span></span> <span data-ttu-id="c99bf-189">Az ügyfél böngészője a SaaS-alkalmazás összevonás-szolgáltatóként, amely megbízik a biztonsági jogkivonat, amely érvényes a Szolgáltatottszoftver-összevonás-szolgáltatóként (2. lépés) eléréséhez a bérlő ADFS által kiállított jogkivonatokat a token továbbítja.</span><span class="sxs-lookup"><span data-stu-id="c99bf-189">The client browser forwards this token to the SaaS application’s federation provider, which trusts tokens issued by the tenant’s ADFS, in order to get back a token that is valid for the SaaS federation provider (step 2).</span></span> <span data-ttu-id="c99bf-190">Ha szükséges, a Szolgáltatottszoftver-összevonási szolgáltató végez átalakítás a jogkivonatában lévő jogcímeket a jogcímeket, hogy az alkalmazás felismeri (3. lépés) az ügyfélböngészőnek az új jogkivonat visszatérése előtt.</span><span class="sxs-lookup"><span data-stu-id="c99bf-190">If necessary, the SaaS federation provider performs a transformation on the claims in the token into claims that the application recognizes (step 3) before returning the new token to the client browser.</span></span> <span data-ttu-id="c99bf-191">Az alkalmazás a Szolgáltatottszoftver-összevonási szolgáltató által kiállított jogkivonatokat megbízik, és használja a rendszer a jogcímeket a token (4. lépés)-engedélyezési szabályok vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="c99bf-191">The application trusts tokens issued by the SaaS federation provider and uses the claims in the token to apply authorization rules (step 4).</span></span>

<span data-ttu-id="c99bf-192">Bérlők számára nem szükséges az alkalmazás eléréséhez hitelesítő adatok megjegyzése, és a vállalat a bérlői rendszergazda konfigurálhat a saját ADFS az alkalmazáshoz hozzáférő felhasználók listáját.</span><span class="sxs-lookup"><span data-stu-id="c99bf-192">Tenants won't need to remember separate credentials to access the application, and an administrator at the tenant’s company can configure in its own ADFS the list of users that can access the application.</span></span>

## <a name="related-guidance"></a><span data-ttu-id="c99bf-193">Kapcsolódó útmutató</span><span class="sxs-lookup"><span data-stu-id="c99bf-193">Related guidance</span></span>

- [<span data-ttu-id="c99bf-194">A Microsoft Azure Active Directoryban</span><span class="sxs-lookup"><span data-stu-id="c99bf-194">Microsoft Azure Active Directory</span></span>](https://azure.microsoft.com/services/active-directory/)
- [<span data-ttu-id="c99bf-195">Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="c99bf-195">Active Directory Domain Services</span></span>](https://msdn.microsoft.com/library/bb897402.aspx)
- [<span data-ttu-id="c99bf-196">Az Active Directory összevonási szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="c99bf-196">Active Directory Federation Services</span></span>](https://msdn.microsoft.com/library/bb897402.aspx)
- [<span data-ttu-id="c99bf-197">Több-bérlős alkalmazások identitáskezelése a Microsoft Azure-ban</span><span class="sxs-lookup"><span data-stu-id="c99bf-197">Identity management for multitenant applications in Microsoft Azure</span></span>](https://azure.microsoft.com/documentation/articles/guidance-multitenant-identity/)
- [<span data-ttu-id="c99bf-198">Több-bérlős alkalmazásokhoz az Azure-ban</span><span class="sxs-lookup"><span data-stu-id="c99bf-198">Multitenant Applications in Azure</span></span>](https://azure.microsoft.com/documentation/articles/dotnet-develop-multitenant-applications/)
