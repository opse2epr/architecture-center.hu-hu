---
title: Oldalkocsi minta
titleSuffix: Cloud Design Patterns
description: Egy alkalmazás összetevőit külön folyamatban vagy tárolóban helyezheti üzembe, így elkülönítést és beágyazást biztosíthat.
keywords: tervezési minta
author: dragon119
ms.date: 06/23/2017
ms.topic: design-pattern
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: 20a63cdd935f28cc47686238d34d654da2798985
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59639597"
---
# <a name="sidecar-pattern"></a><span data-ttu-id="bd2b2-104">Oldalkocsi minta</span><span class="sxs-lookup"><span data-stu-id="bd2b2-104">Sidecar pattern</span></span>

<span data-ttu-id="bd2b2-105">Egy alkalmazás összetevőit külön folyamatban vagy tárolóban helyezheti üzembe, így elkülönítést és beágyazást biztosíthat.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-105">Deploy components of an application into a separate process or container to provide isolation and encapsulation.</span></span> <span data-ttu-id="bd2b2-106">Ez a minta azt is lehetővé teheti, hogy az alkalmazások heterogén összetevőkből és technológiákból álljanak.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-106">This pattern can also enable applications to be composed of heterogeneous components and technologies.</span></span>

<span data-ttu-id="bd2b2-107">Ezt a mintát *Oldalkocsi* mintának nevezik, mert egy motorhoz csatolt oldalkocsihoz hasonlít.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-107">This pattern is named *Sidecar* because it resembles a sidecar attached to a motorcycle.</span></span> <span data-ttu-id="bd2b2-108">A mintában az oldalkocsi egy szülőalkalmazáshoz van csatolva, és támogató szolgáltatásokat biztosít az alkalmazásnak.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-108">In the pattern, the sidecar is attached to a parent application and provides supporting features for the application.</span></span> <span data-ttu-id="bd2b2-109">Az oldalkocsi ugyanakkora élettartammal rendelkezik, mint a szülőalkalmazás, együtt jönnek létre, és együtt vonhatók ki.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-109">The sidecar also shares the same lifecycle as the parent application, being created and retired alongside the parent.</span></span> <span data-ttu-id="bd2b2-110">Az oldalkocsi minta egy felbontási minta, amelyet segítőtárs mintának is neveznek.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-110">The sidecar pattern is sometimes referred to as the sidekick pattern and is a decomposition pattern.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="bd2b2-111">Kontextus és probléma</span><span class="sxs-lookup"><span data-stu-id="bd2b2-111">Context and Problem</span></span>

<span data-ttu-id="bd2b2-112">Az alkalmazások és szolgáltatások gyakran megkövetelnek kapcsolódó funkciókat, például monitorozást, naplózást, konfigurálást és hálózati szolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-112">Applications and services often require related functionality, such as monitoring, logging, configuration, and networking services.</span></span> <span data-ttu-id="bd2b2-113">Ezek a perifériafeladatok különálló összetevőkként vagy szolgáltatásokként is megvalósíthatók.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-113">These peripheral tasks can be implemented as separate components or services.</span></span>

<span data-ttu-id="bd2b2-114">Ha szorosan integráltak az alkalmazásba, futtathatók ugyanabban a folyamatban, mint az alkalmazás, így biztosítható a megosztott erőforrások hatékony használata.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-114">If they are tightly integrated into the application, they can run in the same process as the application, making efficient use of shared resources.</span></span> <span data-ttu-id="bd2b2-115">Ez azonban azt is jelenti, hogy nem jól elkülönítettek, ezért egy kimaradás az összetevők egyikében hatással lehet a többi összetevőre vagy az egész alkalmazásra is.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-115">However, this also means they are not well isolated, and an outage in one of these components can affect other components or the entire application.</span></span> <span data-ttu-id="bd2b2-116">Továbbá ugyanannak a nyelvnek a használatával kell megvalósítani őket, mint amelyet a szülőalkalmazás használ.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-116">Also, they usually need to be implemented using the same language as the parent application.</span></span> <span data-ttu-id="bd2b2-117">Ennek eredményeképpen az összetevő és az alkalmazás erősen függ egymástól.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-117">As a result, the component and the application have close interdependence on each other.</span></span>

<span data-ttu-id="bd2b2-118">Ha az alkalmazás szolgáltatásokra van bontva, akkor minden egyes szolgáltatás felépíthető több különböző nyelv és technológia használatával.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-118">If the application is decomposed into services, then each service can be built using different languages and technologies.</span></span> <span data-ttu-id="bd2b2-119">Míg ez nagyobb rugalmasságot biztosít, azt is jelenti, hogy minden összetevőnek vannak saját függőségei, és nyelvspecifikus kódtárakra van szükségük az alapul szolgáló platform és a szülőalkalmazással megosztott erőforrások eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-119">While this gives more flexibility, it means that each component has its own dependencies and requires language-specific libraries to access the underlying platform and any resources shared with the parent application.</span></span> <span data-ttu-id="bd2b2-120">Továbbá ezeknek a tulajdonságoknak a különálló szolgáltatásként való telepítése késleltetést okozhat az alkalmazásban.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-120">In addition, deploying these features as separate services can add latency to the application.</span></span> <span data-ttu-id="bd2b2-121">A nyelvspecifikus felületek kódjainak és függőségeinek a kezelése nagyobb összetettséget eredményezhet, különösen az üzemeltetésnél, az üzembe helyezésnél és a kezelésnél.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-121">Managing the code and dependencies for these language-specific interfaces can also add considerable complexity, especially for hosting, deployment, and management.</span></span>

## <a name="solution"></a><span data-ttu-id="bd2b2-122">Megoldás</span><span class="sxs-lookup"><span data-stu-id="bd2b2-122">Solution</span></span>

<span data-ttu-id="bd2b2-123">Helyezzen egy kohézióval jellemezhető feladatcsoportot arra a helyre, ahol a főalkalmazás is található, de a feladatcsoportot külön folyamatba vagy tárolóba helyezze, hogy minden nyelven egységes felületet hozzon létre a platformszolgáltatásoknak.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-123">Co-locate a cohesive set of tasks with the primary application, but place them inside their own process or container, providing a homogeneous interface for platform services across languages.</span></span>

![Az oldalkocsi minta ábrája](./_images/sidecar.png)

<span data-ttu-id="bd2b2-125">Egy oldalkocsi szolgáltatás nem feltétlenül az alkalmazás része, de kapcsolódik hozzá.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-125">A sidecar service is not necessarily part of the application, but is connected to it.</span></span> <span data-ttu-id="bd2b2-126">Mindenhová követi a szülőalkalmazást.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-126">It goes wherever the parent application goes.</span></span> <span data-ttu-id="bd2b2-127">Az oldalkocsik olyan folyamatokat és szolgáltatásokat támogatnak, amelyek az elsődleges alkalmazással lettek üzembe helyezve.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-127">Sidecars are supporting processes or services that are deployed with the primary application.</span></span> <span data-ttu-id="bd2b2-128">A motorkerékpárok esetében az oldalkocsi egy motorkerékpárhoz csatlakozik, és minden motorkerékpárnak lehet saját oldalkocsija.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-128">On a motorcycle, the sidecar is attached to one motorcycle, and each motorcycle can have its own sidecar.</span></span> <span data-ttu-id="bd2b2-129">Ehhez hasonlóan egy oldalkocsi szolgáltatás is követi a szülőalkalmazását.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-129">In the same way, a sidecar service shares the fate of its parent application.</span></span> <span data-ttu-id="bd2b2-130">Az alkalmazás minden egyes példányához kapcsolódik egy telepített oldalkocsi példány, amely vele együtt fut.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-130">For each instance of the application, an instance of the sidecar is deployed and hosted alongside it.</span></span>

<span data-ttu-id="bd2b2-131">Az oldalkocsi minta használatának előnyei:</span><span class="sxs-lookup"><span data-stu-id="bd2b2-131">Advantages of using a sidecar pattern include:</span></span>

- <span data-ttu-id="bd2b2-132">Az oldalkocsi független az elsődleges alkalmazásától, ami a futtatókörnyezetet és a programozási nyelvet illeti, így nem kell nyelvenként külön oldalkocsit fejleszteni.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-132">A sidecar is independent from its primary application in terms of runtime environment and programming language, so you don't need to develop one sidecar per language.</span></span>

- <span data-ttu-id="bd2b2-133">Az oldalkocsi hozzáférhet ugyanazokhoz az erőforrásokhoz, amelyekhez az elsődleges alkalmazás is hozzáfér.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-133">The sidecar can access the same resources as the primary application.</span></span> <span data-ttu-id="bd2b2-134">Az oldalkocsi például monitorozhatja mind az oldalkocsi, mind az elsődleges alkalmazás által használt rendszer-erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-134">For example, a sidecar can monitor system resources used by both the sidecar and the primary application.</span></span>

- <span data-ttu-id="bd2b2-135">Mivel közel helyezkedik el az elsődleges alkalmazáshoz, nincs jelentős késleltetés a közöttük zajló kommunikáció során.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-135">Because of its proximity to the primary application, there’s no significant latency when communicating between them.</span></span>

- <span data-ttu-id="bd2b2-136">Még a bővítési mechanizmust nem biztosító alkalmazásoknál használhatja az oldalkocsi bővíthetők az ugyanazon a gazdagépen vagy altárolóban az elsődleges alkalmazás a saját folyamatként csatolásával.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-136">Even for applications that don’t provide an extensibility mechanism, you can use a sidecar to extend functionality by attaching it as its own process in the same host or sub-container as the primary application.</span></span>

<span data-ttu-id="bd2b2-137">Az oldalkocsi mintát gyakran használják tárolókhoz is, amely esetben oldalkocsi tároló vagy segítőtárs tároló jön létre.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-137">The sidecar pattern is often used with containers and referred to as a sidecar container or sidekick container.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="bd2b2-138">Problémák és megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="bd2b2-138">Issues and Considerations</span></span>

- <span data-ttu-id="bd2b2-139">Gondolja át, milyen üzembe helyezési és csomagolási formátumot használ a szolgáltatások, folyamatok és tárolók telepítéséhez.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-139">Consider the deployment and packaging format you will use to deploy services, processes, or containers.</span></span> <span data-ttu-id="bd2b2-140">A tárolók kiválóan alkalmasak az oldalkocsi minta használatához.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-140">Containers are particularly well suited to the sidecar pattern.</span></span>
- <span data-ttu-id="bd2b2-141">Egy oldalkocsi szolgáltatás tervezésekor alaposan gondolja át, milyen folyamatok közötti kommunikációs mechanizmus mellett dönt.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-141">When designing a sidecar service, carefully decide on the interprocess communication mechanism.</span></span> <span data-ttu-id="bd2b2-142">Próbáljon nyelvtől vagy keretrendszertől független technológiákat használni, kivéve, ha a teljesítményre vonatkozó követelmények ezt problémássá teszik.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-142">Try to use language- or framework-agnostic technologies unless performance requirements make that impractical.</span></span>
- <span data-ttu-id="bd2b2-143">Mielőtt funkciókat rendel az oldalkocsihoz, gondolja át, hogy önálló szolgáltatásként vagy démonként nem működne-e jobban.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-143">Before putting functionality into a sidecar, consider whether it would work better as a separate service or a more traditional daemon.</span></span>
- <span data-ttu-id="bd2b2-144">Vegye figyelembe azt is, hogy a funkció kódtárként vagy egy hagyományos bővítménymechanizmussal is megvalósítható.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-144">Also consider whether the functionality could be implemented as a library or using a traditional extension mechanism.</span></span> <span data-ttu-id="bd2b2-145">Előfordulhat, hogy a nyelvspecifikus kódtárak mélyebb szintű integrációval és kisebb hálózati terheléssel rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-145">Language-specific libraries may have a deeper level of integration and less network overhead.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="bd2b2-146">Mikor érdemes ezt a mintát használni?</span><span class="sxs-lookup"><span data-stu-id="bd2b2-146">When to Use this Pattern</span></span>

<span data-ttu-id="bd2b2-147">Használja ezt a mintát, ha:</span><span class="sxs-lookup"><span data-stu-id="bd2b2-147">Use this pattern when:</span></span>

- <span data-ttu-id="bd2b2-148">Az elsődleges alkalmazása egy heterogén nyelv és keretrendszer használ.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-148">Your primary application uses a heterogeneous set of languages and frameworks.</span></span> <span data-ttu-id="bd2b2-149">Egy oldalkocsi szolgáltatásban található összetevőt különféle nyelveken írott és különféle keretrendszereket használó alkalmazások is felhasználhatnak.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-149">A component located in a sidecar service can be consumed by applications written in different languages using different frameworks.</span></span>
- <span data-ttu-id="bd2b2-150">Egy összetevő egy távoli csapat vagy egy másik vállalat tulajdonában van.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-150">A component is owned by a remote team or a different organization.</span></span>
- <span data-ttu-id="bd2b2-151">Egy összetevőt vagy szolgáltatást ugyanazon a gazdagépen kell elhelyezni, mint az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-151">A component or feature must be co-located on the same host as the application</span></span>
- <span data-ttu-id="bd2b2-152">Egy olyan szolgáltatásra van szüksége, amely ugyanakkora életciklussal rendelkezik, mint a főalkalmazása, de egymástól függetlenül frissíthetők.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-152">You need a service that shares the overall lifecycle of your main application, but can be independently updated.</span></span>
- <span data-ttu-id="bd2b2-153">Egy erőforrás vagy összetevő erőforrás-korlátozásait részletesen kívánja szabályozni.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-153">You need fine-grained control over resource limits for a particular resource or component.</span></span> <span data-ttu-id="bd2b2-154">Előfordulhat például, hogy korlátozni szeretné a megadott összetevő által használt memória mennyiségét.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-154">For example, you may want to restrict the amount of memory a specific component uses.</span></span> <span data-ttu-id="bd2b2-155">Az összetevőt telepítheti oldalkocsiként, és a főalkalmazástól függetlenül kezelheti a memóriahasználatot.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-155">You can deploy the component as a sidecar and manage memory usage independently of the main application.</span></span>

<span data-ttu-id="bd2b2-156">Nem érdemes ezt a mintát használni, ha:</span><span class="sxs-lookup"><span data-stu-id="bd2b2-156">This pattern may not be suitable:</span></span>

- <span data-ttu-id="bd2b2-157">Ha optimalizálni kívánja a folyamatok közötti kommunikációt.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-157">When interprocess communication needs to be optimized.</span></span> <span data-ttu-id="bd2b2-158">A szülőalkalmazás és az oldalkocsi közötti kommunikáció némi többletterhelést okoz, amely leginkább a hívásokat érintő késésekben nyilvánul meg.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-158">Communication between a parent application and sidecar services includes some overhead, notably latency in the calls.</span></span> <span data-ttu-id="bd2b2-159">Ez nem minden esetben fogadható el kompromisszumként a forgalmas felületek esetében.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-159">This may not be an acceptable trade-off for chatty interfaces.</span></span>
- <span data-ttu-id="bd2b2-160">Kisebb alkalmazásoknál, ahol annak az erőforrásköltsége, hogy minden példányhoz egy oldalkocsi szolgáltatás legyen üzembe helyezve, túlságosan magas az elkülönítés előnyeihez viszonyítva.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-160">For small applications where the resource cost of deploying a sidecar service for each instance is not worth the advantage of isolation.</span></span>
- <span data-ttu-id="bd2b2-161">Ha a szolgáltatást a főalkalmazásoktól eltérően, vagy azoktól függetlenül kell skálázni.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-161">When the service needs to scale differently than or independently from the main applications.</span></span> <span data-ttu-id="bd2b2-162">Ebben az esetben jobb megoldás lehet különálló szolgáltatásként üzembe helyezni.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-162">If so, it may be better to deploy the feature as a separate service.</span></span>

## <a name="example"></a><span data-ttu-id="bd2b2-163">Példa</span><span class="sxs-lookup"><span data-stu-id="bd2b2-163">Example</span></span>

<span data-ttu-id="bd2b2-164">Az oldalkocsi minta számos forgatókönyv esetén alkalmazható.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-164">The sidecar pattern is applicable to many scenarios.</span></span> <span data-ttu-id="bd2b2-165">Gyakori példák:</span><span class="sxs-lookup"><span data-stu-id="bd2b2-165">Some common examples:</span></span>

- <span data-ttu-id="bd2b2-166">Infrastruktúra-API.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-166">Infrastructure API.</span></span> <span data-ttu-id="bd2b2-167">Az infrastruktúra-fejlesztő csapat egy olyan szolgáltatást hoz létre, amelyet a rendszer minden alkalmazás mellé telepít, nem pedig egy nyelvspecifikus ügyfélkódtárat, amellyel elérhető az infrastruktúra.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-167">The infrastructure development team creates a service that's deployed alongside each application, instead of a language-specific client library to access the infrastructure.</span></span> <span data-ttu-id="bd2b2-168">A szolgáltatás egy oldalkocsiként van betöltve, és egy közös réteget biztosít az infrastruktúra-szolgáltatásoknak, beleértve a naplózást, a környezeti adatokat, a konfigurációs adattárakat, a felderítést, az állapot-ellenőrzéseket és a figyelő szolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-168">The service is loaded as a sidecar and provides a common layer for infrastructure services, including logging, environment data, configuration store, discovery, health checks, and watchdog services.</span></span> <span data-ttu-id="bd2b2-169">Az oldalkocsi a szülőalkalmazás gazdagép-környezetét és folyamatát (vagy tárolóját) is monitorozza, és naplózza az adatokat egy központosított szolgáltatásba.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-169">The sidecar also monitors the parent application's host environment and process (or container) and logs the information to a centralized service.</span></span>
- <span data-ttu-id="bd2b2-170">NGINX/HAproxy felügyelete.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-170">Manage NGINX/HAProxy.</span></span> <span data-ttu-id="bd2b2-171">Telepítse az NGINX-et egy olyan oldalkocsi szolgáltatással, amely a környezet állapotát monitorozza, majd frissíti az NGINX konfigurációs fájlját és újraindítja a folyamatot, ha állapotmódosításra van szükség.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-171">Deploy NGINX with a sidecar service that monitors environment state, then updates the NGINX configuration file and recycles the process when a change in state is needed.</span></span>
- <span data-ttu-id="bd2b2-172">Nagykövet oldalkocsi.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-172">Ambassador sidecar.</span></span> <span data-ttu-id="bd2b2-173">Üzembe helyezése egy [Nagykövet](./ambassador.md) szolgáltatást oldalkocsiként.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-173">Deploy an [ambassador](./ambassador.md) service as a sidecar.</span></span> <span data-ttu-id="bd2b2-174">Az alkalmazás meghívja a nagykövetet, amely a bejelentkezéseket, az útválasztást, az áramköri megszakítást és az egyéb, csatlakozáshoz kapcsolódó szolgáltatásokat kezeli.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-174">The application calls through the ambassador, which handles request logging, routing, circuit breaking, and other connectivity related features.</span></span>
- <span data-ttu-id="bd2b2-175">Proxykiszervezés.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-175">Offload proxy.</span></span> <span data-ttu-id="bd2b2-176">Helyezzen egy NGINX-proxyt egy node.js szolgáltatáspéldány elé a szolgáltatás statikusfájl-tartalmai kiszolgálásának kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="bd2b2-176">Place an NGINX proxy in front of a node.js service instance, to handle serving static file content for the service.</span></span>

## <a name="related-guidance"></a><span data-ttu-id="bd2b2-177">Kapcsolódó útmutatók</span><span class="sxs-lookup"><span data-stu-id="bd2b2-177">Related guidance</span></span>

- [<span data-ttu-id="bd2b2-178">Nagykövet minta</span><span class="sxs-lookup"><span data-stu-id="bd2b2-178">Ambassador pattern</span></span>](./ambassador.md)
