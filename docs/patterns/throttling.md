---
title: Szabályozási minta
titleSuffix: Cloud Design Patterns
description: Szabályozhatja egy alkalmazáspéldány, egyéni bérlő vagy teljes szolgáltatás által használt erőforrások felhasználását.
keywords: tervezési minta
author: dragon119
ms.date: 06/23/2017
ms.topic: design-pattern
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: 0bbe8177abe708cf41c1b5a8d117c05fd280c948
ms.sourcegitcommit: 3b15d65e7c35a19506e562c444343f8467b6a073
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 01/25/2019
ms.locfileid: "54908596"
---
# <a name="throttling-pattern"></a><span data-ttu-id="a09d5-104">Szabályozási minta</span><span class="sxs-lookup"><span data-stu-id="a09d5-104">Throttling pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="a09d5-105">Szabályozhatja egy alkalmazáspéldány, egyéni bérlő vagy teljes szolgáltatás által használt erőforrások felhasználását.</span><span class="sxs-lookup"><span data-stu-id="a09d5-105">Control the consumption of resources used by an instance of an application, an individual tenant, or an entire service.</span></span> <span data-ttu-id="a09d5-106">Ez a minta lehetővé teszi, hogy a rendszer tovább működjön és teljesítse a szolgáltatói szerződések feltételeit akkor is, ha az erőforrásigény növekedése rendkívüli terhelést jelent az erőforrások számára.</span><span class="sxs-lookup"><span data-stu-id="a09d5-106">This can allow the system to continue to function and meet service level agreements, even when an increase in demand places an extreme load on resources.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="a09d5-107">Kontextus és probléma</span><span class="sxs-lookup"><span data-stu-id="a09d5-107">Context and problem</span></span>

<span data-ttu-id="a09d5-108">A felhőalapú alkalmazások terhelése jellemzően az aktív felhasználók számától vagy az általuk végrehajtott tevékenységek típusától függően idővel változik.</span><span class="sxs-lookup"><span data-stu-id="a09d5-108">The load on a cloud application typically varies over time based on the number of active users or the types of activities they are performing.</span></span> <span data-ttu-id="a09d5-109">Például valószínűleg több felhasználó lesz aktív munkaidőben, vagy lehet, hogy a rendszernek nagy számítási igényű elemzéseket kell végeznie minden hónap végén.</span><span class="sxs-lookup"><span data-stu-id="a09d5-109">For example, more users are likely to be active during business hours, or the system might be required to perform computationally expensive analytics at the end of each month.</span></span> <span data-ttu-id="a09d5-110">Hirtelen és váratlan tevékenységcsúcsok is előfordulhatnak.</span><span class="sxs-lookup"><span data-stu-id="a09d5-110">There might also be sudden and unanticipated bursts in activity.</span></span> <span data-ttu-id="a09d5-111">Ha a rendszer feldolgozási követelményei meghaladják a rendelkezésre álló erőforrások kapacitását, az a rendszer gyenge teljesítményét vagy meghibásodását okozhatja.</span><span class="sxs-lookup"><span data-stu-id="a09d5-111">If the processing requirements of the system exceed the capacity of the resources that are available, it'll suffer from poor performance and can even fail.</span></span> <span data-ttu-id="a09d5-112">Ha a rendszernek egy megállapodott szolgáltatási szintet kell teljesítenie, az ilyen meghibásodás nem fogadható el.</span><span class="sxs-lookup"><span data-stu-id="a09d5-112">If the system has to meet an agreed level of service, such failure could be unacceptable.</span></span>

<span data-ttu-id="a09d5-113">Számos különféle stratégia létezik a változó terhelés kezelésére a felhőben az alkalmazás üzleti céljaitól függően.</span><span class="sxs-lookup"><span data-stu-id="a09d5-113">There're many strategies available for handling varying load in the cloud, depending on the business goals for the application.</span></span> <span data-ttu-id="a09d5-114">Az egyik stratégia a kiépített erőforrások a felhasználók igényeihez igazítása automatikus skálázás alkalmazásával.</span><span class="sxs-lookup"><span data-stu-id="a09d5-114">One strategy is to use autoscaling to match the provisioned resources to the user needs at any given time.</span></span> <span data-ttu-id="a09d5-115">Ez lehetővé teszi a felhasználói igényeknek való folyamatos megfelelést és a futtatási költségek optimalizálását.</span><span class="sxs-lookup"><span data-stu-id="a09d5-115">This has the potential to consistently meet user demand, while optimizing running costs.</span></span> <span data-ttu-id="a09d5-116">Azonban bár az automatikus skálázás elindíthatja további erőforrások kiépítését, a kiépítés nem azonnal történik meg.</span><span class="sxs-lookup"><span data-stu-id="a09d5-116">However, while autoscaling can trigger the provisioning of additional resources, this provisioning isn't immediate.</span></span> <span data-ttu-id="a09d5-117">Ha az igények gyorsan növekednek, előfordulhat, hogy bizonyos ideig erőforráshiány lép fel.</span><span class="sxs-lookup"><span data-stu-id="a09d5-117">If demand grows quickly, there can be a window of time where there's a resource deficit.</span></span>

## <a name="solution"></a><span data-ttu-id="a09d5-118">Megoldás</span><span class="sxs-lookup"><span data-stu-id="a09d5-118">Solution</span></span>

<span data-ttu-id="a09d5-119">Az automatikus skálázás alternatívája, ha az alkalmazások egy adott határig használhatják az erőforrásokat, és ha elérték ezt a határt, a rendszer szabályozza őket.</span><span class="sxs-lookup"><span data-stu-id="a09d5-119">An alternative strategy to autoscaling is to allow applications to use resources only up to a limit, and then throttle them when this limit is reached.</span></span> <span data-ttu-id="a09d5-120">A rendszernek monitoroznia kell az erőforrások felhasználását, így amikor az erőforrás-használat túllépi a küszöbértéket, szabályozhatja az egy vagy több felhasználótól érkező kérelmeket.</span><span class="sxs-lookup"><span data-stu-id="a09d5-120">The system should monitor how it's using resources so that, when usage exceeds the threshold, it can throttle requests from one or more users.</span></span> <span data-ttu-id="a09d5-121">Így a rendszer továbbra is működőképes lesz, és teljesíteni tudja az érvényben levő szolgáltatói szerződések (SLA-k) feltételeit.</span><span class="sxs-lookup"><span data-stu-id="a09d5-121">This will enable the system to continue functioning and meet any service level agreements (SLAs) that are in place.</span></span> <span data-ttu-id="a09d5-122">Az erőforrás-használat monitorozásával kapcsolatos további információkért tekintse meg a [rendszerállapottal és a telemetriával kapcsolatos útmutatást](https://msdn.microsoft.com/library/dn589775.aspx).</span><span class="sxs-lookup"><span data-stu-id="a09d5-122">For more information on monitoring resource usage, see the [Instrumentation and Telemetry Guidance](https://msdn.microsoft.com/library/dn589775.aspx).</span></span>

<span data-ttu-id="a09d5-123">A rendszer számos szabályozási stratégiát implementálhat, többek között a következőket:</span><span class="sxs-lookup"><span data-stu-id="a09d5-123">The system could implement several throttling strategies, including:</span></span>

- <span data-ttu-id="a09d5-124">Olyan egyéni felhasználóktól érkező kérelmek visszautasítása, akik másodpercenként több mint n-szer fértek hozzá a rendszer API-jaihoz egy adott időtartamban.</span><span class="sxs-lookup"><span data-stu-id="a09d5-124">Rejecting requests from an individual user who's already accessed system APIs more than n times per second over a given period of time.</span></span> <span data-ttu-id="a09d5-125">Ehhez a rendszernek mérnie az egy adott alkalmazást futtató összes bérlő vagy felhasználó erőforrás-felhasználását.</span><span class="sxs-lookup"><span data-stu-id="a09d5-125">This requires the system to meter the use of resources for each tenant or user running an application.</span></span> <span data-ttu-id="a09d5-126">További információkért tekintse meg a [szolgáltatások mérésével kapcsolatos útmutatót](https://msdn.microsoft.com/library/dn589796.aspx).</span><span class="sxs-lookup"><span data-stu-id="a09d5-126">For more information, see the [Service Metering Guidance](https://msdn.microsoft.com/library/dn589796.aspx).</span></span>

- <span data-ttu-id="a09d5-127">Bizonyos nem létfontosságú szolgáltatások működésének letiltása vagy csökkentése annak érdekében, hogy a létfontosságú szolgáltatások akadálytalanul, elegendő erőforrással futhassanak.</span><span class="sxs-lookup"><span data-stu-id="a09d5-127">Disabling or degrading the functionality of selected nonessential services so that essential services can run unimpeded with sufficient resources.</span></span> <span data-ttu-id="a09d5-128">Ha például az alkalmazás videókimenetet streamel, alacsonyabb felbontásra válthat.</span><span class="sxs-lookup"><span data-stu-id="a09d5-128">For example, if the application is streaming video output, it could switch to a lower resolution.</span></span>

- <span data-ttu-id="a09d5-129">A tevékenységek mennyiségének egyenletessé tétele terheléskiegyenlítés használatával (erről a megközelítésről bővebben az [üzenetsor-alapú terheléskiegyenlítési mintával](./queue-based-load-leveling.md) kapcsolatos részben olvashat).</span><span class="sxs-lookup"><span data-stu-id="a09d5-129">Using load leveling to smooth the volume of activity (this approach is covered in more detail by the [Queue-based Load Leveling pattern](./queue-based-load-leveling.md)).</span></span> <span data-ttu-id="a09d5-130">Ez a megközelítés több-bérlős környezetben az összes bérlő esetében teljesítménycsökkenést jelent.</span><span class="sxs-lookup"><span data-stu-id="a09d5-130">In a multi-tenant environment, this approach will reduce the performance for every tenant.</span></span> <span data-ttu-id="a09d5-131">Ha a rendszernek különböző SLA-kkal rendelkező bérlőket kell kiszolgálnia, az értékes bérlők műveletei azonnal végrehajthatóak.</span><span class="sxs-lookup"><span data-stu-id="a09d5-131">If the system must support a mix of tenants with different SLAs, the work for high-value tenants might be performed immediately.</span></span> <span data-ttu-id="a09d5-132">Más bérlők kérelmei visszatarthatóak addig, amíg a várólista ki nem ürült.</span><span class="sxs-lookup"><span data-stu-id="a09d5-132">Requests for other tenants can be held back, and handled when the backlog has eased.</span></span> <span data-ttu-id="a09d5-133">Ez a megközelítés az [elsőbbségi üzenetsor mintája](./priority-queue.md) alapján implementálható.</span><span class="sxs-lookup"><span data-stu-id="a09d5-133">The [Priority Queue pattern](./priority-queue.md) could be used to help implement this approach.</span></span>

- <span data-ttu-id="a09d5-134">Az alacsonyabb prioritású alkalmazások vagy bérlők nevében végrehajtott műveletek elhalasztása.</span><span class="sxs-lookup"><span data-stu-id="a09d5-134">Deferring operations being performed on behalf of lower priority applications or tenants.</span></span> <span data-ttu-id="a09d5-135">Ezek a műveletek felfüggeszthetőek vagy korlátozhatóak, a bérlő pedig az előállított kivétel formájában kap tájékoztatást arról, hogy a rendszer foglalt, és a műveletet később újból meg kell kísérelni.</span><span class="sxs-lookup"><span data-stu-id="a09d5-135">These operations can be suspended or limited, with an exception generated to inform the tenant that the system is busy and that the operation should be retried later.</span></span>

<span data-ttu-id="a09d5-136">Az ábrán az erőforráshasználat területdiagramja látható (a memória, CPU, sávszélesség és más tényezők kombinációja) az időben olyan alkalmazásokra vonatkozóan, amelyek három funkciót használnak.</span><span class="sxs-lookup"><span data-stu-id="a09d5-136">The figure shows an area graph for resource use (a combination of memory, CPU, bandwidth, and other factors) against time for applications that are making use of three features.</span></span> <span data-ttu-id="a09d5-137">A funkció egy működési terület, például egy összetevő, amely adott feladatokat végez, egy kódrészlet, amely egy összetett számítást hajt végre, vagy egy elem, amely valamilyen szolgáltatást – például memórián belüli gyorsítótárat – biztosít.</span><span class="sxs-lookup"><span data-stu-id="a09d5-137">A feature is an area of functionality, such as a component that performs a specific set of tasks, a piece of code that performs a complex calculation, or an element that provides a service such as an in-memory cache.</span></span> <span data-ttu-id="a09d5-138">Ezeket a funkciókat az A, B és C jelöli.</span><span class="sxs-lookup"><span data-stu-id="a09d5-138">These features are labeled A, B, and C.</span></span>

![1. ábra – Grafikon, amely három felhasználó nevében futó alkalmazások erőforrás-használatát ábrázolja az idő függvényében](./_images/throttling-resource-utilization.png)

> <span data-ttu-id="a09d5-140">A közvetlenül az egyes funkciók vonalai alatti terület az alkalmazások által ezen funkciók igénybevételekor felhasznált erőforrásokat jelöli.</span><span class="sxs-lookup"><span data-stu-id="a09d5-140">The area immediately below the line for a feature indicates the resources that are used by applications when they invoke this feature.</span></span> <span data-ttu-id="a09d5-141">Például az A funkció vonala alatti terület az A funkciót használó alkalmazások erőforráshasználatát, az A funkció vonala és a B funkció vonala közötti terület pedig a B funkciót használó alkalmazások erőforráshasználatát mutatja. Az egyes funkciókhoz tartozó területek összesítésével megkapjuk a rendszer teljes erőforráshasználatát.</span><span class="sxs-lookup"><span data-stu-id="a09d5-141">For example, the area below the line for Feature A shows the resources used by applications that are making use of Feature A, and the area between the lines for Feature A and Feature B indicates the resources used by applications invoking Feature B. Aggregating the areas for each feature shows the total resource use of the system.</span></span>

<span data-ttu-id="a09d5-142">Az előző ábra a műveletek késleltetésének hatását szemlélteti.</span><span class="sxs-lookup"><span data-stu-id="a09d5-142">The previous figure illustrates the effects of deferring operations.</span></span> <span data-ttu-id="a09d5-143">Közvetlenül a T1 időpont előtt az ezen funkciókat használó alkalmazásokhoz lefoglalt erőforrások teljes mennyisége elér egy küszöbértéket (az erőforráshasználat határát).</span><span class="sxs-lookup"><span data-stu-id="a09d5-143">Just prior to time T1, the total resources allocated to all applications using these features reach a threshold (the limit of resource use).</span></span> <span data-ttu-id="a09d5-144">Ezen a ponton fennáll a veszély, hogy az alkalmazások kimerítik a rendelkezésre álló erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="a09d5-144">At this point, the applications are in danger of exhausting the resources available.</span></span> <span data-ttu-id="a09d5-145">Ebben a rendszerben a B funkció kevésbé kritikus, mint az A vagy a C funkció, ezért a rendszer ideiglenesen letiltja, és az eddig általa használt erőforrások felszabadulnak.</span><span class="sxs-lookup"><span data-stu-id="a09d5-145">In this system, Feature B is less critical than Feature A or Feature C, so it's temporarily disabled and the resources that it was using are released.</span></span> <span data-ttu-id="a09d5-146">A T1 és a T2 időpont között az A és a C funkciót használó alkalmazások továbbra is normál módon futnak.</span><span class="sxs-lookup"><span data-stu-id="a09d5-146">Between times T1 and T2, the applications using Feature A and Feature C continue running as normal.</span></span> <span data-ttu-id="a09d5-147">Idővel az ezen két funkció által igénybe vett erőforrás-mennyiség eléggé lecsökken ahhoz, hogy a T2 időpontban ismét elegendő kapacitás váljon elérhetővé a B funkció engedélyezéséhez.</span><span class="sxs-lookup"><span data-stu-id="a09d5-147">Eventually, the resource use of these two features diminishes to the point when, at time T2, there is sufficient capacity to enable Feature B again.</span></span>

<span data-ttu-id="a09d5-148">Az automatikus skálázás és a szabályozás kombinálható is az alkalmazások válaszkészségének megőrzése és az SLA-knak való megfelelés fenntartása érdekében.</span><span class="sxs-lookup"><span data-stu-id="a09d5-148">The autoscaling and throttling approaches can also be combined to help keep the applications responsive and within SLAs.</span></span> <span data-ttu-id="a09d5-149">Ha az erőforrásigény várhatóan magas marad, a szabályozás ideiglenes megoldást biztosít, amíg a rendszer elvégzi a horizontális felskálázást. Ezen a ponton a rendszer teljes működőkészsége visszaállítható.</span><span class="sxs-lookup"><span data-stu-id="a09d5-149">If the demand is expected to remain high, throttling provides a temporary solution while the system scales out. At this point, the full functionality of the system can be restored.</span></span>

<span data-ttu-id="a09d5-150">A következő ábrán a rendszeren futó összes alkalmazás teljes erőforrás-használatának grafikonja látható az idő függvényében, illusztrálva a szabályozás és az automatikus skálázás kombinálását.</span><span class="sxs-lookup"><span data-stu-id="a09d5-150">The next figure shows an area graph of the overall resource use by all applications running in a system against time, and illustrates how throttling can be combined with autoscaling.</span></span>

![2. ábra – A szabályozás és az automatikus skálázás kombinálásának hatásait ábrázoló grafikon](./_images/throttling-autoscaling.png)

<span data-ttu-id="a09d5-152">A T1 időpontban a rendszer eléri az erőforráshasználat enyhe korlátjának megfelelő küszöbértéket.</span><span class="sxs-lookup"><span data-stu-id="a09d5-152">At time T1, the threshold specifying the soft limit of resource use is reached.</span></span> <span data-ttu-id="a09d5-153">A rendszer ezen a ponton megkezdheti a horizontális felskálázást. Ha azonban az új erőforrások nem válnak elég gyorsan elérhetővé, a meglévő erőforrások kimerülhetnek, és a rendszer meghibásodhat.</span><span class="sxs-lookup"><span data-stu-id="a09d5-153">At this point, the system can start to scale out. However, if the new resources don't become available quickly enough, then the existing resources might be exhausted and the system could fail.</span></span> <span data-ttu-id="a09d5-154">Ennek elkerülése érdekében a rendszer ideiglenesen szabályozva lesz a korábban leírtaknak megfelelően.</span><span class="sxs-lookup"><span data-stu-id="a09d5-154">To prevent this from occurring, the system is temporarily throttled, as described earlier.</span></span> <span data-ttu-id="a09d5-155">Ha az automatikus skálázás befejeződött, és a további erőforrások elérhetővé váltak, a szabályozás mértéke csökkenthető.</span><span class="sxs-lookup"><span data-stu-id="a09d5-155">When autoscaling has completed and the additional resources are available, throttling can be relaxed.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="a09d5-156">Problémák és megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="a09d5-156">Issues and considerations</span></span>

<span data-ttu-id="a09d5-157">A minta megvalósítása során az alábbi pontokat vegye figyelembe:</span><span class="sxs-lookup"><span data-stu-id="a09d5-157">You should consider the following points when deciding how to implement this pattern:</span></span>

- <span data-ttu-id="a09d5-158">Az alkalmazások szabályozása és a felhasznált stratégia az architektúrával kapcsolatos döntés, amely a rendszer teljes kialakítására hatással van.</span><span class="sxs-lookup"><span data-stu-id="a09d5-158">Throttling an application, and the strategy to use, is an architectural decision that impacts the entire design of a system.</span></span> <span data-ttu-id="a09d5-159">A szabályozást az alkalmazástervezési folyamat korai szakaszában kell megfontolni, mert ezt a stratégiát nem könnyű már implementált rendszerhez hozzáadni.</span><span class="sxs-lookup"><span data-stu-id="a09d5-159">Throttling should be considered early in the application design process because it isn't easy to add once a system has been implemented.</span></span>

- <span data-ttu-id="a09d5-160">A szabályozást gyorsan kell végrehajtani.</span><span class="sxs-lookup"><span data-stu-id="a09d5-160">Throttling must be performed quickly.</span></span> <span data-ttu-id="a09d5-161">A rendszernek képesnek kell lennie érzékelni a tevékenységek mennyiségének növekedését és megfelelően reagálni.</span><span class="sxs-lookup"><span data-stu-id="a09d5-161">The system must be capable of detecting an increase in activity and react accordingly.</span></span> <span data-ttu-id="a09d5-162">Továbbá az is fontos, hogy a rendszer képes legyen gyorsan visszaállni az eredeti állapotába, miután csökkent a terhelés.</span><span class="sxs-lookup"><span data-stu-id="a09d5-162">The system must also be able to revert to its original state quickly after the load has eased.</span></span> <span data-ttu-id="a09d5-163">Ennek feltétele a megfelelő teljesítményadatok folyamatos rögzítése és monitorozása.</span><span class="sxs-lookup"><span data-stu-id="a09d5-163">This requires that the appropriate performance data is continually captured and monitored.</span></span>

- <span data-ttu-id="a09d5-164">Ha egy szolgáltatásnak ideiglenesen meg kell tagadnia egy felhasználói kérelmet, konkrét hibakódot kell visszaadnia, amely tájékoztatja az ügyfélalkalmazást arról, hogy a művelet végrehajtása szabályozás miatt lett visszautasítva.</span><span class="sxs-lookup"><span data-stu-id="a09d5-164">If a service needs to temporarily deny a user request, it should return a specific error code so the client application understands that the reason for the refusal to perform an operation is due to throttling.</span></span> <span data-ttu-id="a09d5-165">Az ügyfélalkalmazás várhat egy ideig a kérelem újbóli megkísérlése előtt.</span><span class="sxs-lookup"><span data-stu-id="a09d5-165">The client application can wait for a period before retrying the request.</span></span>

- <span data-ttu-id="a09d5-166">A szabályozás ideiglenes intézkedésként használható, amíg a rendszer elvégzi az automatikus skálázást.</span><span class="sxs-lookup"><span data-stu-id="a09d5-166">Throttling can be used as a temporary measure while a system autoscales.</span></span> <span data-ttu-id="a09d5-167">Egyes esetekben jobb csak szabályozást alkalmazni skálázás helyett, ha a tevékenységcsúcs hirtelen jelentkezik, és várhatóan nem tart sokáig, ugyanis a skálázás jelentősen megnövelheti a futtatási költségeket.</span><span class="sxs-lookup"><span data-stu-id="a09d5-167">In some cases it's better to simply throttle, rather than to scale, if a burst in activity is sudden and isn't expected to be long lived because scaling can add considerably to running costs.</span></span>

- <span data-ttu-id="a09d5-168">Ha a szabályozás ideiglenes intézkedésként van alkalmazva, mialatt a rendszer automatikus skálázást alkalmat, és ha az erőforrásigény nagyon gyorsan növekszik, előfordulhat, hogy&mdash;a rendszer nem tud tovább működni akkor sem, ha szabályozott üzemmódban van.</span><span class="sxs-lookup"><span data-stu-id="a09d5-168">If throttling is being used as a temporary measure while a system autoscales, and if resource demands grow very quickly, the system might not be able to continue functioning&mdash;even when operating in a throttled mode.</span></span> <span data-ttu-id="a09d5-169">Ha ez nem fogadható el, vegye fontolóra nagyobb kapacitástartalék fenntartását és az erőteljesebb automatikus skálázást.</span><span class="sxs-lookup"><span data-stu-id="a09d5-169">If this isn't acceptable, consider maintaining larger capacity reserves and configuring more aggressive autoscaling.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="a09d5-170">Mikor érdemes ezt a mintát használni?</span><span class="sxs-lookup"><span data-stu-id="a09d5-170">When to use this pattern</span></span>

<span data-ttu-id="a09d5-171">Használja a következő mintát a következő helyzetekben:</span><span class="sxs-lookup"><span data-stu-id="a09d5-171">Use this pattern:</span></span>

- <span data-ttu-id="a09d5-172">Annak biztosítása érdekében, hogy a rendszer folyamatosan megfeleljen a szolgáltatói szerződések feltételeinek.</span><span class="sxs-lookup"><span data-stu-id="a09d5-172">To ensure that a system continues to meet service level agreements.</span></span>

- <span data-ttu-id="a09d5-173">Annak elkerülése érdekében, hogy egyetlen bérlő kisajátíthassa az alkalmazások által biztosított erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="a09d5-173">To prevent a single tenant from monopolizing the resources provided by an application.</span></span>

- <span data-ttu-id="a09d5-174">A tevékenységcsúcsok kezelése érdekében.</span><span class="sxs-lookup"><span data-stu-id="a09d5-174">To handle bursts in activity.</span></span>

- <span data-ttu-id="a09d5-175">A rendszerköltségek optimalizálása érdekében a működéshez szükséges maximális erőforrásszintek korlátozása révén.</span><span class="sxs-lookup"><span data-stu-id="a09d5-175">To help cost-optimize a system by limiting the maximum resource levels needed to keep it functioning.</span></span>

## <a name="example"></a><span data-ttu-id="a09d5-176">Példa</span><span class="sxs-lookup"><span data-stu-id="a09d5-176">Example</span></span>

<span data-ttu-id="a09d5-177">Az utolsó ábrán a szabályozás több-bérlős rendszerben történő implementálása látható.</span><span class="sxs-lookup"><span data-stu-id="a09d5-177">The final figure illustrates how throttling can be implemented in a multi-tenant system.</span></span> <span data-ttu-id="a09d5-178">A bérlővállalatok felhasználói egy felhőben futtatott alkalmazáshoz férnek hozzá, amelyben kérdőíveket töltenek ki és küldenek el.</span><span class="sxs-lookup"><span data-stu-id="a09d5-178">Users from each of the tenant organizations access a cloud-hosted application where they fill out and submit surveys.</span></span> <span data-ttu-id="a09d5-179">Az alkalmazás rendszerállapota monitorozza a felhasználóktól az alkalmazáshoz érkező kérelmek küldési gyakoriságát.</span><span class="sxs-lookup"><span data-stu-id="a09d5-179">The application contains instrumentation that monitors the rate at which these users are submitting requests to the application.</span></span>

<span data-ttu-id="a09d5-180">Annak érdekében, hogy egy bérlő felhasználói miatt ne csökkenjen az alkalmazás válaszkészsége és rendelkezésre állása a többi felhasználó számára, a rendszer az egyes bérlők felhasználói által egy másodperc alatt elküldhető kérelmek számára vonatkozó korlátot vezet be.</span><span class="sxs-lookup"><span data-stu-id="a09d5-180">In order to prevent the users from one tenant affecting the responsiveness and availability of the application for all other users, a limit is applied to the number of requests per second the users from any one tenant can submit.</span></span> <span data-ttu-id="a09d5-181">Az ezen korlátot meghaladó kérelmeket az alkalmazás blokkolja.</span><span class="sxs-lookup"><span data-stu-id="a09d5-181">The application blocks requests that exceed this limit.</span></span>

![3. ábra – Szabályozás implementálása több-bérlős alkalmazásban](./_images/throttling-multi-tenant.png)

## <a name="related-patterns-and-guidance"></a><span data-ttu-id="a09d5-183">Kapcsolódó minták és útmutatók</span><span class="sxs-lookup"><span data-stu-id="a09d5-183">Related patterns and guidance</span></span>

<span data-ttu-id="a09d5-184">Az alábbi minták és útmutatók szintén hasznosak lehetnek a minta megvalósításakor:</span><span class="sxs-lookup"><span data-stu-id="a09d5-184">The following patterns and guidance may also be relevant when implementing this pattern:</span></span>

- <span data-ttu-id="a09d5-185">[Rendszerállapot és telemetria – útmutató](https://msdn.microsoft.com/library/dn589775.aspx).</span><span class="sxs-lookup"><span data-stu-id="a09d5-185">[Instrumentation and Telemetry Guidance](https://msdn.microsoft.com/library/dn589775.aspx).</span></span> <span data-ttu-id="a09d5-186">A szabályozás alapját a szolgáltatások igénybevételének mértékére vonatkozó adatok gyűjtése képezi.</span><span class="sxs-lookup"><span data-stu-id="a09d5-186">Throttling depends on gathering information about how heavily a service is being used.</span></span> <span data-ttu-id="a09d5-187">Ismerteti, hogyan állíthat elő és rögzíthet egyéni monitorozási adatokat.</span><span class="sxs-lookup"><span data-stu-id="a09d5-187">Describes how to generate and capture custom monitoring information.</span></span>
- <span data-ttu-id="a09d5-188">[Szolgáltatások mérésével kapcsolatos útmutató](https://msdn.microsoft.com/library/dn589796.aspx).</span><span class="sxs-lookup"><span data-stu-id="a09d5-188">[Service Metering Guidance](https://msdn.microsoft.com/library/dn589796.aspx).</span></span> <span data-ttu-id="a09d5-189">Ismerteti, hogyan mérheti a szolgáltatások használatát a használatuk jellegének megismerése céljából.</span><span class="sxs-lookup"><span data-stu-id="a09d5-189">Describes how to meter the use of services in order to gain an understanding of how they are used.</span></span> <span data-ttu-id="a09d5-190">Ez az információ hasznos lehet a szolgáltatás szabályozásának megtervezéséhez.</span><span class="sxs-lookup"><span data-stu-id="a09d5-190">This information can be useful in determining how to throttle a service.</span></span>
- <span data-ttu-id="a09d5-191">[Útmutató az automatikus skálázáshoz](https://msdn.microsoft.com/library/dn589774.aspx).</span><span class="sxs-lookup"><span data-stu-id="a09d5-191">[Autoscaling Guidance](https://msdn.microsoft.com/library/dn589774.aspx).</span></span> <span data-ttu-id="a09d5-192">A szabályozás használható ideiglenes intézkedésként, amíg a rendszer elvégzi az automatikus skálázást, vagy azért, hogy ne legyen szükség automatikus skálázásra.</span><span class="sxs-lookup"><span data-stu-id="a09d5-192">Throttling can be used as an interim measure while a system autoscales, or to remove the need for a system to autoscale.</span></span> <span data-ttu-id="a09d5-193">Az automatikus skálázási stratégiákra vonatkozó információkat tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="a09d5-193">Contains information on autoscaling strategies.</span></span>
- <span data-ttu-id="a09d5-194">[Üzenetsor-alapú terheléskiegyenlítési minta](./queue-based-load-leveling.md).</span><span class="sxs-lookup"><span data-stu-id="a09d5-194">[Queue-based Load Leveling pattern](./queue-based-load-leveling.md).</span></span> <span data-ttu-id="a09d5-195">Az üzenetsor-alapú terheléskiegyenlítés a szabályozás implementálásához gyakran használt mechanizmus.</span><span class="sxs-lookup"><span data-stu-id="a09d5-195">Queue-based load leveling is a commonly used mechanism for implementing throttling.</span></span> <span data-ttu-id="a09d5-196">Az üzenetsor képes pufferként működni, amely segít egyenletesebbé tenni a szolgáltatásokhoz érkező, alkalmazások által küldött kérelmek kézbesítési gyakoriságát.</span><span class="sxs-lookup"><span data-stu-id="a09d5-196">A queue can act as a buffer that helps to even out the rate at which requests sent by an application are delivered to a service.</span></span>
- <span data-ttu-id="a09d5-197">[Elsőbbségi üzenetsor mintája](./priority-queue.md).</span><span class="sxs-lookup"><span data-stu-id="a09d5-197">[Priority Queue pattern](./priority-queue.md).</span></span> <span data-ttu-id="a09d5-198">Az elsőbbségi üzenetsor szabályozási stratégiába való beépítésével a rendszer képes fenntartani a teljesítményszintet a kritikus fontosságú vagy nagyértékű alkalmazásokhoz, míg a kevésbé fontos alkalmazások teljesítményét csökkenti.</span><span class="sxs-lookup"><span data-stu-id="a09d5-198">A system can use priority queuing as part of its throttling strategy to maintain performance for critical or higher value applications, while reducing the performance of less important applications.</span></span>
