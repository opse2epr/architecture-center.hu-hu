---
title: Forgalomirányító minta
titleSuffix: Cloud Design Patterns
description: Védheti az alkalmazásokat és szolgáltatásokat egy dedikált üzemeltető példány segítségével, amely közvetítőként szolgál az ügyfelek és az alkalmazás vagy szolgáltatás között, érvényesíti és vírusmentesíti a kéréseket, valamint közvetíti a kéréseket és az adatokat közöttük.
keywords: tervezési minta
author: dragon119
ms.date: 06/23/2017
ms.custom: seodec18
ms.openlocfilehash: a45ace8ea05e4a7dd1d8a48653e94a5fe5bfb0f6
ms.sourcegitcommit: 680c9cef945dff6fee5e66b38e24f07804510fa9
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 01/04/2019
ms.locfileid: "54009695"
---
# <a name="gatekeeper-pattern"></a><span data-ttu-id="2ddec-104">Forgalomirányító minta</span><span class="sxs-lookup"><span data-stu-id="2ddec-104">Gatekeeper pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="2ddec-105">Védheti az alkalmazásokat és szolgáltatásokat egy dedikált üzemeltető példány segítségével, amely közvetítőként szolgál az ügyfelek és az alkalmazás vagy szolgáltatás között, érvényesíti és vírusmentesíti a kéréseket, valamint közvetíti a kéréseket és az adatokat közöttük.</span><span class="sxs-lookup"><span data-stu-id="2ddec-105">Protect applications and services by using a dedicated host instance that acts as a broker between clients and the application or service, validates and sanitizes requests, and passes requests and data between them.</span></span> <span data-ttu-id="2ddec-106">Ez egy további biztonsági réteget biztosíthat, és csökkenti a számítógép támadható felületét.</span><span class="sxs-lookup"><span data-stu-id="2ddec-106">This can provide an additional layer of security, and limit the attack surface of the system.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="2ddec-107">Kontextus és probléma</span><span class="sxs-lookup"><span data-stu-id="2ddec-107">Context and problem</span></span>

<span data-ttu-id="2ddec-108">Az alkalmazások kérések fogadásával és feldolgozásával teszik elérhetővé a funkcióikat az ügyfelek számára.</span><span class="sxs-lookup"><span data-stu-id="2ddec-108">Applications expose their functionality to clients by accepting and processing requests.</span></span> <span data-ttu-id="2ddec-109">Felhőben futtatott forgatókönyvek esetén az alkalmazások végpontokat tesznek elérhetővé, amelyekhez az ügyfelek csatlakoznak, és általában tartalmazzák az ügyfelektől érkező kérelmek kezeléséhez szükséges kódot.</span><span class="sxs-lookup"><span data-stu-id="2ddec-109">In cloud-hosted scenarios, applications expose endpoints clients connect to, and typically include the code to handle the requests from clients.</span></span> <span data-ttu-id="2ddec-110">Ez a kód elvégzi a hitelesítést és az ellenőrzést, a kérelmek feldolgozását vagy annak egy részét, és általában hozzáfér tárolókhoz és egyéb szolgáltatásokhoz az ügyfél nevében.</span><span class="sxs-lookup"><span data-stu-id="2ddec-110">This code performs authentication and validation, some or all request processing, and is likely to accesses storage and other services on behalf of the client.</span></span>

<span data-ttu-id="2ddec-111">Ha egy rosszindulatú felhasználó feltöri a rendszert, és hozzáférést szerez az alkalmazás üzemeltetési környezetéhez, elérhetővé válnak számára az alkalmazás által használt biztonsági mechanizmusok, például a hitelesítő adatok és a tárkulcsok, valamint az alkalmazás által elért szolgáltatások és adatok.</span><span class="sxs-lookup"><span data-stu-id="2ddec-111">If a malicious user is able to compromise the system and gain access to the application’s hosting environment, the security mechanisms it uses such as credentials and storage keys, and the services and data it accesses, are exposed.</span></span> <span data-ttu-id="2ddec-112">Ezáltal a rosszindulatú felhasználó korlátlan hozzáférést szerezhet a bizalmas adatokhoz és más szolgáltatásokhoz.</span><span class="sxs-lookup"><span data-stu-id="2ddec-112">As a result, the malicious user can gain unrestrained access to sensitive information and other services.</span></span>

## <a name="solution"></a><span data-ttu-id="2ddec-113">Megoldás</span><span class="sxs-lookup"><span data-stu-id="2ddec-113">Solution</span></span>

<span data-ttu-id="2ddec-114">Ha minimálisra szeretné csökkenteni annak az esélyét, hogy ügyfelek hozzáférjenek bizalmas adatokhoz és szolgáltatásokhoz, válassza le a nyilvános végpontokat elérhetővé tévő gazdagépeket vagy feladatokat arról a kódról, amely a kérelmek feldolgozását végzi, illetve hozzáfér a tárolókhoz.</span><span class="sxs-lookup"><span data-stu-id="2ddec-114">To minimize the risk of clients gaining access to sensitive information and services, decouple hosts or tasks that expose public endpoints from the code that processes requests and accesses storage.</span></span> <span data-ttu-id="2ddec-115">Ezt egy előtérrendszer vagy dedikált feladat alkalmazásával teheti meg, amely közvetlenül érintkezik az ügyfelekkel, és &mdash;például egy leválasztott felületen keresztül&mdash; továbbítja a kéréseket az azokat kezelő gazdagépek vagy feladatok számára.</span><span class="sxs-lookup"><span data-stu-id="2ddec-115">You can achieve this by using a façade or a dedicated task that interacts with clients and then hands off the request&mdash;perhaps through a decoupled interface&mdash;to the hosts or tasks that'll handle the request.</span></span> <span data-ttu-id="2ddec-116">Az ábra általános áttekintést nyújt erről a mintáról.</span><span class="sxs-lookup"><span data-stu-id="2ddec-116">The figure provides a high-level overview of this pattern.</span></span>

![Általános áttekintés a mintáról](./_images/gatekeeper-diagram.png)

<span data-ttu-id="2ddec-118">A Forgalomirányító minta használható egyszerűen a tároló védelmére, vagy átfogó előtérrendszerként az alkalmazás összes funkciójának védelmére.</span><span class="sxs-lookup"><span data-stu-id="2ddec-118">The gatekeeper pattern can be used to simply protect storage, or it can be used as a more comprehensive façade to protect all of the functions of the application.</span></span> <span data-ttu-id="2ddec-119">Néhány fontosabb tényező:</span><span class="sxs-lookup"><span data-stu-id="2ddec-119">The important factors are:</span></span>

- <span data-ttu-id="2ddec-120">**Szabályozott ellenőrzés**.</span><span class="sxs-lookup"><span data-stu-id="2ddec-120">**Controlled validation**.</span></span> <span data-ttu-id="2ddec-121">A forgalomirányító ellenőrzi az összes kérést, és elutasítja azokat, amelyek nem felelnek meg az ellenőrzési követelményeknek.</span><span class="sxs-lookup"><span data-stu-id="2ddec-121">The gatekeeper validates all requests, and rejects those that don't meet validation requirements.</span></span>
- <span data-ttu-id="2ddec-122">**Korlátozott kockázat és kitettség**.</span><span class="sxs-lookup"><span data-stu-id="2ddec-122">**Limited risk and exposure**.</span></span> <span data-ttu-id="2ddec-123">A forgalomirányítónak nincs hozzáférése a megbízható gazdagép által használt hitelesítő adatokhoz vagy kulcsokhoz a tároló és a szolgáltatások eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="2ddec-123">The gatekeeper doesn't have access to the credentials or keys used by the trusted host to access storage and services.</span></span> <span data-ttu-id="2ddec-124">Ha feltörik a forgalomirányítót, a támadó nem fér hozzá ezekhez a hitelesítő adatokhoz vagy kulcsokhoz.</span><span class="sxs-lookup"><span data-stu-id="2ddec-124">If the gatekeeper is compromised, the attacker doesn't get access to these credentials or keys.</span></span>
- <span data-ttu-id="2ddec-125">**A megfelelő biztonsági**.</span><span class="sxs-lookup"><span data-stu-id="2ddec-125">**Appropriate security**.</span></span> <span data-ttu-id="2ddec-126">A forgalomirányító korlátozott jogosultságú módban fut, az alkalmazás többi része viszont teljesen megbízható módban fut, hogy hozzáférhessen a tárolóhoz és a szolgáltatásokhoz.</span><span class="sxs-lookup"><span data-stu-id="2ddec-126">The gatekeeper runs in a limited privilege mode, while the rest of the application runs in the full trust mode required to access storage and services.</span></span> <span data-ttu-id="2ddec-127">Ha a forgalomirányító biztonsága sérül, nem tud közvetlenül hozzáférni az alkalmazás szolgáltatásaihoz vagy adataihoz.</span><span class="sxs-lookup"><span data-stu-id="2ddec-127">If the gatekeeper is compromised, it can't directly access the application services or data.</span></span>

<span data-ttu-id="2ddec-128">Egy tipikus felépítésű hálózatban ez a minta gyakorlatilag tűzfalként funkcionál.</span><span class="sxs-lookup"><span data-stu-id="2ddec-128">This pattern acts like a firewall in a typical network topography.</span></span> <span data-ttu-id="2ddec-129">Lehetővé teszi a forgalomirányító számára, hogy a kérések megvizsgálása után eldöntse, továbbítható-e a kérés a megbízható gazdagépnek (más néven kulcskezelő főkiszolgálónak), amely aztán végrehajtja a szükséges feladatot.</span><span class="sxs-lookup"><span data-stu-id="2ddec-129">It allows the gatekeeper to examine requests and make a decision about whether to pass the request on to the trusted host (sometimes called the keymaster) that performs the required tasks.</span></span> <span data-ttu-id="2ddec-130">Ehhez a forgalomirányító először ellenőrzi és vírusmentesíti a kéréseket, majd továbbítja őket a megbízható gazdagépnek.</span><span class="sxs-lookup"><span data-stu-id="2ddec-130">This decision typically requires the gatekeeper to validate and sanitize the request content before passing it on to the trusted host.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="2ddec-131">Problémák és megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="2ddec-131">Issues and considerations</span></span>

<span data-ttu-id="2ddec-132">A minta megvalósítása során az alábbi pontokat vegye figyelembe:</span><span class="sxs-lookup"><span data-stu-id="2ddec-132">Consider the following points when deciding how to implement this pattern:</span></span>

- <span data-ttu-id="2ddec-133">Ügyeljen rá, hogy a megbízható gazdagépek, amelyek számára a forgalomirányító kéréseket továbbít, kizárólag belső és védett végpontokat tesznek elérhetővé, és kizárólag a forgalomirányítóhoz kapcsolódnak.</span><span class="sxs-lookup"><span data-stu-id="2ddec-133">Ensure that the trusted hosts the gatekeeper passes requests to expose only internal or protected endpoints, and connect only to the gatekeeper.</span></span> <span data-ttu-id="2ddec-134">Fontos, hogy a megbízható gazdagépek ne tegyenek elérhetővé külső végpontokat vagy csatolókat.</span><span class="sxs-lookup"><span data-stu-id="2ddec-134">The trusted hosts shouldn't expose any external endpoints or interfaces.</span></span>
- <span data-ttu-id="2ddec-135">A forgalomirányítónak korlátozott jogosultságú módban kell futnia.</span><span class="sxs-lookup"><span data-stu-id="2ddec-135">The gatekeeper must run in a limited privilege mode.</span></span> <span data-ttu-id="2ddec-136">Ez általában úgy oldható meg, hogy a forgalomirányító és a megbízható gazdagép külön-külön üzemeltetett szolgáltatásban vagy virtuális gépen fut.</span><span class="sxs-lookup"><span data-stu-id="2ddec-136">Typically this means running the gatekeeper and the trusted host in separate hosted services or virtual machines.</span></span>
- <span data-ttu-id="2ddec-137">A forgalomirányító ne végezzen az alkalmazással vagy a szolgáltatásokkal kapcsolatos feldolgozási feladatot, illetve ne rendelkezzen hozzáféréssel semmilyen adathoz.</span><span class="sxs-lookup"><span data-stu-id="2ddec-137">The gatekeeper shouldn't perform any processing related to the application or services, or access any data.</span></span> <span data-ttu-id="2ddec-138">A forgalomirányító feladata kizárólag a kérések ellenőrzése és vírusmentesítése.</span><span class="sxs-lookup"><span data-stu-id="2ddec-138">Its function is purely to validate and sanitize requests.</span></span> <span data-ttu-id="2ddec-139">A megbízható gazdagépeknek néha további ellenőrzéseket kell végeznie a kéréseken, de az alapvető ellenőrzési feladatokat a forgalomirányító látja el.</span><span class="sxs-lookup"><span data-stu-id="2ddec-139">The trusted hosts might need to perform additional validation of requests, but the core validation should be performed by the gatekeeper.</span></span>
- <span data-ttu-id="2ddec-140">Amikor csak lehetséges, használjon biztonságos kommunikációs csatornát (HTTPS, SSL vagy TLS) a forgalomirányító és a megbízható gazdagép, illetve a feladatok között.</span><span class="sxs-lookup"><span data-stu-id="2ddec-140">Use a secure communication channel (HTTPS, SSL, or TLS) between the gatekeeper and the trusted hosts or tasks where this is possible.</span></span> <span data-ttu-id="2ddec-141">Egyes üzemeltetési környezetek nem támogatják a HTTPS használatát a belső végpontokon.</span><span class="sxs-lookup"><span data-stu-id="2ddec-141">However, some hosting environments don't support HTTPS on internal endpoints.</span></span>
- <span data-ttu-id="2ddec-142">A Forgalomirányító minta implementálásához szükséges extra réteg az alkalmazáshoz való hozzáadása valószínűleg hatással van a teljesítményre a szükséges további feldolgozás és hálózati kommunikáció miatt.</span><span class="sxs-lookup"><span data-stu-id="2ddec-142">Adding the extra layer to the application to implement the gatekeeper pattern is likely to have some impact on performance due to the additional processing and network communication it requires.</span></span>
- <span data-ttu-id="2ddec-143">A forgalomirányító-példány kritikus meghibásodási pont lehet a rendszeren belül.</span><span class="sxs-lookup"><span data-stu-id="2ddec-143">The gatekeeper instance could be a single point of failure.</span></span> <span data-ttu-id="2ddec-144">Az esetleges hibák hatásának minimálisra csökkentése érdekében fontolja meg további példányok telepítését és egy automatikus skálázási rendszer használatát a megfelelő kapacitás és a folyamatos rendelkezésre állás biztosítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="2ddec-144">To minimize the impact of a failure, consider deploying additional instances and using an autoscaling mechanism to ensure capacity to maintain availability.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="2ddec-145">Mikor érdemes ezt a mintát használni?</span><span class="sxs-lookup"><span data-stu-id="2ddec-145">When to use this pattern</span></span>

<span data-ttu-id="2ddec-146">Ez a minta az alábbi esetekben hasznos:</span><span class="sxs-lookup"><span data-stu-id="2ddec-146">This pattern is useful for:</span></span>

- <span data-ttu-id="2ddec-147">Olyan alkalmazásokhoz, amelyek bizalmas információkat kezelnek, és szolgáltatásaik jelentős védelmet igényelnek a rosszindulatú támadások ellen, illetve az üzletmenet szempontjából kritikus fontosságú műveleteket hajtanak végre, amelyek nem szakadhatnak meg.</span><span class="sxs-lookup"><span data-stu-id="2ddec-147">Applications that handle sensitive information, expose services that must have a high degree of protection from malicious attacks, or perform mission-critical operations that shouldn't be disrupted.</span></span>
- <span data-ttu-id="2ddec-148">Olyan elosztott alkalmazásokhoz, ahol a fő feladatoktól elkülönítve kell ellenőrizni a kéréseket, illetve az ellenőrzés központi elvégzéséhez a karbantartás és az adminisztráció leegyszerűsítése érdekében.</span><span class="sxs-lookup"><span data-stu-id="2ddec-148">Distributed applications where it's necessary to perform request validation separately from the main tasks, or to centralize this validation to simplify maintenance and administration.</span></span>

## <a name="example"></a><span data-ttu-id="2ddec-149">Példa</span><span class="sxs-lookup"><span data-stu-id="2ddec-149">Example</span></span>

<span data-ttu-id="2ddec-150">Felhőben futtatott forgatókönyvek esetén ez a minta úgy implementálható, hogy az alkalmazás megbízható szerepköreiről és szolgáltatásairól leválasztják a forgalomirányító szerepkört vagy virtuális gépet.</span><span class="sxs-lookup"><span data-stu-id="2ddec-150">In a cloud-hosted scenario, this pattern can be implemented by decoupling the gatekeeper role or virtual machine from the trusted roles and services in an application.</span></span> <span data-ttu-id="2ddec-151">Ehhez köztes kommunikációs mechanizmusként egy belső végpontot, üzenetsort vagy tárolót kell használni.</span><span class="sxs-lookup"><span data-stu-id="2ddec-151">Do this by using an internal endpoint, a queue, or storage as an intermediate communication mechanism.</span></span> <span data-ttu-id="2ddec-152">Az ábrán egy belső végpont használata látható.</span><span class="sxs-lookup"><span data-stu-id="2ddec-152">The figure illustrates using an internal endpoint.</span></span>

![Példa arra, amikor a minta a Cloud Services webes és feldolgozói szerepköreit használja](./_images/gatekeeper-endpoint.png)

## <a name="related-patterns"></a><span data-ttu-id="2ddec-154">Kapcsolódó minták</span><span class="sxs-lookup"><span data-stu-id="2ddec-154">Related patterns</span></span>

<span data-ttu-id="2ddec-155">A [Pótkulcs minta](./valet-key.md) is releváns lehet a forgalomirányító minta implementálásakor.</span><span class="sxs-lookup"><span data-stu-id="2ddec-155">The [Valet Key pattern](./valet-key.md) might also be relevant when implementing the Gatekeeper pattern.</span></span> <span data-ttu-id="2ddec-156">A forgalomirányító és a megbízható szerepkörök közötti kommunikáció esetén érdemes olyan kulcsok vagy tokenek használatával növelni a biztonságot, amelyek korlátozzák az erőforrásokhoz való hozzáférésre vonatkozó engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="2ddec-156">When communicating between the Gatekeeper and trusted roles it's good practice to enhance security by using keys or tokens that limit permissions for accessing resources.</span></span> <span data-ttu-id="2ddec-157">Leírja, hogyan használhatóak a tokenek vagy kulcsok, amelyek korlátozott közvetlen hozzáférést biztosítanak az ügyfelek számára egy adott erőforráshoz vagy szolgáltatáshoz.</span><span class="sxs-lookup"><span data-stu-id="2ddec-157">Describes how to use a token or key that provides clients with restricted direct access to a specific resource or service.</span></span>
