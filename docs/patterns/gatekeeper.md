---
title: "Forgalomirányító"
description: "Alkalmazások és szolgáltatások védelmét egy közötti ügyfelek és az alkalmazás vagy szolgáltatás, ellenőrzi és sanitizes kérelmek és a közöttük kérelmek és az adatok továbbítja szolgáló dedikált gazdagép példánnyal."
keywords: "Kialakítási mintája"
author: dragon119
ms.date: 06/23/2017
pnp.series.title: Cloud Design Patterns
pnp.pattern.categories: security
ms.openlocfilehash: 39f8548bbccb5e19d433f65b2e7e09147d676996
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 11/14/2017
---
# <a name="gatekeeper-pattern"></a><span data-ttu-id="3bd9a-104">Forgalomirányító minta</span><span class="sxs-lookup"><span data-stu-id="3bd9a-104">Gatekeeper pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="3bd9a-105">Alkalmazások és szolgáltatások védelmét egy közötti ügyfelek és az alkalmazás vagy szolgáltatás, ellenőrzi és sanitizes kérelmek és a közöttük kérelmek és az adatok továbbítja szolgáló dedikált gazdagép példánnyal.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-105">Protect applications and services by using a dedicated host instance that acts as a broker between clients and the application or service, validates and sanitizes requests, and passes requests and data between them.</span></span> <span data-ttu-id="3bd9a-106">Ez egy további biztonsági réteget nyújt, és a rendszer támadási felületét.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-106">This can provide an additional layer of security, and limit the attack surface of the system.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="3bd9a-107">A környezetben, és probléma</span><span class="sxs-lookup"><span data-stu-id="3bd9a-107">Context and problem</span></span>

<span data-ttu-id="3bd9a-108">Alkalmazások fogadása és feldolgozása kérelmek által elérhetővé tenni azok funkcióiról az ügyfelek számára.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-108">Applications expose their functionality to clients by accepting and processing requests.</span></span> <span data-ttu-id="3bd9a-109">A felhőben üzemeltetett esetben alkalmazások teszi közzé a végpontok ügyfelek kapcsolódni, és általában tartalmaznak az ügyfelektől érkező kérelmek kezeléséhez a kódot.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-109">In cloud-hosted scenarios, applications expose endpoints clients connect to, and typically include the code to handle the requests from clients.</span></span> <span data-ttu-id="3bd9a-110">Ez a kód hajtja végre a hitelesítési és érvényesítési, néhány vagy az összes kérelem feldolgozását, és valószínűleg hozzáférések tárolási és egyéb szolgáltatások, az ügyfél nevében.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-110">This code performs authentication and validation, some or all request processing, and is likely to accesses storage and other services on behalf of the client.</span></span>

<span data-ttu-id="3bd9a-111">Ha egy rosszindulatú felhasználó képes okoz a rendszerben, valamint az alkalmazás eléréséhez az üzemeltetési környezetbe, a biztonsági mechanizmust például a hitelesítő adatokat használ, és tárolási kulcsokat, és a szolgáltatások és fér hozzá, adatok ki vannak téve.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-111">If a malicious user is able to compromise the system and gain access to the application’s hosting environment, the security mechanisms it uses such as credentials and storage keys, and the services and data it accesses, are exposed.</span></span> <span data-ttu-id="3bd9a-112">Ennek eredményeképpen a rosszindulatú felhasználók is hozzáférhetnek segédülésen bizalmas adatokat és más szolgáltatások védelmét.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-112">As a result, the malicious user can gain unrestrained access to sensitive information and other services.</span></span>

## <a name="solution"></a><span data-ttu-id="3bd9a-113">Megoldás</span><span class="sxs-lookup"><span data-stu-id="3bd9a-113">Solution</span></span>

<span data-ttu-id="3bd9a-114">Ügyfelek hozzáférjenek a bizalmas adatokat és a szolgáltatások kockázatának minimalizálása érdekében használata leválasztja az állomások vagy a kódot, amely feldolgozza a kérelmeket, és a tárolási fér hozzá a nyilvános végpontok feladatait.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-114">To minimize the risk of clients gaining access to sensitive information and services, decouple hosts or tasks that expose public endpoints from the code that processes requests and accesses storage.</span></span> <span data-ttu-id="3bd9a-115">Egy homlokzati vagy egy dedikált feladatot, amely kommunikál az ügyfelek és a kérelem majd átadja használatával érhető el ez&mdash;akár leválasztott felületen keresztül&mdash;az állomások vagy a feladatokat, amelyek fogja kezelni a kérést.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-115">You can achieve this by using a façade or a dedicated task that interacts with clients and then hands off the request&mdash;perhaps through a decoupled interface&mdash;to the hosts or tasks that'll handle the request.</span></span> <span data-ttu-id="3bd9a-116">Az ábra magas szintű áttekintést nyújt az ebben a mintában.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-116">The figure provides a high-level overview of this pattern.</span></span>

![Ez a kialakítás áttekintése](./_images/gatekeeper-diagram.png)


<span data-ttu-id="3bd9a-118">Forgalomirányító minta segítségével egyszerűen védelme a tárolási, vagy lehet használható legyen egy átfogóbb homlokzati védelméhez összes az alkalmazás funkcióit.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-118">The gatekeeper pattern can be used to simply protect storage, or it can be used as a more comprehensive façade to protect all of the functions of the application.</span></span> <span data-ttu-id="3bd9a-119">A fontos tényezők, melyeknek a következők:</span><span class="sxs-lookup"><span data-stu-id="3bd9a-119">The important factors are:</span></span>

- <span data-ttu-id="3bd9a-120">**A vezérelt érvényesítése.**</span><span class="sxs-lookup"><span data-stu-id="3bd9a-120">**Controlled validation.**</span></span> <span data-ttu-id="3bd9a-121">A forgalomirányító ellenőrzi az összes kérelmet, és azokat, amelyek nem felelnek meg az érvényesítési követelményének elutasítja.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-121">The gatekeeper validates all requests, and rejects those that don't meet validation requirements.</span></span>
- <span data-ttu-id="3bd9a-122">**Korlátozott kockázat és kapta.**</span><span class="sxs-lookup"><span data-stu-id="3bd9a-122">**Limited risk and exposure.**</span></span> <span data-ttu-id="3bd9a-123">A forgalomirányító nem fér hozzá a hitelesítő adatokat vagy a tároló és a szolgáltatások eléréséhez a megbízható gazdagép által használt kulcsok.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-123">The gatekeeper doesn't have access to the credentials or keys used by the trusted host to access storage and services.</span></span> <span data-ttu-id="3bd9a-124">Ha a forgalomirányító biztonsága sérül, a támadó nem eléréséhez a hitelesítő adatokat vagy kulcsok.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-124">If the gatekeeper is compromised, the attacker doesn't get access to these credentials or keys.</span></span>
- <span data-ttu-id="3bd9a-125">**Megfelelő biztonsági.**</span><span class="sxs-lookup"><span data-stu-id="3bd9a-125">**Appropriate security.**</span></span> <span data-ttu-id="3bd9a-126">A forgalomirányító módban fut. a korlátozott jogosultságú, amíg a többi alkalmazáshoz szükséges a tároló elérése és szolgáltatások teljes megbízhatósági módban fut.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-126">The gatekeeper runs in a limited privilege mode, while the rest of the application runs in the full trust mode required to access storage and services.</span></span> <span data-ttu-id="3bd9a-127">Ha a forgalomirányító sérült, nem közvetlenül fér hozzá az alkalmazás szolgáltatások vagy adat.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-127">If the gatekeeper is compromised, it can't directly access the application services or data.</span></span>

<span data-ttu-id="3bd9a-128">Ezt a mintát úgy viselkedik, mint a szokásos hálózati topográfia tűzfal.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-128">This pattern acts like a firewall in a typical network topography.</span></span> <span data-ttu-id="3bd9a-129">Lehetővé teszi a forgalomirányítóhoz vizsgálja meg a kéréseket, és a döntést arról, hogy a kérelem továbbítása a megbízható gazdagép (más néven a keymaster), amely elvégzi a szükséges feladatok-e.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-129">It allows the gatekeeper to examine requests and make a decision about whether to pass the request on to the trusted host (sometimes called the keymaster) that performs the required tasks.</span></span> <span data-ttu-id="3bd9a-130">Ehhez a döntéshez általában a forgalomirányító érvényesítéséhez és a kérés tartalma sanitize előtt a megbízható gazdagép be van szükség.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-130">This decision typically requires the gatekeeper to validate and sanitize the request content before passing it on to the trusted host.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="3bd9a-131">Problémákat és szempontok</span><span class="sxs-lookup"><span data-stu-id="3bd9a-131">Issues and considerations</span></span>

<span data-ttu-id="3bd9a-132">Ebben a mintában megvalósításához meghatározásakor, vegye figyelembe a következő szempontokat:</span><span class="sxs-lookup"><span data-stu-id="3bd9a-132">Consider the following points when deciding how to implement this pattern:</span></span>

- <span data-ttu-id="3bd9a-133">Győződjön meg arról, hogy a megbízható gazdagépek a forgalomirányító továbbítja kérelmek csak belső vagy védett végpontot, és csak a forgalomirányító csatlakozni.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-133">Ensure that the trusted hosts the gatekeeper passes requests to expose only internal or protected endpoints, and connect only to the gatekeeper.</span></span> <span data-ttu-id="3bd9a-134">A megbízható gazdagépek nem teszi közzé, bármely külső végpontok száma vagy felületek.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-134">The trusted hosts shouldn't expose any external endpoints or interfaces.</span></span>
- <span data-ttu-id="3bd9a-135">A forgalomirányító korlátozott jogosultságú módban kell futnia.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-135">The gatekeeper must run in a limited privilege mode.</span></span> <span data-ttu-id="3bd9a-136">Általában ez azt jelenti, futtatja a forgalomirányító és a megbízható gazdagép üzemeltetett szolgáltatások külön vagy virtuális gépek.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-136">Typically this means running the gatekeeper and the trusted host in separate hosted services or virtual machines.</span></span>
- <span data-ttu-id="3bd9a-137">A gatekeeper ne hajtsa végre a bármely alkalmazás vagy szolgáltatás kapcsolódó feldolgozás, vagy adatokhoz hozzáférni.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-137">The gatekeeper shouldn't perform any processing related to the application or services, or access any data.</span></span> <span data-ttu-id="3bd9a-138">A függvény csak sanitize kéréseket, és ellenőrizheti.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-138">Its function is purely to validate and sanitize requests.</span></span> <span data-ttu-id="3bd9a-139">Módosítania kell a megbízható gazdagépek kérelmek további ellenőrzés végrehajtása, de az alapvető érvényesítési a forgalomirányító kell elvégezni.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-139">The trusted hosts might need to perform additional validation of requests, but the core validation should be performed by the gatekeeper.</span></span>
- <span data-ttu-id="3bd9a-140">Használjon biztonságos kommunikációs csatornát (HTTPS, SSL vagy TLS) között a forgalomirányító és a megbízható gazdagépek vagy feladatok Ha ez lehetséges.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-140">Use a secure communication channel (HTTPS, SSL, or TLS) between the gatekeeper and the trusted hosts or tasks where this is possible.</span></span> <span data-ttu-id="3bd9a-141">Azonban az egyes üzemeltetési környezetekben nem támogatják az HTTPS belső végpontokon.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-141">However, some hosting environments don't support HTTPS on internal endpoints.</span></span>
- <span data-ttu-id="3bd9a-142">A további réteget ad hozzá az alkalmazás a forgalomirányító mintát végrehajtásához valószínű, hogy néhány hatással teljesítmény miatt a további feldolgozás és a hálózati kommunikációra van szükség.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-142">Adding the extra layer to the application to implement the gatekeeper pattern is likely to have some impact on performance due to the additional processing and network communication it requires.</span></span>
- <span data-ttu-id="3bd9a-143">A forgalomirányító példány lehet a hibaérzékeny pontok kialakulását.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-143">The gatekeeper instance could be a single point of failure.</span></span> <span data-ttu-id="3bd9a-144">Hiba a hatás minimalizálása érdekében fontolja meg a további példányok telepítése és az automatikus skálázás mechanizmus segítségével kapacitás ahhoz rendelkezésre állásának biztosításához.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-144">To minimize the impact of a failure, consider deploying additional instances and using an autoscaling mechanism to ensure capacity to maintain availability.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="3bd9a-145">Mikor érdemes használni ezt a mintát</span><span class="sxs-lookup"><span data-stu-id="3bd9a-145">When to use this pattern</span></span>

<span data-ttu-id="3bd9a-146">Ebben a mintában a következőkhöz hasznos:</span><span class="sxs-lookup"><span data-stu-id="3bd9a-146">This pattern is useful for:</span></span>

- <span data-ttu-id="3bd9a-147">Alkalmazások, amelyek kezelik a bizalmas adatokat, hogy szolgáltatások kell nagyfokú védelmét a rosszindulatú támadások ellen, vagy kritikus fontosságú műveleteket, amelyek nem szakítható tenni.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-147">Applications that handle sensitive information, expose services that must have a high degree of protection from malicious attacks, or perform mission-critical operations that shouldn't be disrupted.</span></span>
- <span data-ttu-id="3bd9a-148">Az elosztott alkalmazásnál, ahol szükséges kérelem ellenőrzése a fő feladatok külön-külön végezze el, vagy központosíthatja az ellenőrzés karbantartási és a felügyelet egyszerűbbé tétele érdekében.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-148">Distributed applications where it's necessary to perform request validation separately from the main tasks, or to centralize this validation to simplify maintenance and administration.</span></span>

## <a name="example"></a><span data-ttu-id="3bd9a-149">Példa</span><span class="sxs-lookup"><span data-stu-id="3bd9a-149">Example</span></span>

<span data-ttu-id="3bd9a-150">A felhőben üzemeltetett forgatókönyvek ebben a mintában a forgalomirányító szerepkör vagy a megbízható szerepköröket és szolgáltatásokat az alkalmazásban a virtuális gép leválasztásával valósítható meg.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-150">In a cloud-hosted scenario, this pattern can be implemented by decoupling the gatekeeper role or virtual machine from the trusted roles and services in an application.</span></span> <span data-ttu-id="3bd9a-151">Ezt úgy teheti meg egy belső végpont, várólista vagy tárolási egy köztes kommunikációs mechanizmus.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-151">Do this by using an internal endpoint, a queue, or storage as an intermediate communication mechanism.</span></span> <span data-ttu-id="3bd9a-152">Az ábra azt mutatja be, belső végpont használatával.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-152">The figure illustrates using an internal endpoint.</span></span>

![Példa a minta Felhőszolgáltatások webes és feldolgozói szerepkörök használatával](./_images/gatekeeper-endpoint.png)


## <a name="related-patterns"></a><span data-ttu-id="3bd9a-154">Kapcsolódó minták</span><span class="sxs-lookup"><span data-stu-id="3bd9a-154">Related patterns</span></span>

<span data-ttu-id="3bd9a-155">A [Valet kulcs mintát](valet-key.md) lehet is megfelelő Forgalomirányító minta végrehajtása során.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-155">The [Valet Key pattern](valet-key.md) might also be relevant when implementing the Gatekeeper pattern.</span></span> <span data-ttu-id="3bd9a-156">Ha kommunikál a forgalomirányító és a megbízható szerepkörök közötti tanácsos a megfelelő biztonság érdekében a kulcsok vagy korlátozni az erőforrások eléréséhez szükséges engedélyekkel jogkivonatok használatával.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-156">When communicating between the Gatekeeper and trusted roles it's good practice to enhance security by using keys or tokens that limit permissions for accessing resources.</span></span> <span data-ttu-id="3bd9a-157">A token vagy a kulcs, amely egy meghatározott erőforrás vagy a szolgáltatás korlátozott közvetlen hozzáférést biztosít az ügyfelek használatát ismerteti.</span><span class="sxs-lookup"><span data-stu-id="3bd9a-157">Describes how to use a token or key that provides clients with restricted direct access to a specific resource or service.</span></span>
