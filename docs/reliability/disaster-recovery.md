---
title: Hiba és a katasztrófa utáni helyreállítás az Azure-alkalmazásokhoz
description: Az Azure-ban megközelíti a vész-helyreállítási áttekintése
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: f00341b06b8092c798d6260317226190cbace66b
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646556"
---
# <a name="failure-and-disaster-recovery-for-azure-applications"></a><span data-ttu-id="cecd5-103">Hiba és a katasztrófa utáni helyreállítás az Azure-alkalmazásokhoz</span><span class="sxs-lookup"><span data-stu-id="cecd5-103">Failure and disaster recovery for Azure applications</span></span>

<span data-ttu-id="cecd5-104">*Vész-helyreállítási* az alkalmazás funkciói egy végzetes elvesztése nyomán visszaállítása során a rendszer.</span><span class="sxs-lookup"><span data-stu-id="cecd5-104">*Disaster recovery* is the process of restoring application functionality in the wake of a catastrophic loss.</span></span>

<span data-ttu-id="cecd5-105">A korlátozott funkciókkal szintű katasztrófa során egy üzleti döntés, amely, egyik alkalmazásból a következőre változik.</span><span class="sxs-lookup"><span data-stu-id="cecd5-105">Your tolerance for reduced functionality during a disaster is a business decision that varies from one application to the next.</span></span> <span data-ttu-id="cecd5-106">Ez lehet, hogy egyes alkalmazások teljesen nem érhető el, vagy részlegesen elérhetők az korlátozott funkciókkal elfogadható, vagy feldolgozási egy ideig késik.</span><span class="sxs-lookup"><span data-stu-id="cecd5-106">It might be acceptable for some applications to be completely unavailable or to be partially available with reduced functionality or delayed processing for a period of time.</span></span> <span data-ttu-id="cecd5-107">Más alkalmazások bármilyen csökkentett szolgáltatáskészletű nem fogadható el.</span><span class="sxs-lookup"><span data-stu-id="cecd5-107">For other applications, any reduced functionality is unacceptable.</span></span>

## <a name="disaster-recovery-plan"></a><span data-ttu-id="cecd5-108">Vész-helyreállítási terv</span><span class="sxs-lookup"><span data-stu-id="cecd5-108">Disaster recovery plan</span></span>

<span data-ttu-id="cecd5-109">Először hozzon létre egy helyreállítási tervbe.</span><span class="sxs-lookup"><span data-stu-id="cecd5-109">Start by creating a recovery plan.</span></span> <span data-ttu-id="cecd5-110">A terv akkor tekinthető után azt teljes körűen tesztelve lett.</span><span class="sxs-lookup"><span data-stu-id="cecd5-110">The plan is considered complete after it has been fully tested.</span></span> <span data-ttu-id="cecd5-111">A személyeket, folyamatokat és szolgáltatásokat biztosít az ügyfelek számára definiált szolgáltatásiszint-szerződés (SLA) a visszaállításához szükséges alkalmazások közé tartozik.</span><span class="sxs-lookup"><span data-stu-id="cecd5-111">Include the people, processes, and applications needed to restore functionality within the service-level agreement (SLA) you've defined for your customers.</span></span>

<span data-ttu-id="cecd5-112">Vegye figyelembe az alábbi javaslatokat, amikor létrehozása és tesztelése a vész-helyreállítási terv:</span><span class="sxs-lookup"><span data-stu-id="cecd5-112">Consider the following suggestions when creating and testing your disaster recovery plan:</span></span>

- <span data-ttu-id="cecd5-113">A csomag tartalmazzák a folyamat ügyfélszolgálaton és a problémák továbbítása a problémákat.</span><span class="sxs-lookup"><span data-stu-id="cecd5-113">In your plan, include the process for contacting support and for escalating issues.</span></span> <span data-ttu-id="cecd5-114">Ezt az információt, elkerülheti a hosszan tartó, először nyerhető ki a helyreállítási folyamat segítségével.</span><span class="sxs-lookup"><span data-stu-id="cecd5-114">This information will help to avoid prolonged downtime as you work out the recovery process for the first time.</span></span>
- <span data-ttu-id="cecd5-115">Értékelje az alkalmazáshibák üzletmenetre gyakorolt hatását.</span><span class="sxs-lookup"><span data-stu-id="cecd5-115">Evaluate the business impact of application failures.</span></span>
- <span data-ttu-id="cecd5-116">Válassza ki a régiók közötti recovery architektúrájáról, alapvető fontosságú alkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="cecd5-116">Choose a cross-region recovery architecture for mission-critical applications.</span></span>
- <span data-ttu-id="cecd5-117">A konkrét tulajdonost, a vész-helyreállítási terv, beleértve az automatizálási és tesztelési azonosításához.</span><span class="sxs-lookup"><span data-stu-id="cecd5-117">Identify a specific owner of the disaster recovery plan, including automation and testing.</span></span>
- <span data-ttu-id="cecd5-118">A dokumentum a folyamat, különösen összes manuális lépést.</span><span class="sxs-lookup"><span data-stu-id="cecd5-118">Document the process, especially any manual steps.</span></span>
- <span data-ttu-id="cecd5-119">A folyamat a lehető legnagyobb mértékben automatizálja.</span><span class="sxs-lookup"><span data-stu-id="cecd5-119">Automate the process as much as possible.</span></span>
- <span data-ttu-id="cecd5-120">Rendszeresen meghatározzák az összes hivatkozást és a tranzakciós adatok, és a teszt biztonsági mentési visszaállítani egy biztonsági mentési stratégia.</span><span class="sxs-lookup"><span data-stu-id="cecd5-120">Establish a backup strategy for all reference and transactional data, and test backup restoration regularly.</span></span>
- <span data-ttu-id="cecd5-121">Riasztásokat állíthat be az Azure-szolgáltatást az alkalmazás által felhasznált verem.</span><span class="sxs-lookup"><span data-stu-id="cecd5-121">Set up alerts for the stack of the Azure services consumed by your application.</span></span>
- <span data-ttu-id="cecd5-122">A terv kezelői létszámmal betanításához.</span><span class="sxs-lookup"><span data-stu-id="cecd5-122">Train operations staff to execute the plan.</span></span>
- <span data-ttu-id="cecd5-123">Hajtsa végre a rendszeres vészhelyreállítási szimulációk miként ellenőrzi és javítja a tervet.</span><span class="sxs-lookup"><span data-stu-id="cecd5-123">Perform regular disaster simulations to validate and improve the plan.</span></span>

<span data-ttu-id="cecd5-124">Ha használ [Azure Site Recovery](/azure/site-recovery/) replikálni a virtuális gépek (VM), a teljes alkalmazás feladatátvételét teljesen automatizált helyreállítási terv létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="cecd5-124">If you're using [Azure Site Recovery](/azure/site-recovery/) to replicate virtual machines (VMs), create a fully automated recovery plan to fail over the entire application.</span></span>

## <a name="manual-responses"></a><span data-ttu-id="cecd5-125">Manuális válaszok</span><span class="sxs-lookup"><span data-stu-id="cecd5-125">Manual responses</span></span>

<span data-ttu-id="cecd5-126">Automation ideális megoldást biztosít, néhány vész-helyreállítási stratégiát manuális válaszok igényelnek.</span><span class="sxs-lookup"><span data-stu-id="cecd5-126">Although automation is ideal, some strategies for disaster recovery require manual responses.</span></span>

### <a name="alerts"></a><span data-ttu-id="cecd5-127">Riasztások</span><span class="sxs-lookup"><span data-stu-id="cecd5-127">Alerts</span></span>

<span data-ttu-id="cecd5-128">Kísérje figyelemmel az alkalmazása olyan figyelmeztető jeleit, amelyek proaktív beavatkozást igényelhetnek.</span><span class="sxs-lookup"><span data-stu-id="cecd5-128">Monitor your application for warning signs that may require proactive intervention.</span></span> <span data-ttu-id="cecd5-129">Például ha az Azure SQL Database vagy Azure Cosmos DB rendszeresen szabályozza az alkalmazását, szüksége lehet az adatbázis-kapacitását növelni, vagy a lekérdezések optimalizálásához.</span><span class="sxs-lookup"><span data-stu-id="cecd5-129">For example, if Azure SQL Database or Azure Cosmos DB consistently throttles your application, you might need to increase your database capacity or optimize your queries.</span></span> <span data-ttu-id="cecd5-130">Annak ellenére, hogy az alkalmazás átlátható módon kezelni a szabályozási hibákat, a telemetria kell továbbra is riasztást küld, így nyomon lehet követni.</span><span class="sxs-lookup"><span data-stu-id="cecd5-130">Even though the application might handle the throttling errors transparently, your telemetry should still raise an alert so that you can follow up.</span></span>

<span data-ttu-id="cecd5-131">A szolgáltatási korlátai és kvóták küszöbértékeit javasoljuk, hogy riasztások konfigurálása az Azure-erőforrások metrikák és diagnosztikai naplókat.</span><span class="sxs-lookup"><span data-stu-id="cecd5-131">For service limits and quota thresholds, we recommend configuring alerts on Azure resources metrics and diagnostics logs.</span></span> <span data-ttu-id="cecd5-132">Ha lehetséges, állítsa be a riasztások a metrikák, amelyek kisebb késést biztosít, mint a diagnosztikai naplók.</span><span class="sxs-lookup"><span data-stu-id="cecd5-132">When possible, set up alerts on metrics, which are lower latency than diagnostics logs.</span></span>

<span data-ttu-id="cecd5-133">Keresztül [Resource Health](/azure/service-health/resource-health-checks-resource-types), az Azure biztosít néhány beépített állapot, amely segít diagnosztizálni a szabályozási problémák az Azure szolgáltatás állapotát ellenőrzi.</span><span class="sxs-lookup"><span data-stu-id="cecd5-133">Through [Resource Health](/azure/service-health/resource-health-checks-resource-types), Azure provides some built-in health status checks that can help you diagnose Azure service throttling issues.</span></span>

### <a name="failover"></a><span data-ttu-id="cecd5-134">Feladatátvétel</span><span class="sxs-lookup"><span data-stu-id="cecd5-134">Failover</span></span>

<span data-ttu-id="cecd5-135">A vész-helyreállítási stratégiát minden egyes Azure-alkalmazás és az Azure-szolgáltatások konfigurálása.</span><span class="sxs-lookup"><span data-stu-id="cecd5-135">Configure a disaster recovery strategy for each Azure application and its Azure services.</span></span> <span data-ttu-id="cecd5-136">Az SLA-k minden egyes alkalmazásokhoz szükség lehet, hogy megoldástól elfogadható központi telepítési stratégiát vész-helyreállítási támogatásához.</span><span class="sxs-lookup"><span data-stu-id="cecd5-136">Acceptable deployment strategies to support disaster recovery may vary based on the SLAs required for all components of each application.</span></span>  

<span data-ttu-id="cecd5-137">Az Azure biztosít sok Azure-szolgáltatások lehetővé teszik a manuális feladatátvételt, például a különböző szolgáltatásokat [redis cache geo-replikák](/azure/azure-cache-for-redis/cache-how-to-geo-replication), vagy az automatikus feladatátvételt, például [SQL automatikus feladatátvételi csoportok](/azure/sql-database/sql-database-auto-failover-group).</span><span class="sxs-lookup"><span data-stu-id="cecd5-137">Azure provides different features within many Azure services to allow for manual failover, such as [redis cache geo-replicas](/azure/azure-cache-for-redis/cache-how-to-geo-replication), or for automated failover, such as [SQL auto-failover groups](/azure/sql-database/sql-database-auto-failover-group).</span></span> <span data-ttu-id="cecd5-138">Példa:</span><span class="sxs-lookup"><span data-stu-id="cecd5-138">For example:</span></span>

- <span data-ttu-id="cecd5-139">Az alkalmazás, amely főként használja a virtuális gépek használhatja az Azure Site Recovery a web- és logikai rétege számára.</span><span class="sxs-lookup"><span data-stu-id="cecd5-139">For an application that mainly uses virtual machines, you can use Azure Site Recovery for the web and logic tiers.</span></span> <span data-ttu-id="cecd5-140">További információkért lásd: [Azure-bA vész-helyreállítási architektúra](/azure/site-recovery/azure-to-azure-architecture).</span><span class="sxs-lookup"><span data-stu-id="cecd5-140">For more information, see [Azure to Azure disaster recovery architecture](/azure/site-recovery/azure-to-azure-architecture).</span></span> <span data-ttu-id="cecd5-141">Az SQL Server virtuális gépeken, használjon [SQL Server Always On rendelkezésre állási csoportok](/azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-availability-group-dr).</span><span class="sxs-lookup"><span data-stu-id="cecd5-141">For SQL Server on VMs, use [SQL Server Always On availability groups](/azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-availability-group-dr).</span></span>
- <span data-ttu-id="cecd5-142">Az App Service-ben és az Azure SQL Database-t használó alkalmazás használhat egy kisebb szintű App Service-csomag konfigurálása a másodlagos régióban, amely elvégzi az automatikus skálázást egy feladatátvétel esetén.</span><span class="sxs-lookup"><span data-stu-id="cecd5-142">For an application that uses App Service and Azure SQL Database, you can use a smaller tier App Service plan configured in the secondary region, which autoscales when a failover occurs.</span></span> <span data-ttu-id="cecd5-143">Feladatátvételi csoportok használata az adatbázisszint számára.</span><span class="sxs-lookup"><span data-stu-id="cecd5-143">Use failover groups for the database tier.</span></span>

<span data-ttu-id="cecd5-144">Mindkét esetben egy [Azure Traffic Manager](/azure/traffic-manager/traffic-manager-overview) profilt biztosít az automatikus feladatátvételi régióban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-144">In either scenario, an [Azure Traffic Manager](/azure/traffic-manager/traffic-manager-overview) profile provides for the automated failover across regions.</span></span> <span data-ttu-id="cecd5-145">[Terheléselosztók](/azure/load-balancer/load-balancer-overview) vagy [az application Gateway átjárók](/azure/application-gateway/overview) kell beállítani a másodlagos régió támogatja a feladatátvételt követően gyorsabb rendelkezésre állást.</span><span class="sxs-lookup"><span data-stu-id="cecd5-145">[Load balancers](/azure/load-balancer/load-balancer-overview) or [application gateways](/azure/application-gateway/overview) should be set up in the secondary region to support faster availability upon failover.</span></span>

### <a name="operational-readiness-testing"></a><span data-ttu-id="cecd5-146">Működési készenlét tesztelése</span><span class="sxs-lookup"><span data-stu-id="cecd5-146">Operational readiness testing</span></span>

<span data-ttu-id="cecd5-147">Tesztelje a működési készenlétet hajtsa végre, a másodlagos régióba történő feladatátvételt és feladat-visszavétel az elsődleges régióba.</span><span class="sxs-lookup"><span data-stu-id="cecd5-147">Perform an operational readiness test for failover to the secondary region and for failback to the primary region.</span></span> <span data-ttu-id="cecd5-148">Sok Azure-szolgáltatás támogatja a manuális feladatátvételt vagy a feladatátvételi teszteket vészhelyreállítási próbák végrehajtása céljából.</span><span class="sxs-lookup"><span data-stu-id="cecd5-148">Many Azure services support manual failover or test failover for disaster recovery drills.</span></span> <span data-ttu-id="cecd5-149">Azt is megteheti szimulálhatja kimaradás leállítása, vagy Azure-szolgáltatás eltávolításával.</span><span class="sxs-lookup"><span data-stu-id="cecd5-149">Alternatively, you can simulate an outage by shutting down or removing Azure services.</span></span>

## <a name="application-failure"></a><span data-ttu-id="cecd5-150">Alkalmazáshiba</span><span class="sxs-lookup"><span data-stu-id="cecd5-150">Application failure</span></span>

<span data-ttu-id="cecd5-151">Alkalmazáshibák vagy a helyreállítható, vagy a következő fájlnál is.</span><span class="sxs-lookup"><span data-stu-id="cecd5-151">Application failures are either recoverable or nonrecoverable.</span></span> <span data-ttu-id="cecd5-152">Csökkentheti a Helyrehozható hiba, de a következő fájlnál hibák tartalomtérkép érhető el az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="cecd5-152">You can mitigate a recoverable error, but nonrecoverable errors will bring down the application.</span></span>

- <span data-ttu-id="cecd5-153">Bizonyos hibák automatikusan hibák kezeléséhez, és más műveleteket, átlátható módon lehet megoldani.</span><span class="sxs-lookup"><span data-stu-id="cecd5-153">Some failures can be addressed transparently by handling faults automatically and taking alternate actions.</span></span> <span data-ttu-id="cecd5-154">Például a Traffic Manager automatikusan kezeli a gazdagép virtuális gép a mögöttes hardver vagy operációs rendszer szoftvert eredő hibák.</span><span class="sxs-lookup"><span data-stu-id="cecd5-154">For example, Traffic Manager automatically handles failures that result from the underlying hardware or operating system software in the host virtual machine.</span></span>
- <span data-ttu-id="cecd5-155">Bizonyos hibák esetén az alkalmazás továbbra is korlátozott funkciókkal rendelkező felhasználói kérelmek kezelését.</span><span class="sxs-lookup"><span data-stu-id="cecd5-155">With some errors, the application can continue handling user requests with reduced functionality.</span></span>
- <span data-ttu-id="cecd5-156">Súlyosabb szolgáltatáskimaradás lehet, hogy jelennek meg az alkalmazás nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="cecd5-156">More severe service disruptions might render the application unavailable.</span></span>

<span data-ttu-id="cecd5-157">Egy jól megtervezett rendszer elkülöníti a szolgáltatási szintű feladatokról &mdash; tervezési időben, és futásidőben.</span><span class="sxs-lookup"><span data-stu-id="cecd5-157">A well-designed system separates responsibilities at the service level &mdash; at design time and at runtime.</span></span> <span data-ttu-id="cecd5-158">Ez a fajta elkülönítés megakadályozza, hogy egy függő szolgáltatáskimaradás lép fel, a teljes alkalmazás leáll.</span><span class="sxs-lookup"><span data-stu-id="cecd5-158">This separation prevents a dependent service disruption from bringing down the entire application.</span></span> <span data-ttu-id="cecd5-159">Vegyük példaként a következő modulokat a kereskedelmi webalkalmazás:</span><span class="sxs-lookup"><span data-stu-id="cecd5-159">For example, consider a web commerce application with the following modules:</span></span>

![A LEGÚJABB HIVATKOZÁS HOZZÁADÁSA](./_images/disaster-recovery.png)

<span data-ttu-id="cecd5-161">Ha az adatbázis üzemeltetéséhez a rendelések leáll, a rendelések feldolgozása szolgáltatás értékesítési tranzakció nem tudja feldolgozni.</span><span class="sxs-lookup"><span data-stu-id="cecd5-161">If the database for hosting orders goes down, the Order Processing service can't process sales transactions.</span></span> <span data-ttu-id="cecd5-162">Attól függően, az architektúra nem lehetséges a rendelés benyújtása és a rendelések feldolgozása szolgáltatások továbbra is érdemes lehet.</span><span class="sxs-lookup"><span data-stu-id="cecd5-162">Depending on the architecture, it might be impossible for the Order Submission and Order Processing services to continue.</span></span> <span data-ttu-id="cecd5-163">Ha viszont termék adata egy másik helyen található, a termékkatalógus, továbbra is elérhető, bár előfordulhat, hogy az alkalmazás egyéb részei nem használhatók.</span><span class="sxs-lookup"><span data-stu-id="cecd5-163">However, if product data is stored in a different location, the Product Catalog is still available, even though other parts of the application might be unavailable.</span></span>

<span data-ttu-id="cecd5-164">Van arra, hogy határozza meg, hogyan az alkalmazás fogja tájékoztatni a felhasználókat olyan átmeneti probléma, és hozhat létre a megfelelő értesítéseket a rendszer.</span><span class="sxs-lookup"><span data-stu-id="cecd5-164">It's up to you to determine how the application will inform users of any temporary problems and to build appropriate notifications into the system.</span></span> <span data-ttu-id="cecd5-165">Az előző példában az alkalmazás megtekintése a termékek és a egy bevásárlókosárhoz hozzáadását lehetővé teheti.</span><span class="sxs-lookup"><span data-stu-id="cecd5-165">In the previous example, the application might allow for viewing products and for adding them to a shopping cart.</span></span> <span data-ttu-id="cecd5-166">Azonban amikor az ügyfél megpróbál e vásárolni valamit, az alkalmazás értesítenie kell őket, hogy a rendelési funkciók átmenetileg nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="cecd5-166">However, when the customer attempts to make a purchase, the application should notify them that the ordering functionality is temporarily unavailable.</span></span> <span data-ttu-id="cecd5-167">Bár az ügyfél nem ideális, ez a módszer megakadályozza, hogy egy alkalmazás kiterjedő szolgáltatáskimaradás.</span><span class="sxs-lookup"><span data-stu-id="cecd5-167">Although not ideal for the customer, this approach prevents an application-wide service disruption.</span></span>

## <a name="data-corruption-and-restoration"></a><span data-ttu-id="cecd5-168">Az adatok sérülésével és visszaállítás</span><span class="sxs-lookup"><span data-stu-id="cecd5-168">Data corruption and restoration</span></span>

<span data-ttu-id="cecd5-169">Ha egy adattár meghibásodik, előfordulhat, adatinkonzisztencia mikor válik elérhetővé, különösen akkor, ha a rendszer replikálta az adatokat.</span><span class="sxs-lookup"><span data-stu-id="cecd5-169">If a data store fails, there might be data inconsistencies when it becomes available again, especially if the data was replicated.</span></span> <span data-ttu-id="cecd5-170">A helyreállítási időre vonatkozó célkitűzés (RTO) és a helyreállítási pont időkorlát (RPO) a replikált adatok készleteinek segít előre jelezni az adatveszteség mennyisége ismertetése.</span><span class="sxs-lookup"><span data-stu-id="cecd5-170">Understanding the recovery time objective (RTO) and recovery point objective (RPO) of replicated data stores can help you predict the amount of data loss.</span></span>

<span data-ttu-id="cecd5-171">Szeretné megtudni, hogy manuálisan vagy a Microsoft elindult-e a a régiók közti feladatátvétel, tekintse át az Azure-szolgáltatás SLA-k.</span><span class="sxs-lookup"><span data-stu-id="cecd5-171">To understand whether the cross-regional failover is started manually or by Microsoft, review the Azure service SLAs.</span></span> <span data-ttu-id="cecd5-172">Nincs SLA-k szolgáltatások régiók közti feladatátvétel, a Microsoft általában úgy dönt, hogy ha a feladatátvételt, és általában priorizálja az elsődleges régióban adatok helyreállítását.</span><span class="sxs-lookup"><span data-stu-id="cecd5-172">For services with no SLAs for cross-regional failover, Microsoft typically decides when to fail over and usually prioritizes recovery of data in the primary region.</span></span> <span data-ttu-id="cecd5-173">Ha az elsődleges régióban lévő adatok helyreállíthatatlanná sikertelennek, Microsoft átadja a feladatokat a másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="cecd5-173">If data in the primary region is deemed unrecoverable, Microsoft fails over to the secondary region.</span></span>

### <a name="restoring-data-from-backups"></a><span data-ttu-id="cecd5-174">Adatok biztonsági másolatokból való visszaállítással</span><span class="sxs-lookup"><span data-stu-id="cecd5-174">Restoring data from backups</span></span>

<span data-ttu-id="cecd5-175">Biztonsági másolatok megóvja a véletlen törlés és adatok sérülése miatt az alkalmazás részét képező elvesztése.</span><span class="sxs-lookup"><span data-stu-id="cecd5-175">Backups protect you from losing a component of the application because of accidental deletion or data corruption.</span></span> <span data-ttu-id="cecd5-176">Az összetevő egy korábbi időpontra, amelyek használatával állítsa vissza a egy működési verziója megőrizni azokat.</span><span class="sxs-lookup"><span data-stu-id="cecd5-176">They preserve a functional version of the component from an earlier time, which you can use to restore it.</span></span>

<span data-ttu-id="cecd5-177">Vészhelyreállítási stratégiák nem helyettesíti a biztonsági mentések, de az alkalmazásadatok rendszeres biztonsági mentést támogatja az egyes vész-helyreállítási helyzetekben.</span><span class="sxs-lookup"><span data-stu-id="cecd5-177">Disaster recovery strategies are not a replacement for backups, but regular backups of application data support some disaster recovery scenarios.</span></span> <span data-ttu-id="cecd5-178">A biztonsági mentési tár választási lehetőségek vész-helyreállítási stratégiát kell alapulnia.</span><span class="sxs-lookup"><span data-stu-id="cecd5-178">Your backup storage choices should be based on your disaster recovery strategy.</span></span>

<span data-ttu-id="cecd5-179">A biztonsági mentési folyamat futtatásának gyakoriságát határozza meg a helyreállítási Időkorlát.</span><span class="sxs-lookup"><span data-stu-id="cecd5-179">The frequency of running the backup process determines your RPO.</span></span> <span data-ttu-id="cecd5-180">Például ha katasztrófa történik a biztonsági mentés előtt két perc, óránként végez biztonsági mentéseket, 58 percnyi adat elveszti.</span><span class="sxs-lookup"><span data-stu-id="cecd5-180">For example, if you perform hourly backups and a disaster occurs two minutes before the backup, you will lose 58 minutes of data.</span></span> <span data-ttu-id="cecd5-181">A vész-helyreállítási terv tartalmaznia kell, hogyan foglalkozni fog elveszett adatok.</span><span class="sxs-lookup"><span data-stu-id="cecd5-181">Your disaster recovery plan should include how you will address lost data.</span></span>

<span data-ttu-id="cecd5-182">Szokás a referenciaadatok egy másik tárolóban egy adattárban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-182">It's common for data in one data store to reference data in another store.</span></span> <span data-ttu-id="cecd5-183">Vegyük példaként SQL-adatbázis, az oszlop az Azure Storage-blob mutat.</span><span class="sxs-lookup"><span data-stu-id="cecd5-183">For example, consider a SQL Database with a column that links to a blob in Azure Storage.</span></span> <span data-ttu-id="cecd5-184">Biztonsági mentések nem egyszerre következnek be, ha az adatbázis lehet egy blobba, nem biztonsági másolatot a hiba előtt mutató.</span><span class="sxs-lookup"><span data-stu-id="cecd5-184">If backups don't happen simultaneously, the database might have a pointer to a blob that wasn't backed up before the failure.</span></span> <span data-ttu-id="cecd5-185">Az alkalmazás vagy a vész-helyreállítási terv musí implementovat rozhraní folyamatok kezeléséhez a inkonzisztenciát helyreállítás után.</span><span class="sxs-lookup"><span data-stu-id="cecd5-185">The application or the disaster recovery plan must implement processes to handle this inconsistency after a recovery.</span></span>

> [!NOTE]
> <span data-ttu-id="cecd5-186">Egyes forgatókönyvekben, például a virtuális gépek biztonsági mentése segítségével, amely [Azure Backup](/azure/backup/backup-azure-vms-first-look-arm), visszaállíthatja az csak egy biztonsági másolatból ugyanabban a régióban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-186">In some scenarios, such as that of VMs backed up using [Azure Backup](/azure/backup/backup-azure-vms-first-look-arm), you can restore only from a backup in the same region.</span></span> <span data-ttu-id="cecd5-187">Más Azure-szolgáltatások, például [Azure Cache redis](/azure/azure-cache-for-redis/cache-how-to-geo-replication), adja meg a georeplikált biztonsági mentéseit támogatják, segítségével helyreállítását végző szolgáltatásokat régiók között elosztva.</span><span class="sxs-lookup"><span data-stu-id="cecd5-187">Other Azure services, such as [Azure Cache for Redis](/azure/azure-cache-for-redis/cache-how-to-geo-replication), provide geo-replicated backups, which you can use to restore services across regions.</span></span>

### <a name="azure-storage-and-azure-sql-database"></a><span data-ttu-id="cecd5-188">Az Azure Storage és az Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="cecd5-188">Azure Storage and Azure SQL Database</span></span>

<span data-ttu-id="cecd5-189">Az Azure automatikusan tárolja az Azure Storage és SQL Database adatok különböző tartalék tartományban belül háromszor ugyanabban a régióban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-189">Azure automatically stores Azure Storage and SQL Database data three times within different fault domains in the same region.</span></span> <span data-ttu-id="cecd5-190">Ha georeplikációt használ, az adatok további három alkalommal tárolódik egy másik régióban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-190">If you use geo-replication, the data is stored three additional times in a different region.</span></span> <span data-ttu-id="cecd5-191">Azonban ha az adatok sérült vagy törölni az elsődleges verziót (például felhasználói hiba) miatt, a módosításokat replikálja a többi példányt.</span><span class="sxs-lookup"><span data-stu-id="cecd5-191">However, if the data is corrupted or deleted in the primary copy (for example, because of user error), the changes replicate to the other copies.</span></span>

<span data-ttu-id="cecd5-192">A lehetséges adatsérülés vagy törlés kezelésére két lehetősége van:</span><span class="sxs-lookup"><span data-stu-id="cecd5-192">You have two options for managing potential data corruption or deletion:</span></span>

- <span data-ttu-id="cecd5-193">**Hozzon létre egy egyéni biztonsági mentési stratégia.**</span><span class="sxs-lookup"><span data-stu-id="cecd5-193">**Create a custom backup strategy.**</span></span> <span data-ttu-id="cecd5-194">A biztonsági másolatok tárolása Azure-ban vagy a helyszínen, attól függően, az üzleti követelmények és a szabályozási előírásoknak.</span><span class="sxs-lookup"><span data-stu-id="cecd5-194">You can store your backups in Azure or on-premises, depending on your business requirements and governance regulations.</span></span>
- <span data-ttu-id="cecd5-195">**Használja a-időponthoz visszaállítási lehetőséget** SQL-adatbázis helyreállításához.</span><span class="sxs-lookup"><span data-stu-id="cecd5-195">**Use the point-in-time restore option** to recover a SQL Database.</span></span>

#### <a name="azure-storage-recovery"></a><span data-ttu-id="cecd5-196">Az Azure Storage-helyreállítás</span><span class="sxs-lookup"><span data-stu-id="cecd5-196">Azure Storage recovery</span></span>

<span data-ttu-id="cecd5-197">Egy egyéni biztonsági mentési folyamat fejlesztés az Azure Storage, vagy használja számos külső biztonsági mentési eszközök egyikét.</span><span class="sxs-lookup"><span data-stu-id="cecd5-197">You can develop a custom backup process for Azure Storage or use one of many third-party backup tools.</span></span>

<span data-ttu-id="cecd5-198">Az Azure Storage biztosítja az adatok rugalmasságát biztosítja az automatikus replikációval, de ez nem akadályozza alkalmazáskód vagy a felhasználók károsíthassák az adatokat.</span><span class="sxs-lookup"><span data-stu-id="cecd5-198">Azure Storage provides data resiliency through automated replicas, but it doesn't prevent application code or users from corrupting data.</span></span> <span data-ttu-id="cecd5-199">Adatokat pontosságú alkalmazás vagy felhasználó hiba után szükséges fejlett technikák, például az adatok másolásának auditálási naplóba kerülnek a másodlagos tárolóhelyre.</span><span class="sxs-lookup"><span data-stu-id="cecd5-199">Maintaining data fidelity after application or user error requires more advanced techniques, such as copying the data to a secondary storage location with an audit log.</span></span> <span data-ttu-id="cecd5-200">Több lehetősége van:</span><span class="sxs-lookup"><span data-stu-id="cecd5-200">You have several options:</span></span>

- [<span data-ttu-id="cecd5-201">**Blokkblobok.**</span><span class="sxs-lookup"><span data-stu-id="cecd5-201">**Block blobs.**</span></span>](/rest/api/storageservices/understanding-block-blobs--append-blobs--and-page-blobs) <span data-ttu-id="cecd5-202">Minden egyes blokkblob időponthoz pillanatkép létrehozása.</span><span class="sxs-lookup"><span data-stu-id="cecd5-202">Create a point-in-time snapshot of each block blob.</span></span> <span data-ttu-id="cecd5-203">Minden pillanatkép díjkötelesek csak óta a korábbi pillanatkép-állapotot a különbségek a blobon belüli tárolásához szükséges tárhelyet.</span><span class="sxs-lookup"><span data-stu-id="cecd5-203">For each snapshot, you are charged only for the storage required to store the differences within the blob since the previous snapshot state.</span></span> <span data-ttu-id="cecd5-204">A pillanatképek függnek az eredeti blob, ezért azt javasoljuk, másolás és a egy másik blob vagy akár egy másik tárfiókba.</span><span class="sxs-lookup"><span data-stu-id="cecd5-204">The snapshots are dependent on the original blob, so we recommend copying to another blob or even to another storage account.</span></span> <span data-ttu-id="cecd5-205">Ez a megközelítés biztosítja, hogy biztonsági mentési adatok véletlen törlés elleni védelme.</span><span class="sxs-lookup"><span data-stu-id="cecd5-205">This approach ensures that backup data is protected against accidental deletion.</span></span> <span data-ttu-id="cecd5-206">Használat [AzCopy](/azure/storage/common/storage-use-azcopy) vagy [Azure PowerShell-lel](/azure/storage/common/storage-powershell-guide-full) a blobok másolása egy másik tárfiókba.</span><span class="sxs-lookup"><span data-stu-id="cecd5-206">Use [AzCopy](/azure/storage/common/storage-use-azcopy) or [Azure PowerShell](/azure/storage/common/storage-powershell-guide-full) to copy the blobs to another storage account.</span></span>

    <span data-ttu-id="cecd5-207">További információkért lásd: [létrehozása egy pillanatképet egy Blobról](/rest/api/storageservices/creating-a-snapshot-of-a-blob).</span><span class="sxs-lookup"><span data-stu-id="cecd5-207">For more information, see [Creating a Snapshot of a Blob](/rest/api/storageservices/creating-a-snapshot-of-a-blob).</span></span>

- [<span data-ttu-id="cecd5-208">**Azure Files.**</span><span class="sxs-lookup"><span data-stu-id="cecd5-208">**Azure Files.**</span></span>](/azure/storage/files/storage-files-introduction) <span data-ttu-id="cecd5-209">Használat [megosztási pillanatképek](/azure/storage/files/storage-snapshots-files), az AzCopy, vagy a PowerShell a fájlok másolása egy másik tárfiókba.</span><span class="sxs-lookup"><span data-stu-id="cecd5-209">Use [share snapshots](/azure/storage/files/storage-snapshots-files), AzCopy, or PowerShell to copy your files to another storage account.</span></span>
- [<span data-ttu-id="cecd5-210">**Az Azure Table storage.**</span><span class="sxs-lookup"><span data-stu-id="cecd5-210">**Azure Table storage.**</span></span>](/azure/storage/tables/table-storage-overview) <span data-ttu-id="cecd5-211">Az AzCopy segítségével egy másik régióban egy másik tárfiókba történő táblák adatainak exportálása.</span><span class="sxs-lookup"><span data-stu-id="cecd5-211">Use AzCopy to export the table data into another storage account in another region.</span></span>

#### <a name="sql-database-recovery"></a><span data-ttu-id="cecd5-212">SQL-adatbázis-helyreállítás</span><span class="sxs-lookup"><span data-stu-id="cecd5-212">SQL Database recovery</span></span>

<span data-ttu-id="cecd5-213">Az üzleti szembeni az adatvesztést, SQL Database automatikusan végrehajtja az adatbázis teljes biztonsági mentését hetente, a különbözeti adatbázis biztonsági mentését óránként, és a tranzakciós biztonsági mentések minden 5 10 perc.</span><span class="sxs-lookup"><span data-stu-id="cecd5-213">To protect your business from data loss, SQL Database automatically performs a combination of full database backups weekly, differential database backups hourly, and transaction log backups every 5 to 10 minutes.</span></span> <span data-ttu-id="cecd5-214">A Basic, Standard és prémium szintű SQL Database szinten időponthoz visszaállítás, visszaállítás adatbázist használnak egy korábbi időpontra.</span><span class="sxs-lookup"><span data-stu-id="cecd5-214">For the Basic, Standard, and Premium SQL Database tiers, use point-in-time restore to restore a database to an earlier time.</span></span> <span data-ttu-id="cecd5-215">További információ a következő cikkekben talál:</span><span class="sxs-lookup"><span data-stu-id="cecd5-215">See the following articles for more information:</span></span>

- [<span data-ttu-id="cecd5-216">Automatikus biztonsági adatbázismentés használatával Azure SQL-adatbázis helyreállítása</span><span class="sxs-lookup"><span data-stu-id="cecd5-216">Recover an Azure SQL database using automated database backups</span></span>](/azure/sql-database/sql-database-recovery-using-backups)
- [<span data-ttu-id="cecd5-217">Az Azure SQL Database üzletmenet-folytonossági funkcióinak áttekintése</span><span class="sxs-lookup"><span data-stu-id="cecd5-217">Overview of business continuity with Azure SQL Database</span></span>](/azure/sql-database/sql-database-business-continuity)

<span data-ttu-id="cecd5-218">Egy másik lehetőség, az aktív georeplikáció által használandó SQL-adatbázis, amely az adatbázis-módosítások automatikusan replikálja a másodlagos adatbázisok azonos vagy eltérő Azure-régióban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-218">Another option is to use active geo-replication for SQL Database, which automatically replicates database changes to secondary databases in the same or different Azure region.</span></span> <span data-ttu-id="cecd5-219">További információkért lásd: [létrehozása és az aktív georeplikáció használatával](/azure/sql-database/sql-database-active-geo-replication).</span><span class="sxs-lookup"><span data-stu-id="cecd5-219">For more information, see [Creating and using active geo-replication](/azure/sql-database/sql-database-active-geo-replication).</span></span>

<span data-ttu-id="cecd5-220">Is több manuális módszer használata a biztonsági mentés és visszaállítás:</span><span class="sxs-lookup"><span data-stu-id="cecd5-220">You can also use a more manual approach for backup and restore:</span></span>

- <span data-ttu-id="cecd5-221">Használja a **adatbázis-másolat** az adatbázis biztonsági másolatának létrehozása tranzakció-konzisztencia a parancsot.</span><span class="sxs-lookup"><span data-stu-id="cecd5-221">Use the **DATABASE COPY** command to create a backup copy of the database with transactional consistency.</span></span>
- <span data-ttu-id="cecd5-222">Az Azure SQL Database Import/Export Service, exportáló adatbázisok BACPAC fájlok (az adatbázisséma és a társított adatokat tartalmazó tömörített fájlok), az Azure Blob storage-ban tárolt támogató használja.</span><span class="sxs-lookup"><span data-stu-id="cecd5-222">Use the Azure SQL Database Import/Export Service, which supports exporting databases to BACPAC files (compressed files containing your database schema and associated data) that are stored in Azure Blob storage.</span></span> <span data-ttu-id="cecd5-223">Régióra kiterjedő szolgáltatáskimaradás ellen, a BACPAC-fájlok másolása egy másik régióba.</span><span class="sxs-lookup"><span data-stu-id="cecd5-223">To protect against a region-wide service disruption, copy the BACPAC files to an alternate region.</span></span>

### <a name="sql-server-on-vms"></a><span data-ttu-id="cecd5-224">Az SQL Server virtuális gépeken</span><span class="sxs-lookup"><span data-stu-id="cecd5-224">SQL Server on VMs</span></span>

<span data-ttu-id="cecd5-225">A virtuális gépeken futó SQL Server, két lehetősége van: a hagyományos biztonsági mentéseket és a naplóküldésben.</span><span class="sxs-lookup"><span data-stu-id="cecd5-225">For SQL Server running on VMs, you have two options: traditional backups and log shipping.</span></span>

- <span data-ttu-id="cecd5-226">A hagyományos biztonsági másolatokkal időben egy adott időpontra is visszaállíthatók, de a helyreállítási folyamat lassú.</span><span class="sxs-lookup"><span data-stu-id="cecd5-226">With traditional backups, you can restore to a specific point in time, but the recovery process is slow.</span></span> <span data-ttu-id="cecd5-227">A hagyományos biztonsági mentések visszaállítása szükséges, hogy egy kezdeti biztonsági mentés kezdődhet, és ezután alkalmazza az összes növekményes biztonsági mentést.</span><span class="sxs-lookup"><span data-stu-id="cecd5-227">Restoring traditional backups requires that you start with an initial full backup and then apply any incremental backups.</span></span>
- <span data-ttu-id="cecd5-228">Beállíthatja, hogy a napló szállítási munkamenet a Naplók biztonsági másolatainak visszaállítás késleltetése.</span><span class="sxs-lookup"><span data-stu-id="cecd5-228">You can configure a log shipping session to delay the restore of log backups.</span></span> <span data-ttu-id="cecd5-229">Ez lehetővé teszi a hibák az elsődleges replikán végrehajtott ablakot.</span><span class="sxs-lookup"><span data-stu-id="cecd5-229">This provides a window to recover from errors made on the primary replica.</span></span>

### <a name="azure-database-for-mysql-and-azure-database-for-postgresql"></a><span data-ttu-id="cecd5-230">Azure Database for MySQL és az Azure Database for postgresql-hez</span><span class="sxs-lookup"><span data-stu-id="cecd5-230">Azure Database for MySQL and Azure Database for PostgreSQL</span></span>

<span data-ttu-id="cecd5-231">Az Azure Database for MySQL és Azure Database for PostgreSQL az adatbázis-szolgáltatás automatikusan lehetővé teszi a biztonsági mentés öt percenként.</span><span class="sxs-lookup"><span data-stu-id="cecd5-231">In Azure Database for MySQL and Azure Database for PostgreSQL, the database service automatically makes a backup every five minutes.</span></span> <span data-ttu-id="cecd5-232">Ezeket az automatikus biztonsági mentések segítségével visszaállítása a kiszolgáló és a hozzá tartozó adatbázisok egy korábbi időpontra az új kiszolgálóra.</span><span class="sxs-lookup"><span data-stu-id="cecd5-232">You can use these automated backups to restore the server and its databases from an earlier point in time to a new server.</span></span> <span data-ttu-id="cecd5-233">További információkért lásd:</span><span class="sxs-lookup"><span data-stu-id="cecd5-233">For more information, see:</span></span>

- [<span data-ttu-id="cecd5-234">Hogyan biztonsági mentése és visszaállítása egy kiszolgálót az Azure Database for MySQL-hez az Azure portal használatával</span><span class="sxs-lookup"><span data-stu-id="cecd5-234">How to back up and restore a server in Azure Database for MySQL by using the Azure portal</span></span>](/azure/mysql/howto-restore-server-portal)
- [<span data-ttu-id="cecd5-235">Hogyan biztonsági mentése és visszaállítása egy kiszolgálót az Azure Database for postgresql-hez az Azure portal használatával</span><span class="sxs-lookup"><span data-stu-id="cecd5-235">How to back up and restore a server in Azure Database for PostgreSQL using the Azure portal</span></span>](/azure/postgresql/howto-restore-server-portal)

### <a name="azure-cosmos-db"></a><span data-ttu-id="cecd5-236">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="cecd5-236">Azure Cosmos DB</span></span>

<span data-ttu-id="cecd5-237">A cosmos DB rendszeres időközönként automatikusan lehetővé teszi a biztonsági mentés.</span><span class="sxs-lookup"><span data-stu-id="cecd5-237">Cosmos DB automatically makes a backup at regular intervals.</span></span> <span data-ttu-id="cecd5-238">Biztonsági mentés egy másik storage szolgáltatásban tárolódnak, és globálisan replikálva vannak regionális katasztrófák elleni védelem érdekében.</span><span class="sxs-lookup"><span data-stu-id="cecd5-238">Backups are stored separately in another storage service and are replicated globally to protect against regional disasters.</span></span> <span data-ttu-id="cecd5-239">Ha véletlenül törli az adatbázis vagy -gyűjteményben, küldjön egy támogatási jegyet, vagy hívja a legutóbbi automatikus biztonsági mentés visszaállíthatja az adatokat az Azure ügyfélszolgálatától.</span><span class="sxs-lookup"><span data-stu-id="cecd5-239">If you accidentally delete your database or collection, you can file a support ticket or call Azure support to restore the data from the last automatic backup.</span></span> <span data-ttu-id="cecd5-240">További információkért lásd: [Online biztonsági mentés és az Azure Cosmos DB igény szerinti visszaállítási](/azure/cosmos-db/online-backup-and-restore).</span><span class="sxs-lookup"><span data-stu-id="cecd5-240">For more information, see [Online backup and on-demand restore in Azure Cosmos DB](/azure/cosmos-db/online-backup-and-restore).</span></span>

### <a name="azure-virtual-machines"></a><span data-ttu-id="cecd5-241">Azure-alapú virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="cecd5-241">Azure Virtual Machines</span></span>

<span data-ttu-id="cecd5-242">Azure Virtual Machines alkalmazáshibák vagy véletlen törlés elleni védelem, használjon [Azure Backup](/azure/backup/).</span><span class="sxs-lookup"><span data-stu-id="cecd5-242">To protect Azure Virtual Machines from application errors or accidental deletion, use [Azure Backup](/azure/backup/).</span></span> <span data-ttu-id="cecd5-243">A létrehozott biztonsági mentéseket egységesek több Virtuálisgép-lemezek.</span><span class="sxs-lookup"><span data-stu-id="cecd5-243">The created backups are consistent across multiple VM disks.</span></span> <span data-ttu-id="cecd5-244">Emellett az Azure Backup-tárolóban is lehet régiók közötti replikálására, egy regionális elmaradásából helyreállítás támogatásához.</span><span class="sxs-lookup"><span data-stu-id="cecd5-244">In addition, the Azure Backup vault can be replicated across regions to support recovery from a regional loss.</span></span>

## <a name="network-outage"></a><span data-ttu-id="cecd5-245">Hálózati kimaradás</span><span class="sxs-lookup"><span data-stu-id="cecd5-245">Network outage</span></span>

<span data-ttu-id="cecd5-246">Ha az Azure-hálózat részét nem érhető el, nem feltétlenül tudni elérni az alkalmazást vagy adatokat.</span><span class="sxs-lookup"><span data-stu-id="cecd5-246">When parts of the Azure network are inaccessible, you might not be able to access your application or data.</span></span> <span data-ttu-id="cecd5-247">Ebben az esetben javasoljuk, hogy a vész-helyreállítási stratégiát a legtöbb alkalmazást futtathatják az korlátozott funkciókkal tervezése.</span><span class="sxs-lookup"><span data-stu-id="cecd5-247">In this situation, we recommend designing the disaster recovery strategy to run most applications with reduced functionality.</span></span>

<span data-ttu-id="cecd5-248">Ha csökkenti a funkciót nem lehet beállítani, a fennmaradó beállításokat alkalmazás állásidő és a egy másodlagos régióba történő feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="cecd5-248">If reducing functionality isn't an option, the remaining options are application downtime or failover to an alternate region.</span></span>

<span data-ttu-id="cecd5-249">A korlátozott funkciókkal forgatókönyvek esetében:</span><span class="sxs-lookup"><span data-stu-id="cecd5-249">In a reduced functionality scenario:</span></span>

- <span data-ttu-id="cecd5-250">Ha az alkalmazás egy Azure-beli hálózati szolgáltatáskimaradás miatt nem érhető el az adatok, lehet, helyi futtatásához csökkentett az alkalmazás funkciói a gyorsítótárazott adatok használatával.</span><span class="sxs-lookup"><span data-stu-id="cecd5-250">If your application can't access its data because of an Azure network outage, you might be able to run locally with reduced application functionality by using cached data.</span></span>
- <span data-ttu-id="cecd5-251">Előfordulhat, hogy egy másik helyen adatok tárolására, amíg a kapcsolat helyreáll.</span><span class="sxs-lookup"><span data-stu-id="cecd5-251">You might be able to store data in an alternate location until connectivity is restored.</span></span>

## <a name="dependent-service-failure"></a><span data-ttu-id="cecd5-252">Függő szolgáltatások hibája</span><span class="sxs-lookup"><span data-stu-id="cecd5-252">Dependent service failure</span></span>

<span data-ttu-id="cecd5-253">Az egyes függő szolgáltatások tisztában kell lennie egy szolgáltatáskimaradás lép fel, és reagáljon az alkalmazás ugyanúgy következményekkel járhat.</span><span class="sxs-lookup"><span data-stu-id="cecd5-253">For each dependent service, you should understand the implications of a service disruption and the way that the application will respond.</span></span> <span data-ttu-id="cecd5-254">Számos szolgáltatás többek között, amelyek támogatják a rugalmasság és a rendelkezésre állás, így egymástól függetlenül kiértékelése a minden szolgáltatás valószínűleg javítható a vészhelyreállítási tervet.</span><span class="sxs-lookup"><span data-stu-id="cecd5-254">Many services include features that support resiliency and availability, so evaluating each service independently is likely to improve your disaster recovery plan.</span></span> <span data-ttu-id="cecd5-255">Például az Azure Event Hubs támogatja [feladatátvétele](/azure/event-hubs/event-hubs-geo-dr#setup-and-failover-flow) a másodlagos névtérre.</span><span class="sxs-lookup"><span data-stu-id="cecd5-255">For example, Azure Event Hubs supports [failing over](/azure/event-hubs/event-hubs-geo-dr#setup-and-failover-flow) to the secondary namespace.</span></span>

## <a name="region-wide-service-disruptions"></a><span data-ttu-id="cecd5-256">Régióra kiterjedő szolgáltatáskimaradás</span><span class="sxs-lookup"><span data-stu-id="cecd5-256">Region-wide service disruptions</span></span>

<span data-ttu-id="cecd5-257">Számos hiba kezelhető ugyanazon Azure-régióban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-257">Many failures are manageable within the same Azure region.</span></span> <span data-ttu-id="cecd5-258">Azonban a régióra kiterjedő szolgáltatáskimaradás nem valószínű esetben a helyileg redundáns másolatait az adatok nem érhetők el.</span><span class="sxs-lookup"><span data-stu-id="cecd5-258">However, in the unlikely event of a region-wide service disruption, the locally redundant copies of your data aren't available.</span></span> <span data-ttu-id="cecd5-259">Ha engedélyezte a georeplikáció, nincsenek a blobok és a egy másik régióban lévő táblák három további másolatot készít.</span><span class="sxs-lookup"><span data-stu-id="cecd5-259">If you've enabled geo-replication, there are three additional copies of your blobs and tables in a different region.</span></span> <span data-ttu-id="cecd5-260">Ha a Microsoft deklarálja a régió elveszett, az Azure ismételt leképezés a másodlagos régióba DNS-bejegyzéseket.</span><span class="sxs-lookup"><span data-stu-id="cecd5-260">If Microsoft declares the region lost, Azure remaps all the DNS entries to the secondary region.</span></span>

> [!NOTE]
> <span data-ttu-id="cecd5-261">Ez a folyamat csak régióra kiterjedő szolgáltatáskimaradás következik be, és nem esik a vezérlő.</span><span class="sxs-lookup"><span data-stu-id="cecd5-261">This process occurs only for region-wide service disruptions and is not within your control.</span></span> <span data-ttu-id="cecd5-262">Fontolja meg [Azure Site Recovery](/azure/site-recovery/) jobb RPO és RTO érhető el.</span><span class="sxs-lookup"><span data-stu-id="cecd5-262">Consider using [Azure Site Recovery](/azure/site-recovery/) to achieve better RPO and RTO.</span></span> <span data-ttu-id="cecd5-263">A Site Recovery segítségével eldöntheti, mi elfogadható kimaradás, és mikor kell a replikált virtuális gépek a feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="cecd5-263">Using Site Recovery, you decide what is an acceptable outage and when to fail over to the replicated VMs.</span></span>

<span data-ttu-id="cecd5-264">A válasz egy régióra kiterjedő szolgáltatáskimaradás attól függ, az üzembe helyezés és a vészhelyreállítási tervet.</span><span class="sxs-lookup"><span data-stu-id="cecd5-264">Your response to a region-wide service disruption depends on your deployment and your disaster recovery plan.</span></span>

- <span data-ttu-id="cecd5-265">Költségvezérlés stratégiánk, nem kritikus fontosságú alkalmazásokhoz, amelyek nem igényelnek a garantált helyreállítás idejét célszerű az ismételt üzembe helyezése egy másik régióba.</span><span class="sxs-lookup"><span data-stu-id="cecd5-265">As a cost-control strategy, for non-critical applications that don't require a guaranteed recovery time, it might make sense to redeploy to a different region.</span></span>
- <span data-ttu-id="cecd5-266">Az alkalmazásokat, amelyek egy másik régióban üzembe helyezett szerepkörökkel vannak tárolva, de nem osztja el a forgalmat több régió (*aktív/passzív telepítési*), váltson át a másodlagos üzemeltetett szolgáltatás a másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-266">For applications that are hosted in another region with deployed roles but don't distribute traffic across regions (*active/passive deployment*), switch to the secondary hosted service in the alternate region.</span></span>
- <span data-ttu-id="cecd5-267">Az alkalmazásokat, amelyek a lehető legjobban hasonlítaniuk másodlagos központi telepítéssel rendelkezik, egy másik régióban (*aktív/aktív központi telepítés*), irányíthatja a forgalmat az adott régióban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-267">For applications that have a full-scale secondary deployment in another region (*active/active deployment*), route traffic to that region.</span></span>

<span data-ttu-id="cecd5-268">Régióra kiterjedő szolgáltatáskimaradás utáni kapcsolatos további információkért lásd: [régióra kiterjedő szolgáltatáskimaradás helyreállítása](../resiliency/recovery-loss-azure-region.md).</span><span class="sxs-lookup"><span data-stu-id="cecd5-268">To learn more about recovering from a region-wide service disruption, see [Recover from a region-wide service disruption](../resiliency/recovery-loss-azure-region.md).</span></span>

### <a name="vm-recovery"></a><span data-ttu-id="cecd5-269">Virtuális gép helyreállítási</span><span class="sxs-lookup"><span data-stu-id="cecd5-269">VM recovery</span></span>

<span data-ttu-id="cecd5-270">A kritikus fontosságú alkalmazások esetén tervezze meg a virtuális gépek helyreállítása régióra kiterjedő szolgáltatáskimaradás esetén.</span><span class="sxs-lookup"><span data-stu-id="cecd5-270">For critical apps, plan for recovering VMs in the event of a region-wide service disruption.</span></span>

- <span data-ttu-id="cecd5-271">Használja az Azure Backup vagy egy másik biztonsági mentési módszer a régiók közötti, amelyek az alkalmazáskonzisztens biztonsági mentések létrehozását.</span><span class="sxs-lookup"><span data-stu-id="cecd5-271">Use Azure Backup or another backup method to create cross-region backups that are application consistent.</span></span> <span data-ttu-id="cecd5-272">(A Backup-tároló replikálását is be kell állítani a létrehozásakor.)</span><span class="sxs-lookup"><span data-stu-id="cecd5-272">(Replication of the Backup vault must be configured at the time of creation.)</span></span>
- <span data-ttu-id="cecd5-273">A Site Recovery használatával replikálja az alkalmazás egykattintásos feladatátvétel és a feladatátvétel tesztelése régióban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-273">Use Site Recovery to replicate across regions for one-click application failover and failover testing.</span></span>
- <span data-ttu-id="cecd5-274">A Traffic Manager segítségével automatizálhatja a felhasználói forgalom feladatátvételének egy másik régióban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-274">Use Traffic Manager to automate user traffic failover to another region.</span></span>

<span data-ttu-id="cecd5-275">További tudnivalókért lásd: [egy régióra kiterjedő szolgáltatáskimaradás lép fel, a virtuális gépek helyreállítása](../resiliency/recovery-loss-azure-region.md#virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="cecd5-275">To learn more, see [Recover from a region-wide service disruption, Virtual machines](../resiliency/recovery-loss-azure-region.md#virtual-machines).</span></span>

### <a name="storage-recovery"></a><span data-ttu-id="cecd5-276">Storage-helyreállítás</span><span class="sxs-lookup"><span data-stu-id="cecd5-276">Storage recovery</span></span>

<span data-ttu-id="cecd5-277">A tároló védelmére régióra kiterjedő szolgáltatáskimaradás esetén:</span><span class="sxs-lookup"><span data-stu-id="cecd5-277">To protect your storage in the event of a region-wide service disruption:</span></span>

- <span data-ttu-id="cecd5-278">Georedundáns tárolás használata.</span><span class="sxs-lookup"><span data-stu-id="cecd5-278">Use geo-redundant storage.</span></span>
- <span data-ttu-id="cecd5-279">Tudja, ahol a tárolási georeplikált.</span><span class="sxs-lookup"><span data-stu-id="cecd5-279">Know where your storage is geo-replicated.</span></span> <span data-ttu-id="cecd5-280">Ez hatással van, ahol az adatok regionális kapcsolatot azzal a storage igénylő többi példánya telepít.</span><span class="sxs-lookup"><span data-stu-id="cecd5-280">This affects where you deploy other instances of your data that require regional affinity with your storage.</span></span>
- <span data-ttu-id="cecd5-281">Ellenőrizze az adatokat a konzisztencia feladatátvétel után, és ha szükséges, állítsa vissza biztonsági másolatból.</span><span class="sxs-lookup"><span data-stu-id="cecd5-281">Check data for consistency after failover and, if necessary, restore from a backup.</span></span>

<span data-ttu-id="cecd5-282">További tudnivalókért lásd: [RA-GRS használatával magas rendelkezésre állású alkalmazások tervezése](/azure/storage/common/storage-designing-ha-apps-with-ragrs).</span><span class="sxs-lookup"><span data-stu-id="cecd5-282">To learn more, see [Designing highly available applications using RA-GRS](/azure/storage/common/storage-designing-ha-apps-with-ragrs).</span></span>

### <a name="sql-database-and-sql-server"></a><span data-ttu-id="cecd5-283">Az SQL Database és SQL Server</span><span class="sxs-lookup"><span data-stu-id="cecd5-283">SQL Database and SQL Server</span></span>

<span data-ttu-id="cecd5-284">Az Azure SQL Database két típusú helyreállítási biztosítja:</span><span class="sxs-lookup"><span data-stu-id="cecd5-284">Azure SQL Database provides two types of recovery:</span></span>

- <span data-ttu-id="cecd5-285">A geo-visszaállítás használatával állítsa vissza egy adatbázist a biztonsági másolat egy másik régióban.</span><span class="sxs-lookup"><span data-stu-id="cecd5-285">Use geo-restore to restore a database from a backup copy in another region.</span></span> <span data-ttu-id="cecd5-286">További információkért lásd: [helyreállítani egy Azure SQL database automatikus biztonsági adatbázismentés használatával](/azure/sql-database/sql-database-recovery-using-backups).</span><span class="sxs-lookup"><span data-stu-id="cecd5-286">For more information, see [Recover an Azure SQL database using automated database backups](/azure/sql-database/sql-database-recovery-using-backups).</span></span>
- <span data-ttu-id="cecd5-287">Aktív georeplikáció használatával átadja a feladatokat egy másodlagos adatbázist.</span><span class="sxs-lookup"><span data-stu-id="cecd5-287">Use active geo-replication to fail over to a secondary database.</span></span> <span data-ttu-id="cecd5-288">További információkért lásd: [létrehozása és az aktív georeplikáció használatával](/azure/sql-database/sql-database-active-geo-replication).</span><span class="sxs-lookup"><span data-stu-id="cecd5-288">For more information, see [Creating and using active geo-replication](/azure/sql-database/sql-database-active-geo-replication).</span></span>

<span data-ttu-id="cecd5-289">Tekintse meg a virtuális gépeken futó SQL Serverhez [az SQL Server Azure virtuális gépek magas rendelkezésre állás és vészhelyreállítás helyreállítási](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span><span class="sxs-lookup"><span data-stu-id="cecd5-289">For SQL Server running on VMs, see [High availability and disaster recovery for SQL Server in Azure Virtual Machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>

## <a name="service-specific-guidance"></a><span data-ttu-id="cecd5-290">Szolgáltatásspecifikus útmutató</span><span class="sxs-lookup"><span data-stu-id="cecd5-290">Service-specific guidance</span></span>

<span data-ttu-id="cecd5-291">Az alábbi cikkek ismertetik a vészhelyreállítást az adott Azure-szolgáltatásokhoz:</span><span class="sxs-lookup"><span data-stu-id="cecd5-291">The following articles describe disaster recovery for specific Azure services:</span></span>

| <span data-ttu-id="cecd5-292">Szolgáltatás</span><span class="sxs-lookup"><span data-stu-id="cecd5-292">Service</span></span>                       | <span data-ttu-id="cecd5-293">Cikk</span><span class="sxs-lookup"><span data-stu-id="cecd5-293">Article</span></span>                                                                                                                                                                                       |
|-------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="cecd5-294">Azure Database for MySQL</span><span class="sxs-lookup"><span data-stu-id="cecd5-294">Azure Database for MySQL</span></span>      | [<span data-ttu-id="cecd5-295">Az Azure Database for MySQL üzletmenet-folytonossági funkcióinak áttekintése</span><span class="sxs-lookup"><span data-stu-id="cecd5-295">Overview of business continuity with Azure Database for MySQL</span></span>](/azure/mysql/concepts-business-continuity)                                                  |
| <span data-ttu-id="cecd5-296">Azure Database for PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="cecd5-296">Azure Database for PostgreSQL</span></span> | [<span data-ttu-id="cecd5-297">Az Azure Database for PostgreSQL üzletmenet-folytonossági funkcióinak áttekintése</span><span class="sxs-lookup"><span data-stu-id="cecd5-297">Overview of business continuity with Azure Database for PostgreSQL</span></span>](/azure/postgresql/concepts-business-continuity)                                        |
| <span data-ttu-id="cecd5-298">Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="cecd5-298">Azure Cloud Services</span></span>          | [<span data-ttu-id="cecd5-299">Mi a teendő az Azure Cloud Servicest befolyásoló Azure szolgáltatás kiesése esetén?</span><span class="sxs-lookup"><span data-stu-id="cecd5-299">What to do in the event of an Azure service disruption that impacts Azure Cloud Services</span></span>](/azure/cloud-services/cloud-services-disaster-recovery-guidance) |
| <span data-ttu-id="cecd5-300">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="cecd5-300">Cosmos DB</span></span>                     | [<span data-ttu-id="cecd5-301">Az Azure Cosmos DB magas rendelkezésre állás</span><span class="sxs-lookup"><span data-stu-id="cecd5-301">High availability with Azure Cosmos DB</span></span>](/azure/cosmos-db/high-availability)                                                                                |
| <span data-ttu-id="cecd5-302">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="cecd5-302">Azure Key Vault</span></span>               | [<span data-ttu-id="cecd5-303">Az Azure Key Vault rendelkezésre állás és redundancia</span><span class="sxs-lookup"><span data-stu-id="cecd5-303">Azure Key Vault availability and redundancy</span></span>](/azure/key-vault/key-vault-disaster-recovery-guidance)                                                        |
| <span data-ttu-id="cecd5-304">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="cecd5-304">Azure Storage</span></span>                 | [<span data-ttu-id="cecd5-305">Katasztrófa utáni helyreállítás és a tárolási fiók feladatátvételi (előzetes verzió) az Azure Storage-ban</span><span class="sxs-lookup"><span data-stu-id="cecd5-305">Disaster recovery and storage account failover (preview) in Azure Storage</span></span>](/azure/storage/common/storage-disaster-recovery-guidance)                       |
| <span data-ttu-id="cecd5-306">SQL Database</span><span class="sxs-lookup"><span data-stu-id="cecd5-306">SQL Database</span></span>                  | [<span data-ttu-id="cecd5-307">Egy Azure SQL Database visszaállítása vagy feladatátvétel egy másodlagos régióba</span><span class="sxs-lookup"><span data-stu-id="cecd5-307">Restore an Azure SQL Database or failover to a secondary region</span></span>](/azure/sql-database/sql-database-disaster-recovery)                                       |
| <span data-ttu-id="cecd5-308">Virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="cecd5-308">Virtual Machines</span></span>              | [<span data-ttu-id="cecd5-309">Mi a esetén az Azure szolgáltatás megszakadása hatással van az Azure-felhőben</span><span class="sxs-lookup"><span data-stu-id="cecd5-309">What to do in the event of an Azure service disruption impacts Azure Cloud</span></span>](/azure/cloud-services/cloud-services-disaster-recovery-guidance)               |
| <span data-ttu-id="cecd5-310">Azure Virtual Network</span><span class="sxs-lookup"><span data-stu-id="cecd5-310">Azure Virtual Network</span></span>         | [<span data-ttu-id="cecd5-311">Virtuális hálózat – üzletmenet-folytonossági</span><span class="sxs-lookup"><span data-stu-id="cecd5-311">Virtual Network – Business Continuity</span></span>](/azure/virtual-network/virtual-network-disaster-recovery-guidance)                                                  |

## <a name="next-steps"></a><span data-ttu-id="cecd5-312">További lépések</span><span class="sxs-lookup"><span data-stu-id="cecd5-312">Next steps</span></span>

- [<span data-ttu-id="cecd5-313">Helyreállítás adatsérülés vagy véletlen törlés</span><span class="sxs-lookup"><span data-stu-id="cecd5-313">Recover from data corruption or accidental deletion</span></span>](../resiliency/recovery-data-corruption.md)
- [<span data-ttu-id="cecd5-314">Régióra kiterjedő szolgáltatáskimaradás helyreállítása</span><span class="sxs-lookup"><span data-stu-id="cecd5-314">Recover from a region-wide service disruption</span></span>](../resiliency/recovery-loss-azure-region.md)