---
title: A rugalmasság és a rendelkezésre állás az Azure-alkalmazások üzembe helyezése
description: Megbízható üzemelő példányok létrehozásához az Azure-ban módszerek áttekintése
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: d8df3fe1c3353c60462959a625ba13ae47b96cf8
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646555"
---
# <a name="deploying-azure-applications-for-resiliency-and-availability"></a><span data-ttu-id="fa74f-103">A rugalmasság és a rendelkezésre állás az Azure-alkalmazások üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="fa74f-103">Deploying Azure applications for resiliency and availability</span></span>

<span data-ttu-id="fa74f-104">Kiépítése, és az Azure-erőforrások, az alkalmazáskód és a konfigurációs beállítások frissítése, megismételhető és kiszámítható folyamat segítséget nyújt a hibák és állásidő elkerülése érdekében.</span><span class="sxs-lookup"><span data-stu-id="fa74f-104">As you provision and update Azure resources, application code, and configuration settings, a repeatable and predictable process will help you avoid errors and downtime.</span></span> <span data-ttu-id="fa74f-105">Azt javasoljuk, hogy a központi telepítésre, amely igény szerint futtathat és Újrafuttatás, ha hiba lép fel automatizált folyamatok.</span><span class="sxs-lookup"><span data-stu-id="fa74f-105">We recommend automated processes for deployment that you can run on demand and rerun if something fails.</span></span> <span data-ttu-id="fa74f-106">Ha az üzembe helyezési folyamatok zökkenőmentesen futnak, folyamat dokumentációja tárolhatja őket így.</span><span class="sxs-lookup"><span data-stu-id="fa74f-106">After your deployment processes are running smoothly, process documentation can keep them that way.</span></span>

## <a name="automate-processes"></a><span data-ttu-id="fa74f-107">Folyamatok automatizálása</span><span class="sxs-lookup"><span data-stu-id="fa74f-107">Automate processes</span></span>

<span data-ttu-id="fa74f-108">Aktiválja az erőforrások igény szerinti, megoldások gyors üzembe helyezését, emberi hibák minimalizálása és egységes és megismételhető eredményeket, ügyeljen arra, központi telepítések és frissítések automatizálása.</span><span class="sxs-lookup"><span data-stu-id="fa74f-108">To activate resources on demand, deploy solutions rapidly, minimize human error, and produce consistent and repeatable results, be sure to automate deployments and updates.</span></span>

### <a name="automate-as-many-processes-as-possible"></a><span data-ttu-id="fa74f-109">A lehető legtöbb folyamatok automatizálása</span><span class="sxs-lookup"><span data-stu-id="fa74f-109">Automate as many processes as possible</span></span>

<span data-ttu-id="fa74f-110">A legmegbízhatóbb üzembe helyezési folyamatok és *idempotens* &mdash; , megismételhető, hogy ugyanazt az eredményt.</span><span class="sxs-lookup"><span data-stu-id="fa74f-110">The most reliable deployment processes are automated and *idempotent* &mdash; that is, repeatable to produce the same results.</span></span>

- <span data-ttu-id="fa74f-111">Automatizálhatja az Azure-erőforrások kiépítését, használhatja a [Terraform](/azure/virtual-machines/windows/infrastructure-automation#terraform), [Ansible](/azure/virtual-machines/windows/infrastructure-automation#ansible), [Chef](/azure/virtual-machines/windows/infrastructure-automation#chef), [Puppet](/azure/virtual-machines/windows/infrastructure-automation#puppet), [Azure PowerShell](/powershell/azure/overview), [az Azure parancssori felület (CLI)](/cli/azure), vagy [Azure Resource Manager-sablonok](/azure/azure-resource-manager/resource-group-overview#template-deployment).</span><span class="sxs-lookup"><span data-stu-id="fa74f-111">To automate provisioning of Azure resources, you can use [Terraform](/azure/virtual-machines/windows/infrastructure-automation#terraform),   [Ansible](/azure/virtual-machines/windows/infrastructure-automation#ansible), [Chef](/azure/virtual-machines/windows/infrastructure-automation#chef), [Puppet](/azure/virtual-machines/windows/infrastructure-automation#puppet),   [Azure PowerShell](/powershell/azure/overview), [Azure command-line interface (CLI)](/cli/azure), or [Azure Resource Manager templates](/azure/azure-resource-manager/resource-group-overview#template-deployment).</span></span>
- <span data-ttu-id="fa74f-112">A virtuális gépek konfigurálásához használható [a cloud-init](/azure/virtual-machines/windows/infrastructure-automation#cloud-init) (Linux virtuális gépek esetén) vagy [Azure Automation Állapotkonfiguráció](/azure/automation/automation-dsc-overview) (DSC).</span><span class="sxs-lookup"><span data-stu-id="fa74f-112">To configure VMs, you can use [cloud-init](/azure/virtual-machines/windows/infrastructure-automation#cloud-init) (for Linux VMs) or [Azure Automation State Configuration](/azure/automation/automation-dsc-overview) (DSC).</span></span>
- <span data-ttu-id="fa74f-113">Alkalmazás üzembe helyezésének automatizálása, használható [Azure DevOps-szolgáltatásokkal](/azure/virtual-machines/windows/infrastructure-automation#azure-devops-services), [Jenkins](/azure/virtual-machines/windows/infrastructure-automation#jenkins), vagy más CI/CD-megoldás.</span><span class="sxs-lookup"><span data-stu-id="fa74f-113">To automate application deployment, you can use [Azure DevOps Services](/azure/virtual-machines/windows/infrastructure-automation#azure-devops-services), [Jenkins](/azure/virtual-machines/windows/infrastructure-automation#jenkins), or other CI/CD solutions.</span></span>

<span data-ttu-id="fa74f-114">Ajánlott eljárásként hozzon létre egy adattár a gyors hozzáférés érdekében magyarázatát paramétereket és a példa a parancsfájl a dokumentált kategorizált automatizálási szkriptek.</span><span class="sxs-lookup"><span data-stu-id="fa74f-114">As a best practice, create a repository of categorized automation scripts for quick access, documented with explanations of parameters and examples of script use.</span></span> <span data-ttu-id="fa74f-115">Ebben a dokumentációban az Azure-környezetek szinkronban tartani, és kezelheti a tárház elsődleges személy kijelölése.</span><span class="sxs-lookup"><span data-stu-id="fa74f-115">Keep this documentation in sync with your Azure deployments, and designate a primary person to manage the repository.</span></span>

<span data-ttu-id="fa74f-116">Automatizálási szkriptek is aktiválhatja a vész-helyreállítási igény szerinti erőforrások.</span><span class="sxs-lookup"><span data-stu-id="fa74f-116">Automation scripts can also activate resources on demand for disaster recovery.</span></span>

### <a name="use-code-to-provision-and-configure-infrastructure"></a><span data-ttu-id="fa74f-117">Kód üzembe helyezni, és az infrastruktúra konfigurálása</span><span class="sxs-lookup"><span data-stu-id="fa74f-117">Use code to provision and configure infrastructure</span></span>

<span data-ttu-id="fa74f-118">Ez a gyakorlat nevű *infrastruktúra mint kód,* deklaratív vagy imperatív módszerrel (vagy a kettő kombinációjával) használhatja.</span><span class="sxs-lookup"><span data-stu-id="fa74f-118">This practice, called *infrastructure as code,* may use a declarative approach or an imperative approach (or a combination of both).</span></span>

- <span data-ttu-id="fa74f-119">[Resource Manager-sablonok](/azure/azure-resource-manager/resource-group-overview#template-deployment) deklaratív módszer egy példát.</span><span class="sxs-lookup"><span data-stu-id="fa74f-119">[Resource Manager templates](/azure/azure-resource-manager/resource-group-overview#template-deployment) are an example of a declarative approach.</span></span>
- <span data-ttu-id="fa74f-120">[PowerShell](/powershell/azure/overview) parancsfájlok használata az imperatív módszer egy példája.</span><span class="sxs-lookup"><span data-stu-id="fa74f-120">[PowerShell](/powershell/azure/overview) scripts are an example of an imperative approach.</span></span>

### <a name="practice-immutable-infrastructure"></a><span data-ttu-id="fa74f-121">Eljárás nem módosítható infrastruktúra</span><span class="sxs-lookup"><span data-stu-id="fa74f-121">Practice immutable infrastructure</span></span>

<span data-ttu-id="fa74f-122">Más szóval ne módosítsa az infrastruktúra éles üzembe helyezése után.</span><span class="sxs-lookup"><span data-stu-id="fa74f-122">In other words, don't modify infrastructure after it's deployed to production.</span></span> <span data-ttu-id="fa74f-123">Alkalmi változtatások alkalmazása után, hogy nem tudja pontosan mi változott, így a rendszer a hibaelhárítás nehezen lehet.</span><span class="sxs-lookup"><span data-stu-id="fa74f-123">After ad hoc changes have been applied, you might not know exactly what has changed, so it can be difficult to troubleshoot the system.</span></span>

### <a name="automate-and-test-deployment-and-maintenance-tasks"></a><span data-ttu-id="fa74f-124">Automatizálhatja és központi telepítési és karbantartási feladatok tesztelése</span><span class="sxs-lookup"><span data-stu-id="fa74f-124">Automate and test deployment and maintenance tasks</span></span>

<span data-ttu-id="fa74f-125">Az elosztott alkalmazások, amelyek együtt kell működniük a több részből állnak.</span><span class="sxs-lookup"><span data-stu-id="fa74f-125">Distributed applications consist of multiple parts that must work together.</span></span> <span data-ttu-id="fa74f-126">Üzembe helyezés bevált eljárások, például a parancsfájlokat, frissítése és a konfiguráció ellenőrzése és az üzembe helyezési folyamat automatizálható kell előnyeit.</span><span class="sxs-lookup"><span data-stu-id="fa74f-126">Deployment should take advantage of proven mechanisms, such as scripts, that can update and validate configuration and automate the deployment process.</span></span> <span data-ttu-id="fa74f-127">Tesztelje az összes folyamat teljes győződjön meg arról, hogy a hibák nem okoznak további állásidőt.</span><span class="sxs-lookup"><span data-stu-id="fa74f-127">Test all processes fully to ensure that errors don't cause additional downtime.</span></span>

### <a name="implement-deployment-security-measures"></a><span data-ttu-id="fa74f-128">Üzembe helyezés biztonsági intézkedések végrehajtása</span><span class="sxs-lookup"><span data-stu-id="fa74f-128">Implement deployment security measures</span></span>

<span data-ttu-id="fa74f-129">Az összes központi telepítési eszközök tartalmaznia kell az üzembe helyezett alkalmazás védelme érdekében biztonsági korlátozások.</span><span class="sxs-lookup"><span data-stu-id="fa74f-129">All deployment tools must incorporate security restrictions to protect the deployed application.</span></span> <span data-ttu-id="fa74f-130">Határozza meg gondosan az üzembe helyezési szabályzatokat léptethet, és az emberi beavatkozások szükségességének minimálisra csökkentése.</span><span class="sxs-lookup"><span data-stu-id="fa74f-130">Define and enforce deployment policies carefully, and minimize the need for human intervention.</span></span>

## <a name="deploy-to-multiple-regions-and-instances"></a><span data-ttu-id="fa74f-131">Üzembe helyezés több régióban és példányok</span><span class="sxs-lookup"><span data-stu-id="fa74f-131">Deploy to multiple regions and instances</span></span>

<span data-ttu-id="fa74f-132">Olyan alkalmazás, amely egy szolgáltatás egyetlen példánya függ egy meghibásodási pontot hoz létre.</span><span class="sxs-lookup"><span data-stu-id="fa74f-132">An application that depends on a single instance of a service creates a single point of failure.</span></span> <span data-ttu-id="fa74f-133">Rugalmasság és méretezhetőség javítása érdekében építhet ki több példányt.</span><span class="sxs-lookup"><span data-stu-id="fa74f-133">To improve resiliency and scalability, provision multiple instances.</span></span>

- <span data-ttu-id="fa74f-134">A [Azure App Service](/azure/app-service/app-service-value-prop-what-is/), jelölje be egy [App Service-csomag](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) , amelynek keretében több példányt.</span><span class="sxs-lookup"><span data-stu-id="fa74f-134">For [Azure App Service](/azure/app-service/app-service-value-prop-what-is/), select an [App Service plan](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) that offers multiple instances.</span></span>
- <span data-ttu-id="fa74f-135">A [Azure Cloud Services](/azure/cloud-services/cloud-services-choose-me), konfigurálható, a szerepkörök használatára [több példány](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span><span class="sxs-lookup"><span data-stu-id="fa74f-135">For [Azure Cloud Services](/azure/cloud-services/cloud-services-choose-me), configure each of your roles to use [multiple instances](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span></span>
- <span data-ttu-id="fa74f-136">A [Azure Virtual Machines](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), győződjön meg arról, hogy az architektúra tartalmaz-e egynél több virtuális gép és minden virtuális gép szerepel egy [rendelkezésre állási csoport](/azure/virtual-machines/virtual-machines-windows-manage-availability/).</span><span class="sxs-lookup"><span data-stu-id="fa74f-136">For [Azure Virtual Machines](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), ensure that your architecture includes more than one VM and that each VM is included in an [availability set](/azure/virtual-machines/virtual-machines-windows-manage-availability/).</span></span>

### <a name="consider-deploying-across-multiple-regions"></a><span data-ttu-id="fa74f-137">Érdemes megfontolni a több régióban</span><span class="sxs-lookup"><span data-stu-id="fa74f-137">Consider deploying across multiple regions</span></span>

<span data-ttu-id="fa74f-138">Javasoljuk, hogy az összes, de legalább kritikus fontosságú alkalmazások és alkalmazásszolgáltatások több régióban.</span><span class="sxs-lookup"><span data-stu-id="fa74f-138">We recommend deploying all but the least critical applications and application services across multiple regions.</span></span> <span data-ttu-id="fa74f-139">Ha az alkalmazás egyetlen régióban üzembe, az esemény ritkán fordul elő, hogy a teljes régió nem érhető el, az alkalmazás is nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="fa74f-139">If your application is deployed to a single region, in the rare event that the entire region becomes unavailable, the application will also be unavailable.</span></span>

<span data-ttu-id="fa74f-140">Ha egyetlen régióban történő üzembe helyezéséhez, érdemes lehet egy másodlagos régióba váratlan hibájára való válaszként ismételt üzembe helyezés előkészítése.</span><span class="sxs-lookup"><span data-stu-id="fa74f-140">If you choose to deploy to a single region, consider preparing to redeploy to a secondary region as a response to an unexpected failure.</span></span>

### <a name="redeploy-to-a-secondary-region"></a><span data-ttu-id="fa74f-141">Ismételt üzembe helyezése egy másodlagos régióba</span><span class="sxs-lookup"><span data-stu-id="fa74f-141">Redeploy to a secondary region</span></span>

<span data-ttu-id="fa74f-142">Alkalmazások és adatbázisok futtatja a replikáció nem egy önálló, elsődleges régióban, ha a stratégia lehet egy másik régióban üzembe helyezése.</span><span class="sxs-lookup"><span data-stu-id="fa74f-142">If you run applications and databases in a single, primary region with no replication, your recovery strategy might be to redeploy to another region.</span></span> <span data-ttu-id="fa74f-143">Ez a megoldás, megfizethető, de leginkább megfelelő, nem kritikus fontosságú alkalmazásokhoz, amely tűri hosszabb helyreállítási időt.</span><span class="sxs-lookup"><span data-stu-id="fa74f-143">This solution is affordable but most appropriate for non-critical applications that can tolerate longer recovery times.</span></span>

<span data-ttu-id="fa74f-144">Ha úgy dönt, ezt a stratégiát, automatizálhatja a lehető legnagyobb mértékben újbóli üzembe helyezés folyamatát, és újbóli üzembe helyezés forgatókönyvek bevonni a vészhelyreállítási válasz tesztelése.</span><span class="sxs-lookup"><span data-stu-id="fa74f-144">If you choose this strategy, automate the redeployment process as much as possible and include redeployment scenarios in your disaster response testing.</span></span>

<span data-ttu-id="fa74f-145">Automatizálhatja a újbóli üzembe helyezés során, érdemes lehet [Azure Site Recovery](/azure/site-recovery/).</span><span class="sxs-lookup"><span data-stu-id="fa74f-145">To automate your redeployment process, consider using [Azure Site Recovery](/azure/site-recovery/).</span></span>

## <a name="use-staging-and-production-environments"></a><span data-ttu-id="fa74f-146">Átmeneti és éles környezetek használata</span><span class="sxs-lookup"><span data-stu-id="fa74f-146">Use staging and production environments</span></span>

<span data-ttu-id="fa74f-147">Hasznosnak találta az átmeneti és éles környezetekben, a frissítések leküldése az éles környezetben erősen szabályozott módon, és a nem várt üzembe helyezési problémák minimalizálása érdekében.</span><span class="sxs-lookup"><span data-stu-id="fa74f-147">With good use of staging and production environments, you can push updates to the production environment in a highly controlled way and minimize disruption from unanticipated deployment issues.</span></span>

- <span data-ttu-id="fa74f-148">[*Kék-zöld üzembe helyezés*](https://martinfowler.com/bliki/BlueGreenDeployment.html) magában foglalja a frissítés telepítése az élő alkalmazástól elkülönített éles környezetben.</span><span class="sxs-lookup"><span data-stu-id="fa74f-148">[*Blue-green deployment*](https://martinfowler.com/bliki/BlueGreenDeployment.html) involves deploying an update into a production environment that's separate from the live application.</span></span> <span data-ttu-id="fa74f-149">Az üzemelő példány ellenőrzése után irányítsa át a forgalmat a frissített verzióhoz.</span><span class="sxs-lookup"><span data-stu-id="fa74f-149">After you validate the deployment, switch the traffic routing to the updated version.</span></span> <span data-ttu-id="fa74f-150">Ehhez a egyirányú azt használja a [előkészítési ponton](/azure/app-service/web-sites-staged-publishing) éles áthelyezés előtt üzembe helyezésének ütemezése az Azure App Service-ben érhető el.</span><span class="sxs-lookup"><span data-stu-id="fa74f-150">One way to do this is to use the [staging slots](/azure/app-service/web-sites-staged-publishing) available in Azure App Service to stage a deployment before moving it to production.</span></span>
- <span data-ttu-id="fa74f-151">[*Tesztcsoportos kiadások*](https://martinfowler.com/bliki/CanaryRelease.html) hasonlóak a kék-zöld üzembe.</span><span class="sxs-lookup"><span data-stu-id="fa74f-151">[*Canary releases*](https://martinfowler.com/bliki/CanaryRelease.html) are similar to blue-green deployments.</span></span> <span data-ttu-id="fa74f-152">Helyett vált minden forgalmat a frissített alkalmazást, a forgalom csak egy kis részét a új központi telepítési útvonal.</span><span class="sxs-lookup"><span data-stu-id="fa74f-152">Instead of switching all traffic to the updated application, you route only a small portion of the traffic to the new deployment.</span></span> <span data-ttu-id="fa74f-153">Ha probléma merül fel, visszavált a régi üzemelő példányra.</span><span class="sxs-lookup"><span data-stu-id="fa74f-153">If there's a problem, revert to the old deployment.</span></span> <span data-ttu-id="fa74f-154">Ellenkező esetben fokozatosan további forgalom irányítása az új verzióra.</span><span class="sxs-lookup"><span data-stu-id="fa74f-154">If not, gradually route more traffic to the new version.</span></span> <span data-ttu-id="fa74f-155">Azure App Service használata, használhatja a tesztelés az éles funkció canary kiadás kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="fa74f-155">If you're using Azure App Service, you can use the Testing in production feature to manage a canary release.</span></span>

## <a name="create-a-rollback-plan-for-deployment-and-updates"></a><span data-ttu-id="fa74f-156">Központi telepítési és frissítési visszaállítási terv létrehozása</span><span class="sxs-lookup"><span data-stu-id="fa74f-156">Create a rollback plan for deployment and updates</span></span>

<span data-ttu-id="fa74f-157">Ha nem sikerül a telepítés, az alkalmazás válhat elérhetetlenné.</span><span class="sxs-lookup"><span data-stu-id="fa74f-157">If a deployment fails, your application could become unavailable.</span></span> <span data-ttu-id="fa74f-158">Hogy minimalizálják az állásidőt, tervezze meg a visszaállítási folyamat egy utolsó ismert jó verzióra való visszatéréshez.</span><span class="sxs-lookup"><span data-stu-id="fa74f-158">To minimize downtime, design a rollback process to go back to a last-known good version.</span></span> <span data-ttu-id="fa74f-159">Például egy stratégia visszafordítani a változásokat, adatbázisok és az alkalmazása függ más szolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="fa74f-159">Include a strategy to roll back changes to databases and any other services your app depends on.</span></span>

<span data-ttu-id="fa74f-160">Használja az Azure App Service-ben, ha egy utolsó ismert jó tárhely beállítása, és ezzel állítja vissza egy webalkalmazás vagy API-alkalmazás üzembe helyezése.</span><span class="sxs-lookup"><span data-stu-id="fa74f-160">If you're using Azure App Service, you can set up a last-known good site slot and use it to roll back from a web or API app deployment.</span></span>

## <a name="log-and-audit-deployments"></a><span data-ttu-id="fa74f-161">Napló- és vizsgálati központi telepítések</span><span class="sxs-lookup"><span data-stu-id="fa74f-161">Log and audit deployments</span></span>

<span data-ttu-id="fa74f-162">A lehető sokkal verzióspecifikus információk rögzítéséhez egy hatékony naplózás stratégia megvalósításához.</span><span class="sxs-lookup"><span data-stu-id="fa74f-162">To capture as much version-specific information as possible, implement a robust logging strategy.</span></span> <span data-ttu-id="fa74f-163">A kétlépcsős üzembe helyezési módszereket használja, ha egynél több verziója, az alkalmazás éles környezetben fog futni.</span><span class="sxs-lookup"><span data-stu-id="fa74f-163">If you use staged deployment techniques, more than one version of your application will be running in production.</span></span> <span data-ttu-id="fa74f-164">Ha probléma merül fel, határozza meg, melyik okozza.</span><span class="sxs-lookup"><span data-stu-id="fa74f-164">If a problem occurs, determine which version is causing it.</span></span>

## <a name="document-release-processes"></a><span data-ttu-id="fa74f-165">A dokumentum-kiadási folyamatok</span><span class="sxs-lookup"><span data-stu-id="fa74f-165">Document release processes</span></span>

<span data-ttu-id="fa74f-166">Nélkül részletes kibocsátási folyamat dokumentációja az operátornak egy rossz frissítés központi telepítését, vagy előfordulhat, hogy helytelen az alkalmazás beállításainak konfigurálása.</span><span class="sxs-lookup"><span data-stu-id="fa74f-166">Without detailed release process documentation, an operator might deploy a bad update or might improperly configure settings for your application.</span></span> <span data-ttu-id="fa74f-167">Egyértelműen határozza meg és dokumentálja a kibocsátási folyamat, és győződjön meg arról, hogy azt a teljes üzemeltetési csapat rendelkezésére.</span><span class="sxs-lookup"><span data-stu-id="fa74f-167">Clearly define and document your release process, and ensure that it's available to the entire operations team.</span></span>

## <a name="next-steps"></a><span data-ttu-id="fa74f-168">További lépések</span><span class="sxs-lookup"><span data-stu-id="fa74f-168">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="fa74f-169">A megbízhatóság alkalmazás állapot figyelése</span><span class="sxs-lookup"><span data-stu-id="fa74f-169">Monitor application health for reliability</span></span>](./monitoring.md)
