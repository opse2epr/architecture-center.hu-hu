---
title: Útmutató a háttérben futó feladatokhoz
description: A feladatok rendszert futtató, függetlenül a felhasználói felület a háttér útmutatást.
author: dragon119
ms.date: 05/24/2017
pnp.series.title: Best Practices
ms.openlocfilehash: 10c24afee4b880cfbf8ee534f4d7f945d2b046a9
ms.sourcegitcommit: 3426a9c5ed937f097725c487cf3d073ae5e2a347
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 02/01/2018
ms.locfileid: "28907046"
---
# <a name="background-jobs"></a><span data-ttu-id="6d6ea-103">Háttérfeladatok</span><span class="sxs-lookup"><span data-stu-id="6d6ea-103">Background jobs</span></span>
[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="6d6ea-104">Számos különböző típusú alkalmazások háttérfeladatok, függetlenül a felhasználói felület (UI) futtató igényelnek.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-104">Many types of applications require background tasks that run independently of the user interface (UI).</span></span> <span data-ttu-id="6d6ea-105">Például kötegelt feladatok, intenzív feladatokat, és a hosszú futású folyamatokat, például a munkafolyamatok.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-105">Examples include batch jobs, intensive processing tasks, and long-running processes such as workflows.</span></span> <span data-ttu-id="6d6ea-106">Nincs szükség felhasználói beavatkozásra – az alkalmazás végrehajtható feladatok a háttérben is indítsa el a feladatot, és folytassa a felhasználók interaktív kérelmek feldolgozásához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-106">Background jobs can be executed without requiring user interaction--the application can start the job and then continue to process interactive requests from users.</span></span> <span data-ttu-id="6d6ea-107">Ez segít az alkalmazás felhasználói felületén, amelyek javíthatják a rendelkezésre állási és interaktív a válaszhoz szükséges idő csökkentése terhelése minimalizálása érdekében.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-107">This can help to minimize the load on the application UI, which can improve availability and reduce interactive response times.</span></span>

<span data-ttu-id="6d6ea-108">Például ha egy alkalmazás szükséges olyan lemezképkészlet, amellyel a felhasználók feltöltése indexképének létrehozására használnak, azt is ehhez háttérfeladatként és a miniatűr mentése tárolóra, ha befejeződött – a felhasználó kell várnia a folyamat végrehajtása nélkül.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-108">For example, if an application is required to generate thumbnails of images that are uploaded by users, it can do this as a background job and save the thumbnail to storage when it is complete--without the user needing to wait for the process to be completed.</span></span> <span data-ttu-id="6d6ea-109">Azonos módon a felhasználó egy rendelés olyan háttér munkafolyamatot, amely a sorrendben dolgozza fel a közben a felhasználói felület lehetővé teszi, hogy a felhasználó folytassa, keresse meg a webes alkalmazás is kezdeményezhető.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-109">In the same way, a user placing an order can initiate a background workflow that processes the order, while the UI allows the user to continue browsing the web app.</span></span> <span data-ttu-id="6d6ea-110">Ha a háttérben futó feladat befejeződött, képes tárolt rendelések adatok frissítéséhez és e-mailt küldeni a felhasználót, hogy milyen sorrendben ellenőrzi.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-110">When the background job is complete, it can update the stored orders data and send an email to the user that confirms the order.</span></span>

<span data-ttu-id="6d6ea-111">Ha Ön vegye figyelembe, hogy háttérfeladatként feladat végrehajtására, a következő szempontokat-e a feladat futtatásához a felhasználói felület és felhasználói beavatkozás nélkül kell várjon a feladat végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-111">When you consider whether to implement a task as a background job, the main criteria is whether the task can run without user interaction and without the UI needing to wait for the job to be completed.</span></span> <span data-ttu-id="6d6ea-112">Előfordulhat, hogy a felhasználó vagy a felhasználói felület türelmet, amíg a teljesítése igénylő feladatok nem megfelelő, mint a feladatok a háttérben.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-112">Tasks that require the user or the UI to wait while they are completed might not be appropriate as background jobs.</span></span>

## <a name="types-of-background-jobs"></a><span data-ttu-id="6d6ea-113">Háttér-feladatok típusai</span><span class="sxs-lookup"><span data-stu-id="6d6ea-113">Types of background jobs</span></span>
<span data-ttu-id="6d6ea-114">Feladatok a háttérben rendszerint tartalmazza a következő típusú feladatok közül:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-114">Background jobs typically include one or more of the following types of jobs:</span></span>

* <span data-ttu-id="6d6ea-115">Processzorigényes feladatok, például matematikai vagy strukturális modell elemzés.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-115">CPU-intensive jobs, such as mathematical calculations or structural model analysis.</span></span>
* <span data-ttu-id="6d6ea-116">I/O-igényes feladatok, például egy sorozatát storage-tranzakció végrehajtása vagy a fájlok indexelése.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-116">I/O-intensive jobs, such as executing a series of storage transactions or indexing files.</span></span>
* <span data-ttu-id="6d6ea-117">Kötegelt feladatok, például az ütemezett frissítések vagy ütemezett feldolgozási.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-117">Batch jobs, such as nightly data updates or scheduled processing.</span></span>
* <span data-ttu-id="6d6ea-118">Hosszan futó munkafolyamatok, például a megrendelés teljesítésének vagy a szolgáltatások és rendszerek kiépítése.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-118">Long-running workflows, such as order fulfillment, or provisioning services and systems.</span></span>
* <span data-ttu-id="6d6ea-119">Ha a feladat elkészül biztonságosabb helyre feldolgozás érzékeny-adatok feldolgozása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-119">Sensitive-data processing where the task is handed off to a more secure location for processing.</span></span> <span data-ttu-id="6d6ea-120">Például előfordulhat, hogy nem szeretné a webalkalmazáson belül bizalmas adatok feldolgozására.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-120">For example, you might not want to process sensitive data within a web app.</span></span> <span data-ttu-id="6d6ea-121">Ehelyett használhatja mintaként, mint [forgalomirányító](http://msdn.microsoft.com/library/dn589793.aspx) egy elkülönített háttérfolyamatként, amely védett tárolóra hozzáféréssel rendelkezik az adatok átvitele.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-121">Instead, you might use a pattern such as [Gatekeeper](http://msdn.microsoft.com/library/dn589793.aspx) to transfer the data to an isolated background process that has access to protected storage.</span></span>

## <a name="triggers"></a><span data-ttu-id="6d6ea-122">Eseményindítók</span><span class="sxs-lookup"><span data-stu-id="6d6ea-122">Triggers</span></span>
<span data-ttu-id="6d6ea-123">Feladatok a háttérben számos különböző módon kezdeményezhető.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-123">Background jobs can be initiated in several different ways.</span></span> <span data-ttu-id="6d6ea-124">Az alábbi kategóriák valamelyikébe tartoznak:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-124">They fall into one of the following categories:</span></span>

* <span data-ttu-id="6d6ea-125">[**Eseményindítók eseményvezérelt**](#event-driven-triggers).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-125">[**Event-driven triggers**](#event-driven-triggers).</span></span> <span data-ttu-id="6d6ea-126">A feladat elindult válaszul egy eseményt, általában egy felhasználó vagy egy lépést, a munkafolyamat által végrehajtott műveletet.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-126">The task is started in response to an event, typically an action taken by a user or a step in a workflow.</span></span>
* <span data-ttu-id="6d6ea-127">[**Ütemezés adatvezérelt eseményindítók**](#schedule-driven-triggers).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-127">[**Schedule-driven triggers**](#schedule-driven-triggers).</span></span> <span data-ttu-id="6d6ea-128">A feladat ütemezés szerint alapuló időzítő meghívták.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-128">The task is invoked on a schedule based on a timer.</span></span> <span data-ttu-id="6d6ea-129">Ez lehet egy ismétlődő ütemezés szerint vagy egy egyszeri hívás, amely egy későbbi időpontra van megadva.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-129">This might be a recurring schedule or a one-off invocation that is specified for a later time.</span></span>

### <a name="event-driven-triggers"></a><span data-ttu-id="6d6ea-130">Eseményindítók eseményvezérelt</span><span class="sxs-lookup"><span data-stu-id="6d6ea-130">Event-driven triggers</span></span>
<span data-ttu-id="6d6ea-131">Eseményvezérelt meghívása eseményindítót használ a háttér-feladat indítása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-131">Event-driven invocation uses a trigger to start the background task.</span></span> <span data-ttu-id="6d6ea-132">Eseményindítók eseményvezérelt használatával például:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-132">Examples of using event-driven triggers include:</span></span>

* <span data-ttu-id="6d6ea-133">A felhasználói felület vagy egy másik feladat helyezi el egy üzenetet a sorhoz.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-133">The UI or another job places a message in a queue.</span></span> <span data-ttu-id="6d6ea-134">Az üzenet tartalmaz egy műveletet, amely került sor, például a felhasználó egy rendelés adatait.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-134">The message contains data about an action that has taken place, such as the user placing an order.</span></span> <span data-ttu-id="6d6ea-135">A háttérben futó feladat ennél a várakozási figyeli, és egy új üzenet megérkezése észleli.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-135">The background task listens on this queue and detects the arrival of a new message.</span></span> <span data-ttu-id="6d6ea-136">Kiolvassa az üzenetet, és a háttérben történő feldolgozás bemeneteként használja az adatok.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-136">It reads the message and uses the data in it as the input to the background job.</span></span>
* <span data-ttu-id="6d6ea-137">A felhasználói felület vagy egy másik feladat menti, vagy frissíti a tárolási értéket.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-137">The UI or another job saves or updates a value in storage.</span></span> <span data-ttu-id="6d6ea-138">A háttérben futó feladat figyeli a tárolási és módosításokat észlel.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-138">The background task monitors the storage and detects changes.</span></span> <span data-ttu-id="6d6ea-139">Az adatokat olvas, és a háttérben történő feldolgozás bemeneteként használja.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-139">It reads the data and uses it as the input to the background job.</span></span>
* <span data-ttu-id="6d6ea-140">A felhasználói felület vagy egy másik feladat egy kérést küld egy végpontot, például egy HTTPS URI-azonosító, vagy egy API-t, amely fel van fedve egy webszolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-140">The UI or another job makes a request to an endpoint, such as an HTTPS URI, or an API that is exposed as a web service.</span></span> <span data-ttu-id="6d6ea-141">Továbbítja az adatokat, hogy a kérés részeként a háttérben futó feladat végrehajtásához szükséges.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-141">It passes the data that is required to complete the background task as part of the request.</span></span> <span data-ttu-id="6d6ea-142">A végpont vagy webes szolgáltatás meghívja a háttérfeladat, amely az adatok használja bemenetként.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-142">The endpoint or web service invokes the background task, which uses the data as its input.</span></span>

<span data-ttu-id="6d6ea-143">Tipikus feladatok eseményvezérelt meghívása alkalmas például feldolgozásához, munkafolyamatok, a távoli szolgáltatás adatokat küld, e-mailek küldése és kiépítése a több-bérlős alkalmazások új felhasználói lemezkép.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-143">Typical examples of tasks that are suited to event-driven invocation include image processing, workflows, sending information to remote services, sending email messages, and provisioning new users in multitenant applications.</span></span>

### <a name="schedule-driven-triggers"></a><span data-ttu-id="6d6ea-144">Ütemezés adatvezérelt eseményindítók</span><span class="sxs-lookup"><span data-stu-id="6d6ea-144">Schedule-driven triggers</span></span>
<span data-ttu-id="6d6ea-145">Ütemezés adatvezérelt meghívása egy számlálót használja a háttér-feladat indítása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-145">Schedule-driven invocation uses a timer to start the background task.</span></span> <span data-ttu-id="6d6ea-146">Ütemezés adatvezérelt eseményindítók használatával például:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-146">Examples of using schedule-driven triggers include:</span></span>

* <span data-ttu-id="6d6ea-147">Egy időzítőt, amely helyben fut az alkalmazáson belül, vagy az alkalmazás operációs rendszer részeként rendszeresen háttérfeladat hív meg.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-147">A timer that is running locally within the application or as part of the application’s operating system invokes a background task on a regular basis.</span></span>
* <span data-ttu-id="6d6ea-148">Egy számlálót egy másik alkalmazás vagy Azure Scheduler, például egy időzítő szolgáltatásának futtató kérést küld egy API-t vagy a webes szolgáltatás rendszeres időközönként.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-148">A timer that is running in a different application, or a timer service such as Azure Scheduler, sends a request to an API or web service on a regular basis.</span></span> <span data-ttu-id="6d6ea-149">Az API-t vagy a webes szolgáltatás meghívja a háttérben futó feladat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-149">The API or web service invokes the background task.</span></span>
* <span data-ttu-id="6d6ea-150">Egy külön folyamatban vagy alkalmazás elindít egy számlálót, meg kell hívni a megadott késleltetés után egyszer, vagy egy adott időpontban a háttérfeladat okozó.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-150">A separate process or application starts a timer that causes the background task to be invoked once after a specified time delay, or at a specific time.</span></span>

<span data-ttu-id="6d6ea-151">Tipikus feladatok ütemezése adatvezérelt meghívása alkalmas például kötegfeldolgozási rutinok (például a felhasználók a legutóbbi viselkedésük alapján kapcsolódó termékek listák frissítése), rutin adatfeldolgozási feladatok (például az indexek frissítéséhez vagy létrehozása Halmozott eredményeket), a napi jelentésekben, adatok megőrzési törlése és adatok konzisztenciájának adatelemzés ellenőrzi.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-151">Typical examples of tasks that are suited to schedule-driven invocation include batch-processing routines (such as updating related-products lists for users based on their recent behavior), routine data processing tasks (such as updating indexes or generating accumulated results), data analysis for daily reports, data retention cleanup, and data consistency checks.</span></span>

<span data-ttu-id="6d6ea-152">Ha egy ütemezés adatvezérelt feladatot, amely egyetlen példányt kell futnia, figyelembe a következőket:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-152">If you use a schedule-driven task that must run as a single instance, be aware of the following:</span></span>

* <span data-ttu-id="6d6ea-153">Ha átméretezi a számítási példányon, amely az ütemező (például egy virtuális gép használata a Windows ütemezett feladatok) fut, akkor az ütemező futtató több példányát.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-153">If the compute instance that is running the scheduler (such as a virtual machine using Windows scheduled tasks) is scaled, you will have multiple instances of the scheduler running.</span></span> <span data-ttu-id="6d6ea-154">Ezek tudta elindítani a feladatot több példányát.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-154">These could start multiple instances of the task.</span></span>
* <span data-ttu-id="6d6ea-155">Feladatok futtatása nagyobb, mint az ütemező események között, ha a Feladatütemező a feladat egy másik példánya kezdheti el az előző feladat futása közben.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-155">If tasks run for longer than the period between scheduler events, the scheduler may start another instance of the task while the previous one is still running.</span></span>

## <a name="returning-results"></a><span data-ttu-id="6d6ea-156">Adatszolgáltató eredmények</span><span class="sxs-lookup"><span data-stu-id="6d6ea-156">Returning results</span></span>
<span data-ttu-id="6d6ea-157">Feladatok a háttérben aszinkron külön folyamatban, vagy akár egy külön helyét, a felhasználói felületén vagy a folyamat a háttérben futó feladat definiálásra.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-157">Background jobs execute asynchronously in a separate process, or even in a separate location, from the UI or the process that invoked the background task.</span></span> <span data-ttu-id="6d6ea-158">Ideális esetben háttérfeladatok "tűz- és elfelejti" műveleteket, és a végrehajtás folyamatban van a felhasználói felületén vagy a hívó folyamat nincs hatással.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-158">Ideally, background tasks are “fire and forget” operations, and their execution progress has no impact on the UI or the calling process.</span></span> <span data-ttu-id="6d6ea-159">Ez azt jelenti, hogy a hívó folyamat nem vár a feladat befejezésére.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-159">This means that the calling process does not wait for completion of the tasks.</span></span> <span data-ttu-id="6d6ea-160">Ezért az nem automatikusan észlelés, ha a feladat befejeződik.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-160">Therefore, it cannot automatically detect when the task ends.</span></span>

<span data-ttu-id="6d6ea-161">Ha a hívó feladat folyamatban vagy a befejezési kommunikálni háttérfeladat van szüksége, ehhez meg kell valósítani egy olyan mechanizmus.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-161">If you require a background task to communicate with the calling task to indicate progress or completion, you must implement a mechanism for this.</span></span> <span data-ttu-id="6d6ea-162">Néhány példa:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-162">Some examples are:</span></span>

* <span data-ttu-id="6d6ea-163">Kijelző állapotértéket tárolóra írni, amely elérhető a felhasználói felületén vagy a hívónak tevékenységhez, figyelheti vagy ellenőriznie ezt az értéket, ha szükséges.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-163">Write a status indicator value to storage that is accessible to the UI or caller task, which can monitor or check this value when required.</span></span> <span data-ttu-id="6d6ea-164">Más adatokat, amelyek a háttérfeladat a hívónak kell visszaadnia felvehetők ugyanazt a tárhelyet.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-164">Other data that the background task must return to the caller can be placed into the same storage.</span></span>
* <span data-ttu-id="6d6ea-165">Figyeli a felhasználói felületen vagy a hívónak válasz várólista létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-165">Establish a reply queue that the UI or caller listens on.</span></span> <span data-ttu-id="6d6ea-166">A háttérben futó feladat üzeneteket küldhetnek a várólista jelző állapot és befejezése.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-166">The background task can send messages to the queue that indicate status and completion.</span></span> <span data-ttu-id="6d6ea-167">A háttérfeladat a hívónak kell visszaadnia adatok elhelyezhetők legyenek az üzeneteket.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-167">Data that the background task must return to the caller can be placed into the messages.</span></span> <span data-ttu-id="6d6ea-168">Ha az Azure Service Bus használ, akkor használhatja a **ReplyTo** és **CorrelationId** Tulajdonságok Ez a funkció végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-168">If you are using Azure Service Bus, you can use the **ReplyTo** and **CorrelationId** properties to implement this capability.</span></span> <span data-ttu-id="6d6ea-169">További információkért lásd: [a Service Bus Brokered Messaging korrelációs](http://www.cloudcasts.net/devguide/Default.aspx?id=13029).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-169">For more information, see [Correlation in Service Bus Brokered Messaging](http://www.cloudcasts.net/devguide/Default.aspx?id=13029).</span></span>
* <span data-ttu-id="6d6ea-170">Teszi közzé az API-t vagy a háttérben feladatból, amelyeken a felhasználói felületen vagy a hívónak állapotadatainak végpont.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-170">Expose an API or endpoint from the background task that the UI or caller can access to obtain status information.</span></span> <span data-ttu-id="6d6ea-171">A válasz, amely a hívó térjen vissza a háttérfeladat adatokat tartalmazhat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-171">Data that the background task must return to the caller can be included in the response.</span></span>
* <span data-ttu-id="6d6ea-172">Ezen a számon a felhasználói felületen vagy a hívónak egy API-n keresztül, előre definiált pontokon vagy a befejezési állapotának háttérfeladat rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-172">Have the background task call back to the UI or caller through an API to indicate status at predefined points or on completion.</span></span> <span data-ttu-id="6d6ea-173">Ez lehet helyi keletkező vagy a közzétételi és előfizetési mechanizmus keresztül.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-173">This might be through events raised locally or through a publish-and-subscribe mechanism.</span></span> <span data-ttu-id="6d6ea-174">A kérelem vagy esemény hasznos adat, amely a hívó térjen vissza a háttérfeladat tartalmazhat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-174">Data that the background task must return to the caller can be included in the request or event payload.</span></span>

## <a name="hosting-environment"></a><span data-ttu-id="6d6ea-175">Üzemeltetési környezet</span><span class="sxs-lookup"><span data-stu-id="6d6ea-175">Hosting environment</span></span>
<span data-ttu-id="6d6ea-176">Számos különböző Azure platform szolgáltatásaiból használatával tárolhatja, háttérfeladatok:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-176">You can host background tasks by using a range of different Azure platform services:</span></span>

* <span data-ttu-id="6d6ea-177">[**Azure-webalkalmazásokban és WebJobs**](#azure-web-apps-and-webjobs).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-177">[**Azure Web Apps and WebJobs**](#azure-web-apps-and-webjobs).</span></span> <span data-ttu-id="6d6ea-178">Webjobs-feladatok segítségével számos különböző típusú parancsfájlok vagy végrehajtható programok a webalkalmazás kontextusában alapuló egyéni feladatok végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-178">You can use WebJobs to execute custom jobs based on a range of different types of scripts or executable programs within the context of a web app.</span></span>
* <span data-ttu-id="6d6ea-179">[**Az Azure virtuális gépek**](#azure-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-179">[**Azure Virtual Machines**](#azure-virtual-machines).</span></span> <span data-ttu-id="6d6ea-180">Ha egy Windows-szolgáltatás vagy a Windows Feladatütemező használni szeretne, esetében gyakori, dedikált virtuális gépeken a háttérben feladatok futtatásához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-180">If you have a Windows service or want to use the Windows Task Scheduler, it is common to host your background tasks within a dedicated virtual machine.</span></span>
* <span data-ttu-id="6d6ea-181">[**Az Azure Batch**](#azure-batch).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-181">[**Azure Batch**](#azure-batch).</span></span> <span data-ttu-id="6d6ea-182">Kötegelt egy platformszolgáltatás, amely a ütemezi a számítási igényű munkát futtatásához a virtuális gépek felügyelt gyűjteménye.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-182">Batch is a platform service that schedules compute-intensive work to run on a managed collection of virtual machines.</span></span> <span data-ttu-id="6d6ea-183">Az automatikusan át tudja méretezni számítási erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-183">It can automatically scale compute resources.</span></span>
* <span data-ttu-id="6d6ea-184">[**Azure Tárolószolgáltatás**](#azure-container-service).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-184">[**Azure Container Service**](#azure-container-service).</span></span> <span data-ttu-id="6d6ea-185">Az Azure Tárolószolgáltatás egy tároló üzemeltetési környezet az Azure biztosít.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-185">Azure Container Service provides a container hosting environment on Azure.</span></span> 
* <span data-ttu-id="6d6ea-186">[**Azure Felhőszolgáltatások**](#azure-cloud-services).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-186">[**Azure Cloud Services**](#azure-cloud-services).</span></span> <span data-ttu-id="6d6ea-187">Írhat kódot a szerepkör, amely végrehajtja a háttérfeladatként belül.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-187">You can write code within a role that executes as a background task.</span></span>

<span data-ttu-id="6d6ea-188">Az alábbi szakaszok ismertetik részletesebben ezeket a beállításokat, és szempontokat tartalmaz, amelyek segítségével válassza ki a megfelelő beállítást tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-188">The following sections describe each of these options in more detail, and include considerations to help you choose the appropriate option.</span></span>

### <a name="azure-web-apps-and-webjobs"></a><span data-ttu-id="6d6ea-189">Azure-webalkalmazásokban és WebJobs</span><span class="sxs-lookup"><span data-stu-id="6d6ea-189">Azure Web Apps and WebJobs</span></span>

<span data-ttu-id="6d6ea-190">Azure WebJobs használhatja az Azure Web App háttérfeladatok egyéni feladatok végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-190">You can use Azure WebJobs to execute custom jobs as background tasks within an Azure Web App.</span></span> <span data-ttu-id="6d6ea-191">Webjobs-feladatok futtatása a webalkalmazás kontextusában folyamatosan működő folyamat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-191">WebJobs run within the context of your web app as a continuous process.</span></span> <span data-ttu-id="6d6ea-192">Webjobs-feladatok is futtathatja egy eseményindító esemény bekövetkeztekor Azure Scheduler vagy külső tényezőkkel, például a tárolási blobokat és üzenetsorokat változásokat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-192">WebJobs also run in response to a trigger event from Azure Scheduler or external factors, such as changes to storage blobs and message queues.</span></span> <span data-ttu-id="6d6ea-193">Feladatok indítása és az igény szerinti leállítása és leállítása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-193">Jobs can be started and stopped on demand, and shut down gracefully.</span></span> <span data-ttu-id="6d6ea-194">Egy folyamatosan futó webjobs-feladat sikertelen lesz, ha a rendszer automatikusan újraindítja.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-194">If a continuously running WebJob fails, it is automatically restarted.</span></span> <span data-ttu-id="6d6ea-195">Próbálkozzon újra, és hiba műveletek esetében konfigurálhatók.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-195">Retry and error actions are configurable.</span></span>

<span data-ttu-id="6d6ea-196">Amikor konfigurál egy webjobs-feladatot:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-196">When you configure a WebJob:</span></span>

* <span data-ttu-id="6d6ea-197">Ha azt szeretné, hogy a feladat egy eseményvezérelt eseményindító válaszolni, konfigurálnia kell azt **folyamatos Futtatás**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-197">If you want the job to respond to an event-driven trigger, you should configure it as **Run continuously**.</span></span> <span data-ttu-id="6d6ea-198">A parancsfájl vagy a program a hely/wwwroot/app_data/feladatok/folyamatos mappájában tárolja.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-198">The script or program is stored in the folder named site/wwwroot/app_data/jobs/continuous.</span></span>
* <span data-ttu-id="6d6ea-199">Ha azt szeretné, hogy a feladat ütemezés adatvezérelt eseményindító válaszolni, konfigurálnia kell azt **ütemezhető**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-199">If you want the job to respond to a schedule-driven trigger, you should configure it as **Run on a schedule**.</span></span> <span data-ttu-id="6d6ea-200">A parancsfájl vagy a program hely/wwwroot/app_data/feladatok/indított mappájában tárolja.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-200">The script or program is stored in the folder named site/wwwroot/app_data/jobs/triggered.</span></span>
* <span data-ttu-id="6d6ea-201">Ha úgy dönt, a **igény szerint futtatható** kapcsolót, ha konfigurál egy feladatot, végrehajtja a ugyanazt a kódot a **ütemezhető** indítás után lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-201">If you choose the **Run on demand** option when you configure a job, it will execute the same code as the **Run on a schedule** option when you start it.</span></span>

<span data-ttu-id="6d6ea-202">Azure webjobs-feladatok futtathatók a védőfal a webalkalmazás.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-202">Azure WebJobs run within the sandbox of the web app.</span></span> <span data-ttu-id="6d6ea-203">Ez azt jelenti, hogy ezek környezeti változók eléréséhez, és adatokat, például kapcsolati karakterláncok megosztása a webalkalmazást.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-203">This means that they can access environment variables and share information, such as connection strings, with the web app.</span></span> <span data-ttu-id="6d6ea-204">A feladat hozzáfér a gépet, hogy fut a feladat egyedi azonosítója.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-204">The job has access to the unique identifier of the machine that is running the job.</span></span> <span data-ttu-id="6d6ea-205">A kapcsolódási karakterlánc **AzureWebJobsStorage** biztosít hozzáférést az Azure storage-üzenetsorok, blobok és táblák az alkalmazásadatok, és az access Service Bus üzenetkezelés és a kommunikációhoz.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-205">The connection string named **AzureWebJobsStorage** provides access to Azure storage queues, blobs, and tables for application data, and access to Service Bus for messaging and communication.</span></span> <span data-ttu-id="6d6ea-206">A kapcsolódási karakterlánc **AzureWebJobsDashboard** Feladatművelet naplófájlok hozzáférést biztosít.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-206">The connection string named **AzureWebJobsDashboard** provides access to the job action log files.</span></span>

<span data-ttu-id="6d6ea-207">Azure webjobs-feladatok a következő jellemzőkkel rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-207">Azure WebJobs have the following characteristics:</span></span>

* <span data-ttu-id="6d6ea-208">**Biztonsági**: webjobs-feladatok védi a webalkalmazás üzembe helyezési hitelesítő adatokat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-208">**Security**: WebJobs are protected by the deployment credentials of the web app.</span></span>
* <span data-ttu-id="6d6ea-209">**Támogatott fájltípusok**: bash rendszerhéj-parancsfájlok (.sh), a PHP-parancsfájlok (.php), a Python-parancsfájlok (.py), a JavaScript-kódot (.js) és a végrehajtható programok (.exe és parancsfájlok (.cmd), parancsfájlok (.bat), PowerShell-parancsfájlokat (.ps1) használatával webjobs-feladatok meghatározása .jar és egyebek).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-209">**Supported file types**: You can define WebJobs by using command scripts (.cmd), batch files (.bat), PowerShell scripts (.ps1), bash shell scripts (.sh), PHP scripts (.php), Python scripts (.py), JavaScript code (.js), and executable programs (.exe, .jar, and more).</span></span>
* <span data-ttu-id="6d6ea-210">**Központi telepítési**: használatával telepíthet parancsfájlok és végrehajtható fájlok a [Azure-portálon](/azure/app-service-web/web-sites-create-web-jobs), használatával [Visual Studio](/azure/app-service-web/websites-dotnet-deploy-webjobs), segítségével a [Azure WebJobs SDK](/azure/azure-webjobs-sdk), vagy átmásolni közvetlenül a következő helyeken:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-210">**Deployment**: You can deploy scripts and executables by using the [Azure portal](/azure/app-service-web/web-sites-create-web-jobs), by using [Visual Studio](/azure/app-service-web/websites-dotnet-deploy-webjobs), by using the [Azure WebJobs SDK](/azure/azure-webjobs-sdk), or by copying them directly to the following locations:</span></span>
  * <span data-ttu-id="6d6ea-211">Az indított végrehajtási: hely/wwwroot/app_data/feladatok/indított / {feladat neve}</span><span class="sxs-lookup"><span data-stu-id="6d6ea-211">For triggered execution: site/wwwroot/app_data/jobs/triggered/{job name}</span></span>
  * <span data-ttu-id="6d6ea-212">A folyamatos végrehajtás: hely/wwwroot/app_data/feladatok/folyamatos / {feladat neve}</span><span class="sxs-lookup"><span data-stu-id="6d6ea-212">For continuous execution: site/wwwroot/app_data/jobs/continuous/{job name}</span></span>
* <span data-ttu-id="6d6ea-213">**Naplózás**: Console.Out INFO (megjelölt) értéke.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-213">**Logging**: Console.Out is treated (marked) as INFO.</span></span> <span data-ttu-id="6d6ea-214">Console.Error Hibaként kezelt.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-214">Console.Error is treated as ERROR.</span></span> <span data-ttu-id="6d6ea-215">Figyelés és diagnosztikai információk az Azure portál használatával végezheti el.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-215">You can access monitoring and diagnostics information by using the Azure portal.</span></span> <span data-ttu-id="6d6ea-216">Naplófájlok letöltheti közvetlenül a webhelyről.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-216">You can download log files directly from the site.</span></span> <span data-ttu-id="6d6ea-217">Menti a következő helyeken:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-217">They are saved in the following locations:</span></span>
  * <span data-ttu-id="6d6ea-218">Az indított végrehajtási: Vfs/data/feladatok/indított/feladat neve</span><span class="sxs-lookup"><span data-stu-id="6d6ea-218">For triggered execution: Vfs/data/jobs/triggered/jobName</span></span>
  * <span data-ttu-id="6d6ea-219">A folyamatos végrehajtás: Vfs/data/feladatok/folyamatos/feladat neve</span><span class="sxs-lookup"><span data-stu-id="6d6ea-219">For continuous execution: Vfs/data/jobs/continuous/jobName</span></span>
* <span data-ttu-id="6d6ea-220">**Konfigurációs**: a portálon, a REST API-t és a PowerShell segítségével konfigurálhatja a webjobs-feladatok.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-220">**Configuration**: You can configure WebJobs by using the portal, the REST API, and PowerShell.</span></span> <span data-ttu-id="6d6ea-221">A feladat parancsfájlként legfelső szintű könyvtárába settings.job nevű konfigurációs fájl segítségével adja meg a feladat konfigurációs információkat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-221">You can use a configuration file named settings.job in the same root directory as the job script to provide configuration information for a job.</span></span> <span data-ttu-id="6d6ea-222">Példa:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-222">For example:</span></span>
  * <span data-ttu-id="6d6ea-223">{"stopping_wait_time": 60}</span><span class="sxs-lookup"><span data-stu-id="6d6ea-223">{ "stopping_wait_time": 60 }</span></span>
  * <span data-ttu-id="6d6ea-224">{"is_singleton": true}</span><span class="sxs-lookup"><span data-stu-id="6d6ea-224">{ "is_singleton": true }</span></span>

#### <a name="considerations"></a><span data-ttu-id="6d6ea-225">Megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="6d6ea-225">Considerations</span></span>

* <span data-ttu-id="6d6ea-226">Alapértelmezés szerint a webjobs-feladatok és a webes alkalmazás mérete.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-226">By default, WebJobs scale with the web app.</span></span> <span data-ttu-id="6d6ea-227">Azonban konfigurálhatja úgy, hogy egyetlen példány futhat feladatok a **is_singleton** konfigurációs tulajdonság **igaz**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-227">However, you can configure jobs to run on single instance by setting the **is_singleton** configuration property to **true**.</span></span> <span data-ttu-id="6d6ea-228">Egypéldányos webjobs-feladatok lehetnek hasznosak, amelyeknél nem szeretné méretezheti vagy egyidejűleg több futtató tevékenységek példányok, például újraindexelés, az adatok elemzése és a hasonló feladatok.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-228">Single instance WebJobs are useful for tasks that you do not want to scale or run as simultaneous multiple instances, such as reindexing, data analysis, and similar tasks.</span></span>
* <span data-ttu-id="6d6ea-229">A feladatok a webalkalmazás teljesítményére gyakorolt hatásának minimalizálása érdekében, célszerű egy üres Azure Web App-példány a webjobs-feladatok, amelyek hosszú ideig futniuk gazdagép vagy az erőforrás egy új App Service-csomag intenzív.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-229">To minimize the impact of jobs on the performance of the web app, consider creating an empty Azure Web App instance in a new App Service plan to host WebJobs that may be long running or resource intensive.</span></span>

### <a name="more-information"></a><span data-ttu-id="6d6ea-230">További információ</span><span class="sxs-lookup"><span data-stu-id="6d6ea-230">More information</span></span>
* <span data-ttu-id="6d6ea-231">[Azure webjobs-feladatok ajánlott erőforrások](/azure/app-service-web/websites-webjobs-resources) jeleníti meg a számos hasznos erőforrásokat, letöltéseket és minták webjobs-feladatok.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-231">[Azure WebJobs recommended resources](/azure/app-service-web/websites-webjobs-resources) lists the many useful resources, downloads, and samples for WebJobs.</span></span>

### <a name="azure-virtual-machines"></a><span data-ttu-id="6d6ea-232">Azure-alapú virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="6d6ea-232">Azure Virtual Machines</span></span>
<span data-ttu-id="6d6ea-233">Háttérfeladatok is elegendő lehet, hogy megakadályozza, hogy a telepített Azure Web Apps vagy Felhőszolgáltatások, vagy ezeket a beállításokat nem lehet kényelmesen használható.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-233">Background tasks might be implemented in a way that prevents them from being deployed to Azure Web Apps or Cloud Services, or these options might not be convenient.</span></span> <span data-ttu-id="6d6ea-234">Tipikus többek között a központi Windows-szolgáltatások, és külső segédprogramok és végrehajtható programokat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-234">Typical examples are Windows services, and third-party utilities and executable programs.</span></span> <span data-ttu-id="6d6ea-235">Egy másik példa lehet egy végrehajtási környezet, amely eltér attól, hogy az alkalmazást futtató írt programot.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-235">Another example might be programs written for an execution environment that is different than that hosting the application.</span></span> <span data-ttu-id="6d6ea-236">Lehet például egy olyan Windows vagy a .NET-alkalmazás végrehajtani kívánt Unix vagy Linux programot.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-236">For example, it might be a Unix or Linux program that you want to execute from a Windows or .NET application.</span></span> <span data-ttu-id="6d6ea-237">Az Azure virtuális gép operációs rendszerek számos lehetőségek közül választhat, és a szolgáltatás vagy a végrehajtható fájl futtatásához a virtuális gépen.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-237">You can choose from a range of operating systems for an Azure virtual machine, and run your service or executable on that virtual machine.</span></span>

<span data-ttu-id="6d6ea-238">Válassza ki, mikor érdemes használni a virtuális gépek meghatározásához lásd: [Azure App Service szolgáltatások, a Cloud Services és a virtuális gépek összevetése](/azure/app-service-web/choose-web-site-cloud-service-vm/).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-238">To help you choose when to use Virtual Machines, see [Azure App Services, Cloud Services and Virtual Machines comparison](/azure/app-service-web/choose-web-site-cloud-service-vm/).</span></span> <span data-ttu-id="6d6ea-239">A virtuális gépek beállításokkal kapcsolatos további információkért lásd: [Azure virtuális gép és a felhőalapú szolgáltatás mérete](http://msdn.microsoft.com/library/azure/dn197896.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-239">For information about the options for Virtual Machines, see [Virtual Machine and Cloud Service sizes for Azure](http://msdn.microsoft.com/library/azure/dn197896.aspx).</span></span> <span data-ttu-id="6d6ea-240">Az operációs rendszerek és virtuális gépek számára elérhető előre elkészített képek kapcsolatos további információkért lásd: [Azure virtuális gépek piactér](https://azure.microsoft.com/gallery/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-240">For more information about the operating systems and prebuilt images that are available for Virtual Machines, see [Azure Virtual Machines Marketplace](https://azure.microsoft.com/gallery/virtual-machines/).</span></span>

<span data-ttu-id="6d6ea-241">A háttérben futó feladat egy különálló virtuális gép indításához van a lehetőségek közül:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-241">To initiate the background task in a separate virtual machine, you have a range of options:</span></span>

* <span data-ttu-id="6d6ea-242">Közvetlenül az alkalmazásból az igény szerinti a feladatot hajthat végre egy kérést küld egy végpontot, amely a feladatütemezés elérhetővé teszi.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-242">You can execute the task on demand directly from your application by sending a request to an endpoint that the task exposes.</span></span> <span data-ttu-id="6d6ea-243">Ez megfelel a feladathoz szükséges adatokat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-243">This passes in any data that the task requires.</span></span> <span data-ttu-id="6d6ea-244">Ehhez a végponthoz hívja meg a feladatot.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-244">This endpoint invokes the task.</span></span>
* <span data-ttu-id="6d6ea-245">Beállíthatja, hogy a feladat ütemezési vagy a választott operációs rendszerben elérhető időzítő segítségével ütemezett futtatását.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-245">You can configure the task to run on a schedule by using a scheduler or timer that is available in your chosen operating system.</span></span> <span data-ttu-id="6d6ea-246">Például a Windows használhatja a Windows Feladatütemező parancsfájlok és a feladatok végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-246">For example, on Windows you can use Windows Task Scheduler to execute scripts and tasks.</span></span> <span data-ttu-id="6d6ea-247">Vagy, ha a virtuális gépen telepített SQL Server, az SQL Server Agent parancsfájlok és a feladatok végrehajtásához használhatja.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-247">Or, if you have SQL Server installed on the virtual machine, you can use the SQL Server Agent to execute scripts and tasks.</span></span>
* <span data-ttu-id="6d6ea-248">Azure Scheduler segítségével kezdeményezni a feladat, egy üzenet, amely figyeli a feladat várólistára hozzáadásával vagy egy kérést küld, amely a feladatütemezés elérhetővé teszi az API-k.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-248">You can use Azure Scheduler to initiate the task by adding a message to a queue that the task listens on, or by sending a request to an API that the task exposes.</span></span>

<span data-ttu-id="6d6ea-249">A korábbi szakaszban [eseményindítók](#triggers) hogyan háttérfeladatok is kezdeményezhető további információt.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-249">See the earlier section [Triggers](#triggers) for more information about how you can initiate background tasks.</span></span>  

#### <a name="considerations"></a><span data-ttu-id="6d6ea-250">Megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="6d6ea-250">Considerations</span></span>
<span data-ttu-id="6d6ea-251">Amikor szükségességéről központi telepítése a háttérben futó feladatot egy Azure virtuális gépen, vegye figyelembe a következő szempontokat:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-251">Consider the following points when you are deciding whether to deploy background tasks in an Azure virtual machine:</span></span>

* <span data-ttu-id="6d6ea-252">Üzemeltetési háttérfeladatok külön Azure virtuális gépen, ami rugalmasságot biztosít, és lehetővé teszi a kezdeményezés, végrehajtás, ütemezés és erőforrás-elosztás pontosan meghatározhatja.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-252">Hosting background tasks in a separate Azure virtual machine provides flexibility and allows precise control over initiation, execution, scheduling, and resource allocation.</span></span> <span data-ttu-id="6d6ea-253">Azonban futásidejű költség esetén megnöveli a virtuális gépek csak a háttér-feladatok futtatásához telepítenie kell.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-253">However, it will increase runtime cost if a virtual machine must be deployed just to run background tasks.</span></span>
* <span data-ttu-id="6d6ea-254">Nincs a figyelheti a feladatokat az Azure-portálon, és nincs automatikus újraindítás képes a sikertelen feladatok – Bár a virtuális gép alapszintű állapotának figyelése és használatával kezelni nem létesítmény a [Azure Resource Manager parancsmagok](https://msdn.microsoft.com/library/mt125356.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-254">There is no facility to monitor the tasks in the Azure portal and no automated restart capability for failed tasks--although you can monitor the basic status of the virtual machine and manage it by using the  [Azure Resource Manager Cmdlets](https://msdn.microsoft.com/library/mt125356.aspx).</span></span> <span data-ttu-id="6d6ea-255">Azonban nem állnak rendelkezésre folyamatok és a számítási csomópontok szálak szabályozására.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-255">However, there are no facilities to control processes and threads in compute nodes.</span></span> <span data-ttu-id="6d6ea-256">Általában virtuális gépek használata szükséges további annak érdekében, hogy olyan mechanizmus, amely adatokat gyűjt a feladat instrumentation, és a virtuális gép operációs rendszerről megvalósításához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-256">Typically, using a virtual machine will require additional effort to implement a mechanism that collects data from instrumentation in the task, and from the operating system in the virtual machine.</span></span> <span data-ttu-id="6d6ea-257">Egy olyan megoldás, amely megfelelő lehet, hogy használja a [System Center felügyeleti csomag az Azure-](https://www.microsoft.com/download/details.aspx?id=50013).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-257">One solution that might be appropriate is to use the [System Center Management Pack for Azure](https://www.microsoft.com/download/details.aspx?id=50013).</span></span>
* <span data-ttu-id="6d6ea-258">Akkor érdemes létrehozása a figyelési mintavételek menüpontban, HTTP-végpontokról keresztül elérhetővé tett tárolókra.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-258">You might consider creating monitoring probes that are exposed through HTTP endpoints.</span></span> <span data-ttu-id="6d6ea-259">Ezek mintavételt kódjának sikerült Állapotellenőrzések végrehajtásához, működéssel kapcsolatos adatokat és a statisztika--gyűjthet vagy hibainformációk collate és vissza egy kezelési alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-259">The code for these probes could perform health checks, collect operational information and statistics--or collate error information and return it to a management application.</span></span> <span data-ttu-id="6d6ea-260">További információkért lásd: [állapotfigyelő végpont figyelési mintát](http://msdn.microsoft.com/library/dn589789.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-260">For more information, see [Health Endpoint Monitoring Pattern](http://msdn.microsoft.com/library/dn589789.aspx).</span></span>

#### <a name="more-information"></a><span data-ttu-id="6d6ea-261">További információ</span><span class="sxs-lookup"><span data-stu-id="6d6ea-261">More information</span></span>
* <span data-ttu-id="6d6ea-262">[Virtuális gépek](https://azure.microsoft.com/services/virtual-machines/) az Azure-on</span><span class="sxs-lookup"><span data-stu-id="6d6ea-262">[Virtual Machines](https://azure.microsoft.com/services/virtual-machines/) on Azure</span></span>
* [<span data-ttu-id="6d6ea-263">Az Azure Virtual Machines – gyakori kérdések</span><span class="sxs-lookup"><span data-stu-id="6d6ea-263">Azure Virtual Machines FAQ</span></span>](/azure/virtual-machines/virtual-machines-linux-classic-faq?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json)

### <a name="azure-batch"></a><span data-ttu-id="6d6ea-264">Azure Batch</span><span class="sxs-lookup"><span data-stu-id="6d6ea-264">Azure Batch</span></span> 

<span data-ttu-id="6d6ea-265">Érdemes lehet [Azure Batch](/azure/batch/) kell-e nagy, párhuzamos nagy teljesítményű számítástechnikai rendszerek (HPC-) alkalmazásokat és szolgáltatásokat futtathatnak több tíz, száz vagy ezer virtuális gépek között.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-265">Consider [Azure Batch](/azure/batch/) if you need to run large, parallel high-performance computing (HPC) workloads across tens, hundreds, or thousands of VMs.</span></span>  

<span data-ttu-id="6d6ea-266">A Batch szolgáltatás kiosztja a virtuális gépek, feladatokat rendelhet a virtuális gépeket, a feladatok fut, és kíséri.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-266">The Batch service provisions the VMs, assign tasks to the VMs, runs the tasks, and monitors the progress.</span></span> <span data-ttu-id="6d6ea-267">Kötegelt automatikusan lehet terjeszteni a virtuális gépeket, a munkaterhelés adott válaszként.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-267">Batch can automatically scale out the VMs in response to the workload.</span></span> <span data-ttu-id="6d6ea-268">Kötegelt is biztosít a feladatütemezés.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-268">Batch also provides job scheduling.</span></span> <span data-ttu-id="6d6ea-269">Az Azure Batch a Linux és a Windows virtuális gépeket is támogatja.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-269">Azure Batch supports both Linux and Windows VMs.</span></span>

#### <a name="considerations"></a><span data-ttu-id="6d6ea-270">Megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="6d6ea-270">Considerations</span></span> 

<span data-ttu-id="6d6ea-271">Kötegelt jól belsőleg párhuzamos munkaterhelések működik.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-271">Batch works well with intrinsically parallel workloads.</span></span> <span data-ttu-id="6d6ea-272">Azt is párhuzamos számításokat végén csökkentse lépéssel, vagy futtassa [Message Passing Interface (MPI) alkalmazások](/azure/batch/batch-mpi) párhuzamos feladatokhoz szükséges üzenet sikeres csomópontok között.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-272">It can also perform parallel calculations with a reduce step at the end, or run [Message Passing Interface (MPI) applications](/azure/batch/batch-mpi) for parallel tasks that require message passing between nodes.</span></span> 

<span data-ttu-id="6d6ea-273">Egy Azure feladat fut csomópontok (VM) készletét.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-273">An Azure Batch job runs on a pool of nodes (VMs).</span></span> <span data-ttu-id="6d6ea-274">Egy megoldás, a készlet csak akkor, amikor szükséges, és törölje a feladat befejezése után.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-274">One approach is to allocate a pool only when needed and then delete it after the job completes.</span></span> <span data-ttu-id="6d6ea-275">Ez kihasználtságát a lehető legnagyobbra, mert a csomópontok nem üresjárati, de a feladat meg kell várnia, hogy csomópontokat kiosztani.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-275">This maximizes utilization, because nodes are not idle, but the job must wait for nodes to be allocated.</span></span> <span data-ttu-id="6d6ea-276">Alternatív megoldásként egy időben készletet is létrehozhat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-276">Alternatively, you can create a pool ahead of time.</span></span> <span data-ttu-id="6d6ea-277">Ezt a megközelítést minimálisra csökkenti a feladat elindításához szükséges, de a csomópontokra, amelyeket elhelyezkedik rendelkező eredményez tétlen lehet idejét.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-277">That approach minimizes the time that it takes for a job to start, but can result in having nodes that sit idle.</span></span> <span data-ttu-id="6d6ea-278">További információkért lásd: [készlet és a számítási csomópont élettartama](/azure/batch/batch-api-basics#pool-and-compute-node-lifetime).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-278">For more information, see [Pool and compute node lifetime](/azure/batch/batch-api-basics#pool-and-compute-node-lifetime).</span></span>

#### <a name="more-information"></a><span data-ttu-id="6d6ea-279">További információ</span><span class="sxs-lookup"><span data-stu-id="6d6ea-279">More information</span></span> 

* [<span data-ttu-id="6d6ea-280">Belsőleg párhuzamos alkalmazásokat és szolgáltatásokat futtathatnak kötegelt</span><span class="sxs-lookup"><span data-stu-id="6d6ea-280">Run intrinsically parallel workloads with Batch</span></span>](/azure/batch/batch-technical-overview) 
* [<span data-ttu-id="6d6ea-281">Kötegelt nagyméretű párhuzamos számítási megoldások fejlesztése</span><span class="sxs-lookup"><span data-stu-id="6d6ea-281">Develop large-scale parallel compute solutions with Batch</span></span>](/azure/batch/batch-api-basics) 
* [<span data-ttu-id="6d6ea-282">A számítási munkaterhelés nagy méretű kötegelt és HPC megoldások</span><span class="sxs-lookup"><span data-stu-id="6d6ea-282">Batch and HPC solutions for large-scale computing workloads</span></span>](/azure/batch/batch-hpc-solutions)

### <a name="azure-container-service"></a><span data-ttu-id="6d6ea-283">Azure Container Service</span><span class="sxs-lookup"><span data-stu-id="6d6ea-283">Azure Container Service</span></span> 

<span data-ttu-id="6d6ea-284">Az Azure Tárolószolgáltatás lehetővé teszi, hogy konfigurálhatja, és egy fürt indexelése alkalmazások futtatásához Azure virtuális gépek kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-284">Azure Container Service lets you configure and manage a cluster of VMs in Azure to run containerized applications.</span></span> <span data-ttu-id="6d6ea-285">Kiválaszthatja, hogy a Docker Swarm, a DC/OS vagy Kubernetes biztosít az orchestration.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-285">It provides a choice of Docker Swarm, DC/OS, or Kubernetes for orchestration.</span></span> 

<span data-ttu-id="6d6ea-286">Tárolók a feladatok a háttérben futó hasznos lehet.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-286">Containers can be useful for running background jobs.</span></span> <span data-ttu-id="6d6ea-287">A következő előnyöket, többek között:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-287">Some of the benefits include:</span></span> 

- <span data-ttu-id="6d6ea-288">Tárolók támogatja a nagy sűrűségű üzemeltetéséhez.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-288">Containers support high-density hosting.</span></span> <span data-ttu-id="6d6ea-289">Elkülönítheti a tárolóban lévő háttérfeladat során egyes virtuális gépek több tároló helyezi el.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-289">You can isolate a background task in a container, while placing multiple containers in each VM.</span></span>
- <span data-ttu-id="6d6ea-290">A tároló orchestrator terheléselosztás, a belső hálózatra és egyéb konfigurációs feladatok konfigurálása belső terheléselosztási kezeli.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-290">The container orchestrator handles internal load balancing, configuring the internal network, and other configuration tasks.</span></span>
- <span data-ttu-id="6d6ea-291">Tárolók megkezdődött, és szükség szerint leállt.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-291">Containers can be started and stopped as needed.</span></span> 
- <span data-ttu-id="6d6ea-292">Azure tároló beállításjegyzék lehetővé teszi a tárolók Azure határain belül regisztrálni.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-292">Azure Container Registry allows you to register your containers inside Azure boundaries.</span></span> <span data-ttu-id="6d6ea-293">Ez biztonsági, adatvédelmi és közelhatás előnyöket tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-293">This comes with security, privacy, and proximity benefits.</span></span> 

#### <a name="considerations"></a><span data-ttu-id="6d6ea-294">Megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="6d6ea-294">Considerations</span></span>

- <span data-ttu-id="6d6ea-295">Egy tároló orchestrator használata ismeretét igényli.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-295">Requires an understanding of how to use a container orchestrator.</span></span> <span data-ttu-id="6d6ea-296">Attól függően, hogy a DevOps csapat skillset ez feltétlenül nem kapcsolatos problémát.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-296">Depending on the skillset of your DevOps team, this may or may not be an issue.</span></span>  
- <span data-ttu-id="6d6ea-297">Tárolószolgáltatás IaaS környezetben futtat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-297">Container Service runs in an IaaS environment.</span></span> <span data-ttu-id="6d6ea-298">Azt látja, hogy a fürt egy dedikált virtuális hálózaton belüli virtuális gépek.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-298">It provisions a cluster of VMs inside a dedicated VNet.</span></span> 

#### <a name="more-information"></a><span data-ttu-id="6d6ea-299">További információ</span><span class="sxs-lookup"><span data-stu-id="6d6ea-299">More information</span></span> 

* [<span data-ttu-id="6d6ea-300">Bevezetés az Azure Tárolószolgáltatás-megoldások tároló Docker-tároló</span><span class="sxs-lookup"><span data-stu-id="6d6ea-300">Introduction to Docker container hosting solutions with Azure Container Service</span></span>](/azure/container-service/container-service-intro) 
* [<span data-ttu-id="6d6ea-301">Docker-tároló TITKOS nyilvántartó bemutatása</span><span class="sxs-lookup"><span data-stu-id="6d6ea-301">Introduction to private Docker container registries</span></span>](/azure/container-registry/container-registry-intro) 

### <a name="azure-cloud-services"></a><span data-ttu-id="6d6ea-302">Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="6d6ea-302">Azure Cloud Services</span></span> 
<span data-ttu-id="6d6ea-303">A webes szerepkör vagy egy külön feldolgozói szerepkör háttérfeladatok hajthat végre.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-303">You can execute background tasks within a web role or in a separate worker role.</span></span> <span data-ttu-id="6d6ea-304">El, hogy a feldolgozói szerepkör használja, fontolja meg a méretezhetőség és a rugalmasság követelmények, a feladatütemezés élettartama-e, amikor kibocsátási ütemben történik, biztonsági, hibatűrő képesség összevonását, versengés, összetettségét, és a logikai architektúrája.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-304">When you are deciding whether to use a worker role, consider scalability and elasticity requirements, task lifetime, release cadence, security, fault tolerance, contention, complexity, and the logical architecture.</span></span> <span data-ttu-id="6d6ea-305">További információkért lásd: [számítási erőforrás-összevonási mintát](http://msdn.microsoft.com/library/dn589778.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-305">For more information, see [Compute Resource Consolidation Pattern](http://msdn.microsoft.com/library/dn589778.aspx).</span></span>

<span data-ttu-id="6d6ea-306">Többféleképpen is a Felhőszolgáltatások szerepkörön belüli háttérfeladatok megvalósításához:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-306">There are several ways to implement background tasks within a Cloud Services role:</span></span>

* <span data-ttu-id="6d6ea-307">Hozzon létre egy megvalósítása a **RoleEntryPoint** osztályt a szerepkör és a módszerekkel hajtható végre a háttérben futó feladatot.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-307">Create an implementation of the **RoleEntryPoint** class in the role and use its methods to execute background tasks.</span></span> <span data-ttu-id="6d6ea-308">A feladatok WaIISHost.exe környezetében futnak.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-308">The tasks run in the context of WaIISHost.exe.</span></span> <span data-ttu-id="6d6ea-309">Használhatnak a **GetSetting** metódusában a **CloudConfigurationManager** osztály betölteni a konfigurációs beállításokat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-309">They can use the **GetSetting** method of the **CloudConfigurationManager** class to load configuration settings.</span></span> <span data-ttu-id="6d6ea-310">További információkért lásd: [életciklus](#lifecycle).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-310">For more information, see [Lifecycle](#lifecycle).</span></span>
* <span data-ttu-id="6d6ea-311">Indítási feladatok segítségével hajtható végre a háttérben futó feladatot, ha az alkalmazás indítása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-311">Use startup tasks to execute background tasks when the application starts.</span></span> <span data-ttu-id="6d6ea-312">A feladatok a háttérben futnak kényszerítéséhez állítsa be a **taskType** tulajdonságot **háttér** (Ha ezt nem teszi meg, az alkalmazás indítási folyamat fog halt és várjon, amíg a feladat befejezéséhez).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-312">To force the tasks to continue to run in the background, set the **taskType** property to **background** (if you do not do this, the application startup process will halt and wait for the task to finish).</span></span> <span data-ttu-id="6d6ea-313">További információkért lásd: [indítási feladatok futtatása az Azure-ban](/azure/cloud-services/cloud-services-startup-tasks).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-313">For more information, see [Run startup tasks in Azure](/azure/cloud-services/cloud-services-startup-tasks).</span></span>
* <span data-ttu-id="6d6ea-314">A WebJobs SDK segítségével háttér feladatokhoz, mint az indítási feladatok indított webjobs-feladatok végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-314">Use the WebJobs SDK to implement background tasks such as WebJobs that are initiated as a startup task.</span></span> <span data-ttu-id="6d6ea-315">További információkért lásd: [.NET webjobs-feladat létrehozása az Azure App Service](/azure/app-service-web/websites-dotnet-webjobs-sdk-get-started).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-315">For more information, see [Create a .NET WebJob in Azure App Service](/azure/app-service-web/websites-dotnet-webjobs-sdk-get-started).</span></span>
* <span data-ttu-id="6d6ea-316">Egy indítási feladat segítségével telepíthet egy Windows-szolgáltatás, amely egy vagy több háttérfeladatok végrehajtja.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-316">Use a startup task to install a Windows service that executes one or more background tasks.</span></span> <span data-ttu-id="6d6ea-317">Meg kell adni a **taskType** tulajdonságot **háttér** , hogy a szolgáltatás hajtja végre a háttérben.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-317">You must set the **taskType** property to **background** so that the service executes in the background.</span></span> <span data-ttu-id="6d6ea-318">További információkért lásd: [indítási feladatok futtatása az Azure-ban](/azure/cloud-services/cloud-services-startup-tasks).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-318">For more information, see [Run startup tasks in Azure](/azure/cloud-services/cloud-services-startup-tasks).</span></span>

<span data-ttu-id="6d6ea-319">A feladatok a háttérben futó a webes szerepkör fő előnye a Mentés az üzemeltetési költségek, mivel nincs központi telepítése a további szerepkörök nem kötelező.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-319">The main advantage of running background tasks in the web role is the saving in hosting costs because there is no requirement to deploy additional roles.</span></span>

<span data-ttu-id="6d6ea-320">Háttér-feladatok futtatása az a feldolgozói szerepkör több előnye is van:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-320">Running background tasks in a worker role has several advantages:</span></span>

* <span data-ttu-id="6d6ea-321">Ez lehetővé teszi, hogy az egyes szerepkör külön méretezés kezelésére.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-321">It allows you to manage scaling separately for each type of role.</span></span> <span data-ttu-id="6d6ea-322">Például szükség lehet a jelenlegi terhelés támogatásához a webes szerepkör több példányát, de kevesebb példányt a feldolgozói szerepkör, amely végrehajtja a háttérben futó feladatot.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-322">For example, you might need more instances of a web role to support the current load, but fewer instances of the worker role that executes background tasks.</span></span> <span data-ttu-id="6d6ea-323">Háttér tevékenység számítási példányokért elkülönítve a felhasználói felület szerepkörök skálázás, csökkentheti üzemeltetési költségek elfogadható teljesítmény megőrzése.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-323">By scaling background task compute instances separately from the UI roles, you can reduce hosting costs, while maintaining acceptable performance.</span></span>
* <span data-ttu-id="6d6ea-324">A feldolgozási terhelést jelenthet a webes szerepkör alapján háttérfeladatok szervezi azt.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-324">It offloads the processing overhead for background tasks from the web role.</span></span> <span data-ttu-id="6d6ea-325">Rugalmas maradjanak meg a webes szerepkör, amely a felhasználói Felületet biztosít, és azt jelentheti, kevesebb példányt egy adott kötet azon felhasználók kérelmeinek támogatásához szükséges.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-325">The web role that provides the UI can remain responsive, and it may mean fewer instances are required to support a given volume of requests from users.</span></span>
* <span data-ttu-id="6d6ea-326">Lehetővé teszi aggályokat elkülönítése végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-326">It allows you to implement separation of concerns.</span></span> <span data-ttu-id="6d6ea-327">Minden felhasználóiszerepkör-típus is egyértelműen meghatározott és kapcsolódó feladatok meghatározott készletének megvalósítását.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-327">Each role type can implement a specific set of clearly defined and related tasks.</span></span> <span data-ttu-id="6d6ea-328">Így tervezéséről és a kód könnyebb karbantartása, mert kevesebb egyes kódot és az egyes szerepkörök között funkcióval.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-328">This makes designing and maintaining the code easier because there is less interdependence of code and functionality between each role.</span></span>
* <span data-ttu-id="6d6ea-329">Bizalmas folyamatokat és az adatok elkülönítése segítséget.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-329">It can help to isolate sensitive processes and data.</span></span> <span data-ttu-id="6d6ea-330">Például a webes szerepkörök, amelyek megvalósítják a felhasználói felület nem kell, amely felügyelt és a feldolgozói szerepkör által szabályozott adatokat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-330">For example, web roles that implement the UI do not need to have access to data that is managed and controlled by a worker role.</span></span> <span data-ttu-id="6d6ea-331">Ez akkor lehet hasznos megerősítése biztonsági, különösen akkor, ha a mintaként használhatja például a [forgalomirányító mintát](http://msdn.microsoft.com/library/dn589793.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-331">This can be useful in strengthening security, especially when you use a pattern such as the [Gatekeeper Pattern](http://msdn.microsoft.com/library/dn589793.aspx).</span></span>  

#### <a name="considerations"></a><span data-ttu-id="6d6ea-332">Megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="6d6ea-332">Considerations</span></span>
<span data-ttu-id="6d6ea-333">A következő szempontokat vegye figyelembe, hogyan és hol kiválasztásakor háttérfeladatok telepítendő webes és feldolgozói szerepkörök Cloud Services használata esetén:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-333">Consider the following points when choosing how and where to deploy background tasks when using Cloud Services web and worker roles:</span></span>

* <span data-ttu-id="6d6ea-334">Háttérfeladatok meglévő webes szerepkört üzemeltető egy külön feldolgozói szerepkör csak a feladatok futtatásának takaríthat meg.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-334">Hosting background tasks in an existing web role can save the cost of running a separate worker role just for these tasks.</span></span> <span data-ttu-id="6d6ea-335">Azonban valószínű befolyásolhatja a teljesítményt és rendelkezésre állást, az alkalmazás, ha nagy az igény a feldolgozásra és más erőforrások.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-335">However, it is likely to affect the performance and availability of the application if there is contention for processing and other resources.</span></span> <span data-ttu-id="6d6ea-336">A webes szerepkör egy külön feldolgozói szerepkör használatával védi a hosszan futó vagy erőforrás-igényes háttérfeladatok hatásának.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-336">Using a separate worker role protects the web role from the impact of long-running or resource-intensive background tasks.</span></span>
* <span data-ttu-id="6d6ea-337">Ha háttérfeladatok használatával működteti a **RoleEntryPoint** osztály, egyszerűen áthelyezheti ezt egy másik szerepkört.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-337">If you host background tasks by using the **RoleEntryPoint** class, you can easily move this to another role.</span></span> <span data-ttu-id="6d6ea-338">Például ha hoz létre, hogy az osztály a webes szerepkör és annál újabb dönthet úgy, hogy szeretné-e áthelyezheti a feldolgozói szerepkörök, a feladatok futtatása a **RoleEntryPoint** osztály megvalósítása a feldolgozói szerepkör be.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-338">For example, if you create the class in a web role and later decide that you need to run the tasks in a worker role, you can move the **RoleEntryPoint** class implementation into the worker role.</span></span>
* <span data-ttu-id="6d6ea-339">Indítási feladatok célja, hogy a program vagy parancsfájl végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-339">Startup tasks are designed to execute a program or a script.</span></span> <span data-ttu-id="6d6ea-340">Központi telepítése a háttérben futó feladat végrehajtható programként lehet nehezebb, különösen akkor, ha a függő szerelvényeket telepítését is igényel.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-340">Deploying a background job as an executable program might be more difficult, especially if it also requires deployment of dependent assemblies.</span></span> <span data-ttu-id="6d6ea-341">Központi telepítése, és adja meg a háttérben futó feladat indítási feladatok használatakor a parancsfájl segítségével könnyebben lehet.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-341">It might be easier to deploy and use a script to define a background job when you use startup tasks.</span></span>
* <span data-ttu-id="6d6ea-342">Kivételek háttérfeladat sikertelenségét okozó hatást különböző, attól függően, hogy a helyük felderítése módját:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-342">Exceptions that cause a background task to fail have a different impact, depending on the way that they are hosted:</span></span>
  * <span data-ttu-id="6d6ea-343">Ha használja a **RoleEntryPoint** osztály a módszert használja, a meghiúsult feladat, akkor a szerepkört, hogy automatikusan újraindul a feladat újraindításához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-343">If you use the **RoleEntryPoint** class approach, a failed task will cause the role to restart so that the task automatically restarts.</span></span> <span data-ttu-id="6d6ea-344">Ez hatással lehet az alkalmazás rendelkezésre állását.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-344">This can affect availability of the application.</span></span> <span data-ttu-id="6d6ea-345">Ennek megelőzése érdekében győződjön meg arról, hogy tartalmazza-e robusztus kivételkezelő belül a **RoleEntryPoint** osztály és a háttér-feladatokat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-345">To prevent this, ensure that you include robust exception handling within the **RoleEntryPoint** class and all the background tasks.</span></span> <span data-ttu-id="6d6ea-346">Indítsa újra a sikertelen lesz, amennyiben ez a megfelelő feladatokat a kód segítségével, és indítsa újra a szerepkör csak akkor, ha nem lehet szabályosan helyreállítani a hibát a kód kivételt kivételt.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-346">Use code to restart tasks that fail where this is appropriate, and throw the exception to restart the role only if you cannot gracefully recover from the failure within your code.</span></span>
  * <span data-ttu-id="6d6ea-347">Indítási feladatok használatakor való telepítésért felelős a feladat a végrehajtás kezelése és ellenőrzése sikertelen.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-347">If you use startup tasks, you are responsible for managing the task execution and checking if it fails.</span></span>
* <span data-ttu-id="6d6ea-348">Kezelésére és monitorozására indítási feladatok és nehezebb használnak, mint a **RoleEntryPoint** megközelítés osztályban.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-348">Managing and monitoring startup tasks is more difficult than using the **RoleEntryPoint** class approach.</span></span> <span data-ttu-id="6d6ea-349">Az Azure WebJobs SDK azonban könnyebben kezelheti a webjobs-feladatok, amelyek indítási feladatok révén kezdeményezi az irányítópultot tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-349">However, the Azure WebJobs SDK includes a dashboard to make it easier to manage WebJobs that you initiate through startup tasks.</span></span>

#### <a name="lifecycle"></a><span data-ttu-id="6d6ea-350">Életciklus</span><span class="sxs-lookup"><span data-stu-id="6d6ea-350">Lifecycle</span></span> 
 <span data-ttu-id="6d6ea-351">Ha úgy dönt, hogy valósítja meg a feladatok a háttérben webes és feldolgozói szerepkörök használatával használó Felhőszolgáltatások alkalmazások esetén a **RoleEntryPoint** osztály, fontos, hogy az osztály az életciklus megismerése megfelelően használatához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-351">If you decide to implement background jobs for Cloud Services applications that use web and worker roles by using the **RoleEntryPoint** class, it is important to understand the lifecycle of this class in order to use it correctly.</span></span>

<span data-ttu-id="6d6ea-352">Webes és feldolgozói szerepkörök halad át fázisban olyan készlete, indítsa el, futtassa, és állítsa le.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-352">Web and worker roles go through a set of distinct phases as they start, run, and stop.</span></span> <span data-ttu-id="6d6ea-353">A **RoleEntryPoint** osztály közzétesz egy eseménysorozatokat, amelyek jelzik, ha a szakaszok is megjelenhetnek.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-353">The **RoleEntryPoint** class exposes a series of events that indicate when these stages are occurring.</span></span> <span data-ttu-id="6d6ea-354">Használjon ezek inicializálása, fut, és az egyéni háttér feladatok leállítása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-354">You use these to initialize, run, and stop your custom background tasks.</span></span> <span data-ttu-id="6d6ea-355">A teljes ciklus a következő:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-355">The complete cycle is:</span></span>

* <span data-ttu-id="6d6ea-356">Azure szerepkör szerelvény betöltése, és megkeresi az abból származó osztály **RoleEntryPoint**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-356">Azure loads the role assembly and searches it for a class that derives from **RoleEntryPoint**.</span></span>
* <span data-ttu-id="6d6ea-357">Ha ez az osztály talál, meghívja **RoleEntryPoint.OnStart()**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-357">If it finds this class, it calls **RoleEntryPoint.OnStart()**.</span></span> <span data-ttu-id="6d6ea-358">Akkor bírálja felül ezt a metódust a háttérfeladatok inicializálni.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-358">You override this method to initialize your background tasks.</span></span>
* <span data-ttu-id="6d6ea-359">Miután a **OnStart** metódus befejeződött, az Azure meghívja **Application_Start()** az alkalmazás globális fájl, ha ez található (például egy ASP.NET futó webes szerepkör a Global.asax).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-359">After the **OnStart** method has completed, Azure calls **Application_Start()** in the application’s Global file if this is present (for example, Global.asax in a web role running ASP.NET).</span></span>
* <span data-ttu-id="6d6ea-360">Az Azure hívások **RoleEntryPoint.Run()** egy új előtér-szálon, amely végrehajtja a párhuzamosan **OnStart()**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-360">Azure calls **RoleEntryPoint.Run()** on a new foreground thread that executes in parallel with **OnStart()**.</span></span> <span data-ttu-id="6d6ea-361">Akkor bírálja felül ezt a metódust a háttérben feladatokat indíthat el.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-361">You override this method to start your background tasks.</span></span>
* <span data-ttu-id="6d6ea-362">A Run metódus addig tart, amíg Azure először hívja **Application_End()** a az alkalmazás globális fájlt, ha jelen, majd hívások **RoleEntryPoint.OnStop()**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-362">When the Run method ends, Azure first calls **Application_End()** in the application’s Global file if this is present, and then calls **RoleEntryPoint.OnStop()**.</span></span> <span data-ttu-id="6d6ea-363">Akkor bírálja felül a **OnStop** eljárás a háttérben futó feladatot karbantartása erőforrások, az objektumok eldobásakor, majd zárja be, amely a feladatok használt kapcsolatok.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-363">You override the **OnStop** method to stop your background tasks, clean up resources, dispose of objects, and close connections that the tasks may have used.</span></span>
* <span data-ttu-id="6d6ea-364">Az Azure feldolgozói szerepkör tartozó gazdafolyamat le van állítva.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-364">The Azure worker role host process is stopped.</span></span> <span data-ttu-id="6d6ea-365">Ezen a ponton a szerepkör újrafelhasználásra kerül, és újra fog indulni.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-365">At this point, the role will be recycled and will restart.</span></span>

<span data-ttu-id="6d6ea-366">A további részletek és módszerek használatának példája a **RoleEntryPoint** osztály című [számítási erőforrás-összevonási mintát](http://msdn.microsoft.com/library/dn589778.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-366">For more details and an example of using the methods of the **RoleEntryPoint** class, see [Compute Resource Consolidation Pattern](http://msdn.microsoft.com/library/dn589778.aspx).</span></span>

#### <a name="implementation-considerations"></a><span data-ttu-id="6d6ea-367">Megvalósítási kapcsolatos szempontok</span><span class="sxs-lookup"><span data-stu-id="6d6ea-367">Implementation considerations</span></span>

<span data-ttu-id="6d6ea-368">Ha egy webes vagy feldolgozói szerepkör háttérfeladatok végrehajtási, vegye figyelembe az alábbiakat:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-368">Consider the following points if you are implementing background tasks in a web or worker role:</span></span>

* <span data-ttu-id="6d6ea-369">Az alapértelmezett **futtatása** metódus megvalósításában a a **RoleEntryPoint** osztály tartalmaz egy hívása **Thread.Sleep(Timeout.Infinite)** , hogy az biztosítsa a szerepkör életben határozatlan ideig.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-369">The default **Run** method implementation in the **RoleEntryPoint** class contains a call to **Thread.Sleep(Timeout.Infinite)** that keeps the role alive indefinitely.</span></span> <span data-ttu-id="6d6ea-370">Felülbírálásakor a **futtatása** (amely általában a háttér feladatok végrehajtásához szükséges) módszer, engedélyeznie kell a nem a kódot, a kilépéshez a metódusból, kivéve, ha szeretné újrahasznosítani a szerepkör példánya.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-370">If you override the **Run** method (which is typically necessary to execute background tasks), you must not allow your code to exit from the method unless you want to recycle the role instance.</span></span>
* <span data-ttu-id="6d6ea-371">Egy tipikus megvalósításában a **futtatása** metódus a háttérben futó feladatot, és egy hurok szerkezet, amely rendszeresen ellenőrzi a háttér-feladatok állapotának elindításához kódot tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-371">A typical implementation of the **Run** method includes code to start each of the background tasks and a loop construct that periodically checks the state of all the background tasks.</span></span> <span data-ttu-id="6d6ea-372">A sikertelen vagy cancellation jogkivonatokat, amelyek jelzik, hogy a feladatok már befejeződtek figyelő újraindítható.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-372">It can restart any that fail or monitor for cancellation tokens that indicate that jobs have completed.</span></span>
* <span data-ttu-id="6d6ea-373">Háttérfeladat nem kezelt kivételt jelez, ha ezt a feladatot kell újrahasznosított miközben lehetővé teszi bármely más háttérfeladatok is működőképes marad, a szerepkörben.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-373">If a background task throws an unhandled exception, that task should be recycled while allowing any other background tasks in the role to continue running.</span></span> <span data-ttu-id="6d6ea-374">Azonban ha a kivétel okozta sérülése, objektumok, például a megosztott tároló, a feladat kívüli kivétel kezelje a **RoleEntryPoint** osztály, minden feladat megszakítása kell, és a **futtatása**metódus engedélyezni kell végződnie.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-374">However, if the exception is caused by corruption of objects outside the task, such as shared storage, the exception should be handled by your **RoleEntryPoint** class, all tasks should be cancelled, and the **Run** method should be allowed to end.</span></span> <span data-ttu-id="6d6ea-375">Azure indul újra a szerepkört.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-375">Azure will then restart the role.</span></span>
* <span data-ttu-id="6d6ea-376">Használja a **OnStop** módszert, szüneteltetése vagy háttérfeladatok kill és erőforrások törlése.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-376">Use the **OnStop** method to pause or kill background tasks and clean up resources.</span></span> <span data-ttu-id="6d6ea-377">Ez magában, előfordulhat, hogy hosszú futású vagy többlépéses feladat leállítása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-377">This might involve stopping long-running or multistep tasks.</span></span> <span data-ttu-id="6d6ea-378">Nagyon fontos figyelembe venni, hogyan ehhez adatok bekövetkező inkonzisztencia elkerülése érdekében.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-378">It is vital to consider how this can be done to avoid data inconsistencies.</span></span> <span data-ttu-id="6d6ea-379">Ha a szerepkör példánya csak egy felhasználó által kezdeményezett leállítást, a kódot futtató bármilyen okból leállítja a **OnStop** metódus Kényszerített megszakítás előtt öt percen belül el kell végezni.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-379">If a role instance stops for any reason other than a user-initiated shutdown, the code running in the **OnStop** method must be completed within five minutes before it is forcibly terminated.</span></span> <span data-ttu-id="6d6ea-380">Győződjön meg arról, hogy a kód is elvégezhető, hogy időben tűri befejezéséig nem fut.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-380">Ensure that your code can be completed in that time or can tolerate not running to completion.</span></span>  
* <span data-ttu-id="6d6ea-381">Az Azure load balancer kezdődik irányítja a forgalmat a szerepkör-példány esetén a **RoleEntryPoint.OnStart** metódus értékét adja vissza **igaz**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-381">The Azure load balancer starts directing traffic to the role instance when the **RoleEntryPoint.OnStart** method returns the value **true**.</span></span> <span data-ttu-id="6d6ea-382">Ezért, fontolja meg az inicializálási kód helyezésének a **OnStart** metódust, hogy sikeresen inicializálni fogja szerepkör-példányok nem fogadni a forgalmat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-382">Therefore, consider putting all your initialization code in the **OnStart** method so that role instances that do not successfully initialize will not receive any traffic.</span></span>
* <span data-ttu-id="6d6ea-383">Indítási feladatok mellett a módszereket is használhatja a **RoleEntryPoint** osztály.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-383">You can use startup tasks in addition to the methods of the **RoleEntryPoint** class.</span></span> <span data-ttu-id="6d6ea-384">Indítási feladatok bármely szükséges beállításokat, az az Azure load balancer módosítható, mert ezeket a feladatokat hajtja végre a szerepkör bármely kéréseket fogad előtt inicializálni kell használnia.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-384">You should use startup tasks to initialize any settings that you need to change in the Azure load balancer because these tasks will execute before the role receives any requests.</span></span> <span data-ttu-id="6d6ea-385">További információkért lásd: [indítási feladatok futtatása az Azure-ban](/azure/cloud-services/cloud-services-startup-tasks/).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-385">For more information, see [Run startup tasks in Azure](/azure/cloud-services/cloud-services-startup-tasks/).</span></span>
* <span data-ttu-id="6d6ea-386">Hiba található egy indítási tevékenységhez, ha azt a szerepet folyamatos újraindítását válthatja ki.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-386">If there is an error in a startup task, it might force the role to continually restart.</span></span> <span data-ttu-id="6d6ea-387">Ezzel megakadályozhatja, egy virtuális IP-cím (VIP) cím felcserélés egy korábban előkészített verzióról hajt végre, mert a lapozófájl-kapacitás a szerepkör kizárólagos hozzáférésre van szüksége.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-387">This can prevent you from performing a virtual IP (VIP) address swap back to a previously staged version because the swap requires exclusive access to the role.</span></span> <span data-ttu-id="6d6ea-388">Ez nem olvashatók be a szerepkör újraindítása közben.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-388">This cannot be obtained while the role is restarting.</span></span> <span data-ttu-id="6d6ea-389">A probléma megoldásához:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-389">To resolve this:</span></span>
  
  * <span data-ttu-id="6d6ea-390">Adja hozzá a következő kódot elejéhez a **OnStart** és **futtatása** a szerepkörben módszerek:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-390">Add the following code to the beginning of the **OnStart** and **Run** methods in your role:</span></span>
    
    ```C#
    var freeze = CloudConfigurationManager.GetSetting("Freeze");
    if (freeze != null)
    {
     if (Boolean.Parse(freeze))
       {
         Thread.Sleep(System.Threading.Timeout.Infinite);
     }
    }
    ```
    
  * <span data-ttu-id="6d6ea-391">Adja hozzá a definícióját a **rögzítése** beállítását egy logikai értéket a ServiceDefinition.csdef és ServiceConfiguration.\*. a szerepkör a szolgáltatáskonfigurációs séma fájlok létrehozásáról és **hamis**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-391">Add the definition of the **Freeze** setting as a Boolean value to the ServiceDefinition.csdef and ServiceConfiguration.\*.cscfg files for the role and set it to **false**.</span></span> <span data-ttu-id="6d6ea-392">Ha a szerepkör egy ismételt újraindítási módba kerül, módosíthatja a beállításokat, hogy **igaz** szerepkör-végrehajtási rögzítése, és engedélyezze a korábbi verziójával kell cserélni.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-392">If the role goes into a repeated restart mode, you can change the setting to **true** to freeze role execution and allow it to be swapped with a previous version.</span></span>

#### <a name="more-information"></a><span data-ttu-id="6d6ea-393">További információ</span><span class="sxs-lookup"><span data-stu-id="6d6ea-393">More information</span></span>
* [<span data-ttu-id="6d6ea-394">Számítási erőforrás-összevonási minta</span><span class="sxs-lookup"><span data-stu-id="6d6ea-394">Compute Resource Consolidation Pattern</span></span>](http://msdn.microsoft.com/library/dn589778.aspx)
* [<span data-ttu-id="6d6ea-395">Ismerkedés az Azure WebJobs SDK-val</span><span class="sxs-lookup"><span data-stu-id="6d6ea-395">Get started with the Azure WebJobs SDK</span></span>](/azure/app-service-web/websites-dotnet-webjobs-sdk-get-started/)


## <a name="partitioning"></a><span data-ttu-id="6d6ea-396">Particionálás</span><span class="sxs-lookup"><span data-stu-id="6d6ea-396">Partitioning</span></span>
<span data-ttu-id="6d6ea-397">Ha úgy dönt, hogy a háttér-feladatok belül (például egy webalkalmazás, webes szerepkör, meglévő feldolgozói szerepkör vagy virtuális gép) meglévő számítási példány is, meg kell fontolnia, hogy ez milyen hatással a számítási példány és a háttérfeladat magát minőségi jellemzőit.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-397">If you decide to include background tasks within an existing compute instance (such as a web app, web role, existing worker role, or virtual machine), you must consider how this will affect the quality attributes of the compute instance and the background task itself.</span></span> <span data-ttu-id="6d6ea-398">Ezek a tényezők segít határozza meg, hogy tartozó közös elhelyezése a tevékenységeket, amelyek a meglévő számítási példányt vagy egy különálló számítási példány külön őket:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-398">These factors will help you to decide whether to colocate the tasks with the existing compute instance or separate them out into a separate compute instance:</span></span>

* <span data-ttu-id="6d6ea-399">**Rendelkezésre állási**: háttérfeladatok előfordulhat, hogy nincs szükség a rendelkezésre állás mint az alkalmazás egyéb részeinek azonos szinten különösen a felhasználói felület és más, amely felhasználói beavatkozást közvetlenül érint.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-399">**Availability**: Background tasks might not need to have the same level of availability as other parts of the application, in particular the UI and other parts that are directly involved in user interaction.</span></span> <span data-ttu-id="6d6ea-400">Háttérfeladatok előfordulhat, hogy jobban tűrik a késés, a rendszer kapcsolódási hibák, és más tényezők adott hatása rendelkezésre állási, mert a művelet a várólistára tehető.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-400">Background tasks might be more tolerant of latency, retried connection failures, and other factors that affect availability because the operations can be queued.</span></span> <span data-ttu-id="6d6ea-401">Azonban lehetnek olyan elegendő kapacitása megakadályozza, hogy sikerült várólisták blokkolása és érinti az egész biztonsági mentését.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-401">However, there must be sufficient capacity to prevent the backup of requests that could block queues and affect the application as a whole.</span></span>
* <span data-ttu-id="6d6ea-402">**Méretezhetőség**: háttérfeladatok valószínűleg egy különböző méretezhetőség követelmény, mint a felhasználói felület és az alkalmazás interaktív részei.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-402">**Scalability**: Background tasks are likely to have a different scalability requirement than the UI and the interactive parts of the application.</span></span> <span data-ttu-id="6d6ea-403">A felhasználói felület skálázás csúcsait igény, amíg a függőben lévő háttérfeladatok előfordulhat, hogy teljesíteni kevésbé foglalt időpontokat során egy kevesebb teljesítéséhez szükséges lehet a számítási példányokért száma.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-403">Scaling the UI might be necessary to meet peaks in demand, while outstanding background tasks might be completed during less busy times by a fewer number of compute instances.</span></span>
* <span data-ttu-id="6d6ea-404">**Rugalmasság**: sikertelen volt-e a számítási-példány csak háttérfeladatok nem gyermekekéhez hatással lehetnek az alkalmazás egészének Ha ezeket a feladatokat a kérelem várólistára és Elhalasztott, amíg a feladat be nem érhető el újra.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-404">**Resiliency**: Failure of a compute instance that just hosts background tasks might not fatally affect the application as a whole if the requests for these tasks can be queued or postponed until the task is available again.</span></span> <span data-ttu-id="6d6ea-405">A számítási példány és/vagy a feladatokat egy megfelelő intervallumon belül indítható újra, ha az alkalmazás felhasználóinak előfordulhat, hogy nem érinti.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-405">If the compute instance and/or tasks can be restarted within an appropriate interval, users of the application might not be affected.</span></span>
* <span data-ttu-id="6d6ea-406">**Biztonsági**: Előfordulhat, hogy háttérfeladatok különböző biztonsági követelményeket vagy korlátozásokat, mint a felhasználói felület vagy az alkalmazás részei.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-406">**Security**: Background tasks might have different security requirements or restrictions than the UI or other parts of the application.</span></span> <span data-ttu-id="6d6ea-407">Különálló számítási példánnyal, adjon meg egy eltérő biztonsági környezetben, a feladatok.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-407">By using a separate compute instance, you can specify a different security environment for the tasks.</span></span> <span data-ttu-id="6d6ea-408">Például forgalomirányító minták használatával elkülöníteni a felhasználói felületen háttér számítási példányokért biztonsági és elválasztási maximalizálása érdekében.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-408">You can also use patterns such as Gatekeeper to isolate the background compute instances from the UI in order to maximize security and separation.</span></span>
* <span data-ttu-id="6d6ea-409">**Teljesítmény**: akkor válassza ki a számítási példány háttér feladatok kifejezetten egyezés a feladatok teljesítménybeli követelményei.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-409">**Performance**: You can choose the type of compute instance for background tasks to specifically match the performance requirements of the tasks.</span></span> <span data-ttu-id="6d6ea-410">Ez azt jelentheti, hogy egy kevésbé költséges számítási beállítás használatával, ha a feladatok van szükség ugyanahhoz a feldolgozási funkciókkal rendelkeznek, mint a felhasználói felület, vagy egy nagyobb példány, ha további kapacitást és erőforrásokat igényelnek.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-410">This might mean using a less expensive compute option if the tasks do not require the same processing capabilities as the UI, or a larger instance if they require additional capacity and resources.</span></span>
* <span data-ttu-id="6d6ea-411">**Kezelhetőségi**: háttérfeladatok lehet egy másik fejlesztésére és üzembe ritmust az fő alkalmazáskód vagy a felhasználói felületen.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-411">**Manageability**: Background tasks might have a different development and deployment rhythm from the main application code or the UI.</span></span> <span data-ttu-id="6d6ea-412">Központi telepítés egy külön számítási példányhoz leegyszerűsítheti a frissítések és versioning.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-412">Deploying them to a separate compute instance can simplify updates and versioning.</span></span>
* <span data-ttu-id="6d6ea-413">**Költség**: hozzáadása számítási hajtható végre a háttérben tevékenységek növekedése üzemeltetési költségek-példányokat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-413">**Cost**: Adding compute instances to execute background tasks increases hosting costs.</span></span> <span data-ttu-id="6d6ea-414">Alaposan gondolja át a kompromisszum további kapacitást és a további költségek között.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-414">You should carefully consider the trade-off between additional capacity and these extra costs.</span></span>

<span data-ttu-id="6d6ea-415">További információkért lásd: [vezető választás mintát](http://msdn.microsoft.com/library/dn568104.aspx) és [versengő fogyasztók mintát](http://msdn.microsoft.com/library/dn568101.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-415">For more information, see [Leader Election Pattern](http://msdn.microsoft.com/library/dn568104.aspx) and [Competing Consumers Pattern](http://msdn.microsoft.com/library/dn568101.aspx).</span></span>

## <a name="conflicts"></a><span data-ttu-id="6d6ea-416">Ütközések</span><span class="sxs-lookup"><span data-stu-id="6d6ea-416">Conflicts</span></span>
<span data-ttu-id="6d6ea-417">A háttérben futó feladat több példánya van, akkor lehetséges, hogy fog "versenyeznek" erőforrások és szolgáltatások, például adatbázisok és a tároló elérésére.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-417">If you have multiple instances of a background job, it is possible that they will compete for access to resources and services, such as databases and storage.</span></span> <span data-ttu-id="6d6ea-418">Az egyidejű hozzáférés ütközéseket okozhat a szolgáltatások rendelkezésre állásának és az adatok integritásának Erőforrásverseny eredményezhet.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-418">This concurrent access can result in resource contention, which might cause conflicts in availability of the services and in the integrity of data in storage.</span></span> <span data-ttu-id="6d6ea-419">Erőforrásverseny tudja oldani a pesszimista zárolási megközelítést.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-419">You can resolve resource contention by using a pessimistic locking approach.</span></span> <span data-ttu-id="6d6ea-420">Ez megakadályozza, hogy a versengő egyidejűleg szolgáltatások elérésére, vagy adatokat rongál feladat példányai.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-420">This prevents competing instances of a task from concurrently accessing a service or corrupting data.</span></span>

<span data-ttu-id="6d6ea-421">Az ütközések feloldása egy másik módszer célja egypéldányosként, háttérfeladatok meghatározása, hogy valaha is csak egy futó példány.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-421">Another approach to resolve conflicts is to define background tasks as a singleton, so that there is only ever one instance running.</span></span> <span data-ttu-id="6d6ea-422">Azonban ez megszünteti az a megbízhatóságát és teljesítményét előnyöket, amely egy több-példány konfigurációja nyújt.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-422">However, this eliminates the reliability and performance benefits that a multiple-instance configuration can provide.</span></span> <span data-ttu-id="6d6ea-423">Ez különösen igaz, ha a felhasználói felület megadhatja a megfelelő munkahelyi egynél több háttérfeladat foglalt tartani.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-423">This is especially true if the UI can supply sufficient work to keep more than one background task busy.</span></span>

<span data-ttu-id="6d6ea-424">Győződjön meg arról, hogy a háttérben futó feladat automatikusan újraindíthatja és arról, hogy rendelkezik-e elegendő kapacitással a kereslet csúcsait folyamatosan növekvő adatmennyiségnek elengedhetetlen.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-424">It is vital to ensure that the background task can automatically restart and that it has sufficient capacity to cope with peaks in demand.</span></span> <span data-ttu-id="6d6ea-425">Ehhez a számítási példány elegendő erőforrással rendelkező lefoglalása egy várólista mechanizmus, amely képes tárolni az igény szerinti csökkenése esetén újabb végrehajtási kérelmek implementálásával, vagy az alábbi eljárások együttes használatával.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-425">You can achieve this by allocating a compute instance with sufficient resources, by implementing a queueing mechanism that can store requests for later execution when demand decreases, or by using a combination of these techniques.</span></span>

## <a name="coordination"></a><span data-ttu-id="6d6ea-426">Problémakoordinálás</span><span class="sxs-lookup"><span data-stu-id="6d6ea-426">Coordination</span></span>
<span data-ttu-id="6d6ea-427">A háttérben futó feladatot lehet, hogy bonyolult, és előfordulhat, hogy több egyedi feladatokat futtatni kívánt eredmény elérése érdekében vagy a követelmények teljesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-427">The background tasks might be complex and might require multiple individual tasks to execute to produce a result or to fulfil all the requirements.</span></span> <span data-ttu-id="6d6ea-428">Esetében gyakori, a feladat felosztása kisebb leplezett lépésekre vagy több fogyasztó végrehajtható résztevékenység forgatókönyvekben.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-428">It is common in these scenarios to divide the task into smaller discreet steps or subtasks that can be executed by multiple consumers.</span></span> <span data-ttu-id="6d6ea-429">Többlépéses feladatok lehet hatékonyabb és rugalmasabb, mivel előfordulhat, hogy az egyes lépéseket újrafelhasználható több feladatok.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-429">Multistep jobs can be more efficient and more flexible because individual steps might be reusable in multiple jobs.</span></span> <span data-ttu-id="6d6ea-430">A rendszer is könnyen hozzáadása, eltávolítása vagy módosítása a lépések sorrendjét.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-430">It is also easy to add, remove, or modify the order of the steps.</span></span>

<span data-ttu-id="6d6ea-431">Több feladatok és lépések koordinációs kihívást jelenthet, de három közös mintáról olvashat, amelyek segítségével a megoldás megvalósítását Útmutató:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-431">Coordinating multiple tasks and steps can be challenging, but there are three common patterns that you can use to guide your implementation of a solution:</span></span>

* <span data-ttu-id="6d6ea-432">**Egy feladat decomposing több újrafelhasználható lépést a**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-432">**Decomposing a task into multiple reusable steps**.</span></span> <span data-ttu-id="6d6ea-433">Az alkalmazás akkor lehet szükség, amely feldolgozza az adatokat a különböző, eltérően összetett különböző feladatok végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-433">An application might be required to perform a variety of tasks of varying complexity on the information that it processes.</span></span> <span data-ttu-id="6d6ea-434">Lehet, hogy egy egyszerű, de rugalmatlan megközelítése az alkalmazás végrehajtási egységes modulként a feldolgozás elvégzéséhez.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-434">A straightforward but inflexible approach to implementing this application might be to perform this processing as a monolithic module.</span></span> <span data-ttu-id="6d6ea-435">Azonban ez a megközelítés valószínű, hogy csökkentse a lehetőségek a kód újrabontása, optimalizálása, vagy ha azonos feldolgozása részei szükség az alkalmazáson belül máshol újbóli felhasználása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-435">However, this approach is likely to reduce the opportunities for refactoring the code, optimizing it, or reusing it if parts of the same processing are required elsewhere within the application.</span></span> <span data-ttu-id="6d6ea-436">További információkért lásd: [pipe-ok és a szűrők mintát](http://msdn.microsoft.com/library/dn568100.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-436">For more information, see [Pipes and Filters Pattern](http://msdn.microsoft.com/library/dn568100.aspx).</span></span>
* <span data-ttu-id="6d6ea-437">**A lépéseket egy feladat végrehajtásának kezelése**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-437">**Managing execution of the steps for a task**.</span></span> <span data-ttu-id="6d6ea-438">Egy alkalmazás előfordulhat, hogy feladatokat, amelyek több lépést (ezek közül néhány lehet, hogy távoli szolgáltatások invoke vagy távoli erőforrásokhoz férnek hozzá) tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-438">An application might perform tasks that comprise a number of steps (some of which might invoke remote services or access remote resources).</span></span> <span data-ttu-id="6d6ea-439">Előfordulhat, hogy az egyes lépéseket egymástól független, de azok vannak összehangolva. az alkalmazás logika, amely megvalósítja a feladatot.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-439">The individual steps might be independent of each other, but they are orchestrated by the application logic that implements the task.</span></span> <span data-ttu-id="6d6ea-440">További információkért lásd: [Feladatütemező ügynök felügyelő mintát](http://msdn.microsoft.com/library/dn589780.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-440">For more information, see [Scheduler Agent Supervisor Pattern](http://msdn.microsoft.com/library/dn589780.aspx).</span></span>
* <span data-ttu-id="6d6ea-441">**A sikertelen helyreállítási feladat kezelése lépések**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-441">**Managing recovery for task steps that fail**.</span></span> <span data-ttu-id="6d6ea-442">Egy alkalmazás előfordulhat, hogy vissza kell vonnia a munkát, (amelyek együtt határozza meg, hogy idővel konzisztenssé művelet) lépések egy sorozatát által végrehajtott műveletek egy, vagy további lépések sikertelenek.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-442">An application might need to undo the work that is performed by a series of steps (which together define an eventually consistent operation) if one or more of the steps fail.</span></span> <span data-ttu-id="6d6ea-443">További információkért lásd: [Compensating tranzakció mintát](http://msdn.microsoft.com/library/dn589804.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-443">For more information, see [Compensating Transaction Pattern](http://msdn.microsoft.com/library/dn589804.aspx).</span></span>


## <a name="resiliency-considerations"></a><span data-ttu-id="6d6ea-444">Rugalmasság kapcsolatos szempontok</span><span class="sxs-lookup"><span data-stu-id="6d6ea-444">Resiliency considerations</span></span>
<span data-ttu-id="6d6ea-445">Háttérfeladatok rugalmas ahhoz, hogy az alkalmazás megbízható szolgáltatásokat kell lennie.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-445">Background tasks must be resilient in order to provide reliable services to the application.</span></span> <span data-ttu-id="6d6ea-446">Amikor tervezése és kialakítása háttérfeladatok, vegye figyelembe a következő szempontokat:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-446">When you are planning and designing background tasks, consider the following points:</span></span>

* <span data-ttu-id="6d6ea-447">Háttér-feladatok kezelésére szerepkör vagy szolgáltatás újraindítása nélkül rongál adatok, vagy ellentmondás bevezetni az alkalmazás képesnek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-447">Background tasks must be able to gracefully handle role or service restarts without corrupting data or introducing inconsistency into the application.</span></span> <span data-ttu-id="6d6ea-448">Hosszan futó vagy többlépéses feladatok, érdemes lehet *mutató ellenőrizze* mentésével feladatok állapotának állandó tároló, vagy a várólistán lévő üzenetek Ha ez szükséges.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-448">For long-running or multistep tasks, consider using *check pointing* by saving the state of jobs in persistent storage, or as messages in a queue if this is appropriate.</span></span> <span data-ttu-id="6d6ea-449">Például megőrizni az állapotadatokat, egy üzenet a várólistában lévő, és fokozatosan frissítse az állapotadatokat a tevékenység végrehajtása az, hogy a feladat tudja feldolgozni a legutóbbi ellenőrzőponttól jó--az elejétől újraindítása helyett.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-449">For example, you can persist state information in a message in a queue and incrementally update this state information with the task progress so that the task can be processed from the last known good checkpoint--instead of restarting from the beginning.</span></span> <span data-ttu-id="6d6ea-450">Azure Service Bus-üzenetsorok használata esetén az azonos terület engedélyezéséhez üzenet munkamenetek használatával.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-450">When using Azure Service Bus queues, you can use message sessions to enable the same scenario.</span></span> <span data-ttu-id="6d6ea-451">Munkamenetek mentéséhez és a kérelem feldolgozása állapotának beolvasására használatával teszik a [SetState](https://docs.microsoft.com/dotnet/api/microsoft.servicebus.messaging.messagesession.setstate?view=azureservicebus-4.0.0) és [GetState](https://docs.microsoft.com/dotnet/api/microsoft.servicebus.messaging.messagesession.getstate?view=azureservicebus-4.0.0) módszerek.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-451">Sessions allow you to save and retrieve the application processing state by using the [SetState](https://docs.microsoft.com/dotnet/api/microsoft.servicebus.messaging.messagesession.setstate?view=azureservicebus-4.0.0) and [GetState](https://docs.microsoft.com/dotnet/api/microsoft.servicebus.messaging.messagesession.getstate?view=azureservicebus-4.0.0) methods.</span></span> <span data-ttu-id="6d6ea-452">Megbízható többlépéses folyamatok és munkafolyamatok megtervezésével kapcsolatos további információkért lásd: [Feladatütemező ügynök felügyelő mintát](http://msdn.microsoft.com/library/dn589780.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-452">For more information about designing reliable multistep processes and workflows, see [Scheduler Agent Supervisor Pattern](http://msdn.microsoft.com/library/dn589780.aspx).</span></span>
* <span data-ttu-id="6d6ea-453">Amikor webes vagy feldolgozói szerepköröket használ több háttérfeladatok futtatásához, a felülbírálásának tervezése a **futtatása** metódus sikertelen vagy memóriavesztésének előfordulási helyét feladatok figyelése, és újra kell indítania őket.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-453">When you use web or worker roles to host multiple background tasks, design your override of the **Run** method to monitor for failed or stalled tasks, and restart them.</span></span> <span data-ttu-id="6d6ea-454">Ha ez nem gyakorlati, és a feldolgozói szerepkör használ, a feldolgozói szerepkör szerint kilépésekor kényszerítheti a **futtatása** metódust.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-454">Where this is not practical, and you are using a worker role, force the worker role to restart by exiting from the **Run** method.</span></span>
* <span data-ttu-id="6d6ea-455">Használatakor a várólisták kommunikálni háttérfeladatok, a várólisták működhet-e a feladatokat az alkalmazás során küldött kérelmek tárolására puffer magasabb, mint a szokásos terhelés alatt áll.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-455">When you use queues to communicate with background tasks, the queues can act as a buffer to store requests that are sent to the tasks while the application is under higher than usual load.</span></span> <span data-ttu-id="6d6ea-456">Ez lehetővé teszi, hogy a feladatokat a felhasználói felületen kevésbé forgalmas időszakokban szinkronizálásához.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-456">This allows the tasks to catch up with the UI during less busy periods.</span></span> <span data-ttu-id="6d6ea-457">Azt is jelenti, hogy a szerepkör újrahasznosítási nem akadályozza meg a felhasználói felületen.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-457">It also means that recycling the role will not block the UI.</span></span> <span data-ttu-id="6d6ea-458">További információkért lásd: [terhelés simítás mintát várólista alapú](http://msdn.microsoft.com/library/dn589783.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-458">For more information, see [Queue-Based Load Leveling Pattern](http://msdn.microsoft.com/library/dn589783.aspx).</span></span> <span data-ttu-id="6d6ea-459">Ha egyes feladatok fontosabbak, mint a többire, vegye fontolóra a [prioritású várólista mintát](http://msdn.microsoft.com/library/dn589794.aspx) annak érdekében, hogy ezek a feladatok futtatása kevésbé fontos néhányat a meglévők közül.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-459">If some tasks are more important than others, consider implementing the [Priority Queue Pattern](http://msdn.microsoft.com/library/dn589794.aspx) to ensure that these tasks run before less important ones.</span></span>
* <span data-ttu-id="6d6ea-460">Háttérfeladatok üzenetek által kezdeményezett, illetve üzenetek feldolgozásához kell megtervezni, inkonzisztenciát kezelni, például a sorrendje, nem érkező üzenetek ismételten üzeneteket, amelyek hibát jelez (más néven *elhalt üzenetek*), és üzenetek kézbesítési egynél többször.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-460">Background tasks that are initiated by messages or process messages must be designed to handle inconsistencies, such as messages arriving out of order, messages that repeatedly cause an error (often referred to as *poison messages*), and messages that are delivered more than once.</span></span> <span data-ttu-id="6d6ea-461">A következőket ajánljuk figyelmébe:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-461">Consider the following:</span></span>
  * <span data-ttu-id="6d6ea-462">Meghatározott sorrendben, például azokkal, amelyek módosítani az adatokat (például egy értéket ad hozzá egy meglévő érték) a meglévő adatok érték alapján fel kell dolgozni, előfordulhat, hogy nem érkeznek, az elküldés volt eredeti üzenetek.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-462">Messages that must be processed in a specific order, such as those that change data based on the existing data value (for example, adding a value to an existing value), might not arrive in the original order in which they were sent.</span></span> <span data-ttu-id="6d6ea-463">Azt is megteheti akkor előfordulhat, hogy kezelje, minden példány különböző terhelése miatt más sorrendben háttérfeladat különböző példányai.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-463">Alternatively, they might be handled by different instances of a background task in a different order due to varying loads on each instance.</span></span> <span data-ttu-id="6d6ea-464">Meghatározott sorrendben kell végrehajtani üzenetek tartalmaznia kell a sorszámot, kulcs vagy valamilyen más mutató, háttérfeladatok segítségével győződjön meg arról, hogy a megfelelő sorrendben feldolgozásra kerülnek.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-464">Messages that must be processed in a specific order should include a sequence number, key, or some other indicator that background tasks can use to ensure that they are processed in the correct order.</span></span> <span data-ttu-id="6d6ea-465">Azure Service Bus használ, ha üzenet munkamenetek segítségével garantálja a szállítási sorrendjét.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-465">If you are using Azure Service Bus, you can use message sessions to guarantee the order of delivery.</span></span> <span data-ttu-id="6d6ea-466">Azt azonban általában hatékonyabb, ha lehetséges, a folyamat kialakítani, hogy az üzenet sorrendje nem lényeges.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-466">However, it is usually more efficient, where possible, to design the process so that the message order is not important.</span></span>
  * <span data-ttu-id="6d6ea-467">Háttérfeladat általában üzenetet a várólistában, amely ideiglenesen elrejti azokat más üzenet fogyasztói betekintés.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-467">Typically, a background task will peek at messages in the queue, which temporarily hides them from other message consumers.</span></span> <span data-ttu-id="6d6ea-468">Törli az üzenetek sikeresen feldolgozása után.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-468">Then it deletes the messages after they have been successfully processed.</span></span> <span data-ttu-id="6d6ea-469">Ha háttérfeladat nem sikerül, egy üzenet feldolgozása közben, az üzenet újból meg fog jelenni a várólistában a betekintés idő lejárta után.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-469">If a background task fails when processing a message, that message will reappear on the queue after the peek time-out expires.</span></span> <span data-ttu-id="6d6ea-470">A feladat, vagy erre a következő feldolgozási ciklusban másik példánya kerül feldolgozásra.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-470">It will be processed by another instance of the task or during the next processing cycle of this instance.</span></span> <span data-ttu-id="6d6ea-471">Az üzenet a fogyasztói következetesen hibát okoz, ha blokkolja a feladat, a várólista, és végül magának az alkalmazásnak, amikor a várólista megtelik.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-471">If the message consistently causes an error in the consumer, it will block the task, the queue, and eventually the application itself when the queue becomes full.</span></span> <span data-ttu-id="6d6ea-472">Ezért elengedhetetlen észlelni és eltávolítani az elhalt üzenetek az üzenetsorból.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-472">Therefore, it is vital to detect and remove poison messages from the queue.</span></span> <span data-ttu-id="6d6ea-473">Ha az Azure Service Bus használ, hibát okozó üzenetek helyezheti át automatikusan vagy manuálisan egy társított halott levél várósor.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-473">If you are using Azure Service Bus, messages that cause an error can be moved automatically or manually to an associated dead letter queue.</span></span>
  * <span data-ttu-id="6d6ea-474">Várólisták garantált *legalább egyszer* kézbesítési mechanizmus, de előfordulhat, hogy az azonos üzenetet kézbesíteni egynél többször.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-474">Queues are guaranteed at *least once* delivery mechanisms, but they might deliver the same message more than once.</span></span> <span data-ttu-id="6d6ea-475">Ezenkívül ha háttérfeladat nem sikerül, egy üzenet feldolgozása után, de a várólista törlése előtt, az üzenet is elérhető lesz újra feldolgozásra.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-475">In addition, if a background task fails after processing a message but before deleting it from the queue, the message will become available for processing again.</span></span> <span data-ttu-id="6d6ea-476">Háttérfeladatok idempotent, ami azt jelenti, hogy ugyanaz az üzenet feldolgozása egynél többször nem okozhat hiba vagy ellentmondás az alkalmazásadatok kell lennie.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-476">Background tasks should be idempotent, which means that processing the same message more than once does not cause an error or inconsistency in the application’s data.</span></span> <span data-ttu-id="6d6ea-477">Egyes műveletek esetében természetesen az idempotent, például a tárolt érték beállítása a megadott új értékre.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-477">Some operations are naturally idempotent, such as setting a stored value to a specific new value.</span></span> <span data-ttu-id="6d6ea-478">Azonban műveletek, például egy érték hozzáadása egy meglévő tárolt értéket annak ellenőrzése, hogy a tárolt érték továbbra is ugyanaz, mint amikor az eredetileg üzenet nélkül inkonzisztenciát okozhat.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-478">However, operations such as adding a value to an existing stored value without checking that the stored value is still the same as when the message was originally sent will cause inconsistencies.</span></span> <span data-ttu-id="6d6ea-479">Az Azure Service Bus-üzenetsorok beállítható úgy, hogy automatikusan eltávolítja a duplikált üzenetek.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-479">Azure Service Bus queues can be configured to automatically remove duplicated messages.</span></span>
  * <span data-ttu-id="6d6ea-480">Néhány üzenetküldő rendszereket használnak, például az Azure storage várólisták és az Azure Service Bus-üzenetsorok, támogatja a de-queue count tulajdonság, amely jelzi a szám, ahányszor egy üzenetet az üzenetsorból beolvasva.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-480">Some messaging systems, such as Azure storage queues and Azure Service Bus queues, support a de-queue count property that indicates the number of times a message has been read from the queue.</span></span> <span data-ttu-id="6d6ea-481">Ez lehet hasznos, ismétlődő és az elhalt üzenetek kezelésének.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-481">This can be useful in handling repeated and poison messages.</span></span> <span data-ttu-id="6d6ea-482">További információkért lásd: [aszinkron üzenetkezelési ismertetése](http://msdn.microsoft.com/library/dn589781.aspx) és [idempotencia minták](http://blog.jonathanoliver.com/2010/04/idempotency-patterns/).</span><span class="sxs-lookup"><span data-stu-id="6d6ea-482">For more information, see [Asynchronous Messaging Primer](http://msdn.microsoft.com/library/dn589781.aspx) and [Idempotency Patterns](http://blog.jonathanoliver.com/2010/04/idempotency-patterns/).</span></span>

## <a name="scaling-and-performance-considerations"></a><span data-ttu-id="6d6ea-483">Méretezés és teljesítmény kapcsolatos szempontok</span><span class="sxs-lookup"><span data-stu-id="6d6ea-483">Scaling and performance considerations</span></span>
<span data-ttu-id="6d6ea-484">Háttérfeladatok kell nyújtania elegendő teljesítményét annak ellenőrzéséhez, nem az alkalmazás letiltása, és késleltetett művelet miatt inkonzisztenciát okozhat, ha a rendszer terhelés alatt van.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-484">Background tasks must offer sufficient performance to ensure they do not block the application, or cause inconsistencies due to delayed operation when the system is under load.</span></span> <span data-ttu-id="6d6ea-485">Általában a háttérben futó feladatot futtató számítási példányokért skálázással a teljesítmény növelése.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-485">Typically, performance is improved by scaling the compute instances that host the background tasks.</span></span> <span data-ttu-id="6d6ea-486">Tervezése és kialakítása háttérfeladatok, vegye figyelembe a következő szempontokat méretezhetőségével és teljesítménye:</span><span class="sxs-lookup"><span data-stu-id="6d6ea-486">When you are planning and designing background tasks, consider the following points around scalability and performance:</span></span>

* <span data-ttu-id="6d6ea-487">Azure támogatja az automatikus skálázást (kiterjesztése és a méretezés) aktuális igény szerint és a betöltés--alapján vagy előre definiált ütemezés szerint, Web Apps, Felhőszolgáltatások webes és feldolgozói szerepkörök és virtuális gépek központi telepítések.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-487">Azure supports autoscaling (both scaling out and scaling back in) based on current demand and load--or on a predefined schedule, for Web Apps, Cloud Services web and worker roles, and Virtual Machines hosted deployments.</span></span> <span data-ttu-id="6d6ea-488">E szolgáltatás használatával ellenőrizze, hogy rendelkezik-e az alkalmazás egészének elegendő teljesítménybeli képességek ugyanakkor minimalizálja a futásidejű költségeket.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-488">Use this feature to ensure that the application as a whole has sufficient performance capabilities while minimizing runtime costs.</span></span>
* <span data-ttu-id="6d6ea-489">Ahol háttérfeladatok egy más-más teljesítménybeli képesség egyéb részeitől Cloud Services-alkalmazás (például a felhasználói felületen vagy összetevők, például az adatelérési réteg), a háttér feladatokat együtt egy külön feldolgozói szerepkört üzemeltető lehetővé teszi, hogy a felhasználói felület és háttér-feladat szerepkörök méretezését a terhelés kezelésére.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-489">Where background tasks have a different performance capability from the other parts of a Cloud Services application (for example, the UI or components such as the data access layer), hosting the background tasks together in a separate worker role allows the UI and background task roles to scale independently to manage the load.</span></span> <span data-ttu-id="6d6ea-490">Ha több háttérfeladatok jelentősen más-más teljesítménybeli képességek egymástól, vegye figyelembe a külön feldolgozói szerepkörök történő osztásával őket, és egymástól függetlenül skálázás minden felhasználóiszerepkör-típus.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-490">If multiple background tasks have significantly different performance capabilities from each other, consider dividing them into separate worker roles and scaling each role type independently.</span></span> <span data-ttu-id="6d6ea-491">Vegye figyelembe azonban, hogy ez növeli a futásidejű költségeket feladataival egyesítésével az kevesebb szerepkörök képest.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-491">However, note that this might increase runtime costs compared to combining all the tasks into fewer roles.</span></span>
* <span data-ttu-id="6d6ea-492">A szerepkörök egyszerűen skálázás nem feltétlenül elégségesek teljesítmény terhelés adatvesztés elkerülése érdekében.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-492">Simply scaling the roles might not be sufficient to prevent loss of performance under load.</span></span> <span data-ttu-id="6d6ea-493">Szükség lehet méretezni tárüzenetsort és egyéb erőforrások egyetlen pont, a teljes megelőzése érdekében a szűk keresztmetszetek váljon lánc feldolgozása.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-493">You might also need to scale storage queues and other resources to prevent a single point of the overall processing chain from becoming a bottleneck.</span></span> <span data-ttu-id="6d6ea-494">Figyelembe venni, az egyéb korlátozások is érvényesek, mint a maximális átviteli sebesség és egyéb szolgáltatások támaszkodó, az alkalmazás és a háttérben futó feladatot.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-494">Also, consider other limitations, such as the maximum throughput of storage and other services that the application and the background tasks rely on.</span></span>
* <span data-ttu-id="6d6ea-495">Háttérfeladatok méretezéshez kell megtervezni.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-495">Background tasks must be designed for scaling.</span></span> <span data-ttu-id="6d6ea-496">Például, képesnek kell lenniük dinamikusan észleléséhez használja ahhoz, hogy a figyelje, illetve üzeneteket küldeni a megfelelő várólistát tárolási sorok száma.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-496">For example, they must be able to dynamically detect the number of storage queues in use in order to listen on or send messages to the appropriate queue.</span></span>
* <span data-ttu-id="6d6ea-497">Alapértelmezés szerint a webjobs-feladatok mérete, a társított Azure Web Apps példánya.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-497">By default, WebJobs scale with their associated Azure Web Apps instance.</span></span> <span data-ttu-id="6d6ea-498">Azonban ha azt szeretné, hogy csak egy példányban fiókként szándékozik futtatni webjobs-feladat, létrehozhat egy JSON-adatokat tartalmazó Settings.job fájlt **{"is_singleton": true}**.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-498">However, if you want a WebJob to run as only a single instance, you can create a Settings.job file that contains the JSON data **{ "is_singleton": true }**.</span></span> <span data-ttu-id="6d6ea-499">Ez csak egy példányát a webjobs-feladat futtatásához Azure kényszeríti, még akkor is, ha a kapcsolódó webalkalmazás több példánya van.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-499">This forces Azure to only run one instance of the WebJob, even if there are multiple instances of the associated web app.</span></span> <span data-ttu-id="6d6ea-500">Ez akkor lehet hasznos módszer kell futnia, csak egy példányban ütemezett feladatokhoz.</span><span class="sxs-lookup"><span data-stu-id="6d6ea-500">This can be a useful technique for scheduled jobs that must run as only a single instance.</span></span>

## <a name="related-patterns"></a><span data-ttu-id="6d6ea-501">Kapcsolódó minták</span><span class="sxs-lookup"><span data-stu-id="6d6ea-501">Related patterns</span></span>
* [<span data-ttu-id="6d6ea-502">Aszinkron üzenetkezelési ismertetése</span><span class="sxs-lookup"><span data-stu-id="6d6ea-502">Asynchronous Messaging Primer</span></span>](http://msdn.microsoft.com/library/dn589781.aspx)
* [<span data-ttu-id="6d6ea-503">Automatikus skálázás útmutató</span><span class="sxs-lookup"><span data-stu-id="6d6ea-503">Autoscaling Guidance</span></span>](http://msdn.microsoft.com/library/dn589774.aspx)
* [<span data-ttu-id="6d6ea-504">Tranzakció mintát Compensating</span><span class="sxs-lookup"><span data-stu-id="6d6ea-504">Compensating Transaction Pattern</span></span>](http://msdn.microsoft.com/library/dn589804.aspx)
* [<span data-ttu-id="6d6ea-505">Versengő fogyasztók minta</span><span class="sxs-lookup"><span data-stu-id="6d6ea-505">Competing Consumers Pattern</span></span>](http://msdn.microsoft.com/library/dn568101.aspx)
* [<span data-ttu-id="6d6ea-506">Útmutatás particionálás számítási</span><span class="sxs-lookup"><span data-stu-id="6d6ea-506">Compute Partitioning Guidance</span></span>](http://msdn.microsoft.com/library/dn589773.aspx)
* [<span data-ttu-id="6d6ea-507">Számítási erőforrás-összevonási minta</span><span class="sxs-lookup"><span data-stu-id="6d6ea-507">Compute Resource Consolidation Pattern</span></span>](http://msdn.microsoft.com/library/dn589778.aspx)
* [<span data-ttu-id="6d6ea-508">Forgalomirányító minta</span><span class="sxs-lookup"><span data-stu-id="6d6ea-508">Gatekeeper Pattern</span></span>](http://msdn.microsoft.com/library/dn589793.aspx)
* [<span data-ttu-id="6d6ea-509">Vezető választás minta</span><span class="sxs-lookup"><span data-stu-id="6d6ea-509">Leader Election Pattern</span></span>](http://msdn.microsoft.com/library/dn568104.aspx)
* [<span data-ttu-id="6d6ea-510">Adatcsatornák és a szűrők minta</span><span class="sxs-lookup"><span data-stu-id="6d6ea-510">Pipes and Filters Pattern</span></span>](http://msdn.microsoft.com/library/dn568100.aspx)
* [<span data-ttu-id="6d6ea-511">Prioritás várólista minta</span><span class="sxs-lookup"><span data-stu-id="6d6ea-511">Priority Queue Pattern</span></span>](http://msdn.microsoft.com/library/dn589794.aspx)
* [<span data-ttu-id="6d6ea-512">Minta simítás várólista alapú betöltése</span><span class="sxs-lookup"><span data-stu-id="6d6ea-512">Queue-based Load Leveling Pattern</span></span>](http://msdn.microsoft.com/library/dn589783.aspx)
* [<span data-ttu-id="6d6ea-513">A Feladatütemező ügynök felügyelő minta</span><span class="sxs-lookup"><span data-stu-id="6d6ea-513">Scheduler Agent Supervisor Pattern</span></span>](http://msdn.microsoft.com/library/dn589780.aspx)

## <a name="more-information"></a><span data-ttu-id="6d6ea-514">További információ</span><span class="sxs-lookup"><span data-stu-id="6d6ea-514">More information</span></span>
* [<span data-ttu-id="6d6ea-515">Skálázás feldolgozói szerepkörök az Azure-alkalmazások</span><span class="sxs-lookup"><span data-stu-id="6d6ea-515">Scaling Azure Applications with Worker Roles</span></span>](http://msdn.microsoft.com/library/hh534484.aspx#sec8)
* [<span data-ttu-id="6d6ea-516">Háttér-feladatok végrehajtása</span><span class="sxs-lookup"><span data-stu-id="6d6ea-516">Executing Background Tasks</span></span>](http://msdn.microsoft.com/library/ff803365.aspx)
* <span data-ttu-id="6d6ea-517">[Az Azure szerepkör indítása életciklusának](http://blog.syntaxc4.net/post/2011/04/13/windows-azure-role-startup-life-cycle.aspx) (blogbejegyzés)</span><span class="sxs-lookup"><span data-stu-id="6d6ea-517">[Azure Role Startup Life Cycle](http://blog.syntaxc4.net/post/2011/04/13/windows-azure-role-startup-life-cycle.aspx) (blog post)</span></span>
* <span data-ttu-id="6d6ea-518">[Azure Cloud Services szerepkör életciklus](http://channel9.msdn.com/Series/Windows-Azure-Cloud-Services-Tutorials/Windows-Azure-Cloud-Services-Role-Lifecycle) (videó)</span><span class="sxs-lookup"><span data-stu-id="6d6ea-518">[Azure Cloud Services Role Lifecycle](http://channel9.msdn.com/Series/Windows-Azure-Cloud-Services-Tutorials/Windows-Azure-Cloud-Services-Role-Lifecycle) (video)</span></span>
* [<span data-ttu-id="6d6ea-519">Mi az Azure WebJobs SDK?</span><span class="sxs-lookup"><span data-stu-id="6d6ea-519">What is the Azure WebJobs SDK</span></span>](https://docs.microsoft.com/azure/app-service-web/websites-dotnet-webjobs-sdk)
* [<span data-ttu-id="6d6ea-520">Háttérfeladatok futtatása WebJobs-feladatokkal</span><span class="sxs-lookup"><span data-stu-id="6d6ea-520">Run Background tasks with WebJobs</span></span>](https://docs.microsoft.com/azure/app-service-web/web-sites-create-web-jobs)
* [<span data-ttu-id="6d6ea-521">Az Azure várólisták és a Service Bus-üzenetsorok - az képest és ellentétben</span><span class="sxs-lookup"><span data-stu-id="6d6ea-521">Azure Queues and Service Bus Queues - Compared and Contrasted</span></span>](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted)
* [<span data-ttu-id="6d6ea-522">Diagnosztika a egy felhőalapú szolgáltatás engedélyezése</span><span class="sxs-lookup"><span data-stu-id="6d6ea-522">How to Enable Diagnostics in a Cloud Service</span></span>](https://docs.microsoft.com/azure/cloud-services/cloud-services-dotnet-diagnostics)

