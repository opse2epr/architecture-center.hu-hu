---
title: Ismételje meg az általános útmutatást
description: Átmeneti hiba célból újrapróbálkozási útmutatást.
author: dragon119
ms.date: 07/13/2016
pnp.series.title: Best Practices
ms.openlocfilehash: 9562e3447b2219fe2f3df96cfca24b845efa39b0
ms.sourcegitcommit: c53adf50d3a787956fc4ebc951b163a10eeb5d20
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 11/23/2017
---
# <a name="transient-fault-handling"></a>Átmeneti hiba kezelése

[!INCLUDE [header](../_includes/header.md)]

Minden alkalmazás, amely kommunikálni a távoli szolgáltatásokat és erőforrásokat kell átmeneti-és nagybetűket. Ez különösen a helyzet a felhőben, ahol a környezet és a kapcsolatot az interneten keresztül jellege azt jelenti, ezek a típusok hibák várhatóan gyakran előforduló futtatható alkalmazások esetében. Átmeneti hálózati összetevőkkel és szolgáltatásokkal kapcsolatban a pillanatnyi elvesztését, egy szolgáltatás, vagy merülhetnek fel, ha a "szolgáltatás" foglalt időtúllépések ideiglenes elérhetetlensége tartalmazza. Ezek a hibák gyakran önállóan korrigálja, és ha a művelet ismétlődik megfelelő várakozás után már valószínűleg sikeres.

Ez a dokumentum átmeneti hiba kezelésére szolgáló általános útmutatást tartalmazza. További információ a átmeneti hibák kezelése a Microsoft Azure-szolgáltatások használatakor: [Azure szolgáltatással kapcsolatos újrapróbálkozási irányelvek](./retry-service-specific.md).

## <a name="why-do-transient-faults-occur-in-the-cloud"></a>Miért tegye átmeneti hibák merülnek fel a felhőben?
Átmeneti bármely környezetben, bármilyen platformra vagy az operációs rendszer, és bármilyen alkalmazás fordul elő. A helyi rendszeren futó megoldások általában megmarad költséges és gyakran alatt használt hardver-redundancia segítségével helyszíni infrastruktúra-, teljesítmény- és az alkalmazás és az összetevőinek rendelkezésre állását, és összetevők és erőforrások találhatók bezárása egymáshoz. Így hiba kisebb valószínűséggel, miközben továbbra is eredményezhet átmeneti - és előre nem látható esemény, például a külső tápegység vagy hálózati problémák vagy egyéb vészhelyreállítási forgatókönyvek keresztül kimaradás is.

Felhő üzemeltet, beleértve a magánfelhő-alapú rendszerek is egy magasabb rendelkezésre állását segítségével lehetőséget megosztott erőforrások, a redundancia, az Automatikus feladatátvétel és a dinamikus erőforrás-elosztás hagyományos számítási csomópontok hatalmas számú. Azonban ezekben a környezetekben jellege azt, hogy átmeneti fordul-e. Nincsenek ennek több oka:

* Egy felhőalapú környezetben sok erőforrás van megosztva, és ezekhez az erőforrásokhoz való hozzáférés védelme az erőforrás-szabályozás. Egyes szolgáltatások elutasítják az kapcsolatok, amikor valamilyen konkrét szintje a nő a terhelés, vagy a maximális átviteli sebesség elérése, annak érdekében, hogy a meglévő kérelmek feldolgozási és az összes felhasználó számára a szolgáltatás teljesítményének fenntartása. Sávszélesség-szabályozási segíti a szolgáltatásminőség szomszédok és a megosztott erőforrás segítségével más bérlők karbantartása.
* Felhőalapú környezetek hatalmas mennyiségű hagyományos hardver egységek használatával készített. Több számítógépes egységek és infrastruktúra-összetevőihez a terhelés dinamikusan elosztásával teljesítményt biztosítanak, és megbízhatóság kézbesítendő automatikusan újrahasznosítása vagy cseréje sikertelen egység. A dinamikus jellege azt jelenti, hogy, hogy átmeneti és ideiglenes kapcsolódási hibák alkalmanként fordulhat elő.
* Nincsenek gyakran további hardverösszetevők, beleértve a hálózati infrastruktúrát, például az útválasztók és terheléselosztók, az alkalmazás és az erőforrások és a használt szolgáltatások között. A további infrastruktúra alkalmanként vethet fel további kapcsolat késleltetése és átmeneti kapcsolati hibák.
* Az ügyfél és a kiszolgáló közötti hálózati körülmények változó, lehet, különösen akkor, ha a kommunikáció áthalad az interneten. A helyszíni helyeken, még akkor is, a nagyon nagy forgalomterhelés kommunikációs lassú és időszakos kapcsolattal hibákhoz vezethet.

## <a name="challenges"></a>Kihívásai
Átmeneti akkor is, ha azt tesztelték alaposan minden előrelátható körülmények túl nagy hatással lehet egy alkalmazás érzékelt működési rendelkezésre állását. Győződjön meg arról, hogy a felhőben üzemeltetett alkalmazások megbízhatóan fog működni, hogy fel kell tudni válaszolni a következő problémákkal:

* Az alkalmazás észleléséhez hibák fordulnak elő, és határozza meg, hogy ezeket a hibákat valószínűleg átmeneti, több hosszú ideig tart képesnek kell lennie, vagy a Terminálszolgáltatások hibákat észlel. Különböző erőforrások valószínűleg különböző válaszok vissza, ha a hiba akkor fordul elő, és ezeket a válaszokat is eltérhetnek attól függően, hogy a környezetben, a művelet; például a tárolási olvasása során hibát kapott válasz lehet hiba történt a válasz eltérő tárolási írásakor. Sok erőforrások és szolgáltatások rendelkeznek szerződések dokumentált átmeneti hiba történt. Azonban ha nem áll rendelkezésre, ezeket az információkat nehéz lehet felderíteni a hiba, valamint azt, hogy legyen valószínűleg átmeneti jellegétől.
* Az alkalmazás meg tudjanak próbálja megismételni a műveletet, ha azt állapítja meg, hogy a tartalék várhatóan átmenetiek lehetnek, és nyomon követheti, a szám, ahányszor a műveletet a rendszer újra megpróbálja elvégezni.
* Az alkalmazás a próbálkozások megfelelő stratégiát kell használnia. Ezt a stratégiát határozza meg, hogy hányszor, akkor újra kell, a késleltetés között minden kísérlet, illetve a műveletek egy sikertelen kísérlet után. A megfelelő próbálkozások száma és a késleltetés között mindegyik nehezen gyakran határozza meg, és az erőforrás típusát, valamint magának az alkalmazásnak és az erőforrás jelenlegi üzemi körülmények függően változhat.

## <a name="general-guidelines"></a>Általános irányelveket
A következő irányelveket segít kialakítani a megfelelő átmeneti hiba, az alkalmazások mechanizmus átadás:

* **Állapítsa meg, hogy van-e egy beépített újrapróbálkozási mechanizmus:**
  * Sok egy SDK vagy az ügyfél könyvtár, egy átmeneti hiba mechanizmusban tartalmazó biztosítanak. Az újrapróbálkozási házirendet alkalmaz általában szabva jellege és a célként megadott szolgáltatás követelményeinek. REST illesztőfelületek a szolgáltatások azt is megteheti, hogy egy újabb megfelelő, és mennyi ideig várjon a következő újrapróbálkozási kísérlet előtt meghatározni, hogy hasznos információk térhetnek vissza.
  * A automatikusan újrapróbálkozik mechanizmust használni, ahol egy áll rendelkezésre, kivéve, ha az adott és jól érthető a követelmények, amely egy másik újrapróbálási viselkedése pontosabb jelenti.
* **Annak megállapítása, hogy a művelet ismételt próbálkozás alkalmas**:
  * Műveletek csak újra kell próbálkoznia, ahol a hibákra átmeneti (általában a hiba természetét jelölve), és legalább néhány a valószínűsége annak, hogy a művelet sikeres lesz, amikor reattempted. Nincs a műveletek, például egy adatbázis érvénytelen műveletet jelző megoldódhat pont frissítése egy elem nem létezik, vagy egy szolgáltatás vagy az erőforrások, amelyek egy végzetes hiba jelentkezett-kérelmeket
  * Meg kell valósítania általában újrapróbálkozások, csak ha a teljes hatásának lehet meghatározni, és a feltételek helyes értendők, és érvényesíteni lehessen. Ha nem, akkor hagyja a mezőt a hívó kód újrapróbálkozások végrehajtásához. Ne feledje, hogy erőforrások által visszaadott hibák a verzióinformációk előfordulhat, hogy a vezérlő kívül szolgáltatások és az átmeneti hiba észlelési logika le újra szeretne.
  * Szolgáltatásokért és összetevőkért létrehozásakor fontolja meg a műveletek hibakódok és üzenetek, amely segít meghatározni, hogy azokat újra kell ügyfelek végrehajtása nem sikerült. Különösen jelzik, ha az ügyfél érdemes újra megpróbálnia a művelet (lehet, hogy az adatszolgáltató által egy **isTransient** érték), és felajánlja a megfelelő késleltetést a következő újrapróbálkozási kísérlet előtt. Ha egy webszolgáltatás, fontolja meg a szolgáltatási egyezmény belül definiált egyéni hibák visszaadása. Annak ellenére, hogy általános előfordulhat, hogy nem tudják olvassa el az alábbi, fogják hasznos egyéni ügyfelek felépítése közben.
* **Határozza meg egy megfelelő újrapróbálkozások maximális számát és időköz:**
  * Elengedhetetlen az újrapróbálkozások maximális számát és a használati eset típusú intervallum optimalizálása érdekében. Nem megfelelő számú alkalommal újra, ha az alkalmazás nem tudja végrehajtani a műveletet, és valószínűleg hibát tapasztal. Ha túl sokszor újra, vagy a közötti túl rövid intervallum próbálkozik, az alkalmazás esetleg tárolására képes erőforrások, például a szálak, kapcsolatok és memória hosszú ideig, ami kedvezőtlen hatással lesz az alkalmazás állapotáról.
  * A megfelelő értékeket az időintervallum és újrapróbálkozási kísérleteinek száma attól függ, hogy a művelet végrehajtására történt kísérlet típusú. Például, ha a művelet a felhasználói beavatkozás része, a időköz csak rövid és a csak néhány próbálkozás történt elkerülése érdekében, így a felhasználók a válaszra való várakozás (amely tartalmazza a nyitott kapcsolatot, és csökkentheti a rendelkezésre állási más felhasználók számára). Ha a művelet hosszú ideig futó vagy kritikus munkafolyamat részét képezi, hol található a program megszakítja, és indítsa újra a folyamatot, hogy költséges vagy időigényes, célszerű már próbálkozások között várnia, majd próbálja megismételni a több alkalommal.
  * A megfelelő próbálkozások közötti időintervallumot meghatározása része a legbonyolultabb sikeres stratégia tervezése. Tipikus stratégiák használja a következő típusú újrapróbálkozási időköz:
    * **Az exponenciális vissza ki**. Az alkalmazás rövid időn belül az első újrapróbálkozásnál, és exponenciálisan növelése minden ezt követő újrapróbálkozási közötti idő előtt megvárja-e. Előfordulhat például, próbálja megismételni a műveletet után 3 másodpercet, 12 másodperc, 30 másodperces, és így tovább.
    * **Növekményes intervallumok**. Az alkalmazás rövid időn belül az első újrapróbálkozásnál, és fokozatosan növekszik minden ezt követő újrapróbálkozási közötti idő előtt megvárja-e. Előfordulhat, hogy például akkor próbálja megismételni a műveletet után 3 másodpercet, 7 másodperc, 13 másodpercen belül, és így tovább.
    * **Rendszeres időközönként**. Az alkalmazás egyes kísérletek között eltelt idő azonos időszakára vár. Például akkor lehet, hogy újra a művelettel 3 másodpercenként.
    * **Azonnali újrapróbálkozási**. Néha egy átmeneti hiba nagyon rövid, esetleg egy eseményt, például egy hálózati csomag ütközési vagy egy csúcs az igények egy hardverösszetevő okozza. Ebben az esetben azonnal megpróbálná megismételni a műveletet nem megfelelő mert sikeres lehet, ha a hiba az alkalmazás összeállítása és a következő kérés küldése szükséges idő a törölve. Azonban soha nem kell több azonnali újrapróbálkozási kísérletek, és kell vált alternatív stratégiák, mint például az exponenciális vissza ki- és tartalék műveletek, ha az azonnali újrapróbálkozási sikertelen.
    * **Véletlenszerű**. A fent felsorolt stratégiák újrapróbálkozási bármelyikét tartalmazhatják a véletlenszerű, hogy megakadályozza az ügyfél későbbi újrapróbálkozások egyszerre több példányát. Például egy példány újrapróbálkozik a művelet után 3 másodpercet, 11 másodperc, 28 másodperc és így tovább, amíg egy másik példánya lehet, hogy után próbálja megismételni a műveletet 4 másodperc, 12 másodperc, 26 másodperc, és így tovább. Véletlenszerű a hasznos technika, amely más stratégiák kombinálhatók.  
  * Általános irányelvként elmondható használja a exponenciális vissza az indító stratégia háttér üzemelnek, és azonnali vagy rendszeres időköz újrapróbálkozási stratégiák interaktív műveletekhez. Mindkét esetben a késleltetés kell kiválasztani, és az újrapróbálkozások maximális számát, hogy az összes maximális késleltetés az újrapróbálkozások megfelel a szükséges végpontok-késési követelménynek.
  * Vegye figyelembe a tényezőket, amelyek a rendszer művelet teljes maximális időtúllépés kombinációja. Ezek a tényezők közé tartoznak a sikertelen kapcsolódás választ (általában az ügyfél egy időtúllépési értéket állítja be) eredményezett igénybe vett idő és a késleltetés, újrapróbálkozások és az újrapróbálkozások maximális számát Ezekben az időszakokban az összes eredményezhet nagy általános művelet időpontokat, különösen ha egy exponenciális késleltetés stratégia használata, ahol az újrapróbálkozások között növekedésének gyorsan minden egyes hiba után. Ha egy folyamatot meg kell felelnie egy meghatározott szolgáltatásiszint-szerződéssel (SLA), a teljes műveletet idejét, az összes időtúllépések és várakozás, beleértve belül, amely definiálni kell a szolgáltatásiszint-szerződés
  * Over-Aggressive újrapróbálkozási stratégiát, túl rövid intervallumok rendelkezik vagy túl is újrapróbálkozik, a cél erőforráson vagy szolgáltatás kedvezőtlen hatással lehet. Ez előfordulhat, hogy az erőforrás vagy a szolgáltatás túlterhelt állapotát helyre, és továbbra is letilthatja vagy elutasítja a kérelmeket. Ennek eredményeképp a ahol egyre több kérelmeket küld az erőforrás vagy szolgáltatás, és ezért képességét a helyreállítás vicious kör további csökken.
  * Vegye figyelembe az időtúllépés a műveletek indítása a következő kísérlet azonnal (például, ha az időkorlát hasonlít az újrapróbálkozási időköz) elkerülése érdekében az újrapróbálkozási időközöket kiválasztásakor. Is figyelembe vennie, ha a teljes lehetséges időszak (időkorlát és az újrapróbálkozási időközöket) egy adott időtartam alatt tartani. Szokatlanul hosszú vagy nagyon rövid időtúllépések rendelkező műveletek befolyásolhatják, mennyi ideig való várja meg, és hogy milyen gyakran próbálja megismételni a műveletet.
  * A kivétel és bármilyen adatot tartalmaz, vagy a hibakódok és a szolgáltatás által visszaadott üzenetek segítségével optimalizálhatja azt az időközt, és az újbóli próbálkozások számát. Például bizonyos kivételek vagy hiba kódok (például a HTTP 503-as szolgáltatás nem használható egy fejléccel újrapróbálkozási után a válaszban szereplő kód) jelezheti mennyi ideig lehet, hogy utoljára a hiba, illetve hogy a szolgáltatás sikertelen volt, ezért nem fog válaszolni bármely ezt követő kísérletek.
* **Víruskereső minták elkerülése**:
  * Az esetek többsége ne megvalósításokhoz, amely tartalmazza az újrapróbálkozási szabályzat duplikált rétegek. Elkerüléséhez terveket, amelyek tartalmazzák a kaszkádolt újrapróbálkozási mechanizmus, vagy amelyek megvalósítják az újrapróbálkozási egy művelet, amely magában foglalja a kérelmek, a hierarchia minden szakaszban, ha nincs konkrét követelmények, hogy igény szerint. Ilyen kivételes körülmények között házirendekkel, amelyek megakadályozzák az újrapróbálkozások és a késleltetés időszakok túlzott számát, és győződjön meg arról, hogy tisztában a következményekkel. Például egy összetevő egy kérést küld egy másik, mely majd fér hozzá a célként megadott szolgáltatás, és valósítja meg a számával, három mindkét hívásoknál nem lesznek újra kilenc újra próbálja összesen a szolgáltatásra. Sok szolgáltatásokat és erőforrásokat megvalósítása beépített újrapróbálkozási mechanizmussal, és ki kell vizsgálni, hogyan tiltsa le, vagy módosítsa, ha kell megvalósítani a magasabb szintű újrapróbálkozások.
  * Soha nem valósítja meg az végtelen újrapróbálkozási mechanizmus. Valószínű, hogy megakadályozza a erőforrás és a szolgáltatás történő helyreállítás túlterhelési helyzetekben, és a szabályozás, és a kapcsolatok hosszabb ideig folytatja visszautasította. Véges számnak vagy az újrapróbálkozások, illetve valósítja meg, mint a minta [áramköri megszakító](http://msdn.microsoft.com/library/dn589784.aspx) ahhoz, hogy a helyreállítása.
  * Soha ne hajtsa végre a egy azonnali újrapróbálkozási egynél többször.
  * Kerülje a rendszeres újrapróbálkozási időközt, különösen, ha nagyszámú újrapróbálkozások, szolgáltatások és erőforrások az Azure-ban való hozzáféréskor. Az optimális megközelítés ebben a forgatókönyvben egy exponenciális vissza az indító stratégia a kapcsolatcsoport legfrissebb alkalmas.
  * Megakadályozza a több példánya ugyanazt az ügyfelet, és az újrapróbálkozások küldjenek a azonos időpontokban a különböző ügyfelek több példányát. Ennek oka az lehet, hogy mi történjen, ha vezethet be a újrapróbálkozási időközt véletlenszerű.
* **Az újrapróbálkozási stratégiát és -megvalósítási teszteléséhez:**
  * Győződjön meg arról, teljes mértékben tesztelése alatt újrapróbálkozási stratégia megvalósítását készletként kiterjedő körülmények között a lehető, különösen akkor, ha mind az alkalmazás és a cél erőforrásokhoz vagy szolgáltatásokhoz használja szélsőséges terhelés alatt van. Viselkedés a tesztelés során ellenőrzéséhez a következőket teheti:
    * Átmeneti és nem átmeneti hibák szúrjon be a szolgáltatásba. Például küldjön érvénytelen kérelmeket, vagy adja hozzá a kódot, amely észleli a vizsgálat kér, és válaszol, különböző típusú hibák. TestApi használatával példáért lásd: [tartalék TestApi tesztelést injektálási](http://msdn.microsoft.com/magazine/ff898404.aspx) és [TestApi – rész 5 bemutatása: felügyelt kód tartalék beszúrására szolgáló API-k](http://blogs.msdn.com/b/ivo_manolov/archive/2009/11/25/9928447.aspx).
    * Hozzon létre egy mock erőforrás vagy szolgáltatás, amely a hibákat, a tényleges szolgáltatás térhetnek vissza számos adja vissza. Győződjön meg arról, fedik le a hiba minden típusú, amely az újrapróbálkozási stratégiát észlelésére szolgál.
    * Átmeneti hibát ideiglenesen letiltása, vagy ha egy egyéni szolgáltatás létrehozott és telepített, túl van terhelve, hogy a szolgáltatás által kényszerített (meg kell nem, természetesen megkísérelhetik túlterhelni a megosztott erőforrás vagy megosztott szolgáltatások, Azure-ban).
    * HTTP-alapú API-k esetében fontolja meg az automatikus tesztek a FiddlerCore szalagtár módosítása a HTTP-kérelmek eredményét extra körbejárási alkalommal hozzáadásával vagy a válasz (például a HTTP-állapotkód:, fejléc, törzs vagy egyéb tényezők) módosításával. Ez lehetővé teszi a meghibásodás részhalmazát, determinisztikus teszteléséhez e átmeneti hibák vagy egyéb típusú hiba. További információkért lásd: [FiddlerCore](http://www.telerik.com/fiddler/fiddlercore). Példákat arra, hogyan használható a könyvtár különösen a **HttpMangler** osztály, tekintse meg a [forráskód az Azure Storage szolgáltatás SDK](https://github.com/Azure/azure-storage-net/tree/master/Test).
    * Hajtsa végre a nagy terhelés tényező és egyidejűleg vizsgálatok ügyeljen arra, hogy az újrapróbálkozási mechanizmus és stratégia működik megfelelően a ezeket a feltételeket, és nem rendelkezik a művelet az ügyfél kedvezőtlen hatással vagy okozhat a kereszt-szennyezés kérelmek között.
* **Újrapróbálkozási házirend-konfigurációk kezelése:**
  * A *újrapróbálkozási házirendet* az elemek az újrapróbálkozási stratégia kombinációja. Azt határozza meg az észlelési folyamat, amely meghatározza, hogy a hibát valószínűleg átmeneti, az időköz, majd ismételje meg a tényleges időköz értékének és az a szám, ahányszor (például a normál, exponenciális vissza ki, és a véletlenszerű) használatához típusát.
  * Az újrapróbálkozások kell megvalósítani, még akkor is a legegyszerűbb alkalmazáson belül több helyen, és minden réteget összetettebb alkalmazásokat. Ahelyett, hogy a rögzített megadás egyes házirendek a különböző helyeken az elemek, érdemes lehet egy központi helyen a házirendek tárolásához. Például tárolja az értékeket, például az az időköz és ismételje meg az alkalmazás konfigurációs fájlok száma, futási időben olvashatja őket és az újrapróbálkozási házirendek programozott módon build. Így könnyebben kezelheti a beállításokat, és módosítsa, és konfigurálva finomhangolhatják a értékek ahhoz, hogy reagálni a követelményeket és forgatókönyvek. A rendszer az értékek tárolásához helyett rereading a konfigurációs fájlt minden olyan alkalommal, és megfelelő alapértelmezett értékeket használják, ha az érték nem lehet lekérdezni a configuration azonban tervezhet.
  * Azure Cloud Services kérelmet fontolja meg az tárolása az értékek, amelyek alapján állítja össze az újrapróbálkozási házirendeket a szolgáltatás konfigurációs fájljában futásidőben, így módosíthatja őket anélkül, hogy indítsa újra az alkalmazást.
  * Kihasználni a beépített vagy az alapértelmezett érték az ügyfél API-kat használ, de csak akkor, ha azok a forgatókönyvnek megfelelő újrapróbálkozási stratégiát. Ezek a stratégiák általában általános célú. Bizonyos esetekben lehet szükséges, de más esetekben előfordulhat, hogy nem biztosítanak a teljes számos olyan lehetőséget konkrét igényeinek. Ismernie kell arról, hogy a beállítások milyen hatással van az alkalmazás tesztelése keresztül a leginkább megfelelő értékek meghatározásáról.
* **Naplófájl, és nyomon követéséhez átmeneti és nem átmeneti hibák:**
  * Az újrapróbálkozási stratégia részeként tartalmazza a kivétel- és egyéb instrumentation, amelyre bejelentkezik, amikor újra kísérletet tesz. Míg egy alkalmi átmeneti hiba történt, és próbálkozzon újra várható, és nem jelölnek újrapróbálkozások problémát, rendszeres és növekvő száma általában azt jelzi, hogy a hibát, amely hibákat okozhatnak, vagy jelenleg van hatással az alkalmazások teljesítményének és a rendelkezésre állás.
  * Jelentkezzen be átmeneti hiba bejegyzéseket, hanem figyelmeztetés bejegyzéseket, úgy, hogy a rendszerek nem észlelt őket, lehetséges, hogy a téves riasztások kiváltó alkalmazáshibák.
  * Érdemes tárolni egy értéket a naplóbejegyzéseket, amely jelzi, ha az újrapróbálkozások okozta, a szolgáltatás szabályozásával, illetve más típusú hibák esetén kapcsolódási hibákat, például így meg lehet különböztetni ezeket az adatok elemzése során. A sávszélesség-szabályozási hibák száma növekedése legtöbbször azt jelzi, hogy az alkalmazást, vagy váltson át a premium szolgáltatás, amely nyújt, dedikált hardver szükséges tervezési hibája.  
  * Vegye figyelembe a mérésére, és a teljes idő, amely tartalmazza az újrapróbálkozási mechanizmussal műveletek naplózása. Ez az átmeneti végeredményben jól jelzi a felhasználó válaszidejét, folyamat várakozási ideje és az alkalmazás használati esete hatékonyságát. Napló az újbóli próbálkozások számát is történt ahhoz, hogy a válaszidő hozzájáruló tényezők megértéséhez.
  * Vegye figyelembe a telemetriai adatok végrehajtási és is növelheti a riasztásokat, amikor a rendszer és sikertelen, az újbóli próbálkozások átlagos számának figyelése, vagy a teljes időpontok végrehajtott műveletek, növekszik.
* **Folyamatosan eleget nem tevő műveletek kezelése:**
  
  * Ha a művelet továbbra is minden kísérlet sikertelen, és fontos figyelembe venni, hogyan fogja kezelni ezt a helyzetet körülmények között lesz:
    * Bár egy újrapróbálkozási stratégiát határozza meg az a maximális száma egy műveletet meg kell ismételni, nem akadályozza meg a műveletet, ismétlődő újrapróbálkozások azonos számú az alkalmazás. Például egy rendelés feldolgozása szolgáltatás súlyos hiba, amely véglegesen az kívüli művelet sikertelen, az újrapróbálkozási stratégiát is észlelése kapcsolódási időtúllépés és vegye figyelembe, hogy egy átmeneti hiba lehet. A kód fogja próbálja megismételni a műveletet a megadott számú alkalommal és majd feladták. Azonban, ha egy másik felhasználói sorrendben, a műveletet a rendszer ismét megkísérli - akkor is, ha arra, hogy minden olyan alkalommal sikertelen lesz.
    * Folyamatosan sikertelen, vegye fontolóra műveletek folyamatos újrapróbálásainak megelőzése érdekében a [áramköri megszakító mintát](http://msdn.microsoft.com/library/dn589784.aspx). Ebben a mintában belül egy megadott időkeretnél hibák száma meghaladja a küszöbértéket, ha kérelmek vissza a hívónak azonnal, hibák, anélkül, hogy az erőforrás vagy a szolgáltatás elérésére tett kísérlet.
    * Az alkalmazás rendszeres időközönként tesztelheti a szolgáltatást, az időszakos alapján, hogy az nagyon hosszú kérelmek, észleléséhez, amikor elérhetővé válik gyakoriságát. Megfelelő időközönként a forgatókönyvet, például a kritikusság a művelet és a szolgáltatás jellegétől függ, és semmi néhány perc és több óra közötti lehet. A pontnál, ahol a teszt sikeres az alkalmazás folytassa a munkát, és az újonnan helyreállított szolgáltatás kérelmek átadásához.
    * Addig is, lehetséges, hogy lehetséges, hogy a szolgáltatás (feltehetően egy másik datacenter vagy alkalmazás) egy másik példánya visszaállni, használjon, amely kompatibilis (lehet, hogy egyszerűbb) funkciót kínál hasonló szolgáltatást, vagy valamilyen alternatív műveleteinek elvégzéséhez a reménysugár hogy a szolgáltatás hamarosan elérhető lesz. Például elképzelhető, hogy a megfelelő tárolja a beérkező kéréseket a sorhoz vagy adatokat tárolja, és később visszajátszásos őket. Ellenkező esetben elképzelhető átirányítja a felhasználót az alkalmazás egy másik példánya, az alkalmazás teljesítményét, de továbbra is az elfogadható funkciókat kínálnak, vagy csak térjen vissza egy üzenet arról, hogy az alkalmazás nem érhető el a felhasználó jelenleg.
* **Egyéb szempontok**
  
  * Az újrapróbálkozások számának és a házirend újrapróbálkozási intervallumok meghatározásakor vegye figyelembe, ha a szolgáltatás vagy az erőforrás a művelet hosszú futású vagy többlépéses művelet része. Nehéz lehet, vagy drága kiegyensúlyozása működési lépést a, ha egy már sikeres volt sikertelen. Ebben az esetben egy nagyon hosszú időtartamot és nagyszámú újrapróbálkozások is elfogadható mindaddig, amíg nem blokkolja a többi művelet okozó vagy szűkös erőforrások zárolása.
  * Vegye figyelembe, ha megpróbálná megismételni a műveletet is inkonzisztenciát okozhat adatok. Ha a folyamat egyes részei ismétlődjenek-e, és a műveletek még nem idempotent, akkor azt eredményezheti, inkonzisztencia. Például-os értéket, művelet ismétlődik, ha a művelet létrehoz egy érvénytelen eredményt. Üzenet küldése egy üzenetsorba műveletet ismétlődő okozhat Inkonzisztencia a üzenetfogyasztó Ha nem tudja megállapítani a duplikált üzenetek. Ennek megelőzése érdekében győződjön meg arról, hogy alakítson ki minden lépés idempotent műveletként. Idempotencia kapcsolatos további információkért lásd: [idempotencia minták][idempotency-patterns].
  * Vegye figyelembe a megpróbálja műveletek körét. Elképzelhető például, amely magában foglalja a több művelet szinten újrapróbálkozási kód megvalósítását, majd próbálja újra őket minden meghibásodásakor könnyebben. Azonban ez azt eredményezheti, idempotencia problémák vagy a felesleges visszaállítási műveleteket.
  * Ha úgy dönt, amely magában foglalja a több művelet újrapróbálkozási hatókör, vegye figyelembe a teljes késést, az összes őket a újrapróbálkozási időközt meghatározásakor, amikor az igénybe vett idő, valamint a hibák riasztás kiváltása előtt.
  * Vegye figyelembe, hogyan az újrapróbálkozási stratégiát befolyásolhatják a szomszédok és más bérlők egy megosztott alkalmazásban, illetve megosztott erőforrások és szolgáltatások használatakor. Agresszív újrapróbálkozási házirend átmeneti hibák előforduló, ezek más felhasználók és az alkalmazások, szolgáltatások és erőforrások egyre több okozhat. Hasonlóképpen a más felhasználók, erőforrások és szolgáltatások által végrehajtott újrapróbálkozási házirend hatással lehet az alkalmazás. Kritikus fontosságú alkalmazások esetén előfordulhat, hogy használata mellett dönt, amely nem megosztott premium-szolgáltatásokhoz. Ez lehetővé teszi a több ellenőrzést a terhelés és ezt követő eldobására sávszélesség-szabályozási ezen erőforrások és szolgáltatások, így a további költségeket alkossanak.

## <a name="more-information"></a>További információ
* [Az Azure szolgáltatással kapcsolatos újrapróbálkozási irányelvek](./retry-service-specific.md)
* [Az átmeneti hiba kezelési alkalmazás letiltása](http://msdn.microsoft.com/library/hh680934.aspx)
* [Áramköri megszakító minta](http://msdn.microsoft.com/library/dn589784.aspx)
* [Tranzakció mintát Compensating](http://msdn.microsoft.com/library/dn589804.aspx)
* [Idempotencia minták][idempotency-patterns]

[idempotency-patterns]: http://blog.jonathanoliver.com/idempotency-patterns/

