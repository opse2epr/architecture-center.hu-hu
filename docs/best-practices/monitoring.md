---
title: Monitorozási és diagnosztikai útmutató
titleSuffix: Best practices for cloud applications
description: Ajánlott eljárások a felhőben futó elosztott alkalmazások monitorozásához.
author: dragon119
ms.date: 07/13/2016
ms.custom: seodec18
ms.openlocfilehash: 82010fc57108d167d334d4a9f1ee669d2841cdcd
ms.sourcegitcommit: 4ba3304eebaa8c493c3e5307bdd9d723cd90b655
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 12/12/2018
ms.locfileid: "53307418"
---
# <a name="monitoring-and-diagnostics"></a><span data-ttu-id="3400c-103">Monitorozás és diagnosztika</span><span class="sxs-lookup"><span data-stu-id="3400c-103">Monitoring and diagnostics</span></span>

<span data-ttu-id="3400c-104">A felhőben futó elosztott alkalmazások és szolgáltatások jellegükből adódóan összetett szoftverek, amelyek számos mozgó részből tevődnek össze.</span><span class="sxs-lookup"><span data-stu-id="3400c-104">Distributed applications and services running in the cloud are, by their nature, complex pieces of software that comprise many moving parts.</span></span> <span data-ttu-id="3400c-105">Éles környezetben fontos a rendszer felhasználók általi használatának nyomon követhetősége, az erőforrás-felhasználás nyomon követhetősége, valamint a rendszer állapotának és teljesítményének általános monitorozhatósága.</span><span class="sxs-lookup"><span data-stu-id="3400c-105">In a production environment, it's important to be able to track the way in which users utilize your system, trace resource utilization, and generally monitor the health and performance of your system.</span></span> <span data-ttu-id="3400c-106">Ezeknek a diagnosztikai információknak a segítségével észlelheti és javíthatja a problémákat, valamint felderítheti a potenciális problémákat, és megelőzheti azok bekövetkezését.</span><span class="sxs-lookup"><span data-stu-id="3400c-106">You can use this information as a diagnostic aid to detect and correct issues, and also to help spot potential problems and prevent them from occurring.</span></span>

## <a name="monitoring-and-diagnostics-scenarios"></a><span data-ttu-id="3400c-107">Monitorozási és diagnosztikai forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="3400c-107">Monitoring and diagnostics scenarios</span></span>

<span data-ttu-id="3400c-108">A monitorozás segítségével betekintést nyerhet abba, hogy mennyire jól működik a rendszer.</span><span class="sxs-lookup"><span data-stu-id="3400c-108">You can use monitoring to gain an insight into how well a system is functioning.</span></span> <span data-ttu-id="3400c-109">A monitorozás kritikus szerepet játszik a szolgáltatásminőségi célok elérésében.</span><span class="sxs-lookup"><span data-stu-id="3400c-109">Monitoring is a crucial part of maintaining quality-of-service targets.</span></span> <span data-ttu-id="3400c-110">Általános forgatókönyvek a monitorozási adatok gyűjtésére:</span><span class="sxs-lookup"><span data-stu-id="3400c-110">Common scenarios for collecting monitoring data include:</span></span>

- <span data-ttu-id="3400c-111">A rendszer megfelelő állapotának biztosítása.</span><span class="sxs-lookup"><span data-stu-id="3400c-111">Ensuring that the system remains healthy.</span></span>
- <span data-ttu-id="3400c-112">A rendszer és összetevői rendelkezésre állásának nyomon követése.</span><span class="sxs-lookup"><span data-stu-id="3400c-112">Tracking the availability of the system and its component elements.</span></span>
- <span data-ttu-id="3400c-113">A megfelelő teljesítmény fenntartása, hogy a rendszer feldolgozási képessége ne romoljon le váratlanul a munkamennyiség növekedésével.</span><span class="sxs-lookup"><span data-stu-id="3400c-113">Maintaining performance to ensure that the throughput of the system does not degrade unexpectedly as the volume of work increases.</span></span>
- <span data-ttu-id="3400c-114">Annak szavatolása, hogy a rendszer megfeleljen az ügyfelekkel kötött szolgáltatásiszint-szerződéseknek (service-level agreement, SLA).</span><span class="sxs-lookup"><span data-stu-id="3400c-114">Guaranteeing that the system meets any service-level agreements (SLAs) established with customers.</span></span>
- <span data-ttu-id="3400c-115">A rendszer, a felhasználók és a felhasználói adatok védelmének és biztonságának biztosítása.</span><span class="sxs-lookup"><span data-stu-id="3400c-115">Protecting the privacy and security of the system, users, and their data.</span></span>
- <span data-ttu-id="3400c-116">A naplózási és szabályozási céllal végzett műveletek nyomon követése.</span><span class="sxs-lookup"><span data-stu-id="3400c-116">Tracking the operations that are performed for auditing or regulatory purposes.</span></span>
- <span data-ttu-id="3400c-117">A rendszer mindennapos használatának nyomon követése, és a trendek észlelése, amelyek megfelelő ellenintézkedések hiányában problémákat okozhatnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-117">Monitoring the day-to-day usage of the system and spotting trends that might lead to problems if they're not addressed.</span></span>
- <span data-ttu-id="3400c-118">A felmerülő hibák nyomon követése a kezdeti jelentéstől a lehetséges okok elemzéséig, javításig, a hibákból fakadó szoftverfrissítésekig és üzembe helyezésig.</span><span class="sxs-lookup"><span data-stu-id="3400c-118">Tracking issues that occur, from initial report through to analysis of possible causes, rectification, consequent software updates, and deployment.</span></span>
- <span data-ttu-id="3400c-119">A műveletek nyomon követése, és a szoftverkiadások hibáinak elhárítása.</span><span class="sxs-lookup"><span data-stu-id="3400c-119">Tracing operations and debugging software releases.</span></span>

> [!NOTE]
> <span data-ttu-id="3400c-120">A fenti lista nem tekintendő átfogónak.</span><span class="sxs-lookup"><span data-stu-id="3400c-120">This list is not intended to be comprehensive.</span></span> <span data-ttu-id="3400c-121">A dokumentum ezekre a forgatókönyvekre, mint a leggyakoribb monitorozási helyzetekre összpontosít.</span><span class="sxs-lookup"><span data-stu-id="3400c-121">This document focuses on these scenarios as the most common situations for performing monitoring.</span></span> <span data-ttu-id="3400c-122">Természetesen lehetnek más forgatókönyvek is, amelyek kevésé gyakoriak, vagy csak az adott környezetre jellemzőek.</span><span class="sxs-lookup"><span data-stu-id="3400c-122">There might be others that are less common or are specific to your environment.</span></span>

<span data-ttu-id="3400c-123">Az alábbi szakaszokban részletesebben tárgyaljuk ezeket a forgatókönyveket.</span><span class="sxs-lookup"><span data-stu-id="3400c-123">The following sections describe these scenarios in more detail.</span></span> <span data-ttu-id="3400c-124">Az egyes forgatókönyvekkel kapcsolatos információkat az alábbi formában ismertetjük:</span><span class="sxs-lookup"><span data-stu-id="3400c-124">The information for each scenario is discussed in the following format:</span></span>

1. <span data-ttu-id="3400c-125">A forgatókönyv rövid áttekintése.</span><span class="sxs-lookup"><span data-stu-id="3400c-125">A brief overview of the scenario</span></span>
2. <span data-ttu-id="3400c-126">A forgatókönyv jellemző követelményei.</span><span class="sxs-lookup"><span data-stu-id="3400c-126">The typical requirements of this scenario</span></span>
3. <span data-ttu-id="3400c-127">A forgatókönyv végrehajtásához szükséges nyers rendszerállapot-adatok, valamint ezek lehetséges forrásai.</span><span class="sxs-lookup"><span data-stu-id="3400c-127">The raw instrumentation data that's required to support the scenario, and possible sources of this information</span></span>
4. <span data-ttu-id="3400c-128">A nyers adatok elemzésének és egyesítésének módszerei hasznos diagnosztikai információk létrehozása céljából.</span><span class="sxs-lookup"><span data-stu-id="3400c-128">How this raw data can be analyzed and combined to generate meaningful diagnostic information</span></span>

## <a name="health-monitoring"></a><span data-ttu-id="3400c-129">Állapotfigyelés</span><span class="sxs-lookup"><span data-stu-id="3400c-129">Health monitoring</span></span>

<span data-ttu-id="3400c-130">A rendszer állapota akkor megfelelő, ha a rendszer fut, és képes kéréseket feldolgozni.</span><span class="sxs-lookup"><span data-stu-id="3400c-130">A system is healthy if it is running and capable of processing requests.</span></span> <span data-ttu-id="3400c-131">Az állapotmonitorozás célja, hogy egy pillanatképet készítsen a rendszer aktuális állapotáról, amely alapján ellenőrizheti, hogy a rendszer minden összetevője a várt módon működik-e.</span><span class="sxs-lookup"><span data-stu-id="3400c-131">The purpose of health monitoring is to generate a snapshot of the current health of the system so that you can verify that all components of the system are functioning as expected.</span></span>

### <a name="requirements-for-health-monitoring"></a><span data-ttu-id="3400c-132">Az állapotmonitorozásra vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-132">Requirements for health monitoring</span></span>

<span data-ttu-id="3400c-133">Az operátoroknak gyorsan (pár másodpercen belül) értesülnie kell, ha a rendszer bármely részének működése nem megfelelőnek tekinthető.</span><span class="sxs-lookup"><span data-stu-id="3400c-133">An operator should be alerted quickly (within a matter of seconds) if any part of the system is deemed to be unhealthy.</span></span> <span data-ttu-id="3400c-134">Az operátornak meg kell tudnia állapítani, hogy a rendszer mely részei működnek megfelelően, és mely részekben tapasztalhatók problémák.</span><span class="sxs-lookup"><span data-stu-id="3400c-134">The operator should be able to ascertain which parts of the system are functioning normally, and which parts are experiencing problems.</span></span> <span data-ttu-id="3400c-135">A rendszerállapot jelzőlámpás megoldással jeleníthető meg:</span><span class="sxs-lookup"><span data-stu-id="3400c-135">System health can be highlighted through a traffic-light system:</span></span>

- <span data-ttu-id="3400c-136">Vörös jelzi a meghibásodást (a rendszer leállt).</span><span class="sxs-lookup"><span data-stu-id="3400c-136">Red for unhealthy (the system has stopped)</span></span>
- <span data-ttu-id="3400c-137">Sárga jelzi a részleges meghibásodást (a rendszer kevesebb funkciót biztosítva fut).</span><span class="sxs-lookup"><span data-stu-id="3400c-137">Yellow for partially healthy (the system is running with reduced functionality)</span></span>
- <span data-ttu-id="3400c-138">Zöld jelzi a teljesen kifogástalan működést.</span><span class="sxs-lookup"><span data-stu-id="3400c-138">Green for completely healthy</span></span>

<span data-ttu-id="3400c-139">Az átfogó állapotmonitorozási rendszer segítségével az operátor részletesen elemezheti a rendszer állapotát egészen az alrendszerek és az összetevők állapotáig.</span><span class="sxs-lookup"><span data-stu-id="3400c-139">A comprehensive health-monitoring system enables an operator to drill down through the system to view the health status of subsystems and components.</span></span> <span data-ttu-id="3400c-140">Ha például a rendszer általános állapota részlegesen megfelelőként jelenik meg, az operátornak képesnek kell lennie a nagyításra, és annak megállapítására, hogy épp melyik funkció nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="3400c-140">For example, if the overall system is depicted as partially healthy, the operator should be able to zoom in and determine which functionality is currently unavailable.</span></span>

### <a name="data-sources-instrumentation-and-data-collection-requirements"></a><span data-ttu-id="3400c-141">Adatforrások, rendszerállapot-adatok és adatgyűjtési követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-141">Data sources, instrumentation, and data-collection requirements</span></span>

<span data-ttu-id="3400c-142">Az állapotmonitorozás támogatásához szükséges nyers adatok a következők eredményeként hozhatók létre:</span><span class="sxs-lookup"><span data-stu-id="3400c-142">The raw data that's required to support health monitoring can be generated as a result of:</span></span>

- <span data-ttu-id="3400c-143">A felhasználói kérések végrehajtásának nyomon követése.</span><span class="sxs-lookup"><span data-stu-id="3400c-143">Tracing execution of user requests.</span></span> <span data-ttu-id="3400c-144">Ezeknek az információknak a segítségével határozható meg, hogy mely kérések voltak sikeresek és melyek nem, és hogy mennyi ideig tart az egyes kérések végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="3400c-144">This information can be used to determine which requests have succeeded, which have failed, and how long each request takes.</span></span>
- <span data-ttu-id="3400c-145">Szintetikus felhasználómonitorozás.</span><span class="sxs-lookup"><span data-stu-id="3400c-145">Synthetic user monitoring.</span></span> <span data-ttu-id="3400c-146">Ez a folyamat a felhasználó által végrehajtott lépéseket szimulálja, és előre meghatározott lépések sorát követi.</span><span class="sxs-lookup"><span data-stu-id="3400c-146">This process simulates the steps performed by a user and follows a predefined series of steps.</span></span> <span data-ttu-id="3400c-147">Az egyes lépések eredményét rögzíteni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-147">The results of each step should be captured.</span></span>
- <span data-ttu-id="3400c-148">Kivételek, hibák és figyelmeztetések naplózása.</span><span class="sxs-lookup"><span data-stu-id="3400c-148">Logging exceptions, faults, and warnings.</span></span> <span data-ttu-id="3400c-149">Ezek az információk az alkalmazás kódjába ágyazott nyomkövetési utasítások eredményeként, valamint a rendszer által hivatkozott szolgáltatások eseménynaplóiból lekért adatok alapján rögzíthetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-149">This information can be captured as a result of trace statements embedded into the application code, as well as retrieving information from the event logs of any services that the system references.</span></span>
- <span data-ttu-id="3400c-150">A rendszer által használt külső szolgáltatások állapotának monitorozása.</span><span class="sxs-lookup"><span data-stu-id="3400c-150">Monitoring the health of any third-party services that the system uses.</span></span> <span data-ttu-id="3400c-151">Az ilyen monitorozás során szükség lehet az érintett szolgáltatások által biztosított állapotadatok lekérésére és elemzésére.</span><span class="sxs-lookup"><span data-stu-id="3400c-151">This monitoring might require retrieving and parsing health data that these services supply.</span></span> <span data-ttu-id="3400c-152">Ezek az adatok számos különféle formátumban fordulhatnak elő.</span><span class="sxs-lookup"><span data-stu-id="3400c-152">This information might take a variety of formats.</span></span>
- <span data-ttu-id="3400c-153">Végpont-monitorozás.</span><span class="sxs-lookup"><span data-stu-id="3400c-153">Endpoint monitoring.</span></span> <span data-ttu-id="3400c-154">Ezt a mechanizmust „A rendelkezésre állás monitorozása” című szakasz ismerteti részletesebben.</span><span class="sxs-lookup"><span data-stu-id="3400c-154">This mechanism is described in more detail in the "Availability monitoring" section.</span></span>
- <span data-ttu-id="3400c-155">Környezeti teljesítményadatok gyűjtése, például a háttérbeli processzorhasználatra vagy I/O-tevékenységekre (beleértve a hálózati tevékenységeket is) vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="3400c-155">Collecting ambient performance information, such as background CPU utilization or I/O (including network) activity.</span></span>

### <a name="analyzing-health-data"></a><span data-ttu-id="3400c-156">Állapotadatok elemzése</span><span class="sxs-lookup"><span data-stu-id="3400c-156">Analyzing health data</span></span>

<span data-ttu-id="3400c-157">Az állapotmonitorozás elsődleges célja annak gyors jelzése, hogy a rendszer fut-e.</span><span class="sxs-lookup"><span data-stu-id="3400c-157">The primary focus of health monitoring is to quickly indicate whether the system is running.</span></span> <span data-ttu-id="3400c-158">A közvetlen adatok azonnali elemzése riasztást válthat ki, ha egy kritikus összetevő állapotát a monitorozás nem megfelelőnek ítéli.</span><span class="sxs-lookup"><span data-stu-id="3400c-158">Hot analysis of the immediate data can trigger an alert if a critical component is detected as unhealthy.</span></span> <span data-ttu-id="3400c-159">(Például akkor, amikor nem válaszol több egymást követő pingelésre.) Az operátor így végrehajthatja a megfelelő korrekciós műveleteket.</span><span class="sxs-lookup"><span data-stu-id="3400c-159">(It fails to respond to a consecutive series of pings, for example.) The operator can then take the appropriate corrective action.</span></span>

<span data-ttu-id="3400c-160">A fejlettebb rendszerek előrejelzési elemmel is rendelkezhetnek, amelyek a legutóbbi és az aktuális számítási feladatok hideg elemzése alapján működnek.</span><span class="sxs-lookup"><span data-stu-id="3400c-160">A more advanced system might include a predictive element that performs a cold analysis over recent and current workloads.</span></span> <span data-ttu-id="3400c-161">A hideg elemzés képes észlelni a tendenciákat, és meghatározni, hogy a rendszer várhatóan megfelelő állapotú marad-e, és hogy van-e szüksége további erőforrásokra.</span><span class="sxs-lookup"><span data-stu-id="3400c-161">A cold analysis can spot trends and determine whether the system is likely to remain healthy or whether the system will need additional resources.</span></span> <span data-ttu-id="3400c-162">Az előrejelzési elemnek kritikus teljesítménymutatók alapján kell működnie, például:</span><span class="sxs-lookup"><span data-stu-id="3400c-162">This predictive element should be based on critical performance metrics, such as:</span></span>

- <span data-ttu-id="3400c-163">Az egyes szolgáltatásokra vagy alrendszerekre irányuló kérések mennyisége.</span><span class="sxs-lookup"><span data-stu-id="3400c-163">The rate of requests directed at each service or subsystem.</span></span>
- <span data-ttu-id="3400c-164">Az ilyen kérések válaszideje.</span><span class="sxs-lookup"><span data-stu-id="3400c-164">The response times of these requests.</span></span>
- <span data-ttu-id="3400c-165">Az egyes szolgáltatásokba be- és onnan kilépő adatok mennyisége.</span><span class="sxs-lookup"><span data-stu-id="3400c-165">The volume of data flowing into and out of each service.</span></span>

<span data-ttu-id="3400c-166">Ha valamelyik metrika értéke meghaladja a meghatározott küszöbértéket, a rendszer riasztást küldhet, hogy az operátor vagy az automatikus skálázás (ha van) megtehesse a rendszer megfelelő állapotának fenntartásához szükséges megelőző intézkedéseket.</span><span class="sxs-lookup"><span data-stu-id="3400c-166">If the value of any metric exceeds a defined threshold, the system can raise an alert to enable an operator or autoscaling (if available) to take the preventative actions necessary to maintain system health.</span></span> <span data-ttu-id="3400c-167">Ilyen intézkedések lehetnek az erőforrások hozzáadása, egy vagy több meghibásodott szolgáltatás újraindítása, vagy az alacsonyabb prioritású kérések szabályozása.</span><span class="sxs-lookup"><span data-stu-id="3400c-167">These actions might involve adding resources, restarting one or more services that are failing, or applying throttling to lower-priority requests.</span></span>

## <a name="availability-monitoring"></a><span data-ttu-id="3400c-168">A rendelkezésre állás monitorozása</span><span class="sxs-lookup"><span data-stu-id="3400c-168">Availability monitoring</span></span>

<span data-ttu-id="3400c-169">Egy valóban kifogástalan állapotú rendszerhez elengedhetetlen, hogy a rendszert alkotó összetevők és alrendszerek rendelkezésre álljanak.</span><span class="sxs-lookup"><span data-stu-id="3400c-169">A truly healthy system requires that the components and subsystems that compose the system are available.</span></span> <span data-ttu-id="3400c-170">A rendelkezésre állás monitorozása szorosan kapcsolódik az állapotmonitorozáshoz.</span><span class="sxs-lookup"><span data-stu-id="3400c-170">Availability monitoring is closely related to health monitoring.</span></span> <span data-ttu-id="3400c-171">Amíg azonban az állapotmonitorozás a rendszer aktuális állapotának azonnali helyzetét jeleníti meg, a rendelkezésre állás monitorozása a rendszer és a rendszer összetevőinek rendelkezésre állását követi nyomon, és statisztikákat készít a rendszer üzemidejére vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="3400c-171">But whereas health monitoring provides an immediate view of the current health of the system, availability monitoring is concerned with tracking the availability of the system and its components to generate statistics about the uptime of the system.</span></span>

<span data-ttu-id="3400c-172">Számos rendszerben bizonyos összetevők (például az adatbázisok) beépített redundanciával vannak konfigurálva, így gyors feladatátvételt tesznek lehetővé súlyos hibák vagy a kapcsolat megszakadása esetén.</span><span class="sxs-lookup"><span data-stu-id="3400c-172">In many systems, some components (such as a database) are configured with built-in redundancy to permit rapid failover in the event of a serious fault or loss of connectivity.</span></span> <span data-ttu-id="3400c-173">Ideális esetben a felhasználók nem is tudhatják, hogy ilyen hiba történt.</span><span class="sxs-lookup"><span data-stu-id="3400c-173">Ideally, users should not be aware that such a failure has occurred.</span></span> <span data-ttu-id="3400c-174">A rendelkezésre állás monitorozása szempontjából azonban a lehető legtöbb információt kell gyűjteni az ilyen hibákkal kapcsolatban, hogy megállapíthatók legyenek az okok, és végre lehessen hajtani a korrekciós műveleteket a hibák ismételt előfordulásának elkerülésére.</span><span class="sxs-lookup"><span data-stu-id="3400c-174">But from an availability monitoring perspective, it's necessary to gather as much information as possible about such failures to determine the cause and take corrective actions to prevent them from recurring.</span></span>

<span data-ttu-id="3400c-175">A rendelkezésre állás nyomon követéséhez szükséges adatok számos alacsonyabb szintű tényezőtől függhetnek.</span><span class="sxs-lookup"><span data-stu-id="3400c-175">The data that's required to track availability might depend on a number of lower-level factors.</span></span> <span data-ttu-id="3400c-176">Ezeknek a tényezőknek jelentős része az adott alkalmazásra, rendszerre vagy környezetre lehet jellemző.</span><span class="sxs-lookup"><span data-stu-id="3400c-176">Many of these factors might be specific to the application, system, and environment.</span></span> <span data-ttu-id="3400c-177">A hatékony monitorozási rendszerek az ezeknek az alacsony szintű tényezőknek megfelelő rendelkezésreállási adatokat rögzítik, majd azokat összesítve átfogó képet biztosítanak a rendszerről.</span><span class="sxs-lookup"><span data-stu-id="3400c-177">An effective monitoring system captures the availability data that corresponds to these low-level factors and then aggregates them to give an overall picture of the system.</span></span> <span data-ttu-id="3400c-178">Egy e-kereskedelmi rendszerben például az ügyfelek általi rendelést lehetővé tevő üzleti funkció függhet a megrendelések adatait tároló adattártól, valamint a megrendelések kifizetésére vonatkozó pénzügyi tranzakciókat kezelő fizetési rendszertől.</span><span class="sxs-lookup"><span data-stu-id="3400c-178">For example, in an e-commerce system, the business functionality that enables a customer to place orders might depend on the repository where order details are stored and the payment system that handles the monetary transactions for paying for these orders.</span></span> <span data-ttu-id="3400c-179">A rendszer rendelési részének rendelkezésre állása ezért az adattár és a fizetési alrendszer rendelkezésre állásának függvénye.</span><span class="sxs-lookup"><span data-stu-id="3400c-179">The availability of the order-placement part of the system is therefore a function of the availability of the repository and the payment subsystem.</span></span>

### <a name="requirements-for-availability-monitoring"></a><span data-ttu-id="3400c-180">A rendelkezésre állás monitorozására vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-180">Requirements for availability monitoring</span></span>

<span data-ttu-id="3400c-181">Az operátornak meg kell tudnia tekinteni az egyes rendszerek és alrendszerek rendelkezésreállási előzményadatait is, és ezeknek az információknak a segítségével ki kell tudniuk mutatni a tendenciákat, amelyek egy vagy több alrendszer rendszeres meghibásodását okozhatják.</span><span class="sxs-lookup"><span data-stu-id="3400c-181">An operator should also be able to view the historical availability of each system and subsystem, and use this information to spot any trends that might cause one or more subsystems to periodically fail.</span></span> <span data-ttu-id="3400c-182">(A szolgáltatások egy olyan adott napszakban kezdenek meghibásodni, amely a feldolgozási csúcsidőszaknak felel meg?)</span><span class="sxs-lookup"><span data-stu-id="3400c-182">(Do services start to fail at a particular time of day that corresponds to peak processing hours?)</span></span>

<span data-ttu-id="3400c-183">A monitorozási megoldásoknak azonnali és előzményadatokat tartalmazó nézeteket is biztosítaniuk kell az egyes alrendszerek rendelkezésre állásával vagy rendelkezésre nem állásával kapcsolatban.</span><span class="sxs-lookup"><span data-stu-id="3400c-183">A monitoring solution should provide an immediate and historical view of the availability or unavailability of each subsystem.</span></span> <span data-ttu-id="3400c-184">Emellett képesnek kell lennie gyorsan riasztani az operátort, amikor egy vagy több szolgáltatás meghibásodik, vagy ha a felhasználók nem érik el a szolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-184">It should also be capable of quickly alerting an operator when one or more services fail or when users can't connect to services.</span></span> <span data-ttu-id="3400c-185">Ehhez nem csupán az egyes szolgáltatások monitorozása szükséges, hanem a felhasználók által végrehajtott műveletek vizsgálata is, ha ezek a műveletek meghiúsulnak, amikor kommunikálni próbálnak a szolgáltatással.</span><span class="sxs-lookup"><span data-stu-id="3400c-185">This is a matter of not only monitoring each service, but also examining the actions that each user performs if these actions fail when they attempt to communicate with a service.</span></span> <span data-ttu-id="3400c-186">A csatlakozási hibák bizonyos mértékig normálisnak tekinthetők, és átmeneti hibák miatt léphetnek fel.</span><span class="sxs-lookup"><span data-stu-id="3400c-186">To some extent, a degree of connectivity failure is normal and might be due to transient errors.</span></span> <span data-ttu-id="3400c-187">Hasznos lehet azonban engedélyezni a rendszer számára, hogy riasztást küldjön egy adott alrendszerhez kapcsolódóan egy adott időszakban fellépő kapcsolathibák számáról.</span><span class="sxs-lookup"><span data-stu-id="3400c-187">But it might be useful to allow the system to raise an alert for the number of connectivity failures to a specified subsystem that occur during a specific period.</span></span>

<!-- markdownlint-disable MD024 MD033 -->

### <a name="data-sources-instrumentation-and-data-collection-requirements"></a><span data-ttu-id="3400c-188">Adatforrások, rendszerállapot-adatok és adatgyűjtési követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-188">Data sources, instrumentation, and data-collection requirements</span></span>

<span data-ttu-id="3400c-189">Az állapotmonitorozáshoz hasonlóan, a rendelkezésre állás monitorozásának a támogatásához szükséges nyers adatok is a szintetikus felhasználómonitorozás, valamint a kivételek, hibák és figyelmeztetések naplózásának az eredményeként hozhatók létre.</span><span class="sxs-lookup"><span data-stu-id="3400c-189">As with health monitoring, the raw data that's required to support availability monitoring can be generated as a result of synthetic user monitoring and logging any exceptions, faults, and warnings that might occur.</span></span> <span data-ttu-id="3400c-190">A rendelkezésreállási adatok emellett végpont-monitorozásból is beszerezhetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-190">In addition, availability data can be obtained from performing endpoint monitoring.</span></span> <span data-ttu-id="3400c-191">Az alkalmazás egy vagy több állapotvégpontot is elérhetővé tehet a rendszer egy funkcionális területe elérésének teszteléséhez.</span><span class="sxs-lookup"><span data-stu-id="3400c-191">The application can expose one or more health endpoints, each testing access to a functional area within the system.</span></span> <span data-ttu-id="3400c-192">A monitorozási rendszer pingelheti az egyes végpontokat egy meghatározott ütemezés szerint, és gyűjtheti ennek eredményét (sikeres vagy sikertelen).</span><span class="sxs-lookup"><span data-stu-id="3400c-192">The monitoring system can ping each endpoint by following a defined schedule and collect the results (success or fail).</span></span>

<span data-ttu-id="3400c-193">Az összes időtúllépést, hálózati kapcsolathibát és újrapróbált kapcsolódást rögzíteni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-193">All timeouts, network connectivity failures, and connection retry attempts must be recorded.</span></span> <span data-ttu-id="3400c-194">Minden adatot időbélyeggel kell ellátni.</span><span class="sxs-lookup"><span data-stu-id="3400c-194">All data should be time-stamped.</span></span>

### <a name="analyzing-availability-data"></a><span data-ttu-id="3400c-195">A rendelkezésreállási adatok elemzése</span><span class="sxs-lookup"><span data-stu-id="3400c-195">Analyzing availability data</span></span>

<span data-ttu-id="3400c-196">A rendszerállapot-adatokat összesíteni és korrelálni kell a következő elemzéstípusok támogatásához:</span><span class="sxs-lookup"><span data-stu-id="3400c-196">The instrumentation data must be aggregated and correlated to support the following types of analysis:</span></span>

- <span data-ttu-id="3400c-197">A rendszer és az alrendszerek közvetlen rendelkezésre állása.</span><span class="sxs-lookup"><span data-stu-id="3400c-197">The immediate availability of the system and subsystems.</span></span>
- <span data-ttu-id="3400c-198">A rendszer és az alrendszerek rendelkezésreállási hibáinak aránya.</span><span class="sxs-lookup"><span data-stu-id="3400c-198">The availability failure rates of the system and subsystems.</span></span> <span data-ttu-id="3400c-199">Ideális esetben az operátornak képesnek kell lennie a hibák korrelálására az adott tevékenységekkel: mi történt, amikor a rendszer meghibásodott?</span><span class="sxs-lookup"><span data-stu-id="3400c-199">Ideally, an operator should be able to correlate failures with specific activities: what was happening when the system failed?</span></span>
- <span data-ttu-id="3400c-200">A rendszer vagy az alrendszerek meghibásodási arányainak előzménynézete adott időszakra vonatkozóan, valamint a rendszer terhelése (például a felhasználói kérések száma) a hiba bekövetkezésekor.</span><span class="sxs-lookup"><span data-stu-id="3400c-200">A historical view of failure rates of the system or any subsystems across any specified period, and the load on the system (number of user requests, for example) when a failure occurred.</span></span>
- <span data-ttu-id="3400c-201">A rendszer vagy egy alrendszer rendelkezésre nem állásának okai.</span><span class="sxs-lookup"><span data-stu-id="3400c-201">The reasons for unavailability of the system or any subsystems.</span></span> <span data-ttu-id="3400c-202">Ilyen ok lehet például, ha a szolgáltatás nem fut, ha megszakad a kapcsolat, ha létrejön a kapcsolat, de időtúllépés történik, vagy ha létrejön a kapcsolat, de hibát ad vissza.</span><span class="sxs-lookup"><span data-stu-id="3400c-202">For example, the reasons might be service not running, connectivity lost, connected but timing out, and connected but returning errors.</span></span>

<span data-ttu-id="3400c-203">A szolgáltatások adott időszakra vetített százalékos rendelkezésre állását az alábbi képlettel számíthatja ki:</span><span class="sxs-lookup"><span data-stu-id="3400c-203">You can calculate the percentage availability of a service over a period of time by using the following formula:</span></span>

```console
%Availability =  ((Total Time – Total Downtime) / Total Time ) * 100
```

<span data-ttu-id="3400c-204">Ez az SLA szempontjából hasznos.</span><span class="sxs-lookup"><span data-stu-id="3400c-204">This is useful for SLA purposes.</span></span> <span data-ttu-id="3400c-205">(Az [SLA monitorozását](#sla-monitoring) az útmutató későbbi része ismerteti részletesen.) Az *állásidő* definíciója a szolgáltatástól függ.</span><span class="sxs-lookup"><span data-stu-id="3400c-205">([SLA monitoring](#sla-monitoring) is described in more detail later in this guidance.) The definition of *downtime* depends on the service.</span></span> <span data-ttu-id="3400c-206">A Visual Studio Team Services Build Service például azon időtartamként (halmozott percek teljes száma) határozza meg az állásidőt, ameddig a Build Service nem állt rendelkezésre.</span><span class="sxs-lookup"><span data-stu-id="3400c-206">For example, Visual Studio Team Services Build Service defines downtime as the period (total accumulated minutes) during which Build Service is unavailable.</span></span> <span data-ttu-id="3400c-207">Egy perc akkor tekintendő rendelkezésre nem állónak, ha az adott percben a Build Service számára küldött, ügyfél által kezdeményezett műveletek végrehajtására irányuló, egymást követő HTTP-kérések hibakódot eredményeznek vagy nem adnak vissza választ.</span><span class="sxs-lookup"><span data-stu-id="3400c-207">A minute is considered unavailable if all continuous HTTP requests to Build Service to perform customer-initiated operations throughout the minute either result in an error code or do not return a response.</span></span>

## <a name="performance-monitoring"></a><span data-ttu-id="3400c-208">Teljesítményfigyelés</span><span class="sxs-lookup"><span data-stu-id="3400c-208">Performance monitoring</span></span>

<span data-ttu-id="3400c-209">A rendszer egyre nagyobb terhelése esetén (a felhasználók mennyiségének növekedésével), a felhasználók által elért adathalmazok mérete egyre nő, és egyre valószínűbbé válik egy vagy több összetevő meghibásodása.</span><span class="sxs-lookup"><span data-stu-id="3400c-209">As the system is placed under more and more stress (by increasing the volume of users), the size of the datasets that these users access grows and the possibility of failure of one or more components becomes more likely.</span></span> <span data-ttu-id="3400c-210">Az összetevők meghibásodását gyakran a teljesítmény csökkenése előzi meg.</span><span class="sxs-lookup"><span data-stu-id="3400c-210">Frequently, component failure is preceded by a decrease in performance.</span></span> <span data-ttu-id="3400c-211">Ha képes észlelni az ilyen teljesítménycsökkenéseket, proaktív lépéseket tehet a helyzet orvoslására.</span><span class="sxs-lookup"><span data-stu-id="3400c-211">If you're able detect such a decrease, you can take proactive steps to remedy the situation.</span></span>

<span data-ttu-id="3400c-212">A rendszer teljesítménye számos tényezőtől függ.</span><span class="sxs-lookup"><span data-stu-id="3400c-212">System performance depends on a number of factors.</span></span> <span data-ttu-id="3400c-213">Az egyes tényezőket általában fő teljesítménymutatókkal (KPI) mérik, ilyen például az adatbázis-tranzakciók másodpercenkénti száma vagy a sikeresen kiszolgált hálózati kérések mennyisége egy adott időszakban.</span><span class="sxs-lookup"><span data-stu-id="3400c-213">Each factor is typically measured through key performance indicators (KPIs), such as the number of database transactions per second or the volume of network requests that are successfully serviced in a specified time frame.</span></span> <span data-ttu-id="3400c-214">A KPI-k némelyike önálló teljesítménymutatóként érhető el, mások mérőszámok kombinációjából állnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-214">Some of these KPIs might be available as specific performance measures, whereas others might be derived from a combination of metrics.</span></span>

> [!NOTE]
> <span data-ttu-id="3400c-215">A gyenge vagy a jó teljesítmény meghatározásához ismerni kell azt a teljesítményszintet, amelyen a rendszernek képesnek kell lennie üzemelni.</span><span class="sxs-lookup"><span data-stu-id="3400c-215">Determining poor or good performance requires that you understand the level of performance at which the system should be capable of running.</span></span> <span data-ttu-id="3400c-216">Ehhez meg kell figyelni a rendszert, miközben átlagos terhelés mellett működik, és rögzíteni kell az egyes KPI-k adatait egy időszakra vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="3400c-216">This requires observing the system while it's functioning under a typical load and capturing the data for each KPI over a period of time.</span></span> <span data-ttu-id="3400c-217">Ez a rendszernek szimulált terhelés mellett, tesztkörnyezetben történő futtatásával, és a vonatkozó adatok gyűjtésével is járhat, mielőtt éles környezetben telepítené a rendszert.</span><span class="sxs-lookup"><span data-stu-id="3400c-217">This might involve running the system under a simulated load in a test environment and gathering the appropriate data before deploying the system to a production environment.</span></span>
>
> <span data-ttu-id="3400c-218">Gondoskodnia kell arról, hogy a teljesítmény monitorozása ne váljon teherré a rendszer számára.</span><span class="sxs-lookup"><span data-stu-id="3400c-218">You should also ensure that monitoring for performance purposes does not become a burden on the system.</span></span> <span data-ttu-id="3400c-219">A teljesítménymonitorozási folyamat által gyűjtött adatok részletességi szintjét érdemes lehet dinamikusan változtathatóvá tenni.</span><span class="sxs-lookup"><span data-stu-id="3400c-219">You might be able to dynamically adjust the level of detail for the data that the performance monitoring process gathers.</span></span>

### <a name="requirements-for-performance-monitoring"></a><span data-ttu-id="3400c-220">A teljesítmény monitorozására vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-220">Requirements for performance monitoring</span></span>

<span data-ttu-id="3400c-221">A rendszer teljesítményének vizsgálatához az operátornak általában az alábbi információkra van szüksége:</span><span class="sxs-lookup"><span data-stu-id="3400c-221">To examine system performance, an operator typically needs to see information that includes:</span></span>

- <span data-ttu-id="3400c-222">A felhasználói kérések megválaszolásának sebessége.</span><span class="sxs-lookup"><span data-stu-id="3400c-222">The response rates for user requests.</span></span>
- <span data-ttu-id="3400c-223">Az egyidejű felhasználói kérések száma.</span><span class="sxs-lookup"><span data-stu-id="3400c-223">The number of concurrent user requests.</span></span>
- <span data-ttu-id="3400c-224">A hálózati forgalom mennyisége.</span><span class="sxs-lookup"><span data-stu-id="3400c-224">The volume of network traffic.</span></span>
- <span data-ttu-id="3400c-225">Az üzleti tranzakciók teljesítésének sebessége.</span><span class="sxs-lookup"><span data-stu-id="3400c-225">The rates at which business transactions are being completed.</span></span>
- <span data-ttu-id="3400c-226">A kérések átlagos feldolgozási ideje.</span><span class="sxs-lookup"><span data-stu-id="3400c-226">The average processing time for requests.</span></span>

<span data-ttu-id="3400c-227">Hasznos lehet olyan eszközökkel is ellátni az operátorokat, amelyek segítenek kimutatni az alábbiak közötti összefüggéseket, például:</span><span class="sxs-lookup"><span data-stu-id="3400c-227">It can also be helpful to provide tools that enable an operator to help spot correlations, such as:</span></span>

- <span data-ttu-id="3400c-228">Az egyidejű felhasználók száma és a kérések késése (mennyi ideig tart egy kérés feldolgozásának a megkezdése, miután a felhasználó elküldte azt).</span><span class="sxs-lookup"><span data-stu-id="3400c-228">The number of concurrent users versus request latency times (how long it takes to start processing a request after the user has sent it).</span></span>
- <span data-ttu-id="3400c-229">Az egyidejű felhasználók száma és az átlagos válaszidő (mennyi ideig tart egy kérés befejezése, miután elkezdődött annak feldolgozása).</span><span class="sxs-lookup"><span data-stu-id="3400c-229">The number of concurrent users versus the average response time (how long it takes to complete a request after it has started processing).</span></span>
- <span data-ttu-id="3400c-230">A kérések mennyisége és a feldolgozási hibák száma.</span><span class="sxs-lookup"><span data-stu-id="3400c-230">The volume of requests versus the number of processing errors.</span></span>

<span data-ttu-id="3400c-231">Az ilyen magas szintű működési információk mellett az operátornak a rendszer egyes összetevőinek a teljesítményéről is részletes képet kell kapnia.</span><span class="sxs-lookup"><span data-stu-id="3400c-231">Along with this high-level functional information, an operator should be able to obtain a detailed view of the performance for each component in the system.</span></span> <span data-ttu-id="3400c-232">Ezek az adatok általában alsó szintű teljesítményszámlálók használatával biztosíthatók, amelyek az alábbi információkat követik nyomon:</span><span class="sxs-lookup"><span data-stu-id="3400c-232">This data is typically provided through low-level performance counters that track information such as:</span></span>

- <span data-ttu-id="3400c-233">Memóriahasználat.</span><span class="sxs-lookup"><span data-stu-id="3400c-233">Memory utilization.</span></span>
- <span data-ttu-id="3400c-234">Szálak száma.</span><span class="sxs-lookup"><span data-stu-id="3400c-234">Number of threads.</span></span>
- <span data-ttu-id="3400c-235">Processzor feldolgozási ideje.</span><span class="sxs-lookup"><span data-stu-id="3400c-235">CPU processing time.</span></span>
- <span data-ttu-id="3400c-236">Kérésvárólista hossza.</span><span class="sxs-lookup"><span data-stu-id="3400c-236">Request queue length.</span></span>
- <span data-ttu-id="3400c-237">Lemez vagy hálózat I/O-sebessége és -hibái.</span><span class="sxs-lookup"><span data-stu-id="3400c-237">Disk or network I/O rates and errors.</span></span>
- <span data-ttu-id="3400c-238">Az írt vagy olvasott bájtok száma.</span><span class="sxs-lookup"><span data-stu-id="3400c-238">Number of bytes written or read.</span></span>
- <span data-ttu-id="3400c-239">Köztes szoftverek mutatói, például az üzenetsor hossza.</span><span class="sxs-lookup"><span data-stu-id="3400c-239">Middleware indicators, such as queue length.</span></span>

<span data-ttu-id="3400c-240">Minden megjelenítésnek lehetővé kell tennie az operátor számára egy időtartam megadását.</span><span class="sxs-lookup"><span data-stu-id="3400c-240">All visualizations should allow an operator to specify a time period.</span></span> <span data-ttu-id="3400c-241">A megjelenített adatok az aktuális helyzet pillanatképe és/vagy a teljesítmény előzménynézete lehetnek.</span><span class="sxs-lookup"><span data-stu-id="3400c-241">The displayed data might be a snapshot of the current situation and/or a historical view of the performance.</span></span>

<span data-ttu-id="3400c-242">Az operátornak tudnia kell riasztást küldenie bármely megadott érték tetszőleges időintervallumra vonatkozó teljesítménymutatója alapján.</span><span class="sxs-lookup"><span data-stu-id="3400c-242">An operator should be able to raise an alert based on any performance measure for any specified value during any specified time interval.</span></span>

### <a name="data-sources-instrumentation-and-data-collection-requirements"></a><span data-ttu-id="3400c-243">Adatforrások, rendszerállapot-adatok és adatgyűjtési követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-243">Data sources, instrumentation, and data-collection requirements</span></span>

<span data-ttu-id="3400c-244">A rendszerre érkező és azon áthaladó felhasználói kérések állapotának monitorozásával magas szintű teljesítményadatokat gyűjthet (átviteli sebesség, egyidejű felhasználók száma, üzleti tranzakciók száma, hibaarányok és hasonlók).</span><span class="sxs-lookup"><span data-stu-id="3400c-244">You can gather high-level performance data (throughput, number of concurrent users, number of business transactions, error rates, and so on) by monitoring the progress of users' requests as they arrive and pass through the system.</span></span> <span data-ttu-id="3400c-245">Ehhez nyomkövetési utasításokat kell az alkalmazáskód kulcspontjain elhelyezni időzítési információkkal együtt.</span><span class="sxs-lookup"><span data-stu-id="3400c-245">This involves incorporating tracing statements at key points in the application code, together with timing information.</span></span> <span data-ttu-id="3400c-246">Minden hibát, kivételt és figyelmeztetést elegendő mennyiségű adattal kell rögzíteni az őket okozó kérésekkel való korrelálás érdekében.</span><span class="sxs-lookup"><span data-stu-id="3400c-246">All faults, exceptions, and warnings should be captured with sufficient data for correlating them with the requests that caused them.</span></span> <span data-ttu-id="3400c-247">Az Internet Information Services (IIS) naplója egy másik hasznos forrás.</span><span class="sxs-lookup"><span data-stu-id="3400c-247">The Internet Information Services (IIS) log is another useful source.</span></span>

<span data-ttu-id="3400c-248">Amennyiben lehetséges, az alkalmazás által használt külső rendszerek teljesítményadatait is rögzíteni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-248">If possible, you should also capture performance data for any external systems that the application uses.</span></span> <span data-ttu-id="3400c-249">A külső rendszerek biztosíthatnak saját teljesítményszámlálókat vagy egyéb funkciókat a teljesítményadatok lekéréséhez.</span><span class="sxs-lookup"><span data-stu-id="3400c-249">These external systems might provide their own performance counters or other features for requesting performance data.</span></span> <span data-ttu-id="3400c-250">Ha ez nem lehetséges, rögzítse az olyan információkat, mint a külső rendszerre felé irányuló kérések kezdési és befejezési időpontja, valamint a művelet állapota (sikeres, sikertelen vagy figyelmeztetés).</span><span class="sxs-lookup"><span data-stu-id="3400c-250">If this is not possible, record information such as the start time and end time of each request made to an external system, together with the status (success, fail, or warning) of the operation.</span></span> <span data-ttu-id="3400c-251">A kérésidők méréséhez használhat például egy stopperóra jellegű módszert: a kérés indításakor indítson el egy időmérőt, a befejezésekor pedig állítsa le.</span><span class="sxs-lookup"><span data-stu-id="3400c-251">For example, you can use a stopwatch approach to time requests: start a timer when the request starts and then stop the timer when the request finishes.</span></span>

<span data-ttu-id="3400c-252">A rendszerek egyes összetevőinek alacsony szintű teljesítményadatai olyan funkciókon és szolgáltatásokon keresztül érhetők el, mint a Windows-teljesítményszámlálók és az Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="3400c-252">Low-level performance data for individual components in a system might be available through features and services such as Windows performance counters and Azure Diagnostics.</span></span>

### <a name="analyzing-performance-data"></a><span data-ttu-id="3400c-253">Teljesítményadatok elemzése</span><span class="sxs-lookup"><span data-stu-id="3400c-253">Analyzing performance data</span></span>

<span data-ttu-id="3400c-254">Az elemzési munka nagy részét a teljesítményadatoknak a felhasználói kérés típusa és/vagy azon alrendszer vagy szolgáltatás alapján való összesítése teszi ki, amely számára az egyes kérések el lettek küldve.</span><span class="sxs-lookup"><span data-stu-id="3400c-254">Much of the analysis work consists of aggregating performance data by user request type and/or the subsystem or service to which each request is sent.</span></span> <span data-ttu-id="3400c-255">Felhasználói kérés lehet például egy cikk hozzáadása egy bevásárlókosárhoz vagy a fizetési folyamat végrehajtása egy e-kereskedelmi rendszerben.</span><span class="sxs-lookup"><span data-stu-id="3400c-255">An example of a user request is adding an item to a shopping cart or performing the checkout process in an e-commerce system.</span></span>

<span data-ttu-id="3400c-256">Egy másik gyakori követelmény a kiválasztott percentilisekben található teljesítményadatok összegzése.</span><span class="sxs-lookup"><span data-stu-id="3400c-256">Another common requirement is summarizing performance data in selected percentiles.</span></span> <span data-ttu-id="3400c-257">Az operátor például meghatározhatja a kérések 99 százalékának, a kérések 95 százalékának és a kérések 70 százalékának a válaszidejét.</span><span class="sxs-lookup"><span data-stu-id="3400c-257">For example, an operator might determine the response times for 99 percent of requests, 95 percent of requests, and 70 percent of requests.</span></span> <span data-ttu-id="3400c-258">Az egyes percentilisekre SLA-célok vagy más célkitűzések vonatkozhatnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-258">There might be SLA targets or other goals set for each percentile.</span></span> <span data-ttu-id="3400c-259">A folyamatos eredményeket közel valós időben kell jelenteni, hogy észlelhetők legyenek az azonnali problémák.</span><span class="sxs-lookup"><span data-stu-id="3400c-259">The ongoing results should be reported in near real time to help detect immediate issues.</span></span> <span data-ttu-id="3400c-260">Az eredményeket emellett hosszabb időre vonatkozóan is összesíteni kell statisztikai célokból.</span><span class="sxs-lookup"><span data-stu-id="3400c-260">The results should also be aggregated over the longer time for statistical purposes.</span></span>

<span data-ttu-id="3400c-261">Amennyiben késési problémák vetnék vissza a teljesítményt, az operátornak gyorsan kell tudnia azonosítani a szűk keresztmetszet okát az egyes kérések által végrehajtott egyes lépések késésének vizsgálatával.</span><span class="sxs-lookup"><span data-stu-id="3400c-261">In the case of latency issues affecting performance, an operator should be able to quickly identify the cause of the bottleneck by examining the latency of each step that each request performs.</span></span> <span data-ttu-id="3400c-262">A teljesítményadatoknak így lehetőséget kell biztosítaniuk az egyes lépések teljesítménymutatóinak korrelálására, hogy az adott kérésekhez lehessen kötni azokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-262">The performance data must therefore provide a means of correlating performance measures for each step to tie them to a specific request.</span></span>

<span data-ttu-id="3400c-263">A megjelenítés követelményeitől függően érdemes lehet létrehozni és menteni egy adatkockát, amely a nyers adatok nézeteit tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="3400c-263">Depending on the visualization requirements, it might be useful to generate and store a data cube that contains views of the raw data.</span></span> <span data-ttu-id="3400c-264">Az adatkocka lehetővé teszi a teljesítményadatok komplex ad hoc lekérdezését és elemzését.</span><span class="sxs-lookup"><span data-stu-id="3400c-264">This data cube can allow complex ad hoc querying and analysis of the performance information.</span></span>

## <a name="security-monitoring"></a><span data-ttu-id="3400c-265">A biztonság monitorozása</span><span class="sxs-lookup"><span data-stu-id="3400c-265">Security monitoring</span></span>

<span data-ttu-id="3400c-266">A bizalmas adatokat kezelő kereskedelmi rendszerek mindegyikében meg kell valósítani egy biztonsági struktúrát.</span><span class="sxs-lookup"><span data-stu-id="3400c-266">All commercial systems that include sensitive data must implement a security structure.</span></span> <span data-ttu-id="3400c-267">A biztonsági mechanizmus összetettségét általában az adatok bizalmassága határozza meg.</span><span class="sxs-lookup"><span data-stu-id="3400c-267">The complexity of the security mechanism is usually a function of the sensitivity of the data.</span></span> <span data-ttu-id="3400c-268">A felhasználói hitelesítést igénylő rendszerekben az alábbiakat kell rögzíteni:</span><span class="sxs-lookup"><span data-stu-id="3400c-268">In a system that requires users to be authenticated, you should record:</span></span>

- <span data-ttu-id="3400c-269">Az összes bejelentkezési kísérletet, függetlenül attól, hogy sikeresek vagy sikertelenek voltak.</span><span class="sxs-lookup"><span data-stu-id="3400c-269">All sign-in attempts, whether they fail or succeed.</span></span>
- <span data-ttu-id="3400c-270">Által végrehajtott összes műveletet &mdash; és által elért összes erőforrás részleteit &mdash; egy hitelesített felhasználó.</span><span class="sxs-lookup"><span data-stu-id="3400c-270">All operations performed by &mdash; and the details of all resources accessed by &mdash; an authenticated user.</span></span>
- <span data-ttu-id="3400c-271">A munkamenet felhasználó általi befejezésének és a felhasználó kijelentkezésének időpontja.</span><span class="sxs-lookup"><span data-stu-id="3400c-271">When a user ends a session and signs out.</span></span>

<span data-ttu-id="3400c-272">A monitorozás segítséget nyújthat a rendszert érő támadások észlelésében.</span><span class="sxs-lookup"><span data-stu-id="3400c-272">Monitoring might be able to help detect attacks on the system.</span></span> <span data-ttu-id="3400c-273">Ha például magas a sikertelen bejelentkezési kísérletek száma, az találgatásos támadásra utalhat.</span><span class="sxs-lookup"><span data-stu-id="3400c-273">For example, a large number of failed sign-in attempts might indicate a brute-force attack.</span></span> <span data-ttu-id="3400c-274">A kérések számának váratlan megugrása elosztott szolgáltatásmegtagadásos (DDoS-) támadás eredménye lehet.</span><span class="sxs-lookup"><span data-stu-id="3400c-274">An unexpected surge in requests might be the result of a distributed denial-of-service (DDoS) attack.</span></span> <span data-ttu-id="3400c-275">Fel kell készülnie arra, hogy az erőforrások mindegyikére irányuló összes kérést monitorozza azok forrásától függetlenül.</span><span class="sxs-lookup"><span data-stu-id="3400c-275">You must be prepared to monitor all requests to all resources regardless of the source of these requests.</span></span> <span data-ttu-id="3400c-276">A bejelentkezéshez kapcsolódó biztonsági réssel rendelkező rendszerek véletlenül elérhetővé tehetik az erőforrásokat a külvilág számára anélkül, hogy a felhasználónak ténylegesen be kellene jelentkeznie.</span><span class="sxs-lookup"><span data-stu-id="3400c-276">A system that has a sign-in vulnerability might accidentally expose resources to the outside world without requiring a user to actually sign in.</span></span>

### <a name="requirements-for-security-monitoring"></a><span data-ttu-id="3400c-277">A biztonság monitorozására vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-277">Requirements for security monitoring</span></span>

<span data-ttu-id="3400c-278">A biztonság monitorozásának legfontosabb szempontjait figyelembe véve, az operátornak képesnek kell lennie gyorsan:</span><span class="sxs-lookup"><span data-stu-id="3400c-278">The most critical aspects of security monitoring should enable an operator to quickly:</span></span>

- <span data-ttu-id="3400c-279">észlelni a nem hitelesített entitások általi behatolási kísérleteket;</span><span class="sxs-lookup"><span data-stu-id="3400c-279">Detect attempted intrusions by an unauthenticated entity.</span></span>
- <span data-ttu-id="3400c-280">azonosítani az entitások kísérleteit olyan adatokra irányuló műveletek végrehajtására, amelyekhez az entitások nem rendelkeznek hozzáféréssel;</span><span class="sxs-lookup"><span data-stu-id="3400c-280">Identify attempts by entities to perform operations on data for which they have not been granted access.</span></span>
- <span data-ttu-id="3400c-281">megállapítani, ha a rendszer vagy annak egy része külső vagy belső támadás alatt áll.</span><span class="sxs-lookup"><span data-stu-id="3400c-281">Determine whether the system, or some part of the system, is under attack from outside or inside.</span></span> <span data-ttu-id="3400c-282">(Például egy rosszindulatú hitelesített felhasználó megpróbálja leállítani a rendszert.)</span><span class="sxs-lookup"><span data-stu-id="3400c-282">(For example, a malicious authenticated user might be attempting to bring the system down.)</span></span>

<span data-ttu-id="3400c-283">Ezeknek a követelményeknek a kiszolgálása érdekében az operátort értesíteni kell:</span><span class="sxs-lookup"><span data-stu-id="3400c-283">To support these requirements, an operator should be notified:</span></span>

- <span data-ttu-id="3400c-284">Ha egy fiók sorozatos sikertelen bejelentkezési kísérleteket tesz egy meghatározott időszakon belül.</span><span class="sxs-lookup"><span data-stu-id="3400c-284">If one account makes repeated failed sign-in attempts within a specified period.</span></span>
- <span data-ttu-id="3400c-285">Ha egy hitelesített fiók sorozatosan tiltott erőforrásokhoz próbál hozzáférni egy meghatározott időszakon belül.</span><span class="sxs-lookup"><span data-stu-id="3400c-285">If one authenticated account repeatedly tries to access a prohibited resource during a specified period.</span></span>
- <span data-ttu-id="3400c-286">Ha nagy számú nem hitelesített vagy jogosulatlan kérés érkezik egy meghatározott időszakon belül.</span><span class="sxs-lookup"><span data-stu-id="3400c-286">If a large number of unauthenticated or unauthorized requests occur during a specified period.</span></span>

<span data-ttu-id="3400c-287">Az operátor rendelkezésére bocsátott információknak tartalmaznia kell az egyes kérések forrásának gazdagépcímét.</span><span class="sxs-lookup"><span data-stu-id="3400c-287">The information that's provided to an operator should include the host address of the source for each request.</span></span> <span data-ttu-id="3400c-288">Ha egy adott címtartománnyal kapcsolatban rendszeresen merülnek fel biztonsági megsértések, ezeket a gazdagépeket érdemes lehet blokkolni.</span><span class="sxs-lookup"><span data-stu-id="3400c-288">If security violations regularly arise from a particular range of addresses, these hosts might be blocked.</span></span>

<span data-ttu-id="3400c-289">A rendszer biztonságának fenntartásában kulcsszerepet játszik a szokásos mintáktól eltérő műveletek gyors észlelése.</span><span class="sxs-lookup"><span data-stu-id="3400c-289">A key part in maintaining the security of a system is being able to quickly detect actions that deviate from the usual pattern.</span></span> <span data-ttu-id="3400c-290">A sikertelen és/vagy sikeres bejelentkezési kérések számára vonatkozó információk vizuális megjelenítésével például könnyebben észlelhető, ha szokatlan időpontban hajtanak végre nagy számú tevékenységet.</span><span class="sxs-lookup"><span data-stu-id="3400c-290">Information such as the number of failed and/or successful sign-in requests can be displayed visually to help detect whether there is a spike in activity at an unusual time.</span></span> <span data-ttu-id="3400c-291">(Például a felhasználók hajnali 3:00 órakor bejelentkeznek, és nagy számú műveletet hajtanak végre, holott a munkaidejük csak reggel 9:00 órakor kezdődik.)</span><span class="sxs-lookup"><span data-stu-id="3400c-291">(An example of this activity is users signing in at 3:00 AM and performing a large number of operations when their working day starts at 9:00 AM).</span></span> <span data-ttu-id="3400c-292">Ezen információkkal egyszerűbben konfigurálható az időalapú automatikus skálázás is.</span><span class="sxs-lookup"><span data-stu-id="3400c-292">This information can also be used to help configure time-based autoscaling.</span></span> <span data-ttu-id="3400c-293">Ha például az operátor észreveszi, hogy sok felhasználó jelentkezik be rendszeresen egy adott napszakban, további hitelesítési szolgáltatásokat indíthat el a megnövekedett munkamennyiség kezelésére, majd leállíthatja a szolgáltatások a csúcsidőszak végét követően.</span><span class="sxs-lookup"><span data-stu-id="3400c-293">For example, if an operator observes that a large number of users regularly sign in at a particular time of day, the operator can arrange to start additional authentication services to handle the volume of work, and then shut down these additional services when the peak has passed.</span></span>

### <a name="data-sources-instrumentation-and-data-collection-requirements"></a><span data-ttu-id="3400c-294">Adatforrások, rendszerállapot-adatok és adatgyűjtési követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-294">Data sources, instrumentation, and data-collection requirements</span></span>

<span data-ttu-id="3400c-295">A legtöbb elosztott rendszer esetében a biztonság mindenre kiterjedő szempont.</span><span class="sxs-lookup"><span data-stu-id="3400c-295">Security is an all-encompassing aspect of most distributed systems.</span></span> <span data-ttu-id="3400c-296">A kapcsolódó adatok létrehozása valószínűleg a rendszer több pontján történik.</span><span class="sxs-lookup"><span data-stu-id="3400c-296">The pertinent data is likely to be generated at multiple points throughout a system.</span></span> <span data-ttu-id="3400c-297">Érdemes lehet bevezetni egy biztonságiadat- és eseménykezelési (Security Information and Event Management, SIEM) megközelítést az alkalmazás, a hálózati berendezések, a kiszolgálók, a tűzfalak, a víruskereső szoftverek és az egyéb behatolásmegelőzési elemek által létrehozott eseményekből eredő, biztonsággal kapcsolatos adatok gyűjtésére.</span><span class="sxs-lookup"><span data-stu-id="3400c-297">You should consider adopting a Security Information and Event Management (SIEM) approach to gather the security-related information that results from events raised by the application, network equipment, servers, firewalls, antivirus software, and other intrusion-prevention elements.</span></span>

<span data-ttu-id="3400c-298">A biztonság monitorozása az alkalmazás részét nem képező eszközökről származó adatokra is kiterjedhet.</span><span class="sxs-lookup"><span data-stu-id="3400c-298">Security monitoring can incorporate data from tools that are not part of your application.</span></span> <span data-ttu-id="3400c-299">Ezek az eszközök lehetnek a külső ügynökségek portkeresési tevékenységeit azonosító segédprogramok, vagy az alkalmazásra és az adatokra irányuló, nem hitelesített hozzáférésre tett kísérleteket észlelő hálózati szűrők.</span><span class="sxs-lookup"><span data-stu-id="3400c-299">These tools can include utilities that identify port-scanning activities by external agencies, or network filters that detect attempts to gain unauthenticated access to your application and data.</span></span>

<span data-ttu-id="3400c-300">Bármiről is legyen szó, az összegyűjtött adatok segítségével a rendszergazda meghatározhatja a támadás természetét, és megteheti a megfelelő ellenintézkedéseket.</span><span class="sxs-lookup"><span data-stu-id="3400c-300">In all cases, the gathered data must enable an administrator to determine the nature of any attack and take the appropriate countermeasures.</span></span>

### <a name="analyzing-security-data"></a><span data-ttu-id="3400c-301">Biztonsággal kapcsolatos adatok elemzése</span><span class="sxs-lookup"><span data-stu-id="3400c-301">Analyzing security data</span></span>

<span data-ttu-id="3400c-302">A biztonság monitorozásának egyik jellemzője, hogy az adatok rengeteg különböző forrásból származhatnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-302">A feature of security monitoring is the variety of sources from which the data arises.</span></span> <span data-ttu-id="3400c-303">A különböző formátumok és részletességi szintek miatt gyakran szükség van a rögzített adatok összetett elemzésére és egy összefüggő információszállá való összefűzésükre.</span><span class="sxs-lookup"><span data-stu-id="3400c-303">The different formats and level of detail often require complex analysis of the captured data to tie it together into a coherent thread of information.</span></span> <span data-ttu-id="3400c-304">A legegyszerűbb esetektől (például a nagyszámú sikertelen bejelentkezéstől, vagy a kritikus erőforrásokhoz való sorozatos, jogosulatlan hozzáférésre tett kísérletek észlelésétől) eltekintve előfordulhat, hogy a biztonsággal kapcsolatos adatok bonyolult automatikus feldolgozása nem lehetséges.</span><span class="sxs-lookup"><span data-stu-id="3400c-304">Apart from the simplest of cases (such as detecting a large number of failed sign-ins, or repeated attempts to gain unauthorized access to critical resources), it might not be possible to perform any complex automated processing of security data.</span></span> <span data-ttu-id="3400c-305">Ezeket az adatokat inkább időbélyeggel ellátva, de egyébként eredeti formájukban egy biztonságos adattárba érdemes írni a manuális szakértői elemzés lehetővé tétele érdekében.</span><span class="sxs-lookup"><span data-stu-id="3400c-305">Instead, it might be preferable to write this data, time-stamped but otherwise in its original form, to a secure repository to allow for expert manual analysis.</span></span>

## <a name="sla-monitoring"></a><span data-ttu-id="3400c-306">Az SLA monitorozása</span><span class="sxs-lookup"><span data-stu-id="3400c-306">SLA monitoring</span></span>

<span data-ttu-id="3400c-307">A fizető ügyfeleket kiszolgáló számos kereskedelmi rendszer SLA-k formájában szavatolja a rendszer teljesítményét.</span><span class="sxs-lookup"><span data-stu-id="3400c-307">Many commercial systems that support paying customers make guarantees about the performance of the system in the form of SLAs.</span></span> <span data-ttu-id="3400c-308">Az SLA-k lényegében azt jelentik ki, hogy a rendszer képes egy meghatározott munkamennyiséget kezelni egy egyeztetett időkereten belül, a kritikus adatok elvesztése nélkül.</span><span class="sxs-lookup"><span data-stu-id="3400c-308">Essentially, SLAs state that the system can handle a defined volume of work within an agreed time frame and without losing critical information.</span></span> <span data-ttu-id="3400c-309">Az SLA monitorozása annak biztosítására irányul, hogy a rendszer megfelel a mérhető SLA-knak.</span><span class="sxs-lookup"><span data-stu-id="3400c-309">SLA monitoring is concerned with ensuring that the system can meet measurable SLAs.</span></span>

> [!NOTE]
> <span data-ttu-id="3400c-310">Az SLA monitorozása szorosan kapcsolódik a teljesítmény monitorozásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-310">SLA monitoring is closely related to performance monitoring.</span></span> <span data-ttu-id="3400c-311">Amíg azonban a teljesítmény monitorozásának célja a rendszer *optimális* működésének biztosítása, az SLA monitorozását egy szerződéses kötelezettség szabályozza, amely meghatározza, hogy az *optimális* ténylegesen mit is jelent.</span><span class="sxs-lookup"><span data-stu-id="3400c-311">But whereas performance monitoring is concerned with ensuring that the system functions *optimally*, SLA monitoring is governed by a contractual obligation that defines what *optimally* actually means.</span></span>

<span data-ttu-id="3400c-312">Az SLA-kat általában az alábbiak vonatkozásában határozzák meg:</span><span class="sxs-lookup"><span data-stu-id="3400c-312">SLAs are often defined in terms of:</span></span>

- <span data-ttu-id="3400c-313">A rendszer általános rendelkezésre állása.</span><span class="sxs-lookup"><span data-stu-id="3400c-313">Overall system availability.</span></span> <span data-ttu-id="3400c-314">Előfordulhat például, hogy egy szolgáltató a rendszer 99,9%-os rendelkezésre állását szavatolja.</span><span class="sxs-lookup"><span data-stu-id="3400c-314">For example, an organization might guarantee that the system will be available for 99.9 percent of the time.</span></span> <span data-ttu-id="3400c-315">Ez azt jelenti, hogy a rendszer évente legfeljebb 9 órát állhat, azaz hetente körülbelül 10 percet.</span><span class="sxs-lookup"><span data-stu-id="3400c-315">This equates to no more than 9 hours of downtime per year, or approximately 10 minutes a week.</span></span>
- <span data-ttu-id="3400c-316">Működési teljesítmény.</span><span class="sxs-lookup"><span data-stu-id="3400c-316">Operational throughput.</span></span> <span data-ttu-id="3400c-317">Ezt általában egy vagy több felső határértékkel fejezik ki, például annak szavatolásával, hogy a rendszer képes akár 100 000 egyidejű felhasználói kérés támogatására, vagy 10 000 egyidejű üzleti tranzakció kezelésére.</span><span class="sxs-lookup"><span data-stu-id="3400c-317">This aspect is often expressed as one or more high-water marks, such as guaranteeing that the system can support up to 100,000 concurrent user requests or handle 10,000 concurrent business transactions.</span></span>
- <span data-ttu-id="3400c-318">Működési válaszidő.</span><span class="sxs-lookup"><span data-stu-id="3400c-318">Operational response time.</span></span> <span data-ttu-id="3400c-319">A rendszer a kérések feldolgozásának sebességére is vállalhat kötelezettséget.</span><span class="sxs-lookup"><span data-stu-id="3400c-319">The system might also make guarantees for the rate at which requests are processed.</span></span> <span data-ttu-id="3400c-320">Például: az üzleti tranzakciók 99 százalékát a rendszer 2 másodpercen belül feldolgozza, és egyetlen tranzakció feldolgozása sem tart 10 másodpercnél hosszabb ideig.</span><span class="sxs-lookup"><span data-stu-id="3400c-320">An example is that 99 percent of all business transactions will finish within 2 seconds, and no single transaction will take longer than 10 seconds.</span></span>

> [!NOTE]
> <span data-ttu-id="3400c-321">Egyes kereskedelmi rendszerek szerződései az ügyfélszolgálatra vonatkozó SLA-kat is tartalmazhatnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-321">Some contracts for commercial systems might also include SLAs for customer support.</span></span> <span data-ttu-id="3400c-322">Például: minden ügyfélszolgálati kérésre 5 percen belül érkezik válasz, és az ügyfélszolgálat a hibák 99%-át 1 munkanapon belül teljes mértékben elhárítja.</span><span class="sxs-lookup"><span data-stu-id="3400c-322">An example is that all help-desk requests will elicit a response within 5 minutes, and that 99 percent of all problems will be fully addressed within 1 working day.</span></span> <span data-ttu-id="3400c-323">A hatékony [problémakövetés](#issue-tracking) (a jelen szakasz egy későbbi része ismerteti) kritikus fontosságú az ezekhez hasonló SLA-k eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="3400c-323">Effective [issue tracking](#issue-tracking) (described later in this section) is key to meeting SLAs such as these.</span></span>

### <a name="requirements-for-sla-monitoring"></a><span data-ttu-id="3400c-324">Az SLA monitorozására vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-324">Requirements for SLA monitoring</span></span>

<span data-ttu-id="3400c-325">A legfelső szinten az operátornak egy pillantásra meg kell tudnia állapítani, hogy a rendszer teljesíti-e a megállapodásba foglalt SLA-kat vagy sem.</span><span class="sxs-lookup"><span data-stu-id="3400c-325">At the highest level, an operator should be able to determine at a glance whether the system is meeting the agreed SLAs or not.</span></span> <span data-ttu-id="3400c-326">Ha nem, az operátornak képesnek kell lennie részletes elemzést végezni, és megvizsgálni a mögöttes tényezőket a teljesítménycsökkenés okainak meghatározásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-326">And if not, the operator should be able to drill down and examine the underlying factors to determine the reasons for substandard performance.</span></span>

<span data-ttu-id="3400c-327">A vizuálisan ábrázolható, jellemző magas szintű mutatók az alábbiak lehetnek:</span><span class="sxs-lookup"><span data-stu-id="3400c-327">Typical high-level indicators that can be depicted visually include:</span></span>

- <span data-ttu-id="3400c-328">A hasznos üzemidő százalékos aránya.</span><span class="sxs-lookup"><span data-stu-id="3400c-328">The percentage of service uptime.</span></span>
- <span data-ttu-id="3400c-329">Az alkalmazás átviteli sebessége (a másodpercenkénti sikeres tranzakciók és/vagy műveletek mennyiségében kifejezve).</span><span class="sxs-lookup"><span data-stu-id="3400c-329">The application throughput (measured in terms of successful transactions and/or operations per second).</span></span>
- <span data-ttu-id="3400c-330">A sikeres/sikertelen alkalmazáskérések száma.</span><span class="sxs-lookup"><span data-stu-id="3400c-330">The number of successful/failing application requests.</span></span>
- <span data-ttu-id="3400c-331">Az alkalmazás- és rendszerhibák, kivételek és figyelmeztetések száma.</span><span class="sxs-lookup"><span data-stu-id="3400c-331">The number of application and system faults, exceptions, and warnings.</span></span>

<span data-ttu-id="3400c-332">A mutatók mindegyikének szűrhetőnek kell lennie adott időszak alapján.</span><span class="sxs-lookup"><span data-stu-id="3400c-332">All of these indicators should be capable of being filtered by a specified period of time.</span></span>

<span data-ttu-id="3400c-333">A felhőalkalmazások vélhetően több alrendszerből és összetevőből állnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-333">A cloud application will likely comprise a number of subsystems and components.</span></span> <span data-ttu-id="3400c-334">Az operátornak az egyes felső szintű mutatókat kiválasztva meg kell tudnia tekinteni, hogy a mutató hogyan tevődik össze a mögöttes elemek állapota alapján.</span><span class="sxs-lookup"><span data-stu-id="3400c-334">An operator should be able to select a high-level indicator and see how it's composed from the health of the underlying elements.</span></span> <span data-ttu-id="3400c-335">Ha például a teljes rendszer üzemideje egy elfogadható érték alá csökken, az operátornak képesnek kell lennie a nagyításra, és annak megállapítására, hogy mely elemek járultak hozzá a hibához.</span><span class="sxs-lookup"><span data-stu-id="3400c-335">For example, if the uptime of the overall system falls below an acceptable value, an operator should be able to zoom in and determine which elements are contributing to this failure.</span></span>

> [!NOTE]
> <span data-ttu-id="3400c-336">A rendszer üzemidejét gondosan kell meghatározni.</span><span class="sxs-lookup"><span data-stu-id="3400c-336">System uptime needs to be defined carefully.</span></span> <span data-ttu-id="3400c-337">A maximális rendelkezésre állást redundancia használatával biztosító rendszerekben az elemek egyes példányai meghibásodhatnak ugyan, a rendszer azonban továbbra is működőképes marad.</span><span class="sxs-lookup"><span data-stu-id="3400c-337">In a system that uses redundancy to ensure maximum availability, individual instances of elements might fail, but the system can remain functional.</span></span> <span data-ttu-id="3400c-338">A rendszer az állapotmonitorozás által kimutatott üzemidejének az egyes elemek összesített üzemidejét kell mutatnia, és nem feltétlenül azt, hogy a rendszer ténylegesen leállt-e.</span><span class="sxs-lookup"><span data-stu-id="3400c-338">System uptime as presented by health monitoring should indicate the aggregate uptime of each element and not necessarily whether the system has actually halted.</span></span> <span data-ttu-id="3400c-339">Emellett a hibák elkülöníthetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-339">Additionally, failures might be isolated.</span></span> <span data-ttu-id="3400c-340">Így ha egy adott alrendszer nem is áll rendelkezésre, a rendszer többi része továbbra is rendelkezésre állhat, jóllehet kevesebb funkciót biztosítva.</span><span class="sxs-lookup"><span data-stu-id="3400c-340">So even if a specific system is unavailable, the remainder of the system might remain available, although with decreased functionality.</span></span> <span data-ttu-id="3400c-341">(Egy e-kereskedelmi rendszerben például az egyik alrendszer hibája miatt a vevő esetleg nem küldhet megrendelést, azonban a termékkatalógust továbbra is böngészheti.)</span><span class="sxs-lookup"><span data-stu-id="3400c-341">(In an e-commerce system, a failure in the system might prevent a customer from placing orders, but the customer might still be able to browse the product catalog.)</span></span>

<span data-ttu-id="3400c-342">Riasztási célokból a rendszernek képesnek kell lennie eseményt létrehozni, ha a felső szintű mutatók bármelyike meghalad egy adott küszöbértéket.</span><span class="sxs-lookup"><span data-stu-id="3400c-342">For alerting purposes, the system should be able to raise an event if any of the high-level indicators exceed a specified threshold.</span></span> <span data-ttu-id="3400c-343">A felső szintű mutatókat alkotó különféle összetevők alacsonyabb szintű adatainak környezetfüggő adatként elérhetőnek kell lenniük a riasztást létrehozó rendszer számára.</span><span class="sxs-lookup"><span data-stu-id="3400c-343">The lower-level details of the various factors that compose the high-level indicator should be available as contextual data to the alerting system.</span></span>

### <a name="data-sources-instrumentation-and-data-collection-requirements"></a><span data-ttu-id="3400c-344">Adatforrások, rendszerállapot-adatok és adatgyűjtési követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-344">Data sources, instrumentation, and data-collection requirements</span></span>

<span data-ttu-id="3400c-345">Az SLA monitorozásának támogatásához szükséges nyers adatok hasonlóak a teljesítmény, és bizonyos szempontokból az állapot és a rendelkezésre állás monitorozásának nyers adataihoz.</span><span class="sxs-lookup"><span data-stu-id="3400c-345">The raw data that's required to support SLA monitoring is similar to the raw data that's required for performance monitoring, together with some aspects of health and availability monitoring.</span></span> <span data-ttu-id="3400c-346">(További részletekért tekintse meg a vonatkozó szakaszokat.) Az adatok az alábbiak végrehajtásával rögzíthetők:</span><span class="sxs-lookup"><span data-stu-id="3400c-346">(See those sections for more details.) You can capture this data by:</span></span>

- <span data-ttu-id="3400c-347">A végpontok monitorozása.</span><span class="sxs-lookup"><span data-stu-id="3400c-347">Performing endpoint monitoring.</span></span>
- <span data-ttu-id="3400c-348">Kivételek, hibák és figyelmeztetések naplózása.</span><span class="sxs-lookup"><span data-stu-id="3400c-348">Logging exceptions, faults, and warnings.</span></span>
- <span data-ttu-id="3400c-349">A felhasználói kérések végrehajtásának nyomon követése.</span><span class="sxs-lookup"><span data-stu-id="3400c-349">Tracing the execution of user requests.</span></span>
- <span data-ttu-id="3400c-350">A rendszer által használt külső szolgáltatások rendelkezésre állásának monitorozása.</span><span class="sxs-lookup"><span data-stu-id="3400c-350">Monitoring the availability of any third-party services that the system uses.</span></span>
- <span data-ttu-id="3400c-351">Teljesítmény-mérőszámok és -számlálók használata.</span><span class="sxs-lookup"><span data-stu-id="3400c-351">Using performance metrics and counters.</span></span>

<span data-ttu-id="3400c-352">Minden adatot időponthoz kell kötni, és időbélyeggel kell ellátni.</span><span class="sxs-lookup"><span data-stu-id="3400c-352">All data must be timed and time-stamped.</span></span>

### <a name="analyzing-sla-data"></a><span data-ttu-id="3400c-353">Az SLA-adatok elemzése</span><span class="sxs-lookup"><span data-stu-id="3400c-353">Analyzing SLA data</span></span>

<span data-ttu-id="3400c-354">A rendszerállapot-adatokat összesíteni kell a rendszer átfogó teljesítményének megjelenítéséhez.</span><span class="sxs-lookup"><span data-stu-id="3400c-354">The instrumentation data must be aggregated to generate a picture of the overall performance of the system.</span></span> <span data-ttu-id="3400c-355">Az összesített adatoknak a részletes elemzést is lehetővé kell tenniük a mögöttes alrendszerek teljesítményének vizsgálatához.</span><span class="sxs-lookup"><span data-stu-id="3400c-355">Aggregated data must also support drill-down to enable examination of the performance of the underlying subsystems.</span></span> <span data-ttu-id="3400c-356">Például az alábbiakra kell képesnek lennie:</span><span class="sxs-lookup"><span data-stu-id="3400c-356">For example, you should be able to:</span></span>

- <span data-ttu-id="3400c-357">Az adott időszakban kezdeményezett felhasználói kérések teljes számának megállapítása, valamint a sikeres és sikertelen kérések arányának meghatározása.</span><span class="sxs-lookup"><span data-stu-id="3400c-357">Calculate the total number of user requests during a specified period and determine the success and failure rate of these requests.</span></span>
- <span data-ttu-id="3400c-358">Átfogó kép kialakítása a rendszer válaszidejéről a felhasználói kérések válaszidejének összesítésével.</span><span class="sxs-lookup"><span data-stu-id="3400c-358">Combine the response times of user requests to generate an overall view of system response times.</span></span>
- <span data-ttu-id="3400c-359">A felhasználói kérések állapotnak elemzése a kérések átfogó válaszidejének a kérést alkotó egyes munkaelemek válaszidejére való lebontásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-359">Analyze the progress of user requests to break down the overall response time of a request into the response times of the individual work items in that request.</span></span>
- <span data-ttu-id="3400c-360">A rendszer átfogó rendelkezésre állásának meghatározása az üzemidőt százalékos arányként kifejezve egy adott időszakra vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="3400c-360">Determine the overall availability of the system as a percentage of uptime for any specific period.</span></span>
- <span data-ttu-id="3400c-361">A rendszer egyes összetevőinek és szolgáltatásainak az idő százalékában kifejezett rendelkezésre állásának elemzése.</span><span class="sxs-lookup"><span data-stu-id="3400c-361">Analyze the percentage time availability of the individual components and services in the system.</span></span> <span data-ttu-id="3400c-362">Ehhez esetleg szükség lehet a külső szolgáltatások által létrehozott naplók elemzésére.</span><span class="sxs-lookup"><span data-stu-id="3400c-362">This might involve parsing logs that third-party services have generated.</span></span>

<span data-ttu-id="3400c-363">Számos kereskedelmi rendszernek jelentenie kell a tényleges teljesítményadatokat a megállapodásban foglalt SLA-k alapján egy adott időtartamra, általában egy hónapra vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="3400c-363">Many commercial systems are required to report real performance figures against agreed SLAs for a specified period, typically a month.</span></span> <span data-ttu-id="3400c-364">Az információk segítségével számítható ki az ügyfeleket illető jóváírás vagy egyéb visszatérítés, ha az SLA-k nem teljesültek az adott időszakban.</span><span class="sxs-lookup"><span data-stu-id="3400c-364">This information can be used to calculate credits or other forms of repayments for customers if the SLAs are not met during that period.</span></span> <span data-ttu-id="3400c-365">Az egyes szolgáltatások rendelkezésre állását [A rendelkezésreállási adatok elemzése](#analyzing-availability-data) című szakaszban bemutatott módszerrel számíthatja ki.</span><span class="sxs-lookup"><span data-stu-id="3400c-365">You can calculate availability for a service by using the technique described in the section [Analyzing availability data](#analyzing-availability-data).</span></span>

<span data-ttu-id="3400c-366">A vállalatok a szolgáltatások meghibásodását okozó incidensek számát és természetét is követhetik belső használatra.</span><span class="sxs-lookup"><span data-stu-id="3400c-366">For internal purposes, an organization might also track the number and nature of incidents that caused services to fail.</span></span> <span data-ttu-id="3400c-367">A problémák gyors megoldásának vagy teljes kiküszöbölésének elsajátításával csökkenthető az állásidő, és teljesíthetők az SLA-k.</span><span class="sxs-lookup"><span data-stu-id="3400c-367">Learning how to resolve these issues quickly, or eliminate them completely, will help to reduce downtime and meet SLAs.</span></span>

## <a name="auditing"></a><span data-ttu-id="3400c-368">Naplózás</span><span class="sxs-lookup"><span data-stu-id="3400c-368">Auditing</span></span>

<span data-ttu-id="3400c-369">Az alkalmazás jellegétől függően a törvényi vagy egyéb jogi rendelkezések megszabhatnak a felhasználói műveletek naplózására és az összes adatelérés rögzítésére vonatkozó követelményeket.</span><span class="sxs-lookup"><span data-stu-id="3400c-369">Depending on the nature of the application, there might be statutory or other legal regulations that specify requirements for auditing users' operations and recording all data access.</span></span> <span data-ttu-id="3400c-370">A naplózás az ügyfeleket az egyes kérésekhez kötő bizonyítékot biztosíthat.</span><span class="sxs-lookup"><span data-stu-id="3400c-370">Auditing can provide evidence that links customers to specific requests.</span></span> <span data-ttu-id="3400c-371">A letagadhatatlanság fontos tényező számos elektronikus üzleti rendszerben az ügyfél és az alkalmazásért vagy szolgáltatásért felelős vállalat közötti bizalom fenntartásában.</span><span class="sxs-lookup"><span data-stu-id="3400c-371">Non-repudiation is an important factor in many e-business systems to help maintain trust be between a customer and the organization that's responsible for the application or service.</span></span>

### <a name="requirements-for-auditing"></a><span data-ttu-id="3400c-372">A naplózásra vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-372">Requirements for auditing</span></span>

<span data-ttu-id="3400c-373">Az elemzőknek nyomon kell tudniuk követni a felhasználók által végrehajtott üzleti műveletek sorát, hogy rekonstruálhassák a felhasználók műveleteit.</span><span class="sxs-lookup"><span data-stu-id="3400c-373">An analyst must be able to trace the sequence of business operations that users are performing so that you can reconstruct users' actions.</span></span> <span data-ttu-id="3400c-374">Előfordulhat, hogy erre egyszerűen a nyilvántartás miatt van szükség, vagy pedig egy törvényszéki vizsgálat részeként.</span><span class="sxs-lookup"><span data-stu-id="3400c-374">This might be necessary simply as a matter of record, or as part of a forensic investigation.</span></span>

<span data-ttu-id="3400c-375">A naplóadatok rendkívül bizalmasak.</span><span class="sxs-lookup"><span data-stu-id="3400c-375">Audit information is highly sensitive.</span></span> <span data-ttu-id="3400c-376">Valószínűleg olyan adatokat is tartalmaznak, amelyek azonosítják a rendszer felhasználóit és az általuk végrehajtott feladatokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-376">It will likely include data that identifies the users of the system, together with the tasks that they're performing.</span></span> <span data-ttu-id="3400c-377">A naplóadatok emiatt leginkább a kizárólag a megbízható elemzők számára elérhető jelentések formájában állnak rendelkezésre, nem pedig a grafikai műveletek részletes elemzését lehetővé tévő interaktív rendszerként.</span><span class="sxs-lookup"><span data-stu-id="3400c-377">For this reason, audit information will most likely take the form of reports that are available only to trusted analysts rather than as an interactive system that supports drill-down of graphical operations.</span></span> <span data-ttu-id="3400c-378">Az elemzőnek különböző jelentéseket kell tudniuk létrehozni.</span><span class="sxs-lookup"><span data-stu-id="3400c-378">An analyst should be able to generate a range of reports.</span></span> <span data-ttu-id="3400c-379">A jelentések például listázhatják az adott időszakban bekövetkezett felhasználó tevékenységeket, részletes kronológiát biztosíthatnak egy adott felhasználó tevékenységéről, vagy listázhatják az egy vagy több erőforrásra vonatkozóan végrehajtott műveletek sorát.</span><span class="sxs-lookup"><span data-stu-id="3400c-379">For example, reports might list all users' activities occurring during a specified time frame, detail the chronology of activity for a single user, or list the sequence of operations performed against one or more resources.</span></span>

### <a name="data-sources-instrumentation-and-data-collection-requirements"></a><span data-ttu-id="3400c-380">Adatforrások, rendszerállapot-adatok és adatgyűjtési követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-380">Data sources, instrumentation, and data-collection requirements</span></span>

<span data-ttu-id="3400c-381">A naplózáshoz használt információk elsődleges forrásai az alábbiak lehetnek:</span><span class="sxs-lookup"><span data-stu-id="3400c-381">The primary sources of information for auditing can include:</span></span>

- <span data-ttu-id="3400c-382">A felhasználók hitelesítését kezelő biztonsági rendszer.</span><span class="sxs-lookup"><span data-stu-id="3400c-382">The security system that manages user authentication.</span></span>
- <span data-ttu-id="3400c-383">A felhasználók tevékenységét rögzítő nyomkövetési naplók.</span><span class="sxs-lookup"><span data-stu-id="3400c-383">Trace logs that record user activity.</span></span>
- <span data-ttu-id="3400c-384">Az azonosítható és azonosíthatatlan hálózati kéréseket nyomon követő biztonsági naplók.</span><span class="sxs-lookup"><span data-stu-id="3400c-384">Security logs that track all identifiable and unidentifiable network requests.</span></span>

<span data-ttu-id="3400c-385">A naplóadatok formátumára és tárolásuk módjára szabályozási követelmények vonatkozhatnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-385">The format of the audit data and the way in which it's stored might be driven by regulatory requirements.</span></span> <span data-ttu-id="3400c-386">Előfordulhat például, hogy az adatok semmilyen módon nem törölhetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-386">For example, it might not be possible to clean the data in any way.</span></span> <span data-ttu-id="3400c-387">(Az eredeti formátumukban kell rögzíteni azokat.) Az adatokat tároló adattárt védeni kell az illetéktelen hozzáférés ellen.</span><span class="sxs-lookup"><span data-stu-id="3400c-387">(It must be recorded in its original format.) Access to the repository where it's held must be protected to prevent tampering.</span></span>

### <a name="analyzing-audit-data"></a><span data-ttu-id="3400c-388">A naplóadatok elemzése</span><span class="sxs-lookup"><span data-stu-id="3400c-388">Analyzing audit data</span></span>

<span data-ttu-id="3400c-389">Az elemzőknek el kell tudniuk érni a nyers adatok egészét, azok eredeti formájában.</span><span class="sxs-lookup"><span data-stu-id="3400c-389">An analyst must be able to access the raw data in its entirety, in its original form.</span></span> <span data-ttu-id="3400c-390">Az általános naplózási jelentések készítésének igénye mellett az adatok elemzésére szolgáló eszközök valószínűleg specializáltak lesznek, és a rendszeren kívül vannak elhelyezve.</span><span class="sxs-lookup"><span data-stu-id="3400c-390">Aside from the requirement to generate common audit reports, the tools for analyzing this data are likely to be specialized and kept external to the system.</span></span>

## <a name="usage-monitoring"></a><span data-ttu-id="3400c-391">A használat monitorozása</span><span class="sxs-lookup"><span data-stu-id="3400c-391">Usage monitoring</span></span>

<span data-ttu-id="3400c-392">A használat monitorozása az alkalmazás funkcióinak és összetevőinek használatát követi nyomon.</span><span class="sxs-lookup"><span data-stu-id="3400c-392">Usage monitoring tracks how the features and components of an application are used.</span></span> <span data-ttu-id="3400c-393">Az operátor az alábbiakat teheti az összegyűjtött adatok használatával:</span><span class="sxs-lookup"><span data-stu-id="3400c-393">An operator can use the gathered data to:</span></span>

- <span data-ttu-id="3400c-394">A gyakran használt funkcióknak és a rendszer potenciálisan kritikus pontjainak az azonosítása.</span><span class="sxs-lookup"><span data-stu-id="3400c-394">Determine which features are heavily used and determine any potential hotspots in the system.</span></span> <span data-ttu-id="3400c-395">A nagy forgalmú elemek működése javítható funkcionális particionálással vagy akár replikációval a terhelés egyenletesebb elosztása érdekében.</span><span class="sxs-lookup"><span data-stu-id="3400c-395">High-traffic elements might benefit from functional partitioning or even replication to spread the load more evenly.</span></span> <span data-ttu-id="3400c-396">Az operátor ezen információk használatával megállapíthatja, hogy melyek azok ritkán használt funkciók, amelyeket érdemes lehet kivezetni vagy a rendszer egy jövőbeli verziójában lecserélni.</span><span class="sxs-lookup"><span data-stu-id="3400c-396">An operator can also use this information to ascertain which features are infrequently used and are possible candidates for retirement or replacement in a future version of the system.</span></span>

- <span data-ttu-id="3400c-397">Információk beszerzése a rendszer működési eseményeivel kapcsolatban a normál használat során.</span><span class="sxs-lookup"><span data-stu-id="3400c-397">Obtain information about the operational events of the system under normal use.</span></span> <span data-ttu-id="3400c-398">Például egy e-kereskedelmi webhely a tranzakciók számával és az azokért felelős ügyfelek mennyiségével kapcsolatos statisztikai adatokat rögzíthet.</span><span class="sxs-lookup"><span data-stu-id="3400c-398">For example, in an e-commerce site, you can record the statistical information about the number of transactions and the volume of customers that are responsible for them.</span></span> <span data-ttu-id="3400c-399">Ezek az adatok a kapacitástervezéshez használhatók az ügyfelek számának növekedésével.</span><span class="sxs-lookup"><span data-stu-id="3400c-399">This information can be used for capacity planning as the number of customers grows.</span></span>

- <span data-ttu-id="3400c-400">A rendszer teljesítményével vagy funkcióival kapcsolatos felhasználói elégedettség észlelése (lehetőleg közvetetten).</span><span class="sxs-lookup"><span data-stu-id="3400c-400">Detect (possibly indirectly) user satisfaction with the performance or functionality of the system.</span></span> <span data-ttu-id="3400c-401">HA például egy e-kereskedelmi rendszer ügyfelei rendszeresen, nagy számban hagyják félbe a vásárlást, annak oka a fizetési funkcióval kapcsolatos probléma lehet.</span><span class="sxs-lookup"><span data-stu-id="3400c-401">For example, if a large number of customers in an e-commerce system regularly abandon their shopping carts, this might be due to a problem with the checkout functionality.</span></span>

- <span data-ttu-id="3400c-402">Számlázási információk létrehozása.</span><span class="sxs-lookup"><span data-stu-id="3400c-402">Generate billing information.</span></span> <span data-ttu-id="3400c-403">A kereskedelmi alkalmazások és a több-bérlős szolgáltatások díjakat számíthatnak fel az ügyfeleknek az általuk használt erőforrásokért.</span><span class="sxs-lookup"><span data-stu-id="3400c-403">A commercial application or multitenant service might charge customers for the resources that they use.</span></span>

- <span data-ttu-id="3400c-404">Kvóták érvényesítése.</span><span class="sxs-lookup"><span data-stu-id="3400c-404">Enforce quotas.</span></span> <span data-ttu-id="3400c-405">Ha egy több-bérlős rendszer valamelyik felhasználója meghaladja a feldolgozási időre vagy erőforrás-használatra vonatkozó, kifizetett kvótát egy adott időszak során, a hozzáférése korlátozható vagy a feldolgozási teljesítmény szabályozható.</span><span class="sxs-lookup"><span data-stu-id="3400c-405">If a user in a multitenant system exceeds their paid quota of processing time or resource usage during a specified period, their access can be limited or processing can be throttled.</span></span>

### <a name="requirements-for-usage-monitoring"></a><span data-ttu-id="3400c-406">A használat monitorozására vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-406">Requirements for usage monitoring</span></span>

<span data-ttu-id="3400c-407">A rendszerhasználat vizsgálatához az operátornak általában az alábbiakat magukban foglaló információkat kell látnia:</span><span class="sxs-lookup"><span data-stu-id="3400c-407">To examine system usage, an operator typically needs to see information that includes:</span></span>

- <span data-ttu-id="3400c-408">Az egyes alrendszerek által feldolgozott és az egyes erőforrásokhoz továbbított kérések száma.</span><span class="sxs-lookup"><span data-stu-id="3400c-408">The number of requests that are processed by each subsystem and directed to each resource.</span></span>
- <span data-ttu-id="3400c-409">Az egyes felhasználók által végzett munka.</span><span class="sxs-lookup"><span data-stu-id="3400c-409">The work that each user is performing.</span></span>
- <span data-ttu-id="3400c-410">Az egyes felhasználók által foglalt adattárterület.</span><span class="sxs-lookup"><span data-stu-id="3400c-410">The volume of data storage that each user occupies.</span></span>
- <span data-ttu-id="3400c-411">Az egyes felhasználók által elért erőforrások.</span><span class="sxs-lookup"><span data-stu-id="3400c-411">The resources that each user is accessing.</span></span>

<span data-ttu-id="3400c-412">Az operátornak diagramokat is létre kell tudnia hozni.</span><span class="sxs-lookup"><span data-stu-id="3400c-412">An operator should also be able to generate graphs.</span></span> <span data-ttu-id="3400c-413">A grafikonokon például megjeleníthetők a leginkább erőforrás-igényes felhasználók, vagy a leggyakrabban elért erőforrások vagy rendszerfunkciók.</span><span class="sxs-lookup"><span data-stu-id="3400c-413">For example, a graph might display the most resource-hungry users, or the most frequently accessed resources or system features.</span></span>

### <a name="data-sources-instrumentation-and-data-collection-requirements"></a><span data-ttu-id="3400c-414">Adatforrások, rendszerállapot-adatok és adatgyűjtési követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-414">Data sources, instrumentation, and data-collection requirements</span></span>

<span data-ttu-id="3400c-415">A használat monitorozása viszonylag magas szinten végezhető.</span><span class="sxs-lookup"><span data-stu-id="3400c-415">Usage tracking can be performed at a relatively high level.</span></span> <span data-ttu-id="3400c-416">Képes feljegyezni az egyes kérések kezdési és befejezési időpontját és a kérés jellegét (olvasás, írás stb., az adott erőforrástól függően).</span><span class="sxs-lookup"><span data-stu-id="3400c-416">It can note the start and end times of each request and the nature of the request (read, write, and so on, depending on the resource in question).</span></span> <span data-ttu-id="3400c-417">Ezek az információk az alábbi módokon szerezhetők be:</span><span class="sxs-lookup"><span data-stu-id="3400c-417">You can obtain this information by:</span></span>

- <span data-ttu-id="3400c-418">Felhasználói tevékenység nyomon követése.</span><span class="sxs-lookup"><span data-stu-id="3400c-418">Tracing user activity.</span></span>
- <span data-ttu-id="3400c-419">Az egyes erőforrások használatát mérő teljesítményszámlálók rögzítése.</span><span class="sxs-lookup"><span data-stu-id="3400c-419">Capturing performance counters that measure the utilization for each resource.</span></span>
- <span data-ttu-id="3400c-420">Az egyes felhasználók erőforrás-felhasználásának monitorozása.</span><span class="sxs-lookup"><span data-stu-id="3400c-420">Monitoring the resource consumption by each user.</span></span>

<span data-ttu-id="3400c-421">Mérési okokból azt is tudnia kell azonosítani, hogy az egyes műveleteket mely felhasználók hajtják végre, és hogy ezek a műveletek mely erőforrásokat használják.</span><span class="sxs-lookup"><span data-stu-id="3400c-421">For metering purposes, you also need to be able to identify which users are responsible for performing which operations, and the resources that these operations utilize.</span></span> <span data-ttu-id="3400c-422">A gyűjtött információknak megfelelően részletezettnek kell lennie a pontos számlázáshoz.</span><span class="sxs-lookup"><span data-stu-id="3400c-422">The gathered information should be detailed enough to enable accurate billing.</span></span>

## <a name="issue-tracking"></a><span data-ttu-id="3400c-423">Problémakövetés</span><span class="sxs-lookup"><span data-stu-id="3400c-423">Issue tracking</span></span>

<span data-ttu-id="3400c-424">Az ügyfelek és egyéb felhasználók problémákat jelenthetnek, ha váratlan esemény vagy működés következik be a rendszerben.</span><span class="sxs-lookup"><span data-stu-id="3400c-424">Customers and other users might report issues if unexpected events or behavior occurs in the system.</span></span> <span data-ttu-id="3400c-425">A problémakövetés az ilyen problémák kezelésével foglalkozik, a problémákat a rendszerben rejlő alapvető hibák elhárítására irányuló törekvésekhez társítva, valamint tájékoztatja a felhasználókat a lehetséges megoldásokkal kapcsolatban.</span><span class="sxs-lookup"><span data-stu-id="3400c-425">Issue tracking is concerned with managing these issues, associating them with efforts to resolve any underlying problems in the system, and informing customers of possible resolutions.</span></span>

### <a name="requirements-for-issue-tracking"></a><span data-ttu-id="3400c-426">A problémakövetésre vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-426">Requirements for issue tracking</span></span>

<span data-ttu-id="3400c-427">Az operátorok gyakran külön rendszer használatával végzik a problémakövetést, amelyeken rögzíthetik és jelenthetik a felhasználók által jelentett problémák részleteit.</span><span class="sxs-lookup"><span data-stu-id="3400c-427">Operators often perform issue tracking by using a separate system that enables them to record and report the details of problems that users report.</span></span> <span data-ttu-id="3400c-428">Ezek a részletek a felhasználók által megkísérelt feladatokat, a problémák tüneteit, az események sorozatát, valamint a küldött hiba- és figyelmeztető üzeneteket foglalhatják például magukban.</span><span class="sxs-lookup"><span data-stu-id="3400c-428">These details can include the tasks that the user was trying to perform, symptoms of the problem, the sequence of events, and any error or warning messages that were issued.</span></span>

### <a name="data-sources-instrumentation-and-data-collection-requirements"></a><span data-ttu-id="3400c-429">Adatforrások, rendszerállapot-adatok és adatgyűjtési követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-429">Data sources, instrumentation, and data-collection requirements</span></span>

<span data-ttu-id="3400c-430">A problémakövetési adatok kezdeti forrása a felhasználó, aki a problémát először jelentette.</span><span class="sxs-lookup"><span data-stu-id="3400c-430">The initial data source for issue-tracking data is the user who reported the issue in the first place.</span></span> <span data-ttu-id="3400c-431">A felhasználó további adatokat is biztosíthat, például:</span><span class="sxs-lookup"><span data-stu-id="3400c-431">The user might be able to provide additional data such as:</span></span>

- <span data-ttu-id="3400c-432">Összeomlási memóriakép (ha az alkalmazás tartalmaz a felhasználó asztali gépén futó összetevőt).</span><span class="sxs-lookup"><span data-stu-id="3400c-432">A crash dump (if the application includes a component that runs on the user's desktop).</span></span>
- <span data-ttu-id="3400c-433">Képernyő-pillanatfelvétel.</span><span class="sxs-lookup"><span data-stu-id="3400c-433">A screen snapshot.</span></span>
- <span data-ttu-id="3400c-434">A hiba bekövetkezésének dátuma és időpontja az egyéb környezeti adatokkal, például a felhasználó tartózkodási helyével együtt.</span><span class="sxs-lookup"><span data-stu-id="3400c-434">The date and time when the error occurred, together with any other environmental information such as the user's location.</span></span>

<span data-ttu-id="3400c-435">Ezek az adatok felhasználhatók a hibakeresési tevékenység során, valamint a segítségükkel összeállítható a fejlesztendő funkciók listája a szoftver jövőbeli kiadásaihoz.</span><span class="sxs-lookup"><span data-stu-id="3400c-435">This information can be used to help the debugging effort and help construct a backlog for future releases of the software.</span></span>

### <a name="analyzing-issue-tracking-data"></a><span data-ttu-id="3400c-436">A problémakövetési adatok elemzése</span><span class="sxs-lookup"><span data-stu-id="3400c-436">Analyzing issue-tracking data</span></span>

<span data-ttu-id="3400c-437">Előfordulhat, hogy több felhasználó is jelenti ugyanazt a problémát.</span><span class="sxs-lookup"><span data-stu-id="3400c-437">Different users might report the same problem.</span></span> <span data-ttu-id="3400c-438">A problémakövetési rendszernek társítania kell az azonos jelentéseket.</span><span class="sxs-lookup"><span data-stu-id="3400c-438">The issue-tracking system should associate common reports.</span></span>

<span data-ttu-id="3400c-439">A hibakeresési tevékenység előrehaladását rögzíteni kell az egyes hibajelentésekben.</span><span class="sxs-lookup"><span data-stu-id="3400c-439">The progress of the debugging effort should be recorded against each issue report.</span></span> <span data-ttu-id="3400c-440">Ha a probléma elhárítása megtörtént, az ügyfél tájékoztatható a megoldásról.</span><span class="sxs-lookup"><span data-stu-id="3400c-440">When the problem is resolved, the customer can be informed of the solution.</span></span>

<span data-ttu-id="3400c-441">Ha a felhasználó egy olyan problémát jelent, amelynek már létezik megoldása a problémakövetési rendszerben, az operátornak tudnia kell azonnal tájékoztatni a felhasználót a megoldásról.</span><span class="sxs-lookup"><span data-stu-id="3400c-441">If a user reports an issue that has a known solution in the issue-tracking system, the operator should be able to inform the user of the solution immediately.</span></span>

## <a name="tracing-operations-and-debugging-software-releases"></a><span data-ttu-id="3400c-442">A műveletek nyomon követése, és a szoftverkiadások hibáinak elhárítása</span><span class="sxs-lookup"><span data-stu-id="3400c-442">Tracing operations and debugging software releases</span></span>

<span data-ttu-id="3400c-443">Amikor egy felhasználó problémát jelent, a felhasználó gyakran csak a saját műveleteire kifejtett közvetlen hatásnak van tudatában.</span><span class="sxs-lookup"><span data-stu-id="3400c-443">When a user reports an issue, the user is often only aware of the immediate impact that it has on their operations.</span></span> <span data-ttu-id="3400c-444">A felhasználó csak az általa tapasztalt működés eredményét tudja jelenteni a rendszer karbantartásáért felelős operátor számára.</span><span class="sxs-lookup"><span data-stu-id="3400c-444">The user can only report the results of their own experience back to an operator who is responsible for maintaining the system.</span></span> <span data-ttu-id="3400c-445">Ezek a tapasztalatok rendszerint csak a látható tünetei egy vagy több alapvető problémáknak.</span><span class="sxs-lookup"><span data-stu-id="3400c-445">These experiences are usually just a visible symptom of one or more fundamental problems.</span></span> <span data-ttu-id="3400c-446">Sok esetben egy elemzőnek alaposan át kell tekintenie a mögöttes műveletek kronológiáját a probléma kiváltó okának meghatározásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-446">In many cases, an analyst will need to dig through the chronology of the underlying operations to establish the root cause of the problem.</span></span> <span data-ttu-id="3400c-447">Ezt az eljárást *a kiváltó okok elemzésének* nevezik.</span><span class="sxs-lookup"><span data-stu-id="3400c-447">This process is called *root cause analysis*.</span></span>

> [!NOTE]
> <span data-ttu-id="3400c-448">A kiváltó okok elemzése feltárhatja az alkalmazás tervezési hiányosságait.</span><span class="sxs-lookup"><span data-stu-id="3400c-448">Root cause analysis might uncover inefficiencies in the design of an application.</span></span> <span data-ttu-id="3400c-449">Ilyen esetekben át lehet dolgozni az érintett elemeket, és egy későbbi kiadás részeként telepíteni lehet azokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-449">In these situations, it might be possible to rework the affected elements and deploy them as part of a subsequent release.</span></span> <span data-ttu-id="3400c-450">Ez a folyamat alapos tervezést igényel, és a frissített összetevőket gondosan monitorozni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-450">This process requires careful control, and the updated components should be monitored closely.</span></span>

### <a name="requirements-for-tracing-and-debugging"></a><span data-ttu-id="3400c-451">A nyomkövetésre és hibakeresésre vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-451">Requirements for tracing and debugging</span></span>

<span data-ttu-id="3400c-452">A váratlan események és egyéb problémák követéséhez létfontosságú, hogy a monitorozási adatok elegendő információt biztosítsanak az elemző számára a problémák eredetének visszakövetéséhez és a bekövetkezett események sorának rekonstruálásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-452">For tracing unexpected events and other problems, it's vital that the monitoring data provides enough information to enable an analyst to trace back to the origins of these issues and reconstruct the sequence of events that occurred.</span></span> <span data-ttu-id="3400c-453">Elegendő információnak kell rendelkezésre állnia ahhoz, hogy az elemző diagnosztizálhassa a problémák kiváltó okait.</span><span class="sxs-lookup"><span data-stu-id="3400c-453">This information must be sufficient to enable an analyst to diagnose the root cause of any problems.</span></span> <span data-ttu-id="3400c-454">A fejlesztők ezután elvégezhetik a szükséges módosításokat a problémák újbóli bekövetkezésének a megakadályozásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-454">A developer can then make the necessary modifications to prevent them from recurring.</span></span>

### <a name="data-sources-instrumentation-and-data-collection-requirements"></a><span data-ttu-id="3400c-455">Adatforrások, rendszerállapot-adatok és adatgyűjtési követelmények</span><span class="sxs-lookup"><span data-stu-id="3400c-455">Data sources, instrumentation, and data-collection requirements</span></span>

<span data-ttu-id="3400c-456">A hibaelhárításnak része lehet az egyes műveletek keretében meghívott összes metódus (és azok paramétereinek) nyomon követése, így felépíthető egy fa, amely a rendszeren végighaladó logikai folyamatot ábrázolja, amikor egy ügyfél egy adott kérést kezdeményez.</span><span class="sxs-lookup"><span data-stu-id="3400c-456">Troubleshooting can involve tracing all the methods (and their parameters) invoked as part of an operation to build up a tree that depicts the logical flow through the system when a customer makes a specific request.</span></span> <span data-ttu-id="3400c-457">A rendszer által a folyamat eredményeként létrehozott kivételeket és figyelmeztetéseket rögzíteni és naplózni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-457">Exceptions and warnings that the system generates as a result of this flow need to be captured and logged.</span></span>

<span data-ttu-id="3400c-458">A hibakeresés támogatása érdekében a rendszer hurkokat biztosíthat, amelyek segítségével az operátor rögzítheti a rendszer kritikus pontjainak állapotadatait.</span><span class="sxs-lookup"><span data-stu-id="3400c-458">To support debugging, the system can provide hooks that enable an operator to capture state information at crucial points in the system.</span></span> <span data-ttu-id="3400c-459">Másik megoldásként a rendszer biztosíthat információkat minden lépésről, miközben a kiválasztott műveletek zajlanak.</span><span class="sxs-lookup"><span data-stu-id="3400c-459">Or, the system can deliver detailed step-by-step information as selected operations progress.</span></span> <span data-ttu-id="3400c-460">Az ilyen részletességi szintű adatok rögzítése további terhelést jelenthet a rendszer számára, ezért ideiglenes folyamatnak kell lennie.</span><span class="sxs-lookup"><span data-stu-id="3400c-460">Capturing data at this level of detail can impose an additional load on the system and should be a temporary process.</span></span> <span data-ttu-id="3400c-461">Az operátorok főleg akkor alkalmazzák ezt a folyamatot, amikor rendkívül szokatlan események nehezen megismételhető sorozata következik be, vagy ha a rendszerben újonnan bevezetett egy vagy több elemet gondosan monitorozni kell annak biztosításához, hogy az elemek az elvárt módon működnek.</span><span class="sxs-lookup"><span data-stu-id="3400c-461">An operator uses this process mainly when a highly unusual series of events occurs and is difficult to replicate, or when a new release of one or more elements into a system requires careful monitoring to ensure that the elements function as expected.</span></span>

## <a name="the-monitoring-and-diagnostics-pipeline"></a><span data-ttu-id="3400c-462">A monitorozási és diagnosztikai folyamat</span><span class="sxs-lookup"><span data-stu-id="3400c-462">The monitoring and diagnostics pipeline</span></span>

<span data-ttu-id="3400c-463">A kiterjedt, elosztott rendszerek megfigyelése meglehetősen nehéz.</span><span class="sxs-lookup"><span data-stu-id="3400c-463">Monitoring a large-scale distributed system poses a significant challenge.</span></span> <span data-ttu-id="3400c-464">Az előző szakaszban leírt forgatókönyveket nem feltétlenül egymástól elkülönítve kell alkalmazni.</span><span class="sxs-lookup"><span data-stu-id="3400c-464">Each of the scenarios described in the previous section should not necessarily be considered in isolation.</span></span> <span data-ttu-id="3400c-465">Az egyes helyzetekhez szükséges monitorozási és diagnosztikai adatok vélhetően jelentős átfedésben lesznek, jóllehet előfordulhat, hogy az adatokat különböző módon kell feldolgozni és megjeleníteni.</span><span class="sxs-lookup"><span data-stu-id="3400c-465">There is likely to be a significant overlap in the monitoring and diagnostic data that's required for each situation, although this data might need to be processed and presented in different ways.</span></span> <span data-ttu-id="3400c-466">Ebből kifolyólag a monitorozást és a diagnosztikát holisztikus módon kell szemlélni.</span><span class="sxs-lookup"><span data-stu-id="3400c-466">For these reasons, you should take a holistic view of monitoring and diagnostics.</span></span>

<span data-ttu-id="3400c-467">A teljes monitorozási és diagnosztikai folyamatot egy folyamatként érdemes elképzelni, amely az 1. ábrán látható szakaszokat foglalja magában.</span><span class="sxs-lookup"><span data-stu-id="3400c-467">You can envisage the entire monitoring and diagnostics process as a pipeline that comprises the stages shown in Figure 1.</span></span>

![A monitorozási és diagnosztikai folyamat szakaszai](./images/monitoring/Pipeline.png)

<span data-ttu-id="3400c-469">*1. ábra A monitorozási és diagnosztikai folyamat szakaszai.*</span><span class="sxs-lookup"><span data-stu-id="3400c-469">*Figure 1. The stages in the monitoring and diagnostics pipeline.*</span></span>

<span data-ttu-id="3400c-470">Az 1. ábra rámutat arra, hogy a monitorozási és diagnosztikai adatok számos különféle adatforrásból származhatnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-470">Figure 1 highlights how the data for monitoring and diagnostics can come from a variety of data sources.</span></span> <span data-ttu-id="3400c-471">A rendszerállapot-megfigyelési és az adatgyűjtési szakasz feladata a rögzítendő adatok forrásainak azonosítása, a rögzítendő adatoknak, a rögzítés módjának és az adatok könnyű vizsgálhatóságot lehetővé tevő formátumának meghatározása.</span><span class="sxs-lookup"><span data-stu-id="3400c-471">The instrumentation and collection stages are concerned with identifying the sources from where the data needs to be captured, determining which data to capture, how to capture it, and how to format this data so that it can be easily examined.</span></span> <span data-ttu-id="3400c-472">Az elemzés/diagnosztika szakasz a nyers adatokat felhasználva hasznos adatokat hoz létre, amelyek segítségével az operátor meghatározhatja a rendszer állapotát.</span><span class="sxs-lookup"><span data-stu-id="3400c-472">The analysis/diagnosis stage takes the raw data and uses it to generate meaningful information that an operator can use to determine the state of the system.</span></span> <span data-ttu-id="3400c-473">Az operátor ezen információk alapján döntéseket hozhat a lehetséges intézkedésekre vonatkozóan, majd az eredményeket visszaküldheti a rendszerállapot-figyelési és az adatgyűjtési szakaszba.</span><span class="sxs-lookup"><span data-stu-id="3400c-473">The operator can use this information to make decisions about possible actions to take, and then feed the results back into the instrumentation and collection stages.</span></span> <span data-ttu-id="3400c-474">A megjelenítési/riasztási szakasz hasznavehető képet biztosít a rendszer állapotáról.</span><span class="sxs-lookup"><span data-stu-id="3400c-474">The visualization/alerting stage phase presents a consumable view of the system state.</span></span> <span data-ttu-id="3400c-475">Különféle irányítópultokon közel valós idejű információkat jeleníthet meg.</span><span class="sxs-lookup"><span data-stu-id="3400c-475">It can display information in near real time by using a series of dashboards.</span></span> <span data-ttu-id="3400c-476">Emellett jelentések, diagramok és grafikonok létrehozásával a hosszú távú trendek azonosítását segítő adatok előzménynézetét biztosíthatja.</span><span class="sxs-lookup"><span data-stu-id="3400c-476">And it can generate reports, graphs, and charts to provide a historical view of the data that can help identify long-term trends.</span></span> <span data-ttu-id="3400c-477">Ha az adatok azt jelzik, hogy egy KPI valószínűleg meghaladja majd az elfogadható határértékeket, ez a szakasz riasztást is küldhet az operátornak.</span><span class="sxs-lookup"><span data-stu-id="3400c-477">If information indicates that a KPI is likely to exceed acceptable bounds, this stage can also trigger an alert to an operator.</span></span> <span data-ttu-id="3400c-478">Bizonyos esetekben a riasztással automatikus folyamat is indítható, amely korrekciós művelet, például automatikus skálázás végrehajtására tesz kísérletet.</span><span class="sxs-lookup"><span data-stu-id="3400c-478">In some cases, an alert can also be used to trigger an automated process that attempts to take corrective actions, such as autoscaling.</span></span>

<span data-ttu-id="3400c-479">Vegye figyelembe, hogy a lépéseket egy összefüggő folyamatot alkotnak, amelyben a szakaszok egymással párhuzamosan zajlanak.</span><span class="sxs-lookup"><span data-stu-id="3400c-479">Note that these steps constitute a continuous-flow process where the stages are happening in parallel.</span></span> <span data-ttu-id="3400c-480">Ideális esetben a szakaszok dinamikusan konfigurálhatók.</span><span class="sxs-lookup"><span data-stu-id="3400c-480">Ideally, all the phases should be dynamically configurable.</span></span> <span data-ttu-id="3400c-481">Bizonyos pontokon, különösen ha a rendszer újonnan lett üzembe helyezve vagy problémákba ütközik, nagyobb gyakorisággal lehet szükség többféle adat gyűjtésére.</span><span class="sxs-lookup"><span data-stu-id="3400c-481">At some points, especially when a system has been newly deployed or is experiencing problems, it might be necessary to gather extended data on a more frequent basis.</span></span> <span data-ttu-id="3400c-482">Máskor azonban vissza kell tudni állni csak a lényeges információk alapszintű gyűjtésére a rendszer megfelelő működésének ellenőrzéséhez.</span><span class="sxs-lookup"><span data-stu-id="3400c-482">At other times, it should be possible to revert to capturing a base level of essential information to verify that the system is functioning properly.</span></span>

<span data-ttu-id="3400c-483">Ezenfelül a teljes monitorozási folyamatot egy folyamatosan működő megoldásnak kell tekinteni, amely finomhangolásra és fejlesztésre szorul a visszajelzések alapján.</span><span class="sxs-lookup"><span data-stu-id="3400c-483">Additionally, the entire monitoring process should be considered a live, ongoing solution that's subject to fine-tuning and improvements as a result of feedback.</span></span> <span data-ttu-id="3400c-484">Előfordulhat például, hogy induláskor esetleg rengeteg tényezőt mér a rendszer állapotának meghatározásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-484">For example, you might start with measuring many factors to determine system health.</span></span> <span data-ttu-id="3400c-485">Idővel az elemzés révén finomítható a működés, a nem releváns mérések elvethetők, és pontosabban összpontosíthat a valóban szükséges adatokra, miközben a háttérzaj minimalizálható.</span><span class="sxs-lookup"><span data-stu-id="3400c-485">Analysis over time might lead to a refinement as you discard measures that aren't relevant, enabling you to more precisely focus on the data that you need while minimizing background noise.</span></span>

## <a name="sources-of-monitoring-and-diagnostic-data"></a><span data-ttu-id="3400c-486">A monitorozási és diagnosztikai adatok forrásai</span><span class="sxs-lookup"><span data-stu-id="3400c-486">Sources of monitoring and diagnostic data</span></span>

<span data-ttu-id="3400c-487">A monitorozási folyamat által használt által információk számos különböző forrásból származhatnak, amint az az 1. ábrán is látható.</span><span class="sxs-lookup"><span data-stu-id="3400c-487">The information that the monitoring process uses can come from several sources, as illustrated in Figure 1.</span></span> <span data-ttu-id="3400c-488">Az alkalmazás szintjén az információk a rendszer kódjába ágyazott nyomkövetési naplókból származnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-488">At the application level, information comes from trace logs incorporated into the code of the system.</span></span> <span data-ttu-id="3400c-489">A fejlesztőknek érdemes egy standard megközelítést alkalmazni a vezérlési folyam nyomon követésére a kódban.</span><span class="sxs-lookup"><span data-stu-id="3400c-489">Developers should follow a standard approach for tracking the flow of control through their code.</span></span> <span data-ttu-id="3400c-490">A metódusokba való belépéskor például kibocsátható egy nyomkövetési üzenet, amely megadja a metódus nevét, az aktuális időpontot, az egyes paraméterek értékét és minden egyéb releváns információt.</span><span class="sxs-lookup"><span data-stu-id="3400c-490">For example, an entry to a method can emit a trace message that specifies the name of the method, the current time, the value of each parameter, and any other pertinent information.</span></span> <span data-ttu-id="3400c-491">A be- és kilépési idők rögzítése szintén hasznosnak bizonyulhat.</span><span class="sxs-lookup"><span data-stu-id="3400c-491">Recording the entry and exit times can also prove useful.</span></span>

<span data-ttu-id="3400c-492">Az összes kivételt és figyelmeztetést naplózni kell, és gondoskodni kell a beágyazott kivételek és figyelmeztetések teljes nyomkövetésének a megőrzéséről.</span><span class="sxs-lookup"><span data-stu-id="3400c-492">You should log all exceptions and warnings, and ensure that you retain a full trace of any nested exceptions and warnings.</span></span> <span data-ttu-id="3400c-493">Ideális esetben a kódot futtató felhasználót azonosító adatokat is rögzíteni kell, a tevékenységek korrelálására szolgáló adatokkal egyetemben (a kérések nyomon követésére, miközben áthaladnak a rendszeren).</span><span class="sxs-lookup"><span data-stu-id="3400c-493">Ideally, you should also capture information that identifies the user who is running the code, together with activity correlation information (to track requests as they pass through the system).</span></span> <span data-ttu-id="3400c-494">Emellett naplózni kell az erőforrások, például az üzenetsorok, adatbázisok, fájlok és egyéb függő szolgáltatások elérésére tett kísérleteket is.</span><span class="sxs-lookup"><span data-stu-id="3400c-494">And you should log attempts to access all resources such as message queues, databases, files, and other dependent services.</span></span> <span data-ttu-id="3400c-495">Ezek az információk mérési és naplózási célokra használhatók.</span><span class="sxs-lookup"><span data-stu-id="3400c-495">This information can be used for metering and auditing purposes.</span></span>

<span data-ttu-id="3400c-496">Számos alkalmazás használ kódtárakat és keretrendszereket az általános feladatok végrehajtására, például az adattárak eléréséhez vagy a hálózaton keresztüli kommunikációhoz.</span><span class="sxs-lookup"><span data-stu-id="3400c-496">Many applications make use of libraries and frameworks to perform common tasks such as accessing a data store or communicating over a network.</span></span> <span data-ttu-id="3400c-497">Ezek a keretrendszerek konfigurálhatók saját nyomkövetési üzenetek és nyers diagnosztikai információk biztosítására, ilyen például a tranzakciók sebessége vagy az adatátvitel sikeressége és sikertelensége.</span><span class="sxs-lookup"><span data-stu-id="3400c-497">These frameworks might be configurable to provide their own trace messages and raw diagnostic information, such as transaction rates and data transmission successes and failures.</span></span>

> [!NOTE]
> <span data-ttu-id="3400c-498">Számos modern keretrendszer automatikusan közzéteszi a teljesítményt és a nyomkövetési eseményeket.</span><span class="sxs-lookup"><span data-stu-id="3400c-498">Many modern frameworks automatically publish performance and trace events.</span></span> <span data-ttu-id="3400c-499">Ezen információk rögzítéséhez csupán eszközt kell biztosítani a lekérésükhöz, és olyan helyen kell tárolni őket, ahol feldolgozhatók és elemezhetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-499">Capturing this information is simply a matter of providing a means to retrieve and store it where it can be processed and analyzed.</span></span>

<span data-ttu-id="3400c-500">Az alkalmazást futtató operációs rendszer olyan alsó szintű rendszerinformációk forrásaként szolgálhat, mint az I/O-sebességet, a memória- és a processzorhasználatot jelző teljesítményszámlálók.</span><span class="sxs-lookup"><span data-stu-id="3400c-500">The operating system where the application is running can be a source of low-level system-wide information, such as performance counters that indicate I/O rates, memory utilization, and CPU usage.</span></span> <span data-ttu-id="3400c-501">Az operációs rendszer hibái (például egy fájl megfelelő megnyitásának sikertelensége) szintén jelenthetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-501">Operating system errors (such as the failure to open a file correctly) might also be reported.</span></span>

<span data-ttu-id="3400c-502">A rendszert futtató mögöttes infrastruktúrát és összetevőket is számításba kell venni.</span><span class="sxs-lookup"><span data-stu-id="3400c-502">You should also consider the underlying infrastructure and components on which your system runs.</span></span> <span data-ttu-id="3400c-503">A virtuális gépek, virtuális hálózatok és tárolószolgáltatások mind szolgálhatnak fontos, infrastruktúraszintű teljesítményszámlálók és egyéb diagnosztikai adatok forrásául.</span><span class="sxs-lookup"><span data-stu-id="3400c-503">Virtual machines, virtual networks, and storage services can all be sources of important infrastructure-level performance counters and other diagnostic data.</span></span>

<span data-ttu-id="3400c-504">Ha az alkalmazás egyéb külső szolgáltatásokat, például webkiszolgálót vagy adatbázis-kezelési rendszert is használ, ezek a szolgáltatások saját nyomkövetési adatokat, naplókat és teljesítményszámlálókat tehetnek közzé.</span><span class="sxs-lookup"><span data-stu-id="3400c-504">If your application uses other external services, such as a web server or database management system, these services might publish their own trace information, logs, and performance counters.</span></span> <span data-ttu-id="3400c-505">Ilyenek például az SQL Server dinamikus felügyeleti nézetei az SQL Server-adatbázisra irányulóan végrehajtott műveletek nyomon követésére, és az IIS nyomkövetési naplói a webkiszolgálóhoz intézett kérések rögzítésére.</span><span class="sxs-lookup"><span data-stu-id="3400c-505">Examples include SQL Server Dynamic Management Views for tracking operations performed against a SQL Server database, and IIS trace logs for recording requests made to a web server.</span></span>

<span data-ttu-id="3400c-506">A rendszer összetevőinek módosításával és az újabb verziók üzembe helyezésével fontos, hogy a problémák, események és mérőszámok az egyes verziókhoz rendelhetők legyenek.</span><span class="sxs-lookup"><span data-stu-id="3400c-506">As the components of a system are modified and new versions are deployed, it's important to be able to attribute issues, events, and metrics to each version.</span></span> <span data-ttu-id="3400c-507">Ezeket az információkat a kiadási folyamathoz kell kötni, hogy az összetevők adott verziójával kapcsolatos problémák gyorsan felderíthetők és javíthatók legyenek.</span><span class="sxs-lookup"><span data-stu-id="3400c-507">This information should be tied back to the release pipeline so that problems with a specific version of a component can be tracked quickly and rectified.</span></span>

<span data-ttu-id="3400c-508">Biztonsági problémák a rendszer bármelyik pontján felléphetnek.</span><span class="sxs-lookup"><span data-stu-id="3400c-508">Security issues might occur at any point in the system.</span></span> <span data-ttu-id="3400c-509">Egy felhasználó például megpróbálhat érvénytelen felhasználói azonosítóval vagy jelszóval bejelentkezni.</span><span class="sxs-lookup"><span data-stu-id="3400c-509">For example, a user might attempt to sign in with an invalid user ID or password.</span></span> <span data-ttu-id="3400c-510">Egy hitelesített felhasználó megpróbálhat jogosulatlan hozzáférést szerezni egy erőforráshoz.</span><span class="sxs-lookup"><span data-stu-id="3400c-510">An authenticated user might try to obtain unauthorized access to a resource.</span></span> <span data-ttu-id="3400c-511">Vagy egy felhasználó megpróbálhat egy érvénytelen vagy elavult kulcsot megadni a titkosított adatok eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="3400c-511">Or a user might provide an invalid or outdated key to access encrypted information.</span></span> <span data-ttu-id="3400c-512">A sikeres és sikertelen kérések biztonsággal kapcsolatos adatait mindig naplózni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-512">Security-related information for successful and failing requests should always be logged.</span></span>

<span data-ttu-id="3400c-513">A [Rendszerállapot-figyelés az alkalmazásban](#instrumenting-an-application) szakasz további útmutatást nyújt azon információkkal kapcsolatban, amelyeket rögzíteni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-513">The section [Instrumenting an application](#instrumenting-an-application) contains more guidance on the information that you should capture.</span></span> <span data-ttu-id="3400c-514">Az információk gyűjtésére azonban többféle stratégia használható:</span><span class="sxs-lookup"><span data-stu-id="3400c-514">But you can use a variety of strategies to gather this information:</span></span>

- <span data-ttu-id="3400c-515">**Alkalmazás-/rendszermonitorozás**.</span><span class="sxs-lookup"><span data-stu-id="3400c-515">**Application/system monitoring**.</span></span> <span data-ttu-id="3400c-516">Ez a stratégia az alkalmazáson, alkalmazás-keretrendszereken, operációs rendszereken és infrastruktúrán belüli forrásokat használ.</span><span class="sxs-lookup"><span data-stu-id="3400c-516">This strategy uses internal sources within the application, application frameworks, operating system, and infrastructure.</span></span> <span data-ttu-id="3400c-517">Az alkalmazás kódja is létrehozhat saját monitorozási adatokat az ügyfélkérések életciklusának fontosabb pontjain.</span><span class="sxs-lookup"><span data-stu-id="3400c-517">The application code can generate its own monitoring data at notable points during the lifecycle of a client request.</span></span> <span data-ttu-id="3400c-518">Az alkalmazás nyomkövetési utasításokat is tartalmazhat, amelyek szelektíven engedélyezhetők vagy tilthatók le a körülményeknek megfelelően.</span><span class="sxs-lookup"><span data-stu-id="3400c-518">The application can include tracing statements that might be selectively enabled or disabled as circumstances dictate.</span></span> <span data-ttu-id="3400c-519">Diagnosztika is beszúrható dinamikusan diagnosztikai keretrendszer használatával.</span><span class="sxs-lookup"><span data-stu-id="3400c-519">It might also be possible to inject diagnostics dynamically by using a diagnostics framework.</span></span> <span data-ttu-id="3400c-520">Ezek a keretrendszerek általában olyan beépülő modulokat biztosítanak, amelyek a kód különböző rendszerállapot-figyelési pontjaihoz csatlakozva rögzítik a pontok nyomkövetési adatait.</span><span class="sxs-lookup"><span data-stu-id="3400c-520">These frameworks typically provide plug-ins that can attach to various instrumentation points in your code and capture trace data at these points.</span></span>
  
    <span data-ttu-id="3400c-521">Emellett a kód és/vagy a mögöttes infrastruktúra is létrehozhat eseményeket a kritikus pontokon.</span><span class="sxs-lookup"><span data-stu-id="3400c-521">Additionally, your code and/or the underlying infrastructure might raise events at critical points.</span></span> <span data-ttu-id="3400c-522">Az események figyelésére konfigurált monitorozási ügynökök rögzíthetik az eseményadatokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-522">Monitoring agents that are configured to listen for these events can record the event information.</span></span>

- <span data-ttu-id="3400c-523">**Valódi felhasználómonitorozás**.</span><span class="sxs-lookup"><span data-stu-id="3400c-523">**Real user monitoring**.</span></span> <span data-ttu-id="3400c-524">Ez a megközelítés a felhasználó és az alkalmazás közötti interakciót rögzíti, és az egyes kérések és válaszok útját figyeli.</span><span class="sxs-lookup"><span data-stu-id="3400c-524">This approach records the interactions between a user and the application and observes the flow of each request and response.</span></span> <span data-ttu-id="3400c-525">Ezek az információk két célra alkalmazhatók: az egyes felhasználók általi használat mérésére, valamint annak meghatározására, hogy a felhasználók megfelelő szolgáltatásminőséget kapnak-e (például gyors válaszidők, alacsony késés és minimális számú hiba).</span><span class="sxs-lookup"><span data-stu-id="3400c-525">This information can have a two-fold purpose: it can be used for metering usage by each user, and it can be used to determine whether users are receiving a suitable quality of service (for example, fast response times, low latency, and minimal errors).</span></span> <span data-ttu-id="3400c-526">A rögzített adatok használatával azonosíthatók a problémás területek, ahol a hibák leggyakrabban fellépnek.</span><span class="sxs-lookup"><span data-stu-id="3400c-526">You can use the captured data to identify areas of concern where failures occur most often.</span></span> <span data-ttu-id="3400c-527">Az adatok alapján azonosíthatók azok az elemek is, ahol a rendszer lelassul, vélhetően az alkalmazás forgalmas pontjai vagy a szűk keresztmetszet más formái miatt.</span><span class="sxs-lookup"><span data-stu-id="3400c-527">You can also use the data to identify elements where the system slows down, possibly due to hotspots in the application or some other form of bottleneck.</span></span> <span data-ttu-id="3400c-528">Ha körültekintően alkalmazza ezt a megközelítést, a felhasználóknak az alkalmazásban követett útja esetleg rekonstruálható lesz hibakeresési és tesztelési célokra.</span><span class="sxs-lookup"><span data-stu-id="3400c-528">If you implement this approach carefully, it might be possible to reconstruct users' flows through the application for debugging and testing purposes.</span></span>
  
  > [!IMPORTANT]
  > <span data-ttu-id="3400c-529">A valódi felhasználók monitorozásával rögzített adatokat rendkívül kényes adatként kell kezelni, mivel bizalmas információkat is tartalmazhatnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-529">You should consider the data that's captured by monitoring real users to be highly sensitive because it might include confidential material.</span></span> <span data-ttu-id="3400c-530">Ha menti a rögzített adatokat, biztonságosan tárolja azokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-530">If you save captured data, store it securely.</span></span> <span data-ttu-id="3400c-531">Ha az adatokat a teljesítmény monitorázáshoz vagy hibakereséshez szeretné használni, először távolítsa el a személyes azonosításra alkalmas adatok mindegyikét.</span><span class="sxs-lookup"><span data-stu-id="3400c-531">If you want to use the data for performance monitoring or debugging purposes, strip out all personally identifiable information first.</span></span>

- <span data-ttu-id="3400c-532">**Szintetikus felhasználómonitorozás**.</span><span class="sxs-lookup"><span data-stu-id="3400c-532">**Synthetic user monitoring**.</span></span> <span data-ttu-id="3400c-533">Ebben a megközelítésben saját tesztügyfelet ír, amely szimulálja a felhasználókat, és egy konfigurálható, de általános műveletsort hajt végre.</span><span class="sxs-lookup"><span data-stu-id="3400c-533">In this approach, you write your own test client that simulates a user and performs a configurable but typical series of operations.</span></span> <span data-ttu-id="3400c-534">A tesztügyfél teljesítményének nyomon követésével meghatározhatja a rendszer állapotát.</span><span class="sxs-lookup"><span data-stu-id="3400c-534">You can track the performance of the test client to help determine the state of the system.</span></span> <span data-ttu-id="3400c-535">A tesztügyfél több példányát egy terheléstesztelési művelet részeként használva megállapítható, hogyan reagál a rendszer a magas terhelés alatt, és milyen monitorozási adatok keletkeznek ilyen körülmények közt.</span><span class="sxs-lookup"><span data-stu-id="3400c-535">You can also use multiple instances of the test client as part of a load-testing operation to establish how the system responds under stress, and what sort of monitoring output is generated under these conditions.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="3400c-536">A valódi és szintetikus felhasználómonitorozás olyan kód alkalmazásával valósítható meg, amely a metódushívásokat és az alkalmazás egyéb kritikus részeit követi nyomon és látja el időadatokkal.</span><span class="sxs-lookup"><span data-stu-id="3400c-536">You can implement real and synthetic user monitoring by including code that traces and times the execution of method calls and other critical parts of an application.</span></span>

- <span data-ttu-id="3400c-537">**Profilkészítés**.</span><span class="sxs-lookup"><span data-stu-id="3400c-537">**Profiling**.</span></span> <span data-ttu-id="3400c-538">Ez a megközelítés elsősorban az alkalmazásteljesítmény monitorozását és javítását célozza.</span><span class="sxs-lookup"><span data-stu-id="3400c-538">This approach is primarily targeted at monitoring and improving application performance.</span></span> <span data-ttu-id="3400c-539">Ahelyett, hogy a valódi és szintetikus felhasználómonitorozás funkcionális szintjén működne, alacsonyabb szintű információkat rögzít az alkalmazás futása során.</span><span class="sxs-lookup"><span data-stu-id="3400c-539">Rather than operating at the functional level of real and synthetic user monitoring, it captures lower-level information as the application runs.</span></span> <span data-ttu-id="3400c-540">A profilkészítés az alkalmazások végrehajtási állapotának rendszeres mintavételezésével (az alkalmazás által az adott pillanatban futtatott kódrészlet meghatározásával) valósítható meg.</span><span class="sxs-lookup"><span data-stu-id="3400c-540">You can implement profiling by using periodic sampling of the execution state of an application (determining which piece of code that the application is running at a given point in time).</span></span> <span data-ttu-id="3400c-541">Olyan rendszerállapot-figyelést is alkalmazhat, amely mintavételezőket szúr be a kód kritikus elágazásain (például a metódushívások indításánál és befejezésénél), és rögzíti, hogy mely metódusok lettek meghívva, mikor, és mennyi ideig tartottak az egyes hívások.</span><span class="sxs-lookup"><span data-stu-id="3400c-541">You can also use instrumentation that inserts probes into the code at important junctures (such as the start and end of a method call) and records which methods were invoked, at what time, and how long each call took.</span></span> <span data-ttu-id="3400c-542">Az adatok elemzésével aztán meghatározható, hogy az alkalmazás mely részei okozhatnak teljesítményproblémákat.</span><span class="sxs-lookup"><span data-stu-id="3400c-542">You can then analyze this data to determine which parts of the application might cause performance problems.</span></span>

- <span data-ttu-id="3400c-543">**Végpont-monitorozás**.</span><span class="sxs-lookup"><span data-stu-id="3400c-543">**Endpoint monitoring**.</span></span> <span data-ttu-id="3400c-544">Ez a módszer egy vagy több diagnosztikai végpontot alkalmaz, amelyeket az alkalmazás kifejezetten a monitorozás lehető tétele céljából tesz elérhetővé.</span><span class="sxs-lookup"><span data-stu-id="3400c-544">This technique uses one or more diagnostic endpoints that the application exposes specifically to enable monitoring.</span></span> <span data-ttu-id="3400c-545">A végpontok egy utat biztosítanak az alkalmazás kódjába, és információkat adhatnak vissza a rendszer állapotával kapcsolatban.</span><span class="sxs-lookup"><span data-stu-id="3400c-545">An endpoint provides a pathway into the application code and can return information about the health of the system.</span></span> <span data-ttu-id="3400c-546">Különböző végpontok a működés különböző aspektusaira fókuszálhatnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-546">Different endpoints can focus on various aspects of the functionality.</span></span> <span data-ttu-id="3400c-547">Írhat saját diagnosztikai ügyfelet, amely rendszeresen kéréseket küld ezekre a végpontokra, és feldolgozza a válaszokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-547">You can write your own diagnostics client that sends periodic requests to these endpoints and assimilate the responses.</span></span> <span data-ttu-id="3400c-548">További információkért lásd: a [állapot végponti Monitorozását végző minta](../patterns/health-endpoint-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="3400c-548">For more information, see the [Health Endpoint Monitoring pattern](../patterns/health-endpoint-monitoring.md).</span></span>

<span data-ttu-id="3400c-549">A maximális lefedettség érdekében érdemes ezeknek a módszereknek valamilyen kombinációját alkalmaznia.</span><span class="sxs-lookup"><span data-stu-id="3400c-549">For maximum coverage, you should use a combination of these techniques.</span></span>

## <a name="instrumenting-an-application"></a><span data-ttu-id="3400c-550">Rendszerállapot-figyelés az alkalmazásban</span><span class="sxs-lookup"><span data-stu-id="3400c-550">Instrumenting an application</span></span>

<span data-ttu-id="3400c-551">A rendszerállapot-figyelés a monitorozási folyamat kritikus részét képezi.</span><span class="sxs-lookup"><span data-stu-id="3400c-551">Instrumentation is a critical part of the monitoring process.</span></span> <span data-ttu-id="3400c-552">A rendszer teljesítményével és állapotával kapcsolatban csak úgy hozhat megalapozott döntéseket, ha előbb rögzíti azokat az adatokat, amelyek lehetővé teszik ezen döntések meghozatalát.</span><span class="sxs-lookup"><span data-stu-id="3400c-552">You can make meaningful decisions about the performance and health of a system only if you first capture the data that enables you to make these decisions.</span></span> <span data-ttu-id="3400c-553">A rendszerállapot-figyelés segítségével gyűjtött információknak elegendőnek kell lenniük a teljesítmény értékeléséhez, a problémák diagnosztizálásához és a döntések meghozatalához anélkül, hogy be kellene jelentkezni egy távoli éles kiszolgálóra a nyomkövetés (és a hibakeresés) manuális végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-553">The information that you gather by using instrumentation should be sufficient to enable you to assess performance, diagnose problems, and make decisions without requiring you to sign in to a remote production server to perform tracing (and debugging) manually.</span></span> <span data-ttu-id="3400c-554">A rendszerállapot-adatok általában mérőszámokból és a nyomkövetési naplókba írt információkból állnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-554">Instrumentation data typically comprises metrics and information that's written to trace logs.</span></span>

<span data-ttu-id="3400c-555">A nyomkövetési napló tartalmát képezhetik az alkalmazás által írt szöveges adatok vagy a nyomkövetési események eredményeként keletkező bináris adatok (ha az alkalmazás Windows esemény-nyomkövetést (ETW) alkalmaz).</span><span class="sxs-lookup"><span data-stu-id="3400c-555">The contents of a trace log can be the result of textual data that's written by the application or binary data that's created as the result of a trace event (if the application is using Event Tracing for Windows--ETW).</span></span> <span data-ttu-id="3400c-556">Ezeket az adatokat az infrastruktúra részein, például a webkiszolgálón létrejövő eseményeket rögzítő rendszernaplók is létrehozhatják.</span><span class="sxs-lookup"><span data-stu-id="3400c-556">They can also be generated from system logs that record events arising from parts of the infrastructure, such as a web server.</span></span> <span data-ttu-id="3400c-557">A szöveges naplóüzenetek gyakran a felhasználók számára olvashatók, azonban olyan formátumban kell írni őket, amely lehetővé teszi az egyszerű elemzésüket is az automatikus rendszerek számára.</span><span class="sxs-lookup"><span data-stu-id="3400c-557">Textual log messages are often designed to be human-readable, but they should also be written in a format that enables an automated system to parse them easily.</span></span>

<span data-ttu-id="3400c-558">A naplókat kategorizálni is kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-558">You should also categorize logs.</span></span> <span data-ttu-id="3400c-559">Ne írjon minden nyomkövetési adatot ugyanabba a naplóba, hanem külön naplókba rögzítse a rendszer különböző működési területeinek nyomkövetési eredményeit.</span><span class="sxs-lookup"><span data-stu-id="3400c-559">Don't write all trace data to a single log, but use separate logs to record the trace output from different operational aspects of the system.</span></span> <span data-ttu-id="3400c-560">Így gyorsan szűrheti majd a naplóüzeneteket, ha azokat a megfelelő naplóból olvassa be, és nem egyetlen hosszú fájlt kell feldolgoznia.</span><span class="sxs-lookup"><span data-stu-id="3400c-560">You can then quickly filter log messages by reading from the appropriate log rather than having to process a single lengthy file.</span></span> <span data-ttu-id="3400c-561">Ne írjon különböző biztonsági követelményekkel rendelkező információt (például naplózási információkat és hibakeresési adatokat) ugyanazon naplóba.</span><span class="sxs-lookup"><span data-stu-id="3400c-561">Never write information that has different security requirements (such as audit information and debugging data) to the same log.</span></span>

> [!NOTE]
> <span data-ttu-id="3400c-562">A napló lehet egy fájl a fájlrendszerben, vagy menthető más formátumba is, például blobként a Blob Storage-tárolóban.</span><span class="sxs-lookup"><span data-stu-id="3400c-562">A log might be implemented as a file on the file system, or it might be held in some other format, such as a blob in blob storage.</span></span> <span data-ttu-id="3400c-563">A naplóadatok tárolhatók strukturáltabb módon is, például egy tábla soraiként.</span><span class="sxs-lookup"><span data-stu-id="3400c-563">Log information might also be held in more structured storage, such as rows in a table.</span></span>

<span data-ttu-id="3400c-564">A mérőszámok általában a rendszer egy adott aspektusára vagy erőforrására és egy adott időpontra vonatkozó mérések vagy darabszámok, amelyek egy vagy több hozzárendelt címkével vagy dimenzióval rendelkeznek (ezeket néha *mintának* is szokás nevezni).</span><span class="sxs-lookup"><span data-stu-id="3400c-564">Metrics will generally be a measure or count of some aspect or resource in the system at a specific time, with one or more associated tags or dimensions (sometimes called a *sample*).</span></span> <span data-ttu-id="3400c-565">A mérőszámok egyes példányai önmagukban általában nem használhatók,</span><span class="sxs-lookup"><span data-stu-id="3400c-565">A single instance of a metric is usually not useful in isolation.</span></span> <span data-ttu-id="3400c-566">hanem hosszabb időtartamra vonatkozóan kell rögzíteni őket.</span><span class="sxs-lookup"><span data-stu-id="3400c-566">Instead, metrics have to be captured over time.</span></span> <span data-ttu-id="3400c-567">A legfontosabb azt figyelembe venni, hogy pontosan mely mérőszámokat és milyen gyakorisággal kell rögzíteni.</span><span class="sxs-lookup"><span data-stu-id="3400c-567">The key issue to consider is which metrics you should record and how frequently.</span></span> <span data-ttu-id="3400c-568">A mérőszámadatok túl gyakori gyűjtése jelentős további terhelést jelent a rendszer számára, míg a túl ritka gyűjtés esetén lemaradhat az egyes jelentős események keletkezését okozó körülményekről.</span><span class="sxs-lookup"><span data-stu-id="3400c-568">Generating data for metrics too often can impose a significant additional load on the system, whereas capturing metrics infrequently might cause you to miss the circumstances that lead to a significant event.</span></span> <span data-ttu-id="3400c-569">A szempontok mérőszámonként eltérőek lehetnek.</span><span class="sxs-lookup"><span data-stu-id="3400c-569">The considerations will vary from metric to metric.</span></span> <span data-ttu-id="3400c-570">A processzorhasználat egy kiszolgálón például egyik másodpercről a másikra változhat, de a magas kihasználtság csak akkor válik problémává, ha hosszan, több percen keresztül tart.</span><span class="sxs-lookup"><span data-stu-id="3400c-570">For example, CPU utilization on a server might vary significantly from second to second, but high utilization becomes an issue only if it's long-lived over a number of minutes.</span></span>

### <a name="information-for-correlating-data"></a><span data-ttu-id="3400c-571">Információk az adatok korrelálásához</span><span class="sxs-lookup"><span data-stu-id="3400c-571">Information for correlating data</span></span>

<span data-ttu-id="3400c-572">Egyszerűen monitorozhatja az egyes rendszerszintű teljesítményszámlálókat, rögzítheti az erőforrások mérőszámait, és szerezhet be alkalmazás-nyomkövetési információkat a különböző naplófájlokból.</span><span class="sxs-lookup"><span data-stu-id="3400c-572">You can easily monitor individual system-level performance counters, capture metrics for resources, and obtain application trace information from various log files.</span></span> <span data-ttu-id="3400c-573">A monitorozás bizonyos formái esetén azonban szükség van egy elemzési és diagnosztikai szakaszra a monitorozási folyamatban a különféle forrásokból származó adatok korrelálásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-573">But some forms of monitoring require the analysis and diagnostics stage in the monitoring pipeline to correlate the data that's retrieved from several sources.</span></span> <span data-ttu-id="3400c-574">Ezek az adatok különféle formákat ölthetnek a nyers adatokban, és az elemzési folyamatot el kell látni megfelelő mennyiségű rendszerállapot-adattal, hogy képes legyen leképezni ezeket a különféle formákat.</span><span class="sxs-lookup"><span data-stu-id="3400c-574">This data might take several forms in the raw data, and the analysis process must be provided with sufficient instrumentation data to be able to map these different forms.</span></span> <span data-ttu-id="3400c-575">Tegyük fel például, hogy az alkalmazás-keretrendszer szintjén az egyes feladatokat egy szálazonosító azonosítja.</span><span class="sxs-lookup"><span data-stu-id="3400c-575">For example, at the application framework level, a task might be identified by a thread ID.</span></span> <span data-ttu-id="3400c-576">Az alkalmazáson belül ugyanazon feladat az azt végrehajtó felhasználó felhasználói azonosítójához társítható.</span><span class="sxs-lookup"><span data-stu-id="3400c-576">Within an application, the same work might be associated with the user ID for the user who is performing that task.</span></span>

<span data-ttu-id="3400c-577">Emellett nem is valószínű, hogy 1:1 leképezés hozható létre a szálak és a felhasználói kérések között, mivel az aszinkron műveletek ugyanannak a szálnak a használatával több felhasználó nevében is végezhetnek műveleteket.</span><span class="sxs-lookup"><span data-stu-id="3400c-577">Also, there's unlikely to be a 1:1 mapping between threads and user requests, because asynchronous operations might reuse the same threads to perform operations on behalf of more than one user.</span></span> <span data-ttu-id="3400c-578">A dolgot tovább bonyolítja, hogy egyetlen kérést több szál is kezelhet, ahogy a végrehajtás végighalad a rendszeren.</span><span class="sxs-lookup"><span data-stu-id="3400c-578">To complicate matters further, a single request might be handled by more than one thread as execution flows through the system.</span></span> <span data-ttu-id="3400c-579">Amennyiben lehetséges, az egyes kérésekhez egy egyedi tevékenységazonosítót társítson, amelyet a végrehajtás propagál a rendszeren a kérés környezetének részeként.</span><span class="sxs-lookup"><span data-stu-id="3400c-579">If possible, associate each request with a unique activity ID that's propagated through the system as part of the request context.</span></span> <span data-ttu-id="3400c-580">(A tevékenységazonosítóknak létrehozásának és nyomkövetési adatokba való foglalásának módszere a nyomkövetési adatok rögzítésére szolgáló technológiától függ.)</span><span class="sxs-lookup"><span data-stu-id="3400c-580">(The technique for generating and including activity IDs in trace information depends on the technology that's used to capture the trace data.)</span></span>

<span data-ttu-id="3400c-581">Minden monitorozási adatot ugyanúgy kell időbélyeggel ellátni.</span><span class="sxs-lookup"><span data-stu-id="3400c-581">All monitoring data should be time-stamped in the same way.</span></span> <span data-ttu-id="3400c-582">A konzisztencia érdekében minden dátumot és időpontot az egyezményes világidő (UTC) használatával rögzítsen.</span><span class="sxs-lookup"><span data-stu-id="3400c-582">For consistency, record all dates and times by using Coordinated Universal Time.</span></span> <span data-ttu-id="3400c-583">Ez megkönnyíti az eseménysorozatok nyomon követését.</span><span class="sxs-lookup"><span data-stu-id="3400c-583">This will help you more easily trace sequences of events.</span></span>

> [!NOTE]
> <span data-ttu-id="3400c-584">Előfordulhat, hogy a különböző időzónákban és hálózatokon működő számítógépek nincsenek szinkronizálva.</span><span class="sxs-lookup"><span data-stu-id="3400c-584">Computers operating in different time zones and networks might not be synchronized.</span></span> <span data-ttu-id="3400c-585">Ne támaszkodjon kizárólag az időbélyegekre a több számítógépet is érintő rendszerállapot-adatok korrelálásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-585">Don't depend on using time stamps alone for correlating instrumentation data that spans multiple machines.</span></span>

### <a name="information-to-include-in-the-instrumentation-data"></a><span data-ttu-id="3400c-586">A rendszerállapot-adatokba foglalandó információk</span><span class="sxs-lookup"><span data-stu-id="3400c-586">Information to include in the instrumentation data</span></span>

<span data-ttu-id="3400c-587">Amikor mérlegeli, hogy milyen információkat kell gyűjtenie, vegye figyelembe az alábbi szempontokat:</span><span class="sxs-lookup"><span data-stu-id="3400c-587">Consider the following points when you're deciding which instrumentation data you need to collect:</span></span>

- <span data-ttu-id="3400c-588">Gondoskodjon róla, hogy a nyomkövetési események által rögzített információk gépi és emberi olvasásra egyaránt alkalmasak legyenek.</span><span class="sxs-lookup"><span data-stu-id="3400c-588">Make sure that information captured by trace events is machine and human readable.</span></span> <span data-ttu-id="3400c-589">Alkalmazzon jól meghatározott sémákat az ilyen információkhoz, hogy megkönnyítse a naplóadatok automatizált feldolgozását a különféle rendszereken, valamint hogy biztosítsa a konzisztenciát a naplókat használó üzemeltetési és fejlesztési személyzet számára.</span><span class="sxs-lookup"><span data-stu-id="3400c-589">Adopt well-defined schemas for this information to facilitate automated processing of log data across systems, and to provide consistency to operations and engineering staff reading the logs.</span></span> <span data-ttu-id="3400c-590">Az információkat egészítse ki környezeti adatokkal, például a telepítési környezetre, a folyamatot futtató gépre, a folyamat részleteire és a hívási veremre vonatkozó adatokkal.</span><span class="sxs-lookup"><span data-stu-id="3400c-590">Include environmental information, such as the deployment environment, the machine on which the process is running, the details of the process, and the call stack.</span></span>

- <span data-ttu-id="3400c-591">A profilkészítést csak abban az esetben engedélyezze, ha valóban szükséges, mivel jelentős többletterhelésnek teheti ki a rendszert.</span><span class="sxs-lookup"><span data-stu-id="3400c-591">Enable profiling only when necessary because it can impose a significant overhead on the system.</span></span> <span data-ttu-id="3400c-592">A rendszerállapot-adatokat használó profilkészítés minden egyes alkalommal rögzíti az eseményeket (például a metódushívásokat) azok előfordulásakor, míg a mintavételezés csak a kiválasztott eseményeket rögzíti.</span><span class="sxs-lookup"><span data-stu-id="3400c-592">Profiling by using instrumentation records an event (such as a method call) every time it occurs, whereas sampling records only selected events.</span></span> <span data-ttu-id="3400c-593">A kijelölt lehet időalapú (után minden *n* másodperc), vagy gyakorisága-alapú (miután minden *n* kérések).</span><span class="sxs-lookup"><span data-stu-id="3400c-593">The selection can be time-based (once every *n* seconds), or frequency-based (once every *n* requests).</span></span> <span data-ttu-id="3400c-594">Ha túl gyakran történnek események, a rendszerállapot-adatokat használó profilkészítés túl nagy terhet jelenthet, és negatív hatással lehet az általános teljesítményre.</span><span class="sxs-lookup"><span data-stu-id="3400c-594">If events occur very frequently, profiling by instrumentation might cause too much of a burden and itself affect overall performance.</span></span> <span data-ttu-id="3400c-595">Ebben az esetben a mintavételezéses módszer használata előnyösebb lehet.</span><span class="sxs-lookup"><span data-stu-id="3400c-595">In this case, the sampling approach might be preferable.</span></span> <span data-ttu-id="3400c-596">Ha azonban az események gyakorisága alacsony, előfordulhat, hogy a mintavételezés lemarad róluk.</span><span class="sxs-lookup"><span data-stu-id="3400c-596">However, if the frequency of events is low, sampling might miss them.</span></span> <span data-ttu-id="3400c-597">Ebben az esetben a rendszerállapot-figyelés bizonyulhat a hatékonyabb megközelítésnek.</span><span class="sxs-lookup"><span data-stu-id="3400c-597">In this case, instrumentation might be the better approach.</span></span>

- <span data-ttu-id="3400c-598">Biztosítson elegendő kontextust, amely alapján a fejlesztők és rendszergazdák megállapíthatják az egyes kérések forrását.</span><span class="sxs-lookup"><span data-stu-id="3400c-598">Provide sufficient context to enable a developer or administrator to determine the source of each request.</span></span> <span data-ttu-id="3400c-599">A kontextus tartalmazhat például valamilyen tevékenységazonosítót, amely azonosítja a kérés egy adott példányát.</span><span class="sxs-lookup"><span data-stu-id="3400c-599">This might include some form of activity ID that identifies a specific instance of a request.</span></span> <span data-ttu-id="3400c-600">Emellett tartalmazhat olyan információkat is, amelyek használatával a tevékenység korrelálható az elvégzett számítási munkával és a használt erőforrásokkal.</span><span class="sxs-lookup"><span data-stu-id="3400c-600">It might also include information that can be used to correlate this activity with the computational work performed and the resources used.</span></span> <span data-ttu-id="3400c-601">Vegye figyelembe, hogy a munka esetleg túlnyúlik a folyamatok és a gépek határain.</span><span class="sxs-lookup"><span data-stu-id="3400c-601">Note that this work might cross process and machine boundaries.</span></span> <span data-ttu-id="3400c-602">Mérés esetén a kontextusnak tartalmaznia kell (közvetlenül vagy más korrelált információkon keresztül közvetve) a kérés létrehozását kiváltó felhasználóra vonatkozó hivatkozást is.</span><span class="sxs-lookup"><span data-stu-id="3400c-602">For metering, the context should also include (either directly or indirectly via other correlated information) a reference to the customer who caused the request to be made.</span></span> <span data-ttu-id="3400c-603">A kontextus értékes információkat biztosít az alkalmazásnak a monitorozási adatok rögzítésének időpontjában érvényes állapotára vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="3400c-603">This context provides valuable information about the application state at the time that the monitoring data was captured.</span></span>

- <span data-ttu-id="3400c-604">Minden kérést rögzíteni kell, a kérések kezdeményezésének helyével vagy régiójával együtt.</span><span class="sxs-lookup"><span data-stu-id="3400c-604">Record all requests, and the locations or regions from which these requests are made.</span></span> <span data-ttu-id="3400c-605">Ezen információk segíthetnek annak meghatározásában, hogy vannak-e helyspecifikus kritikus pontok a rendszerben.</span><span class="sxs-lookup"><span data-stu-id="3400c-605">This information can assist in determining whether there are any location-specific hotspots.</span></span> <span data-ttu-id="3400c-606">Az információk hasznosak lehetnek annak meghatározásához is, hogy érdemes-e az alkalmazást vagy az általa használt adatokat újraparticionálni.</span><span class="sxs-lookup"><span data-stu-id="3400c-606">This information can also be useful in determining whether to repartition an application or the data that it uses.</span></span>

- <span data-ttu-id="3400c-607">A kivételek adatait szintén gondosan rögzíteni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-607">Record and capture the details of exceptions carefully.</span></span> <span data-ttu-id="3400c-608">A kritikus fontosságú hibakeresési információk gyakran elvesznek a kivételek nem megfelelő kezelésének eredményeként.</span><span class="sxs-lookup"><span data-stu-id="3400c-608">Often, critical debug information is lost as a result of poor exception handling.</span></span> <span data-ttu-id="3400c-609">Az alkalmazás által jelentett kivételek minden adatát rögzíteni kell, beleértve a belső kivételekre vonatkozó és az egyéb környezeti információkat is.</span><span class="sxs-lookup"><span data-stu-id="3400c-609">Capture the full details of exceptions that the application throws, including any inner exceptions and other context information.</span></span> <span data-ttu-id="3400c-610">Ha lehetséges, a hívási vermet is rögzíteni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-610">Include the call stack if possible.</span></span>

- <span data-ttu-id="3400c-611">Az alkalmazás különböző elemei által rögzített adatoknak konzisztensnek kell lenniük, ez ugyanis segíthet az események elemzésében, és azoknak a felhasználói kérésekkel való korrelálásában.</span><span class="sxs-lookup"><span data-stu-id="3400c-611">Be consistent in the data that the different elements of your application capture, because this can assist in analyzing events and correlating them with user requests.</span></span> <span data-ttu-id="3400c-612">Vegye fontolóra egy átfogó és konfigurálható naplózási csomag alkalmazását az információk gyűjtésére, és inkább nem számítson arra, hogy a fejlesztők ugyanazt a megközelítést alkalmazzák majd a rendszer különböző részeinek megvalósítása során.</span><span class="sxs-lookup"><span data-stu-id="3400c-612">Consider using a comprehensive and configurable logging package to gather information, rather than depending on developers to adopt the same approach as they implement different parts of the system.</span></span> <span data-ttu-id="3400c-613">Gyűjtse a kulcsfontosságú teljesítményszámlálók adatait, például a végrehajtott I/O-műveletek mennyiségét, a hálózathasználatot, a kérések számát, a memóriahasználatot és a processzorhasználatot.</span><span class="sxs-lookup"><span data-stu-id="3400c-613">Gather data from key performance counters, such as the volume of I/O being performed, network utilization, number of requests, memory use, and CPU utilization.</span></span> <span data-ttu-id="3400c-614">Egyes infrastruktúraszolgáltatások saját teljesítményszámlálókat is biztosíthatnak, például az adatbázisokkal létesített kapcsolatok számát, a tranzakciók végrehajtási sebességét, valamint a sikeres vagy sikertelen tranzakciók számát.</span><span class="sxs-lookup"><span data-stu-id="3400c-614">Some infrastructure services might provide their own specific performance counters, such as the number of connections to a database, the rate at which transactions are being performed, and the number of transactions that succeed or fail.</span></span> <span data-ttu-id="3400c-615">Emellett az alkalmazások is meghatározhatnak saját teljesítményszámlálókat.</span><span class="sxs-lookup"><span data-stu-id="3400c-615">Applications might also define their own specific performance counters.</span></span>

- <span data-ttu-id="3400c-616">Naplózza a külső szolgáltatásokra, például adatbázisrendszerekre, webszolgáltatásokra vagy az infrastruktúra részét képező egyéb rendszerszintű szolgáltatásokra irányuló összes hívást.</span><span class="sxs-lookup"><span data-stu-id="3400c-616">Log all calls made to external services, such as database systems, web services, or other system-level services that are part of the infrastructure.</span></span> <span data-ttu-id="3400c-617">Rögzítse az egyes hívások végrehajtásához szükséges időkkel, valamint a hívások sikerességével vagy sikertelenségével kapcsolatos információkat is.</span><span class="sxs-lookup"><span data-stu-id="3400c-617">Record information about the time taken to perform each call, and the success or failure of the call.</span></span> <span data-ttu-id="3400c-618">Amennyiben lehetséges, rögzítse az összes újrapróbálkozási kísérletet és hibát is az előforduló átmeneti hibák esetén.</span><span class="sxs-lookup"><span data-stu-id="3400c-618">If possible, capture information about all retry attempts and failures for any transient errors that occur.</span></span>

### <a name="ensuring-compatibility-with-telemetry-systems"></a><span data-ttu-id="3400c-619">A telemetriarendszerekkel való kompatibilitás biztosítása</span><span class="sxs-lookup"><span data-stu-id="3400c-619">Ensuring compatibility with telemetry systems</span></span>

<span data-ttu-id="3400c-620">Sok esetben a rendszerállapot-figyelés által létrehozott információk események sorozataként jönnek létre, amelyeket egy telemetriarendszer vesz át feldolgozásra és elemzésre.</span><span class="sxs-lookup"><span data-stu-id="3400c-620">In many cases, the information that instrumentation produces is generated as a series of events and passed to a separate telemetry system for processing and analysis.</span></span> <span data-ttu-id="3400c-621">A telemetriarendszerek általában mindenféle alkalmazástól vagy topológiától függetlenek, de elvárják, hogy az információk egy specifikus, általában valamilyen séma alapján meghatározott formátumot kövessenek.</span><span class="sxs-lookup"><span data-stu-id="3400c-621">A telemetry system is typically independent of any specific application or technology, but it expects information to follow a specific format that's usually defined by a schema.</span></span> <span data-ttu-id="3400c-622">A séma lényegében egy megállapodást jelent, amely meghatározza azon adatmezőket és -típusokat, amelyeket a telemetriarendszer fogadni képes.</span><span class="sxs-lookup"><span data-stu-id="3400c-622">The schema effectively specifies a contract that defines the data fields and types that the telemetry system can ingest.</span></span> <span data-ttu-id="3400c-623">A sémát érdemes általánosítani, hogy a különféle platformokról és eszközökről érkező adatok mindegyikét kezelni tudja.</span><span class="sxs-lookup"><span data-stu-id="3400c-623">The schema should be generalized to allow for data arriving from a range of platforms and devices.</span></span>

<span data-ttu-id="3400c-624">Az általános sémának tartalmaznia kell az összes rendszerállapot-figyelési eseményben megtalálható lévő mezőket, például az esemény nevét, az esemény időpontját, a küldő IP-címét, valamint a más eseményekkel való korreláláshoz szükséges adatokat (például a felhasználóazonosítót, eszközazonosítót és alkalmazásazonosítót).</span><span class="sxs-lookup"><span data-stu-id="3400c-624">A common schema should include fields that are common to all instrumentation events, such as the event name, the event time, the IP address of the sender, and the details that are required for correlating with other events (such as a user ID, a device ID, and an application ID).</span></span> <span data-ttu-id="3400c-625">Ne feledje, hogy a legkülönfélébb eszközök hozhatnak létre eseményeket, ezért a sémának nem szabad függenie az eszköztípustól.</span><span class="sxs-lookup"><span data-stu-id="3400c-625">Remember that any number of devices might raise events, so the schema should not depend on the device type.</span></span> <span data-ttu-id="3400c-626">Emellett a különböző eszközök ugyanarra az alkalmazásra vonatkozó eseményeket hozhatnak létre, ezért az alkalmazásnak támogatnia kell a barangolást vagy a különböző eszközök közötti terjesztés valamilyen más formáját.</span><span class="sxs-lookup"><span data-stu-id="3400c-626">Additionally, various devices might raise events for the same application; the application might support roaming or some other form of cross-device distribution.</span></span>

<span data-ttu-id="3400c-627">A séma tartalmazhat tartományi mezőket is, amelyek a különböző alkalmazásokban közös forgatókönyvre jellemzők.</span><span class="sxs-lookup"><span data-stu-id="3400c-627">The schema might also include domain fields that are relevant to a particular scenario that's common across different applications.</span></span> <span data-ttu-id="3400c-628">A mezők tartalmazhatnak a kivételekkel, az alkalmazásindítási és -bezárási eseményekkel, valamint a webszolgáltatás API-hívásainak sikerével és/vagy sikertelenségével kapcsolatos információk.</span><span class="sxs-lookup"><span data-stu-id="3400c-628">This might be information about exceptions, application start and end events, and success and/or failure of web service API calls.</span></span> <span data-ttu-id="3400c-629">Az ugyanazon tartományi mezőket használó alkalmazások mindegyikének ugyanazokat az eseményeket kell kibocsátania, ami lehetővé teszi a közös jelentések és elemzések létrehozását.</span><span class="sxs-lookup"><span data-stu-id="3400c-629">All applications that use the same set of domain fields should emit the same set of events, enabling a set of common reports and analytics to be built.</span></span>

<span data-ttu-id="3400c-630">Végül a séma tartalmazhat egyéni mezőket is az alkalmazásspecifikus események adatainak a rögzítéséhez.</span><span class="sxs-lookup"><span data-stu-id="3400c-630">Finally, a schema might contain custom fields for capturing the details of application-specific events.</span></span>

### <a name="best-practices-for-instrumenting-applications"></a><span data-ttu-id="3400c-631">Ajánlott eljárások az alkalmazásokban zajló rendszerállapot-figyeléshez</span><span class="sxs-lookup"><span data-stu-id="3400c-631">Best practices for instrumenting applications</span></span>

<span data-ttu-id="3400c-632">Az alábbi lista a felhőben futó elosztott alkalmazás rendszerállapot-figyelésére vonatkozó ajánlott eljárásokat foglalja össze.</span><span class="sxs-lookup"><span data-stu-id="3400c-632">The following list summarizes best practices for instrumenting a distributed application running in the cloud.</span></span>

- <span data-ttu-id="3400c-633">A naplók legyenek könnyen olvashatók és elemezhetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-633">Make logs easy to read and easy to parse.</span></span> <span data-ttu-id="3400c-634">Alkalmazzon strukturált naplózást, ahol lehetséges.</span><span class="sxs-lookup"><span data-stu-id="3400c-634">Use structured logging where possible.</span></span> <span data-ttu-id="3400c-635">A naplóüzenetek legyenek tömörek és leíró jellegűek.</span><span class="sxs-lookup"><span data-stu-id="3400c-635">Be concise and descriptive in log messages.</span></span>

- <span data-ttu-id="3400c-636">Minden naplóban azonosítsa a forrást, és biztosítson környezeti és időadatokat az egyes bejegyzések írásakor.</span><span class="sxs-lookup"><span data-stu-id="3400c-636">In all logs, identify the source and provide context and timing information as each log record is written.</span></span>

- <span data-ttu-id="3400c-637">Használja ugyanazt az időzónát és formátumot minden időbélyeghez.</span><span class="sxs-lookup"><span data-stu-id="3400c-637">Use the same time zone and format for all time stamps.</span></span> <span data-ttu-id="3400c-638">Így könnyebben korrelálhatja az olyan műveletek eseményeit, amelyek különböző régiókban futó hardvereken és szolgáltatásokon futnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-638">This will help to correlate events for operations that span hardware and services running in different geographic regions.</span></span>

- <span data-ttu-id="3400c-639">Kategorizálja a naplókat, és írja az üzeneteket a megfelelő naplófájlba.</span><span class="sxs-lookup"><span data-stu-id="3400c-639">Categorize logs and write messages to the appropriate log file.</span></span>

- <span data-ttu-id="3400c-640">Ne tegye közzé a rendszerrel kapcsolatos bizalmas adatokat és a felhasználók személyes adatait.</span><span class="sxs-lookup"><span data-stu-id="3400c-640">Do not disclose sensitive information about the system or personal information about users.</span></span> <span data-ttu-id="3400c-641">A naplózás előtt tisztítsa meg az adatokat ezektől az információktól, azonban a releváns részleteket mindenképpen őrizze meg.</span><span class="sxs-lookup"><span data-stu-id="3400c-641">Scrub this information before it's logged, but ensure that the relevant details are retained.</span></span> <span data-ttu-id="3400c-642">Törölje például az azonosítót és a jelszót minden adatbázis-kapcsolati sztringből, a megmaradt információkat azonban írja a naplóba, így az elemzők megállapíthatják, hogy a rendszer a megfelelő adatbázist éri-e el.</span><span class="sxs-lookup"><span data-stu-id="3400c-642">For example, remove the ID and password from any database connection strings, but write the remaining information to the log so that an analyst can determine that the system is accessing the correct database.</span></span> <span data-ttu-id="3400c-643">Naplózza az összes kritikus kivételt, azonban tegye lehetővé a rendszergazda számára a naplózás be-/kikapcsolását az alacsonyabb szintű kivételek és figyelmeztetések esetén.</span><span class="sxs-lookup"><span data-stu-id="3400c-643">Log all critical exceptions, but enable the administrator to turn logging on and off for lower levels of exceptions and warnings.</span></span> <span data-ttu-id="3400c-644">Rögzítse és naplózza az újrapróbálkozási logikával kapcsolatos összes információt is.</span><span class="sxs-lookup"><span data-stu-id="3400c-644">Also, capture and log all retry logic information.</span></span> <span data-ttu-id="3400c-645">Ezek az adatok hasznosnak bizonyulhatnak a rendszer átmeneti állapotának a monitorozása során.</span><span class="sxs-lookup"><span data-stu-id="3400c-645">This data can be useful in monitoring the transient health of the system.</span></span>

- <span data-ttu-id="3400c-646">Kövesse a folyamatokon kívülre indított hívásokat, például a külső webszolgáltatásokra és adatbázisokra irányuló kéréseket.</span><span class="sxs-lookup"><span data-stu-id="3400c-646">Trace out of process calls, such as requests to external web services or databases.</span></span>

- <span data-ttu-id="3400c-647">Ne keverje a különböző biztonsági szintű naplóüzeneteket ugyanabban a naplófájlban.</span><span class="sxs-lookup"><span data-stu-id="3400c-647">Don't mix log messages with different security requirements in the same log file.</span></span> <span data-ttu-id="3400c-648">Ne írja például a hibakeresési és a naplózási információkat ugyanabba a naplófájlba.</span><span class="sxs-lookup"><span data-stu-id="3400c-648">For example, don't write debug and audit information to the same log.</span></span>

- <span data-ttu-id="3400c-649">A naplózási eseményeket kivéve, gondoskodjon róla, hogy az összes naplóhívás egyszeri művelet legyen, amely nem gátolja az üzleti tevékenységek végrehajtását.</span><span class="sxs-lookup"><span data-stu-id="3400c-649">With the exception of auditing events, make sure that all logging calls are fire-and-forget operations that do not block the progress of business operations.</span></span> <span data-ttu-id="3400c-650">A naplózási események azért kivételesek, mivel üzleti szempontból kulcsfontosságúak, és az üzleti tevékenységek alapvető részének tekinthetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-650">Auditing events are exceptional because they are critical to the business and can be classified as a fundamental part of business operations.</span></span>

- <span data-ttu-id="3400c-651">Gondoskodjon róla, hogy a naplózás bővíthető legyen, és ne függjön közvetlenül semmilyen konkrét céltól.</span><span class="sxs-lookup"><span data-stu-id="3400c-651">Make sure that logging is extensible and does not have any direct dependencies on a concrete target.</span></span> <span data-ttu-id="3400c-652">Például ahelyett, hogy a *System.Diagnostics.Trace* használatával írná az adatokat, definiáljon egy absztrakt felületet (például *ILogger*), amely naplózási metódusokat tesz elérhetővé, és amely bármilyen megfelelő módszerrel megvalósítható.</span><span class="sxs-lookup"><span data-stu-id="3400c-652">For example, rather than writing information by using *System.Diagnostics.Trace*, define an abstract interface (such as *ILogger*) that exposes logging methods and that can be implemented through any appropriate means.</span></span>

- <span data-ttu-id="3400c-653">Gondoskodjon róla, hogy a naplózás hibamentes legyen, és ne váltson ki sorozatosan egymásra épülő hibákat.</span><span class="sxs-lookup"><span data-stu-id="3400c-653">Make sure that all logging is fail-safe and never triggers any cascading errors.</span></span> <span data-ttu-id="3400c-654">A naplózásnak nem szabad kivételeket jelentenie.</span><span class="sxs-lookup"><span data-stu-id="3400c-654">Logging must not throw any exceptions.</span></span>

- <span data-ttu-id="3400c-655">A rendszerállapot-figyelést egy folyamatosan zajló, iteratív folyamatként kell kezelni, és a naplókat rendszeresen át kell tekinteni, nem csupán probléma esetén.</span><span class="sxs-lookup"><span data-stu-id="3400c-655">Treat instrumentation as an ongoing iterative process and review logs regularly, not just when there is a problem.</span></span>

## <a name="collecting-and-storing-data"></a><span data-ttu-id="3400c-656">Az adatok gyűjtése és tárolása</span><span class="sxs-lookup"><span data-stu-id="3400c-656">Collecting and storing data</span></span>

<span data-ttu-id="3400c-657">A monitorozási folyamat adatgyűjtési szakaszának feladata a rendszerállapot-figyelés során létrehozott információk lekérése, az adatok formázása az elemzési/diagnosztikai szakaszban történő könnyebb feldolgozás céljából, valamint az átalakított adatok mentése egy megbízható tárolóba.</span><span class="sxs-lookup"><span data-stu-id="3400c-657">The collection stage of the monitoring process is concerned with retrieving the information that instrumentation generates, formatting this data to make it easier for the analysis/diagnosis stage to consume, and saving the transformed data in reliable storage.</span></span> <span data-ttu-id="3400c-658">Az elosztott rendszerek különböző részeiből gyűjtött rendszerállapot-adatok különféle helyeken és különböző formátumokban tárolhatók.</span><span class="sxs-lookup"><span data-stu-id="3400c-658">The instrumentation data that you gather from different parts of a distributed system can be held in a variety of locations and with varying formats.</span></span> <span data-ttu-id="3400c-659">Az alkalmazás kódja például nyomkövetési naplófájlokat és az alkalmazáseseményekhez kapcsolódó naplóadatokat hozhat elő, míg az alkalmazás által használt infrastruktúra kritikus pontjait monitorozó teljesítményszámlálók más technológiákkal rögzíthetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-659">For example, your application code might generate trace log files and generate application event log data, whereas performance counters that monitor key aspects of the infrastructure that your application uses can be captured through other technologies.</span></span> <span data-ttu-id="3400c-660">Az alkalmazás által használt külső összetevők és szolgáltatások eltérő formátumokban biztosíthatják a rendszerállapot-adatokat külön profilelemzési fájlok, blobtárolók vagy akár egyéni adattárak használatával.</span><span class="sxs-lookup"><span data-stu-id="3400c-660">Any third-party components and services that your application uses might provide instrumentation information in different formats, by using separate trace files, blob storage, or even a custom data store.</span></span>

<span data-ttu-id="3400c-661">Az adatgyűjtés gyakran a rendszerállapot-adatokat létrehozó alkalmazástól függetlenül futtatható adatgyűjtési szolgáltatás használatával történik.</span><span class="sxs-lookup"><span data-stu-id="3400c-661">Data collection is often performed through a collection service that can run autonomously from the application that generates the instrumentation data.</span></span> <span data-ttu-id="3400c-662">A 2. ábrán erre az architektúrára látható egy példa, amely kiemeli a rendszerállapot-adatokat gyűjtő alrendszert.</span><span class="sxs-lookup"><span data-stu-id="3400c-662">Figure 2 illustrates an example of this architecture, highlighting the instrumentation data-collection subsystem.</span></span>

![Példa a rendszerállapot-adatok gyűjtésére](./images/monitoring/TelemetryService.png)

<span data-ttu-id="3400c-664">*2. ábra Rendszerállapot-adatok gyűjtésére.*</span><span class="sxs-lookup"><span data-stu-id="3400c-664">*Figure 2. Collecting instrumentation data.*</span></span>

<span data-ttu-id="3400c-665">Vegye figyelembe, hogy ez egy egyszerűsített ábra.</span><span class="sxs-lookup"><span data-stu-id="3400c-665">Note that this is a simplified view.</span></span> <span data-ttu-id="3400c-666">Az adatgyűjtési szolgáltatás nem feltétlenül egyetlen folyamat, és akár különböző gépeken futó több összetevőből is állhat, amint azt a következő szakaszok ismertetik.</span><span class="sxs-lookup"><span data-stu-id="3400c-666">The collection service is not necessarily a single process and might comprise many constituent parts running on different machines, as described in the following sections.</span></span> <span data-ttu-id="3400c-667">Továbbá, ha bizonyos telemetriaadatok elemzését gyorsan kell elvégezni (forró elemzés, a dokumentum későbbi, a [Forró, meleg és hideg elemzés támogatása](#supporting-hot-warm-and-cold-analysis) című szakaszban leírtak szerint), az adatgyűjtési szolgáltatáson kívül működő helyi összetevők azonnal elvégezhetik az elemzési feladatokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-667">Additionally, if the analysis of some telemetry data must be performed quickly (hot analysis, as described in the section [Supporting hot, warm, and cold analysis](#supporting-hot-warm-and-cold-analysis) later in this document), local components that operate outside the collection service might perform the analysis tasks immediately.</span></span> <span data-ttu-id="3400c-668">A 2. ábra ezt a helyzetet ábrázolja a kiválasztott eseményekre vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="3400c-668">Figure 2 depicts this situation for selected events.</span></span> <span data-ttu-id="3400c-669">Az elemzést követően az eredmények közvetlenül a megjelenítési és riasztási alrendszerbe küldhetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-669">After analytical processing, the results can be sent directly to the visualization and alerting subsystem.</span></span> <span data-ttu-id="3400c-670">A meleg vagy hideg elemzésnek alávetett adatokat a tároló tárolja, amíg feldolgozásra várnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-670">Data that's subjected to warm or cold analysis is held in storage while it awaits processing.</span></span>

<span data-ttu-id="3400c-671">Az Azure-alkalmazások és -szolgáltatások esetében az Azure Diagnostics egyetlen lehetséges megoldást kínál az adatok rögzítésére.</span><span class="sxs-lookup"><span data-stu-id="3400c-671">For Azure applications and services, Azure Diagnostics provides one possible solution for capturing data.</span></span> <span data-ttu-id="3400c-672">Az Azure Diagnostics az egyes számítási csomópontok alábbi forrásaiból gyűjti az adatokat, majd összesíti azokat, és feltölti az Azure Storage-ba:</span><span class="sxs-lookup"><span data-stu-id="3400c-672">Azure Diagnostics gathers data from the following sources for each compute node, aggregates it, and then uploads it to Azure Storage:</span></span>

- <span data-ttu-id="3400c-673">IIS-naplók</span><span class="sxs-lookup"><span data-stu-id="3400c-673">IIS logs</span></span>
- <span data-ttu-id="3400c-674">sikertelen kéréseket tartalmazó IIS-naplók,</span><span class="sxs-lookup"><span data-stu-id="3400c-674">IIS Failed Request logs</span></span>
- <span data-ttu-id="3400c-675">Windows-eseménynaplók,</span><span class="sxs-lookup"><span data-stu-id="3400c-675">Windows event logs</span></span>
- <span data-ttu-id="3400c-676">Teljesítményszámlálók</span><span class="sxs-lookup"><span data-stu-id="3400c-676">Performance counters</span></span>
- <span data-ttu-id="3400c-677">összeomlási memóriaképek,</span><span class="sxs-lookup"><span data-stu-id="3400c-677">Crash dumps</span></span>
- <span data-ttu-id="3400c-678">Azure Diagnostics-infrastruktúranaplók,</span><span class="sxs-lookup"><span data-stu-id="3400c-678">Azure Diagnostics infrastructure logs</span></span>  
- <span data-ttu-id="3400c-679">egyéni hibanaplók,</span><span class="sxs-lookup"><span data-stu-id="3400c-679">Custom error logs</span></span>
- <span data-ttu-id="3400c-680">.NET EventSource,</span><span class="sxs-lookup"><span data-stu-id="3400c-680">.NET EventSource</span></span>
- <span data-ttu-id="3400c-681">jegyzékalapú ETW.</span><span class="sxs-lookup"><span data-stu-id="3400c-681">Manifest-based ETW</span></span>

<span data-ttu-id="3400c-682">További információkért tekintse meg a cikket [Azure: Telemetria alapjai és hibaelhárítása](https://social.technet.microsoft.com/wiki/contents/articles/18146.windows-azure-telemetry-basics-and-troubleshooting.aspx).</span><span class="sxs-lookup"><span data-stu-id="3400c-682">For more information, see the article [Azure: Telemetry Basics and Troubleshooting](https://social.technet.microsoft.com/wiki/contents/articles/18146.windows-azure-telemetry-basics-and-troubleshooting.aspx).</span></span>

### <a name="strategies-for-collecting-instrumentation-data"></a><span data-ttu-id="3400c-683">A rendszerállapot-adatok gyűjtésére vonatkozó stratégiák</span><span class="sxs-lookup"><span data-stu-id="3400c-683">Strategies for collecting instrumentation data</span></span>

<span data-ttu-id="3400c-684">Figyelembe véve a felhő rugalmas jellegét, és elkerülendő, hogy a telemetriaadatokat manuálisan kelljen lekérni a rendszer minden egyes csomópontjáról, gondoskodjon arról, hogy a rendszer egy központi helyre továbbítsa és ott konszolidálja az adatokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-684">Considering the elastic nature of the cloud, and to avoid the necessity of manually retrieving telemetry data from every node in the system, you should arrange for the data to be transferred to a central location and consolidated.</span></span> <span data-ttu-id="3400c-685">A több adatközpontra is kiterjedő rendszerek esetén először hasznos lehet régiónként gyűjteni, konszolidálni és tárolni az adatokat, majd ezeket a regionális adatokat egyetlen központi rendszerbe összesíteni.</span><span class="sxs-lookup"><span data-stu-id="3400c-685">In a system that spans multiple datacenters, it might be useful to first collect, consolidate, and store data on a region-by-region basis, and then aggregate the regional data into a single central system.</span></span>

<span data-ttu-id="3400c-686">A sávszélesség-használat optimalizálása érdekében a kevésbé sürgős adatokat tömbökben, kötegekként is továbbíthatja.</span><span class="sxs-lookup"><span data-stu-id="3400c-686">To optimize the use of bandwidth, you can elect to transfer less urgent data in chunks, as batches.</span></span> <span data-ttu-id="3400c-687">Az adatokat azonban nem szabad a végtelenségig késleltetni, különösen ha időérzékeny információkat tartalmaznak.</span><span class="sxs-lookup"><span data-stu-id="3400c-687">However, the data must not be delayed indefinitely, especially if it contains time-sensitive information.</span></span>

#### <a name="pulling-and-pushing-instrumentation-data"></a><span data-ttu-id="3400c-688">*A rendszerállapot-adatok lekérése és leküldése*</span><span class="sxs-lookup"><span data-stu-id="3400c-688">*Pulling and pushing instrumentation data*</span></span>

<span data-ttu-id="3400c-689">A rendszerállapot-adatokat gyűjtő alrendszer aktívan lekérheti a rendszerállapot-adatokat a különféle naplókból és egyéb forrásokból az alkalmazás egyes példányaira vonatkozóan (*lekéréses modell*).</span><span class="sxs-lookup"><span data-stu-id="3400c-689">The instrumentation data-collection subsystem can actively retrieve instrumentation data from the various logs and other sources for each instance of the application (the *pull model*).</span></span> <span data-ttu-id="3400c-690">Az alrendszer működhet passzív fogadóként is, amely azt várja, hogy az alkalmazás egyes példányait alkotó összetevők elküldjék az adatokat (*leküldéses modell*).</span><span class="sxs-lookup"><span data-stu-id="3400c-690">Or, it can act as a passive receiver that waits for the data to be sent from the components that constitute each instance of the application (the *push model*).</span></span>

<span data-ttu-id="3400c-691">A lekéréses modell megvalósításának egyik módszere az alkalmazás egyes példányaival helyileg futó monitorozási ügynökök használata.</span><span class="sxs-lookup"><span data-stu-id="3400c-691">One approach to implementing the pull model is to use monitoring agents that run locally with each instance of the application.</span></span> <span data-ttu-id="3400c-692">A monitorozási ügynök egy külön folyamat, amely rendszeres időközönként beolvassa (lekéri) a helyi csomóponton gyűjtött telemetria-adatokat, és ezeket az információkat közvetlenül az alkalmazás összes példánya által közösen használt központi tárolóba írja.</span><span class="sxs-lookup"><span data-stu-id="3400c-692">A monitoring agent is a separate process that periodically retrieves (pulls) telemetry data collected at the local node and writes this information directly to centralized storage that all instances of the application share.</span></span> <span data-ttu-id="3400c-693">Az Azure Diagnostics ezt a mechanizmust valósítja meg.</span><span class="sxs-lookup"><span data-stu-id="3400c-693">This is the mechanism that Azure Diagnostics implements.</span></span> <span data-ttu-id="3400c-694">Az Azure webes vagy feldolgozói szerepköreinek minden példánya konfigurálható a helyben tárolt diagnosztikai és egyéb nyomkövetési adatok gyűjtésére.</span><span class="sxs-lookup"><span data-stu-id="3400c-694">Each instance of an Azure web or worker role can be configured to capture diagnostic and other trace information that's stored locally.</span></span> <span data-ttu-id="3400c-695">Az egyes példányok mellett futó monitorozási ügynökök átmásolják a meghatározott adatokat az Azure Storage-ba.</span><span class="sxs-lookup"><span data-stu-id="3400c-695">The monitoring agent that runs alongside each instance copies the specified data to Azure Storage.</span></span> <span data-ttu-id="3400c-696">A folyamattal kapcsolatban [a diagnosztikának az Azure Cloud Services és a Virtual Machines szolgáltatásban való engedélyezésével](/azure/cloud-services/cloud-services-dotnet-diagnostics) foglalkozó cikk biztosít további információt.</span><span class="sxs-lookup"><span data-stu-id="3400c-696">The article [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](/azure/cloud-services/cloud-services-dotnet-diagnostics) provides more details on this process.</span></span> <span data-ttu-id="3400c-697">Bizonyos elemek, például az IIS-naplók, az összeomlási memóriaképek és az egyéni hibanaplók írása blobtárolókba történik.</span><span class="sxs-lookup"><span data-stu-id="3400c-697">Some elements, such as IIS logs, crash dumps, and custom error logs, are written to blob storage.</span></span> <span data-ttu-id="3400c-698">A Windows-eseménynaplók, ETW-események és a teljesítményszámlálók adatait pedig táblatárolók rögzítik.</span><span class="sxs-lookup"><span data-stu-id="3400c-698">Data from the Windows event log, ETW events, and performance counters is recorded in table storage.</span></span> <span data-ttu-id="3400c-699">A 3. ábra ezt a mechanizmust ábrázolja.</span><span class="sxs-lookup"><span data-stu-id="3400c-699">Figure 3 illustrates this mechanism.</span></span>

![Az információk monitorozási ügynök használatával való lekérését és megosztott tárolóba való írását bemutató ábra.](./images/monitoring/PullModel.png)

<span data-ttu-id="3400c-701">*3. ábra Monitorozási ügynök használatával kérje le az adatokat, és megosztott tárolóba való írását.*</span><span class="sxs-lookup"><span data-stu-id="3400c-701">*Figure 3. Using a monitoring agent to pull information and write to shared storage.*</span></span>

> [!NOTE]
> <span data-ttu-id="3400c-702">A monitorozási ügynökök ideális megoldást jelentenek az adatforrásokból magától értetődően lekért rendszerállapot-adatok rögzítéséhez.</span><span class="sxs-lookup"><span data-stu-id="3400c-702">Using a monitoring agent is ideally suited to capturing instrumentation data that's naturally pulled from a data source.</span></span> <span data-ttu-id="3400c-703">Ilyen adatok például az SQL Server dinamikus felügyeleti nézeteiből származó adatok vagy az Azure Service Bus-üzenetsor hossza.</span><span class="sxs-lookup"><span data-stu-id="3400c-703">An example is information from SQL Server Dynamic Management Views or the length of an Azure Service Bus queue.</span></span>

<span data-ttu-id="3400c-704">Az imént ismertetett megközelítés az egy helyen, korlátozott számú csomóponton futó, kisléptékű alkalmazás telemetriaadatainak tárolására is alkalmazható.</span><span class="sxs-lookup"><span data-stu-id="3400c-704">It's feasible to use the approach just described to store telemetry data for a small-scale application running on a limited number of nodes in a single location.</span></span> <span data-ttu-id="3400c-705">Az összetett, nagy mértékben skálázható, globális, felhőalkalmazások azonban hatalmas mennyiségű adatot állíthatnak elő több száz webes és feldolgozói szerepkörből, adatbázis-szilánkból és egyéb szolgáltatásból.</span><span class="sxs-lookup"><span data-stu-id="3400c-705">However, a complex, highly scalable, global cloud application might generate huge volumes of data from hundreds of web and worker roles, database shards, and other services.</span></span> <span data-ttu-id="3400c-706">Az adatok ilyen mértékű áramlása könnyen túlterhelheti az egyetlen központi helyen rendelkezésre álló I/O-sávszélességet.</span><span class="sxs-lookup"><span data-stu-id="3400c-706">This flood of data can easily overwhelm the I/O bandwidth available with a single, central location.</span></span> <span data-ttu-id="3400c-707">A telemetriamegoldásnak ezért skálázhatónak kell lennie, nehogy szűk keresztmetszetet jelentsen a rendszer növekedése során.</span><span class="sxs-lookup"><span data-stu-id="3400c-707">Therefore, your telemetry solution must be scalable to prevent it from acting as a bottleneck as the system expands.</span></span> <span data-ttu-id="3400c-708">Ideális esetben a megoldásnak bizonyos fokú redundanciát is biztosítania kell, így csökkenthető a fontos monitorozási adatok (például a naplózási vagy számlázási adatok) elvesztésének kockázata a rendszer valamelyik részének meghibásodása esetén.</span><span class="sxs-lookup"><span data-stu-id="3400c-708">Ideally, your solution should incorporate a degree of redundancy to reduce the risks of losing important monitoring information (such as auditing or billing data) if part of the system fails.</span></span>

<span data-ttu-id="3400c-709">Ezen problémák megoldására megvalósítható a sorkezelés, amint az a 4. ábrán látható.</span><span class="sxs-lookup"><span data-stu-id="3400c-709">To address these issues, you can implement queuing, as shown in Figure 4.</span></span> <span data-ttu-id="3400c-710">Ebben az architektúrában a helyi monitorozási ügynök (ha megfelelően konfigurálható) vagy egy egyéni adatgyűjtési szolgáltatás (ha nem) az adatokat közzé teszi egy üzenetsorban.</span><span class="sxs-lookup"><span data-stu-id="3400c-710">In this architecture, the local monitoring agent (if it can be configured appropriately) or custom data-collection service (if not) posts data to a queue.</span></span> <span data-ttu-id="3400c-711">Egy aszinkron módon futó másik folyamat (a 4. ábrán bemutatott tárolóírási szolgáltatás) fogja az üzenetsorban lévő adatokat, és a megosztott tárolóba írja azokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-711">A separate process running asynchronously (the storage writing service in Figure 4) takes the data in this queue and writes it to shared storage.</span></span> <span data-ttu-id="3400c-712">Az üzenetsorok megfelelő megoldást kínálnak az ilyen forgatókönyvekben, mivel a „legalább egyszeri” szemantikájuk révén biztosítják, hogy az üzenetsorba küldött adatok nem vesznek el a közzétételük után.</span><span class="sxs-lookup"><span data-stu-id="3400c-712">A message queue is suitable for this scenario because it provides "at least once" semantics that help ensure that queued data will not be lost after it's posted.</span></span> <span data-ttu-id="3400c-713">A tárolóírási szolgáltatás egy külön feldolgozói szerepkör használatával valósítható meg.</span><span class="sxs-lookup"><span data-stu-id="3400c-713">You can implement the storage writing service by using a separate worker role.</span></span>

![A rendszerállapot-adatok üzenetsorral való pufferelésének ábrája.](./images/monitoring/BufferedQueue.png)

<span data-ttu-id="3400c-715">*4. ábra Rendszerállapot-adatok pufferelése üzenetsorral.*</span><span class="sxs-lookup"><span data-stu-id="3400c-715">*Figure 4. Using a queue to buffer instrumentation data.*</span></span>

<span data-ttu-id="3400c-716">A helyi adatgyűjtési szolgáltatás közvetlenül a fogadásuk után hozzáadhatja az adatokat az üzenetsorhoz.</span><span class="sxs-lookup"><span data-stu-id="3400c-716">The local data-collection service can add data to a queue immediately after it's received.</span></span> <span data-ttu-id="3400c-717">Az üzenetsor pufferként szolgál, és így a tárolóírási szolgáltatás a saját tempójában kérheti le és írhatja az adatokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-717">The queue acts as a buffer, and the storage writing service can retrieve and write the data at its own pace.</span></span> <span data-ttu-id="3400c-718">Alapértelmezés szerint az üzenetsorok érkezési sorrend alapján működnek.</span><span class="sxs-lookup"><span data-stu-id="3400c-718">By default, a queue operates on a first-in, first-out basis.</span></span> <span data-ttu-id="3400c-719">Az üzenetek azonban rangsorolhatók is, így a gyorsan kezelendő adatokat tartalmazó üzenetek gyorsabban haladhatnak végig az üzenetsoron.</span><span class="sxs-lookup"><span data-stu-id="3400c-719">But you can prioritize messages to accelerate them through the queue if they contain data that must be handled more quickly.</span></span> <span data-ttu-id="3400c-720">További információkért lásd: a [elsőbbségi üzenetsor mintája](../patterns/priority-queue.md).</span><span class="sxs-lookup"><span data-stu-id="3400c-720">For more information, see the [Priority Queue pattern](../patterns/priority-queue.md).</span></span> <span data-ttu-id="3400c-721">Használhat más csatornákat (például Service Bus-témaköröket) is az adatok más célhelyekre való irányítására a szükséges elemzési módszertől függően.</span><span class="sxs-lookup"><span data-stu-id="3400c-721">Alternatively, you can use different channels (such as Service Bus topics) to direct data to different destinations depending on the form of analytical processing that's required.</span></span>

<span data-ttu-id="3400c-722">A skálázhatóság érdekében a tárolóírási szolgáltatás több példányát is futtathatja.</span><span class="sxs-lookup"><span data-stu-id="3400c-722">For scalability, you can run multiple instances of the storage writing service.</span></span> <span data-ttu-id="3400c-723">Nagy mennyiségű esemény esetén az adatokat egy eseményközpont segítségével irányíthatja különböző számítási erőforrásokhoz feldolgozásra és tárolásra.</span><span class="sxs-lookup"><span data-stu-id="3400c-723">If there is a high volume of events, you can use an event hub to dispatch the data to different compute resources for processing and storage.</span></span>

#### <a name="consolidating-instrumentation-data"></a><span data-ttu-id="3400c-724">*Rendszerállapot-adatok konszolidálása*</span><span class="sxs-lookup"><span data-stu-id="3400c-724">*Consolidating instrumentation data*</span></span>

<span data-ttu-id="3400c-725">Az adatgyűjtési szolgáltatás által az egyes alkalmazáspéldányokról lekért rendszerállapot-adatok alapján az adott példány állapotára és teljesítményére vonatkozó helyi nézet hozható létre.</span><span class="sxs-lookup"><span data-stu-id="3400c-725">The instrumentation data that the data-collection service retrieves from a single instance of an application gives a localized view of the health and performance of that instance.</span></span> <span data-ttu-id="3400c-726">A rendszer általános állapotának értékeléséhez az ilyen helyi nézetekben található adatok bizonyos szempontjait konszolidálni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-726">To assess the overall health of the system, it's necessary to consolidate some aspects of the data in the local views.</span></span> <span data-ttu-id="3400c-727">Ez az adatok tárolása után tehető meg, bizonyos esetekben azonban már az adatgyűjtés során is megvalósítható.</span><span class="sxs-lookup"><span data-stu-id="3400c-727">You can perform this after the data has been stored, but in some cases, you can also achieve it as the data is collected.</span></span> <span data-ttu-id="3400c-728">A megosztott tárolóba való közvetlen írás helyett a rendszerállapot-adatok áthaladhatnak egy külön adatkonszolidálási szolgáltatáson, amely egyesíti az adatokat, és egyfajta szűrő- és tisztítófolyamatként is működik.</span><span class="sxs-lookup"><span data-stu-id="3400c-728">Rather than being written directly to shared storage, the instrumentation data can pass through a separate data consolidation service that combines data and acts as a filter and cleanup process.</span></span> <span data-ttu-id="3400c-729">Az azonos korrelációs adatokat (például tevékenységazonosítót) tartalmazó rendszerállapot-adatok például egybeolvaszthatók.</span><span class="sxs-lookup"><span data-stu-id="3400c-729">For example, instrumentation data that includes the same correlation information such as an activity ID can be amalgamated.</span></span> <span data-ttu-id="3400c-730">(Előfordulhat, hogy a felhasználó egy adott csomóponton elindít valamilyen üzleti műveletet, majd a csomópont meghibásodása esetén vagy terheléselosztási beállítások miatt a rendszer a műveletet áthelyezi egy másik csomópontra.) Ez a folyamat képes továbbá észlelni és eltávolítani a duplikált adatokat (ezeknek mindig fennáll az esélye, ha a telemetriaszolgáltatás üzenetsorok használatával küldi el a rendszerállapot-adatokat a tárolóba).</span><span class="sxs-lookup"><span data-stu-id="3400c-730">(It's possible that a user starts performing a business operation on one node and then gets transferred to another node in the event of node failure, or depending on how load balancing is configured.) This process can also detect and remove any duplicated data (always a possibility if the telemetry service uses message queues to push instrumentation data out to storage).</span></span> <span data-ttu-id="3400c-731">Az 5. ábra erre a struktúrára mutat be egy példát.</span><span class="sxs-lookup"><span data-stu-id="3400c-731">Figure 5 illustrates an example of this structure.</span></span>

![Példa szolgáltatás használatára a rendszerállapot-adatok konszolidálásához.](./images/monitoring/Consolidation.png)

<span data-ttu-id="3400c-733">*5. ábra Egy különálló szolgáltatás konszolidálására és tisztítására rendszerállapot-adatok használata.*</span><span class="sxs-lookup"><span data-stu-id="3400c-733">*Figure 5. Using a separate service to consolidate and clean up instrumentation data.*</span></span>

### <a name="storing-instrumentation-data"></a><span data-ttu-id="3400c-734">Rendszerállapot-adatok tárolása</span><span class="sxs-lookup"><span data-stu-id="3400c-734">Storing instrumentation data</span></span>

<span data-ttu-id="3400c-735">Az előző fejtegetések meglehetősen egyszerű képet festettek a rendszerállapot-adatok tárolásának módjáról.</span><span class="sxs-lookup"><span data-stu-id="3400c-735">The previous discussions have depicted a rather simplistic view of the way in which instrumentation data is stored.</span></span> <span data-ttu-id="3400c-736">A valóságban azonban célszerű lehet a különböző típusú adatokat olyan technológiák használatával tárolni, amelyek a leginkább megfelelők az egyes típusok vélhető felhasználási módjának.</span><span class="sxs-lookup"><span data-stu-id="3400c-736">In reality, it can make sense to store the different types of information by using technologies that are most appropriate to the way in which each type is likely to be used.</span></span>

<span data-ttu-id="3400c-737">Például az Azure Blob Storage és Table Storage az elérésük szempontjából valamelyest hasonlóak.</span><span class="sxs-lookup"><span data-stu-id="3400c-737">For example, Azure blob and table storage have some similarities in the way in which they're accessed.</span></span> <span data-ttu-id="3400c-738">A használatukkal végrehajtható műveletek szempontjából azonban bizonyos korlátokkal rendelkeznek, és a bennük tárolt adatok részletessége is igen különböző.</span><span class="sxs-lookup"><span data-stu-id="3400c-738">But they have limitations in the operations that you can perform by using them, and the granularity of the data that they hold is quite different.</span></span> <span data-ttu-id="3400c-739">Ha további elemzési műveleteket kell végrehajtania, vagy teljes szöveges keresési képességekre van szüksége az adatok vonatkozásában, jobb megoldás lehet a különféle lekérdezés- és adathozzáférés-típusokra optimalizált képességeket biztosító adattárakat használni.</span><span class="sxs-lookup"><span data-stu-id="3400c-739">If you need to perform more analytical operations or require full-text search capabilities on the data, it might be more appropriate to use data storage that provides capabilities that are optimized for specific types of queries and data access.</span></span> <span data-ttu-id="3400c-740">Példa:</span><span class="sxs-lookup"><span data-stu-id="3400c-740">For example:</span></span>

- <span data-ttu-id="3400c-741">A teljesítményszámlálók adatainak SQL-adatbázisban való tárolása lehetővé teszi az ad hoc elemzést.</span><span class="sxs-lookup"><span data-stu-id="3400c-741">Performance counter data can be stored in a SQL database to enable ad hoc analysis.</span></span>
- <span data-ttu-id="3400c-742">A nyomkövetési naplókat érdemesebb lehet az Azure Cosmos DB-ben tárolni.</span><span class="sxs-lookup"><span data-stu-id="3400c-742">Trace logs might be better stored in Azure Cosmos DB.</span></span>
- <span data-ttu-id="3400c-743">A biztonsággal kapcsolatos információk a HDFS-be írhatók.</span><span class="sxs-lookup"><span data-stu-id="3400c-743">Security information can be written to HDFS.</span></span>
- <span data-ttu-id="3400c-744">A teljes szöveges keresést igénylő információk az Elasticsearch használatával tárolhatók (ami a gazdag indexelésnek köszönhetően növelheti a keresések sebességét).</span><span class="sxs-lookup"><span data-stu-id="3400c-744">Information that requires full-text search can be stored through Elasticsearch (which can also speed searches by using rich indexing).</span></span>

<span data-ttu-id="3400c-745">Megvalósíthat egy további szolgáltatást is, amely rendszeres időközönként lekéri az adatokat a megosztott tárolóból, a céljuknak megfelelően particionálja és szűri azokat, majd a megfelelő adattárakba írja őket, amint az a 6. ábrán látható.</span><span class="sxs-lookup"><span data-stu-id="3400c-745">You can implement an additional service that periodically retrieves the data from shared storage, partitions and filters the data according to its purpose, and then writes it to an appropriate set of data stores as shown in Figure 6.</span></span> <span data-ttu-id="3400c-746">Egy másik megközelítés ezen funkció belefoglalása a konszolidálási és tisztítási folyamatba, és az adatoknak közvetlenül ezen tárolókba, nem pedig egy közbenső megosztott tárterületre való írása a lekérésüket követően.</span><span class="sxs-lookup"><span data-stu-id="3400c-746">An alternative approach is to include this functionality in the consolidation and cleanup process and write the data directly to these stores as it's retrieved rather than saving it in an intermediate shared storage area.</span></span> <span data-ttu-id="3400c-747">Mindegyik megközelítésnek vannak előnyei és hátrányai.</span><span class="sxs-lookup"><span data-stu-id="3400c-747">Each approach has its advantages and disadvantages.</span></span> <span data-ttu-id="3400c-748">Egy külön particionálási szolgáltatás megvalósítása csökkenti a konszolidálási és tisztítási szolgáltatás terhelését, és lehetővé teszi, hogy szükség esetén legalább a particionált adatok egy részét újra létre lehessen hozni (attól függően, hogy mekkora a megosztott tárolóban megőrzött adatok mennyisége).</span><span class="sxs-lookup"><span data-stu-id="3400c-748">Implementing a separate partitioning service lessens the load on the consolidation and cleanup service, and it enables at least some of the partitioned data to be regenerated if necessary (depending on how much data is retained in shared storage).</span></span> <span data-ttu-id="3400c-749">Ez azonban további erőforrásokat használ fel.</span><span class="sxs-lookup"><span data-stu-id="3400c-749">However, it consumes additional resources.</span></span> <span data-ttu-id="3400c-750">Emellett elképzelhető, hogy a rendszerállapot-adatok később érkeznek meg az egyes alkalmazáspéldányokról, és később történik a gyakorlatban használható információkká való átalakításuk.</span><span class="sxs-lookup"><span data-stu-id="3400c-750">Also, there might be a delay between the receipt of instrumentation data from each application instance and the conversion of this data into actionable information.</span></span>

![Az adatok particionálása és tárolása](./images/monitoring/DataStorage.png)

<span data-ttu-id="3400c-752">*6. ábra Particionálási adatok igény szerinti elemzési és tárolási követelményeinek.*</span><span class="sxs-lookup"><span data-stu-id="3400c-752">*Figure 6. Partitioning data according to analytical and storage requirements.*</span></span>

<span data-ttu-id="3400c-753">Ugyanazok a rendszerállapot-adatok több célból is szükségesek lehetnek.</span><span class="sxs-lookup"><span data-stu-id="3400c-753">The same instrumentation data might be required for more than one purpose.</span></span> <span data-ttu-id="3400c-754">A teljesítményszámlálók segítségével például megjeleníthető az idő múlásával tapasztalható rendszerteljesítmény előzménynézete.</span><span class="sxs-lookup"><span data-stu-id="3400c-754">For example, performance counters can be used to provide a historical view of system performance over time.</span></span> <span data-ttu-id="3400c-755">Ezeket az információkat más használati adatokkal egyesítve létrehozhatók az ügyfélre vonatkozó számlázási információk.</span><span class="sxs-lookup"><span data-stu-id="3400c-755">This information might be combined with other usage data to generate customer billing information.</span></span> <span data-ttu-id="3400c-756">Ilyen esetekben ugyanazokat az adatokat esetleg több célhelyre is továbbítani kell, például a számlázási információk hosszú távú tárolására szolgáló dokumentum-adatbázisba, és a komplex teljesítményelemzés kezelését lehetővé tevő többdimenziós tárolóba.</span><span class="sxs-lookup"><span data-stu-id="3400c-756">In these situations, the same data might be sent to more than one destination, such as a document database that can act as a long-term store for holding billing information, and a multidimensional store for handling complex performance analytics.</span></span>

<span data-ttu-id="3400c-757">Azt is figyelembe kell venni, hogy mennyire sürgősen van szükség az adatokra.</span><span class="sxs-lookup"><span data-stu-id="3400c-757">You should also consider how urgently the data is required.</span></span> <span data-ttu-id="3400c-758">A riasztásokhoz szükséges információkat biztosító adatokat gyorsan kell elérni, ezért egy gyors adattárban, indexelve vagy strukturálva kell tárolni őket a riasztási rendszer által végrehajtott lekérdezések optimalizálásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-758">Data that provides information for alerting must be accessed quickly, so it should be held in fast data storage and indexed or structured to optimize the queries that the alerting system performs.</span></span> <span data-ttu-id="3400c-759">Egyes esetekben szükséges lehet, hogy az egyes csomópontokon az adatokat gyűjtő telemetriaszolgáltatás az adatokat helyben formázza és mentse, hogy a riasztási rendszer helyi példánya gyorsan értesíthesse a felhasználókat a problémákról.</span><span class="sxs-lookup"><span data-stu-id="3400c-759">In some cases, it might be necessary for the telemetry service that gathers the data on each node to format and save data locally so that a local instance of the alerting system can quickly notify you of any issues.</span></span> <span data-ttu-id="3400c-760">Ugyanezek az adatok elirányíthatók az előző ábrákon látható tárolóírási szolgáltatásnak, és központilag tárolhatók, ha más célokból is szükség lenne rájuk.</span><span class="sxs-lookup"><span data-stu-id="3400c-760">The same data can be dispatched to the storage writing service shown in the previous diagrams and stored centrally if it's also required for other purposes.</span></span>

<span data-ttu-id="3400c-761">Az alaposabb elemzéshez, a jelentéskészítéshez és az előzménytrendek észleléséhez használt információk kevésbé sürgősek, és olyan módon tárolhatók, amely támogatja az adatbányászatot és az ad hoc lekérdezéseket.</span><span class="sxs-lookup"><span data-stu-id="3400c-761">Information that's used for more considered analysis, for reporting, and for spotting historical trends is less urgent and can be stored in a manner that supports data mining and ad hoc queries.</span></span> <span data-ttu-id="3400c-762">További információért tekintse meg a [Forró, meleg és hideg elemzés támogatása](#supporting-hot-warm-and-cold-analysis) című szakaszt a dokumentum későbbi részében.</span><span class="sxs-lookup"><span data-stu-id="3400c-762">For more information, see the section [Supporting hot, warm, and cold analysis](#supporting-hot-warm-and-cold-analysis) later in this document.</span></span>

#### <a name="log-rotation-and-data-retention"></a><span data-ttu-id="3400c-763">*Naplóváltás és adatmegőrzés*</span><span class="sxs-lookup"><span data-stu-id="3400c-763">*Log rotation and data retention*</span></span>

<span data-ttu-id="3400c-764">A rendszerállapot-figyelés jelentős mennyiségű adatot hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="3400c-764">Instrumentation can generate considerable volumes of data.</span></span> <span data-ttu-id="3400c-765">Ezek az adatok több helyen tárolhatók, az egyes csomópontokon rögzített nyers naplófájloktól, profilelemzési fájloktól és egyéb információktól a megosztott tárolóban található konszolidált, megtisztított és particionált nézetekig.</span><span class="sxs-lookup"><span data-stu-id="3400c-765">This data can be held in several places, starting with the raw log files, trace files, and other information captured at each node to the consolidated, cleaned, and partitioned view of this data held in shared storage.</span></span> <span data-ttu-id="3400c-766">Néhány esetben az eredeti nyers forrásadatok eltávolíthatók a csomópontokról az adatok feldolgozását és továbbítását követően.</span><span class="sxs-lookup"><span data-stu-id="3400c-766">In some cases, after the data has been processed and transferred, the original raw source data can be removed from each node.</span></span> <span data-ttu-id="3400c-767">Más esetekben azonban szükséges vagy egyszerűen csak hasznos lehet menteni a nyers adatokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-767">In other cases, it might be necessary or simply useful to save the raw information.</span></span> <span data-ttu-id="3400c-768">A hibakeresési célból létrehozott adatokat például jobb lehet nyers formájukban meghagyni, azonban a hibák javítását követően gyorsan elvethetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-768">For example, data that's generated for debugging purposes might be best left available in its raw form but can then be discarded quickly after any bugs have been rectified.</span></span>

<span data-ttu-id="3400c-769">A teljesítményadatok általában hosszabb életűek, mivel így felhasználhatók a teljesítménytrendek észlelésére és a kapacitástervezéshez.</span><span class="sxs-lookup"><span data-stu-id="3400c-769">Performance data often has a longer life so that it can be used for spotting performance trends and for capacity planning.</span></span> <span data-ttu-id="3400c-770">Az ilyen adatok konszolidált nézeteit szokás a gyorsabb elérés érdekében határozott ideig online megőrizni.</span><span class="sxs-lookup"><span data-stu-id="3400c-770">The consolidated view of this data is usually kept online for a finite period to enable fast access.</span></span> <span data-ttu-id="3400c-771">Ezt követően archiválhatók vagy elvethetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-771">After that, it can be archived or discarded.</span></span> <span data-ttu-id="3400c-772">A mérési és számlázási célból gyűjtött adatokat néha határozatlan ideig meg kell őrizni.</span><span class="sxs-lookup"><span data-stu-id="3400c-772">Data gathered for metering and billing customers might need to be saved indefinitely.</span></span> <span data-ttu-id="3400c-773">Emellett szabályozási követelmények is előírhatják, hogy a naplózási és biztonsági célból gyűjtött információkat archiválni és menteni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-773">Additionally, regulatory requirements might dictate that information collected for auditing and security purposes also needs to be archived and saved.</span></span> <span data-ttu-id="3400c-774">Ezek az adatok bizalmasak is, és emiatt előfordulhat, hogy titkosítani vagy más módon védeni kell azokat az illetéktelen hozzáférés ellen.</span><span class="sxs-lookup"><span data-stu-id="3400c-774">This data is also sensitive and might need to be encrypted or otherwise protected to prevent tampering.</span></span> <span data-ttu-id="3400c-775">A felhasználók jelszavait és a személyazonossági csalások elkövetéséhez felhasználható egyéb adatait soha nem szabad rögzíteni.</span><span class="sxs-lookup"><span data-stu-id="3400c-775">You should never record users' passwords or other information that might be used to commit identity fraud.</span></span> <span data-ttu-id="3400c-776">Ezeket az információkat el kell távolítani az adatokból a mentésük előtt.</span><span class="sxs-lookup"><span data-stu-id="3400c-776">Such details should be scrubbed from the data before it's stored.</span></span>

#### <a name="down-sampling"></a><span data-ttu-id="3400c-777">*A mintavételezés sebességének csökkentése*</span><span class="sxs-lookup"><span data-stu-id="3400c-777">*Down-sampling*</span></span>

<span data-ttu-id="3400c-778">Az előzményadatokat célszerű menteni a hosszú távú trendek felismerése érdekében.</span><span class="sxs-lookup"><span data-stu-id="3400c-778">It's useful to store historical data so you can spot long-term trends.</span></span> <span data-ttu-id="3400c-779">A régi adatok egészének való mentése helyett azonban csökkenthető az adatok mintavételezésének sebessége az adatok felbontásának és a tárolási költségeknek a csökkentéséhez.</span><span class="sxs-lookup"><span data-stu-id="3400c-779">Rather than saving old data in its entirety, it might be possible to down-sample the data to reduce its resolution and save storage costs.</span></span> <span data-ttu-id="3400c-780">A percenkénti teljesítménymutatók mentése helyett konszolidálhatja az egy hónapnál régebbi adatokat egy órára lebontott nézet létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-780">As an example, rather than saving minute-by-minute performance indicators, you can consolidate data that's more than a month old to form an hour-by-hour view.</span></span>

### <a name="best-practices-for-collecting-and-storing-logging-information"></a><span data-ttu-id="3400c-781">Ajánlott eljárások a naplózási információk gyűjtéséhez és tárolásához</span><span class="sxs-lookup"><span data-stu-id="3400c-781">Best practices for collecting and storing logging information</span></span>

<span data-ttu-id="3400c-782">Az alábbi lista a naplózási információk gyűjtésére és tárolására vonatkozó ajánlott eljárásokat foglalja össze:</span><span class="sxs-lookup"><span data-stu-id="3400c-782">The following list summarizes best practices for capturing and storing logging information:</span></span>

- <span data-ttu-id="3400c-783">A monitorozási ügynököt vagy az adatgyűjtési szolgáltatást futtassa folyamaton kívüli szolgáltatásként, és legyenek egyszerűen üzembe helyezhetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-783">The monitoring agent or data-collection service should run as an out-of-process service and should be simple to deploy.</span></span>

- <span data-ttu-id="3400c-784">A monitorozási ügynök vagy az adatgyűjtési szolgáltatás minden kimenetének géptől, operációs rendszertől és hálózati protokolltól független semleges formátummal kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="3400c-784">All output from the monitoring agent or data-collection service should be an agnostic format that's independent of the machine, operating system, or network protocol.</span></span> <span data-ttu-id="3400c-785">Az ETL/ETW helyett például az adatok kibocsáthatók egy önleíró formátumban, amilyen a JSON, a MessagePack vagy a Protobuf.</span><span class="sxs-lookup"><span data-stu-id="3400c-785">For example, emit information in a self-describing format such as JSON, MessagePack, or Protobuf rather than ETL/ETW.</span></span> <span data-ttu-id="3400c-786">A szabványos formátumok használata lehető teszi a rendszer számára feldolgozási folyamatok létrehozását. Az adatokat az egyeztetett formátumban olvasó, átalakító és küldő összetevők könnyen integrálhatók.</span><span class="sxs-lookup"><span data-stu-id="3400c-786">Using a standard format enables the system to construct processing pipelines; components that read, transform, and send data in the agreed format can be easily integrated.</span></span>

- <span data-ttu-id="3400c-787">A monitorozási és adatgyűjtési folyamatnak hibamentesnek kell lennie, és nem válthat ki sorozatosan egymásra épülő hibákat.</span><span class="sxs-lookup"><span data-stu-id="3400c-787">The monitoring and data-collection process must be fail-safe and must not trigger any cascading error conditions.</span></span>

- <span data-ttu-id="3400c-788">Az információk adatfogadóba való küldésének átmeneti hibája esetén a monitorozási ügynöknek vagy az adatgyűjtési szolgáltatásnak készen kell állni a telemetriaadatok újrarendezésére, hogy a legújabb információk küldése történjen meg először.</span><span class="sxs-lookup"><span data-stu-id="3400c-788">In the event of a transient failure in sending information to a data sink, the monitoring agent or data-collection service should be prepared to reorder telemetry data so that the newest information is sent first.</span></span> <span data-ttu-id="3400c-789">(A monitorozási ügynök/adatgyűjtési szolgáltatás saját belátása szerint dönthet úgy, hogy a régebbi adatokat elveti, vagy helyben menti, és később továbbítja pótlólag.)</span><span class="sxs-lookup"><span data-stu-id="3400c-789">(The monitoring agent/data-collection service might elect to drop the older data, or save it locally and transmit it later to catch up, at its own discretion.)</span></span>

## <a name="analyzing-data-and-diagnosing-issues"></a><span data-ttu-id="3400c-790">Az adatok elemzése és a problémák diagnosztizálása</span><span class="sxs-lookup"><span data-stu-id="3400c-790">Analyzing data and diagnosing issues</span></span>

<span data-ttu-id="3400c-791">A monitorozási és diagnosztikai folyamat fontos részét képezi a gyűjtött adatok elemzése a rendszer átfogó állapotát mutató kép létrehozása érdekében.</span><span class="sxs-lookup"><span data-stu-id="3400c-791">An important part of the monitoring and diagnostics process is analyzing the gathered data to obtain a picture of the overall well-being of the system.</span></span> <span data-ttu-id="3400c-792">Már meg kellett határoznia a KPI-ket és a teljesítmény mérőszámait, és fontos megértenie, hogy a gyűjtött adatokat hogyan strukturálhatja az elemzési igényeknek megfelelően.</span><span class="sxs-lookup"><span data-stu-id="3400c-792">You should have defined your own KPIs and performance metrics, and it's important to understand how you can structure the data that has been gathered to meet your analysis requirements.</span></span> <span data-ttu-id="3400c-793">Fontos továbbá azt is megértenie, hogy a különböző mérőszámokban és naplófájlokban rögzített adatok korrelálása hogyan történik, mivel ezek az információk kulcsszerepet játszhatnak az események sorozatának nyomon követésében, és segíthetnek diagnosztizálni a felmerülő problémákat.</span><span class="sxs-lookup"><span data-stu-id="3400c-793">It's also important to understand how the data that's captured in different metrics and log files is correlated, because this information can be key to tracking a sequence of events and help diagnose problems that arise.</span></span>

<span data-ttu-id="3400c-794">A [Rendszerállapot-adatok konszolidálása](#consolidating-instrumentation-data) szakaszban leírtak szerint a rendszer egyes részeire vonatkozó adatok rögzítése helyben történik, azonban általában egyesíteni kell azokat a rendszer részét képező egyéb helyeken keletkező adatokkal.</span><span class="sxs-lookup"><span data-stu-id="3400c-794">As described in the section [Consolidating instrumentation data](#consolidating-instrumentation-data), the data for each part of the system is typically captured locally, but it generally needs to be combined with data generated at other sites that participate in the system.</span></span> <span data-ttu-id="3400c-795">Az ilyen információk esetén a korrelálást gondosan kell végezni, hogy az adatok egyesítése pontos legyen.</span><span class="sxs-lookup"><span data-stu-id="3400c-795">This information requires careful correlation to ensure that data is combined accurately.</span></span> <span data-ttu-id="3400c-796">Egy adott művelethez kapcsolódó használati adatok például magukban foglalhatnak egy olyan webhelyet futtató csomópontot, amelyhez a felhasználó csatlakozott, a művelet keretében elért önálló szolgáltatást futtató másik csomópontot, valamint egy harmadik csomóponton található adattárat.</span><span class="sxs-lookup"><span data-stu-id="3400c-796">For example, the usage data for an operation might span a node that hosts a website to which a user connects, a node that runs a separate service accessed as part of this operation, and data storage held on another node.</span></span> <span data-ttu-id="3400c-797">Ezeket az információkat össze kell kötni, hogy átfogó képet adjanak a művelet erőforrás- és feldolgozásikapacitás-használatáról.</span><span class="sxs-lookup"><span data-stu-id="3400c-797">This information needs to be tied together to provide an overall view of the resource and processing usage for the operation.</span></span> <span data-ttu-id="3400c-798">Az adatok bizonyos mértékű előzetes feldolgozása és szűrése már az adatokat rögzítő csomóponton megtörténhet, az összesítés és formázás azonban nagyobb valószínűséggel a központi csomóponton megy végbe.</span><span class="sxs-lookup"><span data-stu-id="3400c-798">Some pre-processing and filtering of data might occur on the node on which the data is captured, whereas aggregation and formatting are more likely to occur on a central node.</span></span>

### <a name="supporting-hot-warm-and-cold-analysis"></a><span data-ttu-id="3400c-799">Forró, meleg és hideg elemzés támogatása</span><span class="sxs-lookup"><span data-stu-id="3400c-799">Supporting hot, warm, and cold analysis</span></span>

<span data-ttu-id="3400c-800">Az adatok megjelenítési, jelentéskészítési és riasztási célú elemzése és újraformázása összetett folyamat lehet, amely saját erőforrásokat használ.</span><span class="sxs-lookup"><span data-stu-id="3400c-800">Analyzing and reformatting data for visualization, reporting, and alerting purposes can be a complex process that consumes its own set of resources.</span></span> <span data-ttu-id="3400c-801">A monitorozás egyes formái esetében az időtényező kritikus fontosságú, és az adatok azonnali elemzését igénylik.</span><span class="sxs-lookup"><span data-stu-id="3400c-801">Some forms of monitoring are time-critical and require immediate analysis of data to be effective.</span></span> <span data-ttu-id="3400c-802">Ez a *forró elemzés*.</span><span class="sxs-lookup"><span data-stu-id="3400c-802">This is known as *hot analysis*.</span></span> <span data-ttu-id="3400c-803">Példák erre a riasztásokhoz és a biztonsági monitorozás egyes szempontjaihoz (például a rendszer elleni támadás észlelése) szükséges elemzések.</span><span class="sxs-lookup"><span data-stu-id="3400c-803">Examples include the analyses that are required for alerting and some aspects of security monitoring (such as detecting an attack on the system).</span></span> <span data-ttu-id="3400c-804">Az ilyen célokból szükséges adatoknak gyorsan elérhetőnek és strukturáltnak kell lenniük a hatékony feldolgozás érdekében.</span><span class="sxs-lookup"><span data-stu-id="3400c-804">Data that's required for these purposes must be quickly available and structured for efficient processing.</span></span> <span data-ttu-id="3400c-805">Bizonyos esetekben szükség lehet az elemzések feldolgozását az adatokat tároló csomópontokra áthelyezni.</span><span class="sxs-lookup"><span data-stu-id="3400c-805">In some cases, it might be necessary to move the analysis processing to the individual nodes where the data is held.</span></span>

<span data-ttu-id="3400c-806">Más elemzési formák esetében az időtényező kevésbé fontos, és bizonyos számításokra és összesítésre lehet szükség a nyers adatok fogadását követően.</span><span class="sxs-lookup"><span data-stu-id="3400c-806">Other forms of analysis are less time-critical and might require some computation and aggregation after the raw data has been received.</span></span> <span data-ttu-id="3400c-807">Ezt nevezzük *meleg elemzésnek*.</span><span class="sxs-lookup"><span data-stu-id="3400c-807">This is called *warm analysis*.</span></span> <span data-ttu-id="3400c-808">A teljesítményelemzés gyakran ebbe a kategóriába esik.</span><span class="sxs-lookup"><span data-stu-id="3400c-808">Performance analysis often falls into this category.</span></span> <span data-ttu-id="3400c-809">Ebben az esetben egyetlen, elszigetelt teljesítményesemény statisztikailag valószínűleg semmilyen jelentőséggel nem bír.</span><span class="sxs-lookup"><span data-stu-id="3400c-809">In this case, an isolated, single performance event is unlikely to be statistically significant.</span></span> <span data-ttu-id="3400c-810">(Okozhatta egy hirtelen megugrás vagy valamilyen hiba.) Az események sorozataiból származó adatok megbízhatóbb képet adnak a rendszer teljesítményéről.</span><span class="sxs-lookup"><span data-stu-id="3400c-810">(It might be caused by a sudden spike or glitch.) The data from a series of events should provide a more reliable picture of system performance.</span></span>

<span data-ttu-id="3400c-811">A meleg elemzés segítséget nyújthat az állapotproblémák diagnosztizálásához is.</span><span class="sxs-lookup"><span data-stu-id="3400c-811">Warm analysis can also be used to help diagnose health issues.</span></span> <span data-ttu-id="3400c-812">Az állapotesemények feldolgozása általában forró elemzéssel történik, és az esemény azonnal létrehoznak riasztást.</span><span class="sxs-lookup"><span data-stu-id="3400c-812">A health event is typically processed through hot analysis and can raise an alert immediately.</span></span> <span data-ttu-id="3400c-813">Az operátornak képesnek kell lennie elemezni az állapotesemény okait a meleg folyamatból származó adatok vizsgálatával.</span><span class="sxs-lookup"><span data-stu-id="3400c-813">An operator should be able to drill into the reasons for the health event by examining the data from the warm path.</span></span> <span data-ttu-id="3400c-814">Ezeknek az adatoknak az állapoteseményt okozó problémához vezető eseményekkel kapcsolatos információkat kell tartalmazniuk.</span><span class="sxs-lookup"><span data-stu-id="3400c-814">This data should contain information about the events leading up to the issue that caused the health event.</span></span>

<span data-ttu-id="3400c-815">A monitorozás bizonyos típusai hosszabb távú adatokat állítanak elő.</span><span class="sxs-lookup"><span data-stu-id="3400c-815">Some types of monitoring generate more long-term data.</span></span> <span data-ttu-id="3400c-816">Ez az elemzés egy későbbi időpontban is végrehajtható, akár egy előre meghatározott ütemezés szerint is.</span><span class="sxs-lookup"><span data-stu-id="3400c-816">This analysis can be performed at a later date, possibly according to a predefined schedule.</span></span> <span data-ttu-id="3400c-817">Bizonyos esetekben az elemzés során hosszabb időn keresztül rögzített, nagy mennyiségű adat összetett szűrését kell végrehajtani.</span><span class="sxs-lookup"><span data-stu-id="3400c-817">In some cases, the analysis might need to perform complex filtering of large volumes of data captured over a period of time.</span></span> <span data-ttu-id="3400c-818">Ezt nevezzük *hideg elemzésnek*.</span><span class="sxs-lookup"><span data-stu-id="3400c-818">This is called *cold analysis*.</span></span> <span data-ttu-id="3400c-819">A legfontosabb követelmény, hogy az adatok biztonságos helyen legyenek tárolva a rögzítést követően.</span><span class="sxs-lookup"><span data-stu-id="3400c-819">The key requirement is that the data is stored safely after it has been captured.</span></span> <span data-ttu-id="3400c-820">A használat monitorozásához és a naplózáshoz a rendszer állapotáról rendszeres időközönként készült pontos képekre van szükség, azonban az ilyen állapotadatoknak nem kell azonnal rendelkezésre állniuk feldolgozásra az adatgyűjtést követően.</span><span class="sxs-lookup"><span data-stu-id="3400c-820">For example, usage monitoring and auditing require an accurate picture of the state of the system at regular points in time, but this state information does not have to be available for processing immediately after it has been gathered.</span></span>

<span data-ttu-id="3400c-821">Az operátor hideg elemzéssel is biztosíthatja az adatokat a prediktív állapotelemzéshez.</span><span class="sxs-lookup"><span data-stu-id="3400c-821">An operator can also use cold analysis to provide the data for predictive health analysis.</span></span> <span data-ttu-id="3400c-822">Az operátor az aktuális állapotadatokat (ezek a forró elemzési folyamatból származnak) egy megadott időszakban gyűjtött előzményadatokkal kiegészítve derítheti fel azokat a trendeket, amelyek hamarosan állapotproblémákat okozhatnak.</span><span class="sxs-lookup"><span data-stu-id="3400c-822">The operator can gather historical information over a specified period and use it in conjunction with the current health data (retrieved from the hot path) to spot trends that might soon cause health issues.</span></span> <span data-ttu-id="3400c-823">Ezekben az esetekben riasztás létrehozása lehet szükséges, hogy korrekciós műveleteket lehessen végrehajtani.</span><span class="sxs-lookup"><span data-stu-id="3400c-823">In these cases, it might be necessary to raise an alert so that corrective action can be taken.</span></span>

### <a name="correlating-data"></a><span data-ttu-id="3400c-824">Az adatok korrelálása</span><span class="sxs-lookup"><span data-stu-id="3400c-824">Correlating data</span></span>

<span data-ttu-id="3400c-825">A rendszerállapot-figyelés által rögzített adatok pillanatképet biztosíthatnak a rendszer állapotáról, az elemzés célja azonban az, hogy ezek az adatok hasznosíthatók legyenek a gyakorlatban.</span><span class="sxs-lookup"><span data-stu-id="3400c-825">The data that instrumentation captures can provide a snapshot of the system state, but the purpose of analysis is to make this data actionable.</span></span> <span data-ttu-id="3400c-826">Példa:</span><span class="sxs-lookup"><span data-stu-id="3400c-826">For example:</span></span>

- <span data-ttu-id="3400c-827">Mi okozta az intenzív, rendszerszintű I/O-terhelést egy adott időpontban?</span><span class="sxs-lookup"><span data-stu-id="3400c-827">What has caused an intense I/O loading at the system level at a specific time?</span></span>
- <span data-ttu-id="3400c-828">Nagyszámú adatbázis-művelet miatt volt?</span><span class="sxs-lookup"><span data-stu-id="3400c-828">Is it the result of a large number of database operations?</span></span>
- <span data-ttu-id="3400c-829">Kimutathatók a hatásai az adatbázis válaszidejében, a tranzakciók másodpercenkénti számában, valamint az alkalmazás válaszidejében ugyanezen a csomóponton?</span><span class="sxs-lookup"><span data-stu-id="3400c-829">Is this reflected in the database response times, the number of transactions per second, and application response times at the same juncture?</span></span>

<span data-ttu-id="3400c-830">Ha igen, a terhelést csökkentő javítóintézkedés lehet az adatok szétosztása több kiszolgálóra.</span><span class="sxs-lookup"><span data-stu-id="3400c-830">If so, one remedial action that might reduce the load might be to shard the data over more servers.</span></span> <span data-ttu-id="3400c-831">Ezenkívül kivételek jöhetnek létre a rendszer valamelyik szintjén fellépő hiba eredményeként.</span><span class="sxs-lookup"><span data-stu-id="3400c-831">In addition, exceptions can arise as a result of a fault in any level of the system.</span></span> <span data-ttu-id="3400c-832">Egy adott szinten felmerülő kivétel gyakran egy újabb hibát vált ki az eggyel magasabb szinten.</span><span class="sxs-lookup"><span data-stu-id="3400c-832">An exception in one level often triggers another fault in the level above.</span></span>

<span data-ttu-id="3400c-833">Ebből kifolyólag az egyes szintek különböző típusú monitorozási adatait tudnia kell korrelálni a rendszer és az azon futó alkalmazások állapotát mutató átfogó kép létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-833">For these reasons, you need to be able to correlate the different types of monitoring data at each level to produce an overall view of the state of the system and the applications that are running on it.</span></span> <span data-ttu-id="3400c-834">Ezután ezen információk segítségével eldöntheti, hogy a rendszer megfelelően működik-e vagy sem, és meghatározhatja a szükséges intézkedéseket a rendszer minőségének a javítására.</span><span class="sxs-lookup"><span data-stu-id="3400c-834">You can then use this information to make decisions about whether the system is functioning acceptably or not, and determine what can be done to improve the quality of the system.</span></span>

<span data-ttu-id="3400c-835">Az [Információk az adatok korrelálásához](#information-for-correlating-data) című szakaszban leírtak szerint gondoskodjon arról, hogy a nyers rendszerállapot-adatok elegendő környezeti és tevékenységazonosító-információkat tartalmazzanak az események korrelálásához szükséges összesítések támogatásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-835">As described in the section [Information for correlating data](#information-for-correlating-data), you must ensure that the raw instrumentation data includes sufficient context and activity ID information to support the required aggregations for correlating events.</span></span> <span data-ttu-id="3400c-836">Az adatok tárolása emellett különböző formátumokban történhet, ezért szükség lehet az elemzésükre, így szabványos formátumba konvertálhatók elemzéshez.</span><span class="sxs-lookup"><span data-stu-id="3400c-836">Additionally, this data might be held in different formats, and it might be necessary to parse this information to convert it into a standardized format for analysis.</span></span>

### <a name="troubleshooting-and-diagnosing-issues"></a><span data-ttu-id="3400c-837">Hibaelhárítás és a problémák diagnosztizálása</span><span class="sxs-lookup"><span data-stu-id="3400c-837">Troubleshooting and diagnosing issues</span></span>

<span data-ttu-id="3400c-838">A diagnosztika elvégzéséhez meg kell tudni állapítani a hibák vagy a váratlan működés okait, például a kiváltó okok elemzésével.</span><span class="sxs-lookup"><span data-stu-id="3400c-838">Diagnosis requires the ability to determine the cause of faults or unexpected behavior, including performing root cause analysis.</span></span> <span data-ttu-id="3400c-839">Az ehhez szükséges információk általában az alábbiak:</span><span class="sxs-lookup"><span data-stu-id="3400c-839">The information that's required typically includes:</span></span>

- <span data-ttu-id="3400c-840">Az eseménynaplókból és nyomkövetési adatokból származó részletes információk a rendszer egészére vagy egy adott alrendszerre vonatkozóan egy adott időszakból.</span><span class="sxs-lookup"><span data-stu-id="3400c-840">Detailed information from event logs and traces, either for the entire system or for a specified subsystem during a specified time window.</span></span>
- <span data-ttu-id="3400c-841">A rendszerben vagy egy adott alrendszerben egy adott időszak során fellépő bármilyen adott szintű kivételek vagy hibák eredményeként keletkezett teljes hívásláncok.</span><span class="sxs-lookup"><span data-stu-id="3400c-841">Complete stack traces resulting from exceptions and faults of any specified level that occur within the system or a specified subsystem during a specified period.</span></span>
- <span data-ttu-id="3400c-842">A rendszerben bárhol vagy egy adott alrendszerben egy adott időszak során meghiúsult folyamatok összeomlási memóriaképei.</span><span class="sxs-lookup"><span data-stu-id="3400c-842">Crash dumps for any failed processes either anywhere in the system or for a specified subsystem during a specified time window.</span></span>
- <span data-ttu-id="3400c-843">Az összes felhasználó vagy a kiválasztott felhasználók által egy adott időszakban végrehajtott műveleteket rögzítő tevékenységnaplók.</span><span class="sxs-lookup"><span data-stu-id="3400c-843">Activity logs recording the operations that are performed either by all users or for selected users during a specified period.</span></span>

<span data-ttu-id="3400c-844">Az adatok hibakeresési célú elemzéséhez gyakran a rendszer-architektúra és a megoldást alkotó különféle összetevők részletes műszaki ismerete szükséges.</span><span class="sxs-lookup"><span data-stu-id="3400c-844">Analyzing data for troubleshooting purposes often requires a deep technical understanding of the system architecture and the various components that compose the solution.</span></span> <span data-ttu-id="3400c-845">Ennek következtében az adatok értelmezéséhez, a hibák okainak megállapításához és a megfelelő javítási stratégia ajánlásához gyakran jelentős manuális beavatkozásra van szükség.</span><span class="sxs-lookup"><span data-stu-id="3400c-845">As a result, a large degree of manual intervention is often required to interpret the data, establish the cause of problems, and recommend an appropriate strategy to correct them.</span></span> <span data-ttu-id="3400c-846">Ezért célszerű lehet ezekről az információkról csupán egy másolatot tárolni az eredeti formátumban, és azt egy szakértőnek hideg elemzésre átadni.</span><span class="sxs-lookup"><span data-stu-id="3400c-846">It might be appropriate simply to store a copy of this information in its original format and make it available for cold analysis by an expert.</span></span>

## <a name="visualizing-data-and-raising-alerts"></a><span data-ttu-id="3400c-847">Adatok megjelenítése és riasztások létrehozása</span><span class="sxs-lookup"><span data-stu-id="3400c-847">Visualizing data and raising alerts</span></span>

<span data-ttu-id="3400c-848">Minden monitorozási rendszer fontos eleme az adatok olyan formában való megjelenítése, amelynek révén az operátor gyorsan észreveheti a trendeket vagy a problémákat.</span><span class="sxs-lookup"><span data-stu-id="3400c-848">An important aspect of any monitoring system is the ability to present the data in such a way that an operator can quickly spot any trends or problems.</span></span> <span data-ttu-id="3400c-849">Emellett fontos az is, hogy az operátort gyorsan értesíteni lehessen, ha valami olyan jelentős esemény következik be, amely figyelmet igényelhet.</span><span class="sxs-lookup"><span data-stu-id="3400c-849">Also important is the ability to quickly inform an operator if a significant event has occurred that might require attention.</span></span>

<span data-ttu-id="3400c-850">Az adatok megjelenítése különféle formákat ölthet, beleértve az irányítópultokon való megjelenítést, a riasztásokat és a jelentéseket.</span><span class="sxs-lookup"><span data-stu-id="3400c-850">Data presentation can take several forms, including visualization by using dashboards, alerting, and reporting.</span></span>

### <a name="visualization-by-using-dashboards"></a><span data-ttu-id="3400c-851">Megjelenítés irányítópultok használatával</span><span class="sxs-lookup"><span data-stu-id="3400c-851">Visualization by using dashboards</span></span>

<span data-ttu-id="3400c-852">Az adatok megjelenítésének leggyakoribb módja az irányítópultok használata, amelyek diagramokkal, grafikonokkal vagy egyéb ábrákkal jelenítik meg az információkat.</span><span class="sxs-lookup"><span data-stu-id="3400c-852">The most common way to visualize data is to use dashboards that can display information as a series of charts, graphs, or some other illustration.</span></span> <span data-ttu-id="3400c-853">Ezek az elemek paraméterekkel rendelkeznek, és az elemzőknek minden helyzethez ki kell tudniuk választani a fontos paramétereket (például az időszakot).</span><span class="sxs-lookup"><span data-stu-id="3400c-853">These items can be parameterized, and an analyst should be able to select the important parameters (such as the time period) for any specific situation.</span></span>

<span data-ttu-id="3400c-854">Az irányítópultok hierarchikusan rendezhetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-854">Dashboards can be organized hierarchically.</span></span> <span data-ttu-id="3400c-855">A legfelső szintű irányítópultok átfogó képet adhatnak a rendszer egyes funkcióiról, azonban lehetővé teszik az operátor számára az adatok részletes elemzését.</span><span class="sxs-lookup"><span data-stu-id="3400c-855">Top-level dashboards can give an overall view of each aspect of the system but enable an operator to drill down to the details.</span></span> <span data-ttu-id="3400c-856">A rendszer lemezeinek átfogó I/O-teljesítményét ábrázoló irányítópulton például az elemzőnek meg kell tudnia tekinteni az egyes lemezek I/O-teljesítményét is, így megállapíthatja, hogy a nem egyenletes forgalomért egy vagy több eszköz-e a felelős.</span><span class="sxs-lookup"><span data-stu-id="3400c-856">For example, a dashboard that depicts the overall disk I/O for the system should allow an analyst to view the I/O rates for each individual disk to ascertain whether one or more specific devices account for a disproportionate volume of traffic.</span></span> <span data-ttu-id="3400c-857">Ideális esetben az irányítópulton kapcsolódó információk is megjelennek, például az I/O-forgalmat létrehozó kérések forrása (a felhasználó vagy a tevékenység).</span><span class="sxs-lookup"><span data-stu-id="3400c-857">Ideally, the dashboard should also display related information, such as the source of each request (the user or activity) that's generating this I/O.</span></span> <span data-ttu-id="3400c-858">Ezeknek az információknak a használatával meghatározható, hogy a terhelést egyenletesebben kell-e elosztani az eszközök között (és hogy miként), valamint hogy a rendszer jobban teljesítene-e az eszközök számának növelése esetén.</span><span class="sxs-lookup"><span data-stu-id="3400c-858">This information can then be used to determine whether (and how) to spread the load more evenly across devices, and whether the system would perform better if more devices were added.</span></span>

<span data-ttu-id="3400c-859">Az irányítópultokon színkódolás vagy valamilyen más vizuális jelölésrendszer is alkalmazható a rendellenes vagy a várt tartományon kívül eső értékek jelzésére.</span><span class="sxs-lookup"><span data-stu-id="3400c-859">A dashboard might also use color-coding or some other visual cues to indicate values that appear anomalous or that are outside an expected range.</span></span> <span data-ttu-id="3400c-860">Az előző példával élve:</span><span class="sxs-lookup"><span data-stu-id="3400c-860">Using the previous example:</span></span>

- <span data-ttu-id="3400c-861">A hosszabb időn keresztül a maximális kapacitáshoz közeli I/O-sebességgel üzemelő lemezek (forró lemez) vörös színnel jelölhetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-861">A disk with an I/O rate that's approaching its maximum capacity over an extended period (a hot disk) can be highlighted in red.</span></span>
- <span data-ttu-id="3400c-862">Az időnként rövid ideig a maximális kapacitásnak megfelelő I/O-sebességgel üzemelő lemezek (meleg lemez) sárga színnel jelölhetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-862">A disk with an I/O rate that periodically runs at its maximum limit over short periods (a warm disk) can be highlighted in yellow.</span></span>
- <span data-ttu-id="3400c-863">A normál használatot mutató lemezek zöld színnel jelölhetők.</span><span class="sxs-lookup"><span data-stu-id="3400c-863">A disk that's exhibiting normal usage can be displayed in green.</span></span>

<span data-ttu-id="3400c-864">Ahhoz, hogy egy irányítópult-rendszer hatékonyan működjön, rendelkeznie kell a feldolgozható nyers adatokkal.</span><span class="sxs-lookup"><span data-stu-id="3400c-864">Note that for a dashboard system to work effectively, it must have the raw data to work with.</span></span> <span data-ttu-id="3400c-865">Ha saját irányítópult-rendszert hoz létre, vagy egy másik vállalat által fejlesztett irányítópultot használ, tisztában kell lennie azzal, hogy milyen rendszerállapot-adatokat kell gyűjtenie, milyen részletességi szinten, és hogyan kell formázni azokat, hogy az irányítópult fel tudja használni őket.</span><span class="sxs-lookup"><span data-stu-id="3400c-865">If you are building your own dashboard system, or using a dashboard developed by another organization, you must understand which instrumentation data you need to collect, at what levels of granularity, and how it should be formatted for the dashboard to consume.</span></span>

<span data-ttu-id="3400c-866">Egy jó irányítópult nem csupán megjeleníti az információkat, hanem azt is lehetővé teszi, hogy az elemző ad hoc kérdéseket tegyen fel az információkkal kapcsolatban.</span><span class="sxs-lookup"><span data-stu-id="3400c-866">A good dashboard does not only display information, it also enables an analyst to pose ad hoc questions about that information.</span></span> <span data-ttu-id="3400c-867">Egyes rendszerek felügyeleti eszközöket is biztosítanak, amelyek használatával az operátor végrehajthatja ezeket a műveleteket, és áttekintheti a mögöttes adatokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-867">Some systems provide management tools that an operator can use to perform these tasks and explore the underlying data.</span></span> <span data-ttu-id="3400c-868">Az információk tárolásához használt adattártól függően az is előfordulhat, hogy az adatok közvetlenül is lekérdezhetők, vagy további elemzés és jelentéskészítés céljával olyan eszközökbe importálhatók, mint a Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="3400c-868">Alternatively, depending on the repository that's used to hold this information, it might be possible to query this data directly, or import it into tools such as Microsoft Excel for further analysis and reporting.</span></span>

> [!NOTE]
> <span data-ttu-id="3400c-869">Az irányítópultokhoz való hozzáférést érdemes az arra jogosult személyekre korlátozni, mivel az információk üzleti szempontból bizalmasak lehetnek.</span><span class="sxs-lookup"><span data-stu-id="3400c-869">You should restrict access to dashboards to authorized personnel, because this information might be commercially sensitive.</span></span> <span data-ttu-id="3400c-870">Érdemes továbbá az irányítópultok alapjául szolgáló adatokat védeni, hogy a felhasználók ne módosíthassák azokat.</span><span class="sxs-lookup"><span data-stu-id="3400c-870">You should also protect the underlying data for dashboards to prevent users from changing it.</span></span>

### <a name="raising-alerts"></a><span data-ttu-id="3400c-871">Riasztások létrehozása</span><span class="sxs-lookup"><span data-stu-id="3400c-871">Raising alerts</span></span>

<span data-ttu-id="3400c-872">A riasztás a monitorozási és rendszerállapot-adatok elemzésének, és jelentős esemény észlelése esetén értesítések létrehozásának a folyamata.</span><span class="sxs-lookup"><span data-stu-id="3400c-872">Alerting is the process of analyzing the monitoring and instrumentation data and generating a notification if a significant event is detected.</span></span>

<span data-ttu-id="3400c-873">A riasztás hozzájárul a rendszer megfelelő állapotának, válaszkészségének és biztonságának a fenntartásához.</span><span class="sxs-lookup"><span data-stu-id="3400c-873">Alerting helps ensure that the system remains healthy, responsive, and secure.</span></span> <span data-ttu-id="3400c-874">Fontos része minden olyan rendszernek, amely teljesítmény-, rendelkezésreállási és adatvédelmi garanciákat vállal a felhasználók felé, akiknek az adatok alapján azonnal cselekedni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-874">It's an important part of any system that makes performance, availability, and privacy guarantees to the users where the data might need to be acted on immediately.</span></span> <span data-ttu-id="3400c-875">Előfordulhat, hogy az operátort értesíteni kell a riasztást kiváltó eseményről.</span><span class="sxs-lookup"><span data-stu-id="3400c-875">An operator might need to be notified of the event that triggered the alert.</span></span> <span data-ttu-id="3400c-876">A riasztási használható az olyan rendszerfunkciók indítására is, mint az automatikus skálázás.</span><span class="sxs-lookup"><span data-stu-id="3400c-876">Alerting can also be used to invoke system functions such as autoscaling.</span></span>

<span data-ttu-id="3400c-877">A riasztási általában az alábbi rendszerállapot-adatoktól függ:</span><span class="sxs-lookup"><span data-stu-id="3400c-877">Alerting usually depends on the following instrumentation data:</span></span>

- <span data-ttu-id="3400c-878">**Biztonsági események**.</span><span class="sxs-lookup"><span data-stu-id="3400c-878">**Security events**.</span></span> <span data-ttu-id="3400c-879">Ha az eseménynaplók azt jelzik, hogy ismételt hitelesítési és/vagy jogosultsági hibák lépnek fel, elképzelhető, hogy a rendszer támadás alatt áll, és az operátort tájékoztatni kell.</span><span class="sxs-lookup"><span data-stu-id="3400c-879">If the event logs indicate that repeated authentication and/or authorization failures are occurring, the system might be under attack and an operator should be informed.</span></span>
- <span data-ttu-id="3400c-880">**Teljesítmény-mérőszámok**.</span><span class="sxs-lookup"><span data-stu-id="3400c-880">**Performance metrics**.</span></span> <span data-ttu-id="3400c-881">A rendszernek gyorsan kell reagálnia, ha egy adott teljesítmény-mérőszám meghalad egy megadott küszöbértéket.</span><span class="sxs-lookup"><span data-stu-id="3400c-881">The system must quickly respond if a particular performance metric exceeds a specified threshold.</span></span>
- <span data-ttu-id="3400c-882">**Rendelkezésre állási adatait**.</span><span class="sxs-lookup"><span data-stu-id="3400c-882">**Availability information**.</span></span> <span data-ttu-id="3400c-883">Hiba észlelése esetén szüksége lehet egy vagy több alrendszer gyors újraindítására, vagy egy másodlagos erőforrásra való feladatátvételre.</span><span class="sxs-lookup"><span data-stu-id="3400c-883">If a fault is detected, it might be necessary to quickly restart one or more subsystems, or fail over to a backup resource.</span></span> <span data-ttu-id="3400c-884">Amennyiben egyes alrendszerekben ismétlődő hibák tapasztalhatók, ez komolyabb problémákra utalhat.</span><span class="sxs-lookup"><span data-stu-id="3400c-884">Repeated faults in a subsystem might indicate more serious concerns.</span></span>

<span data-ttu-id="3400c-885">Az operátorok számos különféle csatornán keresztül kaphatják meg a riasztásokat, például e-mailben, személyhívón vagy SMS-üzenetben.</span><span class="sxs-lookup"><span data-stu-id="3400c-885">Operators might receive alert information by using many delivery channels such as email, a pager device, or an SMS text message.</span></span> <span data-ttu-id="3400c-886">A riasztások tartalmazhatnak a helyzet súlyosságára utaló adatokat is.</span><span class="sxs-lookup"><span data-stu-id="3400c-886">An alert might also include an indication of how critical a situation is.</span></span> <span data-ttu-id="3400c-887">Számos riasztási rendszer támogatja az előfizetői csoportokat, így az azonos csoportban lévő operátorok ugyanazokat a riasztásokat kapják meg.</span><span class="sxs-lookup"><span data-stu-id="3400c-887">Many alerting systems support subscriber groups, and all operators who are members of the same group can receive the same set of alerts.</span></span>

<span data-ttu-id="3400c-888">A riasztási rendszereknek testreszabhatónak kell lenniük, és ehhez a mögöttes rendszerállapot-adatok megfelelő értékei szolgálhatnak paraméterként.</span><span class="sxs-lookup"><span data-stu-id="3400c-888">An alerting system should be customizable, and the appropriate values from the underlying instrumentation data can be provided as parameters.</span></span> <span data-ttu-id="3400c-889">Ez a megközelítés lehetővé teszi, hogy az operátor az adatok szűrésével a fontos küszöbértékekre és értékkombinációkra összpontosíthasson.</span><span class="sxs-lookup"><span data-stu-id="3400c-889">This approach enables an operator to filter data and focus on those thresholds or combinations of values that are of interest.</span></span> <span data-ttu-id="3400c-890">Vegye figyelembe, hogy egyes esetekben a nyers rendszerállapot-adatok biztosíthatók a riasztási rendszer számára.</span><span class="sxs-lookup"><span data-stu-id="3400c-890">Note that in some cases, the raw instrumentation data can be provided to the alerting system.</span></span> <span data-ttu-id="3400c-891">Más esetekben azonban célszerűbb összesített adatokat biztosítani.</span><span class="sxs-lookup"><span data-stu-id="3400c-891">In other situations, it might be more appropriate to supply aggregated data.</span></span> <span data-ttu-id="3400c-892">(Egy riasztás kiváltására például akkor kerülhet sor, amikor a processzor kihasználtsága az elmúlt 10 percben meghaladta a 90 százalékot.)</span><span class="sxs-lookup"><span data-stu-id="3400c-892">(For example, an alert can be triggered if the CPU utilization for a node has exceeded 90 percent over the last 10 minutes).</span></span> <span data-ttu-id="3400c-893">A riasztási rendszernek biztosított információknak tartalmaznia kell a megfelelő összegzési és környezeti adatokat is.</span><span class="sxs-lookup"><span data-stu-id="3400c-893">The details provided to the alerting system should also include any appropriate summary and context information.</span></span> <span data-ttu-id="3400c-894">Az ilyen adatok segítségével csökkenthető a vakriasztások esélye.</span><span class="sxs-lookup"><span data-stu-id="3400c-894">This data can help reduce the possibility that false-positive events will trip an alert.</span></span>

### <a name="reporting"></a><span data-ttu-id="3400c-895">Jelentéskészítés</span><span class="sxs-lookup"><span data-stu-id="3400c-895">Reporting</span></span>

<span data-ttu-id="3400c-896">A jelentéskészítés segítségével egy általános áttekintés készíthető a rendszerről.</span><span class="sxs-lookup"><span data-stu-id="3400c-896">Reporting is used to generate an overall view of the system.</span></span> <span data-ttu-id="3400c-897">Az áttekintés tartalmazhat előzményadatokat is az aktuális információk mellett.</span><span class="sxs-lookup"><span data-stu-id="3400c-897">It might incorporate historical data in addition to current information.</span></span> <span data-ttu-id="3400c-898">A jelentéskészítésre vonatkozó követelmények két nagyobb kategóriába sorolhatók: működési jelentések és biztonsági jelentések.</span><span class="sxs-lookup"><span data-stu-id="3400c-898">Reporting requirements themselves fall into two broad categories: operational reporting and security reporting.</span></span>

<span data-ttu-id="3400c-899">A működési jelentések általában az alábbi szempontokat érintik:</span><span class="sxs-lookup"><span data-stu-id="3400c-899">Operational reporting typically includes the following aspects:</span></span>

- <span data-ttu-id="3400c-900">Összesíti a statisztikákat, amellyel egy adott időszak során a rendszer egészének vagy adott alrendszernek az erőforrás-használat megértéséhez.</span><span class="sxs-lookup"><span data-stu-id="3400c-900">Aggregating statistics that you can use to understand resource utilization of the overall system or specified subsystems during a specified time window.</span></span>
- <span data-ttu-id="3400c-901">Egy adott időszak során a rendszer egészének vagy adott alrendszernek erőforrás-használati trendek azonosítása.</span><span class="sxs-lookup"><span data-stu-id="3400c-901">Identifying trends in resource usage for the overall system or specified subsystems during a specified period.</span></span>
- <span data-ttu-id="3400c-902">A rendszerben vagy egy adott alrendszerben egy adott időszak során kivételek monitorozása.</span><span class="sxs-lookup"><span data-stu-id="3400c-902">Monitoring the exceptions that have occurred throughout the system or in specified subsystems during a specified period.</span></span>
- <span data-ttu-id="3400c-903">Az üzembe helyezett erőforrások szempontjából az alkalmazás hatékonyságának meghatározása, és annak a teljesítmény szükségtelen csökkentése nélkül az erőforrások mennyisége (és a kapcsolódó költségek) csökkenthető-e.</span><span class="sxs-lookup"><span data-stu-id="3400c-903">Determining the efficiency of the application in terms of the deployed resources, and understanding whether the volume of resources (and their associated cost) can be reduced without affecting performance unnecessarily.</span></span>

<span data-ttu-id="3400c-904">A biztonsági jelentések a rendszer felhasználók általi használatának nyomon követésével foglalkoznak.</span><span class="sxs-lookup"><span data-stu-id="3400c-904">Security reporting is concerned with tracking customers' use of the system.</span></span> <span data-ttu-id="3400c-905">Az alábbiakra terjedhetnek ki:</span><span class="sxs-lookup"><span data-stu-id="3400c-905">It can include:</span></span>

- <span data-ttu-id="3400c-906">**A felhasználói műveletek naplózása**.</span><span class="sxs-lookup"><span data-stu-id="3400c-906">**Auditing user operations**.</span></span> <span data-ttu-id="3400c-907">Ehhez rögzíteni kell az egyes felhasználók által végrehajtott kéréseket, azok dátum- és időadataival együtt.</span><span class="sxs-lookup"><span data-stu-id="3400c-907">This requires recording the individual requests that each user performs, together with dates and times.</span></span> <span data-ttu-id="3400c-908">Az adatokat megfelelően strukturálni kell, hogy a rendszergazda gyorsan rekonstruálhassa az egyes felhasználók által az adott időszakban végrehajtott műveletek sorát.</span><span class="sxs-lookup"><span data-stu-id="3400c-908">The data should be structured to enable an administrator to quickly reconstruct the sequence of operations that a user performs over a specified period.</span></span>
- <span data-ttu-id="3400c-909">**Erőforrás használja felhasználó követési**.</span><span class="sxs-lookup"><span data-stu-id="3400c-909">**Tracking resource use by user**.</span></span> <span data-ttu-id="3400c-910">Ehhez rögzíteni kell, hogy egy adott felhasználó egyes kérései hogyan és milyen hosszan férnek hozzá a rendszert alkotó különböző erőforrásokhoz.</span><span class="sxs-lookup"><span data-stu-id="3400c-910">This requires recording how each request for a user accesses the various resources that compose the system, and for how long.</span></span> <span data-ttu-id="3400c-911">A rendszergazdának az adatok használatával képesnek kell lennie a használatról szóló, felhasználókon alapuló, adott időszakra vonatkozó jelentés létrehozására, például számlázási célból.</span><span class="sxs-lookup"><span data-stu-id="3400c-911">An administrator must be able to use this data to generate a utilization report by user over a specified period, possibly for billing purposes.</span></span>

<span data-ttu-id="3400c-912">Sok esetben kötegelt folyamatok is létrehozhatnak jelentéseket egy meghatározott ütemezés szerint.</span><span class="sxs-lookup"><span data-stu-id="3400c-912">In many cases, batch processes can generate reports according to a defined schedule.</span></span> <span data-ttu-id="3400c-913">(A késés általában nem jelent problémát.) A jelentéseket azonban ad hoc alapon is létre kell tudni hozni, ha szükséges.</span><span class="sxs-lookup"><span data-stu-id="3400c-913">(Latency is not normally an issue.) But they should also be available for generation on an ad hoc basis if needed.</span></span> <span data-ttu-id="3400c-914">Ha például az adatait egy relációs adatbázisban, például az Azure SQL Database-ben tárolja, egy eszköz, például az SQL Server Reporting Services segítségével kinyerheti és formázhatja az adatokat, és megjelenítheti azokat különféle jelentésekben.</span><span class="sxs-lookup"><span data-stu-id="3400c-914">As an example, if you are storing data in a relational database such as Azure SQL Database, you can use a tool such as SQL Server Reporting Services to extract and format data and present it as a set of reports.</span></span>

## <a name="related-patterns-and-guidance"></a><span data-ttu-id="3400c-915">Kapcsolódó minták és útmutatók</span><span class="sxs-lookup"><span data-stu-id="3400c-915">Related patterns and guidance</span></span>

- <span data-ttu-id="3400c-916">[Útmutató az automatikus skálázáshoz](../best-practices/auto-scaling.md): azt ismerteti, hogy hogyan csökkenthetők a felügyeleti terhek, ha kevésbé van szükség olyan operátorra, aki folyamatosan monitorozza a rendszer teljesítményét, és döntéseket hoz az erőforrások hozzáadásáról vagy eltávolításáról.</span><span class="sxs-lookup"><span data-stu-id="3400c-916">[Autoscaling guidance](../best-practices/auto-scaling.md) describes how to decrease management overhead by reducing the need for an operator to continually monitor the performance of a system and make decisions about adding or removing resources.</span></span>
- <span data-ttu-id="3400c-917">[Állapot végponti Monitorozását végző minta](../patterns/health-endpoint-monitoring.md) ismerteti, hogyan lehet egy alkalmazásban, amelyhez hozzáférhetnek külső eszközök elérhetővé tett végpontokon keresztül rendszeres időközönként működés-ellenőrzéseket implementálhat.</span><span class="sxs-lookup"><span data-stu-id="3400c-917">[Health Endpoint Monitoring pattern](../patterns/health-endpoint-monitoring.md) describes how to implement functional checks within an application that external tools can access through exposed endpoints at regular intervals.</span></span>
- <span data-ttu-id="3400c-918">[Elsőbbségi üzenetsor mintája](../patterns/priority-queue.md) bemutatja, hogyan várólistára helyezett üzenetek, hogy a sürgős kérések fogadása és a dolgozhatók fel kevésbé sürgős üzenetek előtt.</span><span class="sxs-lookup"><span data-stu-id="3400c-918">[Priority Queue pattern](../patterns/priority-queue.md) shows how to prioritize queued messages so that urgent requests are received and can be processed before less urgent messages.</span></span>

## <a name="more-information"></a><span data-ttu-id="3400c-919">További információ</span><span class="sxs-lookup"><span data-stu-id="3400c-919">More information</span></span>

- [<span data-ttu-id="3400c-920">Microsoft Azure Storage felügyelete, diagnosztizálása és hibaelhárítása</span><span class="sxs-lookup"><span data-stu-id="3400c-920">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</span></span>](/azure/storage/storage-monitoring-diagnosing-troubleshooting)
- [<span data-ttu-id="3400c-921">Azure: Telemetria alapjai és hibaelhárítása</span><span class="sxs-lookup"><span data-stu-id="3400c-921">Azure: Telemetry Basics and Troubleshooting</span></span>](https://social.technet.microsoft.com/wiki/contents/articles/18146.windows-azure-telemetry-basics-and-troubleshooting.aspx)
- [<span data-ttu-id="3400c-922">Diagnosztika engedélyezése az Azure Cloud Services és a Virtual Machines szolgáltatásban</span><span class="sxs-lookup"><span data-stu-id="3400c-922">Enabling Diagnostics in Azure Cloud Services and Virtual Machines</span></span>](/azure/cloud-services/cloud-services-dotnet-diagnostics)
- <span data-ttu-id="3400c-923">[Azure Redis Cache](https://azure.microsoft.com/services/cache/), [Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) és [HDInsight](https://azure.microsoft.com/services/hdinsight/)</span><span class="sxs-lookup"><span data-stu-id="3400c-923">[Azure Redis Cache](https://azure.microsoft.com/services/cache/), [Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/), and [HDInsight](https://azure.microsoft.com/services/hdinsight/)</span></span>
- <span data-ttu-id="3400c-924">[How to use Service Bus Queues](/azure/service-bus-messaging/service-bus-dotnet-get-started-with-queues) (A Service Bus-üzenetsorok használata)</span><span class="sxs-lookup"><span data-stu-id="3400c-924">[How to use Service Bus queues](/azure/service-bus-messaging/service-bus-dotnet-get-started-with-queues)</span></span>
- [<span data-ttu-id="3400c-925">Az SQL Server Business Intelligence használata az Azure Virtual Machines szolgáltatásban</span><span class="sxs-lookup"><span data-stu-id="3400c-925">SQL Server business intelligence in Azure Virtual Machines</span></span>](/azure/virtual-machines/windows/sqlclassic/virtual-machines-windows-classic-ps-sql-bi)
- <span data-ttu-id="3400c-926">[Riasztási értesítések fogadása](/azure/monitoring-and-diagnostics/insights-receive-alert-notifications) és [szolgáltatások állapotának nyomon követése](/azure/monitoring-and-diagnostics/insights-service-health)</span><span class="sxs-lookup"><span data-stu-id="3400c-926">[Receive alert notifications](/azure/monitoring-and-diagnostics/insights-receive-alert-notifications) and [Track service health](/azure/monitoring-and-diagnostics/insights-service-health)</span></span>
- [<span data-ttu-id="3400c-927">Application Insights</span><span class="sxs-lookup"><span data-stu-id="3400c-927">Application Insights</span></span>](/azure/application-insights/app-insights-overview)
