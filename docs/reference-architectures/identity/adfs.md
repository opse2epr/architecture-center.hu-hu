---
title: "Az Azure Active Directory összevonási szolgáltatások (AD FS) megvalósítása"
description: "Hogyan megvalósításához egy biztonságos hibrid hálózati architektúra az Active Directory összevonási szolgáltatás engedélyezése az Azure-ban.\nútmutatást, vpn-átjáró, expressroute, terheléselosztó, virtuális hálózat, active Directoryval"
author: telmosampaio
ms.date: 11/28/2016
pnp.series.title: Identity management
pnp.series.prev: adds-forest
cardTitle: Extend AD FS to Azure
ms.openlocfilehash: b8c9ae0621c087c68d449dd13e60046104c01513
ms.sourcegitcommit: 8ab30776e0c4cdc16ca0dcc881960e3108ad3e94
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 12/08/2017
---
# <a name="extend-active-directory-federation-services-ad-fs-to-azure"></a><span data-ttu-id="64eff-104">Az Azure Active Directory összevonási szolgáltatások (AD FS) kiterjesztése</span><span class="sxs-lookup"><span data-stu-id="64eff-104">Extend Active Directory Federation Services (AD FS) to Azure</span></span>

<span data-ttu-id="64eff-105">A referencia-architektúrában valósítja meg, amely kiterjeszti a helyszíni hálózat Azure és a biztonságos hibrid hálózat [Active Directory összevonási szolgáltatások (AD FS)] [ active-directory-federation-services] végrehajtásához összevont hitelesítési és engedélyezési Azure-beli összetevőnél.</span><span class="sxs-lookup"><span data-stu-id="64eff-105">This reference architecture implements a secure hybrid network that extends your on-premises network to Azure and uses [Active Directory Federation Services (AD FS)][active-directory-federation-services] to perform federated authentication and authorization for components running in Azure.</span></span> [<span data-ttu-id="64eff-106">**A megoldás üzembe helyezése**.</span><span class="sxs-lookup"><span data-stu-id="64eff-106">**Deploy this solution**.</span></span>](#deploy-the-solution)

<span data-ttu-id="64eff-107">[![0]][0]</span><span class="sxs-lookup"><span data-stu-id="64eff-107">[![0]][0]</span></span>

<span data-ttu-id="64eff-108">*Töltse le az architektúra [Visio-fájlját][visio-download].*</span><span class="sxs-lookup"><span data-stu-id="64eff-108">*Download a [Visio file][visio-download] of this architecture.*</span></span>

<span data-ttu-id="64eff-109">Az AD FS lehet üzemeltethető a helyszínen, de ha az alkalmazás egy hibrid Azure végrehajtott bizonyos részei, hatékonyabb, ha az AD FS-ben a felhő replikálni lehet.</span><span class="sxs-lookup"><span data-stu-id="64eff-109">AD FS can be hosted on-premises, but if your application is a hybrid in which some parts are implemented in Azure, it may be more efficient to replicate AD FS in the cloud.</span></span> 

<span data-ttu-id="64eff-110">Az ábrán látható a következő esetekben:</span><span class="sxs-lookup"><span data-stu-id="64eff-110">The diagram shows the following scenarios:</span></span>

* <span data-ttu-id="64eff-111">A fiókpartner-szervezet alkalmazáskód fér hozzá egy webalkalmazást az Azure-beli virtuális hálózatán belül található.</span><span class="sxs-lookup"><span data-stu-id="64eff-111">Application code from a partner organization accesses a web application hosted inside your Azure VNet.</span></span>
* <span data-ttu-id="64eff-112">Belül az Active Directory tartományi szolgáltatások (DS) tárolt hitelesítő adatokkal rendelkező egy külső, regisztrált felhasználó hozzáfér egy webalkalmazást az Azure-beli virtuális hálózatán belül található.</span><span class="sxs-lookup"><span data-stu-id="64eff-112">An external, registered user with credentials stored inside Active Directory Domain Services (DS) accesses a web application hosted inside your Azure VNet.</span></span>
* <span data-ttu-id="64eff-113">A virtuális hálózat egy jogosult eszközzel csatlakozó felhasználó végrehajtja a egy webalkalmazást az Azure-beli virtuális hálózatán belül található.</span><span class="sxs-lookup"><span data-stu-id="64eff-113">A user connected to your VNet using an authorized device executes a web application hosted inside your Azure VNet.</span></span>

<span data-ttu-id="64eff-114">Ez az architektúra a jellemző használati többek között:</span><span class="sxs-lookup"><span data-stu-id="64eff-114">Typical uses for this architecture include:</span></span>

* <span data-ttu-id="64eff-115">Hibrid alkalmazások ahol munkaterhelések Futtatás részben helyszínen és részben az Azure.</span><span class="sxs-lookup"><span data-stu-id="64eff-115">Hybrid applications where workloads run partly on-premises and partly in Azure.</span></span>
* <span data-ttu-id="64eff-116">Összevont engedélyezési teszi közzé a webes alkalmazásokat az erőforráspartner-szervezetek használó megoldások.</span><span class="sxs-lookup"><span data-stu-id="64eff-116">Solutions that use federated authorization to expose web applications to partner organizations.</span></span>
* <span data-ttu-id="64eff-117">A rendszer támogatja a hozzáférést a szervezeti tűzfalon kívül futó webböngészőknek.</span><span class="sxs-lookup"><span data-stu-id="64eff-117">Systems that support access from web browsers running outside of the organizational firewall.</span></span>
* <span data-ttu-id="64eff-118">Azok a rendszerek, amelyek lehetővé teszik a felhasználók férhetnek hozzá a webes alkalmazások által hitelesített külső eszközöket, például a távoli számítógépeken, jegyzetfüzeteket és egyéb mobileszközökön való kapcsolódás.</span><span class="sxs-lookup"><span data-stu-id="64eff-118">Systems that enable users to access to web applications by connecting from authorized external devices such as remote computers, notebooks, and other mobile devices.</span></span> 

<span data-ttu-id="64eff-119">A referencia-architektúrában összpontosít *passzív összevonási*, a következő helyen, amely az összevonási kiszolgálók mellett dönt, hogy hogyan és mikor a felhasználó hitelesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="64eff-119">This reference architecture focuses on *passive federation*, in which the federation servers decide how and when to authenticate a user.</span></span> <span data-ttu-id="64eff-120">A felhasználó megadja a bejelentkezési adatok, az alkalmazás indításakor.</span><span class="sxs-lookup"><span data-stu-id="64eff-120">The user provides sign in information when the application is started.</span></span> <span data-ttu-id="64eff-121">A mechanizmus böngészők által leggyakrabban használt, és magában foglalja a protokoll, amely a böngésző átirányítja egy helyet, ahol a felhasználó hitelesíti magát.</span><span class="sxs-lookup"><span data-stu-id="64eff-121">This mechanism is most commonly used by web browsers and involves a protocol that redirects the browser to a site where the user authenticates.</span></span> <span data-ttu-id="64eff-122">Az AD FS is támogatja *aktív összevonási*, ha egy alkalmazás időt vesz igénybe, hogy megadja a hitelesítő adatokat, további felhasználói beavatkozás nélkül felelős az, de a forgatókönyv ebbe az architektúrába hatókörén kívül esik.</span><span class="sxs-lookup"><span data-stu-id="64eff-122">AD FS also supports *active federation*, where an application takes on responsibility for supplying credentials without further user interaction, but that scenario is outside the scope of this architecture.</span></span>

<span data-ttu-id="64eff-123">További szempontokat lásd: [megoldás választása a integrálása a helyszíni Active Directoryról szinkronizálva az Azure][considerations].</span><span class="sxs-lookup"><span data-stu-id="64eff-123">For additional considerations, see [Choose a solution for integrating on-premises Active Directory with Azure][considerations].</span></span> 

## <a name="architecture"></a><span data-ttu-id="64eff-124">Architektúra</span><span class="sxs-lookup"><span data-stu-id="64eff-124">Architecture</span></span>

<span data-ttu-id="64eff-125">Ez az architektúra kiterjeszti a leírt végrehajtása [Extending Active Directory tartományi szolgáltatások, Azure][extending-ad-to-azure].</span><span class="sxs-lookup"><span data-stu-id="64eff-125">This architecture extends the implementation described in [Extending AD DS to Azure][extending-ad-to-azure].</span></span> <span data-ttu-id="64eff-126">Az alábbi összetevőket tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="64eff-126">It contains the followign components.</span></span>

* <span data-ttu-id="64eff-127">**Az Active Directory tartományi szolgáltatások alhálózati**.</span><span class="sxs-lookup"><span data-stu-id="64eff-127">**AD DS subnet**.</span></span> <span data-ttu-id="64eff-128">Az Active Directory tartományi szolgáltatások-kiszolgálók a saját alhálózati tűzfal működött hálózati biztonsági csoport (NSG) szabályait tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="64eff-128">The AD DS servers are contained in their own subnet with network security group (NSG) rules acting as a firewall.</span></span>

* <span data-ttu-id="64eff-129">**AD DS-kiszolgálók**.</span><span class="sxs-lookup"><span data-stu-id="64eff-129">**AD DS servers**.</span></span> <span data-ttu-id="64eff-130">Az Azure-ban virtuális gépeket futtató tartományvezérlők.</span><span class="sxs-lookup"><span data-stu-id="64eff-130">Domain controllers running as VMs in Azure.</span></span> <span data-ttu-id="64eff-131">Ezek a kiszolgálók a tartományon belüli helyi identitások hitelesítést nyújt.</span><span class="sxs-lookup"><span data-stu-id="64eff-131">These servers provide authentication of local identities within the domain.</span></span>

* <span data-ttu-id="64eff-132">**AD FS alhálózati**.</span><span class="sxs-lookup"><span data-stu-id="64eff-132">**AD FS subnet**.</span></span> <span data-ttu-id="64eff-133">Az AD FS-kiszolgálók találhatók a saját alhálózaton belül az NSG-szabályok tűzfal működött.</span><span class="sxs-lookup"><span data-stu-id="64eff-133">The AD FS servers are located within their own subnet with NSG rules acting as a firewall.</span></span>

* <span data-ttu-id="64eff-134">**AD FS-kiszolgálók**.</span><span class="sxs-lookup"><span data-stu-id="64eff-134">**AD FS servers**.</span></span> <span data-ttu-id="64eff-135">Az AD FS-kiszolgáló hitelesítési és engedélyezési összevont adja meg.</span><span class="sxs-lookup"><span data-stu-id="64eff-135">The AD FS servers provide federated authorization and authentication.</span></span> <span data-ttu-id="64eff-136">Ebben az architektúrában akkor a következő feladatokat:</span><span class="sxs-lookup"><span data-stu-id="64eff-136">In this architecture, they perform the following tasks:</span></span>
  
  * <span data-ttu-id="64eff-137">A fogadó biztonsági jogkivonatot tartalmazó jogcímeket egy összevonási partnerkiszolgáló tett egy partner felhasználó nevében.</span><span class="sxs-lookup"><span data-stu-id="64eff-137">Receiving security tokens containing claims made by a partner federation server on behalf of a partner user.</span></span> <span data-ttu-id="64eff-138">Az AD FS ellenőrzi, hogy a jogkivonatok érvényes előtt a webalkalmazás Azure-ban futó kérések engedélyezésére a jogcímeket.</span><span class="sxs-lookup"><span data-stu-id="64eff-138">AD FS verifies that the tokens are valid before passing the claims to the web application running in Azure to authorize requests.</span></span> 
  
    <span data-ttu-id="64eff-139">Azure-ban futó webes alkalmazás a *függő entitás*.</span><span class="sxs-lookup"><span data-stu-id="64eff-139">The web application running in Azure is the *relying party*.</span></span> <span data-ttu-id="64eff-140">A partner összevonási kiszolgáló kell jogcímeket kiadni, amelyek a webalkalmazás értendők.</span><span class="sxs-lookup"><span data-stu-id="64eff-140">The partner federation server must issue claims that are understood by the web application.</span></span> <span data-ttu-id="64eff-141">A partner összevonási kiszolgálók nevezzük *fiókpartnerek*, mert elküldenék hozzáférési kérelmek hitelesített fiókok a fiókpartner-szervezet nevében.</span><span class="sxs-lookup"><span data-stu-id="64eff-141">The partner federation servers are referred to as *account partners*, because they submit access requests on behalf of authenticated accounts in the partner organization.</span></span> <span data-ttu-id="64eff-142">Az AD FS-kiszolgáló nevezzük *erőforrás partnerek* mert (webalkalmazás) erőforrásokhoz való hozzáférést biztosítanak.</span><span class="sxs-lookup"><span data-stu-id="64eff-142">The AD FS servers are called *resource partners* because they provide access to resources (the web application).</span></span>

  * <span data-ttu-id="64eff-143">Hitelesítése és engedélyezése a bejövő kéréseket a külső felhasználók egy webböngésző vagy az Active Directory tartományi szolgáltatások használatával webes alkalmazásokhoz, a hozzáférést igénylő eszközre és a [Active Directory Eszközregisztrációs szolgáltatás] [ ADDRS].</span><span class="sxs-lookup"><span data-stu-id="64eff-143">Authenticating and authorizing incoming requests from external users running a web browser or device that needs access to web applications, by using AD DS and the [Active Directory Device Registration Service][ADDRS].</span></span>
    
  <span data-ttu-id="64eff-144">Az AD FS-kiszolgáló van konfigurálva az Azure terheléselosztó keresztül érhetők el a farmhoz.</span><span class="sxs-lookup"><span data-stu-id="64eff-144">The AD FS servers are configured as a farm accessed through an Azure load balancer.</span></span> <span data-ttu-id="64eff-145">Ez a megvalósítás javítja rendelkezésre állását és méretezhetőségét.</span><span class="sxs-lookup"><span data-stu-id="64eff-145">This implementation improves availability and scalability.</span></span> <span data-ttu-id="64eff-146">Az AD FS-kiszolgálók nem érhetők el közvetlenül.</span><span class="sxs-lookup"><span data-stu-id="64eff-146">The AD FS servers are not exposed directly to the Internet.</span></span> <span data-ttu-id="64eff-147">Minden internetes forgalomhoz a az AD FS webalkalmazás-proxy kiszolgálók és a Szegélyhálózaton (más néven a szegélyhálózaton) keresztül szűrve van.</span><span class="sxs-lookup"><span data-stu-id="64eff-147">All Internet traffic is filtered through AD FS web application proxy servers and a DMZ (also referred to as a perimeter network).</span></span>

  <span data-ttu-id="64eff-148">Active Directory összevonási szolgáltatások működésével kapcsolatos további információkért lásd: [Active Directory összevonási szolgáltatások – áttekintés][active-directory-federation-services-overview].</span><span class="sxs-lookup"><span data-stu-id="64eff-148">For more information about how AD FS works, see [Active Directory Federation Services Overview][active-directory-federation-services-overview].</span></span> <span data-ttu-id="64eff-149">Emellett a cikk [AD FS üzembe helyezése az Azure-ban] [ adfs-intro] tartalmaz egy megvalósítási részletes részletes bemutatása.</span><span class="sxs-lookup"><span data-stu-id="64eff-149">Also, the article [AD FS deployment in Azure][adfs-intro] contains a detailed step-by-step introduction to implementation.</span></span>

* <span data-ttu-id="64eff-150">**AD FS proxy alhálózati**.</span><span class="sxs-lookup"><span data-stu-id="64eff-150">**AD FS proxy subnet**.</span></span> <span data-ttu-id="64eff-151">Az AD FS-proxy kiszolgáló védő NSG-szabályok a saját alhálózaton belül is tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="64eff-151">The AD FS proxy servers can be contained within their own subnet, with NSG rules providing protection.</span></span> <span data-ttu-id="64eff-152">A kiszolgálók az alhálózaton az interneten keresztül az Azure virtuális hálózat és az Internet között tűzfal biztosító hálózati virtuális készülékek érhetők el.</span><span class="sxs-lookup"><span data-stu-id="64eff-152">The servers in this subnet are exposed to the Internet through a set of network virtual appliances that provide a firewall between your Azure virtual network and the Internet.</span></span>

* <span data-ttu-id="64eff-153">**Az AD FS webalkalmazás-proxy (WAP) kiszolgálók**.</span><span class="sxs-lookup"><span data-stu-id="64eff-153">**AD FS web application proxy (WAP) servers**.</span></span> <span data-ttu-id="64eff-154">A bejövő kéréseket a fiókpartner-szervezetek és a külső eszközökről AD FS-kiszolgáló működésének virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="64eff-154">These VMs act as AD FS servers for incoming requests from partner organizations and external devices.</span></span> <span data-ttu-id="64eff-155">A WAP-kiszolgálókkal egy szűrő, az AD FS-kiszolgáló közvetlen hozzáférés az internetről védelmi összekötőként.</span><span class="sxs-lookup"><span data-stu-id="64eff-155">The WAP servers act as a filter, shielding the AD FS servers from direct access from the Internet.</span></span> <span data-ttu-id="64eff-156">Csakúgy, mint az AD FS-kiszolgáló központi telepítése a WAP terheléselosztás kiszolgálófarm kiszolgálók lehetővé teszi nagyobb rendelkezésre állását és méretezhetőségét, mint központi telepítése különálló kiszolgálók gyűjteménye.</span><span class="sxs-lookup"><span data-stu-id="64eff-156">As with the AD FS servers, deploying the WAP servers in a farm with load balancing gives you greater availability and scalability than deploying a collection of stand-alone servers.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="64eff-157">WAP-kiszolgálókkal telepítésével kapcsolatos részletes információkért lásd: [telepítése és a webalkalmazás-Proxy kiszolgáló konfigurálása][install_and_configure_the_web_application_proxy_server]</span><span class="sxs-lookup"><span data-stu-id="64eff-157">For detailed information about installing WAP servers, see [Install and Configure the Web Application Proxy Server][install_and_configure_the_web_application_proxy_server]</span></span>
  > 
  > 

* <span data-ttu-id="64eff-158">**Fiókpartner szervezetében dolgozó**.</span><span class="sxs-lookup"><span data-stu-id="64eff-158">**Partner organization**.</span></span> <span data-ttu-id="64eff-159">A fiókpartner-szervezet hozzáférést kérő webes alkalmazást futtat egy Azure-beli webalkalmazáshoz.</span><span class="sxs-lookup"><span data-stu-id="64eff-159">A partner organization running a web application that requests access to a web application running in Azure.</span></span> <span data-ttu-id="64eff-160">A a fiókpartner-szervezet összevonási kiszolgáló hitelesíti a helyi kérelmekre, és elküldi a tartalmazó Azure-beli AD FS jogcímalapú biztonsági jogkivonatokat.</span><span class="sxs-lookup"><span data-stu-id="64eff-160">The federation server at the partner organization authenticates requests locally, and submits security tokens containing claims to AD FS running in Azure.</span></span> <span data-ttu-id="64eff-161">Az Azure AD FS érvényesíti a biztonsági jogkivonatokat, és ha érvényes továbbíthatja a webalkalmazás Azure-beli engedélyezésére azokat a jogcímeket.</span><span class="sxs-lookup"><span data-stu-id="64eff-161">AD FS in Azure validates the security tokens, and if valid can pass the claims to the web application running in Azure to authorize them.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="64eff-162">Egy VPN-alagúton közvetlen hozzáférést biztosít az AD FS megbízható partnerek Azure átjáró használatával is konfigurálhatja.</span><span class="sxs-lookup"><span data-stu-id="64eff-162">You can also configure a VPN tunnel using Azure gateway to provide direct access to AD FS for trusted partners.</span></span> <span data-ttu-id="64eff-163">A partnerek érkező kérelmeket nem haladnak át a WAP-kiszolgálókkal.</span><span class="sxs-lookup"><span data-stu-id="64eff-163">Requests received from these partners do not pass through the WAP servers.</span></span>
  > 
  > 

<span data-ttu-id="64eff-164">A kijelzők a architektúra, amely nem kapcsolódik az AD FS kapcsolatos további információkért lásd a következő:</span><span class="sxs-lookup"><span data-stu-id="64eff-164">For more information about the parts of the architecture that are not related to AD FS, see the following:</span></span>
- <span data-ttu-id="64eff-165">[A biztonságos hibrid hálózati architektúra végrehajtása az Azure-ban][implementing-a-secure-hybrid-network-architecture]</span><span class="sxs-lookup"><span data-stu-id="64eff-165">[Implementing a secure hybrid network architecture in Azure][implementing-a-secure-hybrid-network-architecture]</span></span>
- <span data-ttu-id="64eff-166">[A biztonságos hibrid hálózati architektúra Internet-hozzáféréssel rendelkező végrehajtása az Azure-ban][implementing-a-secure-hybrid-network-architecture-with-internet-access]</span><span class="sxs-lookup"><span data-stu-id="64eff-166">[Implementing a secure hybrid network architecture with Internet access in Azure][implementing-a-secure-hybrid-network-architecture-with-internet-access]</span></span>
- <span data-ttu-id="64eff-167">[Az Azure-ban egy biztonságos hibrid hálózati architektúra az Active Directory identitások megvalósítása][extending-ad-to-azure].</span><span class="sxs-lookup"><span data-stu-id="64eff-167">[Implementing a secure hybrid network architecture with Active Directory identities in Azure][extending-ad-to-azure].</span></span>


## <a name="recommendations"></a><span data-ttu-id="64eff-168">Ajánlatok</span><span class="sxs-lookup"><span data-stu-id="64eff-168">Recommendations</span></span>

<span data-ttu-id="64eff-169">Az alábbi javaslatok a legtöbb forgatókönyvre vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="64eff-169">The following recommendations apply for most scenarios.</span></span> <span data-ttu-id="64eff-170">Kövesse ezeket a javaslatokat, ha nincsenek ezeket felülíró követelményei.</span><span class="sxs-lookup"><span data-stu-id="64eff-170">Follow these recommendations unless you have a specific requirement that overrides them.</span></span> 

### <a name="vm-recommendations"></a><span data-ttu-id="64eff-171">Virtuális gépekre vonatkozó javaslatok</span><span class="sxs-lookup"><span data-stu-id="64eff-171">VM recommendations</span></span>

<span data-ttu-id="64eff-172">Hozzon létre virtuális gépek a várt forgalom mennyiségét kezeléséhez elegendő erőforrással.</span><span class="sxs-lookup"><span data-stu-id="64eff-172">Create VMs with sufficient resources to handle the expected volume of traffic.</span></span> <span data-ttu-id="64eff-173">Használja a meglévő AD FS a helyszíni kiindulási pontként futtató gépek méretét.</span><span class="sxs-lookup"><span data-stu-id="64eff-173">Use the size of the existing machines hosting AD FS on premises as a starting point.</span></span> <span data-ttu-id="64eff-174">Az erőforrás-használat figyelése.</span><span class="sxs-lookup"><span data-stu-id="64eff-174">Monitor the resource utilization.</span></span> <span data-ttu-id="64eff-175">Méretezze át a virtuális gépeket, és csökkentheti, ha azok túl nagy.</span><span class="sxs-lookup"><span data-stu-id="64eff-175">You can resize the VMs and scale down if they are too large.</span></span>

<span data-ttu-id="64eff-176">Kövesse a felsorolt [a Windows virtuális gépek Azure-on futó][vm-recommendations].</span><span class="sxs-lookup"><span data-stu-id="64eff-176">Follow the recommendations listed in [Running a Windows VM on Azure][vm-recommendations].</span></span>

### <a name="networking-recommendations"></a><span data-ttu-id="64eff-177">Hálózatokra vonatkozó javaslatok</span><span class="sxs-lookup"><span data-stu-id="64eff-177">Networking recommendations</span></span>

<span data-ttu-id="64eff-178">Állítsa be a hálózati illesztő statikus magánhálózati IP-címekkel rendelkező AD FS- és WAP kiszolgálókat üzemeltető virtuális gépek mindegyikéhez.</span><span class="sxs-lookup"><span data-stu-id="64eff-178">Configure the network interface for each of the VMs hosting AD FS and WAP servers with static private IP addresses.</span></span>

<span data-ttu-id="64eff-179">Ne adja meg az AD FS virtuális gépek nyilvános IP-címeket.</span><span class="sxs-lookup"><span data-stu-id="64eff-179">Do not give the AD FS VMs public IP addresses.</span></span> <span data-ttu-id="64eff-180">További információkért lásd: a biztonsági szempontok című szakaszban ismertetjük.</span><span class="sxs-lookup"><span data-stu-id="64eff-180">For more information, see the Security considerations section.</span></span>

<span data-ttu-id="64eff-181">Állítsa be az IP-cím, az elsődleges és másodlagos tartomány névkiszolgálók szolgáltatás (DNS) az egyes AD FS és a WAP VM hivatkozhasson rá az Active Directory Tartományi virtuális gépek hálózati adaptereihez.</span><span class="sxs-lookup"><span data-stu-id="64eff-181">Set the IP address of the preferred and secondary domain name service (DNS) servers for the network interfaces for each AD FS and WAP VM to reference the Active Directory DS VMs.</span></span> <span data-ttu-id="64eff-182">Az Active Directory Tartományi virtuális gépek DNS rendszerűnek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="64eff-182">The Active Directory DS VMS should be running DNS.</span></span> <span data-ttu-id="64eff-183">Ez a lépés nem szükséges ahhoz, hogy egyes virtuális gépek a tartományhoz való csatlakozáshoz.</span><span class="sxs-lookup"><span data-stu-id="64eff-183">This step is necessary to enable each VM to join the domain.</span></span>

### <a name="ad-fs-availability"></a><span data-ttu-id="64eff-184">AD FS rendelkezésre állása</span><span class="sxs-lookup"><span data-stu-id="64eff-184">AD FS availability</span></span> 

<span data-ttu-id="64eff-185">Az AD FS-farm létrehozása a szolgáltatás rendelkezésre állásának növelése érdekében legalább két kiszolgálóval.</span><span class="sxs-lookup"><span data-stu-id="64eff-185">Create an AD FS farm with at least two servers to increase availability of the service.</span></span> <span data-ttu-id="64eff-186">A farm AD FS virtuális gépek különböző tárfiókok használata.</span><span class="sxs-lookup"><span data-stu-id="64eff-186">Use different storage accounts for each AD FS VM in the farm.</span></span> <span data-ttu-id="64eff-187">Ez a megközelítés segít biztosítani, hogy egyetlen tárfiók hibája miatt nem teszi a teljes farm nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="64eff-187">This approach helps to ensure that a failure in a single storage account does not make the entire farm inaccessible.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="64eff-188">Azt javasoljuk, hogy használatát [által kezelt lemezeken](/azure/storage/storage-managed-disks-overview).</span><span class="sxs-lookup"><span data-stu-id="64eff-188">We recommend the use of [managed disks](/azure/storage/storage-managed-disks-overview).</span></span> <span data-ttu-id="64eff-189">Kezelt lemezeken nincs szükség a storage-fiók.</span><span class="sxs-lookup"><span data-stu-id="64eff-189">Managed disks do not require a storage account.</span></span> <span data-ttu-id="64eff-190">Egyszerűen adja meg, méretének és típusú lemez, és azt magas rendelkezésre állású úgy van telepítve.</span><span class="sxs-lookup"><span data-stu-id="64eff-190">You simply specify the size and type of disk and it is deployed in a highly available way.</span></span> <span data-ttu-id="64eff-191">A [architektúrák hivatkozhat](/azure/architecture/reference-architectures/) jelenleg nem telepítheti a felügyelt lemezek, de a [sablon építőelemeket](https://github.com/mspnp/template-building-blocks/wiki) központi telepítése a kezelt lemezeken 2-es verzióját frissíti.</span><span class="sxs-lookup"><span data-stu-id="64eff-191">Our [reference architectures](/azure/architecture/reference-architectures/) do not currently deploy managed disks but the [template building blocks](https://github.com/mspnp/template-building-blocks/wiki) will be updated to deploy managed disks in version 2.</span></span>

<span data-ttu-id="64eff-192">Hozzon létre külön az Azure rendelkezésre állási készletek az AD FS és WAP virtuális gépeket.</span><span class="sxs-lookup"><span data-stu-id="64eff-192">Create separate Azure availability sets for the AD FS and WAP VMs.</span></span> <span data-ttu-id="64eff-193">Győződjön meg arról, hogy nincsenek-e legalább két virtuális gépek minden.</span><span class="sxs-lookup"><span data-stu-id="64eff-193">Ensure that there are at least two VMs in each set.</span></span> <span data-ttu-id="64eff-194">Egyes rendelkezésre állási csoportot rendelkeznie kell legalább két frissítési tartományok és két tartalék tartományok.</span><span class="sxs-lookup"><span data-stu-id="64eff-194">Each availability set must have at least two update domains and two fault domains.</span></span>

<span data-ttu-id="64eff-195">A terheléselosztó konfigurálására az AD FS virtuális gépek és WAP virtuális gépek az alábbiak szerint:</span><span class="sxs-lookup"><span data-stu-id="64eff-195">Configure the load balancers for the AD FS VMs and WAP VMs as follows:</span></span>

* <span data-ttu-id="64eff-196">Egy Azure terheléselosztó számára biztosít hozzáférést a WAP virtuális gépeket, és a osszák szét a farm AD FS-kiszolgáló belső terheléselosztót használja.</span><span class="sxs-lookup"><span data-stu-id="64eff-196">Use an Azure load balancer to provide external access to the WAP VMs, and an internal load balancer to distribute the load across the AD FS servers in the farm.</span></span>
* <span data-ttu-id="64eff-197">Port 443-as (HTTPS) az AD FS/WAP-kiszolgálókkal való szereplő forgalom csak továbbítja.</span><span class="sxs-lookup"><span data-stu-id="64eff-197">Only pass traffic appearing on port 443 (HTTPS) to the AD FS/WAP servers.</span></span>
* <span data-ttu-id="64eff-198">Adjon meg egy statikus IP-címet a terheléselosztóhoz.</span><span class="sxs-lookup"><span data-stu-id="64eff-198">Give the load balancer a static IP address.</span></span>
* <span data-ttu-id="64eff-199">Hozzon létre egy HTTPS helyett a TCP protokoll állapotmintáihoz.</span><span class="sxs-lookup"><span data-stu-id="64eff-199">Create a health probe using the TCP protocol rather than HTTPS.</span></span> <span data-ttu-id="64eff-200">A ping paranccsal ellenőrizheti, hogy egy AD FS-kiszolgáló működik-e a 443-as portot.</span><span class="sxs-lookup"><span data-stu-id="64eff-200">You can ping port 443 to verify that an AD FS server is functioning.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="64eff-201">AD FS-kiszolgálók úgy próbál mintavételi használ a load balancer nem a HTTPS-végpontnak a kiszolgálónév jelzése (SNI) protokoll használatára.</span><span class="sxs-lookup"><span data-stu-id="64eff-201">AD FS servers use the Server Name Indication (SNI) protocol, so attempting to probe using an HTTPS endpoint from the load balancer fails.</span></span>
  > 
  > 
* <span data-ttu-id="64eff-202">Adja hozzá a DNS *A* rekord, a tartományhoz, az AD FS terheléselosztóhoz.</span><span class="sxs-lookup"><span data-stu-id="64eff-202">Add a DNS *A* record to the domain for the AD FS load balancer.</span></span> <span data-ttu-id="64eff-203">Adja meg a terheléselosztó IP-címét, és adjon neki egy nevet a tartomány (például adfs.contoso.com).</span><span class="sxs-lookup"><span data-stu-id="64eff-203">Specify the IP address of the load balancer, and give it a name in the domain (such as adfs.contoso.com).</span></span> <span data-ttu-id="64eff-204">Ez a név az ügyfelek és az AD FS kiszolgálófarm eléréséhez használja a WAP-kiszolgálókkal.</span><span class="sxs-lookup"><span data-stu-id="64eff-204">This is the name clients and the WAP servers use to access the AD FS server farm.</span></span>

### <a name="ad-fs-security"></a><span data-ttu-id="64eff-205">AD FS biztonsági</span><span class="sxs-lookup"><span data-stu-id="64eff-205">AD FS security</span></span> 

<span data-ttu-id="64eff-206">Közvetlen veszélyeknek való kitettség megelőzése, az AD FS-kiszolgáló az internethez.</span><span class="sxs-lookup"><span data-stu-id="64eff-206">Prevent direct exposure of the AD FS servers to the Internet.</span></span> <span data-ttu-id="64eff-207">AD FS-kiszolgálók azok a számítógépek a tartományhoz, amely a biztonsági jogkivonat biztosításához teljes körű engedéllyel rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="64eff-207">AD FS servers are domain-joined computers that have full authorization to grant security tokens.</span></span> <span data-ttu-id="64eff-208">Ha egy kiszolgáló sérül, a rosszindulatú felhasználók kiadhatnak teljes körű hozzáférési jogkivonatot kibocsátani minden webes alkalmazáshoz és AD FS által védett összes összevonási kiszolgálóknak.</span><span class="sxs-lookup"><span data-stu-id="64eff-208">If a server is compromised, a malicious user can issue full access tokens to all web applications and to all federation servers that are protected by AD FS.</span></span> <span data-ttu-id="64eff-209">Ha a rendszer megbízható partner helyekről nem csatlakoztatható külső felhasználók által érkező kérések kell kezelni, a WAP-kiszolgálókkal segítségével ezeket a kérelmeket kezeli.</span><span class="sxs-lookup"><span data-stu-id="64eff-209">If your system must handle requests from external users not connecting from trusted partner sites, use WAP servers to handle these requests.</span></span> <span data-ttu-id="64eff-210">További információkért lásd: [összevonási kiszolgálóproxy elhelyezése][where-to-place-an-fs-proxy].</span><span class="sxs-lookup"><span data-stu-id="64eff-210">For more information, see [Where to Place a Federation Server Proxy][where-to-place-an-fs-proxy].</span></span>

<span data-ttu-id="64eff-211">Helyezze el az AD FS-kiszolgáló és a WAP-kiszolgálókkal rendelkező saját tűzfalak külön alhálózatokon.</span><span class="sxs-lookup"><span data-stu-id="64eff-211">Place AD FS servers and WAP servers in separate subnets with their own firewalls.</span></span> <span data-ttu-id="64eff-212">NSG-szabályok segítségével határozza meg a tűzfal-szabályokat.</span><span class="sxs-lookup"><span data-stu-id="64eff-212">You can use NSG rules to define firewall rules.</span></span> <span data-ttu-id="64eff-213">Ha átfogóbb védelmi van szüksége egy további biztonsági szegélyhálózati körül kiszolgálók egy párt alhálózatok segítségével megvalósítható, és virtuális készülékekre (NVAs), a dokumentumban leírt [biztonságos hibrid hálózat az Azure-ban Internet-hozzáféréssel rendelkező architektúra][implementing-a-secure-hybrid-network-architecture-with-internet-access].</span><span class="sxs-lookup"><span data-stu-id="64eff-213">If you require more comprehensive protection you can implement an additional security perimeter around servers by using a pair of subnets and network virtual appliances (NVAs), as described in the document [Implementing a secure hybrid network architecture with Internet access in Azure][implementing-a-secure-hybrid-network-architecture-with-internet-access].</span></span> <span data-ttu-id="64eff-214">Összes tűzfalnak engedélyezni kell az adatforgalmat a 443-as (HTTPS) porton.</span><span class="sxs-lookup"><span data-stu-id="64eff-214">All firewalls should allow traffic on port 443 (HTTPS).</span></span>

<span data-ttu-id="64eff-215">Korlátozhatja a hozzáférést a közvetlen bejelentkezés az AD FS és a WAP-kiszolgálókat.</span><span class="sxs-lookup"><span data-stu-id="64eff-215">Restrict direct sign in access to the AD FS and WAP servers.</span></span> <span data-ttu-id="64eff-216">Csak a DevOps személyzet kell kapcsolódnia.</span><span class="sxs-lookup"><span data-stu-id="64eff-216">Only DevOps staff should be able to connect.</span></span>

<span data-ttu-id="64eff-217">A WAP-kiszolgálókkal nem csatlakozik a tartományhoz.</span><span class="sxs-lookup"><span data-stu-id="64eff-217">Do not join the WAP servers to the domain.</span></span>

### <a name="ad-fs-installation"></a><span data-ttu-id="64eff-218">Az AD FS-telepítés</span><span class="sxs-lookup"><span data-stu-id="64eff-218">AD FS installation</span></span> 

<span data-ttu-id="64eff-219">A cikk [egy összevonási kiszolgálók farmja központi telepítésének] [ Deploying_a_federation_server_farm] részletes útmutatást nyújt a telepítése és konfigurálása az AD FS.</span><span class="sxs-lookup"><span data-stu-id="64eff-219">The article [Deploying a Federation Server Farm][Deploying_a_federation_server_farm] provides detailed instructions for installing and configuring AD FS.</span></span> <span data-ttu-id="64eff-220">A következő feladatokat a farm első AD FS-kiszolgáló konfigurálása előtt:</span><span class="sxs-lookup"><span data-stu-id="64eff-220">Perform the following tasks before configuring the first AD FS server in the farm:</span></span>

1. <span data-ttu-id="64eff-221">A kiszolgáló hitelesítése nyilvánosan megbízható tanúsítványok beszerzését.</span><span class="sxs-lookup"><span data-stu-id="64eff-221">Obtain a publicly trusted certificate for performing server authentication.</span></span> <span data-ttu-id="64eff-222">A *tulajdonosnévvel* tartalmaznia kell a név használni kívánt az összevonási szolgáltatás eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="64eff-222">The *subject name* must contain the name clients use to access the federation service.</span></span> <span data-ttu-id="64eff-223">Ez lehet a DNS-név, a terheléselosztóhoz, például regisztrált *adfs.contoso.com* (ne használja, mint a helyettesítő nevek **. contoso.com*, biztonsági okokból).</span><span class="sxs-lookup"><span data-stu-id="64eff-223">This can be the DNS name registered for the load balancer, for example, *adfs.contoso.com* (avoid using wildcard names such as **.contoso.com*, for security reasons).</span></span> <span data-ttu-id="64eff-224">Egy tanúsítvány használható az összes AD FS kiszolgáló virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="64eff-224">Use the same certificate on all AD FS server VMs.</span></span> <span data-ttu-id="64eff-225">Vásárolhat egy tanúsítványt egy megbízható hitelesítésszolgáltatótól, de ha a szervezete használja az Active Directory tanúsítványszolgáltatás létrehozhat saját.</span><span class="sxs-lookup"><span data-stu-id="64eff-225">You can purchase a certificate from a trusted certification authority, but if your organization uses Active Directory Certificate Services you can create your own.</span></span> 
   
    <span data-ttu-id="64eff-226">A *tulajdonos alternatív neve* használják az eszközregisztrációs szolgáltatást (DRS) való hozzáférés engedélyezése a külső eszközökről.</span><span class="sxs-lookup"><span data-stu-id="64eff-226">The *subject alternative name* is used by the device registration service (DRS) to enable access from external devices.</span></span> <span data-ttu-id="64eff-227">Ezt a következő formában kell *: enterpriseregistration.contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="64eff-227">This should be of the form *enterpriseregistration.contoso.com*.</span></span>
   
    <span data-ttu-id="64eff-228">További információkért lásd: [beszerzése és a Secure Sockets Layer (SSL) tanúsítvány konfigurálása az AD FS][adfs_certificates].</span><span class="sxs-lookup"><span data-stu-id="64eff-228">For more information, see [Obtain and Configure a Secure Sockets Layer (SSL) Certificate for AD FS][adfs_certificates].</span></span>

2. <span data-ttu-id="64eff-229">A tartományvezérlőn hozzon létre egy új legfelső szintű kulcsot a kulcsszolgáltató szolgáltatás számára.</span><span class="sxs-lookup"><span data-stu-id="64eff-229">On the domain controller, generate a new root key for the Key Distribution Service.</span></span> <span data-ttu-id="64eff-230">A hatékony idő az aktuális idő 10 óra (Ez a konfiguráció csökkenti a késés terjesztése és a tartomány közötti kulcsok szinkronizálása előforduló) mínusz beállítása.</span><span class="sxs-lookup"><span data-stu-id="64eff-230">Set the effective time to the current time minus 10 hours (this configuration reduces the delay that can occur in distributing and synchronizing keys across the domain).</span></span> <span data-ttu-id="64eff-231">Ez a lépés nem a csoport az AD FS szolgáltatás futtatásához használt szolgáltatásfiók létrehozása támogatásához szükséges.</span><span class="sxs-lookup"><span data-stu-id="64eff-231">This step is necessary to support creating the group service account that is used to run the AD FS service.</span></span> <span data-ttu-id="64eff-232">A következő PowerShell-parancs ennek példáját mutatja be:</span><span class="sxs-lookup"><span data-stu-id="64eff-232">The following PowerShell command shows an example of how to do this:</span></span>
   
    ```powershell
    Add-KdsRootKey -EffectiveTime (Get-Date).AddHours(-10)
    ```

3. <span data-ttu-id="64eff-233">Minden AD FS-kiszolgáló virtuális gép felvételét a tartományba.</span><span class="sxs-lookup"><span data-stu-id="64eff-233">Add each AD FS server VM to the domain.</span></span>

> [!NOTE]
> <span data-ttu-id="64eff-234">AD FS-ben az elsődleges tartományvezérlő (PDC) emulátorának rugalmas egy fő művelettel futtató tartományvezérlőt telepíti (FSMO) szerepkör, a tartomány fut és elérhető az AD FS virtuális gépek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="64eff-234">To install AD FS, the domain controller running the primary domain controller (PDC) emulator flexible single master operation (FSMO) role for the domain must be running and accessible from the AD FS VMs.</span></span> <span data-ttu-id="64eff-235"><< RBC: van-e lehetőség legyen ez kevesebb ismétlődő? >></span><span class="sxs-lookup"><span data-stu-id="64eff-235"><<RBC: Is there a way to make this less repetitive?>></span></span>
> 
> 

### <a name="ad-fs-trust"></a><span data-ttu-id="64eff-236">AD FS-megbízhatóság</span><span class="sxs-lookup"><span data-stu-id="64eff-236">AD FS trust</span></span> 

<span data-ttu-id="64eff-237">Az Active Directory összevonási szolgáltatások telepítése, és az összevonási kiszolgálók a fiókpartner-szervezetek közötti összevonási megbízhatósági kapcsolatot létesítsen.</span><span class="sxs-lookup"><span data-stu-id="64eff-237">Establish federation trust between your AD FS installation, and the federation servers of any partner organizations.</span></span> <span data-ttu-id="64eff-238">Konfigurálja a jogcímek szűrése és a leképezés szükséges.</span><span class="sxs-lookup"><span data-stu-id="64eff-238">Configure any claims filtering and mapping required.</span></span> 

* <span data-ttu-id="64eff-239">Minden egyes partnerszervezethez DevOps személyzet meg kell adnia egy függőentitás-megbízhatóságot az AD FS-kiszolgálókon keresztül érhető el webes alkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="64eff-239">DevOps staff at each partner organization must add a relying party trust for the web applications accessible through your AD FS servers.</span></span>
* <span data-ttu-id="64eff-240">A szervezet DevOps munkatársaival kell konfigurálnia a jogcím-szolgáltatói megbízhatóság ahhoz, hogy bízzon meg a jogcímeket, amely a fiókpartner-szervezetek, adja meg az AD FS-kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="64eff-240">DevOps staff in your organization must configure claims-provider trust to enable your AD FS servers to trust the claims that partner organizations provide.</span></span>
* <span data-ttu-id="64eff-241">A szervezet DevOps munkatársaival is be kell állítania az AD FS felelt meg a jogcímek továbbítása a szervezet webes alkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="64eff-241">DevOps staff in your organization must also configure AD FS to pass claims on to your organization's web applications.</span></span>
  
<span data-ttu-id="64eff-242">További információkért lásd: [összevonási megbízhatósági létrehozó][establishing-federation-trust].</span><span class="sxs-lookup"><span data-stu-id="64eff-242">For more information, see [Establishing Federation Trust][establishing-federation-trust].</span></span>

<span data-ttu-id="64eff-243">A vállalat webes alkalmazások közzététele, és elérhetővé teszi azokat a külső partnerekkel való használatával előhitelesítési segítségével a WAP-kiszolgálókkal.</span><span class="sxs-lookup"><span data-stu-id="64eff-243">Publish your organization's web applications and make them available to external partners by using preauthentication through the WAP servers.</span></span> <span data-ttu-id="64eff-244">További információkért lásd: [AD FS előhitelesítést használó alkalmazások közzétételének][publish_applications_using_AD_FS_preauthentication]</span><span class="sxs-lookup"><span data-stu-id="64eff-244">For more information, see [Publish Applications using AD FS Preauthentication][publish_applications_using_AD_FS_preauthentication]</span></span>

<span data-ttu-id="64eff-245">Az AD FS támogatja a token átalakítása és növelését.</span><span class="sxs-lookup"><span data-stu-id="64eff-245">AD FS supports token transformation and augmentation.</span></span> <span data-ttu-id="64eff-246">Az Azure Active Directory nem biztosítja ezt a szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="64eff-246">Azure Active Directory does not provide this feature.</span></span> <span data-ttu-id="64eff-247">Az AD FS a megbízhatósági kapcsolatok beállításakor a következőket teheti:</span><span class="sxs-lookup"><span data-stu-id="64eff-247">With AD FS, when you set up the trust relationships, you can:</span></span>

* <span data-ttu-id="64eff-248">A jogcímek átalakításához engedélyezési szabályok konfigurálása.</span><span class="sxs-lookup"><span data-stu-id="64eff-248">Configure claim transformations for authorization rules.</span></span> <span data-ttu-id="64eff-249">Például egy nem Microsoft-partner szervezet olyanra, amely az adott Active Directory Tartományi adhatják meg a szervezet által használt alakból csoport biztonsági is leképezheti.</span><span class="sxs-lookup"><span data-stu-id="64eff-249">For example, you can map group security from a representation used by a non-Microsoft partner organization to something that that Active Directory DS can authorize in your organization.</span></span>
* <span data-ttu-id="64eff-250">Alakítsa át a jogcímeket egy adott formátumból egy másikra.</span><span class="sxs-lookup"><span data-stu-id="64eff-250">Transform claims from one format to another.</span></span> <span data-ttu-id="64eff-251">Például leképezheti a SAML 2.0 SAML 1.1, ha az alkalmazás csak SAML 1.1 jogcímek támogatja.</span><span class="sxs-lookup"><span data-stu-id="64eff-251">For example, you can map from SAML 2.0 to SAML 1.1 if your application only supports SAML 1.1 claims.</span></span>

### <a name="ad-fs-monitoring"></a><span data-ttu-id="64eff-252">Az AD FS figyelése</span><span class="sxs-lookup"><span data-stu-id="64eff-252">AD FS monitoring</span></span> 

<span data-ttu-id="64eff-253">A [Microsoft System Center felügyeleti csomag az Active Directory összevonási szolgáltatások 2012 R2] [ oms-adfs-pack] proaktív és reaktív felügyelete, az összevonási kiszolgáló az AD FS üzembe helyezése.</span><span class="sxs-lookup"><span data-stu-id="64eff-253">The [Microsoft System Center Management Pack for Active Directory Federation Services 2012 R2][oms-adfs-pack] provides both proactive and reactive monitoring of your AD FS deployment for the federation server.</span></span> <span data-ttu-id="64eff-254">Ez a felügyeleti csomag figyeli:</span><span class="sxs-lookup"><span data-stu-id="64eff-254">This management pack monitors:</span></span>

* <span data-ttu-id="64eff-255">Az események, hogy az AD FS szolgáltatás az eseménynaplókban rögzíti.</span><span class="sxs-lookup"><span data-stu-id="64eff-255">Events that the AD FS service records in its event logs.</span></span>
* <span data-ttu-id="64eff-256">Az AD FS teljesítményszámlálók gyűjtése a teljesítményadatokat.</span><span class="sxs-lookup"><span data-stu-id="64eff-256">The performance data that the AD FS performance counters collect.</span></span> 
* <span data-ttu-id="64eff-257">Általános állapotát, az AD FS rendszer és a webes alkalmazások (függő entitások), és lehetővé teszi a riasztások kritikus hibák és figyelmeztetések.</span><span class="sxs-lookup"><span data-stu-id="64eff-257">The overall health of the AD FS system and web applications (relying parties), and provides alerts for critical issues and warnings.</span></span> 

## <a name="scalability-considerations"></a><span data-ttu-id="64eff-258">Méretezési szempontok</span><span class="sxs-lookup"><span data-stu-id="64eff-258">Scalability considerations</span></span>

<span data-ttu-id="64eff-259">A következőket kell figyelembe venni, a cikk összesített [az AD FS üzembe helyezés megtervezésében][plan-your-adfs-deployment], egyfajta kiindulópontot biztosítva az AD FS-farmok méretezési:</span><span class="sxs-lookup"><span data-stu-id="64eff-259">The following considerations, summarized from the article [Plan your AD FS deployment][plan-your-adfs-deployment], give a starting point for sizing AD FS farms:</span></span>

* <span data-ttu-id="64eff-260">Ha kevesebb mint 1000 felhasználó, dedikált kiszolgálókat nem hoz létre, de ehelyett mindegyik az Active Directory Tartományi kiszolgálón a felhőben az AD FS telepítéséhez.</span><span class="sxs-lookup"><span data-stu-id="64eff-260">If you have fewer than 1000 users, do not create dedicated servers, but instead install AD FS on each of the Active Directory DS servers in the cloud.</span></span> <span data-ttu-id="64eff-261">Győződjön meg arról, hogy rendelkezik-e legalább két Active Directory Tartományi kiszolgálók rendelkezésre álljon.</span><span class="sxs-lookup"><span data-stu-id="64eff-261">Make sure that you have at least two Active Directory DS servers to maintain availability.</span></span> <span data-ttu-id="64eff-262">Egyetlen WAP-kiszolgáló létrehozása.</span><span class="sxs-lookup"><span data-stu-id="64eff-262">Create a single WAP server.</span></span>
* <span data-ttu-id="64eff-263">Ha 1000 és 15000 felhasználók között, hozzon létre két dedikált AD FS-kiszolgáló és két dedikált WAP-kiszolgálókkal.</span><span class="sxs-lookup"><span data-stu-id="64eff-263">If you have between 1000 and 15000 users, create two dedicated AD FS servers and two dedicated WAP servers.</span></span>
* <span data-ttu-id="64eff-264">Ha 15000 és 60000 felhasználók között, hozzon létre három és öt dedikált AD FS-kiszolgáló és legalább két dedikált WAP-kiszolgáló között.</span><span class="sxs-lookup"><span data-stu-id="64eff-264">If you have between 15000 and 60000 users, create between three and five dedicated AD FS servers and at least two dedicated WAP servers.</span></span>

<span data-ttu-id="64eff-265">Ezeket a szempontokat azt feltételezik, kettős négymagos virtuális gép (szabványos D4_v2 vagy nagyobb frekvenciával) használt méretek az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="64eff-265">These considerations assume that you are using dual quad-core VM (Standard D4_v2, or better) sizes in Azure.</span></span>

<span data-ttu-id="64eff-266">Használatakor a belső Windows-adatbázis AD FS konfigurációs adatainak tárolásához, azonban legfeljebb nyolc, a farm AD FS-kiszolgáló számára.</span><span class="sxs-lookup"><span data-stu-id="64eff-266">If you are using the Windows Internal Database to store AD FS configuration data, you are limited to eight AD FS servers in the farm.</span></span> <span data-ttu-id="64eff-267">Ha várhatóan, hogy szüksége lesz a jövőben további, használja az SQL Server.</span><span class="sxs-lookup"><span data-stu-id="64eff-267">If you anticipate that you will need more in the future, use SQL Server.</span></span> <span data-ttu-id="64eff-268">További információkért lásd: [az AD FS konfigurációs adatbázis szerepe][adfs-configuration-database].</span><span class="sxs-lookup"><span data-stu-id="64eff-268">For more information, see [The Role of the AD FS Configuration Database][adfs-configuration-database].</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="64eff-269">Rendelkezésre állási szempontok</span><span class="sxs-lookup"><span data-stu-id="64eff-269">Availability considerations</span></span>

<span data-ttu-id="64eff-270">SQL Server vagy a belső Windows-adatbázis segítségével az AD FS konfigurációs adatainak tárolására.</span><span class="sxs-lookup"><span data-stu-id="64eff-270">You can use either SQL Server or the Windows Internal Database to hold AD FS configuration information.</span></span> <span data-ttu-id="64eff-271">A belső Windows-adatbázis alapvető redundanciát biztosít.</span><span class="sxs-lookup"><span data-stu-id="64eff-271">The Windows Internal Database provides basic redundancy.</span></span> <span data-ttu-id="64eff-272">Módosításokat írja közvetlenül csak egy AD FS adatbázis az AD FS fürtben, amíg a többi kiszolgáló lekéréses replikáció segítségével hozzájuk tartozó adatbázisok naprakészen tartása.</span><span class="sxs-lookup"><span data-stu-id="64eff-272">Changes are written directly to only one of the AD FS databases in the AD FS cluster, while the other servers use pull replication to keep their databases up to date.</span></span> <span data-ttu-id="64eff-273">Adja meg az SQL Server használatával is teljes adatbázis-redundancia és a Feladatátvételi fürtszolgáltatás vagy tükrözés használata magas rendelkezésre állású.</span><span class="sxs-lookup"><span data-stu-id="64eff-273">Using SQL Server can provide full database redundancy and high availability using failover clustering or mirroring.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="64eff-274">Felügyeleti szempontok</span><span class="sxs-lookup"><span data-stu-id="64eff-274">Manageability considerations</span></span>

<span data-ttu-id="64eff-275">DevOps személyzet kell készíteni a következő feladatok végezhetők el:</span><span class="sxs-lookup"><span data-stu-id="64eff-275">DevOps staff should be prepared to perform the following tasks:</span></span>

* <span data-ttu-id="64eff-276">Az összevonási kiszolgálók, például az AD FS-farm kezelése, az összevonási kiszolgálókon a megbízhatósági házirend kezelése és az összevonási szolgáltatás által használt tanúsítványok kezelése kezelése.</span><span class="sxs-lookup"><span data-stu-id="64eff-276">Managing the federation servers, including managing the AD FS farm, managing trust policy on the federation servers, and managing the certificates used by the federation services.</span></span>
* <span data-ttu-id="64eff-277">A WAP-kiszolgálókkal, beleértve a WAP-farmot, és a tanúsítványok kezelése kezelése.</span><span class="sxs-lookup"><span data-stu-id="64eff-277">Managing the WAP servers including managing the WAP farm and certificates.</span></span>
* <span data-ttu-id="64eff-278">Webes alkalmazások, beleértve a függő entitások számára, a hitelesítési módszerek és a jogcímek leképezések konfigurálása kezelése.</span><span class="sxs-lookup"><span data-stu-id="64eff-278">Managing web applications including configuring relying parties, authentication methods, and claims mappings.</span></span>
* <span data-ttu-id="64eff-279">AD FS-összetevők biztonsági mentéséről.</span><span class="sxs-lookup"><span data-stu-id="64eff-279">Backing up AD FS components.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="64eff-280">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="64eff-280">Security considerations</span></span>

<span data-ttu-id="64eff-281">Az AD FS a HTTPS protokollt használja, ezért győződjön meg arról, hogy az NSG-szabályok az alhálózat tartalmazó webes réteg virtuális gépek engedély HTTPS-kéréseket.</span><span class="sxs-lookup"><span data-stu-id="64eff-281">AD FS utilizes the HTTPS protocol, so make sure that the NSG rules for the subnet containing the web tier VMs permit HTTPS requests.</span></span> <span data-ttu-id="64eff-282">Ezeket a kérelmeket az alhálózatok, a webes réteg, üzleti szint, adatrétegbeli, személyes DMZ, nyilvános DMZ és az AD FS-kiszolgáló tartalmazó alhálózat tartalmazó is származnak a helyszíni hálózat.</span><span class="sxs-lookup"><span data-stu-id="64eff-282">These requests can originate from the on-premises network, the subnets containing the web tier, business tier, data tier, private DMZ, public DMZ, and the subnet containing the AD FS servers.</span></span>

<span data-ttu-id="64eff-283">Érdemes lehet virtuális hálózati berendezések csoportja, amely a virtuális hálózat széle a naplózási célokra áthaladó forgalom részletes információkat naplózza.</span><span class="sxs-lookup"><span data-stu-id="64eff-283">Consider using a set of network virtual appliances that logs detailed information on traffic traversing the edge of your virtual network for auditing purposes.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="64eff-284">A megoldás üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="64eff-284">Deploy the solution</span></span>

<span data-ttu-id="64eff-285">A megoldás érhető el a [GitHub] [ github] központi telepítése a referencia-architektúrában.</span><span class="sxs-lookup"><span data-stu-id="64eff-285">A solution is available on [GitHub][github] to deploy this reference architecture.</span></span> <span data-ttu-id="64eff-286">Szüksége lesz a legújabb verzióját a [Azure CLI] [ azure-cli] futtatni a Powershell-parancsfájlt, amely a megoldás telepít.</span><span class="sxs-lookup"><span data-stu-id="64eff-286">You will need the latest version of the [Azure CLI][azure-cli] to run the Powershell script that deploys the solution.</span></span> <span data-ttu-id="64eff-287">A referencia-architektúrában telepítéséhez kövesse az alábbi lépéseket:</span><span class="sxs-lookup"><span data-stu-id="64eff-287">To deploy the reference architecture, follow these steps:</span></span>

1. <span data-ttu-id="64eff-288">Töltse le, vagy klónozza a megoldás mappát [GitHub] [ github] a helyi számítógépre.</span><span class="sxs-lookup"><span data-stu-id="64eff-288">Download or clone the solution folder from [GitHub][github] to your local machine.</span></span>

2. <span data-ttu-id="64eff-289">Nyissa meg az Azure parancssori felület, és keresse meg a helyi mappát.</span><span class="sxs-lookup"><span data-stu-id="64eff-289">Open the Azure CLI and navigate to the local solution folder.</span></span>

3. <span data-ttu-id="64eff-290">Futtassa az alábbi parancsot:</span><span class="sxs-lookup"><span data-stu-id="64eff-290">Run the following command:</span></span>
   
    ```powershell
    .\Deploy-ReferenceArchitecture.ps1 <subscription id> <location> <mode>
    ```
   
    <span data-ttu-id="64eff-291">Cserélje le `<subscription id>` az Azure-előfizetés-azonosítóval.</span><span class="sxs-lookup"><span data-stu-id="64eff-291">Replace `<subscription id>` with your Azure subscription ID.</span></span>
   
    <span data-ttu-id="64eff-292">A `<location>` paraméter esetében adjon meg egy Azure-régiót (pl. `eastus` vagy `westus`).</span><span class="sxs-lookup"><span data-stu-id="64eff-292">For `<location>`, specify an Azure region, such as `eastus` or `westus`.</span></span>
   
    <span data-ttu-id="64eff-293">A `<mode>` paraméter szabályozza a lépésköz legyen a központi telepítést, és a következő értékek egyike lehet:</span><span class="sxs-lookup"><span data-stu-id="64eff-293">The `<mode>` parameter controls the granularity of the deployment, and can be one of the following values:</span></span>
   
   * <span data-ttu-id="64eff-294">`Onpremise`: A helyszíni szimulált környezetben telepíti.</span><span class="sxs-lookup"><span data-stu-id="64eff-294">`Onpremise`: Deploys a simulated on-premises environment.</span></span> <span data-ttu-id="64eff-295">A központi telepítés tesztelése és kísérletet, ha nem rendelkezik meglévő helyszíni hálózat, vagy ha azt szeretné, hogy a referencia-architektúrában módosítása nélkül tesztelheti a meglévő konfigurációját a helyi hálózati is használható.</span><span class="sxs-lookup"><span data-stu-id="64eff-295">You can use this deployment to test and experiment if you do not have an existing on-premises network, or if you want to test this reference architecture without changing the configuration of your existing on-premises network.</span></span>
   * <span data-ttu-id="64eff-296">`Infrastructure`: a virtuális hálózat infrastruktúra és a jump be telepíti.</span><span class="sxs-lookup"><span data-stu-id="64eff-296">`Infrastructure`: deploys the VNet infrastructure and jump box.</span></span>
   * <span data-ttu-id="64eff-297">`CreateVpn`: egy Azure virtuális hálózati átjáró telepíti, és azt a szimulált a helyszíni hálózathoz csatlakozik.</span><span class="sxs-lookup"><span data-stu-id="64eff-297">`CreateVpn`: deploys an Azure virtual network gateway and connects it to the simulated on-premises network.</span></span>
   * <span data-ttu-id="64eff-298">`AzureADDS`: központilag telepíti az Active Directory Tartományi kiszolgálóként működnek virtuális gépek, virtuális gépeken telepíti az Active Directory, és létrehozza a tartományt az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="64eff-298">`AzureADDS`: deploys the VMs acting as Active Directory DS servers, deploys Active Directory to these VMs, and creates the domain in Azure.</span></span>
   * <span data-ttu-id="64eff-299">`AdfsVm`: az AD FS virtuális gépeket telepít, és csatlakoztatja őket a tartományhoz az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="64eff-299">`AdfsVm`: deploys the AD FS VMs and joins them to the domain in Azure.</span></span>
   * <span data-ttu-id="64eff-300">`PublicDMZ`: az Azure nyilvános DMZ telepíti.</span><span class="sxs-lookup"><span data-stu-id="64eff-300">`PublicDMZ`: deploys the public DMZ in Azure.</span></span>
   * <span data-ttu-id="64eff-301">`ProxyVm`: az AD FS proxy virtuális gépeket telepít, és csatlakoztatja őket a tartományhoz az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="64eff-301">`ProxyVm`: deploys the AD FS proxy VMs and joins them to the domain in Azure.</span></span>
   * <span data-ttu-id="64eff-302">`Prepare`: az előző központitelepítéseinek listáját, telepíti.</span><span class="sxs-lookup"><span data-stu-id="64eff-302">`Prepare`: deploys all of the preceding deployments.</span></span> <span data-ttu-id="64eff-303">**Ez a lehetőség ajánlott, ha egy teljesen új központi telepítést hoz létre, és nem rendelkezik meglévő helyszíni infrastruktúra.**</span><span class="sxs-lookup"><span data-stu-id="64eff-303">**This is the recommended option if you are building an entirely new deployment and you don't have an existing on-premises infrastructure.**</span></span> 
   * <span data-ttu-id="64eff-304">`Workload`: nem kötelezően telepíti a webes, üzleti és adat réteg virtuális gépek és a támogató hálózati.</span><span class="sxs-lookup"><span data-stu-id="64eff-304">`Workload`: optionally deploys web, business, and data tier VMs and supporting network.</span></span> <span data-ttu-id="64eff-305">Nem tartalmazza a `Prepare` telepítési módban.</span><span class="sxs-lookup"><span data-stu-id="64eff-305">Not included in the `Prepare` deployment mode.</span></span>
   * <span data-ttu-id="64eff-306">`PrivateDMZ`: nem kötelezően telepíti a titkos DMZ elé Azure-ban a `Workload` fent telepített virtuális gépek.</span><span class="sxs-lookup"><span data-stu-id="64eff-306">`PrivateDMZ`: optionally deploys the private DMZ in Azure in front of the `Workload` VMs deployed above.</span></span> <span data-ttu-id="64eff-307">Nem tartalmazza a `Prepare` telepítési módban.</span><span class="sxs-lookup"><span data-stu-id="64eff-307">Not included in the `Prepare` deployment mode.</span></span>

4. <span data-ttu-id="64eff-308">Várjon, amíg az üzembe helyezés befejeződik.</span><span class="sxs-lookup"><span data-stu-id="64eff-308">Wait for the deployment to complete.</span></span> <span data-ttu-id="64eff-309">Ha követte a `Prepare` beállítást, a központi telepítést fogad több órát, és az üzenettel befejeződött`Preparation is completed. Please install certificate to all AD FS and proxy VMs.`</span><span class="sxs-lookup"><span data-stu-id="64eff-309">If you used the `Prepare` option, the deployment takes several hours to complete, and finishes with the message `Preparation is completed. Please install certificate to all AD FS and proxy VMs.`</span></span>

5. <span data-ttu-id="64eff-310">Az Ugrás panel újraindítása (*ra-AD FS-mgmt-vm1* a a *ra-AD FS-security-rg* csoport) engedélyezi a DNS-beállítások érvénybe léptetéséhez.</span><span class="sxs-lookup"><span data-stu-id="64eff-310">Restart the jump box (*ra-adfs-mgmt-vm1* in the *ra-adfs-security-rg* group) to allow its DNS settings to take effect.</span></span>

6. <span data-ttu-id="64eff-311">[Az AD FS SSL-tanúsítvány beszerzése] [ adfs_certificates] és a tanúsítvány telepítése az AD FS virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="64eff-311">[Obtain an SSL Certificate for AD FS][adfs_certificates] and install this certificate on the AD FS VMs.</span></span> <span data-ttu-id="64eff-312">Figyelje meg, hogy a kapcsolódás őket a jump mezőben keresztül.</span><span class="sxs-lookup"><span data-stu-id="64eff-312">Note that you can connect to them through the jump box.</span></span> <span data-ttu-id="64eff-313">Az IP-címek *10.0.5.4* és *10.0.5.5*.</span><span class="sxs-lookup"><span data-stu-id="64eff-313">The IP addresses are *10.0.5.4* and *10.0.5.5*.</span></span> <span data-ttu-id="64eff-314">Az alapértelmezett felhasználónév az *contoso\testuser* jelszóval  *AweSome@PW* .</span><span class="sxs-lookup"><span data-stu-id="64eff-314">The default username is *contoso\testuser* with password *AweSome@PW*.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="64eff-315">A megjegyzéseket, a telepítés-ReferenceArchitecture.ps1 parancsfájl ezen a ponton részletes útmutatást egy önaláírt teszttanúsítványt és a szolgáltató használatával hozhat létre a `makecert` parancsot.</span><span class="sxs-lookup"><span data-stu-id="64eff-315">The comments in the Deploy-ReferenceArchitecture.ps1 script at this point provides detailed instructions for creating a self-signed test certificate and authority using the `makecert` command.</span></span> <span data-ttu-id="64eff-316">Azonban elvégzi ezeket a lépéseket, mint egy **tesztelése** csak a makecert éles környezetben által létrehozott tanúsítványok használata nélkül.</span><span class="sxs-lookup"><span data-stu-id="64eff-316">However, perform these steps as a **test** only and do not use the certificates generated by makecert in a production environment.</span></span>
   > 
   > 

7. <span data-ttu-id="64eff-317">Futtassa a következő PowerShell-parancsot az AD FS kiszolgálófarm telepítése:</span><span class="sxs-lookup"><span data-stu-id="64eff-317">Run the following PowerShell command to deploy the AD FS server farm:</span></span>
   
    ```powershell
    .\Deploy-ReferenceArchitecture.ps1 <subscription id> <location> Adfs
    ``` 

8. <span data-ttu-id="64eff-318">Ugrás a keret, tallózással `https://adfs.contoso.com/adfs/ls/idpinitiatedsignon.htm` tesztelése az AD FS telepítése (Előfordulhat, hogy kapott egy tanúsítványt, hogy figyelmen kívül hagyhatja a teszteléshez figyelmeztetés).</span><span class="sxs-lookup"><span data-stu-id="64eff-318">On the jump box, browse to `https://adfs.contoso.com/adfs/ls/idpinitiatedsignon.htm` to test the AD FS installation (you may receive a certificate warning that you can ignore for this test).</span></span> <span data-ttu-id="64eff-319">Győződjön meg arról, hogy megjelenik-e a Contoso Corporation bejelentkezési oldal.</span><span class="sxs-lookup"><span data-stu-id="64eff-319">Verify that the Contoso Corporation sign-in page appears.</span></span> <span data-ttu-id="64eff-320">Jelentkezzen be a *contoso\testuser* jelszóval  *AweS0me@PW* .</span><span class="sxs-lookup"><span data-stu-id="64eff-320">Sign in as *contoso\testuser* with password *AweS0me@PW*.</span></span>

9. <span data-ttu-id="64eff-321">Az SSL-tanúsítvány telepítése az AD FS proxy virtuális gépek.</span><span class="sxs-lookup"><span data-stu-id="64eff-321">Install the SSL certificate on the AD FS proxy VMs.</span></span> <span data-ttu-id="64eff-322">Az IP-címek *10.0.6.4* és *10.0.6.5*.</span><span class="sxs-lookup"><span data-stu-id="64eff-322">The IP addresses are *10.0.6.4* and *10.0.6.5*.</span></span>

10. <span data-ttu-id="64eff-323">Futtassa a következő PowerShell-parancsot az első AD FS-proxy kiszolgálót:</span><span class="sxs-lookup"><span data-stu-id="64eff-323">Run the following PowerShell command to deploy the first AD FS proxy server:</span></span>
   
    ```powershell
    .\Deploy-ReferenceArchitecture.ps1 <subscription id> <location> Proxy1
    ```

11. <span data-ttu-id="64eff-324">Kövesse az utasításokat a parancsfájl által megjelenített első proxykiszolgáló a telepítés tesztelésére.</span><span class="sxs-lookup"><span data-stu-id="64eff-324">Follow the instructions displayed by the script to test the installation of the first proxy server.</span></span>

12. <span data-ttu-id="64eff-325">Futtassa a következő PowerShell-parancsot a második proxy kiszolgálót:</span><span class="sxs-lookup"><span data-stu-id="64eff-325">Run the following PowerShell command to deploy the second proxy server:</span></span>
    
    ```powershell
    .\Deploy-ReferenceArchitecture.ps1 <subscription id> <location> Proxy2
    ```

13. <span data-ttu-id="64eff-326">Kövesse az utasításokat, a parancsfájl által megjelenített, a teljes proxykonfigurációt teszteléséhez.</span><span class="sxs-lookup"><span data-stu-id="64eff-326">Follow the instructions displayed by the script to test the complete proxy configuration.</span></span>

## <a name="next-steps"></a><span data-ttu-id="64eff-327">További lépések</span><span class="sxs-lookup"><span data-stu-id="64eff-327">Next steps</span></span>

* <span data-ttu-id="64eff-328">További tudnivalók [az Azure Active Directory][aad].</span><span class="sxs-lookup"><span data-stu-id="64eff-328">Learn about [Azure Active Directory][aad].</span></span>
* <span data-ttu-id="64eff-329">További tudnivalók [az Azure Active Directory B2C][aadb2c].</span><span class="sxs-lookup"><span data-stu-id="64eff-329">Learn about [Azure Active Directory B2C][aadb2c].</span></span>

<!-- links -->
[extending-ad-to-azure]: adds-extend-domain.md

[vm-recommendations]: ../virtual-machines-windows/single-vm.md
[implementing-a-secure-hybrid-network-architecture]: ../dmz/secure-vnet-hybrid.md
[implementing-a-secure-hybrid-network-architecture-with-internet-access]: ../dmz/secure-vnet-dmz.md
[hybrid-azure-on-prem-vpn]: ../hybrid-networking/vpn.md

[azure-cli]: /azure/azure-resource-manager/xplat-cli-azure-resource-manager
[DRS]: https://technet.microsoft.com/library/dn280945.aspx
[where-to-place-an-fs-proxy]: https://technet.microsoft.com/library/dd807048.aspx
[ADDRS]: https://technet.microsoft.com/library/dn486831.aspx
[plan-your-adfs-deployment]: https://msdn.microsoft.com/library/azure/dn151324.aspx
[ad_network_recommendations]: #network_configuration_recommendations_for_AD_DS_VMs
[adfs_certificates]: https://technet.microsoft.com/library/dn781428(v=ws.11).aspx
[create_service_account_for_adfs_farm]: https://technet.microsoft.com/library/dd807078.aspx
[adfs-configuration-database]: https://technet.microsoft.com/library/ee913581(v=ws.11).aspx
[active-directory-federation-services]: https://technet.microsoft.com/windowsserver/dd448613.aspx
[security-considerations]: #security-considerations
[recommendations]: #recommendations
[active-directory-federation-services-overview]: https://technet.microsoft.com/library/hh831502(v=ws.11).aspx
[establishing-federation-trust]: https://blogs.msdn.microsoft.com/alextch/2011/06/27/establishing-federation-trust/
[Deploying_a_federation_server_farm]:  https://azure.microsoft.com/documentation/articles/active-directory-aadconnect-azure-adfs/
[install_and_configure_the_web_application_proxy_server]: https://technet.microsoft.com/library/dn383662.aspx
[publish_applications_using_AD_FS_preauthentication]: https://technet.microsoft.com/library/dn383640.aspx
[managing-adfs-components]: https://technet.microsoft.com/library/cc759026.aspx
[oms-adfs-pack]: https://www.microsoft.com/download/details.aspx?id=41184
[azure-powershell-download]: https://azure.microsoft.com/documentation/articles/powershell-install-configure/
[aad]: https://azure.microsoft.com/documentation/services/active-directory/
[aadb2c]: https://azure.microsoft.com/documentation/services/active-directory-b2c/
[adfs-intro]: /azure/active-directory/active-directory-aadconnect-azure-adfs
[github]: https://github.com/mspnp/reference-architectures/tree/master/identity/adfs
[adfs_certificates]: https://technet.microsoft.com/library/dn781428(v=ws.11).aspx
[considerations]: ./considerations.md
[visio-download]: https://archcenter.azureedge.net/cdn/identity-architectures.vsdx
[0]: ./images/adfs.png "biztonságos és az Active Directory hibrid hálózati architektúra"
