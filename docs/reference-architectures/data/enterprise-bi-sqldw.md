---
title: Enterprise BI és SQL Data Warehouse
description: A relációs adatok az üzleti elemzéseket kaphat az Azure tárolja a helyszíni
author: MikeWasson
ms.date: 07/01/2018
ms.openlocfilehash: e3542e40b4b6d1f604f93bb21528f34ba7f22fc6
ms.sourcegitcommit: 58d93e7ac9a6d44d5668a187a6827d7cd4f5a34d
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/02/2018
ms.locfileid: "37142335"
---
# <a name="enterprise-bi-with-sql-data-warehouse"></a><span data-ttu-id="6357c-103">Enterprise BI és SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="6357c-103">Enterprise BI with SQL Data Warehouse</span></span>

<span data-ttu-id="6357c-104">Ez a referenciaarchitektúra valósít meg egy [ELT](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) (kinyerési, betöltési, átalakítási) folyamat, amely helyez át adatokat a helyszíni SQL Server-adatbázisból az SQL Data Warehouse-ba, és átalakítja az adatokat az elemzéshez.</span><span class="sxs-lookup"><span data-stu-id="6357c-104">This reference architecture implements an [ELT](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) (extract-load-transform) pipeline that moves data from an on-premises SQL Server database into SQL Data Warehouse and transforms the data for analysis.</span></span> [<span data-ttu-id="6357c-105">**A megoldás üzembe helyezése**.</span><span class="sxs-lookup"><span data-stu-id="6357c-105">**Deploy this solution**.</span></span>](#deploy-the-solution)

![](./images/enterprise-bi-sqldw.png)

<span data-ttu-id="6357c-106">**A forgatókönyv**: egy a szervezet rendelkezik a helyszíni SQL Server-adatbázisban tárolt nagy OLTP adatkészlet.</span><span class="sxs-lookup"><span data-stu-id="6357c-106">**Scenario**: An organization has a large OLTP data set stored in a SQL Server database on premises.</span></span> <span data-ttu-id="6357c-107">A szervezet célja az SQL Data Warehouse használata a Power BI segítségével történő elemzését.</span><span class="sxs-lookup"><span data-stu-id="6357c-107">The organization wants to use SQL Data Warehouse to perform analysis using Power BI.</span></span> 

<span data-ttu-id="6357c-108">Ez a referenciaarchitektúra egyszeri vagy igény szerinti feladat lett tervezve.</span><span class="sxs-lookup"><span data-stu-id="6357c-108">This reference architecture is designed for one-time or on-demand jobs.</span></span> <span data-ttu-id="6357c-109">Adatok áthelyezése (óránként vagy naponta) tartósan van szüksége, ha automatizált munkafolyamatokat az Azure Data Factory használatát javasoljuk.</span><span class="sxs-lookup"><span data-stu-id="6357c-109">If you need to move data on a continuing basis (hourly or daily), we recommend using Azure Data Factory to define an automated workflow.</span></span> <span data-ttu-id="6357c-110">Egy referencia-architektúra, amely a Data Factory használja, lásd: [vállalati bi-ban az SQL Data Warehouse és az Azure Data Factory automatikus](./enterprise-bi-adf.md).</span><span class="sxs-lookup"><span data-stu-id="6357c-110">For a reference architecture that uses Data Factory, see [Automated enterprise BI with SQL Data Warehouse and Azure Data Factory](./enterprise-bi-adf.md).</span></span>

## <a name="architecture"></a><span data-ttu-id="6357c-111">Architektúra</span><span class="sxs-lookup"><span data-stu-id="6357c-111">Architecture</span></span>

<span data-ttu-id="6357c-112">Az architektúra a következőkben leírt összetevőkből áll.</span><span class="sxs-lookup"><span data-stu-id="6357c-112">The architecture consists of the following components.</span></span>

### <a name="data-source"></a><span data-ttu-id="6357c-113">Adatforrás</span><span class="sxs-lookup"><span data-stu-id="6357c-113">Data source</span></span>

<span data-ttu-id="6357c-114">**Egy SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="6357c-114">**SQL Server**.</span></span> <span data-ttu-id="6357c-115">Az adatok helyszíni SQL Server-adatbázis található.</span><span class="sxs-lookup"><span data-stu-id="6357c-115">The source data is located in a SQL Server database on premises.</span></span> <span data-ttu-id="6357c-116">A helyszíni környezet szimulálása, ez az architektúra üzembe helyezési szkriptjei virtuális gép létrehozása az Azure-ban telepített SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6357c-116">To simulate the on-premises environment, the deployment scripts for this architecture provision a VM in Azure with SQL Server installed.</span></span> <span data-ttu-id="6357c-117">A [Wide World Importers OLTP mintaadatbázis] [ wwi] szolgál a forrásadatokat.</span><span class="sxs-lookup"><span data-stu-id="6357c-117">The [Wide World Importers OLTP sample database][wwi] is used as the source data.</span></span>

### <a name="ingestion-and-data-storage"></a><span data-ttu-id="6357c-118">Adatfeldolgozási és az adatok tárolása</span><span class="sxs-lookup"><span data-stu-id="6357c-118">Ingestion and data storage</span></span>

<span data-ttu-id="6357c-119">**A BLOB Storage-**.</span><span class="sxs-lookup"><span data-stu-id="6357c-119">**Blob Storage**.</span></span> <span data-ttu-id="6357c-120">A BLOB storage segítségével egy átmeneti területre, másolja az adatokat, mielőtt betöltené azokat az SQL Data Warehouse-bA.</span><span class="sxs-lookup"><span data-stu-id="6357c-120">Blob storage is used as a staging area to copy the data before loading it into SQL Data Warehouse.</span></span>

<span data-ttu-id="6357c-121">**Azure SQL Data Warehouse**.</span><span class="sxs-lookup"><span data-stu-id="6357c-121">**Azure SQL Data Warehouse**.</span></span> <span data-ttu-id="6357c-122">[Az SQL Data Warehouse](/azure/sql-data-warehouse/) egy elosztott rendszer analytics végre, a nagy mennyiségű adat.</span><span class="sxs-lookup"><span data-stu-id="6357c-122">[SQL Data Warehouse](/azure/sql-data-warehouse/) is a distributed system designed to perform analytics on large data.</span></span> <span data-ttu-id="6357c-123">Támogatja a nagy olyan párhuzamos feldolgozási (MPP), épp ezért kiválóan alkalmas nagy teljesítményű elemzési futtatásához.</span><span class="sxs-lookup"><span data-stu-id="6357c-123">It supports massive parallel processing (MPP), which makes it suitable for running high-performance analytics.</span></span> 

### <a name="analysis-and-reporting"></a><span data-ttu-id="6357c-124">Elemzés és jelentéskészítés</span><span class="sxs-lookup"><span data-stu-id="6357c-124">Analysis and reporting</span></span>

<span data-ttu-id="6357c-125">**Az Azure Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="6357c-125">**Azure Analysis Services**.</span></span> <span data-ttu-id="6357c-126">[Analysis Services](/azure/analysis-services/) egy teljes körűen felügyelt szolgáltatás, amely adatmodellezési képességekkel.</span><span class="sxs-lookup"><span data-stu-id="6357c-126">[Analysis Services](/azure/analysis-services/) is a fully managed service that provides data modeling capabilities.</span></span> <span data-ttu-id="6357c-127">Analysis Services használatával, amely a felhasználó lekérdezheti a szemantikai modell létrehozása.</span><span class="sxs-lookup"><span data-stu-id="6357c-127">Use Analysis Services to create a semantic model that users can query.</span></span> <span data-ttu-id="6357c-128">Analysis Services különösen hasznos a forgatókönyvekben BI irányítópult.</span><span class="sxs-lookup"><span data-stu-id="6357c-128">Analysis Services is especially useful in a BI dashboard scenario.</span></span> <span data-ttu-id="6357c-129">Ebben az architektúrában az Analysis Services a szemantikai modell feldolgozása a data warehouse-ból adatokat olvasó, és hatékonyan szolgál az irányítópult-lekérdezéseket.</span><span class="sxs-lookup"><span data-stu-id="6357c-129">In this architecture, Analysis Services reads data from the data warehouse to process the semantic model, and efficiently serves dashboard queries.</span></span> <span data-ttu-id="6357c-130">Gyorsabb lekérdezés-feldolgozás replikái horizontális felskálázásával rugalmas egyidejűségi is támogatja.</span><span class="sxs-lookup"><span data-stu-id="6357c-130">It also supports elastic concurrency, by scaling out replicas for faster query processing.</span></span>

<span data-ttu-id="6357c-131">Jelenleg az Azure Analysis Services rendszerbeli táblázatos modellek, de nem többdimenziós modellek támogatja.</span><span class="sxs-lookup"><span data-stu-id="6357c-131">Currently, Azure Analysis Services supports tabular models but not multidimensional models.</span></span> <span data-ttu-id="6357c-132">Táblázatos modellek használata relációs modellezési hoz létre (táblák és oszlopok), mivel a többdimenziós modellek használata OLAP modellezési szerkezeteket (kockákat, dimenziók és mértékek).</span><span class="sxs-lookup"><span data-stu-id="6357c-132">Tabular models use relational modeling constructs (tables and columns), whereas multidimensional models use OLAP modeling constructs (cubes, dimensions, and measures).</span></span> <span data-ttu-id="6357c-133">Ha többdimenziós modellek van szüksége, használja az SQL Server Analysis Services (SSAS).</span><span class="sxs-lookup"><span data-stu-id="6357c-133">If you require multidimensional models, use SQL Server Analysis Services (SSAS).</span></span> <span data-ttu-id="6357c-134">További információkért lásd: [táblázatos és többdimenziós megoldások összehasonlítása](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span><span class="sxs-lookup"><span data-stu-id="6357c-134">For more information, see [Comparing tabular and multidimensional solutions](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span></span>

<span data-ttu-id="6357c-135">**Power BI**.</span><span class="sxs-lookup"><span data-stu-id="6357c-135">**Power BI**.</span></span> <span data-ttu-id="6357c-136">A Power BI egy üzleti elemzési eszközök az üzleti elemzések készítése adatelemzéshez együttese.</span><span class="sxs-lookup"><span data-stu-id="6357c-136">Power BI is a suite of business analytics tools to analyze data for business insights.</span></span> <span data-ttu-id="6357c-137">Ebben az architektúrában a szemantikai modell az Analysis Servicesben tárolt kérdezi le.</span><span class="sxs-lookup"><span data-stu-id="6357c-137">In this architecture, it queries the semantic model stored in Analysis Services.</span></span>

### <a name="authentication"></a><span data-ttu-id="6357c-138">Hitelesítés</span><span class="sxs-lookup"><span data-stu-id="6357c-138">Authentication</span></span>

<span data-ttu-id="6357c-139">**Az Azure Active Directory** (Azure AD) hitelesíti a felhasználók, akik a Power bi-ban az Analysis Services-kiszolgálóhoz csatlakozhat.</span><span class="sxs-lookup"><span data-stu-id="6357c-139">**Azure Active Directory** (Azure AD) authenticates users who connect to the Analysis Services server through Power BI.</span></span>

## <a name="data-pipeline"></a><span data-ttu-id="6357c-140">Adatfolyamat</span><span class="sxs-lookup"><span data-stu-id="6357c-140">Data pipeline</span></span>
 
<span data-ttu-id="6357c-141">Ez a referenciaarchitektúra használja a [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) mintaadatbázis adatforrásként.</span><span class="sxs-lookup"><span data-stu-id="6357c-141">This reference architecture uses the [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) sample database as a data source.</span></span> <span data-ttu-id="6357c-142">Az adatfolyamatok rendelkezik a következő szakaszokban:</span><span class="sxs-lookup"><span data-stu-id="6357c-142">The data pipeline has the following stages:</span></span>

1. <span data-ttu-id="6357c-143">Az adatok exportálása az SQL Serverről egybesimított fájlokba (bcp segédprogram).</span><span class="sxs-lookup"><span data-stu-id="6357c-143">Export the data from SQL Server to flat files (bcp utility).</span></span>
2. <span data-ttu-id="6357c-144">Az egybesimított fájlok másolása az Azure Blob Storage (AzCopy).</span><span class="sxs-lookup"><span data-stu-id="6357c-144">Copy the flat files to Azure Blob Storage (AzCopy).</span></span>
3. <span data-ttu-id="6357c-145">Adatok betöltése az SQL Data warehouse-ba (PolyBase).</span><span class="sxs-lookup"><span data-stu-id="6357c-145">Load the data into SQL Data Warehouse (PolyBase).</span></span>
4. <span data-ttu-id="6357c-146">Alakítsa át az adatokat egy csillag sémában (T-SQL).</span><span class="sxs-lookup"><span data-stu-id="6357c-146">Transform the data into a star schema (T-SQL).</span></span>
5. <span data-ttu-id="6357c-147">A szemantikai modell betöltése az Analysis Services (SQL Server Data Tools).</span><span class="sxs-lookup"><span data-stu-id="6357c-147">Load a semantic model into Analysis Services (SQL Server Data Tools).</span></span>

![](./images/enterprise-bi-sqldw-pipeline.png)
 
> [!NOTE]
> <span data-ttu-id="6357c-148">A lépéseket 1 &ndash; 3, fontolja meg a Redgate Data Platform Studio használatával.</span><span class="sxs-lookup"><span data-stu-id="6357c-148">For steps 1 &ndash; 3, consider using Redgate Data Platform Studio.</span></span> <span data-ttu-id="6357c-149">A Data Platform Studio a legmegfelelőbb kompatibilitási javításokat és optimalizálásokat alkalmazza, így ez a leggyorsabb mód az SQL Data Warehouse használatának megkezdésére.</span><span class="sxs-lookup"><span data-stu-id="6357c-149">Data Platform Studio applies the most appropriate compatibility fixes and optimizations, so it's the quickest way to get started with SQL Data Warehouse.</span></span> <span data-ttu-id="6357c-150">További információkért lásd: [adatok betöltése a Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span><span class="sxs-lookup"><span data-stu-id="6357c-150">For more information, see [Load data with Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span></span> 

<span data-ttu-id="6357c-151">A következő szakaszok ismertetik ezen szakaszokban részletesebben.</span><span class="sxs-lookup"><span data-stu-id="6357c-151">The next sections describe these stages in more detail.</span></span>

### <a name="export-data-from-sql-server"></a><span data-ttu-id="6357c-152">Adatok exportálása az SQL Serverről</span><span class="sxs-lookup"><span data-stu-id="6357c-152">Export data from SQL Server</span></span>

<span data-ttu-id="6357c-153">A [bcp](/sql/tools/bcp-utility) (tömeges másolási funkciójával) segédprogram egy gyorsan hozhat létre SQL-táblákban strukturálatlan szöveges fájlok.</span><span class="sxs-lookup"><span data-stu-id="6357c-153">The [bcp](/sql/tools/bcp-utility) (bulk copy program) utility is a fast way to create flat text files from SQL tables.</span></span> <span data-ttu-id="6357c-154">Ebben a lépésben az oszlopokat, amelyeket szeretne exportálni, választja, de nem alakíthatja át az adatokat.</span><span class="sxs-lookup"><span data-stu-id="6357c-154">In this step, you select the columns that you want to export, but don't transform the data.</span></span> <span data-ttu-id="6357c-155">Bármely adatátalakítások az SQL Data Warehouse történjen.</span><span class="sxs-lookup"><span data-stu-id="6357c-155">Any data transformations should happen in SQL Data Warehouse.</span></span>

<span data-ttu-id="6357c-156">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="6357c-156">**Recommendations**</span></span>

<span data-ttu-id="6357c-157">Ha lehetséges ütemezheti az éles környezetben az erőforrás-versengés minimalizálása érdekében csúcsidőn adatkinyerés.</span><span class="sxs-lookup"><span data-stu-id="6357c-157">If possible, schedule data extraction during off-peak hours, to minimize resource contention in the production environment.</span></span> 

<span data-ttu-id="6357c-158">Kerülje a BCP használatával fut a kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="6357c-158">Avoid running bcp on the database server.</span></span> <span data-ttu-id="6357c-159">Ehelyett futtassa azt egy másik gépről.</span><span class="sxs-lookup"><span data-stu-id="6357c-159">Instead, run it from another machine.</span></span> <span data-ttu-id="6357c-160">Írás a fájlok egy helyi meghajtóra.</span><span class="sxs-lookup"><span data-stu-id="6357c-160">Write the files to a local drive.</span></span> <span data-ttu-id="6357c-161">Győződjön meg arról, hogy rendelkezik-e elegendő i/o-erőforrások kezeli az egyidejű írások.</span><span class="sxs-lookup"><span data-stu-id="6357c-161">Ensure that you have sufficient I/O resources to handle the concurrent writes.</span></span> <span data-ttu-id="6357c-162">A legjobb teljesítmény érdekében dedikált gyors tárolóeszközöket exportálja a fájlokat.</span><span class="sxs-lookup"><span data-stu-id="6357c-162">For best performance, export the files to dedicated fast storage drives.</span></span>

<span data-ttu-id="6357c-163">A hálózati átvitel menti az exportált adatok Gzip formátumban tömörített felgyorsíthatja.</span><span class="sxs-lookup"><span data-stu-id="6357c-163">You can speed up the network transfer by saving the exported data in Gzip compressed format.</span></span> <span data-ttu-id="6357c-164">Azonban az adatraktárban való betöltésének a tömörített fájlok, lassabb, mint a kibontott fájlok betöltése, így a kompromisszummal jár a gyorsabb hálózati átvitel helyett a gyorsabb betöltése között.</span><span class="sxs-lookup"><span data-stu-id="6357c-164">However, loading compressed files into the warehouse is slower than loading uncompressed files, so there is a tradeoff between faster network transfer versus faster loading.</span></span> <span data-ttu-id="6357c-165">Ha úgy dönt, a Gzip tömörítést szeretne használni, ne hozzon létre egy egyetlen Gzip fájl.</span><span class="sxs-lookup"><span data-stu-id="6357c-165">If you decide to use Gzip compression, don't create a single Gzip file.</span></span> <span data-ttu-id="6357c-166">Ehelyett az adatok felosztása több tömörített fájl.</span><span class="sxs-lookup"><span data-stu-id="6357c-166">Instead, split the data into multiple compressed files.</span></span>

### <a name="copy-flat-files-into-blob-storage"></a><span data-ttu-id="6357c-167">Egybesimított fájlok másolása a blob storage-bA</span><span class="sxs-lookup"><span data-stu-id="6357c-167">Copy flat files into blob storage</span></span>

<span data-ttu-id="6357c-168">A [AzCopy](/azure/storage/common/storage-use-azcopy) segédprogram készült nagy teljesítményű másolása az adatok Azure blob storage-bA.</span><span class="sxs-lookup"><span data-stu-id="6357c-168">The [AzCopy](/azure/storage/common/storage-use-azcopy) utility is designed for high-performance copying of data into Azure blob storage.</span></span>

<span data-ttu-id="6357c-169">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="6357c-169">**Recommendations**</span></span>

<span data-ttu-id="6357c-170">A storage-fiók létrehozása az adatok helye közelében található régiókban.</span><span class="sxs-lookup"><span data-stu-id="6357c-170">Create the storage account in a region near the location of the source data.</span></span> <span data-ttu-id="6357c-171">A tárfiók és az SQL Data Warehouse-példányhoz ugyanabban a régióban helyezhet üzembe.</span><span class="sxs-lookup"><span data-stu-id="6357c-171">Deploy the storage account and the SQL Data Warehouse instance in the same region.</span></span> 

<span data-ttu-id="6357c-172">Az AzCopy ugyanarra a gépre, amely az éles számítási feladatok nem futtatható, mert a Processzor- és i/o-felhasználás megzavarhatja az éles környezetbeli számítási feladatokra.</span><span class="sxs-lookup"><span data-stu-id="6357c-172">Don't run AzCopy on the same machine that runs your production workloads, because the CPU and I/O consumption can interfere with the production workload.</span></span> 

<span data-ttu-id="6357c-173">A feltöltés először használatával megtekintheti a feltöltési sebesség például teszteléséhez.</span><span class="sxs-lookup"><span data-stu-id="6357c-173">Test the upload first to see what the upload speed is like.</span></span> <span data-ttu-id="6357c-174">Az AzCopy a /NC beállítás használatával adja meg az egyidejű másolási műveletek száma.</span><span class="sxs-lookup"><span data-stu-id="6357c-174">You can use the /NC option in AzCopy to specify the number of concurrent copy operations.</span></span> <span data-ttu-id="6357c-175">Indítsa el az alapértelmezett értékkel, majd ezt a beállítást, a teljesítmény hangolására kísérletezhet.</span><span class="sxs-lookup"><span data-stu-id="6357c-175">Start with the default value, then experiment with this setting to tune the performance.</span></span> <span data-ttu-id="6357c-176">Alacsony sávszélességű környezetben túl sok az egyidejű művelet túlterhelhetik futó a hálózati kapcsolat, és megakadályozza a műveletek sikeres befejezését.</span><span class="sxs-lookup"><span data-stu-id="6357c-176">In a low-bandwidth environment, too many concurrent operations can overwhelm the network connection and prevent the operations from completing successfully.</span></span>  

<span data-ttu-id="6357c-177">Az AzCopy helyez át adatokat tároló a nyilvános interneten keresztül.</span><span class="sxs-lookup"><span data-stu-id="6357c-177">AzCopy moves data to storage over the public internet.</span></span> <span data-ttu-id="6357c-178">Ha ez nem elég gyors, érdemes beállítani egy [ExpressRoute](/azure/expressroute/) kapcsolatcsoport.</span><span class="sxs-lookup"><span data-stu-id="6357c-178">If this isn't fast enough, consider setting up an [ExpressRoute](/azure/expressroute/) circuit.</span></span> <span data-ttu-id="6357c-179">Az ExpressRoute egy szolgáltatása, amely az adatok egy dedikált privát kapcsolaton keresztül irányítja az Azure-bA.</span><span class="sxs-lookup"><span data-stu-id="6357c-179">ExpressRoute is a service that routes your data through a dedicated private connection to Azure.</span></span> <span data-ttu-id="6357c-180">Egy másik lehetőség, ha túl lassú, a hálózati kapcsolatot, fizikailag tehetnek elérhetővé az adatokat egy Azure-adatközpontba lemezen.</span><span class="sxs-lookup"><span data-stu-id="6357c-180">Another option, if your network connection is too slow, is to physically ship the data on disk to an Azure datacenter.</span></span> <span data-ttu-id="6357c-181">További információkért lásd: [, és az Azure-ból történő adatátvitel](/azure/architecture/data-guide/scenarios/data-transfer).</span><span class="sxs-lookup"><span data-stu-id="6357c-181">For more information, see [Transferring data to and from Azure](/azure/architecture/data-guide/scenarios/data-transfer).</span></span>

<span data-ttu-id="6357c-182">A másolási művelet során AzCopy létrehoz egy ideiglenes journal-fájlt, amely lehetővé teszi az AzCopy segítségével indítsa újra a műveletet, ha azt (például hálózati hiba) miatt beolvasása megszakítva.</span><span class="sxs-lookup"><span data-stu-id="6357c-182">During a copy operation, AzCopy creates a temporary journal file, which enables AzCopy to restart the operation if it gets interrupted (for example, due to a network error).</span></span> <span data-ttu-id="6357c-183">Győződjön meg arról, hogy nincs elegendő lemezterület az adatbázisnapló-fájlok tárolására.</span><span class="sxs-lookup"><span data-stu-id="6357c-183">Make sure there is enough disk space to store the journal files.</span></span> <span data-ttu-id="6357c-184">A /Z beállítás használatával adja meg, ahol a naplófájlok íródnak.</span><span class="sxs-lookup"><span data-stu-id="6357c-184">You can use the /Z option to specify where the journal files are written.</span></span>

### <a name="load-data-into-sql-data-warehouse"></a><span data-ttu-id="6357c-185">Adatok betöltése az SQL Data Warehouse-ba</span><span class="sxs-lookup"><span data-stu-id="6357c-185">Load data into SQL Data Warehouse</span></span>

<span data-ttu-id="6357c-186">Használat [PolyBase](/sql/relational-databases/polybase/polybase-guide) betölteni a blob storage-ból a data warehouse-bA.</span><span class="sxs-lookup"><span data-stu-id="6357c-186">Use [PolyBase](/sql/relational-databases/polybase/polybase-guide) to load the files from blob storage into the data warehouse.</span></span> <span data-ttu-id="6357c-187">A PolyBase úgy tervezték, kihasználhatja az SQL Data Warehouse, ami lehetővé teszi az adatok betöltése az SQL Data Warehouse leggyorsabban MPP (nagymértékben párhuzamos feldolgozási) architektúráját.</span><span class="sxs-lookup"><span data-stu-id="6357c-187">PolyBase is designed to leverage the MPP (Massively Parallel Processing) architecture of SQL Data Warehouse, which makes it the fastest way to load data into SQL Data Warehouse.</span></span> 

<span data-ttu-id="6357c-188">Az adatok betöltése két lépésből áll:</span><span class="sxs-lookup"><span data-stu-id="6357c-188">Loading the data is a two-step process:</span></span>

1. <span data-ttu-id="6357c-189">Hozzon létre az adatok külső táblák egy készlete.</span><span class="sxs-lookup"><span data-stu-id="6357c-189">Create a set of external tables for the data.</span></span> <span data-ttu-id="6357c-190">A külső tábla esetében, amely az adatraktár-on kívül tárolt adatokat tábla definícióját &mdash; ebben az esetben a átalánydíjjal fájlok blob storage-ban.</span><span class="sxs-lookup"><span data-stu-id="6357c-190">An external table is a table definition that points to data stored outside of the warehouse &mdash; in this case, the flat files in blob storage.</span></span> <span data-ttu-id="6357c-191">Ez a lépés nem helyezi át adatokat a warehouse-bA.</span><span class="sxs-lookup"><span data-stu-id="6357c-191">This step does not move any data into the warehouse.</span></span>
2. <span data-ttu-id="6357c-192">Átmeneti tárolási táblákat hozhat létre, és betöltheti az adatokat az átmeneti tárolási táblákba.</span><span class="sxs-lookup"><span data-stu-id="6357c-192">Create staging tables, and load the data into the staging tables.</span></span> <span data-ttu-id="6357c-193">Ebben a lépésben másolja az adatokat az adattárház.</span><span class="sxs-lookup"><span data-stu-id="6357c-193">This step copies the data into the warehouse.</span></span>

<span data-ttu-id="6357c-194">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="6357c-194">**Recommendations**</span></span>

<span data-ttu-id="6357c-195">Amikor nagy mennyiségű (több mint 1 TB) adat rendelkezik, és a egy párhuzamosság kihasználó elemzési számítási feladatot futtat, vegye figyelembe az SQL Data warehouse-bA.</span><span class="sxs-lookup"><span data-stu-id="6357c-195">Consider SQL Data Warehouse when you have large amounts of data (more than 1 TB) and are running an analytics workload that will benefit from parallelism.</span></span> <span data-ttu-id="6357c-196">Az SQL Data Warehouse nem jó megoldás lehet OLTP számítási feladatokat vagy kisebb adatkészletek (< 250GB).</span><span class="sxs-lookup"><span data-stu-id="6357c-196">SQL Data Warehouse is not a good fit for OLTP workloads or smaller data sets (< 250GB).</span></span> <span data-ttu-id="6357c-197">Adatkészletek kisebb, mint 250 GB-os fontolja meg az Azure SQL Database vagy SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6357c-197">For data sets less than 250GB, consider Azure SQL Database or SQL Server.</span></span> <span data-ttu-id="6357c-198">További információkért lásd: [adattárházak](../../data-guide/relational-data/data-warehousing.md).</span><span class="sxs-lookup"><span data-stu-id="6357c-198">For more information, see [Data warehousing](../../data-guide/relational-data/data-warehousing.md).</span></span>

<span data-ttu-id="6357c-199">Hozzon létre az előkészítési táblák halomtáblák, amelyek nem lesznek indexelve.</span><span class="sxs-lookup"><span data-stu-id="6357c-199">Create the staging tables as heap tables, which are not indexed.</span></span> <span data-ttu-id="6357c-200">A lekérdezéseket, amely a termelési táblákat hozhat létre teljes tábla beolvasásával, eredményez, így az előkészítési táblák indexelése nem ok.</span><span class="sxs-lookup"><span data-stu-id="6357c-200">The queries that create the production tables will result in a full table scan, so there is no reason to index the staging tables.</span></span>

<span data-ttu-id="6357c-201">A PolyBase automatikusan kihasználja a párhuzamosság látható az adatraktárban.</span><span class="sxs-lookup"><span data-stu-id="6357c-201">PolyBase automatically takes advantage of parallelism in the warehouse.</span></span> <span data-ttu-id="6357c-202">A betöltési teljesítmény arányosan növekszik, ahogy a Dwu növelését.</span><span class="sxs-lookup"><span data-stu-id="6357c-202">The load performance scales as you increase DWUs.</span></span> <span data-ttu-id="6357c-203">A legjobb teljesítmény érdekében használjon egy egyetlen betöltési művelet.</span><span class="sxs-lookup"><span data-stu-id="6357c-203">For best performance, use a single load operation.</span></span> <span data-ttu-id="6357c-204">Nem jár a bemeneti adatok kompatibilitástörő adattömbökbe és több egyidejű betöltések futtatására teljesítmény előnnyel.</span><span class="sxs-lookup"><span data-stu-id="6357c-204">There is no performance benefit to breaking the input data into chunks and running multiple concurrent loads.</span></span>

<span data-ttu-id="6357c-205">A PolyBase gzip formátumban tömörített fájlok olvashatja.</span><span class="sxs-lookup"><span data-stu-id="6357c-205">PolyBase can read Gzip compressed files.</span></span> <span data-ttu-id="6357c-206">Azonban csak egyetlen olvasó szolgál egy tömörített fájl, mert a fájl kibontása egy egyszálas működésre.</span><span class="sxs-lookup"><span data-stu-id="6357c-206">However, only a single reader is used per compressed file, because uncompressing the file is a single-threaded operation.</span></span> <span data-ttu-id="6357c-207">Ezért kerülje a nagy tömörített fájl betöltése.</span><span class="sxs-lookup"><span data-stu-id="6357c-207">Therefore, avoid loading a single large compressed file.</span></span> <span data-ttu-id="6357c-208">Ehelyett az adatok felosztása több tömörített fájlok, párhuzamosság kihasználása érdekében.</span><span class="sxs-lookup"><span data-stu-id="6357c-208">Instead, split the data into multiple compressed files, in order to take advantage of parallelism.</span></span> 

<span data-ttu-id="6357c-209">Vegye figyelembe a következő korlátozások vonatkoznak:</span><span class="sxs-lookup"><span data-stu-id="6357c-209">Be aware of the following limitations:</span></span>

- <span data-ttu-id="6357c-210">A PolyBase támogatja egy oszlop maximális mérete `varchar(8000)`, `nvarchar(4000)`, vagy `varbinary(8000)`.</span><span class="sxs-lookup"><span data-stu-id="6357c-210">PolyBase supports a maximum column size of `varchar(8000)`, `nvarchar(4000)`, or `varbinary(8000)`.</span></span> <span data-ttu-id="6357c-211">Ha olyan adat, amely meghaladja a ezeket a korlátokat, az egyik lehetőség az felosztása az adatok adattömbökre exportálni, és ezután szétbontani importálás után az adattömböket.</span><span class="sxs-lookup"><span data-stu-id="6357c-211">If you have data that exceeds these limits, one option is to break the data up into chunks when you export it, and then reassemble the chunks after import.</span></span> 

- <span data-ttu-id="6357c-212">A polybase egy rögzített sor lezárójele \n vagy új sor.</span><span class="sxs-lookup"><span data-stu-id="6357c-212">PolyBase uses a fixed row terminator of \n or newline.</span></span> <span data-ttu-id="6357c-213">Ez problémákat okozhat, ha a forrásadatok soremelés karakter jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="6357c-213">This can cause problems if newline characters appear in the source data.</span></span>

- <span data-ttu-id="6357c-214">A forrás sémát nem támogatottak az SQL Data Warehouse adattípusokat tartalmazhat.</span><span class="sxs-lookup"><span data-stu-id="6357c-214">Your source data schema might contain data types that are not supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="6357c-215">Ezek a korlátozások megkerülő megoldásként létrehozhat egy tárolt eljárást, amely végrehajtja a szükséges átalakítás.</span><span class="sxs-lookup"><span data-stu-id="6357c-215">To work around these limitations, you can create a stored procedure that performs the necessary conversions.</span></span> <span data-ttu-id="6357c-216">Ez a tárolt eljárás hivatkozhat a bcp futtatásakor.</span><span class="sxs-lookup"><span data-stu-id="6357c-216">Reference this stored procedure when you run bcp.</span></span> <span data-ttu-id="6357c-217">Másik lehetőségként [Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) automatikusan átalakítja az SQL Data Warehouse nem támogatott adattípusokat.</span><span class="sxs-lookup"><span data-stu-id="6357c-217">Alternatively, [Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) automatically converts data types that aren’t supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="6357c-218">További információkért tekintse át a következő cikkeket:</span><span class="sxs-lookup"><span data-stu-id="6357c-218">For more information, see the following articles:</span></span>

- <span data-ttu-id="6357c-219">[Ajánlott eljárások az adatok betöltéséhez az Azure SQL Data Warehouse-bA](/azure/sql-data-warehouse/guidance-for-loading-data).</span><span class="sxs-lookup"><span data-stu-id="6357c-219">[Best practices for loading data into Azure SQL Data Warehouse](/azure/sql-data-warehouse/guidance-for-loading-data).</span></span>
- [<span data-ttu-id="6357c-220">A sémák áttelepítése az SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="6357c-220">Migrate your schemas to SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-migrate-schema)
- [<span data-ttu-id="6357c-221">Útmutató az SQL Data Warehouse tábla adattípusok definiálása</span><span class="sxs-lookup"><span data-stu-id="6357c-221">Guidance for defining data types for tables in SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-tables-data-types)

### <a name="transform-the-data"></a><span data-ttu-id="6357c-222">Az adatok átalakítása</span><span class="sxs-lookup"><span data-stu-id="6357c-222">Transform the data</span></span>

<span data-ttu-id="6357c-223">Az adatok átalakításához, és helyezze át a termelési táblákba.</span><span class="sxs-lookup"><span data-stu-id="6357c-223">Transform the data and move it into production tables.</span></span> <span data-ttu-id="6357c-224">Ebben a lépésben az adatok átalakításának ténytáblák, alkalmas szemantikai modellezés és dimenziótáblák csillag sémában.</span><span class="sxs-lookup"><span data-stu-id="6357c-224">In this step, the data is transformed into a star schema with dimension tables and fact tables, suitable for semantic modeling.</span></span>

<span data-ttu-id="6357c-225">Hozzon létre fürtözött oszlopcentrikus indexek, ami a legjobb általános lekérdezési teljesítményt termelési táblákba.</span><span class="sxs-lookup"><span data-stu-id="6357c-225">Create the production tables with clustered columnstore indexes, which offer the best overall query performance.</span></span> <span data-ttu-id="6357c-226">Az Oszlopcentrikus indexek sok rekordot vizsgálata lekérdezés számára vannak optimalizálva.</span><span class="sxs-lookup"><span data-stu-id="6357c-226">Columnstore indexes are optimized for queries that scan many records.</span></span> <span data-ttu-id="6357c-227">Az Oszlopcentrikus indexek nem is végrehajtásához egyszeres keresések (amelyek egyetlen sor van, keresése).</span><span class="sxs-lookup"><span data-stu-id="6357c-227">Columnstore indexes don't perform as well for singleton lookups (that is, looking up a single row).</span></span> <span data-ttu-id="6357c-228">Gyakori egyszeres keresések végrehajtására van szüksége, ha egy tábla egy nem fürtözött indexet is hozzáadhat.</span><span class="sxs-lookup"><span data-stu-id="6357c-228">If you need to perform frequent singleton lookups, you can add a non-clustered index to a table.</span></span> <span data-ttu-id="6357c-229">Egyszeres keresések futtathatja, jelentősen gyorsabban használatával egy nem fürtözött indexet.</span><span class="sxs-lookup"><span data-stu-id="6357c-229">Singleton lookups can run significantly faster using a non-clustered index.</span></span> <span data-ttu-id="6357c-230">Azonban a singleton kereséseket is általában kevésbé gyakori a data warehouse-forgatókönyvek, mint az OLTP-munkaterhelések.</span><span class="sxs-lookup"><span data-stu-id="6357c-230">However, singleton lookups are typically less common in data warehouse scenarios than OLTP workloads.</span></span> <span data-ttu-id="6357c-231">További információkért lásd: [indexelés a táblák az SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span><span class="sxs-lookup"><span data-stu-id="6357c-231">For more information, see [Indexing tables in SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span></span>

> [!NOTE]
> <span data-ttu-id="6357c-232">Nem támogatja a fürtözött oszlopcentrikus táblák `varchar(max)`, `nvarchar(max)`, vagy `varbinary(max)` adattípusokat.</span><span class="sxs-lookup"><span data-stu-id="6357c-232">Clustered columnstore tables do not support `varchar(max)`, `nvarchar(max)`, or `varbinary(max)` data types.</span></span> <span data-ttu-id="6357c-233">Ebben az esetben érdemes lehet egy halmot vagy fürtözött index.</span><span class="sxs-lookup"><span data-stu-id="6357c-233">In that case, consider a heap or clustered index.</span></span> <span data-ttu-id="6357c-234">Előfordulhat, hogy ezek az oszlopok helyezzen egy különálló táblában.</span><span class="sxs-lookup"><span data-stu-id="6357c-234">You might put those columns into a separate table.</span></span>

<span data-ttu-id="6357c-235">Mivel az adatbázist nem nagyon nagy méretű, nem partícióval rendelkező létrehozott replikált táblák.</span><span class="sxs-lookup"><span data-stu-id="6357c-235">Because the sample database is not very large, we created replicated tables with no partitions.</span></span> <span data-ttu-id="6357c-236">A termelési számítási feladatokhoz elosztott táblák használata valószínűleg javítható a lekérdezési teljesítmény.</span><span class="sxs-lookup"><span data-stu-id="6357c-236">For production workloads, using distributed tables is likely to improve query performance.</span></span> <span data-ttu-id="6357c-237">Lásd: [útmutatást az Azure SQL Data Warehouse elosztott táblák tervezése](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span><span class="sxs-lookup"><span data-stu-id="6357c-237">See [Guidance for designing distributed tables in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span></span> <span data-ttu-id="6357c-238">Példa szkriptjeit futtassa a lekérdezéseket a statikus [erőforrásosztály](/azure/sql-data-warehouse/resource-classes-for-workload-management).</span><span class="sxs-lookup"><span data-stu-id="6357c-238">Our example scripts run the queries using a static [resource class](/azure/sql-data-warehouse/resource-classes-for-workload-management).</span></span>

### <a name="load-the-semantic-model"></a><span data-ttu-id="6357c-239">A szemantikai modell betöltése</span><span class="sxs-lookup"><span data-stu-id="6357c-239">Load the semantic model</span></span>

<span data-ttu-id="6357c-240">Az adatok betöltése az Azure Analysis Services táblázatos modellbe.</span><span class="sxs-lookup"><span data-stu-id="6357c-240">Load the data into a tabular model in Azure Analysis Services.</span></span> <span data-ttu-id="6357c-241">Ebben a lépésben az SQL Server Data Tools (SSDT) használatával hoz létre egy olyan szemantikai modell.</span><span class="sxs-lookup"><span data-stu-id="6357c-241">In this step, you create a semantic data model by using SQL Server Data Tools (SSDT).</span></span> <span data-ttu-id="6357c-242">Egy modellt a Power BI Desktop-fájlból való importálásával is létrehozhat.</span><span class="sxs-lookup"><span data-stu-id="6357c-242">You can also create a model by importing it from a Power BI Desktop file.</span></span> <span data-ttu-id="6357c-243">Mivel az SQL Data Warehouse nem támogatja a külső kulcsok, hozzá kell adnia a kapcsolatokat a szemantikai modell úgy, hogy a táblák között is csatlakozhat.</span><span class="sxs-lookup"><span data-stu-id="6357c-243">Because SQL Data Warehouse does not support foreign keys, you must add the relationships to the semantic model, so that you can join across tables.</span></span>

### <a name="use-power-bi-to-visualize-the-data"></a><span data-ttu-id="6357c-244">Az adatok megjelenítése a Power BI használatával</span><span class="sxs-lookup"><span data-stu-id="6357c-244">Use Power BI to visualize the data</span></span>

<span data-ttu-id="6357c-245">A Power BI csatlakozik az Azure Analysis Services támogatja két lehetőség közül választhat:</span><span class="sxs-lookup"><span data-stu-id="6357c-245">Power BI supports two options for connecting to Azure Analysis Services:</span></span>

- <span data-ttu-id="6357c-246">Az importálás.</span><span class="sxs-lookup"><span data-stu-id="6357c-246">Import.</span></span> <span data-ttu-id="6357c-247">Az adatok a Power BI-modellben van importálva.</span><span class="sxs-lookup"><span data-stu-id="6357c-247">The data is imported into the Power BI model.</span></span>
- <span data-ttu-id="6357c-248">Élő kapcsolat.</span><span class="sxs-lookup"><span data-stu-id="6357c-248">Live Connection.</span></span> <span data-ttu-id="6357c-249">Data Analysis Services-ről kéri le.</span><span class="sxs-lookup"><span data-stu-id="6357c-249">Data is pulled directly from Analysis Services.</span></span>

<span data-ttu-id="6357c-250">Javasoljuk, hogy élő kapcsolat, mert nincs szükség a Power BI-modellben az adatok másolását.</span><span class="sxs-lookup"><span data-stu-id="6357c-250">We recommend Live Connection because it doesn't require copying data into the Power BI model.</span></span> <span data-ttu-id="6357c-251">Emellett a DirectQuery használata biztosítja, hogy eredmények mindig konzisztensek legyenek a legújabb forrásadatokat.</span><span class="sxs-lookup"><span data-stu-id="6357c-251">Also, using DirectQuery ensures that results are always consistent with the latest source data.</span></span> <span data-ttu-id="6357c-252">További információkért lásd: [csatlakozás a Power bi-JAL](/azure/analysis-services/analysis-services-connect-pbi).</span><span class="sxs-lookup"><span data-stu-id="6357c-252">For more information, see [Connect with Power BI](/azure/analysis-services/analysis-services-connect-pbi).</span></span>

<span data-ttu-id="6357c-253">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="6357c-253">**Recommendations**</span></span>

<span data-ttu-id="6357c-254">Ne közvetlenül az adatraktáron irányítópult-lekérdezések futtatása a BI-ban.</span><span class="sxs-lookup"><span data-stu-id="6357c-254">Avoid running BI dashboard queries directly against the data warehouse.</span></span> <span data-ttu-id="6357c-255">A BI-irányítópultok szükséges nagyon alacsony válaszidők, amely közvetlen, előfordulhat, hogy az adatraktár-lekérdezéseket az nem felel meg.</span><span class="sxs-lookup"><span data-stu-id="6357c-255">BI dashboards require very low response times, which direct queries against the warehouse may be unable to satisfy.</span></span> <span data-ttu-id="6357c-256">Emellett az irányítópult frissítése vonja le a rendszer a lekérdezést, ami hatással lehet a teljesítmény számát.</span><span class="sxs-lookup"><span data-stu-id="6357c-256">Also, refreshing the dashboard will count against the number of concurrent queries, which could impact performance.</span></span> 

<span data-ttu-id="6357c-257">Az Azure Analysis Services célja annak érdekében, hogy a lekérdezés, BI-irányítópult, ezért az ajánlott eljárás lekérdezés Analysis Services a Power bi-BÓL.</span><span class="sxs-lookup"><span data-stu-id="6357c-257">Azure Analysis Services is designed to handle the query requirements of a BI dashboard, so the recommended practice is to query Analysis Services from Power BI.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="6357c-258">Méretezési szempontok</span><span class="sxs-lookup"><span data-stu-id="6357c-258">Scalability considerations</span></span>

### <a name="sql-data-warehouse"></a><span data-ttu-id="6357c-259">SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="6357c-259">SQL Data Warehouse</span></span>

<span data-ttu-id="6357c-260">Az SQL Data Warehouse a számítási erőforrások igény szerinti horizontálisan.</span><span class="sxs-lookup"><span data-stu-id="6357c-260">With SQL Data Warehouse, you can scale out your compute resources on demand.</span></span> <span data-ttu-id="6357c-261">A lekérdezési motor optimalizálja a lekérdezések párhuzamos feldolgozásra, a számítási csomópontok száma alapján, és szükség esetén csomópontok között helyez át adatokat.</span><span class="sxs-lookup"><span data-stu-id="6357c-261">The query engine optimizes queries for parallel processing based on the number of compute nodes, and moves data between nodes as necessary.</span></span> <span data-ttu-id="6357c-262">További információkért lásd: [kezelés compute az Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span><span class="sxs-lookup"><span data-stu-id="6357c-262">For more information, see [Manage compute in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span></span>

### <a name="analysis-services"></a><span data-ttu-id="6357c-263">Analysis Services</span><span class="sxs-lookup"><span data-stu-id="6357c-263">Analysis Services</span></span>

<span data-ttu-id="6357c-264">A termelési számítási feladatokhoz, javasoljuk, hogy a Standard csomag az Azure Analysis Services, mivel támogatja a particionálást és a DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="6357c-264">For production workloads, we recommend the Standard Tier for Azure Analysis Services, because it supports partitioning and DirectQuery.</span></span> <span data-ttu-id="6357c-265">A szinteken belül a példány mérete határozza meg, a memória és a feldolgozási teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="6357c-265">Within a tier, the instance size determines the memory and processing power.</span></span> <span data-ttu-id="6357c-266">A feldolgozási teljesítményt mértékegysége a lekérés-feldolgozó egység (qpu-ra).</span><span class="sxs-lookup"><span data-stu-id="6357c-266">Processing power is measured in Query Processing Units (QPUs).</span></span> <span data-ttu-id="6357c-267">Válassza ki a megfelelő méret a QPU-használat figyeléséhez.</span><span class="sxs-lookup"><span data-stu-id="6357c-267">Monitor your QPU usage to select the appropriate size.</span></span> <span data-ttu-id="6357c-268">További információkért lásd: [kiszolgáló metrikáinak monitorozása](/azure/analysis-services/analysis-services-monitor).</span><span class="sxs-lookup"><span data-stu-id="6357c-268">For more information, see [Monitor server metrics](/azure/analysis-services/analysis-services-monitor).</span></span>

<span data-ttu-id="6357c-269">Nagy terhelés alatt lekérdezési teljesítmény is válnak teljesítményűre lekérdezés párhuzamosság miatt.</span><span class="sxs-lookup"><span data-stu-id="6357c-269">Under high load, query performance can become degraded due to query concurrency.</span></span> <span data-ttu-id="6357c-270">Analysis Services horizontálisan készletet hoz létre egy replikák a lekérdezések feldolgozásához, hogy egyidejűleg több lekérdezést is elvégezhető.</span><span class="sxs-lookup"><span data-stu-id="6357c-270">You can scale out Analysis Services by creating a pool of replicas to process queries, so that more queries can be performed concurrently.</span></span> <span data-ttu-id="6357c-271">Az adatmodell mindig feldolgozási munka az elsődleges kiszolgálón történik.</span><span class="sxs-lookup"><span data-stu-id="6357c-271">The work of processing the data model always happens on the primary server.</span></span> <span data-ttu-id="6357c-272">Alapértelmezés szerint az elsődleges kiszolgáló lekérdezéseket is kezeli.</span><span class="sxs-lookup"><span data-stu-id="6357c-272">By default, the primary server also handles queries.</span></span> <span data-ttu-id="6357c-273">Igény szerint is kijelölhet feldolgozás, kizárólag az elsődleges kiszolgálót, hogy a lekérdezési készletből kezeli az összes lekérdezés.</span><span class="sxs-lookup"><span data-stu-id="6357c-273">Optionally, you can designate the primary server to run processing exclusively, so that the query pool handles all queries.</span></span> <span data-ttu-id="6357c-274">Ha nagy feldolgozási követelmények, meg kell külön a feldolgozás, a lekérdezési készletből.</span><span class="sxs-lookup"><span data-stu-id="6357c-274">If you have high processing requirements, you should separate the processing from the query pool.</span></span> <span data-ttu-id="6357c-275">Ha a lekérdezési terhelés, és viszonylag könnyű feldolgozása, az elsődleges kiszolgálón is felvehet a lekérdezési készletből.</span><span class="sxs-lookup"><span data-stu-id="6357c-275">If you have high query loads, and relatively light processing, you can include the primary server in the query pool.</span></span> <span data-ttu-id="6357c-276">További információkért lásd: [kibővített Azure Analysis Services](/azure/analysis-services/analysis-services-scale-out).</span><span class="sxs-lookup"><span data-stu-id="6357c-276">For more information, see [Azure Analysis Services scale-out](/azure/analysis-services/analysis-services-scale-out).</span></span> 

<span data-ttu-id="6357c-277">Ami felesleges feldolgozási mennyisége csökkentése érdekében fontolja meg a partíciók osztani a táblázatos modell logikai részekre.</span><span class="sxs-lookup"><span data-stu-id="6357c-277">To reduce the amount of unnecessary processing, consider using partitions to divide the tabular model into logical parts.</span></span> <span data-ttu-id="6357c-278">Mindegyik partíció külön-külön lehet feldolgozni.</span><span class="sxs-lookup"><span data-stu-id="6357c-278">Each partition can be processed separately.</span></span> <span data-ttu-id="6357c-279">További információkért lásd: [partíciók](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="6357c-279">For more information, see [Partitions](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="6357c-280">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="6357c-280">Security considerations</span></span>

### <a name="ip-whitelisting-of-analysis-services-clients"></a><span data-ttu-id="6357c-281">Az Analysis Services-ügyfelek IP-engedélyezési</span><span class="sxs-lookup"><span data-stu-id="6357c-281">IP whitelisting of Analysis Services clients</span></span>

<span data-ttu-id="6357c-282">Fontolja meg az Analysis Services tűzfala szolgáltatást az ügyfél IP-címeket.</span><span class="sxs-lookup"><span data-stu-id="6357c-282">Consider using the Analysis Services firewall feature to whitelist client IP addresses.</span></span> <span data-ttu-id="6357c-283">Ha engedélyezve van, a tűzfal blokkolja a tűzfalszabályok az összes ügyfélkapcsolatokat.</span><span class="sxs-lookup"><span data-stu-id="6357c-283">If enabled, the firewall blocks all client connections other than those specified in the firewall rules.</span></span> <span data-ttu-id="6357c-284">Az alapértelmezett szabályok engedélyezési lista a Power BI szolgáltatásban, de a szükség esetén letilthatja a Ez a szabály.</span><span class="sxs-lookup"><span data-stu-id="6357c-284">The default rules whitelist the Power BI service, but you can disable this rule if desired.</span></span> <span data-ttu-id="6357c-285">További információkért lásd: [korlátozására Azure Analysis Services az új tűzfal képességet nyújtanak](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/).</span><span class="sxs-lookup"><span data-stu-id="6357c-285">For more information, see [Hardening Azure Analysis Services with the new firewall capability](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/).</span></span>

### <a name="authorization"></a><span data-ttu-id="6357c-286">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="6357c-286">Authorization</span></span>

<span data-ttu-id="6357c-287">Az Azure Analysis Services az Azure Active Directory (Azure AD) segítségével hitelesítheti a felhasználókat, akik csatlakozik egy Analysis Services-kiszolgálóhoz.</span><span class="sxs-lookup"><span data-stu-id="6357c-287">Azure Analysis Services uses Azure Active Directory (Azure AD) to authenticate users who connect to an Analysis Services server.</span></span> <span data-ttu-id="6357c-288">Korlátozhatja, hogy milyen adatokat egy adott felhasználó, megtekintheti a szerepkörök létrehozásával, és ezután az Azure AD-felhasználók és csoportok hozzárendelése ezeket a szerepköröket.</span><span class="sxs-lookup"><span data-stu-id="6357c-288">You can restrict what data a particular user is able to view, by creating roles and then assigning Azure AD users or groups to those roles.</span></span> <span data-ttu-id="6357c-289">Az egyes szerepkörökhöz a következőket teheti:</span><span class="sxs-lookup"><span data-stu-id="6357c-289">For each role, you can:</span></span> 

- <span data-ttu-id="6357c-290">Táblák vagy oszlopok az egyes védelmét.</span><span class="sxs-lookup"><span data-stu-id="6357c-290">Protect tables or individual columns.</span></span> 
- <span data-ttu-id="6357c-291">A szűrőkifejezések alapján egyedi sorok védelmét.</span><span class="sxs-lookup"><span data-stu-id="6357c-291">Protect individual rows based on filter expressions.</span></span> 

<span data-ttu-id="6357c-292">További információkért lásd: [adatbázis-szerepkörök és a felhasználók kezelése](/azure/analysis-services/analysis-services-database-users).</span><span class="sxs-lookup"><span data-stu-id="6357c-292">For more information, see [Manage database roles and users](/azure/analysis-services/analysis-services-database-users).</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="6357c-293">A megoldás üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="6357c-293">Deploy the solution</span></span>

<span data-ttu-id="6357c-294">Ennek a referenciaarchitektúrának egy üzemelő példánya elérhető a [GitHubon][ref-arch-repo-folder].</span><span class="sxs-lookup"><span data-stu-id="6357c-294">A deployment for this reference architecture is available on [GitHub][ref-arch-repo-folder].</span></span> <span data-ttu-id="6357c-295">A következőket helyezi üzembe:</span><span class="sxs-lookup"><span data-stu-id="6357c-295">It deploys the following:</span></span>

  * <span data-ttu-id="6357c-296">Windows virtuális gép egy helyszíni adatbázis-kiszolgáló szimulálásához.</span><span class="sxs-lookup"><span data-stu-id="6357c-296">A Windows VM to simulate an on-premises database server.</span></span> <span data-ttu-id="6357c-297">Ez magában foglalja az SQL Server 2017-ben és a kapcsolódó eszközök, Power BI Desktop együtt.</span><span class="sxs-lookup"><span data-stu-id="6357c-297">It includes SQL Server 2017 and related tools, along with Power BI Desktop.</span></span>
  * <span data-ttu-id="6357c-298">Azure storage-fiókkal, amely biztosít a Blob storage, az SQL Server-adatbázisból exportált adatok tárolásához.</span><span class="sxs-lookup"><span data-stu-id="6357c-298">An Azure storage account that provides Blob storage to hold data exported from the SQL Server database.</span></span>
  * <span data-ttu-id="6357c-299">Egy Azure SQL Data Warehouse-példányhoz.</span><span class="sxs-lookup"><span data-stu-id="6357c-299">An Azure SQL Data Warehouse instance.</span></span>
  * <span data-ttu-id="6357c-300">Az Azure Analysis Services-példányt.</span><span class="sxs-lookup"><span data-stu-id="6357c-300">An Azure Analysis Services instance.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="6357c-301">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="6357c-301">Prerequisites</span></span>

[!INCLUDE [ref-arch-prerequisites.md](../../../includes/ref-arch-prerequisites.md)]

### <a name="deploy-the-simulated-on-premises-server"></a><span data-ttu-id="6357c-302">A szimulált helyszíni kiszolgáló üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="6357c-302">Deploy the simulated on-premises server</span></span>

<span data-ttu-id="6357c-303">Egy virtuális Gépet először egy szimulált helyszíni kiszolgálóként, amely tartalmazza az SQL Server 2017-ben és a kapcsolódó eszközök helyezünk üzembe.</span><span class="sxs-lookup"><span data-stu-id="6357c-303">First you'll deploy a VM as a simulated on-premises server, which includes SQL Server 2017 and related tools.</span></span> <span data-ttu-id="6357c-304">Ez a lépés is betölti a [Wide World Importers OLTP adatbázis] [ wwi] az SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6357c-304">This step also loads the [Wide World Importers OLTP database][wwi] into SQL Server.</span></span>

1. <span data-ttu-id="6357c-305">Keresse meg a `data\enterprise_bi_sqldw\onprem\templates` mappában található az adattárban.</span><span class="sxs-lookup"><span data-stu-id="6357c-305">Navigate to the `data\enterprise_bi_sqldw\onprem\templates` folder of the repository.</span></span>

2. <span data-ttu-id="6357c-306">Az a `onprem.parameters.json` fájlt, cserélje le a tartozó értékeket `adminUsername` és `adminPassword`.</span><span class="sxs-lookup"><span data-stu-id="6357c-306">In the `onprem.parameters.json` file, replace the values for `adminUsername` and `adminPassword`.</span></span> <span data-ttu-id="6357c-307">Értékeit is módosíthatja a `SqlUserCredentials` szakaszban felel meg a felhasználónevet és jelszót.</span><span class="sxs-lookup"><span data-stu-id="6357c-307">Also change the values in the `SqlUserCredentials` section to match the user name and password.</span></span> <span data-ttu-id="6357c-308">Megjegyzés: a `.\\` a felhasználónév tulajdonságban előtaggal.</span><span class="sxs-lookup"><span data-stu-id="6357c-308">Note the `.\\` prefix in the userName property.</span></span>
    
    ```bash
    "SqlUserCredentials": {
      "userName": ".\\username",
      "password": "password"
    }
    ```

3. <span data-ttu-id="6357c-309">Futtatás `azbb` a helyszíni kiszolgáló üzembe helyezése az alább látható módon.</span><span class="sxs-lookup"><span data-stu-id="6357c-309">Run `azbb` as shown below to deploy the on-premises server.</span></span>

    ```bash
    azbb -s <subscription_id> -g <resource_group_name> -l <region> -p onprem.parameters.json --deploy
    ```

    <span data-ttu-id="6357c-310">Adja meg, amely támogatja az SQL Data Warehouse és az Azure Analysis Services egy régiót.</span><span class="sxs-lookup"><span data-stu-id="6357c-310">Specify a region that supports SQL Data Warehouse and Azure Analysis Services.</span></span> <span data-ttu-id="6357c-311">Lásd: [az Azure-termékek régiók szerint](https://azure.microsoft.com/global-infrastructure/services/)</span><span class="sxs-lookup"><span data-stu-id="6357c-311">See [Azure Products by Region](https://azure.microsoft.com/global-infrastructure/services/)</span></span>

4. <span data-ttu-id="6357c-312">Az üzembe helyezés eltarthat 20 – 30 percet, amely tartalmazza a futó a [DSC](/powershell/dsc/overview) szkriptet az eszközök telepítésére, és állítsa vissza az adatbázist.</span><span class="sxs-lookup"><span data-stu-id="6357c-312">The deployment may take 20 to 30 minutes to complete, which includes running the [DSC](/powershell/dsc/overview) script to install the tools and restore the database.</span></span> <span data-ttu-id="6357c-313">Az üzembe helyezés az Azure Portalon ellenőrizze az erőforrások az erőforráscsoportban lévő áttekintésével.</span><span class="sxs-lookup"><span data-stu-id="6357c-313">Verify the deployment in the Azure portal by reviewing the resources in the resource group.</span></span> <span data-ttu-id="6357c-314">Megtekintheti a `sql-vm1` virtuális gép és az összes kapcsolódó erőforrás.</span><span class="sxs-lookup"><span data-stu-id="6357c-314">You should see the `sql-vm1` virtual machine and its associated resources.</span></span>

### <a name="deploy-the-azure-resources"></a><span data-ttu-id="6357c-315">Az Azure-erőforrások üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="6357c-315">Deploy the Azure resources</span></span>

<span data-ttu-id="6357c-316">Ebben a lépésben együtt egy Storage-fiókot látja el az SQL Data Warehouse és az Azure Analysis Services esetén.</span><span class="sxs-lookup"><span data-stu-id="6357c-316">This step provisions SQL Data Warehouse and Azure Analysis Services, along with a Storage account.</span></span> <span data-ttu-id="6357c-317">Ha azt szeretné, ezt a lépést az előző lépés párhuzamosan is futtathatja.</span><span class="sxs-lookup"><span data-stu-id="6357c-317">If you want, you can run this step in parallel with the previous step.</span></span>

1. <span data-ttu-id="6357c-318">Keresse meg a `data\enterprise_bi_sqldw\azure\templates` mappában található az adattárban.</span><span class="sxs-lookup"><span data-stu-id="6357c-318">Navigate to the `data\enterprise_bi_sqldw\azure\templates` folder of the repository.</span></span>

2. <span data-ttu-id="6357c-319">Futtassa a következő Azure CLI-paranccsal hozzon létre egy erőforráscsoportot.</span><span class="sxs-lookup"><span data-stu-id="6357c-319">Run the following Azure CLI command to create a resource group.</span></span> <span data-ttu-id="6357c-320">Egy másik erőforráscsoportban található, mint az előző lépésben üzembe helyezése, de válassza ki az ugyanabban a régióban.</span><span class="sxs-lookup"><span data-stu-id="6357c-320">You can deploy to a different resource group than the previous step, but choose the same region.</span></span> 

    ```bash
    az group create --name <resource_group_name> --location <region>  
    ```

3. <span data-ttu-id="6357c-321">Futtassa a következő Azure CLI-parancsot az Azure-erőforrások üzembe helyezéséhez.</span><span class="sxs-lookup"><span data-stu-id="6357c-321">Run the following Azure CLI command to deploy the Azure resources.</span></span> <span data-ttu-id="6357c-322">Cserélje le a csúcsos zárójelben látható paraméter értékét.</span><span class="sxs-lookup"><span data-stu-id="6357c-322">Replace the parameter values shown in angle brackets.</span></span> 

    ```bash
    az group deployment create --resource-group <resource_group_name> \
     --template-file azure-resources-deploy.json \
     --parameters "dwServerName"="<server_name>" \
     "dwAdminLogin"="<admin_username>" "dwAdminPassword"="<password>" \ 
     "storageAccountName"="<storage_account_name>" \
     "analysisServerName"="<analysis_server_name>" \
     "analysisServerAdmin"="user@contoso.com"
    ```

    - <span data-ttu-id="6357c-323">A `storageAccountName` paraméter kell követnie a [elnevezési szabályok](../../best-practices/naming-conventions.md#naming-rules-and-restrictions) tárfiókok esetében.</span><span class="sxs-lookup"><span data-stu-id="6357c-323">The `storageAccountName` parameter must follow the [naming rules](../../best-practices/naming-conventions.md#naming-rules-and-restrictions) for Storage accounts.</span></span>
    - <span data-ttu-id="6357c-324">Az a `analysisServerAdmin` paramétert, használja az Azure Active Directory egyszerű felhasználónév (UPN).</span><span class="sxs-lookup"><span data-stu-id="6357c-324">For the `analysisServerAdmin` parameter, use your Azure Active Directory user principal name (UPN).</span></span>

4. <span data-ttu-id="6357c-325">Az üzembe helyezés az Azure Portalon ellenőrizze az erőforrások az erőforráscsoportban lévő áttekintésével.</span><span class="sxs-lookup"><span data-stu-id="6357c-325">Verify the deployment in the Azure portal by reviewing the resources in the resource group.</span></span> <span data-ttu-id="6357c-326">A storage-fiók, Azure SQL Data Warehouse-példányhoz és Analysis Services-példányt kell megjelennie.</span><span class="sxs-lookup"><span data-stu-id="6357c-326">You should see a storage account, Azure SQL Data Warehouse instance, and Analysis Services instance.</span></span>

5. <span data-ttu-id="6357c-327">Az Azure portal használatával a tárfiók hozzáférési kulcs lekérése.</span><span class="sxs-lookup"><span data-stu-id="6357c-327">Use the Azure portal to get the access key for the storage account.</span></span> <span data-ttu-id="6357c-328">A megnyitáshoz válassza ki a tárfiókot.</span><span class="sxs-lookup"><span data-stu-id="6357c-328">Select the storage account to open it.</span></span> <span data-ttu-id="6357c-329">A **Beállítások** területen válassza a **Hozzáférési kulcsok** elemet.</span><span class="sxs-lookup"><span data-stu-id="6357c-329">Under **Settings**, select **Access keys**.</span></span> <span data-ttu-id="6357c-330">Másolja az elsődleges kulcs értékét.</span><span class="sxs-lookup"><span data-stu-id="6357c-330">Copy the primary key value.</span></span> <span data-ttu-id="6357c-331">Ez a következő lépésben fogja használni.</span><span class="sxs-lookup"><span data-stu-id="6357c-331">You will use it in the next step.</span></span>

### <a name="export-the-source-data-to-azure-blob-storage"></a><span data-ttu-id="6357c-332">Az adatok exportálása az Azure Blob storage</span><span class="sxs-lookup"><span data-stu-id="6357c-332">Export the source data to Azure Blob storage</span></span> 

<span data-ttu-id="6357c-333">Ebben a lépésben fog futtatni egy PowerShell-parancsprogram, amely a BCP segítségével exportál az SQL database egybesimított fájlokba, a virtuális gépen, és ezután másolja ki ezeket a fájlokat az Azure Blob Storage-bA az AzCopy használatával.</span><span class="sxs-lookup"><span data-stu-id="6357c-333">In this step, you will run a PowerShell script that uses bcp to export the SQL database to flat files on the VM, and then uses AzCopy to copy those files into Azure Blob Storage.</span></span>

1. <span data-ttu-id="6357c-334">A távoli asztal használatával csatlakozhat a szimulált helyszíni virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="6357c-334">Use Remote Desktop to connect to the simulated on-premises VM.</span></span>

2. <span data-ttu-id="6357c-335">Bejelentkezés a virtuális géppel, futtassa az alábbi parancsokat a PowerShell-ablakból.</span><span class="sxs-lookup"><span data-stu-id="6357c-335">While logged into the VM, run the following commands from a PowerShell window.</span></span>  

    ```powershell
    cd 'C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\onprem'

    .\Load_SourceData_To_Blob.ps1 -File .\sql_scripts\db_objects.txt -Destination 'https://<storage_account_name>.blob.core.windows.net/wwi' -StorageAccountKey '<storage_account_key>'
    ```

    <span data-ttu-id="6357c-336">Az a `Destination` paramétert, cserélje le `<storage_account_name>` a korábban létrehozott tárfiók nevét.</span><span class="sxs-lookup"><span data-stu-id="6357c-336">For the `Destination` parameter, replace `<storage_account_name>` with the name the Storage account that you created previously.</span></span> <span data-ttu-id="6357c-337">Az a `StorageAccountKey` paramétert, a hozzáférési kulcsot használja a tárfiók.</span><span class="sxs-lookup"><span data-stu-id="6357c-337">For the `StorageAccountKey` parameter, use the access key for that Storage account.</span></span>

3. <span data-ttu-id="6357c-338">Az Azure Portalon győződjön meg arról, hogy a forrásadatok a Blob storage másolták ellenőrizheti, hogy a tárfiók, a Blob szolgáltatás kiválasztásával, és nyissa meg a `wwi` tároló.</span><span class="sxs-lookup"><span data-stu-id="6357c-338">In the Azure portal, verify that the source data was copied to Blob storage by navigating to the storage account, selecting the Blob service, and opening the `wwi` container.</span></span> <span data-ttu-id="6357c-339">Megjelenik a mintametódus használ táblák listáját `WorldWideImporters_Application_*`.</span><span class="sxs-lookup"><span data-stu-id="6357c-339">You should see a list of tables prefaced with `WorldWideImporters_Application_*`.</span></span>

### <a name="run-the-data-warehouse-scripts"></a><span data-ttu-id="6357c-340">A data warehouse parancsfájlok futtatása</span><span class="sxs-lookup"><span data-stu-id="6357c-340">Run the data warehouse scripts</span></span>

1. <span data-ttu-id="6357c-341">A távoli asztali munkamenetből indítsa el az SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="6357c-341">From your Remote Desktop session, launch SQL Server Management Studio (SSMS).</span></span> 

2. <span data-ttu-id="6357c-342">Connect to SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="6357c-342">Connect to SQL Data Warehouse</span></span>

    - <span data-ttu-id="6357c-343">Kiszolgáló típusa: adatbázis-kezelő</span><span class="sxs-lookup"><span data-stu-id="6357c-343">Server type: Database Engine</span></span>
    
    - <span data-ttu-id="6357c-344">Kiszolgálónév: `<dwServerName>.database.windows.net`, ahol `<dwServerName>` amikor központilag telepítette az Azure-erőforrások megadott név.</span><span class="sxs-lookup"><span data-stu-id="6357c-344">Server name: `<dwServerName>.database.windows.net`, where `<dwServerName>` is the name that you specified when you deployed the Azure resources.</span></span> <span data-ttu-id="6357c-345">Ez a név kaphat az Azure Portalról.</span><span class="sxs-lookup"><span data-stu-id="6357c-345">You can get this name from the Azure portal.</span></span>
    
    - <span data-ttu-id="6357c-346">Hitelesítés: SQL Server-hitelesítés.</span><span class="sxs-lookup"><span data-stu-id="6357c-346">Authentication: SQL Server Authentication.</span></span> <span data-ttu-id="6357c-347">Amikor központilag telepítette az Azure-erőforrások, a megadott hitelesítő adatokat a `dwAdminLogin` és `dwAdminPassword` paramétereket.</span><span class="sxs-lookup"><span data-stu-id="6357c-347">Use the credentials that you specified when you deployed the Azure resources, in the `dwAdminLogin` and `dwAdminPassword` parameters.</span></span>

2. <span data-ttu-id="6357c-348">Keresse meg a `C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\azure\sqldw_scripts` mappa a virtuális gépen.</span><span class="sxs-lookup"><span data-stu-id="6357c-348">Navigate to the `C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\azure\sqldw_scripts` folder on the VM.</span></span> <span data-ttu-id="6357c-349">Ebben a mappában számsorrendben, a parancsfájlok végrehajtásának `STEP_1` keresztül `STEP_7`.</span><span class="sxs-lookup"><span data-stu-id="6357c-349">You will execute the scripts in this folder in numerical order, `STEP_1` through `STEP_7`.</span></span>

3. <span data-ttu-id="6357c-350">Válassza ki a `master` adatbázisban az ssms-ben, és nyissa meg a `STEP_1` parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="6357c-350">Select the `master` database in SSMS and open the `STEP_1` script.</span></span> <span data-ttu-id="6357c-351">Módosítsa az értéket a következő sort a jelszót, majd hajtsa végre a parancsprogramot.</span><span class="sxs-lookup"><span data-stu-id="6357c-351">Change the value of the password in the following line, then execute the script.</span></span>

    ```sql
    CREATE LOGIN LoaderRC20 WITH PASSWORD = '<change this value>';
    ```

4. <span data-ttu-id="6357c-352">Válassza ki a `wwi` adatbázisban az ssms-ben.</span><span class="sxs-lookup"><span data-stu-id="6357c-352">Select the `wwi` database in SSMS.</span></span> <span data-ttu-id="6357c-353">Nyissa meg a `STEP_2` szkriptet, és hajtsa végre a parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="6357c-353">Open the `STEP_2` script and execute the script.</span></span> <span data-ttu-id="6357c-354">Ha hibaüzenetet kap, ellenőrizze, hogy a szkript futtatásakor a `wwi` adatbázist, és nem `master`.</span><span class="sxs-lookup"><span data-stu-id="6357c-354">If you get an error, make sure you are running the script against the `wwi` database and not `master`.</span></span>

5. <span data-ttu-id="6357c-355">Nyisson meg egy új kapcsolatot az SQL Data Warehouse használatával a `LoaderRC20` megadott felhasználónevet és a jelszót a `STEP_1` parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="6357c-355">Open a new connection to SQL Data Warehouse, using the `LoaderRC20` user and the password indicated in the `STEP_1` script.</span></span>

6. <span data-ttu-id="6357c-356">Ez a kapcsolat használatával nyissa meg a `STEP_3` parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="6357c-356">Using this connection, open the `STEP_3` script.</span></span> <span data-ttu-id="6357c-357">A parancsfájlban állítsa be a következő értékeket:</span><span class="sxs-lookup"><span data-stu-id="6357c-357">Set the following values in the script:</span></span>

    - <span data-ttu-id="6357c-358">Titkos kulcs: A hozzáférési kulcsot használja a tárfiók.</span><span class="sxs-lookup"><span data-stu-id="6357c-358">SECRET: Use the access key for your storage account.</span></span>
    - <span data-ttu-id="6357c-359">HELY: A tárfiók nevére az alábbiak szerint alkalmazza: `wasbs://wwi@<storage_account_name>.blob.core.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="6357c-359">LOCATION: Use the name of the storage account as follows: `wasbs://wwi@<storage_account_name>.blob.core.windows.net`.</span></span>

7. <span data-ttu-id="6357c-360">Ugyanazt a kapcsolatot, használja a szkriptek végrehajtása `STEP_4` keresztül `STEP_7` egymás után.</span><span class="sxs-lookup"><span data-stu-id="6357c-360">Using the same connection, execute scripts `STEP_4` through `STEP_7` sequentially.</span></span> <span data-ttu-id="6357c-361">Győződjön meg arról, hogy minden parancsprogram a következő futtatása előtt sikeresen lefutott.</span><span class="sxs-lookup"><span data-stu-id="6357c-361">Verify that each script completes successfully before running the next.</span></span>

<span data-ttu-id="6357c-362">Az SMSS, kell megjelennie egy készletét `prd.*` a táblák a `wwi` adatbázis.</span><span class="sxs-lookup"><span data-stu-id="6357c-362">In SMSS, you should see a set of `prd.*` tables in the `wwi` database.</span></span> <span data-ttu-id="6357c-363">Annak ellenőrzéséhez, hogy létrejött-e az adatokat, a következő lekérdezés futtatásával:</span><span class="sxs-lookup"><span data-stu-id="6357c-363">To verify that the data was generated, run the following query:</span></span> 

```sql
SELECT TOP 10 * FROM prd.CityDimensions
```

## <a name="build-the-analysis-services-model"></a><span data-ttu-id="6357c-364">Az Analysis Services-modell létrehozása</span><span class="sxs-lookup"><span data-stu-id="6357c-364">Build the Analysis Services model</span></span>

<span data-ttu-id="6357c-365">Ebben a lépésben létrehoz egy táblázatos modellhez, amely adatokat importál az adatraktárba.</span><span class="sxs-lookup"><span data-stu-id="6357c-365">In this step, you will create a tabular model that imports data from the data warehouse.</span></span> <span data-ttu-id="6357c-366">A modell telepíti majd az Azure Analysis Servicesbe.</span><span class="sxs-lookup"><span data-stu-id="6357c-366">Then you will deploy the model to Azure Analysis Services.</span></span>

1. <span data-ttu-id="6357c-367">A távoli asztali munkamenetből indítsa el az SQL Server Data Tools 2015.</span><span class="sxs-lookup"><span data-stu-id="6357c-367">From your Remote Desktop session, launch SQL Server Data Tools 2015.</span></span>

2. <span data-ttu-id="6357c-368">Válassza a **File** (Fájl) > **New** (Új) > **Project** (Projekt) lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="6357c-368">Select **File** > **New** > **Project**.</span></span>

3. <span data-ttu-id="6357c-369">Az a **új projekt** párbeszédpanelen, a **sablonok**válassza **üzleti intelligencia** > **Analysis Services**  >  **Analysis Services rendszerbeli táblázatos projekt**.</span><span class="sxs-lookup"><span data-stu-id="6357c-369">In the **New Project** dialog, under **Templates**, select  **Business Intelligence** > **Analysis Services** > **Analysis Services Tabular Project**.</span></span> 

4. <span data-ttu-id="6357c-370">Adja a projektnek, és kattintson a **OK**.</span><span class="sxs-lookup"><span data-stu-id="6357c-370">Name the project and click **OK**.</span></span>

5. <span data-ttu-id="6357c-371">Az a **táblázatos modell tervezője** párbeszédpanelen válassza **integrált munkaterület** és **kompatibilitási szint** való `SQL Server 2017 / Azure Analysis Services (1400)`.</span><span class="sxs-lookup"><span data-stu-id="6357c-371">In the **Tabular model designer** dialog, select **Integrated workspace**  and set **Compatibility level** to `SQL Server 2017 / Azure Analysis Services (1400)`.</span></span> <span data-ttu-id="6357c-372">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="6357c-372">Click **OK**.</span></span>

6. <span data-ttu-id="6357c-373">Az a **Táblázatosmodell-tallózóban** ablakban kattintson a jobb gombbal a projektre, majd válassza ki **importálás adatforrásból**.</span><span class="sxs-lookup"><span data-stu-id="6357c-373">In the **Tabular Model Explorer** window, right-click the project and select **Import from Data Source**.</span></span>

7. <span data-ttu-id="6357c-374">Válassza ki **Azure SQL Data Warehouse** kattintson **Connect**.</span><span class="sxs-lookup"><span data-stu-id="6357c-374">Select **Azure SQL Data Warehouse** and click **Connect**.</span></span>

8. <span data-ttu-id="6357c-375">A **kiszolgáló**, adja meg az Azure SQL Data Warehouse-kiszolgáló teljes nevét.</span><span class="sxs-lookup"><span data-stu-id="6357c-375">For **Server**, enter the fully qualified name of your Azure SQL Data Warehouse server.</span></span> <span data-ttu-id="6357c-376">A **adatbázis**, adja meg `wwi`.</span><span class="sxs-lookup"><span data-stu-id="6357c-376">For **Database**, enter `wwi`.</span></span> <span data-ttu-id="6357c-377">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="6357c-377">Click **OK**.</span></span>

9. <span data-ttu-id="6357c-378">A következő párbeszédpanelen válasszon **adatbázis** hitelesítést, és adja meg az Azure SQL Data Warehouse-felhasználónevet és jelszót, majd kattintson **OK**.</span><span class="sxs-lookup"><span data-stu-id="6357c-378">In the next dialog, choose **Database** authentication and enter your Azure SQL Data Warehouse user name and password, and click **OK**.</span></span>

10. <span data-ttu-id="6357c-379">Az a **kezelő** párbeszédpanelen jelölje be a jelölőnégyzeteket **prd. CityDimensions**, **prd. DateDimensions**, és **prd. SalesFact**.</span><span class="sxs-lookup"><span data-stu-id="6357c-379">In the **Navigator** dialog, select the checkboxes for **prd.CityDimensions**, **prd.DateDimensions**, and **prd.SalesFact**.</span></span> 

    ![](./images/analysis-services-import.png)

11. <span data-ttu-id="6357c-380">Kattintson a **terhelés**.</span><span class="sxs-lookup"><span data-stu-id="6357c-380">Click **Load**.</span></span> <span data-ttu-id="6357c-381">Feldolgozás befejeződése után kattintson a **Bezárás**.</span><span class="sxs-lookup"><span data-stu-id="6357c-381">When processing is complete, click **Close**.</span></span> <span data-ttu-id="6357c-382">Meg kell jelennie az adatok egy táblázatos nézetben.</span><span class="sxs-lookup"><span data-stu-id="6357c-382">You should now see a tabular view of the data.</span></span>

12. <span data-ttu-id="6357c-383">Az a **Táblázatosmodell-tallózóban** ablakban kattintson a jobb gombbal a projektre, majd válassza ki **modellnézet** > **diagramnézet**.</span><span class="sxs-lookup"><span data-stu-id="6357c-383">In the **Tabular Model Explorer** window, right-click the project and select **Model View** > **Diagram View**.</span></span>

13. <span data-ttu-id="6357c-384">Húzza a **[prd. SalesFact]. [WWI város ID]**  mezőt a **[prd. CityDimensions]. [WWI város ID]**  mező egy kapcsolat létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="6357c-384">Drag the **[prd.SalesFact].[WWI City ID]** field to the **[prd.CityDimensions].[WWI City ID]** field to create a relationship.</span></span>  

14. <span data-ttu-id="6357c-385">Húzza a **[prd. SalesFact]. [Invoice Date Key]**  mezőt a **[prd. DateDimensions]. [Date]**  mező.</span><span class="sxs-lookup"><span data-stu-id="6357c-385">Drag the **[prd.SalesFact].[Invoice Date Key]** field to the **[prd.DateDimensions].[Date]** field.</span></span>  
    ![](./images/analysis-services-relations.png)

15. <span data-ttu-id="6357c-386">Az a **fájl** menüben válassza a **összes mentése**.</span><span class="sxs-lookup"><span data-stu-id="6357c-386">From the **File** menu, choose **Save All**.</span></span>  

16. <span data-ttu-id="6357c-387">A **Megoldáskezelőben**, kattintson a jobb gombbal a projektre, és válassza ki **tulajdonságok**.</span><span class="sxs-lookup"><span data-stu-id="6357c-387">In **Solution Explorer**, right-click the project and select **Properties**.</span></span> 

17. <span data-ttu-id="6357c-388">A **kiszolgáló**, adja meg az Azure Analysis Services-példány URL-CÍMÉT.</span><span class="sxs-lookup"><span data-stu-id="6357c-388">Under **Server**, enter the URL of your Azure Analysis Services instance.</span></span> <span data-ttu-id="6357c-389">Ezt az értéket kaphat az Azure Portalról.</span><span class="sxs-lookup"><span data-stu-id="6357c-389">You can get this value from the Azure Portal.</span></span> <span data-ttu-id="6357c-390">A portálon, válassza ki az Analysis Services-erőforrást, az Áttekintés ablaktábláján kattintson, és keresse meg a **kiszolgálónév** tulajdonság.</span><span class="sxs-lookup"><span data-stu-id="6357c-390">In the portal, select the Analysis Services resource, click the Overview pane, and look for the **Server Name** property.</span></span> <span data-ttu-id="6357c-391">Hasonló lesz `asazure://westus.asazure.windows.net/contoso`.</span><span class="sxs-lookup"><span data-stu-id="6357c-391">It will be similar to `asazure://westus.asazure.windows.net/contoso`.</span></span> <span data-ttu-id="6357c-392">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="6357c-392">Click **OK**.</span></span>

    ![](./images/analysis-services-properties.png)

18. <span data-ttu-id="6357c-393">A **Megoldáskezelőben**, kattintson a jobb gombbal a projektre, és válassza ki **telepítés**.</span><span class="sxs-lookup"><span data-stu-id="6357c-393">In **Solution Explorer**, right-click the project and select **Deploy**.</span></span> <span data-ttu-id="6357c-394">Ha a rendszer kéri, jelentkezzen be Azure.</span><span class="sxs-lookup"><span data-stu-id="6357c-394">Sign into Azure if prompted.</span></span> <span data-ttu-id="6357c-395">Feldolgozás befejeződése után kattintson a **Bezárás**.</span><span class="sxs-lookup"><span data-stu-id="6357c-395">When processing is complete, click **Close**.</span></span>

19. <span data-ttu-id="6357c-396">Az Azure Portalon az Azure Analysis Services-példány részleteinek megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="6357c-396">In the Azure portal, view the details for your Azure Analysis Services instance.</span></span> <span data-ttu-id="6357c-397">Győződjön meg arról, hogy a modell a modellek listája látható.</span><span class="sxs-lookup"><span data-stu-id="6357c-397">Verify that your model appears in the list of models.</span></span>

    ![](./images/analysis-services-models.png)

## <a name="analyze-the-data-in-power-bi-desktop"></a><span data-ttu-id="6357c-398">Elemezheti az adatokat a Power BI Desktopban</span><span class="sxs-lookup"><span data-stu-id="6357c-398">Analyze the data in Power BI Desktop</span></span>

<span data-ttu-id="6357c-399">Ebben a lépésben használandó Power BI-jelentés létrehozása az adatokból az Analysis Servicesben.</span><span class="sxs-lookup"><span data-stu-id="6357c-399">In this step, you will use Power BI to create a report from the data in Analysis Services.</span></span>

1. <span data-ttu-id="6357c-400">A távoli asztali munkamenetből indítsa el a Power BI Desktopban.</span><span class="sxs-lookup"><span data-stu-id="6357c-400">From your Remote Desktop session, launch Power BI Desktop.</span></span>

2. <span data-ttu-id="6357c-401">Kattintson az üdvözlő Scren **adatok lekérése**.</span><span class="sxs-lookup"><span data-stu-id="6357c-401">In the Welcome Scren, click **Get Data**.</span></span>

3. <span data-ttu-id="6357c-402">Válassza ki **Azure** > **Azure Analysis Services-adatbázis**.</span><span class="sxs-lookup"><span data-stu-id="6357c-402">Select **Azure** > **Azure Analysis Services database**.</span></span> <span data-ttu-id="6357c-403">Kattintson a **csatlakoztatása**</span><span class="sxs-lookup"><span data-stu-id="6357c-403">Click **Connect**</span></span>

    ![](./images/power-bi-get-data.png)

4. <span data-ttu-id="6357c-404">Adja meg az Analysis Services-példány URL-CÍMÉT, majd kattintson a **OK**.</span><span class="sxs-lookup"><span data-stu-id="6357c-404">Enter the URL of your Analysis Services instance, then click **OK**.</span></span> <span data-ttu-id="6357c-405">Ha a rendszer kéri, jelentkezzen be Azure.</span><span class="sxs-lookup"><span data-stu-id="6357c-405">Sign into Azure if prompted.</span></span>

5. <span data-ttu-id="6357c-406">Az a **kezelő** párbeszédpanelen bontsa ki a táblázatos projektet, üzembe helyezett, válassza ki a létrehozott, és kattintson a létrehozott modellt **OK**.</span><span class="sxs-lookup"><span data-stu-id="6357c-406">In the **Navigator** dialog, expand the tabular project that you deployed, select the model that you created, and click **OK**.</span></span>

2. <span data-ttu-id="6357c-407">Az a **Vizualizációk** panelen válassza a **-ig halmozott sávdiagram** ikonra.</span><span class="sxs-lookup"><span data-stu-id="6357c-407">In the **Visualizations** pane, select the **Stacked Bar Chart** icon.</span></span> <span data-ttu-id="6357c-408">A jelentés nézetben méretezze át a Vizualizáció nagyobb legyen.</span><span class="sxs-lookup"><span data-stu-id="6357c-408">In the Report view, resize the visualization to make it larger.</span></span>

6. <span data-ttu-id="6357c-409">Az a **mezők** ablaktáblán bontsa ki a **prd. CityDimensions**.</span><span class="sxs-lookup"><span data-stu-id="6357c-409">In the **Fields** pane, expand **prd.CityDimensions**.</span></span>

7. <span data-ttu-id="6357c-410">A csomóponthúzási **prd. CityDimensions** > **WWI város azonosító** , a **tengely** is.</span><span class="sxs-lookup"><span data-stu-id="6357c-410">Drag **prd.CityDimensions** > **WWI City ID** to the **Axis** well.</span></span>

8. <span data-ttu-id="6357c-411">A csomóponthúzási **prd. CityDimensions** > **Város** , a **jelmagyarázat** is.</span><span class="sxs-lookup"><span data-stu-id="6357c-411">Drag **prd.CityDimensions** > **City** to the **Legend** well.</span></span>

9. <span data-ttu-id="6357c-412">Az a **mezők** ablaktáblán bontsa ki a **prd. SalesFact**.</span><span class="sxs-lookup"><span data-stu-id="6357c-412">In the **Fields** pane, expand **prd.SalesFact**.</span></span>

10. <span data-ttu-id="6357c-413">A csomóponthúzási **prd. SalesFact** > **kivételével adó** , a **érték** is.</span><span class="sxs-lookup"><span data-stu-id="6357c-413">Drag **prd.SalesFact** > **Total Excluding Tax** to the **Value** well.</span></span>

    ![](./images/power-bi-visualization.png)

11. <span data-ttu-id="6357c-414">A **Látványelemszint szűrői**válassza **WWI város azonosító**.</span><span class="sxs-lookup"><span data-stu-id="6357c-414">Under **Visual Level Filters**, select **WWI City ID**.</span></span>

12. <span data-ttu-id="6357c-415">Állítsa be a **szűrőtípus** való `Top N`, és állítsa be **elemek megjelenítése** való `Top 10`.</span><span class="sxs-lookup"><span data-stu-id="6357c-415">Set the **Filter Type** to `Top N`, and set **Show Items** to `Top 10`.</span></span>

13. <span data-ttu-id="6357c-416">A csomóponthúzási **prd. SalesFact** > **kivételével adó** , a **idővel** is</span><span class="sxs-lookup"><span data-stu-id="6357c-416">Drag **prd.SalesFact** > **Total Excluding Tax** to the **By Value** well</span></span>

    ![](./images/power-bi-visualization2.png)

14. <span data-ttu-id="6357c-417">Kattintson a **szűrő alkalmazása**.</span><span class="sxs-lookup"><span data-stu-id="6357c-417">Click **Apply Filter**.</span></span> <span data-ttu-id="6357c-418">A Vizualizáció a felső 10 összes értékesítés város szerint jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="6357c-418">The visualization shows the top 10 total sales by city.</span></span>

    ![](./images/power-bi-report.png)

<span data-ttu-id="6357c-419">A Power BI Desktop kapcsolatos további információkért lásd: [Ismerkedés a Power BI Desktop](/power-bi/desktop-getting-started).</span><span class="sxs-lookup"><span data-stu-id="6357c-419">To learn more about Power BI Desktop, see [Getting started with Power BI Desktop](/power-bi/desktop-getting-started).</span></span>

## <a name="next-steps"></a><span data-ttu-id="6357c-420">További lépések</span><span class="sxs-lookup"><span data-stu-id="6357c-420">Next steps</span></span>

- <span data-ttu-id="6357c-421">Ez a referenciaarchitektúra kapcsolatos további információkért látogasson el a [GitHub-adattár][ref-arch-repo-folder].</span><span class="sxs-lookup"><span data-stu-id="6357c-421">For more information about this reference architecture, visit our [GitHub repository][ref-arch-repo-folder].</span></span>
- <span data-ttu-id="6357c-422">További információ a [az Azure építőelemei][azbb-repo].</span><span class="sxs-lookup"><span data-stu-id="6357c-422">Learn about the [Azure Building Blocks][azbb-repo].</span></span>

<!-- links -->

[azure-cli-2]: /azure/install-azure-cli
[azbb-repo]: https://github.com/mspnp/template-building-blocks
[azbb-wiki]: https://github.com/mspnp/template-building-blocks/wiki/Install-Azure-Building-Blocks
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/data/enterprise_bi_sqldw
[ref-arch-repo]: https://github.com/mspnp/reference-architectures
[ref-arch-repo-folder]: https://github.com/mspnp/reference-architectures/tree/master/data/enterprise_bi_sqldw
[wwi]: /sql/sample/world-wide-importers/wide-world-importers-oltp-database
