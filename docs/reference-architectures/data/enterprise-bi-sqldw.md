---
title: Vállalati BI, az SQL Data Warehouse szolgáltatással
description: A relációs adatok üzleti dcu használata Azure tárolt helyszíni
author: alexbuckgit
ms.date: 04/13/2018
ms.openlocfilehash: b5e5aa32fc9cc8c7b8b5a42c9a4fc3e0216b2f72
ms.sourcegitcommit: f665226cec96ec818ca06ac6c2d83edb23c9f29c
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 04/16/2018
ms.locfileid: "31019107"
---
# <a name="enterprise-bi-with-sql-data-warehouse"></a><span data-ttu-id="8426d-103">Vállalati BI, az SQL Data Warehouse szolgáltatással</span><span class="sxs-lookup"><span data-stu-id="8426d-103">Enterprise BI with SQL Data Warehouse</span></span>
 
<span data-ttu-id="8426d-104">A referencia-architektúrában megvalósítja az [ELT](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) (kivonat-betöltési-átalakítási) folyamatot, amely adatokat a helyszíni SQL Server-adatbázist az SQL Data Warehouse pedig átalakítja a vonatkozó adatok elemzési célú.</span><span class="sxs-lookup"><span data-stu-id="8426d-104">This reference architecture implements an [ELT](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) (extract-load-transform) pipeline that moves data from an on-premises SQL Server database into SQL Data Warehouse and transforms the data for analysis.</span></span> [<span data-ttu-id="8426d-105">**A megoldás üzembe helyezése**.</span><span class="sxs-lookup"><span data-stu-id="8426d-105">**Deploy this solution**.</span></span>](#deploy-the-solution)

![](./images/enterprise-bi-sqldw.png)

<span data-ttu-id="8426d-106">**A forgatókönyv**: egy szervezet rendelkezik a nagy OLTP adatkészletet, a helyszíni SQL Server adatbázis tárolja.</span><span class="sxs-lookup"><span data-stu-id="8426d-106">**Scenario**: An organization has a large OLTP data set stored in a SQL Server database on premises.</span></span> <span data-ttu-id="8426d-107">A szervezet szeretné használni az SQL Data Warehouse elemzésére a Power BI használatával.</span><span class="sxs-lookup"><span data-stu-id="8426d-107">The organization wants to use SQL Data Warehouse to perform analysis using Power BI.</span></span> 

<span data-ttu-id="8426d-108">A referencia-architektúrában egyszeri vagy igény szerinti feladatok tervezték.</span><span class="sxs-lookup"><span data-stu-id="8426d-108">This reference architecture is designed for one-time or on-demand jobs.</span></span> <span data-ttu-id="8426d-109">Ha az adatok áthelyezése (óránként vagy naponta) tartósan van szüksége, azt javasoljuk, Azure Data Factory egy automatizált munkafolyamat meghatározásához.</span><span class="sxs-lookup"><span data-stu-id="8426d-109">If you need to move data on a continuing basis (hourly or daily), we recommend using Azure Data Factory to define an automated workflow.</span></span>

## <a name="architecture"></a><span data-ttu-id="8426d-110">Architektúra</span><span class="sxs-lookup"><span data-stu-id="8426d-110">Architecture</span></span>

<span data-ttu-id="8426d-111">Az architektúra a következőkben leírt összetevőkből áll.</span><span class="sxs-lookup"><span data-stu-id="8426d-111">The architecture consists of the following components.</span></span>

<span data-ttu-id="8426d-112">**Egy SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="8426d-112">**SQL Server**.</span></span> <span data-ttu-id="8426d-113">Az adatok a helyszíni SQL Server-adatbázisban található.</span><span class="sxs-lookup"><span data-stu-id="8426d-113">The source data is located in a SQL Server database on premises.</span></span> <span data-ttu-id="8426d-114">A helyszíni környezetben, az az architektúra biztosítása a telepített SQL Server Azure virtuális gép üzembe helyezési parancsfájlok szimulálásához.</span><span class="sxs-lookup"><span data-stu-id="8426d-114">To simulate the on-premises environment, the deployment scripts for this architecture provision a virtual machine in Azure with SQL Server installed.</span></span> 

<span data-ttu-id="8426d-115">**BLOB Storage**.</span><span class="sxs-lookup"><span data-stu-id="8426d-115">**Blob Storage**.</span></span> <span data-ttu-id="8426d-116">A BLOB storage segítségével egy átmeneti területre, másolja az adatokat, az SQL Data Warehouse betöltése előtt.</span><span class="sxs-lookup"><span data-stu-id="8426d-116">Blob storage is used as a staging area to copy the data before loading it into SQL Data Warehouse.</span></span>

<span data-ttu-id="8426d-117">**Azure SQL Data Warehouse**.</span><span class="sxs-lookup"><span data-stu-id="8426d-117">**Azure SQL Data Warehouse**.</span></span> <span data-ttu-id="8426d-118">[Az SQL Data Warehouse](/azure/sql-data-warehouse/) egy elosztott rendszer készült elemzés végrehajtásához, nagy.</span><span class="sxs-lookup"><span data-stu-id="8426d-118">[SQL Data Warehouse](/azure/sql-data-warehouse/) is a distributed system designed to perform analytics on large data.</span></span> <span data-ttu-id="8426d-119">Támogatja a jelentős olyan párhuzamos feldolgozási (MPP), épp ezért kiválóan alkalmas a nagy teljesítményű analytics futtatásához.</span><span class="sxs-lookup"><span data-stu-id="8426d-119">It supports massive parallel processing (MPP), which makes it suitable for running high-performance analytics.</span></span> 

<span data-ttu-id="8426d-120">**Az Azure Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="8426d-120">**Azure Analysis Services**.</span></span> <span data-ttu-id="8426d-121">[Analysis Services](/azure/analysis-services/) egy teljes körűen felügyelt szolgáltatás, amely a modellezési képességekkel adatokat biztosít.</span><span class="sxs-lookup"><span data-stu-id="8426d-121">[Analysis Services](/azure/analysis-services/) is a fully managed service that provides data modeling capabilities.</span></span> <span data-ttu-id="8426d-122">Analysis Services segítségével hozzon létre egy, a felhasználók lekérdezheti a szemantikai modellben.</span><span class="sxs-lookup"><span data-stu-id="8426d-122">Use Analysis Services to create a semantic model that users can query.</span></span> <span data-ttu-id="8426d-123">Analysis Services különösen fontos olyan BI-irányítópult forgatókönyvekben.</span><span class="sxs-lookup"><span data-stu-id="8426d-123">Analysis Services is especially useful in a BI dashboard scenario.</span></span> <span data-ttu-id="8426d-124">Ebben az architektúrában Analysis Services olvassa be az adatokat az adatraktárban a szemantikai modell feldolgozásához, és hatékonyan működik az irányítópult lekérdezések.</span><span class="sxs-lookup"><span data-stu-id="8426d-124">In this architecture, Analysis Services reads data from the data warehouse to process the semantic model, and efficiently serves dashboard queries.</span></span> <span data-ttu-id="8426d-125">Rugalmas párhuzamossági gyorsabb a lekérdezés feldolgozása a replikák kiterjesztése által is támogatja.</span><span class="sxs-lookup"><span data-stu-id="8426d-125">It also supports elastic concurrency, by scaling out replicas for faster query processing.</span></span>

<span data-ttu-id="8426d-126">Jelenleg Azure Analysis Services rendszerbeli táblázatos modellek, de nem többdimenziós modellek támogatja.</span><span class="sxs-lookup"><span data-stu-id="8426d-126">Currently, Azure Analysis Services supports tabular models but not multidimensional models.</span></span> <span data-ttu-id="8426d-127">A táblázatos modellek használata relációs modellezési hoz létre (táblákat és oszlopokat), míg többdimenziós modellek használó OLAP modellezési szerkezetek (kockák, dimenziókat és mértékeket).</span><span class="sxs-lookup"><span data-stu-id="8426d-127">Tabular models use relational modeling constructs (tables and columns), whereas multidimensional models use OLAP modeling constructs (cubes, dimensions, and measures).</span></span> <span data-ttu-id="8426d-128">Ha többdimenziós modellek van szüksége, használja az SQL Server Analysis Services (SSAS).</span><span class="sxs-lookup"><span data-stu-id="8426d-128">If you require multidimensional models, use SQL Server Analysis Services (SSAS).</span></span> <span data-ttu-id="8426d-129">További információkért lásd: [többdimenziós vagy táblázatos megoldások összehasonlítása](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span><span class="sxs-lookup"><span data-stu-id="8426d-129">For more information, see [Comparing tabular and multidimensional solutions](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span></span>

<span data-ttu-id="8426d-130">**Power BI**.</span><span class="sxs-lookup"><span data-stu-id="8426d-130">**Power BI**.</span></span> <span data-ttu-id="8426d-131">A Power BI eszközcsomagot jelent üzleti analytics üzleti elemzések készítése adatok elemzésére.</span><span class="sxs-lookup"><span data-stu-id="8426d-131">Power BI is a suite of business analytics tools to analyze data for business insights.</span></span> <span data-ttu-id="8426d-132">Ebben az architektúrában lekéri az Analysis Servicesben tárolt a szemantikai modellben.</span><span class="sxs-lookup"><span data-stu-id="8426d-132">In this architecture, it queries the semantic model stored in Analysis Services.</span></span>

<span data-ttu-id="8426d-133">**Az Azure Active Directory** (az Azure AD) hitelesíti a Power BI Analysis Services-kiszolgálóhoz csatlakozó felhasználók számára.</span><span class="sxs-lookup"><span data-stu-id="8426d-133">**Azure Active Directory** (Azure AD) authenticates users who connect to the Analysis Services server through Power BI.</span></span>

## <a name="data-pipeline"></a><span data-ttu-id="8426d-134">Data Pipeline</span><span class="sxs-lookup"><span data-stu-id="8426d-134">Data Pipeline</span></span>
 
<span data-ttu-id="8426d-135">A referencia-architektúrában használja a [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) mintaadatbázis adatforrásként.</span><span class="sxs-lookup"><span data-stu-id="8426d-135">This reference architecture uses the [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) sample database as data source.</span></span> <span data-ttu-id="8426d-136">Az adatok csővezeték rendelkezik a következő szakaszt:</span><span class="sxs-lookup"><span data-stu-id="8426d-136">The data pipeline has the following stages:</span></span>

1. <span data-ttu-id="8426d-137">Az adatok exportálása az SQL Serverről egybesimított fájlokba (bcp segédprogram).</span><span class="sxs-lookup"><span data-stu-id="8426d-137">Export the data from SQL Server to flat files (bcp utility).</span></span>
2. <span data-ttu-id="8426d-138">Másolja a strukturálatlan fájlokat az Azure Blob Storage-(ba AzCopy).</span><span class="sxs-lookup"><span data-stu-id="8426d-138">Copy the flat files to Azure Blob Storage (AzCopy).</span></span>
3. <span data-ttu-id="8426d-139">Az adatok betöltése az SQL Data warehouse-ba (PolyBase).</span><span class="sxs-lookup"><span data-stu-id="8426d-139">Load the data into SQL Data Warehouse (PolyBase).</span></span>
4. <span data-ttu-id="8426d-140">Adatok átalakítása a csillagsémát (T-SQL).</span><span class="sxs-lookup"><span data-stu-id="8426d-140">Transform the data into a star schema (T-SQL).</span></span>
5. <span data-ttu-id="8426d-141">A szemantikai modell betöltése az Analysis Services (SQL Server Data Tools).</span><span class="sxs-lookup"><span data-stu-id="8426d-141">Load a semantic model into Analysis Services (SQL Server Data Tools).</span></span>

![](./images/enterprise-bi-sqldw-pipeline.png)
 
> [!NOTE]
> <span data-ttu-id="8426d-142">A lépéseket 1 &ndash; 3, fontolja meg a Redgate adatok Platform Studio használatát.</span><span class="sxs-lookup"><span data-stu-id="8426d-142">For steps 1 &ndash; 3, consider using Redgate Data Platform Studio.</span></span> <span data-ttu-id="8426d-143">A Data Platform Studio a legmegfelelőbb kompatibilitási javításokat és optimalizálásokat alkalmazza, így ez a leggyorsabb mód az SQL Data Warehouse használatának megkezdésére.</span><span class="sxs-lookup"><span data-stu-id="8426d-143">Data Platform Studio applies the most appropriate compatibility fixes and optimizations, so it's the quickest way to get started with SQL Data Warehouse.</span></span> <span data-ttu-id="8426d-144">További információkért lásd: [adatok betöltését az Redgate adatok Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span><span class="sxs-lookup"><span data-stu-id="8426d-144">For more information, see [Load data with Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span></span> 

<span data-ttu-id="8426d-145">A következő szakaszok ismertetik a szakaszok részletesebben.</span><span class="sxs-lookup"><span data-stu-id="8426d-145">The next sections describe these stages in more detail.</span></span>

### <a name="export-data-from-sql-server"></a><span data-ttu-id="8426d-146">Exportál adatokat az SQL Server</span><span class="sxs-lookup"><span data-stu-id="8426d-146">Export data from SQL Server</span></span>

<span data-ttu-id="8426d-147">A [bcp](/sql/tools/bcp-utility) (tömeges másolási funkciójával) segédprogram használata egyszerű szöveges fájlt létrehozni az SQL-táblák gyors módja.</span><span class="sxs-lookup"><span data-stu-id="8426d-147">The [bcp](/sql/tools/bcp-utility) (bulk copy program) utility is a fast way to create flat text files from SQL tables.</span></span> <span data-ttu-id="8426d-148">Ebben a lépésben válassza az oszlopot, amely kíván exportálni, de nem átalakíthatja az adatokat.</span><span class="sxs-lookup"><span data-stu-id="8426d-148">In this step, you select the columns that you want to export, but don't transform the data.</span></span> <span data-ttu-id="8426d-149">Bármely adatátalakítást az SQL Data Warehouse megtörténik.</span><span class="sxs-lookup"><span data-stu-id="8426d-149">Any data transformations should happen in SQL Data Warehouse.</span></span>

<span data-ttu-id="8426d-150">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="8426d-150">**Recommendations**</span></span>

<span data-ttu-id="8426d-151">Ha lehetséges ütemezni a csúcsidőn, minimálisra csökkentése érdekében az éles környezetben Erőforrásverseny adatok kinyerése.</span><span class="sxs-lookup"><span data-stu-id="8426d-151">If possible, schedule data extraction during off-peak hours, to minimize resource contention in the production environment.</span></span> 

<span data-ttu-id="8426d-152">Kerülje a bcp fut a kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="8426d-152">Avoid running bcp on the database server.</span></span> <span data-ttu-id="8426d-153">Ehelyett futtassa azt egy másik számítógépről.</span><span class="sxs-lookup"><span data-stu-id="8426d-153">Instead, run it from another machine.</span></span> <span data-ttu-id="8426d-154">Egy helyi meghajtó a fájlok írni.</span><span class="sxs-lookup"><span data-stu-id="8426d-154">Write the files to a local drive.</span></span> <span data-ttu-id="8426d-155">Győződjön meg arról, hogy rendelkezik-e kezelni az egyidejű írási műveletek elegendő i/o-erőforrások.</span><span class="sxs-lookup"><span data-stu-id="8426d-155">Ensure that you have sufficient I/O resources to handle the concurrent writes.</span></span> <span data-ttu-id="8426d-156">A legjobb teljesítmény érdekében a fájlok exportálása dedikált gyors tárolóeszközöket.</span><span class="sxs-lookup"><span data-stu-id="8426d-156">For best performance, export the files to dedicated fast storage drives.</span></span>

<span data-ttu-id="8426d-157">A hálózati átvitel felgyorsíthatja az exportált adatok mentése Gzip tömörített formátumban.</span><span class="sxs-lookup"><span data-stu-id="8426d-157">You can speed up the network transfer by saving the exported data in Gzip compressed format.</span></span> <span data-ttu-id="8426d-158">Tömörített fájlok betöltését az adatraktárba azonban alacsonyabb, mint a kibontott fájlok betöltése, így gyorsabban betöltése vagy gyorsabb hálózati átviteli között egy kompromisszumot.</span><span class="sxs-lookup"><span data-stu-id="8426d-158">However, loading compressed files into the warehouse is slower than loading uncompressed files, so there is a tradeoff between faster network transfer versus faster loading.</span></span> <span data-ttu-id="8426d-159">Ha úgy dönt, hogy a Gzip-tömörítés, ne hozzon létre egy Gzip fájl.</span><span class="sxs-lookup"><span data-stu-id="8426d-159">If you decide to use Gzip compression, don't create a single Gzip file.</span></span> <span data-ttu-id="8426d-160">Ehelyett az adatok felosztása több tömörített fájl.</span><span class="sxs-lookup"><span data-stu-id="8426d-160">Instead, split the data into multiple compressed files.</span></span>

### <a name="copy-flat-files-into-blob-storage"></a><span data-ttu-id="8426d-161">A blob-tároló egybesimított fájlok másolása</span><span class="sxs-lookup"><span data-stu-id="8426d-161">Copy flat files into blob storage</span></span>

<span data-ttu-id="8426d-162">A [AzCopy](/azure/storage/common/storage-use-azcopy) segédprogram készült tartozó nagyteljesítményű másolására az adatok Azure blob-tárolóba.</span><span class="sxs-lookup"><span data-stu-id="8426d-162">The [AzCopy](/azure/storage/common/storage-use-azcopy) utility is designed for high-performance copying of data into Azure blob storage.</span></span>

<span data-ttu-id="8426d-163">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="8426d-163">**Recommendations**</span></span>

<span data-ttu-id="8426d-164">A storage-fiók létrehozása az adatok helye közeli régióban.</span><span class="sxs-lookup"><span data-stu-id="8426d-164">Create the storage account in a region near the location of the source data.</span></span> <span data-ttu-id="8426d-165">Telepítse a tárfiók és az SQL Data Warehouse-példányokhoz ugyanabban a régióban.</span><span class="sxs-lookup"><span data-stu-id="8426d-165">Deploy the storage account and the SQL Data Warehouse instance in the same region.</span></span> 

<span data-ttu-id="8426d-166">AzCopy ugyanazon a számítógépen, amelyen a termelési számítási feladatokhoz, nem futtatható, mert a Processzor- és i/o-felhasználás megzavarhatja a termelési munkaterhelés.</span><span class="sxs-lookup"><span data-stu-id="8426d-166">Don't run AzCopy on the same machine that runs your production workloads, because the CPU and I/O consumption can interfere with the production workload.</span></span> 

<span data-ttu-id="8426d-167">A feltöltés először megtudhatja, mi a feltöltési sebességét például tesztelése.</span><span class="sxs-lookup"><span data-stu-id="8426d-167">Test the upload first to see what the upload speed is like.</span></span> <span data-ttu-id="8426d-168">AzCopy /NC beállítás használatával adja meg az egyidejű másolási műveletek számát.</span><span class="sxs-lookup"><span data-stu-id="8426d-168">You can use the /NC option in AzCopy to specify the number of concurrent copy operations.</span></span> <span data-ttu-id="8426d-169">Indítsa el az alapértelmezett értékkel, majd ezt a beállítást, a teljesítmény hangolására kísérletezhet.</span><span class="sxs-lookup"><span data-stu-id="8426d-169">Start with the default value, then experiment with this setting to tune the performance.</span></span> <span data-ttu-id="8426d-170">Alacsony sávszélességű környezetben túl sok egyidejű művelet ne terhelje tovább a hálózati kapcsolatot, és megakadályozza a művelet sikeres befejezését.</span><span class="sxs-lookup"><span data-stu-id="8426d-170">In a low-bandwidth environment, too many concurrent operations can overwhelm the network connection and prevent the operations from completing successfully.</span></span>  

<span data-ttu-id="8426d-171">AzCopy adatok áthelyezése a nyilvános interneten keresztül a tárolási.</span><span class="sxs-lookup"><span data-stu-id="8426d-171">AzCopy moves data to storage over the public internet.</span></span> <span data-ttu-id="8426d-172">Ha ez nem elég gyors, érdemes beállítani egy [ExpressRoute](/azure/expressroute/) körön.</span><span class="sxs-lookup"><span data-stu-id="8426d-172">If this isn't fast enough, consider setting up an [ExpressRoute](/azure/expressroute/) circuit.</span></span> <span data-ttu-id="8426d-173">ExpressRoute olyan szolgáltatás, amely továbbítja a dedikált titkos kapcsolaton keresztül az adatok az Azure-bA.</span><span class="sxs-lookup"><span data-stu-id="8426d-173">ExpressRoute is a service that routes your data through a dedicated private connection to Azure.</span></span> <span data-ttu-id="8426d-174">Egy másik lehetőség, ha a hálózati kapcsolat túl lassú, egy fizikailag küldje el az adatokat egy Azure-adatközpontban lemezen lévő.</span><span class="sxs-lookup"><span data-stu-id="8426d-174">Another option, if your network connection is too slow, is to physically ship the data on disk to an Azure datacenter.</span></span> <span data-ttu-id="8426d-175">További információkért lásd: [Azure érkező vagy oda irányuló adatátvitel](/azure/architecture/data-guide/scenarios/data-transfer).</span><span class="sxs-lookup"><span data-stu-id="8426d-175">For more information, see [Transferring data to and from Azure](/azure/architecture/data-guide/scenarios/data-transfer).</span></span>

<span data-ttu-id="8426d-176">A másolási műveletek során AzCopy hoz létre egy ideiglenes napló fájlt, amely lehetővé teszi az AzCopy segítségével indítsa újra a műveletet, ha azt lekérése megszakadt (például egy hálózati hiba miatt).</span><span class="sxs-lookup"><span data-stu-id="8426d-176">During a copy operation, AzCopy creates a temporary journal file, which enables AzCopy to restart the operation if it gets interrupted (for example, due to a network error).</span></span> <span data-ttu-id="8426d-177">Győződjön meg arról, hogy nincs elegendő szabad lemezterület az adatbázisnapló-fájlok tárolására.</span><span class="sxs-lookup"><span data-stu-id="8426d-177">Make sure there is enough disk space to store the journal files.</span></span> <span data-ttu-id="8426d-178">A /Z kapcsoló használatával adja meg, ahová az adatbázisnapló-fájlok készültek.</span><span class="sxs-lookup"><span data-stu-id="8426d-178">You can use the /Z option to specify where the journal files are written.</span></span>

### <a name="load-data-into-sql-data-warehouse"></a><span data-ttu-id="8426d-179">Adatok betöltése az SQL Data Warehouse-ba</span><span class="sxs-lookup"><span data-stu-id="8426d-179">Load data into SQL Data Warehouse</span></span>

<span data-ttu-id="8426d-180">Használjon [PolyBase](/sql/relational-databases/polybase/polybase-guide) tölthető be a fájlokat a blob-tároló az adatraktárba.</span><span class="sxs-lookup"><span data-stu-id="8426d-180">Use [PolyBase](/sql/relational-databases/polybase/polybase-guide) to load the files from blob storage into the data warehouse.</span></span> <span data-ttu-id="8426d-181">A PolyBase célja, hogy kihasználja a (nagymértékben párhuzamos feldolgozás) MPP architektúra az SQL Data Warehouse, így az adatok betöltése az SQL Data Warehouse a leggyorsabban.</span><span class="sxs-lookup"><span data-stu-id="8426d-181">PolyBase is designed to leverage the MPP (Massively Parallel Processing) architecture of SQL Data Warehouse, which makes it the fastest way to load data into SQL Data Warehouse.</span></span> 

<span data-ttu-id="8426d-182">Az adatok betöltése két lépésből áll:</span><span class="sxs-lookup"><span data-stu-id="8426d-182">Loading the data is a two-step process:</span></span>

1. <span data-ttu-id="8426d-183">Az adatok külső táblái létrehozása.</span><span class="sxs-lookup"><span data-stu-id="8426d-183">Create a set of external tables for the data.</span></span> <span data-ttu-id="8426d-184">A külső tábla esetében mutat, az adatraktár-on kívüli adatkészletekhez tábla definícióját &mdash; ebben az esetben a simán fájlok, a blob Storage tárolóban.</span><span class="sxs-lookup"><span data-stu-id="8426d-184">An external table is a table definition that points to data stored outside of the warehouse &mdash; in this case, the flat files in blob storage.</span></span> <span data-ttu-id="8426d-185">Ez a lépés nem helyezi át adatokat az adatraktárba.</span><span class="sxs-lookup"><span data-stu-id="8426d-185">This step does not move any data into the warehouse.</span></span>
2. <span data-ttu-id="8426d-186">Átmeneti tárolási táblák létrehozása, és az adatok betöltése az átmeneti tárolási táblákba.</span><span class="sxs-lookup"><span data-stu-id="8426d-186">Create staging tables, and load the data into the staging tables.</span></span> <span data-ttu-id="8426d-187">Ez a lépés másolja az adatokat az adatraktárba.</span><span class="sxs-lookup"><span data-stu-id="8426d-187">This step copies the data into the warehouse.</span></span>

<span data-ttu-id="8426d-188">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="8426d-188">**Recommendations**</span></span>

<span data-ttu-id="8426d-189">Fontolja meg az SQL Data Warehouse, ha nagy mennyiségű adat (több mint 1 TB-os) és egy analytics munkaterhelés, amelyek előnyösek, párhuzamossági futnak.</span><span class="sxs-lookup"><span data-stu-id="8426d-189">Consider SQL Data Warehouse when you have large amounts of data (more than 1 TB) and are running an analytics workload that will benefit from parallelism.</span></span> <span data-ttu-id="8426d-190">Az SQL Data Warehouse nincs remekül beválik, ha az OLTP-munkaterhelések vagy kisebb adatkészletek (< 250GB).</span><span class="sxs-lookup"><span data-stu-id="8426d-190">SQL Data Warehouse is not a good fit for OLTP workloads or smaller data sets (< 250GB).</span></span> <span data-ttu-id="8426d-191">Az adatkészlet kevesebb mint 250GB fontolja meg az Azure SQL Database vagy az SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8426d-191">For data sets less than 250GB, consider Azure SQL Database or SQL Server.</span></span> <span data-ttu-id="8426d-192">További információkért lásd: [adatraktározással](../../data-guide/relational-data/data-warehousing.md).</span><span class="sxs-lookup"><span data-stu-id="8426d-192">For more information, see [Data warehousing](../../data-guide/relational-data/data-warehousing.md).</span></span>

<span data-ttu-id="8426d-193">Az előkészítési táblák létrehozása halommemória táblákat, amelyek indexelése.</span><span class="sxs-lookup"><span data-stu-id="8426d-193">Create the staging tables as heap tables, which are not indexed.</span></span> <span data-ttu-id="8426d-194">A lekérdezések, amely a termelési táblák létrehozása teljes táblázatbeolvasás eredményez, így nem ok arra, hogy az előkészítési táblák index.</span><span class="sxs-lookup"><span data-stu-id="8426d-194">The queries that create the production tables will result in a full table scan, so there is no reason to index the staging tables.</span></span>

<span data-ttu-id="8426d-195">A PolyBase automatikusan kihasználja párhuzamossági az adatraktár.</span><span class="sxs-lookup"><span data-stu-id="8426d-195">PolyBase automatically takes advantage of parallelism in the warehouse.</span></span> <span data-ttu-id="8426d-196">A betöltési teljesítmény arányosan, ahogy a dwu-k növeli.</span><span class="sxs-lookup"><span data-stu-id="8426d-196">The load performance scales as you increase DWUs.</span></span> <span data-ttu-id="8426d-197">A legjobb teljesítmény érdekében használjon egy egyetlen betöltési művelethez.</span><span class="sxs-lookup"><span data-stu-id="8426d-197">For best performance, use a single load operation.</span></span> <span data-ttu-id="8426d-198">Nincs a bemeneti adatok ossza adattömböket, és több egyidejű terhelések futtató teljesítmény előnye.</span><span class="sxs-lookup"><span data-stu-id="8426d-198">There is no performance benefit to breaking the input data into chunks and running multiple concurrent loads.</span></span>

<span data-ttu-id="8426d-199">A PolyBase Gzip tömörített fájlok olvashatja.</span><span class="sxs-lookup"><span data-stu-id="8426d-199">PolyBase can read Gzip compressed files.</span></span> <span data-ttu-id="8426d-200">Azonban csak egyetlen olvasó szolgál egy tömörített fájl, mert a fájl kibontása nem egyszálas működésre.</span><span class="sxs-lookup"><span data-stu-id="8426d-200">However, only a single reader is used per compressed file, because uncompressing the file is a single-threaded operation.</span></span> <span data-ttu-id="8426d-201">Ezért ne egyetlen nagy tömörített fájl betöltésekor.</span><span class="sxs-lookup"><span data-stu-id="8426d-201">Therefore, avoid loading a single large compressed file.</span></span> <span data-ttu-id="8426d-202">Ehelyett az adatok felosztása több tömörített fájl párhuzamossági kihasználása érdekében.</span><span class="sxs-lookup"><span data-stu-id="8426d-202">Instead, split the data into multiple compressed files, in order to take advantage of parallelism.</span></span> 

<span data-ttu-id="8426d-203">Vegye figyelembe a következő korlátozások vonatkoznak:</span><span class="sxs-lookup"><span data-stu-id="8426d-203">Be aware of the following limitations:</span></span>

- <span data-ttu-id="8426d-204">A PolyBase támogatja a oszlop maximális méretet `varchar(8000)`, `nvarchar(4000)`, vagy `varbinary(8000)`.</span><span class="sxs-lookup"><span data-stu-id="8426d-204">PolyBase supports a maximum column size of `varchar(8000)`, `nvarchar(4000)`, or `varbinary(8000)`.</span></span> <span data-ttu-id="8426d-205">Ha rendelkezik, amelynek hossza meghaladja a működés felső korlátjának adatokat, egy lehetőség egy feloszthatja az adatok adattömbökbe exportálni, és az adattömbök majd később az importálás után.</span><span class="sxs-lookup"><span data-stu-id="8426d-205">If you have data that exceeds these limits, one option is to break the data up into chunks when you export it, and then reassemble the chunks after import.</span></span> 

- <span data-ttu-id="8426d-206">A polybase egy rögzített méretű sor lezárójele \n vagy új sor.</span><span class="sxs-lookup"><span data-stu-id="8426d-206">PolyBase uses a fixed row terminator of \n or newline.</span></span> <span data-ttu-id="8426d-207">Ez problémát okozhat, ha a forrásadatok szerepelhet soremelés karaktereket.</span><span class="sxs-lookup"><span data-stu-id="8426d-207">This can cause problems if newline characters appear in the source data.</span></span>

- <span data-ttu-id="8426d-208">A forrás adatsémája nem támogatott az SQL Data Warehouse adattípusok is tartalmazhatnak.</span><span class="sxs-lookup"><span data-stu-id="8426d-208">Your source data schema might contain data types that are not supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="8426d-209">Ezekkel a korlátozásokkal megkerüléséhez tárolt eljárás, amely elvégzi a szükséges átalakítások is létrehozhat.</span><span class="sxs-lookup"><span data-stu-id="8426d-209">To work around these limitations, you can create a stored procedure that performs the necessary conversions.</span></span> <span data-ttu-id="8426d-210">Ez a tárolt eljárás hivatkozzon a bcp futtatásakor.</span><span class="sxs-lookup"><span data-stu-id="8426d-210">Reference this stored procedure when you run bcp.</span></span> <span data-ttu-id="8426d-211">Másik lehetőségként [Redgate adatok Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) automatikusan átalakítja az adattípust, amelyet az SQL Data Warehouse nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="8426d-211">Alternatively, [Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) automatically converts data types that aren’t supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="8426d-212">További információkért tekintse át a következő cikkeket:</span><span class="sxs-lookup"><span data-stu-id="8426d-212">For more information, see the following articles:</span></span>

- <span data-ttu-id="8426d-213">[Ajánlott eljárások az adatok betöltése az Azure SQL Data Warehouse](/azure/sql-data-warehouse/guidance-for-loading-data).</span><span class="sxs-lookup"><span data-stu-id="8426d-213">[Best practices for loading data into Azure SQL Data Warehouse](/azure/sql-data-warehouse/guidance-for-loading-data).</span></span>
- [<span data-ttu-id="8426d-214">Az SQL Data Warehouse a sémák áttelepítése</span><span class="sxs-lookup"><span data-stu-id="8426d-214">Migrate your schemas to SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-migrate-schema)
- [<span data-ttu-id="8426d-215">Útmutató az SQL Data Warehouse táblák adattípusok definiálása</span><span class="sxs-lookup"><span data-stu-id="8426d-215">Guidance for defining data types for tables in SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-tables-data-types)

### <a name="transform-the-data"></a><span data-ttu-id="8426d-216">Az adatok átalakítása</span><span class="sxs-lookup"><span data-stu-id="8426d-216">Transform the data</span></span>

<span data-ttu-id="8426d-217">Átalakíthatja az adatokat, és helyezze át a termelési táblákat.</span><span class="sxs-lookup"><span data-stu-id="8426d-217">Transform the data and move it into production tables.</span></span> <span data-ttu-id="8426d-218">Ebben a lépésben az adatokat a dimenziótáblák és ténytáblák, megfelelő-e szemantikai modellezési csillagséma alakul.</span><span class="sxs-lookup"><span data-stu-id="8426d-218">In this step, the data is transformed into a star schema with dimension tables and fact tables, suitable for semantic modeling.</span></span>

<span data-ttu-id="8426d-219">Hozzon létre fürtözött oszlopcentrikus indexek – amelyek nyújtja a legjobb átfogó lekérdezési teljesítményt a termelési táblákat.</span><span class="sxs-lookup"><span data-stu-id="8426d-219">Create the production tables with clustered columnstore indexes, which offer the best overall query performance.</span></span> <span data-ttu-id="8426d-220">Oszlopcentrikus indexek sok rekord vizsgálhatják lekérdezések vannak optimalizálva.</span><span class="sxs-lookup"><span data-stu-id="8426d-220">Columnstore indexes are optimized for queries that scan many records.</span></span> <span data-ttu-id="8426d-221">Oszlopcentrikus indexek nem végezze el a is egypéldányos keresések (amely keresése van, egy sorban).</span><span class="sxs-lookup"><span data-stu-id="8426d-221">Columnstore indexes don't perform as well for singleton lookups (that is, looking up a single row).</span></span> <span data-ttu-id="8426d-222">Ha gyakori egypéldányos végrehajtott keresési műveletek elvégzéséhez szüksége, adhat hozzá egy nem fürtözött index táblázat.</span><span class="sxs-lookup"><span data-stu-id="8426d-222">If you need to perform frequent singleton lookups, you can add a non-clustered index to a table.</span></span> <span data-ttu-id="8426d-223">Egypéldányos keresések futtatható jelentősen gyorsabb egy nem fürtözött index.</span><span class="sxs-lookup"><span data-stu-id="8426d-223">Singleton lookups can run significantly faster using a non-clustered index.</span></span> <span data-ttu-id="8426d-224">Azonban az Egypéldányos végzett keresések nem általában ritkább data warehouse forgatókönyvekben mint az OLTP-munkaterhelések.</span><span class="sxs-lookup"><span data-stu-id="8426d-224">However, singleton lookups are typically less common in data warehouse scenarios than OLTP workloads.</span></span> <span data-ttu-id="8426d-225">További információkért lásd: [táblák az SQL Data Warehouse indexelő](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span><span class="sxs-lookup"><span data-stu-id="8426d-225">For more information, see [Indexing tables in SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span></span>

> [!NOTE]
> <span data-ttu-id="8426d-226">Nem támogatja a fürtözött oszloptárindexű táblákat `varchar(max)`, `nvarchar(max)`, vagy `varbinary(max)` adattípusokat.</span><span class="sxs-lookup"><span data-stu-id="8426d-226">Clustered columnstore tables do not support `varchar(max)`, `nvarchar(max)`, or `varbinary(max)` data types.</span></span> <span data-ttu-id="8426d-227">Ebben az esetben érdemes lehet halmot vagy fürtözött index.</span><span class="sxs-lookup"><span data-stu-id="8426d-227">In that case, consider a heap or clustered index.</span></span> <span data-ttu-id="8426d-228">Előfordulhat, hogy ezek az oszlopok bocsátott különálló táblában.</span><span class="sxs-lookup"><span data-stu-id="8426d-228">You might put those columns into a separate table.</span></span>

<span data-ttu-id="8426d-229">Mivel a mintaadatbázis nem nagyon nagy, nem partíciókkal rendelkező létrehozott replikált táblák.</span><span class="sxs-lookup"><span data-stu-id="8426d-229">Because the sample database is not very large, we created replicated tables with no partitions.</span></span> <span data-ttu-id="8426d-230">A termelési számítási feladatokhoz elosztott táblák használata valószínűleg javítható a teljesítmény-küszöbérték.</span><span class="sxs-lookup"><span data-stu-id="8426d-230">For production workloads, using distributed tables is likely to improve query performance.</span></span> <span data-ttu-id="8426d-231">Lásd: [útmutató az Azure SQL Data Warehouse elosztott táblák tervezése](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span><span class="sxs-lookup"><span data-stu-id="8426d-231">See [Guidance for designing distributed tables in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span></span> <span data-ttu-id="8426d-232">A példa parancsfájlok a lekérdezések futtatása használatával statikus [erőforrásosztály](/azure/sql-data-warehouse/resource-classes-for-workload-management).</span><span class="sxs-lookup"><span data-stu-id="8426d-232">Our example scripts run the queries using a static [resource class](/azure/sql-data-warehouse/resource-classes-for-workload-management).</span></span>

### <a name="load-the-semantic-model"></a><span data-ttu-id="8426d-233">A szemantikai modell betöltése</span><span class="sxs-lookup"><span data-stu-id="8426d-233">Load the semantic model</span></span>

<span data-ttu-id="8426d-234">Adatok betöltése az Azure Analysis Services táblázatos modell.</span><span class="sxs-lookup"><span data-stu-id="8426d-234">Load the data into a tabular model in Azure Analysis Services.</span></span> <span data-ttu-id="8426d-235">Ebben a lépésben hoz létre egy szemantikai adatmodell SQL Server Data Tools (SSDT).</span><span class="sxs-lookup"><span data-stu-id="8426d-235">In this step, you create a semantic data model by using SQL Server Data Tools (SSDT).</span></span> <span data-ttu-id="8426d-236">A modell a Power BI Desktop-fájlból való importálásával is létrehozhat.</span><span class="sxs-lookup"><span data-stu-id="8426d-236">You can also create a model by importing it from a Power BI Desktop file.</span></span> <span data-ttu-id="8426d-237">Az SQL Data Warehouse nem támogatja a külső kulcsokat, hozzá kell adnia a kapcsolat a szemantikai modell, hogy a táblák között kapcsolhatja össze.</span><span class="sxs-lookup"><span data-stu-id="8426d-237">Because SQL Data Warehouse does not support foreign keys, you must add the relationships to the semantic model, so that you can join across tables.</span></span>

### <a name="use-power-bi-to-visualize-the-data"></a><span data-ttu-id="8426d-238">Az adatok megjelenítése a Power BI használatával</span><span class="sxs-lookup"><span data-stu-id="8426d-238">Use Power BI to visualize the data</span></span>

<span data-ttu-id="8426d-239">A Power BI Azure Analysis Services történő kapcsolódáshoz támogatja a két lehetőség közül választhat:</span><span class="sxs-lookup"><span data-stu-id="8426d-239">Power BI supports two options for connecting to Azure Analysis Services:</span></span>

- <span data-ttu-id="8426d-240">Importálja.</span><span class="sxs-lookup"><span data-stu-id="8426d-240">Import.</span></span> <span data-ttu-id="8426d-241">Az adatok importálása a Power BI-modellbe.</span><span class="sxs-lookup"><span data-stu-id="8426d-241">The data is imported into the Power BI model.</span></span>
- <span data-ttu-id="8426d-242">Élő kapcsolatot.</span><span class="sxs-lookup"><span data-stu-id="8426d-242">Live Connection.</span></span> <span data-ttu-id="8426d-243">Az adatok közvetlenül Analysis Services lekért.</span><span class="sxs-lookup"><span data-stu-id="8426d-243">Data is pulled directly from Analysis Services.</span></span>

<span data-ttu-id="8426d-244">Élő kapcsolatot azt javasoljuk, mert nincs szükség az adatok másolásának a Power BI-modellbe.</span><span class="sxs-lookup"><span data-stu-id="8426d-244">We recommend Live Connection because it doesn't require copying data into the Power BI model.</span></span> <span data-ttu-id="8426d-245">Is a DirectQuery biztosítja, hogy az eredmények mindig a legújabb forrásadatok összhangban.</span><span class="sxs-lookup"><span data-stu-id="8426d-245">Also, using DirectQuery ensures that results are always consistent with the latest source data.</span></span> <span data-ttu-id="8426d-246">További információkért lásd: [csatlakozás a Power BI](/azure/analysis-services/analysis-services-connect-pbi).</span><span class="sxs-lookup"><span data-stu-id="8426d-246">For more information, see [Connect with Power BI](/azure/analysis-services/analysis-services-connect-pbi).</span></span>

<span data-ttu-id="8426d-247">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="8426d-247">**Recommendations**</span></span>

<span data-ttu-id="8426d-248">Küszöbölhető BI irányítópult lekérdezések közvetlenül az adatraktáron.</span><span class="sxs-lookup"><span data-stu-id="8426d-248">Avoid running BI dashboard queries directly against the data warehouse.</span></span> <span data-ttu-id="8426d-249">Üzleti INTELLIGENCIA irányítópultok szükséges nagyon alacsony válaszidejét, amely közvetlen, előfordulhat, hogy a lekérdezések írásában, az adatraktár nem elégíti ki.</span><span class="sxs-lookup"><span data-stu-id="8426d-249">BI dashboards require very low response times, which direct queries against the warehouse may be unable to satisfy.</span></span> <span data-ttu-id="8426d-250">Is az irányítópult frissítésekor fog, csökkenti az egyidejű lekérdezések, amelyek jelentős hatással lehet a teljesítmény.</span><span class="sxs-lookup"><span data-stu-id="8426d-250">Also, refreshing the dashboard will count against the number of concurrent queries, which could impact performance.</span></span> 

<span data-ttu-id="8426d-251">Az Azure Analysis Services egy BI-irányítópult lekérdezés követelményeinek kezelésére, ezért az ajánlott eljárás lekérdezés Analysis Services a Power BI-ból terveztek.</span><span class="sxs-lookup"><span data-stu-id="8426d-251">Azure Analysis Services is designed to handle the query requirements of a BI dashboard, so the recommended practice is to query Analysis Services from Power BI.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="8426d-252">Méretezhetőségi kérdései</span><span class="sxs-lookup"><span data-stu-id="8426d-252">Scalability Considerations</span></span>

### <a name="sql-data-warehouse"></a><span data-ttu-id="8426d-253">SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="8426d-253">SQL Data Warehouse</span></span>

<span data-ttu-id="8426d-254">Az SQL Data Warehouse ki lehet terjeszteni a számítási erőforrásokat szükség esetén kérheti.</span><span class="sxs-lookup"><span data-stu-id="8426d-254">With SQL Data Warehouse, you can scale out your compute resources on demand.</span></span> <span data-ttu-id="8426d-255">A lekérdezési motor optimalizálja a lekérdezések alapján a számítási csomópontok száma párhuzamos feldolgozásra, és mozgatja az adatokat szükség szerint a csomópontok között.</span><span class="sxs-lookup"><span data-stu-id="8426d-255">The query engine optimizes queries for parallel processing based on the number of compute nodes, and moves data between nodes as necessary.</span></span> <span data-ttu-id="8426d-256">További információkért lásd: [kezelése számítási az Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span><span class="sxs-lookup"><span data-stu-id="8426d-256">For more information, see [Manage compute in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span></span>

### <a name="analysis-services"></a><span data-ttu-id="8426d-257">Analysis Services</span><span class="sxs-lookup"><span data-stu-id="8426d-257">Analysis Services</span></span>

<span data-ttu-id="8426d-258">A termelési számítási feladatokhoz ajánlott Standard csomagra Azure Analysis Services, mert támogatja a particionálás és a DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="8426d-258">For production workloads, we recommend the Standard Tier for Azure Analysis Services, because it supports partitioning and DirectQuery.</span></span> <span data-ttu-id="8426d-259">A réteg belül példány határozza meg a memória és a feldolgozási kapacitást.</span><span class="sxs-lookup"><span data-stu-id="8426d-259">Within a tier, the instance size determines the memory and processing power.</span></span> <span data-ttu-id="8426d-260">Feldolgozási kapacitása révén a lekérdezés feldolgozása egységek (QPUs) mérik.</span><span class="sxs-lookup"><span data-stu-id="8426d-260">Processing power is measured in Query Processing Units (QPUs).</span></span> <span data-ttu-id="8426d-261">A QPU megfigyeléséhez válassza ki a megfelelő méretű.</span><span class="sxs-lookup"><span data-stu-id="8426d-261">Monitor your QPU usage to select the appropriate size.</span></span> <span data-ttu-id="8426d-262">További információkért lásd: [server metrikát](/azure/analysis-services/analysis-services-monitor).</span><span class="sxs-lookup"><span data-stu-id="8426d-262">For more information, see [Monitor server metrics](/azure/analysis-services/analysis-services-monitor).</span></span>

<span data-ttu-id="8426d-263">Nagy terhelés teljesítmény-küszöbérték is válnak romlik a lekérdezés párhuzamosság miatt.</span><span class="sxs-lookup"><span data-stu-id="8426d-263">Under high load, query performance can become degraded due to query concurrency.</span></span> <span data-ttu-id="8426d-264">Ki lehet terjeszteni Analysis Services a lekérdezések feldolgozásához replikák készletét létrehozásával, így további lekérdezések egyidejűleg végrehajtható.</span><span class="sxs-lookup"><span data-stu-id="8426d-264">You can scale out Analysis Services by creating a pool of replicas to process queries, so that more queries can be performed concurrently.</span></span> <span data-ttu-id="8426d-265">Az adatmodell mindig feldolgozási munka az elsődleges kiszolgálón történik.</span><span class="sxs-lookup"><span data-stu-id="8426d-265">The work of processing the data model always happens on the primary server.</span></span> <span data-ttu-id="8426d-266">Alapértelmezés szerint az elsődleges kiszolgáló lekérdezéseket is kezeli.</span><span class="sxs-lookup"><span data-stu-id="8426d-266">By default, the primary server also handles queries.</span></span> <span data-ttu-id="8426d-267">Szükség esetén is kijelölhet feldolgozás kizárólag, az elsődleges kiszolgálót, hogy a lekérdezés készlet az összes lekérdezés kezeli.</span><span class="sxs-lookup"><span data-stu-id="8426d-267">Optionally, you can designate the primary server to run processing exclusively, so that the query pool handles all queries.</span></span> <span data-ttu-id="8426d-268">Ha nagy feldolgozási követelményeket, a lekérdezés készletből feldolgozási kell egymástól.</span><span class="sxs-lookup"><span data-stu-id="8426d-268">If you have high processing requirements, you should separate the processing from the query pool.</span></span> <span data-ttu-id="8426d-269">Ha magas lekérdezésekkel, és viszonylag könnyű feldolgozása, az elsődleges kiszolgálón is felvehet a lekérdezés-készlet.</span><span class="sxs-lookup"><span data-stu-id="8426d-269">If you have high query loads, and relatively light processing, you can include the primary server in the query pool.</span></span> <span data-ttu-id="8426d-270">További információkért lásd: [Azure Analysis Services kibővített](/azure/analysis-services/analysis-services-scale-out).</span><span class="sxs-lookup"><span data-stu-id="8426d-270">For more information, see [Azure Analysis Services scale-out](/azure/analysis-services/analysis-services-scale-out).</span></span> 

<span data-ttu-id="8426d-271">Rövidítse le a felesleges feldolgozási, fontolja meg a partíciók használatával a táblázatos modell olyan részekre való felosztásához logikai.</span><span class="sxs-lookup"><span data-stu-id="8426d-271">To reduce the amount of unnecessary processing, consider using partitions to divide the tabular model into logical parts.</span></span> <span data-ttu-id="8426d-272">Mindegyik partíció külön-külön lehet feldolgozni.</span><span class="sxs-lookup"><span data-stu-id="8426d-272">Each partition can be processed separately.</span></span> <span data-ttu-id="8426d-273">További információkért lásd: [partíciók](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="8426d-273">For more information, see [Partitions](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="8426d-274">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="8426d-274">Security Considerations</span></span>

### <a name="ip-whitelisting-of-analysis-services-clients"></a><span data-ttu-id="8426d-275">Az Analysis Services ügyfelek IP-engedélyezése</span><span class="sxs-lookup"><span data-stu-id="8426d-275">IP whitelisting of Analysis Services clients</span></span>

<span data-ttu-id="8426d-276">Fontolja meg az Analysis Services-tűzfal szolgáltatás engedélyezett ügyfél IP-címek használatát.</span><span class="sxs-lookup"><span data-stu-id="8426d-276">Consider using the Analysis Services firewall feature to whitelist client IP addresses.</span></span> <span data-ttu-id="8426d-277">Ha engedélyezve van, a tűzfal blokkolja az tűzfalszabályok minden ügyfél-kommunikációhoz.</span><span class="sxs-lookup"><span data-stu-id="8426d-277">If enabled, the firewall blocks all client connections other than those specified in the firewall rules.</span></span> <span data-ttu-id="8426d-278">Az alapértelmezett szabályok engedélyezési listája a Power BI-ban, de a szükség esetén letilthatja a Ez a szabály.</span><span class="sxs-lookup"><span data-stu-id="8426d-278">The default rules whitelist the Power BI service, but you can disable this rule if desired.</span></span> <span data-ttu-id="8426d-279">További információkért lásd: [Azure Analysis Services korlátozására a tűzfal az új képesség](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/).</span><span class="sxs-lookup"><span data-stu-id="8426d-279">For more information, see [Hardening Azure Analysis Services with the new firewall capability](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/).</span></span>

### <a name="authorization"></a><span data-ttu-id="8426d-280">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="8426d-280">Authorization</span></span>

<span data-ttu-id="8426d-281">Az Azure Analysis Services egy Analysis Services-kiszolgálóhoz csatlakozó felhasználók hitelesítéséhez az Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="8426d-281">Azure Analysis Services uses Azure Active Directory (Azure AD) to authenticate users who connect to an Analysis Services server.</span></span> <span data-ttu-id="8426d-282">Korlátozhatja, hogy milyen adatokat egy adott felhasználó megtekintheti, szerepkörök létrehozásával, és majd ezen szerepkörök hozzárendelése az Azure AD-felhasználókat vagy csoportokat.</span><span class="sxs-lookup"><span data-stu-id="8426d-282">You can restrict what data a particular user is able to view, by creating roles and then assigning Azure AD users or groups to those roles.</span></span> <span data-ttu-id="8426d-283">Az egyes szerepkörökhöz a következő műveletek végezhetők el:</span><span class="sxs-lookup"><span data-stu-id="8426d-283">For each role, you can:</span></span> 

- <span data-ttu-id="8426d-284">Táblák, illetve az egyes oszlopok védheti.</span><span class="sxs-lookup"><span data-stu-id="8426d-284">Protect tables or individual columns.</span></span> 
- <span data-ttu-id="8426d-285">Az egyes sorok szűrőkifejezéseket alapján védelme.</span><span class="sxs-lookup"><span data-stu-id="8426d-285">Protect individual rows based on filter expressions.</span></span> 

<span data-ttu-id="8426d-286">További információkért lásd: [adatbázis-szerepkörök és a felhasználók kezelése](/azure/analysis-services/analysis-services-database-users).</span><span class="sxs-lookup"><span data-stu-id="8426d-286">For more information, see [Manage database roles and users](/azure/analysis-services/analysis-services-database-users).</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="8426d-287">A megoldás üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="8426d-287">Deploy the solution</span></span>

<span data-ttu-id="8426d-288">Ennek a referenciaarchitektúrának egy üzemelő példánya elérhető a [GitHubon][ref-arch-repo-folder].</span><span class="sxs-lookup"><span data-stu-id="8426d-288">A deployment for this reference architecture is available on [GitHub][ref-arch-repo-folder].</span></span> <span data-ttu-id="8426d-289">A következőket helyezi üzembe:</span><span class="sxs-lookup"><span data-stu-id="8426d-289">It deploys the following:</span></span>

  * <span data-ttu-id="8426d-290">Windows virtuális gép egy helyi adatbázis-kiszolgáló szimulálásához.</span><span class="sxs-lookup"><span data-stu-id="8426d-290">A Windows VM to simulate an on-premises database server.</span></span> <span data-ttu-id="8426d-291">SQL Server 2017 és a kapcsolódó eszközök, valamint Power BI Desktop tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="8426d-291">It includes SQL Server 2017 and related tools, along with Power BI Desktop.</span></span>
  * <span data-ttu-id="8426d-292">Egy Azure storage-fiók, amely Blob-tároló az SQL Server adatbázisból exportált adatok tárolásához.</span><span class="sxs-lookup"><span data-stu-id="8426d-292">An Azure storage account that provides Blob storage to hold data exported from the SQL Server database.</span></span>
  * <span data-ttu-id="8426d-293">Egy Azure SQL Data Warehouse-példányhoz.</span><span class="sxs-lookup"><span data-stu-id="8426d-293">An Azure SQL Data Warehouse instance.</span></span>
  * <span data-ttu-id="8426d-294">Egy Azure Analysis Services-példányon.</span><span class="sxs-lookup"><span data-stu-id="8426d-294">An Azure Analysis Services instance.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="8426d-295">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="8426d-295">Prerequisites</span></span>

1. <span data-ttu-id="8426d-296">Klónozza, ágaztassa vagy a zip-fájl letöltése a [Azure referencia architektúra] [ ref-arch-repo] GitHub-tárházban.</span><span class="sxs-lookup"><span data-stu-id="8426d-296">Clone, fork, or download the zip file for the [Azure reference architectures][ref-arch-repo] GitHub repository.</span></span>

2. <span data-ttu-id="8426d-297">Telepítse a [Azure építőelemeket] [ azbb-wiki] (azbb).</span><span class="sxs-lookup"><span data-stu-id="8426d-297">Install the [Azure Building Blocks][azbb-wiki] (azbb).</span></span>

3. <span data-ttu-id="8426d-298">A parancssorból bash, vagy PowerShell kérdés, jelentkezzen be az Azure-fiókjával az alábbi parancs használatával, és az utasításokat követve.</span><span class="sxs-lookup"><span data-stu-id="8426d-298">From a command prompt, bash prompt, or PowerShell prompt, login to your Azure account by using the command below and following the instructions.</span></span>

  ```bash
  az login  
  ```

### <a name="deploy-the-simulated-on-premises-server"></a><span data-ttu-id="8426d-299">A szimulált helyszíni kiszolgáló központi telepítése</span><span class="sxs-lookup"><span data-stu-id="8426d-299">Deploy the simulated on-premises server</span></span>

<span data-ttu-id="8426d-300">Először teheti elérhetővé a virtuális gépek szimulált a helyszíni kiszolgálónak, ide tartozik az SQL Server 2017 és a kapcsolódó eszközök.</span><span class="sxs-lookup"><span data-stu-id="8426d-300">First you'll deploy a VM as a simulated on-premises server, which includes SQL Server 2017 and related tools.</span></span> <span data-ttu-id="8426d-301">Ez a lépés is betölti a minta [Wide World Importers OLTP adatbázis](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) az SQL-kiszolgálóra.</span><span class="sxs-lookup"><span data-stu-id="8426d-301">This step also loads the sample [Wide World Importers OLTP database](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) into SQL Server.</span></span>

1. <span data-ttu-id="8426d-302">Keresse meg a `data\enterprise-bi-sqldw\onprem\templates` a fenti előfeltételek letöltött tárház mappát.</span><span class="sxs-lookup"><span data-stu-id="8426d-302">Navigate to the `data\enterprise-bi-sqldw\onprem\templates` folder of the repository you downloaded in the prerequisites above.</span></span>

2. <span data-ttu-id="8426d-303">Az a `onprem.parameters.json` fájlt, cserélje le a értékeinek `adminUsername` és `adminPassword`.</span><span class="sxs-lookup"><span data-stu-id="8426d-303">In the `onprem.parameters.json` file, replace the values for `adminUsername` and `adminPassword`.</span></span> <span data-ttu-id="8426d-304">Szereplő értékeket is módosíthatja a `SqlUserCredentials` szakasz felel meg a felhasználónevet és jelszót.</span><span class="sxs-lookup"><span data-stu-id="8426d-304">Also change the values in the `SqlUserCredentials` section to match the user name and password.</span></span> <span data-ttu-id="8426d-305">Megjegyzés: a `.\\` a userName tulajdonság-előtagot.</span><span class="sxs-lookup"><span data-stu-id="8426d-305">Note the `.\\` prefix in the userName property.</span></span>
    
    ```bash
    "SqlUserCredentials": {
      "userName": ".\\username",
      "password": "password"
    }
    ```

3. <span data-ttu-id="8426d-306">Futtatás `azbb` a helyszíni kiszolgáló telepítésének alább látható módon.</span><span class="sxs-lookup"><span data-stu-id="8426d-306">Run `azbb` as shown below to deploy the on-premises server.</span></span>

    ```bash
    azbb -s <subscription_id> -g <resource_group_name> -l <location> -p onprem.parameters.json --deploy
    ```

4. <span data-ttu-id="8426d-307">A központi telepítés eltarthat 20-30 percet, mely tartalmazza, hogy fut a [DSC](/powershell/dsc/overview) parancsprogramot, az eszközök telepítése, majd állítsa vissza az adatbázist.</span><span class="sxs-lookup"><span data-stu-id="8426d-307">The deployment may take 20 to 30 minutes to complete, which includes running the [DSC](/powershell/dsc/overview) script to install the tools and restore the database.</span></span> <span data-ttu-id="8426d-308">A központi telepítést, az Azure portálon ellenőrizze az erőforrások az erőforráscsoportban megtekintésével.</span><span class="sxs-lookup"><span data-stu-id="8426d-308">Verify the deployment in the Azure portal by reviewing the resources in the resource group.</span></span> <span data-ttu-id="8426d-309">Megjelenik a `sql-vm1` virtuális gép és a kapcsolódó erőforrások.</span><span class="sxs-lookup"><span data-stu-id="8426d-309">You should see the `sql-vm1` virtual machine and its associated resources.</span></span>

### <a name="deploy-the-azure-resources"></a><span data-ttu-id="8426d-310">Az Azure-erőforrások telepítése</span><span class="sxs-lookup"><span data-stu-id="8426d-310">Deploy the Azure resources</span></span>

<span data-ttu-id="8426d-311">Ebben a lépésben kiépítését Azure SQL Data warehouse-bA és az Azure Analysis Services, és a Storage-fiók.</span><span class="sxs-lookup"><span data-stu-id="8426d-311">This step provisions Azure SQL Data Warehouse and Azure Analysis Services, along with a Storage account.</span></span> <span data-ttu-id="8426d-312">Ha azt szeretné, ebben a lépésben az előző lépés párhuzamosan is futtathatja.</span><span class="sxs-lookup"><span data-stu-id="8426d-312">If you want, you can run this step in parallel with the previous step.</span></span>

1. <span data-ttu-id="8426d-313">Keresse meg a `data\enterprise-bi-sqldw\azure\templates` a fenti előfeltételek letöltött tárház mappát.</span><span class="sxs-lookup"><span data-stu-id="8426d-313">Navigate to the `data\enterprise-bi-sqldw\azure\templates` folder of the repository you downloaded in the prerequisites above.</span></span>

2. <span data-ttu-id="8426d-314">A következő parancsot az Azure parancssori felület futtatásával hozzon létre egy erőforráscsoportot, cseréje a zárójeles paraméterek vannak megadva.</span><span class="sxs-lookup"><span data-stu-id="8426d-314">Run the following Azure CLI command to create a resource group, replacing the bracketed parameters specified.</span></span> <span data-ttu-id="8426d-315">Vegye figyelembe, hogy telepítene egy másik erőforráscsoportban található, mint a helyszíni kiszolgáló, az előző lépésben használt.</span><span class="sxs-lookup"><span data-stu-id="8426d-315">Note that you can deploy to a different resource group than you used for the on-premises server in the previous step.</span></span> 

    ```bash
    az group create --name <resource_group_name> --location <location>  
    ```

3. <span data-ttu-id="8426d-316">A következő parancsot az Azure parancssori felület telepítése az Azure-erőforrások, a mag cseréje a zárójeles paraméterek vannak megadva.</span><span class="sxs-lookup"><span data-stu-id="8426d-316">Run the following Azure CLI command to deploy the Azure resources, replacing the bracketed parameters specified.</span></span> <span data-ttu-id="8426d-317">A `storageAccountName` paraméter kell követnie a [elnevezési szabályait](../../best-practices/naming-conventions.md#naming-rules-and-restrictions) Storage-fiókok.</span><span class="sxs-lookup"><span data-stu-id="8426d-317">The `storageAccountName` parameter must follow the [naming rules](../../best-practices/naming-conventions.md#naming-rules-and-restrictions) for Storage accounts.</span></span> <span data-ttu-id="8426d-318">Az a `analysisServerAdmin` paraméter, használja az Azure Active Directory egyszerű felhasználónév (UPN).</span><span class="sxs-lookup"><span data-stu-id="8426d-318">For the `analysisServerAdmin` parameter, use your Azure Active Directory user principal name (UPN).</span></span>

    ```bash
    az group deployment create --resource-group <resource_group_name> --template-file azure-resources-deploy.json --parameters "dwServerName"="<server_name>" "dwAdminLogin"="<admin_username>" "dwAdminPassword"="<password>" "storageAccountName"="<storage_account_name>" "analysisServerName"="<analysis_server_name>" "analysisServerAdmin"="user@contoso.com"
    ```

4. <span data-ttu-id="8426d-319">A központi telepítést, az Azure portálon ellenőrizze az erőforrások az erőforráscsoportban megtekintésével.</span><span class="sxs-lookup"><span data-stu-id="8426d-319">Verify the deployment in the Azure portal by reviewing the resources in the resource group.</span></span> <span data-ttu-id="8426d-320">Meg kell jelennie egy tárfiókot, Azure SQL Data Warehouse-példányokhoz és Analysis Services-példányon.</span><span class="sxs-lookup"><span data-stu-id="8426d-320">You should see a storage account, Azure SQL Data Warehouse instance, and Analysis Services instance.</span></span>

5. <span data-ttu-id="8426d-321">Az Azure portál segítségével a tárfiók elérési kulcsának lekérése.</span><span class="sxs-lookup"><span data-stu-id="8426d-321">Use the Azure portal to get the access key for the storage account.</span></span> <span data-ttu-id="8426d-322">A megnyitáshoz válassza ki a tárfiókot.</span><span class="sxs-lookup"><span data-stu-id="8426d-322">Select the storage account to open it.</span></span> <span data-ttu-id="8426d-323">A **Beállítások** területen válassza a **Hozzáférési kulcsok** elemet.</span><span class="sxs-lookup"><span data-stu-id="8426d-323">Under **Settings**, select **Access keys**.</span></span> <span data-ttu-id="8426d-324">Másolja az elsődleges kulcs értéke.</span><span class="sxs-lookup"><span data-stu-id="8426d-324">Copy the primary key value.</span></span> <span data-ttu-id="8426d-325">A következő lépésben még szüksége lesz rájuk.</span><span class="sxs-lookup"><span data-stu-id="8426d-325">You will use it in the next step.</span></span>

### <a name="export-the-source-data-to-azure-blob-storage"></a><span data-ttu-id="8426d-326">Az adatok exportálása az Azure Blob storage</span><span class="sxs-lookup"><span data-stu-id="8426d-326">Export the source data to Azure Blob storage</span></span> 

<span data-ttu-id="8426d-327">Ebben a lépésben futtatja egy PowerShell-parancsfájlt, amely a bcp segítségével exportál az SQL-adatbázis egybesimított fájlokba, a virtuális Gépre, és az AzCopy segítségével ezeket a fájlokat az Azure Blob Storage másolhatja.</span><span class="sxs-lookup"><span data-stu-id="8426d-327">In this step, you will run a PowerShell script that uses bcp to export the SQL database to flat files on the VM, and then uses AzCopy to copy those files into Azure Blob Storage.</span></span>

1. <span data-ttu-id="8426d-328">A távoli asztal segítségével csatlakoztassa a szimulált helyszíni virtuális Gépet.</span><span class="sxs-lookup"><span data-stu-id="8426d-328">Use Remote Desktop to connect to the simulated on-premises VM.</span></span>

2. <span data-ttu-id="8426d-329">Jelentkezzen be a virtuális gép, a következő parancsokat a PowerShell-ablakban.</span><span class="sxs-lookup"><span data-stu-id="8426d-329">While logged into the VM, run the following commands from a PowerShell window.</span></span>  

    ```powershell
    cd 'C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\onprem'

    .\Load_SourceData_To_Blob.ps1 -File .\sql_scripts\db_objects.txt -Destination 'https://<storage_account_name>.blob.core.windows.net/wwi' -StorageAccountKey '<storage_account_key>'
    ```

    <span data-ttu-id="8426d-330">Az a `Destination` paraméter, cserélje le `<storage_account_name>` nevű a korábban létrehozott tárfiókot.</span><span class="sxs-lookup"><span data-stu-id="8426d-330">For the `Destination` parameter, replace `<storage_account_name>` with the name the Storage account that you created previously.</span></span> <span data-ttu-id="8426d-331">Az a `StorageAccountKey` paraméter, a hozzáférési kulcsot a tárfiók használja.</span><span class="sxs-lookup"><span data-stu-id="8426d-331">For the `StorageAccountKey` parameter, use the access key for that Storage account.</span></span>

3. <span data-ttu-id="8426d-332">Az Azure portálon győződjön meg arról, hogy az adatok másolja a Blob storage lépjen a tárfiókhoz, a Blob szolgáltatás kiválasztásával, és az megnyitása a `wwi` tároló.</span><span class="sxs-lookup"><span data-stu-id="8426d-332">In the Azure portal, verify that the source data was copied to Blob storage by navigating to the storage account, selecting the Blob service, and opening the `wwi` container.</span></span> <span data-ttu-id="8426d-333">Végrehajtásával kerüli meg a táblák listáját kell megjelennie `WorldWideImporters_Application_*`.</span><span class="sxs-lookup"><span data-stu-id="8426d-333">You should see a list of tables prefaced with `WorldWideImporters_Application_*`.</span></span>

### <a name="execute-the-data-warehouse-scripts"></a><span data-ttu-id="8426d-334">A data warehouse parancsfájlok végrehajtása</span><span class="sxs-lookup"><span data-stu-id="8426d-334">Execute the data warehouse scripts</span></span>

1. <span data-ttu-id="8426d-335">A távoli asztali munkamenetből indítsa el az SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="8426d-335">From your Remote Desktop session, launch SQL Server Management Studio (SSMS).</span></span> 

2. <span data-ttu-id="8426d-336">Connect to SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="8426d-336">Connect to SQL Data Warehouse</span></span>

    - <span data-ttu-id="8426d-337">Kiszolgáló típusa: adatbázis-kezelő</span><span class="sxs-lookup"><span data-stu-id="8426d-337">Server type: Database Engine</span></span>
    
    - <span data-ttu-id="8426d-338">Kiszolgáló neve: `<dwServerName>.database.windows.net`, ahol `<dwServerName>` amikor központilag telepítette az Azure-erőforrások megadott név.</span><span class="sxs-lookup"><span data-stu-id="8426d-338">Server name: `<dwServerName>.database.windows.net`, where `<dwServerName>` is the name that you specified when you deployed the Azure resources.</span></span> <span data-ttu-id="8426d-339">Ez a név lekérheti az Azure-portálon.</span><span class="sxs-lookup"><span data-stu-id="8426d-339">You can get this name from the Azure portal.</span></span>
    
    - <span data-ttu-id="8426d-340">Hitelesítési: SQL Server-hitelesítést.</span><span class="sxs-lookup"><span data-stu-id="8426d-340">Authentication: SQL Server Authentication.</span></span> <span data-ttu-id="8426d-341">Amikor központilag telepítette az Azure-erőforrások, a megadott hitelesítő adatokat használja a `dwAdminLogin` és `dwAdminPassword` paraméterek.</span><span class="sxs-lookup"><span data-stu-id="8426d-341">Use the credentials that you specified when you deployed the Azure resources, in the `dwAdminLogin` and `dwAdminPassword` parameters.</span></span>

2. <span data-ttu-id="8426d-342">Keresse meg a `C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\azure\sqldw_scripts` mappa a virtuális Gépen.</span><span class="sxs-lookup"><span data-stu-id="8426d-342">Navigate to the `C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\azure\sqldw_scripts` folder on the VM.</span></span> <span data-ttu-id="8426d-343">Ebben a mappában számsorrendben, végrehajtja a a parancsfájlok `STEP_1` keresztül `STEP_7`.</span><span class="sxs-lookup"><span data-stu-id="8426d-343">You will execute the scripts in this folder in numerical order, `STEP_1` through `STEP_7`.</span></span>

3. <span data-ttu-id="8426d-344">Válassza ki a `master` adatbázisban az SSMS és nyissa meg a `STEP_1` parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="8426d-344">Select the `master` database in SSMS and open the `STEP_1` script.</span></span> <span data-ttu-id="8426d-345">Módosítsa az értéket a következő sort a jelszót, majd futtassa a parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="8426d-345">Change the value of the password in the following line, then execute the script.</span></span>

    ```sql
    CREATE LOGIN LoaderRC20 WITH PASSWORD = '<change this value>';
    ```

4. <span data-ttu-id="8426d-346">Válassza ki a `wwi` adatbázisban az SSMS.</span><span class="sxs-lookup"><span data-stu-id="8426d-346">Select the `wwi` database in SSMS.</span></span> <span data-ttu-id="8426d-347">Nyissa meg a `STEP_2` parancsfájlt, és futtassa a parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="8426d-347">Open the `STEP_2` script and execute the script.</span></span> <span data-ttu-id="8426d-348">Ha hibaüzenetet kap, győződjön meg arról, szemben a parancsfájlt futtatja a `wwi` adatbázis, és nem `master`.</span><span class="sxs-lookup"><span data-stu-id="8426d-348">If you get an error, make sure you are running the script against the `wwi` database and not `master`.</span></span>

5. <span data-ttu-id="8426d-349">Az SQL Data Warehouse egy új kapcsolat megnyitásához használja a `LoaderRC20` felhasználói és a jelszót a `STEP_1` parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="8426d-349">Open a new connection to SQL Data Warehouse, using the `LoaderRC20` user and the password indicated in the `STEP_1` script.</span></span>

6. <span data-ttu-id="8426d-350">Ezt a kapcsolatot, nyissa meg a `STEP_3` parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="8426d-350">Using this connection, open the `STEP_3` script.</span></span> <span data-ttu-id="8426d-351">A parancsfájlban állítsa be a következő értékeket:</span><span class="sxs-lookup"><span data-stu-id="8426d-351">Set the following values in the script:</span></span>

    - <span data-ttu-id="8426d-352">Titkos kulcs: A hozzáférési kulcsot a tárfiók használja.</span><span class="sxs-lookup"><span data-stu-id="8426d-352">SECRET: Use the access key for your storage account.</span></span>
    - <span data-ttu-id="8426d-353">HELYE: A tárfiók nevét használja az alábbiak szerint: `wasbs://wwi@<storage_account_name>.blob.core.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="8426d-353">LOCATION: Use the name of the storage account as follows: `wasbs://wwi@<storage_account_name>.blob.core.windows.net`.</span></span>

7. <span data-ttu-id="8426d-354">Az azonos kapcsolaton keresztül végrehajtani a parancsfájlok `STEP_4` keresztül `STEP_7` egymás után.</span><span class="sxs-lookup"><span data-stu-id="8426d-354">Using the same connection, execute scripts `STEP_4` through `STEP_7` sequentially.</span></span> <span data-ttu-id="8426d-355">Győződjön meg arról, hogy minden parancsprogram a következő futtatása előtt sikeresen befejeződik.</span><span class="sxs-lookup"><span data-stu-id="8426d-355">Verify that each script completes successfully before running the next.</span></span>

<span data-ttu-id="8426d-356">A SMSS, megjelenik egy `prd.*` a táblázatot a `wwi` adatbázis.</span><span class="sxs-lookup"><span data-stu-id="8426d-356">In SMSS, you should see a set of `prd.*` tables in the `wwi` database.</span></span> <span data-ttu-id="8426d-357">A következő lekérdezés futtatásával ellenőrizheti, hogy létrejött-e az adatok:</span><span class="sxs-lookup"><span data-stu-id="8426d-357">To verify that the data was generated, run the following query:</span></span> 

```sql
SELECT TOP 10 * FROM prd.CityDimensions
```

### <a name="build-the-azure-analysis-services-model"></a><span data-ttu-id="8426d-358">Az Azure Analysis Services-modell létrehozása</span><span class="sxs-lookup"><span data-stu-id="8426d-358">Build the Azure Analysis Services model</span></span>

<span data-ttu-id="8426d-359">Ebben a lépésben létrehoz egy táblázatos modell, amellyel különféle adatok, az adatraktárból.</span><span class="sxs-lookup"><span data-stu-id="8426d-359">In this step, you will create a tabular model that imports data from the data warehouse.</span></span> <span data-ttu-id="8426d-360">A modell telepíti majd Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="8426d-360">Then you will deploy the model to Azure Analysis Services.</span></span>

1. <span data-ttu-id="8426d-361">A távoli asztali munkamenetből indítsa el az SQL Server Data Tools 2015.</span><span class="sxs-lookup"><span data-stu-id="8426d-361">From your Remote Desktop session, launch SQL Server Data Tools 2015.</span></span>

2. <span data-ttu-id="8426d-362">Válassza a **File** (Fájl) > **New** (Új) > **Project** (Projekt) lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="8426d-362">Select **File** > **New** > **Project**.</span></span>

3. <span data-ttu-id="8426d-363">Az a **új projekt** párbeszédpanelen, a **sablonok**, jelölje be **üzleti intelligencia** > **Analysis Services**  >  **Analysis Services táblázatos projekt**.</span><span class="sxs-lookup"><span data-stu-id="8426d-363">In the **New Project** dialog, under **Templates**, select  **Business Intelligence** > **Analysis Services** > **Analysis Services Tabular Project**.</span></span> 

4. <span data-ttu-id="8426d-364">Nevet a projektnek, és kattintson a **OK**.</span><span class="sxs-lookup"><span data-stu-id="8426d-364">Name the project and click **OK**.</span></span>

5. <span data-ttu-id="8426d-365">A a **táblázatos modellek tervezőjében** párbeszédablakban válassza **integrált munkaterület** és **kompatibilitási szintje** való `SQL Server 2017 / Azure Analysis Services (1400)`.</span><span class="sxs-lookup"><span data-stu-id="8426d-365">In the **Tabular model designer** dialog, select **Integrated workspace**  and set **Compatibility level** to `SQL Server 2017 / Azure Analysis Services (1400)`.</span></span> <span data-ttu-id="8426d-366">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="8426d-366">Click **OK**.</span></span>

6. <span data-ttu-id="8426d-367">Az a **táblázatos modell Explorer** ablak, kattintson jobb gombbal a projektre, és válassza ki **importálás az adatforrás**.</span><span class="sxs-lookup"><span data-stu-id="8426d-367">In the **Tabular Model Explorer** window, right-click the project and select **Import from Data Source**.</span></span>

7. <span data-ttu-id="8426d-368">Válassza ki **Azure SQL Data Warehouse** kattintson **Connect**.</span><span class="sxs-lookup"><span data-stu-id="8426d-368">Select **Azure SQL Data Warehouse** and click **Connect**.</span></span>

8. <span data-ttu-id="8426d-369">A **Server**, adja meg az Azure SQL Data Warehouse kiszolgáló teljesen minősített neve.</span><span class="sxs-lookup"><span data-stu-id="8426d-369">For **Server**, enter the fully qualified name of your Azure SQL Data Warehouse server.</span></span> <span data-ttu-id="8426d-370">A **adatbázis**, adja meg `wwi`.</span><span class="sxs-lookup"><span data-stu-id="8426d-370">For **Database**, enter `wwi`.</span></span> <span data-ttu-id="8426d-371">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="8426d-371">Click **OK**.</span></span>

9. <span data-ttu-id="8426d-372">A következő párbeszédpanelen válassza ki a **adatbázis** hitelesítés és az Azure SQL Data Warehouse-felhasználónevet és jelszót adjon meg, és kattintson a **OK**.</span><span class="sxs-lookup"><span data-stu-id="8426d-372">In the next dialog, choose **Database** authentication and enter your Azure SQL Data Warehouse user name and password, and click **OK**.</span></span>

10. <span data-ttu-id="8426d-373">Az a **Navigator** párbeszédpanelen jelölje be a jelölőnégyzeteket **prd. CityDimensions**, **prd. DateDimensions**, és **prd. SalesFact**.</span><span class="sxs-lookup"><span data-stu-id="8426d-373">In the **Navigator** dialog, select the checkboxes for **prd.CityDimensions**, **prd.DateDimensions**, and **prd.SalesFact**.</span></span> 

    ![](./images/analysis-services-import.png)

11. <span data-ttu-id="8426d-374">Kattintson a **terhelés**.</span><span class="sxs-lookup"><span data-stu-id="8426d-374">Click **Load**.</span></span> <span data-ttu-id="8426d-375">Ha feldolgozása befejeződött, kattintson a **Bezárás**.</span><span class="sxs-lookup"><span data-stu-id="8426d-375">When processing is complete, click **Close**.</span></span> <span data-ttu-id="8426d-376">Meg kell jelennie az adatok táblázatos nézetben.</span><span class="sxs-lookup"><span data-stu-id="8426d-376">You should now see a tabular view of the data.</span></span>

12. <span data-ttu-id="8426d-377">Az a **táblázatos modell Explorer** ablak, kattintson jobb gombbal a projektre, és válassza ki **modell nézet** > **diagramnézet**.</span><span class="sxs-lookup"><span data-stu-id="8426d-377">In the **Tabular Model Explorer** window, right-click the project and select **Model View** > **Diagram View**.</span></span>

13. <span data-ttu-id="8426d-378">Húzza a **[prd. SalesFact]. [Város WWI azonosítója]**  mezőről az **[prd. CityDimensions]. [Város WWI azonosítója]**  mező közötti kapcsolat kialakításához.</span><span class="sxs-lookup"><span data-stu-id="8426d-378">Drag the **[prd.SalesFact].[WWI City ID]** field to the **[prd.CityDimensions].[WWI City ID]** field to create a relationship.</span></span>  

14. <span data-ttu-id="8426d-379">Húzza a **[prd. SalesFact]. [Számlán dátum kulcs]**  mezőről az **[prd. DateDimensions]. [Dátum]**  mező.</span><span class="sxs-lookup"><span data-stu-id="8426d-379">Drag the **[prd.SalesFact].[Invoice Date Key]** field to the **[prd.DateDimensions].[Date]** field.</span></span>  
    ![](./images/analysis-services-relations.png)

15. <span data-ttu-id="8426d-380">Az a **fájl** menüben válasszon **összes mentése**.</span><span class="sxs-lookup"><span data-stu-id="8426d-380">From the **File** menu, choose **Save All**.</span></span>  

16. <span data-ttu-id="8426d-381">A **Megoldáskezelőben**, kattintson jobb gombbal a projektre, és válassza ki **tulajdonságok**.</span><span class="sxs-lookup"><span data-stu-id="8426d-381">In **Solution Explorer**, right-click the project and select **Properties**.</span></span> 

17. <span data-ttu-id="8426d-382">A **Server**, adja meg az Azure Analysis Services-példány URL-CÍMÉT.</span><span class="sxs-lookup"><span data-stu-id="8426d-382">Under **Server**, enter the URL of your Azure Analysis Services instance.</span></span> <span data-ttu-id="8426d-383">Ez az érték lekérheti az Azure portálon.</span><span class="sxs-lookup"><span data-stu-id="8426d-383">You can get this value from the Azure Portal.</span></span> <span data-ttu-id="8426d-384">A portálon, válassza ki az Analysis Services-erőforrást, az Áttekintés ablaktábláján kattintson, és keresse meg a **kiszolgálónév** tulajdonság.</span><span class="sxs-lookup"><span data-stu-id="8426d-384">In the portal, select the Analysis Services resource, click the Overview pane, and look for the **Server Name** property.</span></span> <span data-ttu-id="8426d-385">Hasonló lesz `asazure://westus.asazure.windows.net/contoso`.</span><span class="sxs-lookup"><span data-stu-id="8426d-385">It will be similar to `asazure://westus.asazure.windows.net/contoso`.</span></span> <span data-ttu-id="8426d-386">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="8426d-386">Click **OK**.</span></span>

    ![](./images/analysis-services-properties.png)

18. <span data-ttu-id="8426d-387">A **Megoldáskezelőben**, kattintson jobb gombbal a projektre, és válassza ki **telepítés**.</span><span class="sxs-lookup"><span data-stu-id="8426d-387">In **Solution Explorer**, right-click the project and select **Deploy**.</span></span> <span data-ttu-id="8426d-388">Ha a rendszer kéri, jelentkezzen be Azure.</span><span class="sxs-lookup"><span data-stu-id="8426d-388">Sign into Azure if prompted.</span></span> <span data-ttu-id="8426d-389">Ha feldolgozása befejeződött, kattintson a **Bezárás**.</span><span class="sxs-lookup"><span data-stu-id="8426d-389">When processing is complete, click **Close**.</span></span>

19. <span data-ttu-id="8426d-390">Az Azure-portálon az Azure Analysis Services-példány részletes adatainak megtekintése.</span><span class="sxs-lookup"><span data-stu-id="8426d-390">In the Azure portal, view the details for your Azure Analysis Services instance.</span></span> <span data-ttu-id="8426d-391">Győződjön meg arról, hogy a modell megjelenik-e a modellek listája.</span><span class="sxs-lookup"><span data-stu-id="8426d-391">Verify that your model appears in the list of models.</span></span>

    ![](./images/analysis-services-models.png)

### <a name="analyze-the-data-in-power-bi-desktop"></a><span data-ttu-id="8426d-392">A Power BI Desktop adatok elemzése</span><span class="sxs-lookup"><span data-stu-id="8426d-392">Analyze the data in Power BI Desktop</span></span>

<span data-ttu-id="8426d-393">Ebben a lépésben szüksége lesz az Power BI-jelentés létrehozása az Analysis Services az adatokból.</span><span class="sxs-lookup"><span data-stu-id="8426d-393">In this step, you will use Power BI to create a report from the data in Analysis Services.</span></span>

1. <span data-ttu-id="8426d-394">A távoli asztali munkamenetből indítsa el a Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="8426d-394">From your Remote Desktop session, launch Power BI Desktop.</span></span>

2. <span data-ttu-id="8426d-395">Kattintson az üdvözlő Scren **adatok beolvasása**.</span><span class="sxs-lookup"><span data-stu-id="8426d-395">In the Welcome Scren, click **Get Data**.</span></span>

3. <span data-ttu-id="8426d-396">Válassza ki **Azure** > **Azure Analysis Services-adatbázis**.</span><span class="sxs-lookup"><span data-stu-id="8426d-396">Select **Azure** > **Azure Analysis Services database**.</span></span> <span data-ttu-id="8426d-397">Kattintson a **csatlakozás**</span><span class="sxs-lookup"><span data-stu-id="8426d-397">Click **Connect**</span></span>

    ![](./images/power-bi-get-data.png)

4. <span data-ttu-id="8426d-398">Adja meg az Analysis Services-példány URL-CÍMÉT, majd kattintson a **OK**.</span><span class="sxs-lookup"><span data-stu-id="8426d-398">Enter the URL of your Analysis Services instance, then click **OK**.</span></span> <span data-ttu-id="8426d-399">Ha a rendszer kéri, jelentkezzen be Azure.</span><span class="sxs-lookup"><span data-stu-id="8426d-399">Sign into Azure if prompted.</span></span>

5. <span data-ttu-id="8426d-400">Az a **Navigator** párbeszédpanelen bontsa ki a központilag telepített táblázatos projektet, válassza ki a létrehozott, és kattintson a modell **OK**.</span><span class="sxs-lookup"><span data-stu-id="8426d-400">In the **Navigator** dialog, expand the tabular project that you deployed, select the model that you created, and click **OK**.</span></span>

2. <span data-ttu-id="8426d-401">Az a **képi megjelenítések** ablaktáblán válassza előbb a **halmozott sáv diagrammá** ikonra.</span><span class="sxs-lookup"><span data-stu-id="8426d-401">In the **Visualizations** pane, select the **Stacked Bar Chart** icon.</span></span> <span data-ttu-id="8426d-402">A jelentés nézetben a képi megjelenítés abba, hogy nagyobb átméretezése.</span><span class="sxs-lookup"><span data-stu-id="8426d-402">In the Report view, resize the visualization to make it larger.</span></span>

6. <span data-ttu-id="8426d-403">Az a **mezők** ablaktáblában bontsa ki a **prd. CityDimensions**.</span><span class="sxs-lookup"><span data-stu-id="8426d-403">In the **Fields** pane, expand **prd.CityDimensions**.</span></span>

7. <span data-ttu-id="8426d-404">A csomóponthúzási **prd. CityDimensions** > **WWI város azonosító** számára a **tengely well**.</span><span class="sxs-lookup"><span data-stu-id="8426d-404">Drag **prd.CityDimensions** > **WWI City ID** to the **Axis well**.</span></span>

8. <span data-ttu-id="8426d-405">A csomóponthúzási **prd. CityDimensions** > **Város** számára a **jelmagyarázat** is.</span><span class="sxs-lookup"><span data-stu-id="8426d-405">Drag **prd.CityDimensions** > **City** to the **Legend** well.</span></span>

9. <span data-ttu-id="8426d-406">A mezők ablaktáblában bontsa ki a **prd. SalesFact**.</span><span class="sxs-lookup"><span data-stu-id="8426d-406">In the Fields pane, expand **prd.SalesFact**.</span></span>

10. <span data-ttu-id="8426d-407">A csomóponthúzási **prd. SalesFact** > **kivételével adó** számára a **érték** is.</span><span class="sxs-lookup"><span data-stu-id="8426d-407">Drag **prd.SalesFact** > **Total Excluding Tax** to the **Value** well.</span></span>

    ![](./images/power-bi-visualization.png)

11. <span data-ttu-id="8426d-408">A **Visual szint szűrők**, jelölje be **WWI város azonosító**.</span><span class="sxs-lookup"><span data-stu-id="8426d-408">Under **Visual Level Filters**, select **WWI City ID**.</span></span>

12. <span data-ttu-id="8426d-409">Állítsa be a **szűrőtípus** való `Top N`, és állítsa be **elemek megjelenítése** való `Top 10`.</span><span class="sxs-lookup"><span data-stu-id="8426d-409">Set the **Filter Type** to `Top N`, and set **Show Items** to `Top 10`.</span></span>

13. <span data-ttu-id="8426d-410">A csomóponthúzási **prd. SalesFact** > **kivételével adó** számára a **által érték** is</span><span class="sxs-lookup"><span data-stu-id="8426d-410">Drag **prd.SalesFact** > **Total Excluding Tax** to the **By Value** well</span></span>

    ![](./images/power-bi-visualization2.png)

14. <span data-ttu-id="8426d-411">Kattintson a **szűrőt**.</span><span class="sxs-lookup"><span data-stu-id="8426d-411">Click **Apply Filter**.</span></span> <span data-ttu-id="8426d-412">A képi megjelenítés a felső 10 összes értékesítés városonként jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="8426d-412">The visualization shows the top 10 total sales by city.</span></span>

    ![](./images/power-bi-report.png)

<span data-ttu-id="8426d-413">A Power BI Desktop kapcsolatos további információkért lásd: [első lépések a Power BI Desktop](/power-bi/desktop-getting-started).</span><span class="sxs-lookup"><span data-stu-id="8426d-413">To learn more about Power BI Desktop, see [Getting started with Power BI Desktop](/power-bi/desktop-getting-started).</span></span>

## <a name="next-steps"></a><span data-ttu-id="8426d-414">További lépések</span><span class="sxs-lookup"><span data-stu-id="8426d-414">Next steps</span></span>

- <span data-ttu-id="8426d-415">A referencia-architektúrában kapcsolatos további információkért látogasson el a [GitHub-tárházban][ref-arch-repo-folder].</span><span class="sxs-lookup"><span data-stu-id="8426d-415">For more information about this reference architecture, visit our [GitHub repository][ref-arch-repo-folder].</span></span>
- <span data-ttu-id="8426d-416">További tudnivalók a [Azure építőelemeket][azbb-repo].</span><span class="sxs-lookup"><span data-stu-id="8426d-416">Learn about the [Azure Building Blocks][azbb-repo].</span></span>

<!-- links -->

[azure-cli-2]: /azure/install-azure-cli
[azbb-repo]: https://github.com/mspnp/template-building-blocks
[azbb-wiki]: https://github.com/mspnp/template-building-blocks/wiki/Install-Azure-Building-Blocks
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/data/enterprise_bi_sqldw
[ref-arch-repo]: https://github.com/mspnp/reference-architectures
[ref-arch-repo-folder]: https://github.com/mspnp/reference-architectures/tree/master/data/enterprise_bi_sqldw

