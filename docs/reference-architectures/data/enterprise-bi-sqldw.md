---
title: Enterprise BI és SQL Data Warehouse
description: A relációs adatok üzleti dcu használata Azure tárolt helyszíni
author: MikeWasson
ms.date: 07/01/2018
ms.openlocfilehash: 084028ca2e7ce130ac2699f1416414cfa55766fc
ms.sourcegitcommit: d5db5b8ed7429f056130096d0ef4b249b564599a
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/01/2018
ms.locfileid: "37141367"
---
# <a name="enterprise-bi-with-sql-data-warehouse"></a><span data-ttu-id="548ca-103">Enterprise BI és SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="548ca-103">Enterprise BI with SQL Data Warehouse</span></span>

<span data-ttu-id="548ca-104">A referencia-architektúrában megvalósítja az [ELT](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) (kivonat-betöltési-átalakítási) folyamatot, amely adatokat a helyszíni SQL Server-adatbázist az SQL Data Warehouse pedig átalakítja a vonatkozó adatok elemzési célú.</span><span class="sxs-lookup"><span data-stu-id="548ca-104">This reference architecture implements an [ELT](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) (extract-load-transform) pipeline that moves data from an on-premises SQL Server database into SQL Data Warehouse and transforms the data for analysis.</span></span> [<span data-ttu-id="548ca-105">**A megoldás üzembe helyezése**.</span><span class="sxs-lookup"><span data-stu-id="548ca-105">**Deploy this solution**.</span></span>](#deploy-the-solution)

![](./images/enterprise-bi-sqldw.png)

<span data-ttu-id="548ca-106">**A forgatókönyv**: egy szervezet rendelkezik a nagy OLTP adatkészletet, a helyszíni SQL Server adatbázis tárolja.</span><span class="sxs-lookup"><span data-stu-id="548ca-106">**Scenario**: An organization has a large OLTP data set stored in a SQL Server database on premises.</span></span> <span data-ttu-id="548ca-107">A szervezet szeretné használni az SQL Data Warehouse elemzésére a Power BI használatával.</span><span class="sxs-lookup"><span data-stu-id="548ca-107">The organization wants to use SQL Data Warehouse to perform analysis using Power BI.</span></span> 

<span data-ttu-id="548ca-108">A referencia-architektúrában egyszeri vagy igény szerinti feladatok tervezték.</span><span class="sxs-lookup"><span data-stu-id="548ca-108">This reference architecture is designed for one-time or on-demand jobs.</span></span> <span data-ttu-id="548ca-109">Ha az adatok áthelyezése (óránként vagy naponta) tartósan van szüksége, azt javasoljuk, Azure Data Factory egy automatizált munkafolyamat meghatározásához.</span><span class="sxs-lookup"><span data-stu-id="548ca-109">If you need to move data on a continuing basis (hourly or daily), we recommend using Azure Data Factory to define an automated workflow.</span></span> <span data-ttu-id="548ca-110">A referencia-architektúrában, amely használja a Data Factory, lásd: [vállalati BI Azure Data Factory és az SQL Data Warehouse automatikus](./enterprise-bi-adf.md).</span><span class="sxs-lookup"><span data-stu-id="548ca-110">For a reference architecture that uses Data Factory, see [Automated enterprise BI with SQL Data Warehouse and Azure Data Factory](./enterprise-bi-adf.md).</span></span>

## <a name="architecture"></a><span data-ttu-id="548ca-111">Architektúra</span><span class="sxs-lookup"><span data-stu-id="548ca-111">Architecture</span></span>

<span data-ttu-id="548ca-112">Az architektúra a következőkben leírt összetevőkből áll.</span><span class="sxs-lookup"><span data-stu-id="548ca-112">The architecture consists of the following components.</span></span>

### <a name="data-source"></a><span data-ttu-id="548ca-113">Adatforrás</span><span class="sxs-lookup"><span data-stu-id="548ca-113">Data source</span></span>

<span data-ttu-id="548ca-114">**Egy SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="548ca-114">**SQL Server**.</span></span> <span data-ttu-id="548ca-115">Az adatok a helyszíni SQL Server-adatbázisban található.</span><span class="sxs-lookup"><span data-stu-id="548ca-115">The source data is located in a SQL Server database on premises.</span></span> <span data-ttu-id="548ca-116">Szimulálása a helyszíni környezetben, az üzembe helyezési parancsfájlok a architektúra kiépítése a telepített SQL Server Azure virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="548ca-116">To simulate the on-premises environment, the deployment scripts for this architecture provision a VM in Azure with SQL Server installed.</span></span> <span data-ttu-id="548ca-117">A [Wide World Importers OLTP mintaadatbázis] [ wwi] a forrásadatok használatos.</span><span class="sxs-lookup"><span data-stu-id="548ca-117">The [Wide World Importers OLTP sample database][wwi] is used as the source data.</span></span>

### <a name="ingestion-and-data-storage"></a><span data-ttu-id="548ca-118">Adatfeldolgozást és adattárolási</span><span class="sxs-lookup"><span data-stu-id="548ca-118">Ingestion and data storage</span></span>

<span data-ttu-id="548ca-119">**BLOB Storage**.</span><span class="sxs-lookup"><span data-stu-id="548ca-119">**Blob Storage**.</span></span> <span data-ttu-id="548ca-120">A BLOB storage segítségével egy átmeneti területre, másolja az adatokat, az SQL Data Warehouse betöltése előtt.</span><span class="sxs-lookup"><span data-stu-id="548ca-120">Blob storage is used as a staging area to copy the data before loading it into SQL Data Warehouse.</span></span>

<span data-ttu-id="548ca-121">**Azure SQL Data Warehouse**.</span><span class="sxs-lookup"><span data-stu-id="548ca-121">**Azure SQL Data Warehouse**.</span></span> <span data-ttu-id="548ca-122">[Az SQL Data Warehouse](/azure/sql-data-warehouse/) egy elosztott rendszer készült elemzés végrehajtásához, nagy.</span><span class="sxs-lookup"><span data-stu-id="548ca-122">[SQL Data Warehouse](/azure/sql-data-warehouse/) is a distributed system designed to perform analytics on large data.</span></span> <span data-ttu-id="548ca-123">Támogatja a jelentős olyan párhuzamos feldolgozási (MPP), épp ezért kiválóan alkalmas a nagy teljesítményű analytics futtatásához.</span><span class="sxs-lookup"><span data-stu-id="548ca-123">It supports massive parallel processing (MPP), which makes it suitable for running high-performance analytics.</span></span> 

### <a name="analysis-and-reporting"></a><span data-ttu-id="548ca-124">Elemzési és jelentéskészítési</span><span class="sxs-lookup"><span data-stu-id="548ca-124">Analysis and reporting</span></span>

<span data-ttu-id="548ca-125">**Az Azure Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="548ca-125">**Azure Analysis Services**.</span></span> <span data-ttu-id="548ca-126">[Analysis Services](/azure/analysis-services/) egy teljes körűen felügyelt szolgáltatás, amely a modellezési képességekkel adatokat biztosít.</span><span class="sxs-lookup"><span data-stu-id="548ca-126">[Analysis Services](/azure/analysis-services/) is a fully managed service that provides data modeling capabilities.</span></span> <span data-ttu-id="548ca-127">Analysis Services segítségével hozzon létre egy, a felhasználók lekérdezheti a szemantikai modellben.</span><span class="sxs-lookup"><span data-stu-id="548ca-127">Use Analysis Services to create a semantic model that users can query.</span></span> <span data-ttu-id="548ca-128">Analysis Services különösen fontos olyan BI-irányítópult forgatókönyvekben.</span><span class="sxs-lookup"><span data-stu-id="548ca-128">Analysis Services is especially useful in a BI dashboard scenario.</span></span> <span data-ttu-id="548ca-129">Ebben az architektúrában Analysis Services olvassa be az adatokat az adatraktárban a szemantikai modell feldolgozásához, és hatékonyan működik az irányítópult lekérdezések.</span><span class="sxs-lookup"><span data-stu-id="548ca-129">In this architecture, Analysis Services reads data from the data warehouse to process the semantic model, and efficiently serves dashboard queries.</span></span> <span data-ttu-id="548ca-130">Rugalmas párhuzamossági gyorsabb a lekérdezés feldolgozása a replikák kiterjesztése által is támogatja.</span><span class="sxs-lookup"><span data-stu-id="548ca-130">It also supports elastic concurrency, by scaling out replicas for faster query processing.</span></span>

<span data-ttu-id="548ca-131">Jelenleg Azure Analysis Services rendszerbeli táblázatos modellek, de nem többdimenziós modellek támogatja.</span><span class="sxs-lookup"><span data-stu-id="548ca-131">Currently, Azure Analysis Services supports tabular models but not multidimensional models.</span></span> <span data-ttu-id="548ca-132">A táblázatos modellek használata relációs modellezési hoz létre (táblákat és oszlopokat), míg többdimenziós modellek használó OLAP modellezési szerkezetek (kockák, dimenziókat és mértékeket).</span><span class="sxs-lookup"><span data-stu-id="548ca-132">Tabular models use relational modeling constructs (tables and columns), whereas multidimensional models use OLAP modeling constructs (cubes, dimensions, and measures).</span></span> <span data-ttu-id="548ca-133">Ha többdimenziós modellek van szüksége, használja az SQL Server Analysis Services (SSAS).</span><span class="sxs-lookup"><span data-stu-id="548ca-133">If you require multidimensional models, use SQL Server Analysis Services (SSAS).</span></span> <span data-ttu-id="548ca-134">További információkért lásd: [többdimenziós vagy táblázatos megoldások összehasonlítása](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span><span class="sxs-lookup"><span data-stu-id="548ca-134">For more information, see [Comparing tabular and multidimensional solutions](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span></span>

<span data-ttu-id="548ca-135">**Power BI**.</span><span class="sxs-lookup"><span data-stu-id="548ca-135">**Power BI**.</span></span> <span data-ttu-id="548ca-136">A Power BI eszközcsomagot jelent üzleti analytics üzleti elemzések készítése adatok elemzésére.</span><span class="sxs-lookup"><span data-stu-id="548ca-136">Power BI is a suite of business analytics tools to analyze data for business insights.</span></span> <span data-ttu-id="548ca-137">Ebben az architektúrában lekéri az Analysis Servicesben tárolt a szemantikai modellben.</span><span class="sxs-lookup"><span data-stu-id="548ca-137">In this architecture, it queries the semantic model stored in Analysis Services.</span></span>

### <a name="authentication"></a><span data-ttu-id="548ca-138">Hitelesítés</span><span class="sxs-lookup"><span data-stu-id="548ca-138">Authentication</span></span>

<span data-ttu-id="548ca-139">**Az Azure Active Directory** (az Azure AD) hitelesíti a Power BI Analysis Services-kiszolgálóhoz csatlakozó felhasználók számára.</span><span class="sxs-lookup"><span data-stu-id="548ca-139">**Azure Active Directory** (Azure AD) authenticates users who connect to the Analysis Services server through Power BI.</span></span>

## <a name="data-pipeline"></a><span data-ttu-id="548ca-140">Adatfolyamat</span><span class="sxs-lookup"><span data-stu-id="548ca-140">Data pipeline</span></span>
 
<span data-ttu-id="548ca-141">A referencia-architektúrában használja a [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) mintaadatbázis adatforrásként.</span><span class="sxs-lookup"><span data-stu-id="548ca-141">This reference architecture uses the [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) sample database as a data source.</span></span> <span data-ttu-id="548ca-142">Az adatok csővezeték rendelkezik a következő szakaszt:</span><span class="sxs-lookup"><span data-stu-id="548ca-142">The data pipeline has the following stages:</span></span>

1. <span data-ttu-id="548ca-143">Az adatok exportálása az SQL Serverről egybesimított fájlokba (bcp segédprogram).</span><span class="sxs-lookup"><span data-stu-id="548ca-143">Export the data from SQL Server to flat files (bcp utility).</span></span>
2. <span data-ttu-id="548ca-144">Másolja a strukturálatlan fájlokat az Azure Blob Storage-(ba AzCopy).</span><span class="sxs-lookup"><span data-stu-id="548ca-144">Copy the flat files to Azure Blob Storage (AzCopy).</span></span>
3. <span data-ttu-id="548ca-145">Az adatok betöltése az SQL Data warehouse-ba (PolyBase).</span><span class="sxs-lookup"><span data-stu-id="548ca-145">Load the data into SQL Data Warehouse (PolyBase).</span></span>
4. <span data-ttu-id="548ca-146">Adatok átalakítása a csillagsémát (T-SQL).</span><span class="sxs-lookup"><span data-stu-id="548ca-146">Transform the data into a star schema (T-SQL).</span></span>
5. <span data-ttu-id="548ca-147">A szemantikai modell betöltése az Analysis Services (SQL Server Data Tools).</span><span class="sxs-lookup"><span data-stu-id="548ca-147">Load a semantic model into Analysis Services (SQL Server Data Tools).</span></span>

![](./images/enterprise-bi-sqldw-pipeline.png)
 
> [!NOTE]
> <span data-ttu-id="548ca-148">A lépéseket 1 &ndash; 3, fontolja meg a Redgate adatok Platform Studio használatát.</span><span class="sxs-lookup"><span data-stu-id="548ca-148">For steps 1 &ndash; 3, consider using Redgate Data Platform Studio.</span></span> <span data-ttu-id="548ca-149">A Data Platform Studio a legmegfelelőbb kompatibilitási javításokat és optimalizálásokat alkalmazza, így ez a leggyorsabb mód az SQL Data Warehouse használatának megkezdésére.</span><span class="sxs-lookup"><span data-stu-id="548ca-149">Data Platform Studio applies the most appropriate compatibility fixes and optimizations, so it's the quickest way to get started with SQL Data Warehouse.</span></span> <span data-ttu-id="548ca-150">További információkért lásd: [adatok betöltését az Redgate adatok Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span><span class="sxs-lookup"><span data-stu-id="548ca-150">For more information, see [Load data with Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span></span> 

<span data-ttu-id="548ca-151">A következő szakaszok ismertetik a szakaszok részletesebben.</span><span class="sxs-lookup"><span data-stu-id="548ca-151">The next sections describe these stages in more detail.</span></span>

### <a name="export-data-from-sql-server"></a><span data-ttu-id="548ca-152">Exportál adatokat az SQL Server</span><span class="sxs-lookup"><span data-stu-id="548ca-152">Export data from SQL Server</span></span>

<span data-ttu-id="548ca-153">A [bcp](/sql/tools/bcp-utility) (tömeges másolási funkciójával) segédprogram használata egyszerű szöveges fájlt létrehozni az SQL-táblák gyors módja.</span><span class="sxs-lookup"><span data-stu-id="548ca-153">The [bcp](/sql/tools/bcp-utility) (bulk copy program) utility is a fast way to create flat text files from SQL tables.</span></span> <span data-ttu-id="548ca-154">Ebben a lépésben válassza az oszlopot, amely kíván exportálni, de nem átalakíthatja az adatokat.</span><span class="sxs-lookup"><span data-stu-id="548ca-154">In this step, you select the columns that you want to export, but don't transform the data.</span></span> <span data-ttu-id="548ca-155">Bármely adatátalakítást az SQL Data Warehouse megtörténik.</span><span class="sxs-lookup"><span data-stu-id="548ca-155">Any data transformations should happen in SQL Data Warehouse.</span></span>

<span data-ttu-id="548ca-156">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="548ca-156">**Recommendations**</span></span>

<span data-ttu-id="548ca-157">Ha lehetséges ütemezni a csúcsidőn, minimálisra csökkentése érdekében az éles környezetben Erőforrásverseny adatok kinyerése.</span><span class="sxs-lookup"><span data-stu-id="548ca-157">If possible, schedule data extraction during off-peak hours, to minimize resource contention in the production environment.</span></span> 

<span data-ttu-id="548ca-158">Kerülje a bcp fut a kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="548ca-158">Avoid running bcp on the database server.</span></span> <span data-ttu-id="548ca-159">Ehelyett futtassa azt egy másik számítógépről.</span><span class="sxs-lookup"><span data-stu-id="548ca-159">Instead, run it from another machine.</span></span> <span data-ttu-id="548ca-160">Egy helyi meghajtó a fájlok írni.</span><span class="sxs-lookup"><span data-stu-id="548ca-160">Write the files to a local drive.</span></span> <span data-ttu-id="548ca-161">Győződjön meg arról, hogy rendelkezik-e kezelni az egyidejű írási műveletek elegendő i/o-erőforrások.</span><span class="sxs-lookup"><span data-stu-id="548ca-161">Ensure that you have sufficient I/O resources to handle the concurrent writes.</span></span> <span data-ttu-id="548ca-162">A legjobb teljesítmény érdekében a fájlok exportálása dedikált gyors tárolóeszközöket.</span><span class="sxs-lookup"><span data-stu-id="548ca-162">For best performance, export the files to dedicated fast storage drives.</span></span>

<span data-ttu-id="548ca-163">A hálózati átvitel felgyorsíthatja az exportált adatok mentése Gzip tömörített formátumban.</span><span class="sxs-lookup"><span data-stu-id="548ca-163">You can speed up the network transfer by saving the exported data in Gzip compressed format.</span></span> <span data-ttu-id="548ca-164">Tömörített fájlok betöltését az adatraktárba azonban alacsonyabb, mint a kibontott fájlok betöltése, így gyorsabban betöltése vagy gyorsabb hálózati átviteli között egy kompromisszumot.</span><span class="sxs-lookup"><span data-stu-id="548ca-164">However, loading compressed files into the warehouse is slower than loading uncompressed files, so there is a tradeoff between faster network transfer versus faster loading.</span></span> <span data-ttu-id="548ca-165">Ha úgy dönt, hogy a Gzip-tömörítés, ne hozzon létre egy Gzip fájl.</span><span class="sxs-lookup"><span data-stu-id="548ca-165">If you decide to use Gzip compression, don't create a single Gzip file.</span></span> <span data-ttu-id="548ca-166">Ehelyett az adatok felosztása több tömörített fájl.</span><span class="sxs-lookup"><span data-stu-id="548ca-166">Instead, split the data into multiple compressed files.</span></span>

### <a name="copy-flat-files-into-blob-storage"></a><span data-ttu-id="548ca-167">A blob-tároló egybesimított fájlok másolása</span><span class="sxs-lookup"><span data-stu-id="548ca-167">Copy flat files into blob storage</span></span>

<span data-ttu-id="548ca-168">A [AzCopy](/azure/storage/common/storage-use-azcopy) segédprogram készült tartozó nagyteljesítményű másolására az adatok Azure blob-tárolóba.</span><span class="sxs-lookup"><span data-stu-id="548ca-168">The [AzCopy](/azure/storage/common/storage-use-azcopy) utility is designed for high-performance copying of data into Azure blob storage.</span></span>

<span data-ttu-id="548ca-169">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="548ca-169">**Recommendations**</span></span>

<span data-ttu-id="548ca-170">A storage-fiók létrehozása az adatok helye közeli régióban.</span><span class="sxs-lookup"><span data-stu-id="548ca-170">Create the storage account in a region near the location of the source data.</span></span> <span data-ttu-id="548ca-171">Telepítse a tárfiók és az SQL Data Warehouse-példányokhoz ugyanabban a régióban.</span><span class="sxs-lookup"><span data-stu-id="548ca-171">Deploy the storage account and the SQL Data Warehouse instance in the same region.</span></span> 

<span data-ttu-id="548ca-172">AzCopy ugyanazon a számítógépen, amelyen a termelési számítási feladatokhoz, nem futtatható, mert a Processzor- és i/o-felhasználás megzavarhatja a termelési munkaterhelés.</span><span class="sxs-lookup"><span data-stu-id="548ca-172">Don't run AzCopy on the same machine that runs your production workloads, because the CPU and I/O consumption can interfere with the production workload.</span></span> 

<span data-ttu-id="548ca-173">A feltöltés először megtudhatja, mi a feltöltési sebességét például tesztelése.</span><span class="sxs-lookup"><span data-stu-id="548ca-173">Test the upload first to see what the upload speed is like.</span></span> <span data-ttu-id="548ca-174">AzCopy /NC beállítás használatával adja meg az egyidejű másolási műveletek számát.</span><span class="sxs-lookup"><span data-stu-id="548ca-174">You can use the /NC option in AzCopy to specify the number of concurrent copy operations.</span></span> <span data-ttu-id="548ca-175">Indítsa el az alapértelmezett értékkel, majd ezt a beállítást, a teljesítmény hangolására kísérletezhet.</span><span class="sxs-lookup"><span data-stu-id="548ca-175">Start with the default value, then experiment with this setting to tune the performance.</span></span> <span data-ttu-id="548ca-176">Alacsony sávszélességű környezetben túl sok egyidejű művelet ne terhelje tovább a hálózati kapcsolatot, és megakadályozza a művelet sikeres befejezését.</span><span class="sxs-lookup"><span data-stu-id="548ca-176">In a low-bandwidth environment, too many concurrent operations can overwhelm the network connection and prevent the operations from completing successfully.</span></span>  

<span data-ttu-id="548ca-177">AzCopy adatok áthelyezése a nyilvános interneten keresztül a tárolási.</span><span class="sxs-lookup"><span data-stu-id="548ca-177">AzCopy moves data to storage over the public internet.</span></span> <span data-ttu-id="548ca-178">Ha ez nem elég gyors, érdemes beállítani egy [ExpressRoute](/azure/expressroute/) körön.</span><span class="sxs-lookup"><span data-stu-id="548ca-178">If this isn't fast enough, consider setting up an [ExpressRoute](/azure/expressroute/) circuit.</span></span> <span data-ttu-id="548ca-179">ExpressRoute olyan szolgáltatás, amely továbbítja a dedikált titkos kapcsolaton keresztül az adatok az Azure-bA.</span><span class="sxs-lookup"><span data-stu-id="548ca-179">ExpressRoute is a service that routes your data through a dedicated private connection to Azure.</span></span> <span data-ttu-id="548ca-180">Egy másik lehetőség, ha a hálózati kapcsolat túl lassú, egy fizikailag küldje el az adatokat egy Azure-adatközpontban lemezen lévő.</span><span class="sxs-lookup"><span data-stu-id="548ca-180">Another option, if your network connection is too slow, is to physically ship the data on disk to an Azure datacenter.</span></span> <span data-ttu-id="548ca-181">További információkért lásd: [Azure érkező vagy oda irányuló adatátvitel](/azure/architecture/data-guide/scenarios/data-transfer).</span><span class="sxs-lookup"><span data-stu-id="548ca-181">For more information, see [Transferring data to and from Azure](/azure/architecture/data-guide/scenarios/data-transfer).</span></span>

<span data-ttu-id="548ca-182">A másolási műveletek során AzCopy hoz létre egy ideiglenes napló fájlt, amely lehetővé teszi az AzCopy segítségével indítsa újra a műveletet, ha azt lekérése megszakadt (például egy hálózati hiba miatt).</span><span class="sxs-lookup"><span data-stu-id="548ca-182">During a copy operation, AzCopy creates a temporary journal file, which enables AzCopy to restart the operation if it gets interrupted (for example, due to a network error).</span></span> <span data-ttu-id="548ca-183">Győződjön meg arról, hogy nincs elegendő szabad lemezterület az adatbázisnapló-fájlok tárolására.</span><span class="sxs-lookup"><span data-stu-id="548ca-183">Make sure there is enough disk space to store the journal files.</span></span> <span data-ttu-id="548ca-184">A /Z kapcsoló használatával adja meg, ahová az adatbázisnapló-fájlok készültek.</span><span class="sxs-lookup"><span data-stu-id="548ca-184">You can use the /Z option to specify where the journal files are written.</span></span>

### <a name="load-data-into-sql-data-warehouse"></a><span data-ttu-id="548ca-185">Adatok betöltése az SQL Data Warehouse-ba</span><span class="sxs-lookup"><span data-stu-id="548ca-185">Load data into SQL Data Warehouse</span></span>

<span data-ttu-id="548ca-186">Használjon [PolyBase](/sql/relational-databases/polybase/polybase-guide) tölthető be a fájlokat a blob-tároló az adatraktárba.</span><span class="sxs-lookup"><span data-stu-id="548ca-186">Use [PolyBase](/sql/relational-databases/polybase/polybase-guide) to load the files from blob storage into the data warehouse.</span></span> <span data-ttu-id="548ca-187">A PolyBase célja, hogy kihasználja a (nagymértékben párhuzamos feldolgozás) MPP architektúra az SQL Data Warehouse, így az adatok betöltése az SQL Data Warehouse a leggyorsabban.</span><span class="sxs-lookup"><span data-stu-id="548ca-187">PolyBase is designed to leverage the MPP (Massively Parallel Processing) architecture of SQL Data Warehouse, which makes it the fastest way to load data into SQL Data Warehouse.</span></span> 

<span data-ttu-id="548ca-188">Az adatok betöltése két lépésből áll:</span><span class="sxs-lookup"><span data-stu-id="548ca-188">Loading the data is a two-step process:</span></span>

1. <span data-ttu-id="548ca-189">Az adatok külső táblái létrehozása.</span><span class="sxs-lookup"><span data-stu-id="548ca-189">Create a set of external tables for the data.</span></span> <span data-ttu-id="548ca-190">A külső tábla esetében mutat, az adatraktár-on kívüli adatkészletekhez tábla definícióját &mdash; ebben az esetben a simán fájlok, a blob Storage tárolóban.</span><span class="sxs-lookup"><span data-stu-id="548ca-190">An external table is a table definition that points to data stored outside of the warehouse &mdash; in this case, the flat files in blob storage.</span></span> <span data-ttu-id="548ca-191">Ez a lépés nem helyezi át adatokat az adatraktárba.</span><span class="sxs-lookup"><span data-stu-id="548ca-191">This step does not move any data into the warehouse.</span></span>
2. <span data-ttu-id="548ca-192">Átmeneti tárolási táblák létrehozása, és az adatok betöltése az átmeneti tárolási táblákba.</span><span class="sxs-lookup"><span data-stu-id="548ca-192">Create staging tables, and load the data into the staging tables.</span></span> <span data-ttu-id="548ca-193">Ez a lépés másolja az adatokat az adatraktárba.</span><span class="sxs-lookup"><span data-stu-id="548ca-193">This step copies the data into the warehouse.</span></span>

<span data-ttu-id="548ca-194">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="548ca-194">**Recommendations**</span></span>

<span data-ttu-id="548ca-195">Fontolja meg az SQL Data Warehouse, ha nagy mennyiségű adat (több mint 1 TB-os) és egy analytics munkaterhelés, amelyek előnyösek, párhuzamossági futnak.</span><span class="sxs-lookup"><span data-stu-id="548ca-195">Consider SQL Data Warehouse when you have large amounts of data (more than 1 TB) and are running an analytics workload that will benefit from parallelism.</span></span> <span data-ttu-id="548ca-196">Az SQL Data Warehouse nincs remekül beválik, ha az OLTP-munkaterhelések vagy kisebb adatkészletek (< 250GB).</span><span class="sxs-lookup"><span data-stu-id="548ca-196">SQL Data Warehouse is not a good fit for OLTP workloads or smaller data sets (< 250GB).</span></span> <span data-ttu-id="548ca-197">Az adatkészlet kevesebb mint 250GB fontolja meg az Azure SQL Database vagy az SQL Server.</span><span class="sxs-lookup"><span data-stu-id="548ca-197">For data sets less than 250GB, consider Azure SQL Database or SQL Server.</span></span> <span data-ttu-id="548ca-198">További információkért lásd: [adatraktározással](../../data-guide/relational-data/data-warehousing.md).</span><span class="sxs-lookup"><span data-stu-id="548ca-198">For more information, see [Data warehousing](../../data-guide/relational-data/data-warehousing.md).</span></span>

<span data-ttu-id="548ca-199">Az előkészítési táblák létrehozása halommemória táblákat, amelyek indexelése.</span><span class="sxs-lookup"><span data-stu-id="548ca-199">Create the staging tables as heap tables, which are not indexed.</span></span> <span data-ttu-id="548ca-200">A lekérdezések, amely a termelési táblák létrehozása teljes táblázatbeolvasás eredményez, így nem ok arra, hogy az előkészítési táblák index.</span><span class="sxs-lookup"><span data-stu-id="548ca-200">The queries that create the production tables will result in a full table scan, so there is no reason to index the staging tables.</span></span>

<span data-ttu-id="548ca-201">A PolyBase automatikusan kihasználja párhuzamossági az adatraktár.</span><span class="sxs-lookup"><span data-stu-id="548ca-201">PolyBase automatically takes advantage of parallelism in the warehouse.</span></span> <span data-ttu-id="548ca-202">A betöltési teljesítmény arányosan, ahogy a dwu-k növeli.</span><span class="sxs-lookup"><span data-stu-id="548ca-202">The load performance scales as you increase DWUs.</span></span> <span data-ttu-id="548ca-203">A legjobb teljesítmény érdekében használjon egy egyetlen betöltési művelethez.</span><span class="sxs-lookup"><span data-stu-id="548ca-203">For best performance, use a single load operation.</span></span> <span data-ttu-id="548ca-204">Nincs a bemeneti adatok ossza adattömböket, és több egyidejű terhelések futtató teljesítmény előnye.</span><span class="sxs-lookup"><span data-stu-id="548ca-204">There is no performance benefit to breaking the input data into chunks and running multiple concurrent loads.</span></span>

<span data-ttu-id="548ca-205">A PolyBase Gzip tömörített fájlok olvashatja.</span><span class="sxs-lookup"><span data-stu-id="548ca-205">PolyBase can read Gzip compressed files.</span></span> <span data-ttu-id="548ca-206">Azonban csak egyetlen olvasó szolgál egy tömörített fájl, mert a fájl kibontása nem egyszálas működésre.</span><span class="sxs-lookup"><span data-stu-id="548ca-206">However, only a single reader is used per compressed file, because uncompressing the file is a single-threaded operation.</span></span> <span data-ttu-id="548ca-207">Ezért ne egyetlen nagy tömörített fájl betöltésekor.</span><span class="sxs-lookup"><span data-stu-id="548ca-207">Therefore, avoid loading a single large compressed file.</span></span> <span data-ttu-id="548ca-208">Ehelyett az adatok felosztása több tömörített fájl párhuzamossági kihasználása érdekében.</span><span class="sxs-lookup"><span data-stu-id="548ca-208">Instead, split the data into multiple compressed files, in order to take advantage of parallelism.</span></span> 

<span data-ttu-id="548ca-209">Vegye figyelembe a következő korlátozások vonatkoznak:</span><span class="sxs-lookup"><span data-stu-id="548ca-209">Be aware of the following limitations:</span></span>

- <span data-ttu-id="548ca-210">A PolyBase támogatja a oszlop maximális méretet `varchar(8000)`, `nvarchar(4000)`, vagy `varbinary(8000)`.</span><span class="sxs-lookup"><span data-stu-id="548ca-210">PolyBase supports a maximum column size of `varchar(8000)`, `nvarchar(4000)`, or `varbinary(8000)`.</span></span> <span data-ttu-id="548ca-211">Ha rendelkezik, amelynek hossza meghaladja a működés felső korlátjának adatokat, egy lehetőség egy feloszthatja az adatok adattömbökbe exportálni, és az adattömbök majd később az importálás után.</span><span class="sxs-lookup"><span data-stu-id="548ca-211">If you have data that exceeds these limits, one option is to break the data up into chunks when you export it, and then reassemble the chunks after import.</span></span> 

- <span data-ttu-id="548ca-212">A polybase egy rögzített méretű sor lezárójele \n vagy új sor.</span><span class="sxs-lookup"><span data-stu-id="548ca-212">PolyBase uses a fixed row terminator of \n or newline.</span></span> <span data-ttu-id="548ca-213">Ez problémát okozhat, ha a forrásadatok szerepelhet soremelés karaktereket.</span><span class="sxs-lookup"><span data-stu-id="548ca-213">This can cause problems if newline characters appear in the source data.</span></span>

- <span data-ttu-id="548ca-214">A forrás adatsémája nem támogatott az SQL Data Warehouse adattípusok is tartalmazhatnak.</span><span class="sxs-lookup"><span data-stu-id="548ca-214">Your source data schema might contain data types that are not supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="548ca-215">Ezekkel a korlátozásokkal megkerüléséhez tárolt eljárás, amely elvégzi a szükséges átalakítások is létrehozhat.</span><span class="sxs-lookup"><span data-stu-id="548ca-215">To work around these limitations, you can create a stored procedure that performs the necessary conversions.</span></span> <span data-ttu-id="548ca-216">Ez a tárolt eljárás hivatkozzon a bcp futtatásakor.</span><span class="sxs-lookup"><span data-stu-id="548ca-216">Reference this stored procedure when you run bcp.</span></span> <span data-ttu-id="548ca-217">Másik lehetőségként [Redgate adatok Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) automatikusan átalakítja az adattípust, amelyet az SQL Data Warehouse nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="548ca-217">Alternatively, [Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) automatically converts data types that aren’t supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="548ca-218">További információkért tekintse át a következő cikkeket:</span><span class="sxs-lookup"><span data-stu-id="548ca-218">For more information, see the following articles:</span></span>

- <span data-ttu-id="548ca-219">[Ajánlott eljárások az adatok betöltése az Azure SQL Data Warehouse](/azure/sql-data-warehouse/guidance-for-loading-data).</span><span class="sxs-lookup"><span data-stu-id="548ca-219">[Best practices for loading data into Azure SQL Data Warehouse](/azure/sql-data-warehouse/guidance-for-loading-data).</span></span>
- [<span data-ttu-id="548ca-220">Az SQL Data Warehouse a sémák áttelepítése</span><span class="sxs-lookup"><span data-stu-id="548ca-220">Migrate your schemas to SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-migrate-schema)
- [<span data-ttu-id="548ca-221">Útmutató az SQL Data Warehouse táblák adattípusok definiálása</span><span class="sxs-lookup"><span data-stu-id="548ca-221">Guidance for defining data types for tables in SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-tables-data-types)

### <a name="transform-the-data"></a><span data-ttu-id="548ca-222">Az adatok átalakítása</span><span class="sxs-lookup"><span data-stu-id="548ca-222">Transform the data</span></span>

<span data-ttu-id="548ca-223">Átalakíthatja az adatokat, és helyezze át a termelési táblákat.</span><span class="sxs-lookup"><span data-stu-id="548ca-223">Transform the data and move it into production tables.</span></span> <span data-ttu-id="548ca-224">Ebben a lépésben az adatokat a dimenziótáblák és ténytáblák, megfelelő-e szemantikai modellezési csillagséma alakul.</span><span class="sxs-lookup"><span data-stu-id="548ca-224">In this step, the data is transformed into a star schema with dimension tables and fact tables, suitable for semantic modeling.</span></span>

<span data-ttu-id="548ca-225">Hozzon létre fürtözött oszlopcentrikus indexek – amelyek nyújtja a legjobb átfogó lekérdezési teljesítményt a termelési táblákat.</span><span class="sxs-lookup"><span data-stu-id="548ca-225">Create the production tables with clustered columnstore indexes, which offer the best overall query performance.</span></span> <span data-ttu-id="548ca-226">Oszlopcentrikus indexek sok rekord vizsgálhatják lekérdezések vannak optimalizálva.</span><span class="sxs-lookup"><span data-stu-id="548ca-226">Columnstore indexes are optimized for queries that scan many records.</span></span> <span data-ttu-id="548ca-227">Oszlopcentrikus indexek nem végezze el a is egypéldányos keresések (amely keresése van, egy sorban).</span><span class="sxs-lookup"><span data-stu-id="548ca-227">Columnstore indexes don't perform as well for singleton lookups (that is, looking up a single row).</span></span> <span data-ttu-id="548ca-228">Ha gyakori egypéldányos végrehajtott keresési műveletek elvégzéséhez szüksége, adhat hozzá egy nem fürtözött index táblázat.</span><span class="sxs-lookup"><span data-stu-id="548ca-228">If you need to perform frequent singleton lookups, you can add a non-clustered index to a table.</span></span> <span data-ttu-id="548ca-229">Egypéldányos keresések futtatható jelentősen gyorsabb egy nem fürtözött index.</span><span class="sxs-lookup"><span data-stu-id="548ca-229">Singleton lookups can run significantly faster using a non-clustered index.</span></span> <span data-ttu-id="548ca-230">Azonban az Egypéldányos végzett keresések nem általában ritkább data warehouse forgatókönyvekben mint az OLTP-munkaterhelések.</span><span class="sxs-lookup"><span data-stu-id="548ca-230">However, singleton lookups are typically less common in data warehouse scenarios than OLTP workloads.</span></span> <span data-ttu-id="548ca-231">További információkért lásd: [táblák az SQL Data Warehouse indexelő](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span><span class="sxs-lookup"><span data-stu-id="548ca-231">For more information, see [Indexing tables in SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span></span>

> [!NOTE]
> <span data-ttu-id="548ca-232">Nem támogatja a fürtözött oszloptárindexű táblákat `varchar(max)`, `nvarchar(max)`, vagy `varbinary(max)` adattípusokat.</span><span class="sxs-lookup"><span data-stu-id="548ca-232">Clustered columnstore tables do not support `varchar(max)`, `nvarchar(max)`, or `varbinary(max)` data types.</span></span> <span data-ttu-id="548ca-233">Ebben az esetben érdemes lehet halmot vagy fürtözött index.</span><span class="sxs-lookup"><span data-stu-id="548ca-233">In that case, consider a heap or clustered index.</span></span> <span data-ttu-id="548ca-234">Előfordulhat, hogy ezek az oszlopok bocsátott különálló táblában.</span><span class="sxs-lookup"><span data-stu-id="548ca-234">You might put those columns into a separate table.</span></span>

<span data-ttu-id="548ca-235">Mivel a mintaadatbázis nem nagyon nagy, nem partíciókkal rendelkező létrehozott replikált táblák.</span><span class="sxs-lookup"><span data-stu-id="548ca-235">Because the sample database is not very large, we created replicated tables with no partitions.</span></span> <span data-ttu-id="548ca-236">A termelési számítási feladatokhoz elosztott táblák használata valószínűleg javítható a teljesítmény-küszöbérték.</span><span class="sxs-lookup"><span data-stu-id="548ca-236">For production workloads, using distributed tables is likely to improve query performance.</span></span> <span data-ttu-id="548ca-237">Lásd: [útmutató az Azure SQL Data Warehouse elosztott táblák tervezése](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span><span class="sxs-lookup"><span data-stu-id="548ca-237">See [Guidance for designing distributed tables in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span></span> <span data-ttu-id="548ca-238">A példa parancsfájlok a lekérdezések futtatása használatával statikus [erőforrásosztály](/azure/sql-data-warehouse/resource-classes-for-workload-management).</span><span class="sxs-lookup"><span data-stu-id="548ca-238">Our example scripts run the queries using a static [resource class](/azure/sql-data-warehouse/resource-classes-for-workload-management).</span></span>

### <a name="load-the-semantic-model"></a><span data-ttu-id="548ca-239">A szemantikai modell betöltése</span><span class="sxs-lookup"><span data-stu-id="548ca-239">Load the semantic model</span></span>

<span data-ttu-id="548ca-240">Adatok betöltése az Azure Analysis Services táblázatos modell.</span><span class="sxs-lookup"><span data-stu-id="548ca-240">Load the data into a tabular model in Azure Analysis Services.</span></span> <span data-ttu-id="548ca-241">Ebben a lépésben hoz létre egy szemantikai adatmodell SQL Server Data Tools (SSDT).</span><span class="sxs-lookup"><span data-stu-id="548ca-241">In this step, you create a semantic data model by using SQL Server Data Tools (SSDT).</span></span> <span data-ttu-id="548ca-242">A referencia-architektúrában kapcsolatos további információkért látogasson el a GitHub-tárházban.</span><span class="sxs-lookup"><span data-stu-id="548ca-242">You can also create a model by importing it from a Power BI Desktop file.</span></span> <span data-ttu-id="548ca-243">További tudnivalók a Azure építőelemeket.</span><span class="sxs-lookup"><span data-stu-id="548ca-243">Because SQL Data Warehouse does not support foreign keys, you must add the relationships to the semantic model, so that you can join across tables.</span></span>

### <a name="use-power-bi-to-visualize-the-data"></a><span data-ttu-id="548ca-244">Az adatok megjelenítése a Power BI használatával</span><span class="sxs-lookup"><span data-stu-id="548ca-244">Use Power BI to visualize the data</span></span>

<span data-ttu-id="548ca-245">A Power BI Azure Analysis Services történő kapcsolódáshoz támogatja a két lehetőség közül választhat:</span><span class="sxs-lookup"><span data-stu-id="548ca-245">Power BI supports two options for connecting to Azure Analysis Services:</span></span>

- <span data-ttu-id="548ca-246">Importálja.</span><span class="sxs-lookup"><span data-stu-id="548ca-246">Import.</span></span> <span data-ttu-id="548ca-247">Az adatok importálása a Power BI-modellbe.</span><span class="sxs-lookup"><span data-stu-id="548ca-247">The data is imported into the Power BI model.</span></span>
- <span data-ttu-id="548ca-248">Élő kapcsolatot.</span><span class="sxs-lookup"><span data-stu-id="548ca-248">Live Connection.</span></span> <span data-ttu-id="548ca-249">Az adatok közvetlenül Analysis Services lekért.</span><span class="sxs-lookup"><span data-stu-id="548ca-249">Data is pulled directly from Analysis Services.</span></span>

<span data-ttu-id="548ca-250">Élő kapcsolatot azt javasoljuk, mert nincs szükség az adatok másolásának a Power BI-modellbe.</span><span class="sxs-lookup"><span data-stu-id="548ca-250">We recommend Live Connection because it doesn't require copying data into the Power BI model.</span></span> <span data-ttu-id="548ca-251">Is a DirectQuery biztosítja, hogy az eredmények mindig a legújabb forrásadatok összhangban.</span><span class="sxs-lookup"><span data-stu-id="548ca-251">Also, using DirectQuery ensures that results are always consistent with the latest source data.</span></span> <span data-ttu-id="548ca-252">További információkért lásd: [csatlakozás a Power BI](/azure/analysis-services/analysis-services-connect-pbi).</span><span class="sxs-lookup"><span data-stu-id="548ca-252">For more information, see [Connect with Power BI](/azure/analysis-services/analysis-services-connect-pbi).</span></span>

<span data-ttu-id="548ca-253">**Javaslatok**</span><span class="sxs-lookup"><span data-stu-id="548ca-253">**Recommendations**</span></span>

<span data-ttu-id="548ca-254">Küszöbölhető BI irányítópult lekérdezések közvetlenül az adatraktáron.</span><span class="sxs-lookup"><span data-stu-id="548ca-254">Avoid running BI dashboard queries directly against the data warehouse.</span></span> <span data-ttu-id="548ca-255">Üzleti INTELLIGENCIA irányítópultok szükséges nagyon alacsony válaszidejét, amely közvetlen, előfordulhat, hogy a lekérdezések írásában, az adatraktár nem elégíti ki.</span><span class="sxs-lookup"><span data-stu-id="548ca-255">BI dashboards require very low response times, which direct queries against the warehouse may be unable to satisfy.</span></span> <span data-ttu-id="548ca-256">Is az irányítópult frissítésekor fog, csökkenti az egyidejű lekérdezések, amelyek jelentős hatással lehet a teljesítmény.</span><span class="sxs-lookup"><span data-stu-id="548ca-256">Also, refreshing the dashboard will count against the number of concurrent queries, which could impact performance.</span></span> 

<span data-ttu-id="548ca-257">Az Azure Analysis Services egy BI-irányítópult lekérdezés követelményeinek kezelésére, ezért az ajánlott eljárás lekérdezés Analysis Services a Power BI-ból terveztek.</span><span class="sxs-lookup"><span data-stu-id="548ca-257">Azure Analysis Services is designed to handle the query requirements of a BI dashboard, so the recommended practice is to query Analysis Services from Power BI.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="548ca-258">Méretezési szempontok</span><span class="sxs-lookup"><span data-stu-id="548ca-258">Scalability considerations</span></span>

### <a name="sql-data-warehouse"></a><span data-ttu-id="548ca-259">SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="548ca-259">SQL Data Warehouse</span></span>

<span data-ttu-id="548ca-260">Az SQL Data Warehouse ki lehet terjeszteni a számítási erőforrásokat szükség esetén kérheti.</span><span class="sxs-lookup"><span data-stu-id="548ca-260">With SQL Data Warehouse, you can scale out your compute resources on demand.</span></span> <span data-ttu-id="548ca-261">A lekérdezési motor optimalizálja a lekérdezések alapján a számítási csomópontok száma párhuzamos feldolgozásra, és mozgatja az adatokat szükség szerint a csomópontok között.</span><span class="sxs-lookup"><span data-stu-id="548ca-261">The query engine optimizes queries for parallel processing based on the number of compute nodes, and moves data between nodes as necessary.</span></span> <span data-ttu-id="548ca-262">További információkért lásd: [kezelése számítási az Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span><span class="sxs-lookup"><span data-stu-id="548ca-262">For more information, see [Manage compute in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span></span>

### <a name="analysis-services"></a><span data-ttu-id="548ca-263">Analysis Services</span><span class="sxs-lookup"><span data-stu-id="548ca-263">Analysis Services</span></span>

<span data-ttu-id="548ca-264">A termelési számítási feladatokhoz ajánlott Standard csomagra Azure Analysis Services, mert támogatja a particionálás és a DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="548ca-264">For production workloads, we recommend the Standard Tier for Azure Analysis Services, because it supports partitioning and DirectQuery.</span></span> <span data-ttu-id="548ca-265">A réteg belül példány határozza meg a memória és a feldolgozási kapacitást.</span><span class="sxs-lookup"><span data-stu-id="548ca-265">Within a tier, the instance size determines the memory and processing power.</span></span> <span data-ttu-id="548ca-266">Feldolgozási kapacitása révén a lekérdezés feldolgozása egységek (QPUs) mérik.</span><span class="sxs-lookup"><span data-stu-id="548ca-266">Processing power is measured in Query Processing Units (QPUs).</span></span> <span data-ttu-id="548ca-267">A QPU megfigyeléséhez válassza ki a megfelelő méretű.</span><span class="sxs-lookup"><span data-stu-id="548ca-267">Monitor your QPU usage to select the appropriate size.</span></span> <span data-ttu-id="548ca-268">További információkért lásd: [server metrikát](/azure/analysis-services/analysis-services-monitor).</span><span class="sxs-lookup"><span data-stu-id="548ca-268">For more information, see [Monitor server metrics](/azure/analysis-services/analysis-services-monitor).</span></span>

<span data-ttu-id="548ca-269">Nagy terhelés teljesítmény-küszöbérték is válnak romlik a lekérdezés párhuzamosság miatt.</span><span class="sxs-lookup"><span data-stu-id="548ca-269">Under high load, query performance can become degraded due to query concurrency.</span></span> <span data-ttu-id="548ca-270">További tudnivalók a Azure építőelemeket.</span><span class="sxs-lookup"><span data-stu-id="548ca-270">You can scale out Analysis Services by creating a pool of replicas to process queries, so that more queries can be performed concurrently.</span></span> <span data-ttu-id="548ca-271">Az adatmodell mindig feldolgozási munka az elsődleges kiszolgálón történik.</span><span class="sxs-lookup"><span data-stu-id="548ca-271">The work of processing the data model always happens on the primary server.</span></span> <span data-ttu-id="548ca-272">Alapértelmezés szerint az elsődleges kiszolgáló lekérdezéseket is kezeli.</span><span class="sxs-lookup"><span data-stu-id="548ca-272">By default, the primary server also handles queries.</span></span> <span data-ttu-id="548ca-273">Szükség esetén is kijelölhet feldolgozás kizárólag, az elsődleges kiszolgálót, hogy a lekérdezés készlet az összes lekérdezés kezeli.</span><span class="sxs-lookup"><span data-stu-id="548ca-273">Optionally, you can designate the primary server to run processing exclusively, so that the query pool handles all queries.</span></span> <span data-ttu-id="548ca-274">Ha nagy feldolgozási követelményeket, a lekérdezés készletből feldolgozási kell egymástól.</span><span class="sxs-lookup"><span data-stu-id="548ca-274">If you have high processing requirements, you should separate the processing from the query pool.</span></span> <span data-ttu-id="548ca-275">Ha magas lekérdezésekkel, és viszonylag könnyű feldolgozása, az elsődleges kiszolgálón is felvehet a lekérdezés-készlet.</span><span class="sxs-lookup"><span data-stu-id="548ca-275">If you have high query loads, and relatively light processing, you can include the primary server in the query pool.</span></span> <span data-ttu-id="548ca-276">További információkért lásd: [Azure Analysis Services kibővített](/azure/analysis-services/analysis-services-scale-out).</span><span class="sxs-lookup"><span data-stu-id="548ca-276">For more information, see [Azure Analysis Services scale-out](/azure/analysis-services/analysis-services-scale-out).</span></span> 

<span data-ttu-id="548ca-277">Rövidítse le a felesleges feldolgozási, fontolja meg a partíciók használatával a táblázatos modell olyan részekre való felosztásához logikai.</span><span class="sxs-lookup"><span data-stu-id="548ca-277">To reduce the amount of unnecessary processing, consider using partitions to divide the tabular model into logical parts.</span></span> <span data-ttu-id="548ca-278">Mindegyik partíció külön-külön lehet feldolgozni.</span><span class="sxs-lookup"><span data-stu-id="548ca-278">Each partition can be processed separately.</span></span> <span data-ttu-id="548ca-279">További információkért lásd: [partíciók](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="548ca-279">For more information, see [Partitions](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="548ca-280">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="548ca-280">Security considerations</span></span>

### <a name="ip-whitelisting-of-analysis-services-clients"></a><span data-ttu-id="548ca-281">Az Analysis Services ügyfelek IP-engedélyezése</span><span class="sxs-lookup"><span data-stu-id="548ca-281">IP whitelisting of Analysis Services clients</span></span>

<span data-ttu-id="548ca-282">Fontolja meg az Analysis Services-tűzfal szolgáltatás engedélyezett ügyfél IP-címek használatát.</span><span class="sxs-lookup"><span data-stu-id="548ca-282">Consider using the Analysis Services firewall feature to whitelist client IP addresses.</span></span> <span data-ttu-id="548ca-283">Ha engedélyezve van, a tűzfal blokkolja az tűzfalszabályok minden ügyfél-kommunikációhoz.</span><span class="sxs-lookup"><span data-stu-id="548ca-283">If enabled, the firewall blocks all client connections other than those specified in the firewall rules.</span></span> <span data-ttu-id="548ca-284">Az alapértelmezett szabályok engedélyezési listája a Power BI-ban, de a szükség esetén letilthatja a Ez a szabály.</span><span class="sxs-lookup"><span data-stu-id="548ca-284">The default rules whitelist the Power BI service, but you can disable this rule if desired.</span></span> <span data-ttu-id="548ca-285">További információkért lásd: [Azure Analysis Services korlátozására a tűzfal az új képesség](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/).</span><span class="sxs-lookup"><span data-stu-id="548ca-285">For more information, see [Hardening Azure Analysis Services with the new firewall capability](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/).</span></span>

### <a name="authorization"></a><span data-ttu-id="548ca-286">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="548ca-286">Authorization</span></span>

<span data-ttu-id="548ca-287">Az Azure Analysis Services egy Analysis Services-kiszolgálóhoz csatlakozó felhasználók hitelesítéséhez az Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="548ca-287">Azure Analysis Services uses Azure Active Directory (Azure AD) to authenticate users who connect to an Analysis Services server.</span></span> <span data-ttu-id="548ca-288">Korlátozhatja, hogy milyen adatokat egy adott felhasználó megtekintheti, szerepkörök létrehozásával, és majd ezen szerepkörök hozzárendelése az Azure AD-felhasználókat vagy csoportokat.</span><span class="sxs-lookup"><span data-stu-id="548ca-288">You can restrict what data a particular user is able to view, by creating roles and then assigning Azure AD users or groups to those roles.</span></span> <span data-ttu-id="548ca-289">Az egyes szerepkörökhöz a következő műveletek végezhetők el:</span><span class="sxs-lookup"><span data-stu-id="548ca-289">For each role, you can:</span></span> 

- <span data-ttu-id="548ca-290">Táblák, illetve az egyes oszlopok védheti.</span><span class="sxs-lookup"><span data-stu-id="548ca-290">Protect tables or individual columns.</span></span> 
- <span data-ttu-id="548ca-291">Az egyes sorok szűrőkifejezéseket alapján védelme.</span><span class="sxs-lookup"><span data-stu-id="548ca-291">Protect individual rows based on filter expressions.</span></span> 

<span data-ttu-id="548ca-292">További információkért lásd: [adatbázis-szerepkörök és a felhasználók kezelése](/azure/analysis-services/analysis-services-database-users).</span><span class="sxs-lookup"><span data-stu-id="548ca-292">For more information, see [Manage database roles and users](/azure/analysis-services/analysis-services-database-users).</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="548ca-293">A megoldás üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="548ca-293">Deploy the solution</span></span>

<span data-ttu-id="548ca-294">Ennek a referenciaarchitektúrának egy üzemelő példánya elérhető a [GitHubon][ref-arch-repo-folder].</span><span class="sxs-lookup"><span data-stu-id="548ca-294">A deployment for this reference architecture is available on [GitHub][ref-arch-repo-folder].</span></span> <span data-ttu-id="548ca-295">A következőket helyezi üzembe:</span><span class="sxs-lookup"><span data-stu-id="548ca-295">It deploys the following:</span></span>

  * <span data-ttu-id="548ca-296">Windows virtuális gép egy helyi adatbázis-kiszolgáló szimulálásához.</span><span class="sxs-lookup"><span data-stu-id="548ca-296">A Windows VM to simulate an on-premises database server.</span></span> <span data-ttu-id="548ca-297">SQL Server 2017 és a kapcsolódó eszközök, valamint Power BI Desktop tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="548ca-297">It includes SQL Server 2017 and related tools, along with Power BI Desktop.</span></span>
  * <span data-ttu-id="548ca-298">Egy Azure storage-fiók, amely Blob-tároló az SQL Server adatbázisból exportált adatok tárolásához.</span><span class="sxs-lookup"><span data-stu-id="548ca-298">An Azure storage account that provides Blob storage to hold data exported from the SQL Server database.</span></span>
  * <span data-ttu-id="548ca-299">Egy Azure SQL Data Warehouse-példányhoz.</span><span class="sxs-lookup"><span data-stu-id="548ca-299">An Azure SQL Data Warehouse instance.</span></span>
  * <span data-ttu-id="548ca-300">Egy Azure Analysis Services-példányon.</span><span class="sxs-lookup"><span data-stu-id="548ca-300">An Azure Analysis Services instance.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="548ca-301">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="548ca-301">Prerequisites</span></span>

1. <span data-ttu-id="548ca-302">Klónozza, ágaztassa vagy a zip-fájl letöltése a [Azure referencia architektúra] [ ref-arch-repo] GitHub-tárházban.</span><span class="sxs-lookup"><span data-stu-id="548ca-302">Clone, fork, or download the zip file for the [Azure reference architectures][ref-arch-repo] GitHub repository.</span></span>

2. <span data-ttu-id="548ca-303">Telepítse a [Azure építőelemeket] [ azbb-wiki] (azbb).</span><span class="sxs-lookup"><span data-stu-id="548ca-303">Install the [Azure Building Blocks][azbb-wiki] (azbb).</span></span>

3. <span data-ttu-id="548ca-304">A Power BI Desktop kapcsolatos további információkért lásd: első lépések a Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="548ca-304">From a command prompt, bash prompt, or PowerShell prompt, login to your Azure account as follows:</span></span>

    ```bash
    az login  
    ```

### <a name="deploy-the-simulated-on-premises-server"></a><span data-ttu-id="548ca-305">A referencia-architektúrában kapcsolatos további információkért látogasson el a GitHub-tárházban.</span><span class="sxs-lookup"><span data-stu-id="548ca-305">Deploy the simulated on-premises server</span></span>

<span data-ttu-id="548ca-306">További tudnivalók a Azure építőelemeket.</span><span class="sxs-lookup"><span data-stu-id="548ca-306">First you'll deploy a VM as a simulated on-premises server, which includes SQL Server 2017 and related tools.</span></span> <span data-ttu-id="548ca-307">Ez a lépés is betölti a [Wide World Importers OLTP adatbázis] [ wwi] az SQL-kiszolgálóra.</span><span class="sxs-lookup"><span data-stu-id="548ca-307">This step also loads the [Wide World Importers OLTP database][wwi] into SQL Server.</span></span>

1. <span data-ttu-id="548ca-308">Keresse meg a `data\enterprise_bi_sqldw\onprem\templates` a tárház mappát.</span><span class="sxs-lookup"><span data-stu-id="548ca-308">Navigate to the `data\enterprise_bi_sqldw\onprem\templates` folder of the repository.</span></span>

2. <span data-ttu-id="548ca-309">Az a `onprem.parameters.json` fájlt, cserélje le a értékeinek `adminUsername` és `adminPassword`.</span><span class="sxs-lookup"><span data-stu-id="548ca-309">In the `onprem.parameters.json` file, replace the values for `adminUsername` and `adminPassword`.</span></span> <span data-ttu-id="548ca-310">Szereplő értékeket is módosíthatja a `SqlUserCredentials` szakasz felel meg a felhasználónevet és jelszót.</span><span class="sxs-lookup"><span data-stu-id="548ca-310">Also change the values in the `SqlUserCredentials` section to match the user name and password.</span></span> <span data-ttu-id="548ca-311">Megjegyzés: a `.\\` a userName tulajdonság-előtagot.</span><span class="sxs-lookup"><span data-stu-id="548ca-311">Note the `.\\` prefix in the userName property.</span></span>
    
    ```bash
    "SqlUserCredentials": {
      "userName": ".\\username",
      "password": "password"
    }
    ```

3. <span data-ttu-id="548ca-312">Futtatás `azbb` a helyszíni kiszolgáló telepítésének alább látható módon.</span><span class="sxs-lookup"><span data-stu-id="548ca-312">Run `azbb` as shown below to deploy the on-premises server.</span></span>

    ```bash
    azbb -s <subscription_id> -g <resource_group_name> -l <region> -p onprem.parameters.json --deploy
    ```

    <span data-ttu-id="548ca-313">Adja meg, amely támogatja az SQL-adatraktár és az Azure Analysis Services egy régiót.</span><span class="sxs-lookup"><span data-stu-id="548ca-313">Specify a region that supports SQL Data Warehouse and Azure Analysis Services.</span></span> <span data-ttu-id="548ca-314">Lásd: [régiónként Azure termékek](https://azure.microsoft.com/global-infrastructure/services/)</span><span class="sxs-lookup"><span data-stu-id="548ca-314">See [Azure Products by Region](https://azure.microsoft.com/global-infrastructure/services/)</span></span>

4. <span data-ttu-id="548ca-315">A központi telepítés eltarthat 20-30 percet, mely tartalmazza, hogy fut a [DSC](/powershell/dsc/overview) parancsprogramot, az eszközök telepítése, majd állítsa vissza az adatbázist.</span><span class="sxs-lookup"><span data-stu-id="548ca-315">The deployment may take 20 to 30 minutes to complete, which includes running the [DSC](/powershell/dsc/overview) script to install the tools and restore the database.</span></span> <span data-ttu-id="548ca-316">A központi telepítést, az Azure portálon ellenőrizze az erőforrások az erőforráscsoportban megtekintésével.</span><span class="sxs-lookup"><span data-stu-id="548ca-316">Verify the deployment in the Azure portal by reviewing the resources in the resource group.</span></span> <span data-ttu-id="548ca-317">Megjelenik a `sql-vm1` virtuális gép és a kapcsolódó erőforrások.</span><span class="sxs-lookup"><span data-stu-id="548ca-317">You should see the `sql-vm1` virtual machine and its associated resources.</span></span>

### <a name="deploy-the-azure-resources"></a><span data-ttu-id="548ca-318">Az Azure-erőforrások telepítése</span><span class="sxs-lookup"><span data-stu-id="548ca-318">Deploy the Azure resources</span></span>

<span data-ttu-id="548ca-319">Ebben a lépésben látja el az SQL Data Warehouse és az Azure Analysis Services, és a Storage-fiók.</span><span class="sxs-lookup"><span data-stu-id="548ca-319">This step provisions SQL Data Warehouse and Azure Analysis Services, along with a Storage account.</span></span> <span data-ttu-id="548ca-320">Ha azt szeretné, ebben a lépésben az előző lépés párhuzamosan is futtathatja.</span><span class="sxs-lookup"><span data-stu-id="548ca-320">If you want, you can run this step in parallel with the previous step.</span></span>

1. <span data-ttu-id="548ca-321">Keresse meg a `data\enterprise_bi_sqldw\azure\templates` a tárház mappát.</span><span class="sxs-lookup"><span data-stu-id="548ca-321">Navigate to the `data\enterprise_bi_sqldw\azure\templates` folder of the repository.</span></span>

2. <span data-ttu-id="548ca-322">A következő parancsot az Azure parancssori felület futtatásával hozzon létre egy erőforráscsoportot.</span><span class="sxs-lookup"><span data-stu-id="548ca-322">Run the following Azure CLI command to create a resource group.</span></span> <span data-ttu-id="548ca-323">Egy másik erőforráscsoportban található, mint az előző lépésben telepíteni, de válassza ki az ugyanabban a régióban.</span><span class="sxs-lookup"><span data-stu-id="548ca-323">You can deploy to a different resource group than the previous step, but choose the same region.</span></span> 

    ```bash
    az group create --name <resource_group_name> --location <region>  
    ```

3. <span data-ttu-id="548ca-324">A következő parancsot az Azure parancssori felület telepítése az Azure-erőforrások.</span><span class="sxs-lookup"><span data-stu-id="548ca-324">Run the following Azure CLI command to deploy the Azure resources.</span></span> <span data-ttu-id="548ca-325">Cserélje le a paraméterértékeket csúcsos zárójelek látható.</span><span class="sxs-lookup"><span data-stu-id="548ca-325">Replace the parameter values shown in angle brackets.</span></span> 

    ```bash
    az group deployment create --resource-group <resource_group_name> \
     --template-file azure-resources-deploy.json \
     --parameters "dwServerName"="<server_name>" \
     "dwAdminLogin"="<admin_username>" "dwAdminPassword"="<password>" \ 
     "storageAccountName"="<storage_account_name>" \
     "analysisServerName"="<analysis_server_name>" \
     "analysisServerAdmin"="user@contoso.com"
    ```

    - <span data-ttu-id="548ca-326">A `storageAccountName` paraméter kell követnie a [elnevezési szabályait](../../best-practices/naming-conventions.md#naming-rules-and-restrictions) Storage-fiókok.</span><span class="sxs-lookup"><span data-stu-id="548ca-326">The `storageAccountName` parameter must follow the [naming rules](../../best-practices/naming-conventions.md#naming-rules-and-restrictions) for Storage accounts.</span></span>
    - <span data-ttu-id="548ca-327">Az a `analysisServerAdmin` paraméter, használja az Azure Active Directory egyszerű felhasználónév (UPN).</span><span class="sxs-lookup"><span data-stu-id="548ca-327">For the `analysisServerAdmin` parameter, use your Azure Active Directory user principal name (UPN).</span></span>

4. <span data-ttu-id="548ca-328">A központi telepítést, az Azure portálon ellenőrizze az erőforrások az erőforráscsoportban megtekintésével.</span><span class="sxs-lookup"><span data-stu-id="548ca-328">Verify the deployment in the Azure portal by reviewing the resources in the resource group.</span></span> <span data-ttu-id="548ca-329">Meg kell jelennie egy tárfiókot, Azure SQL Data Warehouse-példányokhoz és Analysis Services-példányon.</span><span class="sxs-lookup"><span data-stu-id="548ca-329">You should see a storage account, Azure SQL Data Warehouse instance, and Analysis Services instance.</span></span>

5. <span data-ttu-id="548ca-330">Az Azure portál segítségével a tárfiók elérési kulcsának lekérése.</span><span class="sxs-lookup"><span data-stu-id="548ca-330">Use the Azure portal to get the access key for the storage account.</span></span> <span data-ttu-id="548ca-331">A megnyitáshoz válassza ki a tárfiókot.</span><span class="sxs-lookup"><span data-stu-id="548ca-331">Select the storage account to open it.</span></span> <span data-ttu-id="548ca-332">A **Beállítások** területen válassza a **Hozzáférési kulcsok** elemet.</span><span class="sxs-lookup"><span data-stu-id="548ca-332">Under **Settings**, select **Access keys**.</span></span> <span data-ttu-id="548ca-333">További tudnivalók a Azure építőelemeket.</span><span class="sxs-lookup"><span data-stu-id="548ca-333">Copy the primary key value.</span></span> <span data-ttu-id="548ca-334">A következő lépésben még szüksége lesz rájuk.</span><span class="sxs-lookup"><span data-stu-id="548ca-334">You will use it in the next step.</span></span>

### <a name="export-the-source-data-to-azure-blob-storage"></a><span data-ttu-id="548ca-335">Az adatok exportálása az Azure Blob storage</span><span class="sxs-lookup"><span data-stu-id="548ca-335">Export the source data to Azure Blob storage</span></span> 

<span data-ttu-id="548ca-336">Ebben a lépésben futtatja egy PowerShell-parancsfájlt, amely a bcp segítségével exportál az SQL-adatbázis egybesimított fájlokba, a virtuális Gépre, és az AzCopy segítségével ezeket a fájlokat az Azure Blob Storage másolhatja.</span><span class="sxs-lookup"><span data-stu-id="548ca-336">In this step, you will run a PowerShell script that uses bcp to export the SQL database to flat files on the VM, and then uses AzCopy to copy those files into Azure Blob Storage.</span></span>

1. <span data-ttu-id="548ca-337">A távoli asztal segítségével csatlakoztassa a szimulált helyszíni virtuális Gépet.</span><span class="sxs-lookup"><span data-stu-id="548ca-337">Use Remote Desktop to connect to the simulated on-premises VM.</span></span>

2. <span data-ttu-id="548ca-338">Jelentkezzen be a virtuális gép, a következő parancsokat a PowerShell-ablakban.</span><span class="sxs-lookup"><span data-stu-id="548ca-338">While logged into the VM, run the following commands from a PowerShell window.</span></span>  

    ```powershell
    cd 'C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\onprem'

    .\Load_SourceData_To_Blob.ps1 -File .\sql_scripts\db_objects.txt -Destination 'https://<storage_account_name>.blob.core.windows.net/wwi' -StorageAccountKey '<storage_account_key>'
    ```

    <span data-ttu-id="548ca-339">Az a `Destination` paraméter, cserélje le `<storage_account_name>` nevű a korábban létrehozott tárfiókot.</span><span class="sxs-lookup"><span data-stu-id="548ca-339">For the `Destination` parameter, replace `<storage_account_name>` with the name the Storage account that you created previously.</span></span> <span data-ttu-id="548ca-340">Az a `StorageAccountKey` paraméter, a hozzáférési kulcsot a tárfiók használja.</span><span class="sxs-lookup"><span data-stu-id="548ca-340">For the `StorageAccountKey` parameter, use the access key for that Storage account.</span></span>

3. <span data-ttu-id="548ca-341">Az Azure portálon győződjön meg arról, hogy az adatok másolja a Blob storage lépjen a tárfiókhoz, a Blob szolgáltatás kiválasztásával, és az megnyitása a `wwi` tároló.</span><span class="sxs-lookup"><span data-stu-id="548ca-341">In the Azure portal, verify that the source data was copied to Blob storage by navigating to the storage account, selecting the Blob service, and opening the `wwi` container.</span></span> <span data-ttu-id="548ca-342">Végrehajtásával kerüli meg a táblák listáját kell megjelennie `WorldWideImporters_Application_*`.</span><span class="sxs-lookup"><span data-stu-id="548ca-342">You should see a list of tables prefaced with `WorldWideImporters_Application_*`.</span></span>

### <a name="run-the-data-warehouse-scripts"></a><span data-ttu-id="548ca-343">A data warehouse parancsfájlok futtatása</span><span class="sxs-lookup"><span data-stu-id="548ca-343">Run the data warehouse scripts</span></span>

1. <span data-ttu-id="548ca-344">A távoli asztali munkamenetből indítsa el az SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="548ca-344">From your Remote Desktop session, launch SQL Server Management Studio (SSMS).</span></span> 

2. <span data-ttu-id="548ca-345">Connect to SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="548ca-345">Connect to SQL Data Warehouse</span></span>

    - <span data-ttu-id="548ca-346">Kiszolgáló típusa: adatbázis-kezelő</span><span class="sxs-lookup"><span data-stu-id="548ca-346">Server type: Database Engine</span></span>
    
    - <span data-ttu-id="548ca-347">Kiszolgáló neve: `<dwServerName>.database.windows.net`, ahol `<dwServerName>` amikor központilag telepítette az Azure-erőforrások megadott név.</span><span class="sxs-lookup"><span data-stu-id="548ca-347">Server name: `<dwServerName>.database.windows.net`, where `<dwServerName>` is the name that you specified when you deployed the Azure resources.</span></span> <span data-ttu-id="548ca-348">Ez a név lekérheti az Azure-portálon.</span><span class="sxs-lookup"><span data-stu-id="548ca-348">You can get this name from the Azure portal.</span></span>
    
    - <span data-ttu-id="548ca-349">Hitelesítési: SQL Server-hitelesítést.</span><span class="sxs-lookup"><span data-stu-id="548ca-349">Authentication: SQL Server Authentication.</span></span> <span data-ttu-id="548ca-350">Amikor központilag telepítette az Azure-erőforrások, a megadott hitelesítő adatokat használja a `dwAdminLogin` és `dwAdminPassword` paraméterek.</span><span class="sxs-lookup"><span data-stu-id="548ca-350">Use the credentials that you specified when you deployed the Azure resources, in the `dwAdminLogin` and `dwAdminPassword` parameters.</span></span>

2. <span data-ttu-id="548ca-351">Keresse meg a `C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\azure\sqldw_scripts` mappa a virtuális Gépen.</span><span class="sxs-lookup"><span data-stu-id="548ca-351">Navigate to the `C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\azure\sqldw_scripts` folder on the VM.</span></span> <span data-ttu-id="548ca-352">Ebben a mappában számsorrendben, végrehajtja a a parancsfájlok `STEP_1` keresztül `STEP_7`.</span><span class="sxs-lookup"><span data-stu-id="548ca-352">You will execute the scripts in this folder in numerical order, `STEP_1` through `STEP_7`.</span></span>

3. <span data-ttu-id="548ca-353">Válassza ki a `master` adatbázisban az SSMS és nyissa meg a `STEP_1` parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="548ca-353">Select the `master` database in SSMS and open the `STEP_1` script.</span></span> <span data-ttu-id="548ca-354">Módosítsa az értéket a következő sort a jelszót, majd futtassa a parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="548ca-354">Change the value of the password in the following line, then execute the script.</span></span>

    ```sql
    CREATE LOGIN LoaderRC20 WITH PASSWORD = '<change this value>';
    ```

4. <span data-ttu-id="548ca-355">Válassza ki a `wwi` adatbázisban az SSMS.</span><span class="sxs-lookup"><span data-stu-id="548ca-355">Select the `wwi` database in SSMS.</span></span> <span data-ttu-id="548ca-356">Nyissa meg a `STEP_2` parancsfájlt, és futtassa a parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="548ca-356">Open the `STEP_2` script and execute the script.</span></span> <span data-ttu-id="548ca-357">Ha hibaüzenetet kap, győződjön meg arról, szemben a parancsfájlt futtatja a `wwi` adatbázis, és nem `master`.</span><span class="sxs-lookup"><span data-stu-id="548ca-357">If you get an error, make sure you are running the script against the `wwi` database and not `master`.</span></span>

5. <span data-ttu-id="548ca-358">Az SQL Data Warehouse egy új kapcsolat megnyitásához használja a `LoaderRC20` felhasználói és a jelszót a `STEP_1` parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="548ca-358">Open a new connection to SQL Data Warehouse, using the `LoaderRC20` user and the password indicated in the `STEP_1` script.</span></span>

6. <span data-ttu-id="548ca-359">Ezt a kapcsolatot, nyissa meg a `STEP_3` parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="548ca-359">Using this connection, open the `STEP_3` script.</span></span> <span data-ttu-id="548ca-360">A parancsfájlban állítsa be a következő értékeket:</span><span class="sxs-lookup"><span data-stu-id="548ca-360">Set the following values in the script:</span></span>

    - <span data-ttu-id="548ca-361">Titkos kulcs: A hozzáférési kulcsot a tárfiók használja.</span><span class="sxs-lookup"><span data-stu-id="548ca-361">SECRET: Use the access key for your storage account.</span></span>
    - <span data-ttu-id="548ca-362">HELYE: A tárfiók nevét használja az alábbiak szerint: `wasbs://wwi@<storage_account_name>.blob.core.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="548ca-362">LOCATION: Use the name of the storage account as follows: `wasbs://wwi@<storage_account_name>.blob.core.windows.net`.</span></span>

7. <span data-ttu-id="548ca-363">Az azonos kapcsolaton keresztül végrehajtani a parancsfájlok `STEP_4` keresztül `STEP_7` egymás után.</span><span class="sxs-lookup"><span data-stu-id="548ca-363">Using the same connection, execute scripts `STEP_4` through `STEP_7` sequentially.</span></span> <span data-ttu-id="548ca-364">Győződjön meg arról, hogy minden parancsprogram a következő futtatása előtt sikeresen befejeződik.</span><span class="sxs-lookup"><span data-stu-id="548ca-364">Verify that each script completes successfully before running the next.</span></span>

<span data-ttu-id="548ca-365">A SMSS, megjelenik egy `prd.*` a táblázatot a `wwi` adatbázis.</span><span class="sxs-lookup"><span data-stu-id="548ca-365">In SMSS, you should see a set of `prd.*` tables in the `wwi` database.</span></span> <span data-ttu-id="548ca-366">A következő lekérdezés futtatásával ellenőrizheti, hogy létrejött-e az adatok:</span><span class="sxs-lookup"><span data-stu-id="548ca-366">To verify that the data was generated, run the following query:</span></span> 

```sql
SELECT TOP 10 * FROM prd.CityDimensions
```

## <a name="build-the-analysis-services-model"></a><span data-ttu-id="548ca-367">Az Analysis Services-modell létrehozása</span><span class="sxs-lookup"><span data-stu-id="548ca-367">Build the Analysis Services model</span></span>

<span data-ttu-id="548ca-368">Ebben a lépésben létrehoz egy táblázatos modell, amellyel különféle adatok, az adatraktárból.</span><span class="sxs-lookup"><span data-stu-id="548ca-368">In this step, you will create a tabular model that imports data from the data warehouse.</span></span> <span data-ttu-id="548ca-369">A modell telepíti majd Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="548ca-369">Then you will deploy the model to Azure Analysis Services.</span></span>

1. <span data-ttu-id="548ca-370">A távoli asztali munkamenetből indítsa el az SQL Server Data Tools 2015.</span><span class="sxs-lookup"><span data-stu-id="548ca-370">From your Remote Desktop session, launch SQL Server Data Tools 2015.</span></span>

2. <span data-ttu-id="548ca-371">Válassza a **File** (Fájl) > **New** (Új) > **Project** (Projekt) lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="548ca-371">Select **File** > **New** > **Project**.</span></span>

3. <span data-ttu-id="548ca-372">Az a **új projekt** párbeszédpanelen, a **sablonok**, jelölje be **üzleti intelligencia** > **Analysis Services**  >  **Analysis Services táblázatos projekt**.</span><span class="sxs-lookup"><span data-stu-id="548ca-372">In the **New Project** dialog, under **Templates**, select  **Business Intelligence** > **Analysis Services** > **Analysis Services Tabular Project**.</span></span> 

4. <span data-ttu-id="548ca-373">Nevet a projektnek, és kattintson a **OK**.</span><span class="sxs-lookup"><span data-stu-id="548ca-373">Name the project and click **OK**.</span></span>

5. <span data-ttu-id="548ca-374">A a **táblázatos modellek tervezőjében** párbeszédablakban válassza **integrált munkaterület** és **kompatibilitási szintje** való `SQL Server 2017 / Azure Analysis Services (1400)`.</span><span class="sxs-lookup"><span data-stu-id="548ca-374">In the **Tabular model designer** dialog, select **Integrated workspace**  and set **Compatibility level** to `SQL Server 2017 / Azure Analysis Services (1400)`.</span></span> <span data-ttu-id="548ca-375">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="548ca-375">Click **OK**.</span></span>

6. <span data-ttu-id="548ca-376">Az a **táblázatos modell Explorer** ablak, kattintson jobb gombbal a projektre, és válassza ki **importálás az adatforrás**.</span><span class="sxs-lookup"><span data-stu-id="548ca-376">In the **Tabular Model Explorer** window, right-click the project and select **Import from Data Source**.</span></span>

7. <span data-ttu-id="548ca-377">Válassza ki **Azure SQL Data Warehouse** kattintson **Connect**.</span><span class="sxs-lookup"><span data-stu-id="548ca-377">Select **Azure SQL Data Warehouse** and click **Connect**.</span></span>

8. <span data-ttu-id="548ca-378">A **Server**, adja meg az Azure SQL Data Warehouse kiszolgáló teljesen minősített neve.</span><span class="sxs-lookup"><span data-stu-id="548ca-378">For **Server**, enter the fully qualified name of your Azure SQL Data Warehouse server.</span></span> <span data-ttu-id="548ca-379">A **adatbázis**, adja meg `wwi`.</span><span class="sxs-lookup"><span data-stu-id="548ca-379">For **Database**, enter `wwi`.</span></span> <span data-ttu-id="548ca-380">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="548ca-380">Click **OK**.</span></span>

9. <span data-ttu-id="548ca-381">A következő párbeszédpanelen válassza ki a **adatbázis** hitelesítés és az Azure SQL Data Warehouse-felhasználónevet és jelszót adjon meg, és kattintson a **OK**.</span><span class="sxs-lookup"><span data-stu-id="548ca-381">In the next dialog, choose **Database** authentication and enter your Azure SQL Data Warehouse user name and password, and click **OK**.</span></span>

10. <span data-ttu-id="548ca-382">Az a **Navigator** párbeszédpanelen jelölje be a jelölőnégyzeteket **prd. CityDimensions**, **prd. DateDimensions**, és **prd. SalesFact**.</span><span class="sxs-lookup"><span data-stu-id="548ca-382">In the **Navigator** dialog, select the checkboxes for **prd.CityDimensions**, **prd.DateDimensions**, and **prd.SalesFact**.</span></span> 

    ![](./images/analysis-services-import.png)

11. <span data-ttu-id="548ca-383">Kattintson a **terhelés**.</span><span class="sxs-lookup"><span data-stu-id="548ca-383">Click **Load**.</span></span> <span data-ttu-id="548ca-384">Ha feldolgozása befejeződött, kattintson a **Bezárás**.</span><span class="sxs-lookup"><span data-stu-id="548ca-384">When processing is complete, click **Close**.</span></span> <span data-ttu-id="548ca-385">Meg kell jelennie az adatok táblázatos nézetben.</span><span class="sxs-lookup"><span data-stu-id="548ca-385">You should now see a tabular view of the data.</span></span>

12. <span data-ttu-id="548ca-386">Az a **táblázatos modell Explorer** ablak, kattintson jobb gombbal a projektre, és válassza ki **modell nézet** > **diagramnézet**.</span><span class="sxs-lookup"><span data-stu-id="548ca-386">In the **Tabular Model Explorer** window, right-click the project and select **Model View** > **Diagram View**.</span></span>

13. <span data-ttu-id="548ca-387">Húzza a **[prd. SalesFact]. [Város WWI azonosítója]**  mezőről az **[prd. CityDimensions]. [Város WWI azonosítója]**  mező közötti kapcsolat kialakításához.</span><span class="sxs-lookup"><span data-stu-id="548ca-387">Drag the **[prd.SalesFact].[WWI City ID]** field to the **[prd.CityDimensions].[WWI City ID]** field to create a relationship.</span></span>  

14. <span data-ttu-id="548ca-388">Húzza a **[prd. SalesFact]. [Számlán dátum kulcs]**  mezőről az **[prd. DateDimensions]. [Dátum]**  mező.</span><span class="sxs-lookup"><span data-stu-id="548ca-388">Drag the **[prd.SalesFact].[Invoice Date Key]** field to the **[prd.DateDimensions].[Date]** field.</span></span>  
    ![](./images/analysis-services-relations.png)

15. <span data-ttu-id="548ca-389">Az a **fájl** menüben válasszon **összes mentése**.</span><span class="sxs-lookup"><span data-stu-id="548ca-389">From the **File** menu, choose **Save All**.</span></span>  

16. <span data-ttu-id="548ca-390">A **Megoldáskezelőben**, kattintson jobb gombbal a projektre, és válassza ki **tulajdonságok**.</span><span class="sxs-lookup"><span data-stu-id="548ca-390">In **Solution Explorer**, right-click the project and select **Properties**.</span></span> 

17. <span data-ttu-id="548ca-391">A **Server**, adja meg az Azure Analysis Services-példány URL-CÍMÉT.</span><span class="sxs-lookup"><span data-stu-id="548ca-391">Under **Server**, enter the URL of your Azure Analysis Services instance.</span></span> <span data-ttu-id="548ca-392">Ez az érték lekérheti az Azure portálon.</span><span class="sxs-lookup"><span data-stu-id="548ca-392">You can get this value from the Azure Portal.</span></span> <span data-ttu-id="548ca-393">A portálon, válassza ki az Analysis Services-erőforrást, az Áttekintés ablaktábláján kattintson, és keresse meg a **kiszolgálónév** tulajdonság.</span><span class="sxs-lookup"><span data-stu-id="548ca-393">In the portal, select the Analysis Services resource, click the Overview pane, and look for the **Server Name** property.</span></span> <span data-ttu-id="548ca-394">Hasonló lesz `asazure://westus.asazure.windows.net/contoso`.</span><span class="sxs-lookup"><span data-stu-id="548ca-394">It will be similar to `asazure://westus.asazure.windows.net/contoso`.</span></span> <span data-ttu-id="548ca-395">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="548ca-395">Click **OK**.</span></span>

    ![](./images/analysis-services-properties.png)

18. <span data-ttu-id="548ca-396">A **Megoldáskezelőben**, kattintson jobb gombbal a projektre, és válassza ki **telepítés**.</span><span class="sxs-lookup"><span data-stu-id="548ca-396">In **Solution Explorer**, right-click the project and select **Deploy**.</span></span> <span data-ttu-id="548ca-397">Ha a rendszer kéri, jelentkezzen be Azure.</span><span class="sxs-lookup"><span data-stu-id="548ca-397">Sign into Azure if prompted.</span></span> <span data-ttu-id="548ca-398">Ha feldolgozása befejeződött, kattintson a **Bezárás**.</span><span class="sxs-lookup"><span data-stu-id="548ca-398">When processing is complete, click **Close**.</span></span>

19. <span data-ttu-id="548ca-399">Az Azure-portálon az Azure Analysis Services-példány részletes adatainak megtekintése.</span><span class="sxs-lookup"><span data-stu-id="548ca-399">In the Azure portal, view the details for your Azure Analysis Services instance.</span></span> <span data-ttu-id="548ca-400">Győződjön meg arról, hogy a modell megjelenik-e a modellek listája.</span><span class="sxs-lookup"><span data-stu-id="548ca-400">Verify that your model appears in the list of models.</span></span>

    ![](./images/analysis-services-models.png)

## <a name="analyze-the-data-in-power-bi-desktop"></a><span data-ttu-id="548ca-401">A Power BI Desktop adatok elemzése</span><span class="sxs-lookup"><span data-stu-id="548ca-401">Analyze the data in Power BI Desktop</span></span>

<span data-ttu-id="548ca-402">Ebben a lépésben szüksége lesz az Power BI-jelentés létrehozása az Analysis Services az adatokból.</span><span class="sxs-lookup"><span data-stu-id="548ca-402">In this step, you will use Power BI to create a report from the data in Analysis Services.</span></span>

1. <span data-ttu-id="548ca-403">A távoli asztali munkamenetből indítsa el a Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="548ca-403">From your Remote Desktop session, launch Power BI Desktop.</span></span>

2. <span data-ttu-id="548ca-404">Kattintson az üdvözlő Scren **adatok beolvasása**.</span><span class="sxs-lookup"><span data-stu-id="548ca-404">In the Welcome Scren, click **Get Data**.</span></span>

3. <span data-ttu-id="548ca-405">Válassza ki **Azure** > **Azure Analysis Services-adatbázis**.</span><span class="sxs-lookup"><span data-stu-id="548ca-405">Select **Azure** > **Azure Analysis Services database**.</span></span> <span data-ttu-id="548ca-406">Kattintson a **csatlakozás**</span><span class="sxs-lookup"><span data-stu-id="548ca-406">Click **Connect**</span></span>

    ![](./images/power-bi-get-data.png)

4. <span data-ttu-id="548ca-407">Adja meg az Analysis Services-példány URL-CÍMÉT, majd kattintson a **OK**.</span><span class="sxs-lookup"><span data-stu-id="548ca-407">Enter the URL of your Analysis Services instance, then click **OK**.</span></span> <span data-ttu-id="548ca-408">Ha a rendszer kéri, jelentkezzen be Azure.</span><span class="sxs-lookup"><span data-stu-id="548ca-408">Sign into Azure if prompted.</span></span>

5. <span data-ttu-id="548ca-409">Az a **Navigator** párbeszédpanelen bontsa ki a központilag telepített táblázatos projektet, válassza ki a létrehozott, és kattintson a modell **OK**.</span><span class="sxs-lookup"><span data-stu-id="548ca-409">In the **Navigator** dialog, expand the tabular project that you deployed, select the model that you created, and click **OK**.</span></span>

2. <span data-ttu-id="548ca-410">Az a **képi megjelenítések** ablaktáblán válassza előbb a **halmozott sáv diagrammá** ikonra.</span><span class="sxs-lookup"><span data-stu-id="548ca-410">In the **Visualizations** pane, select the **Stacked Bar Chart** icon.</span></span> <span data-ttu-id="548ca-411">A jelentés nézetben a képi megjelenítés abba, hogy nagyobb átméretezése.</span><span class="sxs-lookup"><span data-stu-id="548ca-411">In the Report view, resize the visualization to make it larger.</span></span>

6. <span data-ttu-id="548ca-412">Az a **mezők** ablaktáblában bontsa ki a **prd. CityDimensions**.</span><span class="sxs-lookup"><span data-stu-id="548ca-412">In the **Fields** pane, expand **prd.CityDimensions**.</span></span>

7. <span data-ttu-id="548ca-413">A csomóponthúzási **prd. CityDimensions** > **WWI város azonosító** számára a **tengely** is.</span><span class="sxs-lookup"><span data-stu-id="548ca-413">Drag **prd.CityDimensions** > **WWI City ID** to the **Axis** well.</span></span>

8. <span data-ttu-id="548ca-414">A csomóponthúzási **prd. CityDimensions** > **Város** számára a **jelmagyarázat** is.</span><span class="sxs-lookup"><span data-stu-id="548ca-414">Drag **prd.CityDimensions** > **City** to the **Legend** well.</span></span>

9. <span data-ttu-id="548ca-415">Az a **mezők** ablaktáblában bontsa ki a **prd. SalesFact**.</span><span class="sxs-lookup"><span data-stu-id="548ca-415">In the **Fields** pane, expand **prd.SalesFact**.</span></span>

10. <span data-ttu-id="548ca-416">A csomóponthúzási **prd. SalesFact** > **kivételével adó** számára a **érték** is.</span><span class="sxs-lookup"><span data-stu-id="548ca-416">Drag **prd.SalesFact** > **Total Excluding Tax** to the **Value** well.</span></span>

    ![](./images/power-bi-visualization.png)

11. <span data-ttu-id="548ca-417">A **Visual szint szűrők**, jelölje be **WWI város azonosító**.</span><span class="sxs-lookup"><span data-stu-id="548ca-417">Under **Visual Level Filters**, select **WWI City ID**.</span></span>

12. <span data-ttu-id="548ca-418">Állítsa be a **szűrőtípus** való `Top N`, és állítsa be **elemek megjelenítése** való `Top 10`.</span><span class="sxs-lookup"><span data-stu-id="548ca-418">Set the **Filter Type** to `Top N`, and set **Show Items** to `Top 10`.</span></span>

13. <span data-ttu-id="548ca-419">A csomóponthúzási **prd. SalesFact** > **kivételével adó** számára a **által érték** is</span><span class="sxs-lookup"><span data-stu-id="548ca-419">Drag **prd.SalesFact** > **Total Excluding Tax** to the **By Value** well</span></span>

    ![](./images/power-bi-visualization2.png)

14. <span data-ttu-id="548ca-420">Kattintson a **szűrőt**.</span><span class="sxs-lookup"><span data-stu-id="548ca-420">Click **Apply Filter**.</span></span> <span data-ttu-id="548ca-421">A képi megjelenítés a felső 10 összes értékesítés városonként jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="548ca-421">The visualization shows the top 10 total sales by city.</span></span>

    ![](./images/power-bi-report.png)

<span data-ttu-id="548ca-422">A Power BI Desktop kapcsolatos további információkért lásd: [első lépések a Power BI Desktop](/power-bi/desktop-getting-started).</span><span class="sxs-lookup"><span data-stu-id="548ca-422">To learn more about Power BI Desktop, see [Getting started with Power BI Desktop](/power-bi/desktop-getting-started).</span></span>

## <a name="next-steps"></a><span data-ttu-id="548ca-423">További lépések</span><span class="sxs-lookup"><span data-stu-id="548ca-423">Next steps</span></span>

- <span data-ttu-id="548ca-424">A referencia-architektúrában kapcsolatos további információkért látogasson el a [GitHub-tárházban][ref-arch-repo-folder].</span><span class="sxs-lookup"><span data-stu-id="548ca-424">For more information about this reference architecture, visit our [GitHub repository][ref-arch-repo-folder].</span></span>
- <span data-ttu-id="548ca-425">További tudnivalók a [Azure építőelemeket][azbb-repo].</span><span class="sxs-lookup"><span data-stu-id="548ca-425">Learn about the [Azure Building Blocks][azbb-repo].</span></span>

<!-- links -->

[azure-cli-2]: /azure/install-azure-cli
[azbb-repo]: https://github.com/mspnp/template-building-blocks
[azbb-wiki]: https://github.com/mspnp/template-building-blocks/wiki/Install-Azure-Building-Blocks
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/data/enterprise_bi_sqldw
[ref-arch-repo]: https://github.com/mspnp/reference-architectures
[ref-arch-repo-folder]: https://github.com/mspnp/reference-architectures/tree/master/data/enterprise_bi_sqldw
[wwi]: /sql/sample/world-wide-importers/wide-world-importers-oltp-database
