---
title: Jenkins-kiszolgáló futtatása az Azure-on
titleSuffix: Azure Reference Architectures
description: Ajánlott architektúra, amely egy egyszeri bejelentkezéssel (SSO) biztosított, skálázható, nagyvállalati szintű Jenkins-kiszolgáló üzembe helyezését és üzemeltetését mutatja be az Azure-on.
author: njray
ms.date: 04/30/2018
ms.topic: reference-architecture
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seodec18
ms.openlocfilehash: 2717b3b11f0315b698d43d067b30472481ffa527
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 01/23/2019
ms.locfileid: "54483428"
---
# <a name="run-a-jenkins-server-on-azure"></a><span data-ttu-id="221de-103">Jenkins-kiszolgáló futtatása az Azure-on</span><span class="sxs-lookup"><span data-stu-id="221de-103">Run a Jenkins server on Azure</span></span>

<span data-ttu-id="221de-104">Ez a referenciaarchitektúra egy egyszeri bejelentkezéssel (SSO) biztosított, skálázható, nagyvállalati szintű Jenkins-kiszolgáló üzembe helyezését és üzemeltetését mutatja be az Azure-on.</span><span class="sxs-lookup"><span data-stu-id="221de-104">This reference architecture shows how to deploy and operate a scalable, enterprise-grade Jenkins server on Azure secured with single sign-on (SSO).</span></span> <span data-ttu-id="221de-105">Az architektúra emellett az Azure Monitor használatával monitorozza a Jenkins-kiszolgáló állapotát.</span><span class="sxs-lookup"><span data-stu-id="221de-105">The architecture also uses Azure Monitor to monitor the state of the Jenkins server.</span></span> <span data-ttu-id="221de-106">[**A megoldás üzembe helyezése.**](#deploy-the-solution)</span><span class="sxs-lookup"><span data-stu-id="221de-106">[**Deploy this solution**](#deploy-the-solution).</span></span>

![Az Azure-ban futó Jenkins-kiszolgáló][0]

<span data-ttu-id="221de-108">*Töltse le az architektúra ábráját tartalmazó [Visio-fájlt](https://archcenter.blob.core.windows.net/cdn/Jenkins-architecture.vsdx).*</span><span class="sxs-lookup"><span data-stu-id="221de-108">*Download a [Visio file](https://archcenter.blob.core.windows.net/cdn/Jenkins-architecture.vsdx) that contains this architecture diagram.*</span></span>

<span data-ttu-id="221de-109">Az architektúra támogatja a vészhelyreállítást az Azure-szolgáltatásokkal, több főkiszolgálót vagy állásidő nélküli magas rendelkezésre állást (HA) megvalósító fejlettebb felskálázási forgatókönyveket azonban nem tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="221de-109">This architecture supports disaster recovery with Azure services but does not cover more advanced scale-out scenarios involving multiple masters or high availability (HA) with no downtime.</span></span> <span data-ttu-id="221de-110">A különféle Azure-összetevőkkel kapcsolatos általános információkért, többek között a CI-/CD-folyamatok az Azure-on való kiépítésének részletes leírásáért lásd: [Jenkins az Azure-on][jenkins-on-azure].</span><span class="sxs-lookup"><span data-stu-id="221de-110">For general insights about the various Azure components, including a step-by-step tutorial about building out a CI/CD pipeline on Azure, see [Jenkins on Azure][jenkins-on-azure].</span></span>

<span data-ttu-id="221de-111">Ez a dokumentum a Jenkins támogatásához szükséges alapvető Azure-műveletekkel foglalkozik. Ilyen például a build-összetevők karbantartása az Azure Storage tárolók használatával, az egyszeri bejelentkezéshez szükséges biztonsági elemek, az egyéb integrálható szolgáltatások, valamint a folyamat skálázhatósága.</span><span class="sxs-lookup"><span data-stu-id="221de-111">The focus of this document is on the core Azure operations needed to support Jenkins, including the use of Azure Storage to maintain build artifacts, the security items needed for SSO, other services that can be integrated, and scalability for the pipeline.</span></span> <span data-ttu-id="221de-112">Az architektúra úgy van kialakítva, hogy meglévő forráskezelési adattárakkal is használható legyen.</span><span class="sxs-lookup"><span data-stu-id="221de-112">The architecture is designed to work with an existing source control repository.</span></span> <span data-ttu-id="221de-113">Gyakori forgatókönyv például a Jenkins-feladatok GitHub-véglegesítéseken alapuló indítása.</span><span class="sxs-lookup"><span data-stu-id="221de-113">For example, a common scenario is to start Jenkins jobs based on GitHub commits.</span></span>

## <a name="architecture"></a><span data-ttu-id="221de-114">Architektúra</span><span class="sxs-lookup"><span data-stu-id="221de-114">Architecture</span></span>

<span data-ttu-id="221de-115">Az architektúra az alábbi összetevőkből áll:</span><span class="sxs-lookup"><span data-stu-id="221de-115">The architecture consists of the following components:</span></span>

- <span data-ttu-id="221de-116">**Erőforráscsoport**.</span><span class="sxs-lookup"><span data-stu-id="221de-116">**Resource group**.</span></span> <span data-ttu-id="221de-117">Az [erőforráscsoportok][rg] Azure-objektumok csoportosítására használhatók, így élettartamuk, tulajdonosuk vagy egyéb jellemzőik alapján kezelhetők.</span><span class="sxs-lookup"><span data-stu-id="221de-117">A [resource group][rg] is used to group Azure assets so they can be managed by lifetime, owner, and other criteria.</span></span> <span data-ttu-id="221de-118">Az erőforráscsoportok segítségével csoportosan helyezhet üzembe és monitorozhat Azure-objektumokat, a számlázási költségeket pedig erőforráscsoportonként tarthatja számon.</span><span class="sxs-lookup"><span data-stu-id="221de-118">Use resource groups to deploy and monitor Azure assets as a group and track billing costs by resource group.</span></span> <span data-ttu-id="221de-119">Az erőforrásokat törölheti is készletenként. Ez nagyon hasznos tesztkörnyezetek esetében.</span><span class="sxs-lookup"><span data-stu-id="221de-119">You can also delete resources as a set, which is very useful for test deployments.</span></span>

- <span data-ttu-id="221de-120">**Jenkins-kiszolgáló**.</span><span class="sxs-lookup"><span data-stu-id="221de-120">**Jenkins server**.</span></span> <span data-ttu-id="221de-121">Egy, a [Jenkins][azure-market] automatizáló kiszolgálóként való futtatására üzembe helyezett virtuális gép, amely Jenkins-főkiszolgálóként szolgál.</span><span class="sxs-lookup"><span data-stu-id="221de-121">A virtual machine is deployed to run [Jenkins][azure-market] as an automation server and serve as Jenkins Master.</span></span> <span data-ttu-id="221de-122">Ez a referenciaarchitektúra [az Azure-hoz készült Jenkins megoldássablonját][solution] használja, amely egy Linux (Ubuntu 16.04 LTS) rendszerű virtuális gépre van telepítve az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="221de-122">This reference architecture uses the [solution template for Jenkins on Azure][solution], installed on a Linux (Ubuntu 16.04 LTS) virtual machine on Azure.</span></span> <span data-ttu-id="221de-123">Az egyéb Jenkins-ajánlatok az Azure Marketplace áruházban érhetők el.</span><span class="sxs-lookup"><span data-stu-id="221de-123">Other Jenkins offerings are available in the Azure Marketplace.</span></span>

  > [!NOTE]
  > <span data-ttu-id="221de-124">A virtuális gépre telepített Nginx fordított proxyként szolgál a Jenkinshez.</span><span class="sxs-lookup"><span data-stu-id="221de-124">Nginx is installed on the VM to act as a reverse proxy to Jenkins.</span></span> <span data-ttu-id="221de-125">A Nginx konfigurálásával engedélyezhető az SSL a Jenkins-kiszolgáló számára.</span><span class="sxs-lookup"><span data-stu-id="221de-125">You can configure Nginx to enable SSL for the Jenkins server.</span></span>
  >

- <span data-ttu-id="221de-126">**Virtuális hálózat**.</span><span class="sxs-lookup"><span data-stu-id="221de-126">**Virtual network**.</span></span> <span data-ttu-id="221de-127">A [virtuális hálózatok][vnet] összekapcsolják az Azure-erőforrásokat, és biztosítják azok logikai elkülönítését.</span><span class="sxs-lookup"><span data-stu-id="221de-127">A [virtual network][vnet] connects Azure resources to each other and provides logical isolation.</span></span> <span data-ttu-id="221de-128">Ebben az architektúrában a Jenkins-kiszolgáló egy virtuális hálózatban fut.</span><span class="sxs-lookup"><span data-stu-id="221de-128">In this architecture, the Jenkins server runs in a virtual network.</span></span>

- <span data-ttu-id="221de-129">**Alhálózatok**.</span><span class="sxs-lookup"><span data-stu-id="221de-129">**Subnets**.</span></span> <span data-ttu-id="221de-130">A Jenkins-kiszolgáló egy [alhálózatba][subnet] van különítve, így a hálózati forgalom könnyebben felügyelhető és elkülöníthető anélkül, hogy ez befolyásolná a teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="221de-130">The Jenkins server is isolated in a [subnet][subnet] to make it easier to manage and segregate network traffic without impacting performance.</span></span>

- <span data-ttu-id="221de-131">**NSG-k**.</span><span class="sxs-lookup"><span data-stu-id="221de-131">**NSGs**.</span></span> <span data-ttu-id="221de-132">A [hálózati biztonsági csoportok][nsg] (NSG-k) használatával korlátozható az internetről a virtuális hálózat adott alhálózatára irányuló hálózati forgalom.</span><span class="sxs-lookup"><span data-stu-id="221de-132">Use [network security groups][nsg] (NSGs) to restrict network traffic from the Internet to the subnet of a virtual network.</span></span>

- <span data-ttu-id="221de-133">**Felügyelt lemezek**.</span><span class="sxs-lookup"><span data-stu-id="221de-133">**Managed disks**.</span></span> <span data-ttu-id="221de-134">A [felügyelt lemezek][managed-disk] olyan perzisztens virtuális merevlemezek (VHD), amelyek alkalmazástárolóként, valamint a Jenkins-kiszolgáló állapotának fenntartásához és vészhelyreállításhoz használhatók.</span><span class="sxs-lookup"><span data-stu-id="221de-134">A [managed disk][managed-disk] is a persistent virtual hard disk (VHD) used for application storage and also to maintain the state of the Jenkins server and provide disaster recovery.</span></span> <span data-ttu-id="221de-135">Az adatlemezeket az Azure Storage tárolja.</span><span class="sxs-lookup"><span data-stu-id="221de-135">Data disks are stored in Azure Storage.</span></span> <span data-ttu-id="221de-136">A jobb teljesítmény érdekében [Prémium szintű Storage-tárolók][premium] használata ajánlott.</span><span class="sxs-lookup"><span data-stu-id="221de-136">For high performance, [premium storage][premium] is recommended.</span></span>

- <span data-ttu-id="221de-137">**Azure Blob Storage**.</span><span class="sxs-lookup"><span data-stu-id="221de-137">**Azure Blob Storage**.</span></span> <span data-ttu-id="221de-138">A [Microsoft Azure Storage beépülő modul][configure-storage] az Azure Blob Storage segítségével tárolja a létrehozott és más Jenkins-buildekkel megosztott build-összetevőket.</span><span class="sxs-lookup"><span data-stu-id="221de-138">The [Windows Azure Storage plugin][configure-storage] uses Azure Blob Storage to store the build artifacts that are created and shared with other Jenkins builds.</span></span>

- <span data-ttu-id="221de-139">**Azure Active Directory (Azure AD)**.</span><span class="sxs-lookup"><span data-stu-id="221de-139">**Azure Active Directory (Azure AD)**.</span></span> <span data-ttu-id="221de-140">Az [Azure AD][azure-ad] támogatja a felhasználók hitelesítését, így lehetővé teszi az egyszeri bejelentkezés beállítását.</span><span class="sxs-lookup"><span data-stu-id="221de-140">[Azure AD][azure-ad] supports user authentication, allowing you to set up SSO.</span></span> <span data-ttu-id="221de-141">Az Azure AD [szolgáltatásnevei][service-principal] [szerepköralapú hozzáférés-vezérlés][rbac] (RBAC) segítségével határozzák meg a munkafolyamat egyes szerepkör-engedélyezéseire vonatkozó szabályzatokat és engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="221de-141">Azure AD [service principals][service-principal] define the policy and permissions for each role authorization in the workflow, using [role-based access control][rbac] (RBAC).</span></span> <span data-ttu-id="221de-142">Mindegyik egyszerű szolgáltatás társítva van egy Jenkins-feladattal.</span><span class="sxs-lookup"><span data-stu-id="221de-142">Each service principal is associated with a Jenkins job.</span></span>

- <span data-ttu-id="221de-143">**Azure Key Vault**.</span><span class="sxs-lookup"><span data-stu-id="221de-143">**Azure Key Vault**.</span></span> <span data-ttu-id="221de-144">A titkosítást igénylő Azure-erőforrások üzembe helyezéséhez használt titkok és titkosítási kulcsok kezeléséhez ez az architektúra a [Key Vault][key-vault] szolgáltatást használja.</span><span class="sxs-lookup"><span data-stu-id="221de-144">To manage secrets and cryptographic keys used to provision Azure resources when secrets are required, this architecture uses [Key Vault][key-vault].</span></span> <span data-ttu-id="221de-145">A folyamatban foglalt alkalmazással társított titkok tárolásával kapcsolatos további segítségért lásd még a Jenkinshez készült [Azure Credentials][configure-credential] beépülő modult.</span><span class="sxs-lookup"><span data-stu-id="221de-145">For added help storing secrets associated with the application in the pipeline, see also the [Azure Credentials][configure-credential] plugin for Jenkins.</span></span>

- <span data-ttu-id="221de-146">**Azure figyelési szolgáltatások**.</span><span class="sxs-lookup"><span data-stu-id="221de-146">**Azure monitoring services**.</span></span> <span data-ttu-id="221de-147">Ez a szolgáltatás a Jenkinst futtató Azure-beli virtuális gépet [monitorozza][monitor].</span><span class="sxs-lookup"><span data-stu-id="221de-147">This service [monitors][monitor] the Azure virtual machine hosting Jenkins.</span></span> <span data-ttu-id="221de-148">Ez az üzemelő példány monitorozza a virtuális gép állapotát és processzorkihasználtságát, valamint riasztásokat küld ezekkel kapcsolatban.</span><span class="sxs-lookup"><span data-stu-id="221de-148">This deployment monitors the virtual machine status and CPU utilization and sends alerts.</span></span>

## <a name="recommendations"></a><span data-ttu-id="221de-149">Javaslatok</span><span class="sxs-lookup"><span data-stu-id="221de-149">Recommendations</span></span>

<span data-ttu-id="221de-150">Az alábbi javaslatok a legtöbb forgatókönyvre vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="221de-150">The following recommendations apply for most scenarios.</span></span> <span data-ttu-id="221de-151">Kövesse ezeket a javaslatokat, ha nincsenek ezeket felülíró követelményei.</span><span class="sxs-lookup"><span data-stu-id="221de-151">Follow these recommendations unless you have a specific requirement that overrides them.</span></span>

### <a name="azure-ad"></a><span data-ttu-id="221de-152">Azure AD</span><span class="sxs-lookup"><span data-stu-id="221de-152">Azure AD</span></span>

<span data-ttu-id="221de-153">Az Azure-előfizetés [Azure AD][azure-ad]-bérlője segítségével engedélyezhető az egyszeri bejelentkezés a Jenkins-felhasználók számára, valamint telepíthetők az [egyszerű szolgáltatások][service-principal], amelyek biztosítják a Jenkins-feladatok hozzáférését az Azure-erőforrásokhoz.</span><span class="sxs-lookup"><span data-stu-id="221de-153">The [Azure AD][azure-ad] tenant for your Azure subscription is used to enable SSO for Jenkins users and set up [service principals][service-principal] that enable Jenkins jobs to access Azure resources.</span></span>

<span data-ttu-id="221de-154">Az egyszeri bejelentkezés hitelesítését és engedélyezését a Jenkins-kiszolgálón telepített Azure AD beépülő modul teszi lehetővé.</span><span class="sxs-lookup"><span data-stu-id="221de-154">SSO authentication and authorization are implemented by the Azure AD plugin installed on the Jenkins server.</span></span> <span data-ttu-id="221de-155">Az egyszeri bejelentkezés használatával a felhasználók az Azure AD-ből származó vállalati hitelesítő adataikkal hitelesítők a Jenkins-kiszolgálóra való bejelentkezéskor.</span><span class="sxs-lookup"><span data-stu-id="221de-155">SSO allows you to authenticate using your organization credentials from Azure AD when logging on to the Jenkins server.</span></span> <span data-ttu-id="221de-156">Az Azure AD beépülő modul konfigurálásakor megadhatja, hogy az egyes felhasználók milyen szintű hozzáféréssel rendelkezzenek a Jenkins-kiszolgálóhoz.</span><span class="sxs-lookup"><span data-stu-id="221de-156">When configuring the Azure AD plugin, you can specify the level of a user’s authorized access to the Jenkins server.</span></span>

<span data-ttu-id="221de-157">A Jenkins-feladatok az Azure-erőforrásokhoz való hozzáférésének biztosításához az Azure AD-rendszergazdák egyszerű szolgáltatásokat hozhatnak létre.</span><span class="sxs-lookup"><span data-stu-id="221de-157">To provide Jenkins jobs with access to Azure resources, an Azure AD administrator creates service principals.</span></span> <span data-ttu-id="221de-158">Ezek [hitelesített és engedélyezett hozzáférést][ad-sp] biztosítanak az alkalmazások – esetünkben a Jenkins-feladatok – számára az Azure-erőforrásokhoz.</span><span class="sxs-lookup"><span data-stu-id="221de-158">These grant applications—in this case, the Jenkins jobs—[authenticated, authorized access][ad-sp] to Azure resources.</span></span>

<span data-ttu-id="221de-159">Az [RBAC][rbac] segítségével tovább szabályozható a felhasználók vagy egyszerű szolgáltatások hozzáférése az Azure-erőforrásokhoz a hozzárendelt szerepköreik alapján.</span><span class="sxs-lookup"><span data-stu-id="221de-159">[RBAC][rbac] further defines and controls access to Azure resources for users or service principals through their assigned role.</span></span> <span data-ttu-id="221de-160">A beépített és az egyéni szerepkörök egyaránt támogatottak.</span><span class="sxs-lookup"><span data-stu-id="221de-160">Both built-in and custom roles are supported.</span></span> <span data-ttu-id="221de-161">A szerepkörök segítségével emellett biztonságossá tehető a folyamat, továbbá biztosítható, hogy a felhasználók vagy ügynökök felelősségi körei megfelelően legyenek kiosztva és engedélyezve.</span><span class="sxs-lookup"><span data-stu-id="221de-161">Roles also help secure the pipeline and ensure that a user’s or agent’s responsibilities are assigned and authorized correctly.</span></span> <span data-ttu-id="221de-162">Emellett az RBAC beállításával korlátozható az Azure-objektumok elérése is.</span><span class="sxs-lookup"><span data-stu-id="221de-162">In addition, RBAC can be set up to limit access to Azure assets.</span></span> <span data-ttu-id="221de-163">A felhasználók például kizárólag egy adott erőforráscsoport objektumainak használatára korlátozhatók.</span><span class="sxs-lookup"><span data-stu-id="221de-163">For example, a user can be limited to working with only the assets in a particular resource group.</span></span>

### <a name="storage"></a><span data-ttu-id="221de-164">Storage</span><span class="sxs-lookup"><span data-stu-id="221de-164">Storage</span></span>

<span data-ttu-id="221de-165">Az Azure Marketplace áruházból telepíthető Jenkins [Windows Azure Storage beépülő modul][storage-plugin] segítségével tárolhatók a más buildekkel és tesztekkel megosztható build-összetevők.</span><span class="sxs-lookup"><span data-stu-id="221de-165">Use the Jenkins [Windows Azure Storage plugin][storage-plugin], which is installed from the Azure Marketplace, to store build artifacts that can be shared with other builds and tests.</span></span> <span data-ttu-id="221de-166">Mielőtt ez a beépülő modul használható lenne a Jenkins-feladatokkal, konfigurálni kell egy Azure Storage-fiókot.</span><span class="sxs-lookup"><span data-stu-id="221de-166">An Azure Storage account must be configured before this plugin can be used by the Jenkins jobs.</span></span>

### <a name="jenkins-azure-plugins"></a><span data-ttu-id="221de-167">Jenkins Azure beépülő modulok</span><span class="sxs-lookup"><span data-stu-id="221de-167">Jenkins Azure plugins</span></span>

<span data-ttu-id="221de-168">Az Azure-hoz készült Jenkins megoldássablon több Azure beépülő modult telepít.</span><span class="sxs-lookup"><span data-stu-id="221de-168">The solution template for Jenkins on Azure installs several Azure plugins.</span></span> <span data-ttu-id="221de-169">Az Azure DevOps csapata hozza létre és tartja karban a megoldássablont és az alábbi beépülő modulokat, amelyek az Azure Marketplace áruházban elérhető egyéb Jenkins ajánlatokkal és a helyszínen telepített Jenkins főkiszolgálókkal is használhatók:</span><span class="sxs-lookup"><span data-stu-id="221de-169">The Azure DevOps Team builds and maintains the solution template and the following plugins, which work with other Jenkins offerings in Azure Marketplace as well as any Jenkins master set up on premises:</span></span>

- <span data-ttu-id="221de-170">Az [Azure AD beépülő modul][configure-azure-ad] használatával a Jenkins-kiszolgáló támogatja a felhasználók egyszeri bejelentkeztetését az Azure AD alapján.</span><span class="sxs-lookup"><span data-stu-id="221de-170">[Azure AD plugin][configure-azure-ad] allows the Jenkins server to support SSO for users based on Azure AD.</span></span>

- <span data-ttu-id="221de-171">Az [Azure VM Agents][configure-agent] beépülő modul egy Azure Resource Manager-sablon használatával Jenkins-ügynököket hoz létre Azure-beli virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="221de-171">[Azure VM Agents][configure-agent] plugin uses an Azure Resource Manager template to create Jenkins agents in Azure virtual machines.</span></span>

- <span data-ttu-id="221de-172">Az [Azure Credentials][configure-credential] beépülő modul segítségével tárolhatók az egyszerű Azure-szolgáltatások a Jenkinsben használt hitelesítő adatai.</span><span class="sxs-lookup"><span data-stu-id="221de-172">[Azure Credentials][configure-credential] plugin allows you to store Azure service principal credentials in Jenkins.</span></span>

- <span data-ttu-id="221de-173">A [Windows Azure Storage beépülő modul][configure-storage] build-összetevőket tölt fel, vagy build-függőségeket tölt le az [Azure Blob Storage-ból][blob].</span><span class="sxs-lookup"><span data-stu-id="221de-173">[Windows Azure Storage plugin][configure-storage] uploads build artifacts to, or downloads build dependencies from, [Azure Blob storage][blob].</span></span>

<span data-ttu-id="221de-174">Emellett javasoljuk, hogy tekintse át az Azure-erőforrásokkal használható Azure beépülő modulok egyre bővülő listáját.</span><span class="sxs-lookup"><span data-stu-id="221de-174">We also recommend reviewing the growing list of all available Azure plugins that work with Azure resources.</span></span> <span data-ttu-id="221de-175">A legfrissebb lista megtekintéséhez keresse fel a [Jenkins beépülő modulok indexét][index], és keressen rá az Azure kifejezésre.</span><span class="sxs-lookup"><span data-stu-id="221de-175">To see all the latest list, visit [Jenkins Plugin Index][index] and search for Azure.</span></span> <span data-ttu-id="221de-176">Például a következő beépülő modulok érhetőek el az üzembe helyezéshez:</span><span class="sxs-lookup"><span data-stu-id="221de-176">For example, the following plugins are available for deployment:</span></span>

- <span data-ttu-id="221de-177">Az [Azure Container Agents][container-agents] segítségével a tárolókat ügynökként futtathatja a Jenkinsben.</span><span class="sxs-lookup"><span data-stu-id="221de-177">[Azure Container Agents][container-agents] helps you to run a container as an agent in Jenkins.</span></span>

- <span data-ttu-id="221de-178">A [Kubernetes Continuous Deploy](https://aka.ms/azjenkinsk8s) erőforrás-konfigurációkat helyez üzembe egy Kubernetes-fürtön.</span><span class="sxs-lookup"><span data-stu-id="221de-178">[Kubernetes Continuous Deploy](https://aka.ms/azjenkinsk8s) deploys resource configurations to a Kubernetes cluster.</span></span>

- <span data-ttu-id="221de-179">Az [Azure Container Service][acs] konfigurációkat helyez üzembe az Azure Container Service szolgáltatásban a Kubernetes, a DC/OS with Marathon vagy a Docker Swarm használatával.</span><span class="sxs-lookup"><span data-stu-id="221de-179">[Azure Container Service][acs] deploys configurations to Azure Container Service with Kubernetes, DC/OS with Marathon, or Docker Swarm.</span></span>

- <span data-ttu-id="221de-180">Az [Azure Functions][functions] üzembe helyezi a projektet az Azure Functionsben.</span><span class="sxs-lookup"><span data-stu-id="221de-180">[Azure Functions][functions] deploys your project to Azure Function.</span></span>

- <span data-ttu-id="221de-181">Az [Azure App Service][app-service] az Azure App Service-be végzi az üzembe helyezést.</span><span class="sxs-lookup"><span data-stu-id="221de-181">[Azure App Service][app-service] deploys to Azure App Service.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="221de-182">Méretezési szempontok</span><span class="sxs-lookup"><span data-stu-id="221de-182">Scalability considerations</span></span>

<span data-ttu-id="221de-183">A Jenkins felskálázásával rendkívül nagy számítási feladatok is támogathatók.</span><span class="sxs-lookup"><span data-stu-id="221de-183">Jenkins can scale to support very large workloads.</span></span> <span data-ttu-id="221de-184">Rugalmas buildek esetében ne a Jenkins-főkiszolgálón futtassa a buildeket.</span><span class="sxs-lookup"><span data-stu-id="221de-184">For elastic builds, do not run builds on the Jenkins master server.</span></span> <span data-ttu-id="221de-185">Ehelyett szervezze ki a build-feladatokat Jenkins-ügynökökbe, amelyek aztán igény szerint rugalmasan fel- és leskálázhatóak.</span><span class="sxs-lookup"><span data-stu-id="221de-185">Instead, offload build tasks to Jenkins agents, which can be elastically scaled in and out as need.</span></span> <span data-ttu-id="221de-186">Az ügynökök skálázása kapcsán mérlegelje a következő két lehetőséget:</span><span class="sxs-lookup"><span data-stu-id="221de-186">Consider two options for scaling agents:</span></span>

- <span data-ttu-id="221de-187">Az [Azure VM Agents][vm-agent] beépülő modul használatával Azure-beli virtuális gépeken futó Jenkins-ügynököket hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="221de-187">Use the [Azure VM Agents][vm-agent] plugin to create Jenkins agents that run in Azure VMs.</span></span> <span data-ttu-id="221de-188">A beépülő modul lehetővé teszi az ügynökök rugalmas felskálázását, és különféle típusú virtuális gépeket képes használni.</span><span class="sxs-lookup"><span data-stu-id="221de-188">This plugin enables elastic scale-out for agents and can use distinct types of virtual machines.</span></span> <span data-ttu-id="221de-189">Választhat egy eltérő alaprendszerképet az Azure Marketplace-ről, vagy használhat egyedi rendszerképet is.</span><span class="sxs-lookup"><span data-stu-id="221de-189">You can select a different base image from Azure Marketplace or use a custom image.</span></span> <span data-ttu-id="221de-190">A Jenkins-ügynökök skálázásával kapcsolatos információkért lásd a [Skálázható architektúrák kialakítása][scale] című szakaszt a Jenkins dokumentációjában.</span><span class="sxs-lookup"><span data-stu-id="221de-190">For details about how the Jenkins agents scale, see [Architecting for Scale][scale] in the Jenkins documentation.</span></span>

- <span data-ttu-id="221de-191">Az [Azure Container Agents][container-agents] beépülő modul használatával a tárolókat ügynökként futtathatja az [Azure Container Service with Kubernetes](/azure/container-service/kubernetes/) vagy az [Azure Container Instances](/azure/container-instances/) szolgáltatásban.</span><span class="sxs-lookup"><span data-stu-id="221de-191">Use the [Azure Container Agents][container-agents] plugin to run a container as an agent in either [Azure Container Service with Kubernetes](/azure/container-service/kubernetes/), or [Azure Container Instances](/azure/container-instances/).</span></span>

<span data-ttu-id="221de-192">A virtuális gépek skálázása általában költségesebb, mint a tárolóké.</span><span class="sxs-lookup"><span data-stu-id="221de-192">Virtual machines generally cost more to scale than containers.</span></span> <span data-ttu-id="221de-193">Ha azonban tárolókat használna a skálázáshoz, a build-folyamatoknak tárolókkal kell futnia.</span><span class="sxs-lookup"><span data-stu-id="221de-193">To use containers for scaling, however, your build process must run with containers.</span></span>

<span data-ttu-id="221de-194">Emellett az Azure Storage használatával oszthatja meg a folyamat következő szakaszában más build-ügynökök által esetleg használt build-összetevőket.</span><span class="sxs-lookup"><span data-stu-id="221de-194">Also, use Azure Storage to share build artifacts that may be used in the next stage of the pipeline by other build agents.</span></span>

### <a name="scaling-the-jenkins-server"></a><span data-ttu-id="221de-195">A Jenkins-kiszolgáló skálázása</span><span class="sxs-lookup"><span data-stu-id="221de-195">Scaling the Jenkins server</span></span>

<span data-ttu-id="221de-196">A Jenkins-kiszolgáló virtuális gépét a virtuális gép méretének módosításával skálázhatja.</span><span class="sxs-lookup"><span data-stu-id="221de-196">You can scale the Jenkins server VM up or down by changing the VM size.</span></span> <span data-ttu-id="221de-197">Az [Azure-hoz készült Jenkins megoldássablon][azure-market] alapértelmezés szerint a DS2 v2 méretet (két processzorral, 7 GB) adja meg.</span><span class="sxs-lookup"><span data-stu-id="221de-197">The [solution template for Jenkins on Azure][azure-market] specifies the DS2 v2 size (with two CPUs, 7 GB) by default.</span></span> <span data-ttu-id="221de-198">Ez a méret egy kisebb vagy közepes csapat számítási feladatait képes kezelni.</span><span class="sxs-lookup"><span data-stu-id="221de-198">This size handles a small to medium team workload.</span></span> <span data-ttu-id="221de-199">A virtuális gép méretének módosításához válasszon egy másik alternatívát a kiszolgáló kiépítésekor.</span><span class="sxs-lookup"><span data-stu-id="221de-199">Change the VM size by choosing a different option when building out the server.</span></span>

<span data-ttu-id="221de-200">A megfelelő kiszolgálóméret a számítási feladatok várható méretétől függ.</span><span class="sxs-lookup"><span data-stu-id="221de-200">Selecting the correct server size depends on the size of the expected workload.</span></span> <span data-ttu-id="221de-201">A Jenkins-közösség által fenntartott [választási útmutató][selection-guide] segítségével azonosíthatja a követelményeknek leginkább megfelelő konfigurációt.</span><span class="sxs-lookup"><span data-stu-id="221de-201">The Jenkins community maintains a [selection guide][selection-guide] to help identify the configuration that best meets your requirements.</span></span> <span data-ttu-id="221de-202">Az Azure számos [méretet biztosít a Linux rendszerű virtuális gépekhez][sizes-linux], amelyek bármely igényt képesek kiszolgálni.</span><span class="sxs-lookup"><span data-stu-id="221de-202">Azure offers many [sizes for Linux VMs][sizes-linux] to meet any requirements.</span></span> <span data-ttu-id="221de-203">A Jenkins-főkiszolgáló skálázásával kapcsolatos információkért tekintse meg a Jenkins-közösség [bevált gyakorlatait][best-practices], amelyek a Jenkins-főkiszolgáló skálázására is kitérnek.</span><span class="sxs-lookup"><span data-stu-id="221de-203">For more information about scaling the Jenkins master, refer to the Jenkins community of [best practices][best-practices], which also includes details about scaling Jenkins master.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="221de-204">Rendelkezésre állási szempontok</span><span class="sxs-lookup"><span data-stu-id="221de-204">Availability considerations</span></span>

<span data-ttu-id="221de-205">A Jenkins-kiszolgálók esetében a rendelkezésre állás azt jelenti, hogy képesek helyreállítani a munkafolyamattal kapcsolatos állapotinformációkat, például a teszteredményekét, valamint a felhasználói kódtárakat vagy egyéb összetevőket.</span><span class="sxs-lookup"><span data-stu-id="221de-205">Availability in the context of a Jenkins server means being able to recover any state information associated with your workflow, such as test results, libraries you have created, or other artifacts.</span></span> <span data-ttu-id="221de-206">A kritikus munkafolyamat-állapotokat vagy -összetevőket karban kell tartani, hogy a Jenkins-kiszolgáló leállása esetén helyre lehessen állítani a munkafolyamatot.</span><span class="sxs-lookup"><span data-stu-id="221de-206">Critical workflow state or artifacts must be maintained to recover the workflow if the Jenkins server goes down.</span></span> <span data-ttu-id="221de-207">A rendelkezésre állásra vonatkozó követelmények felméréséhez két általános mérőszámot érdemes figyelembe vennie:</span><span class="sxs-lookup"><span data-stu-id="221de-207">To assess your availability requirements, consider two common metrics:</span></span>

- <span data-ttu-id="221de-208">A Helyreállítási időre vonatkozó célkitűzés (RTO) adja meg, hogy mennyi ideig üzemelhet a rendszer a Jenkins nélkül.</span><span class="sxs-lookup"><span data-stu-id="221de-208">Recovery Time Objective (RTO) specifies how long you can go without Jenkins.</span></span>

- <span data-ttu-id="221de-209">A Helyreállítási pont-célkitűzés (RPO) határozza meg az elfogadható adatveszteség mértékét, ha a szolgáltatás leállása érinti a Jenkinst.</span><span class="sxs-lookup"><span data-stu-id="221de-209">Recovery Point Objective (RPO) indicates how much data you can afford to lose if a disruption in service affects Jenkins.</span></span>

<span data-ttu-id="221de-210">A gyakorlatban az RTO és az RPO a redundanciát és a biztonsági mentést jelölik.</span><span class="sxs-lookup"><span data-stu-id="221de-210">In practice, RTO and RPO imply redundancy and backup.</span></span> <span data-ttu-id="221de-211">A rendelkezésre állás nem hardveres helyreállítás kérdése, az ugyanis az Azure részét képezi, hanem a Jenkins-kiszolgáló állapota fenntartásának biztosítását jelenti.</span><span class="sxs-lookup"><span data-stu-id="221de-211">Availability is not a question of hardware recovery—that is part of Azure—but rather ensuring you maintain the state of your Jenkins server.</span></span> <span data-ttu-id="221de-212">A Microsoft [szolgáltatói szerződést][sla] (SLA) kínál az egyes virtuálisgép-példányokhoz.</span><span class="sxs-lookup"><span data-stu-id="221de-212">Microsoft offers a [service level agreement][sla] (SLA) for single VM instances.</span></span> <span data-ttu-id="221de-213">Amennyiben ez az SLA nem felel meg az üzemidővel kapcsolatos elvárásainak, mindenképp gondoskodjon egy vészhelyreállítási tervről, vagy vegye fontolóra egy [több főkiszolgálós Jenkins-kiszolgáló][multi-master] üzembe helyezését (a jelen dokumentum erre nem tér ki).</span><span class="sxs-lookup"><span data-stu-id="221de-213">If this SLA doesn't meet your uptime requirements, make sure you have a plan for disaster recovery, or consider using a [multi-master Jenkins server][multi-master] deployment (not covered in this document).</span></span>

<span data-ttu-id="221de-214">Vegye fontolóra vészhelyreállítási [szkriptek][disaster] alkalmazását az üzembe helyezés 7. lépésében, amelyek segítségével egy Azure Storage-fiók hozható létre felügyelt meghajtókkal a Jenkins-kiszolgáló állapotának tárolásához.</span><span class="sxs-lookup"><span data-stu-id="221de-214">Consider using the disaster recovery [scripts][disaster] in step 7 of the deployment to create an Azure Storage account with managed disks to store the Jenkins server state.</span></span> <span data-ttu-id="221de-215">Ha a Jenkins leáll, visszaállítható az ezen a külön tárfiókon tárolt állapotára.</span><span class="sxs-lookup"><span data-stu-id="221de-215">If Jenkins goes down, it can be restored to the state stored in this separate storage account.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="221de-216">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="221de-216">Security considerations</span></span>

<span data-ttu-id="221de-217">Az alábbi eljárások segítenek növelni a Jenkins-kiszolgáló biztonságát, mivel alapállapotában nem biztonságos.</span><span class="sxs-lookup"><span data-stu-id="221de-217">Use the following approaches to help lock down security on a basic Jenkins server, since in its basic state, it is not secure.</span></span>

- <span data-ttu-id="221de-218">Konfiguráljon egy biztonságos megoldást a Jenkins-kiszolgálóra való bejelentkezéshez.</span><span class="sxs-lookup"><span data-stu-id="221de-218">Set up a secure way to log into the Jenkins server.</span></span> <span data-ttu-id="221de-219">Ez az architektúra HTTP-t és nyilvános IP-címet használ, de a HTTP alapértelmezés szerint nem biztonságos.</span><span class="sxs-lookup"><span data-stu-id="221de-219">This architecture uses HTTP and has a public IP, but HTTP is not secure by default.</span></span> <span data-ttu-id="221de-220">Vegye fontolóra a [HTTPS beállítását a biztonságos bejelentkezéshez használt Nginx-kiszolgálón][nginx].</span><span class="sxs-lookup"><span data-stu-id="221de-220">Consider setting up [HTTPS on the Nginx server][nginx] being used for a secure logon.</span></span>

    > [!NOTE]
    > <span data-ttu-id="221de-221">Ha SSL-t ad a kiszolgálóhoz, hozzon létre egy NSG-szabályt a Jenkins-alhálózaton a 443-as port megnyitásához.</span><span class="sxs-lookup"><span data-stu-id="221de-221">When adding SSL to your server, create an NSG rule for the Jenkins subnet to open port 443.</span></span> <span data-ttu-id="221de-222">További információért olvassa el [a portok a virtuális gépek számára az Azure Portallal való megnyitását][port443] ismertető cikket.</span><span class="sxs-lookup"><span data-stu-id="221de-222">For more information, see [How to open ports to a virtual machine with the Azure portal][port443].</span></span>
    >

- <span data-ttu-id="221de-223">Gondoskodjon róla, hogy a Jenkins konfigurációja meggátolja a webhelyközi kérések hamisítást (A Jenkins felügyelete \> A globális biztonság konfigurálása).</span><span class="sxs-lookup"><span data-stu-id="221de-223">Ensure that the Jenkins configuration prevents cross site request forgery (Manage Jenkins \> Configure Global Security).</span></span> <span data-ttu-id="221de-224">Ez a Microsoft Jenkins Server alapértelmezett beállítása.</span><span class="sxs-lookup"><span data-stu-id="221de-224">This is the default for Microsoft Jenkins Server.</span></span>

- <span data-ttu-id="221de-225">Konfiguráljon csak olvasási hozzáférést a Jenkins-irányítópulthoz a [Matrix Authorization Strategy beépülő modul][matrix] használatával.</span><span class="sxs-lookup"><span data-stu-id="221de-225">Configure read-only access to the Jenkins dashboard by using the [Matrix Authorization Strategy Plugin][matrix].</span></span>

- <span data-ttu-id="221de-226">Telepítse az [Azure Credentials][configure-credential] beépülő modult az Azure-objektumok, a folyamatban érintett ügynökök és a külső felek által készített összetevők titkainak a Key Vaulttal való kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="221de-226">Install the [Azure Credentials][configure-credential] plugin to use Key Vault to handle secrets for the Azure assets, the agents in the pipeline, and third-party components.</span></span>

- <span data-ttu-id="221de-227">Az RBAC használatával a feladatok futtatásához szükséges minimális hozzáférést konfigurálhat a szolgáltatásnévhez.</span><span class="sxs-lookup"><span data-stu-id="221de-227">Use RBAC to restrict the access of the service principal to the minimum required to run the jobs.</span></span> <span data-ttu-id="221de-228">Ezzel csökkenthető a nem engedélyezett feladatok által okozott károk hatóköre.</span><span class="sxs-lookup"><span data-stu-id="221de-228">This helps limit the scope of damage from a rogue job.</span></span>

<span data-ttu-id="221de-229">A Jenkins-feladatoknak sokszor van szüksége titkokra a hitelesítést igénylő Azure-szolgáltatások, például az Azure Container Service eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="221de-229">Jenkins jobs often require secrets to access Azure services that require authorization, such as Azure Container Service.</span></span> <span data-ttu-id="221de-230">Használja a [Key Vaultot][key-vault] az [Azure Credential beépülő modullal][configure-credential] ezeknek a titkoknak a biztonságos kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="221de-230">Use [Key Vault][key-vault] along with the [Azure Credential plugin][configure-credential] to manage these secrets securely.</span></span> <span data-ttu-id="221de-231">Használja a Key Vaultot az egyszerű szolgáltatások hitelesítő adatainak, jelszavainak, tokenjeinek és egyéb titkainak tárolásához.</span><span class="sxs-lookup"><span data-stu-id="221de-231">Use Key Vault to store service principal credentials, passwords, tokens, and other secrets.</span></span>

<span data-ttu-id="221de-232">Az Azure-erőforrások biztonsági állapotának egy központi felületen való nyomon követéséhez használja az [Azure Security Centert][security-center].</span><span class="sxs-lookup"><span data-stu-id="221de-232">To get a central view of the security state of your Azure resources, use [Azure Security Center][security-center].</span></span> <span data-ttu-id="221de-233">A Security Center monitorozza a potenciális biztonsági problémákat, és átfogó képet nyújt az üzemi környezet biztonsági állapotáról.</span><span class="sxs-lookup"><span data-stu-id="221de-233">Security Center monitors potential security issues and provides a comprehensive picture of the security health of your deployment.</span></span> <span data-ttu-id="221de-234">A Security Center Azure-előfizetésenként külön konfigurálandó.</span><span class="sxs-lookup"><span data-stu-id="221de-234">Security Center is configured per Azure subscription.</span></span> <span data-ttu-id="221de-235">Engedélyezze a biztonsági adatok gyűjtését [az Azure Security Center rövid útmutatójában leírtak szerint][quick-start].</span><span class="sxs-lookup"><span data-stu-id="221de-235">Enable security data collection as described in the [Azure Security Center quick start guide][quick-start].</span></span> <span data-ttu-id="221de-236">Az adatgyűjtés engedélyezése esetén a Security Center automatikusan figyeli az előfizetés alatt létrehozott összes virtuális gépet.</span><span class="sxs-lookup"><span data-stu-id="221de-236">When data collection is enabled, Security Center automatically scans any virtual machines created under that subscription.</span></span>

<span data-ttu-id="221de-237">A Jenkins-kiszolgáló saját felhasználókezelő rendszerrel rendelkezik, a Jenkins-közösség pedig bevált gyakorlatokat biztosít [a Jenkins-példányok biztosításához az Azure-ban][secure-jenkins].</span><span class="sxs-lookup"><span data-stu-id="221de-237">The Jenkins server has its own user management system, and the Jenkins community provides best practices for [securing a Jenkins instance on Azure][secure-jenkins].</span></span> <span data-ttu-id="221de-238">Az Azure-hoz készült Jenkins megoldássablonba ezek a bevált gyakorlatok be vannak építve.</span><span class="sxs-lookup"><span data-stu-id="221de-238">The solution template for Jenkins on Azure implements these best practices.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="221de-239">Felügyeleti szempontok</span><span class="sxs-lookup"><span data-stu-id="221de-239">Manageability considerations</span></span>

<span data-ttu-id="221de-240">Használjon erőforráscsoportokat az üzembe helyezett Azure-erőforrások rendezéséhez.</span><span class="sxs-lookup"><span data-stu-id="221de-240">Use resource groups to organize the Azure resources that are deployed.</span></span> <span data-ttu-id="221de-241">Az éles és a fejlesztési/tesztkörnyezeteket külön erőforráscsoportokban helyezze üzembe, így az egyes környezetek erőforrásait külön monitorozhatja, és a költségeket erőforráscsoportonként követheti.</span><span class="sxs-lookup"><span data-stu-id="221de-241">Deploy production environments and development/test environments in separate resource groups, so that you can monitor each environment’s resources and roll up billing costs by resource group.</span></span> <span data-ttu-id="221de-242">Az erőforrásokat törölheti is készletenként. Ez nagyon hasznos tesztkörnyezetek esetében.</span><span class="sxs-lookup"><span data-stu-id="221de-242">You can also delete resources as a set, which is very useful for test deployments.</span></span>

<span data-ttu-id="221de-243">Az Azure számos különféle szolgáltatást nyújt az infrastruktúra átfogó [monitorozásához és diagnosztizálásához][monitoring-diag].</span><span class="sxs-lookup"><span data-stu-id="221de-243">Azure provides several features for [monitoring and diagnostics][monitoring-diag] of the overall infrastructure.</span></span> <span data-ttu-id="221de-244">A processzorhasználat monitorozásához az architektúra telepíti az Azure Monitort.</span><span class="sxs-lookup"><span data-stu-id="221de-244">To monitor CPU usage, this architecture deploys Azure Monitor.</span></span> <span data-ttu-id="221de-245">Az Azure Monitor használatával például monitorozhatja a processzorkihasználtságot, és értesítéseket kaphat, ha a kihasználtság meghaladja a 80 százalékot.</span><span class="sxs-lookup"><span data-stu-id="221de-245">For example, you can use Azure Monitor to monitor CPU utilization, and send a notification if CPU usage exceeds 80 percent.</span></span> <span data-ttu-id="221de-246">(Magas processzorkihasználtság esetén érdemes fontolóra vennie a Jenkins-kiszolgálót futtató virtuális gép felskálázását.) Továbbá értesítést küldhet egy meghatározott felhasználónak, ha a virtuális gép leáll vagy elérhetetlenné válik.</span><span class="sxs-lookup"><span data-stu-id="221de-246">(High CPU usage indicates that you might want to scale up the Jenkins server VM.) You can also notify a designated user if the VM fails or becomes unavailable.</span></span>

## <a name="communities"></a><span data-ttu-id="221de-247">Közösségek</span><span class="sxs-lookup"><span data-stu-id="221de-247">Communities</span></span>

<span data-ttu-id="221de-248">A közösségek választ adhatnak a kérdéseire, továbbá segíthetnek a sikeres üzembe helyezésben.</span><span class="sxs-lookup"><span data-stu-id="221de-248">Communities can answer questions and help you set up a successful deployment.</span></span> <span data-ttu-id="221de-249">A következőket ajánljuk figyelmébe:</span><span class="sxs-lookup"><span data-stu-id="221de-249">Consider the following:</span></span>

- [<span data-ttu-id="221de-250">A Jenkins-közösség blogja</span><span class="sxs-lookup"><span data-stu-id="221de-250">Jenkins Community Blog</span></span>](https://jenkins.io/node/)
- [<span data-ttu-id="221de-251">Az Azure fórum</span><span class="sxs-lookup"><span data-stu-id="221de-251">Azure Forum</span></span>](https://azure.microsoft.com/support/forums/)
- [<span data-ttu-id="221de-252">Stack Overflow Jenkins</span><span class="sxs-lookup"><span data-stu-id="221de-252">Stack Overflow Jenkins</span></span>](https://stackoverflow.com/tags/jenkins/info)

<span data-ttu-id="221de-253">A Jenkins-közösség további bevált gyakorlataiért látogasson el a [Jenkins bevált gyakorlatait ismertető oldalra][jenkins-best].</span><span class="sxs-lookup"><span data-stu-id="221de-253">For more best practices from the Jenkins community, visit [Jenkins best practices][jenkins-best].</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="221de-254">A megoldás üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="221de-254">Deploy the solution</span></span>

<span data-ttu-id="221de-255">Az architektúra üzembe helyezéséhez kövesse [az Azure-hoz készült Jenkins megoldássablon][azure-market] telepítésének lépéseit, majd telepítse a szkripteket, amelyek az alábbi lépésekben a monitorozás és a vészhelyreállítás beállítását végzik.</span><span class="sxs-lookup"><span data-stu-id="221de-255">To deploy this architecture, follow the steps below to install the [solution template for Jenkins on Azure][azure-market], then install the scripts that set up monitoring and disaster recovery in the steps below.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="221de-256">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="221de-256">Prerequisites</span></span>

- <span data-ttu-id="221de-257">A referenciaarchitektúra használatához Azure-előfizetés szükséges.</span><span class="sxs-lookup"><span data-stu-id="221de-257">This reference architecture requires an Azure subscription.</span></span>
- <span data-ttu-id="221de-258">Egyszerű Azure-szolgáltatások létrehozásához rendszergazdai jogosultság szükséges az üzembe helyezett Jenkins-kiszolgálóval társított Azure AD-bérlőn.</span><span class="sxs-lookup"><span data-stu-id="221de-258">To create an Azure service principal, you must have admin rights to the Azure AD tenant that is associated with the deployed Jenkins server.</span></span>
- <span data-ttu-id="221de-259">A jelen utasítások feltételezik, hogy a Jenkins-rendszergazda egyben Azure-felhasználó is, aki legalább Közreműködői jogosultságokkal rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="221de-259">These instructions assume that the Jenkins administrator is also an Azure user with at least Contributor privileges.</span></span>

### <a name="step-1-deploy-the-jenkins-server"></a><span data-ttu-id="221de-260">1. lépés: A Jenkins-kiszolgáló üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="221de-260">Step 1: Deploy the Jenkins server</span></span>

1. <span data-ttu-id="221de-261">Nyissa meg a [Jenkins Azure Marketplace-beli rendszerképét][azure-market] a webböngészőben, és az oldal bal oldalán válassza a **LETÖLTÉS MOST** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="221de-261">Open the [Azure Marketplace image for Jenkins][azure-market] in your web browser and select **GET IT NOW** from the left side of the page.</span></span>

2. <span data-ttu-id="221de-262">Tekintse át a díjszabás részleteit, és válassza a **Folytatás**, majd a **Létrehozás** lehetőséget a Jenkins-kiszolgáló Azure Portalon történő konfigurálásához.</span><span class="sxs-lookup"><span data-stu-id="221de-262">Review the pricing details and select **Continue**, then select **Create** to configure the Jenkins server in the Azure portal.</span></span>

<span data-ttu-id="221de-263">Részletes utasításokért lásd [a Jenkins-kiszolgáló Azure-beli linuxos virtuális gépen az Azure Portalról való létrehozását][create-jenkins] ismertető szakaszt.</span><span class="sxs-lookup"><span data-stu-id="221de-263">For detailed instructions, see [Create a Jenkins server on an Azure Linux VM from the Azure portal][create-jenkins].</span></span> <span data-ttu-id="221de-264">Ehhez a referenciaarchitektúrához elegendő a kiszolgálót rendszergazdai bejelentkezéssel telepíteni és beüzemelni.</span><span class="sxs-lookup"><span data-stu-id="221de-264">For this reference architecture, it is sufficient to get the server up and running with the admin logon.</span></span> <span data-ttu-id="221de-265">Ezután konfigurálhatja, hogy más szolgáltatásokat is futtasson.</span><span class="sxs-lookup"><span data-stu-id="221de-265">Then you can provision it to use various other services.</span></span>

### <a name="step-2-set-up-sso"></a><span data-ttu-id="221de-266">2. lépés: Az egyszeri bejelentkezés beállítása</span><span class="sxs-lookup"><span data-stu-id="221de-266">Step 2: Set up SSO</span></span>

<span data-ttu-id="221de-267">Ezt a lépést a Jenkins-rendszergazda futtatja, akinek rendelkeznie kell egy felhasználói fiókkal az előfizetés Azure AD könyvtárában, továbbá a Közreműködői szerepkörrel is.</span><span class="sxs-lookup"><span data-stu-id="221de-267">The step is run by the Jenkins administrator, who must also have a user account in the subscription’s Azure AD directory and must be assigned the Contributor role.</span></span>

<span data-ttu-id="221de-268">Használja a Jenkins-kiszolgálón, a Jenkins frissítési központjába található [Azure AD beépülő modult][configure-azure-ad], és kövesse az utasításokat az egyszeri bejelentkezés konfigurálásához.</span><span class="sxs-lookup"><span data-stu-id="221de-268">Use the [Azure AD Plugin][configure-azure-ad] from the Jenkins Update Center in the Jenkins server and follow the instructions to set up SSO.</span></span>

### <a name="step-3-provision-jenkins-server-with-azure-vm-agent-plugin"></a><span data-ttu-id="221de-269">3. lépés: A Jenkins-kiszolgáló konfigurálása az Azure VM Agent beépülő modullal</span><span class="sxs-lookup"><span data-stu-id="221de-269">Step 3: Provision Jenkins server with Azure VM Agent plugin</span></span>

<span data-ttu-id="221de-270">Ezt a lépést a Jenkins-rendszergazda futtatja a már telepített Azure VM Agent beépülő modul konfigurálása érdekében.</span><span class="sxs-lookup"><span data-stu-id="221de-270">The step is run by the Jenkins administrator to set up the Azure VM Agent plugin, which is already installed.</span></span>

<span data-ttu-id="221de-271">[A beépülő modul konfigurálásához kövesse ezeket a lépéseket][configure-agent].</span><span class="sxs-lookup"><span data-stu-id="221de-271">[Follow these steps to configure the plugin][configure-agent].</span></span> <span data-ttu-id="221de-272">A beépülő modulhoz beállítandó szolgáltatásnevekkel kapcsolatos oktatóanyagért olvassa át [A Jenkins üzemelő példányainak igény szerinti skálázása Azure VM-ügynökökkel][scale-agent] című részt.</span><span class="sxs-lookup"><span data-stu-id="221de-272">For a tutorial about setting up service principals for the plugin, see [Scale your Jenkins deployments to meet demand with Azure VM agents][scale-agent].</span></span>

### <a name="step-4-provision-jenkins-server-with-azure-storage"></a><span data-ttu-id="221de-273">4. lépés: A Jenkins-kiszolgáló konfigurálása az Azure Storage szolgáltatással</span><span class="sxs-lookup"><span data-stu-id="221de-273">Step 4: Provision Jenkins server with Azure Storage</span></span>

<span data-ttu-id="221de-274">Ezt a lépést a Jenkins-rendszergazda futtatja a már telepített Windows Azure Storage beépülő modul konfigurálása érdekében.</span><span class="sxs-lookup"><span data-stu-id="221de-274">The step is run by the Jenkins administrator, who sets up the Windows Azure Storage Plugin, which is already installed.</span></span>

<span data-ttu-id="221de-275">[A beépülő modul konfigurálásához kövesse ezeket a lépéseket][configure-storage].</span><span class="sxs-lookup"><span data-stu-id="221de-275">[Follow these steps to configure the plugin][configure-storage].</span></span>

### <a name="step-5-provision-jenkins-server-with-azure-credential-plugin"></a><span data-ttu-id="221de-276">5. lépés: A Jenkins-kiszolgáló konfigurálása az Azure Credential beépülő modullal</span><span class="sxs-lookup"><span data-stu-id="221de-276">Step 5: Provision Jenkins server with Azure Credential plugin</span></span>

<span data-ttu-id="221de-277">Ezt a lépést a Jenkins-rendszergazda futtatja a már telepített Azure Credential beépülő modul konfigurálása érdekében.</span><span class="sxs-lookup"><span data-stu-id="221de-277">The step is run by the Jenkins administrator to set up the Azure Credential plugin, which is already installed.</span></span>

<span data-ttu-id="221de-278">[A beépülő modul konfigurálásához kövesse ezeket a lépéseket][configure-credential].</span><span class="sxs-lookup"><span data-stu-id="221de-278">[Follow these steps to configure the plugin][configure-credential].</span></span>

### <a name="step-6-provision-jenkins-server-for-monitoring-by-the-azure-monitor-service"></a><span data-ttu-id="221de-279">6. lépés: A Jenkins-kiszolgáló konfigurálása az Azure Monitor Service általi monitoroztatásra</span><span class="sxs-lookup"><span data-stu-id="221de-279">Step 6: Provision Jenkins server for monitoring by the Azure Monitor Service</span></span>

<span data-ttu-id="221de-280">A Jenkins-kiszolgáló monitorozásának konfigurálásához kövesse [az Azure-szolgáltatások metrikus riasztásainak az Azure Monitor szolgáltatásban való létrehozását][create-metric] ismertető szakaszt.</span><span class="sxs-lookup"><span data-stu-id="221de-280">To set up monitoring for your Jenkins server, follow the instructions in [Create metric alerts in Azure Monitor for Azure services][create-metric].</span></span>

### <a name="step-7-provision-jenkins-server-with-managed-disks-for-disaster-recovery"></a><span data-ttu-id="221de-281">7. lépés: A Jenkins-kiszolgáló konfigurálása a Managed Disks szolgáltatással vészhelyreállítás céljából</span><span class="sxs-lookup"><span data-stu-id="221de-281">Step 7: Provision Jenkins server with Managed Disks for disaster recovery</span></span>

<span data-ttu-id="221de-282">A Microsoft Jenkins terméket fejlesztő csapat által létrehozott vészhelyreállítási szkriptek felügyelt lemezeket hoznak létre a Jenkins állapotának mentéséhez.</span><span class="sxs-lookup"><span data-stu-id="221de-282">The Microsoft Jenkins product group has created disaster recovery scripts that build a managed disk used to save the Jenkins state.</span></span> <span data-ttu-id="221de-283">Ha a kiszolgáló leáll, visszaállítható a legutóbbi állapotára.</span><span class="sxs-lookup"><span data-stu-id="221de-283">If the server goes down, it can be restored to its latest state.</span></span>

<span data-ttu-id="221de-284">Töltse le és futtassa a vészhelyreállítási szkripteket a [GitHubról][disaster].</span><span class="sxs-lookup"><span data-stu-id="221de-284">Download and run the disaster recovery scripts from [GitHub][disaster].</span></span>

<span data-ttu-id="221de-285">Érdemes lehet áttekintenie a következő [Azure-példaforgatókönyvet](/azure/architecture/example-scenario), amely az ugyanazon technológiát használó, konkrét megoldásokat mutatja be:</span><span class="sxs-lookup"><span data-stu-id="221de-285">You may wish to review the following [Azure example scenario](/azure/architecture/example-scenario) that demonstrates specific solutions using some of the same technologies:</span></span>

- [<span data-ttu-id="221de-286">CI-/CD-folyamat tárolóalapú számítási feladatokhoz</span><span class="sxs-lookup"><span data-stu-id="221de-286">CI/CD pipeline for container-based workloads</span></span>](/azure/architecture/example-scenario/apps/devops-with-aks)

<!-- links -->

[acs]: https://aka.ms/azjenkinsacs
[ad-sp]: /azure/active-directory/develop/active-directory-integrating-applications
[app-service]: https://plugins.jenkins.io/azure-app-service
[azure-ad]: /azure/active-directory/
[azure-market]: https://azuremarketplace.microsoft.com/marketplace/apps/azure-oss.jenkins?tab=Overview
[best-practices]: https://jenkins.io/doc/book/architecting-for-scale/
[blob]: /azure/storage/common/storage-java-jenkins-continuous-integration-solution
[configure-azure-ad]: https://plugins.jenkins.io/azure-ad
[configure-agent]: https://plugins.jenkins.io/azure-vm-agents
[configure-credential]: https://plugins.jenkins.io/azure-credentials
[configure-storage]: https://plugins.jenkins.io/windows-azure-storage
[container-agents]: https://aka.ms/azcontaineragent
[create-jenkins]: /azure/jenkins/install-jenkins-solution-template
[create-metric]: /azure/monitoring-and-diagnostics/insights-alerts-portal
[disaster]: https://github.com/Azure/jenkins/tree/master/disaster_recovery
[functions]: https://aka.ms/azjenkinsfunctions
[index]: https://plugins.jenkins.io
[jenkins-best]: https://wiki.jenkins.io/display/JENKINS/Jenkins+Best+Practices
[jenkins-on-azure]: /azure/jenkins/
[key-vault]: /azure/key-vault/
[managed-disk]: /azure/virtual-machines/linux/managed-disks-overview
[matrix]: https://plugins.jenkins.io/matrix-auth
[monitor]: /azure/monitoring-and-diagnostics/
[monitoring-diag]: /azure/architecture/best-practices/monitoring
[multi-master]: https://jenkins.io/doc/book/architecting-for-scale/
[nginx]: https://www.digitalocean.com/community/tutorials/how-to-create-an-ssl-certificate-on-nginx-for-ubuntu-14-04
[nsg]: /azure/virtual-network/virtual-networks-nsg
[quick-start]: /azure/security-center/security-center-get-started
[port443]: /azure/virtual-machines/windows/nsg-quickstart-portal
[premium]: /azure/virtual-machines/linux/premium-storage
[rbac]: /azure/active-directory/role-based-access-control-what-is
[rg]: /azure/azure-resource-manager/resource-group-overview
[scale]: https://jenkins.io/doc/book/architecting-for-scale/
[scale-agent]: /azure/jenkins/jenkins-azure-vm-agents
[selection-guide]: https://jenkins.io/doc/book/hardware-recommendations/
[service-principal]: /azure/active-directory/develop/active-directory-application-objects
[secure-jenkins]: https://jenkins.io/blog/2017/04/20/secure-jenkins-on-azure/
[security-center]: /azure/security-center/security-center-intro
[sizes-linux]: /azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json
[solution]: https://azure.microsoft.com/blog/announcing-the-solution-template-for-jenkins-on-azure/
[sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines/
[storage-plugin]: https://wiki.jenkins.io/display/JENKINS/Windows+Azure+Storage+Plugin
[subnet]: /azure/virtual-network/virtual-network-manage-subnet
[vm-agent]: https://wiki.jenkins.io/display/JENKINS/Azure+VM+Agents+plugin
[vnet]: /azure/virtual-network/virtual-networks-overview
[0]: ./images/jenkins-server.png
