---
title: SAP NetWeaver (Windows) Azure-beli virtuális gépeken AnyDB üzembe helyezése
titleSuffix: Azure Reference Architectures
description: Bevált eljárások az SAP S/4HANA környezetben futó Linux rendszerű Azure-ban magas rendelkezésre állású.
author: lbrader
ms.date: 08/03/2018
ms.topic: reference-architecture
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seodec18, SAP, Windows
ms.openlocfilehash: e866727a40551b60e74fc26878a15a5a48e69cf6
ms.sourcegitcommit: 273e690c0cfabbc3822089c7d8bc743ef41d2b6e
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 02/08/2019
ms.locfileid: "55897626"
---
# <a name="deploy-sap-netweaver-windows-for-anydb-on-azure-virtual-machines"></a><span data-ttu-id="3c012-103">SAP NetWeaver (Windows) Azure-beli virtuális gépeken AnyDB üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="3c012-103">Deploy SAP NetWeaver (Windows) for AnyDB on Azure virtual machines</span></span>

<span data-ttu-id="3c012-104">Ez a referenciaarchitektúra bevált eljárásokat SAP NetWeaver környezetben futó Windows Azure-ban magas rendelkezésre állású mutat be.</span><span class="sxs-lookup"><span data-stu-id="3c012-104">This reference architecture shows a set of proven practices for running SAP NetWeaver in a Windows environment on Azure with high availability.</span></span> <span data-ttu-id="3c012-105">Az adatbázis AnyDB, a bármely támogatott adatbázis-kezelő mellett az SAP HANA SAP kifejezés.</span><span class="sxs-lookup"><span data-stu-id="3c012-105">The database is AnyDB, the SAP term for any supported DBMS besides SAP HANA.</span></span> <span data-ttu-id="3c012-106">Ez az architektúra, amely a szervezet igényeinek megfelelően módosíthatja adott virtuális gép (VM) méretek van telepítve.</span><span class="sxs-lookup"><span data-stu-id="3c012-106">This architecture is deployed with specific virtual machine (VM) sizes that can be changed to accommodate your organization's needs.</span></span>

![SAP NetWeaver (Windows) az Azure virtuális gépeken AnyDB a referencia-architektúra](./images/sap-netweaver.png)

<span data-ttu-id="3c012-108">*Töltse le az architektúra [Visio-fájlját][visio-download].*</span><span class="sxs-lookup"><span data-stu-id="3c012-108">*Download a [Visio file][visio-download] of this architecture.*</span></span>

> [!NOTE]
> <span data-ttu-id="3c012-109">A referenciaarchitektúra üzembe helyezéséhez SAP-termékek és más, nem a Microsoft által gyártott termékek megfelelő licence szükséges.</span><span class="sxs-lookup"><span data-stu-id="3c012-109">Deploying this reference architecture requires appropriate licensing of SAP products and other non-Microsoft technologies.</span></span>

## <a name="architecture"></a><span data-ttu-id="3c012-110">Architektúra</span><span class="sxs-lookup"><span data-stu-id="3c012-110">Architecture</span></span>

<span data-ttu-id="3c012-111">Az architektúra a következő infrastruktúra és a kulcs szoftver összetevőkből áll.</span><span class="sxs-lookup"><span data-stu-id="3c012-111">The architecture consists of the following infrastructure and key software components.</span></span>

<span data-ttu-id="3c012-112">**Virtuális hálózat**.</span><span class="sxs-lookup"><span data-stu-id="3c012-112">**Virtual network**.</span></span> <span data-ttu-id="3c012-113">Az Azure Virtual Network szolgáltatás Azure-erőforrások biztonságosan csatlakozik egymáshoz.</span><span class="sxs-lookup"><span data-stu-id="3c012-113">The Azure Virtual Network service securely connects Azure resources to each other.</span></span> <span data-ttu-id="3c012-114">Ebben az architektúrában a virtuális hálózat egy helyszíni környezetben, az agyban telepített VPN-átjárón keresztül csatlakozik egy [küllős](../hybrid-networking/hub-spoke.md).</span><span class="sxs-lookup"><span data-stu-id="3c012-114">In this architecture, the virtual network connects to an on-premises environment through a VPN gateway deployed in the hub of a [hub-spoke](../hybrid-networking/hub-spoke.md).</span></span> <span data-ttu-id="3c012-115">A küllő a virtuális hálózat, a SAP-alkalmazások és az Adatbázisréteg.</span><span class="sxs-lookup"><span data-stu-id="3c012-115">The spoke is the virtual network used for the SAP applications and database tier.</span></span>

<span data-ttu-id="3c012-116">**Alhálózatok**.</span><span class="sxs-lookup"><span data-stu-id="3c012-116">**Subnets**.</span></span> <span data-ttu-id="3c012-117">A virtuális hálózat minden szint külön alhálózatra van felosztva: alkalmazáshoz (SAP NetWeaver), adatbázis, a megosztott szolgáltatások (jumpbox) és az Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3c012-117">The virtual network is subdivided into separate subnets for each tier: application (SAP NetWeaver), database, shared services (the jumpbox), and Active Directory.</span></span>

<span data-ttu-id="3c012-118">**Virtuális gépek**.</span><span class="sxs-lookup"><span data-stu-id="3c012-118">**Virtual machines**.</span></span> <span data-ttu-id="3c012-119">Ez az architektúra virtuális gépeket használ az alkalmazásrétegek és adatbázisszinten, az alábbiak szerint csoportosítva:</span><span class="sxs-lookup"><span data-stu-id="3c012-119">This architecture uses virtual machines for the application tier and database tier, grouped as follows:</span></span>

- <span data-ttu-id="3c012-120">**SAP NetWeaver**.</span><span class="sxs-lookup"><span data-stu-id="3c012-120">**SAP NetWeaver**.</span></span> <span data-ttu-id="3c012-121">Az alkalmazásrétegek Windows virtuális gépeket használ, és futtatja az SAP Central Services és SAP-alkalmazáskiszolgálókhoz.</span><span class="sxs-lookup"><span data-stu-id="3c012-121">The application tier uses Windows virtual machines and runs SAP Central Services and SAP application servers.</span></span> <span data-ttu-id="3c012-122">A virtuális gépeket, hogy futási központi szolgáltatások magas rendelkezésre állás érdekében az SIOS DataKeeper Cluster Edition által támogatott Windows Server feladatátvevő fürtként vannak konfigurálva.</span><span class="sxs-lookup"><span data-stu-id="3c012-122">The VMs that run Central Services are configured as a Windows Server Failover Cluster for high availability, supported by SIOS DataKeeper Cluster Edition.</span></span>
- <span data-ttu-id="3c012-123">**AnyDB**.</span><span class="sxs-lookup"><span data-stu-id="3c012-123">**AnyDB**.</span></span> <span data-ttu-id="3c012-124">Az adatbázisszint AnyDB futtatja a forrásadatbázis, például a Microsoft SQL Server, Oracle vagy IBM DB2-höz.</span><span class="sxs-lookup"><span data-stu-id="3c012-124">The database tier runs AnyDB as the source database, such as Microsoft SQL Server, Oracle, or IBM DB2.</span></span>
- <span data-ttu-id="3c012-125">**Jumpbox**.</span><span class="sxs-lookup"><span data-stu-id="3c012-125">**Jumpbox**.</span></span> <span data-ttu-id="3c012-126">Más néven bástyagazdagép.</span><span class="sxs-lookup"><span data-stu-id="3c012-126">Also called a bastion host.</span></span> <span data-ttu-id="3c012-127">Ez a biztonságos virtuális gép a hálózat, amely a rendszergazdák használhatják a más virtuális gépekhez való csatlakozáshoz.</span><span class="sxs-lookup"><span data-stu-id="3c012-127">This is a secure virtual machine on the network that administrators use to connect to the other virtual machines.</span></span>
- <span data-ttu-id="3c012-128">**A Windows Server Active Directory-tartományvezérlők**.</span><span class="sxs-lookup"><span data-stu-id="3c012-128">**Windows Server Active Directory domain controllers**.</span></span> <span data-ttu-id="3c012-129">A tartományvezérlők minden olyan virtuális gépek és a tartomány felhasználói szolgálnak.</span><span class="sxs-lookup"><span data-stu-id="3c012-129">The domain controllers are used on all VMs and users in the domain.</span></span>

<span data-ttu-id="3c012-130">**Terheléselosztók**.</span><span class="sxs-lookup"><span data-stu-id="3c012-130">**Load balancers**.</span></span> <span data-ttu-id="3c012-131">[Az Azure Load Balancer](/azure/load-balancer/load-balancer-overview) példányok az alkalmazás szinten alhálózaton lévő virtuális gépek forgalom elosztására használhatók.</span><span class="sxs-lookup"><span data-stu-id="3c012-131">[Azure Load Balancer](/azure/load-balancer/load-balancer-overview) instances are used to distribute traffic to virtual machines in the application tier subnet.</span></span> <span data-ttu-id="3c012-132">Az adatszinten magas rendelkezésre állású elérhető beépített SAP terheléselosztók, az Azure Load Balancer vagy más mechanizmusok, attól függően, az adatbázis-kezelő használatával.</span><span class="sxs-lookup"><span data-stu-id="3c012-132">At the data tier, high availability may be achieved using built-in SAP load balancers, Azure Load Balancer, or other mechanisms, depending on the DBMS.</span></span> <span data-ttu-id="3c012-133">További információkért lásd: [SAP NetWeaver az Azure Virtual Machines DBMS üzembe](/azure/virtual-machines/workloads/sap/dbms-guide).</span><span class="sxs-lookup"><span data-stu-id="3c012-133">For more information, see [Azure Virtual Machines DBMS deployment for SAP NetWeaver](/azure/virtual-machines/workloads/sap/dbms-guide).</span></span>

<span data-ttu-id="3c012-134">**Rendelkezésre állási csoportok**.</span><span class="sxs-lookup"><span data-stu-id="3c012-134">**Availability sets**.</span></span> <span data-ttu-id="3c012-135">Az SAP Web Dispatcher, SAP-alkalmazáskiszolgáló és (A) SCS virtuális gépek, a szerepkörök külön vannak csoportosítva [rendelkezésre állási csoportok](/azure/virtual-machines/windows/tutorial-availability-sets), és a felhasznált szerepkörönként legalább két virtuális gépet.</span><span class="sxs-lookup"><span data-stu-id="3c012-135">Virtual machines for the SAP Web Dispatcher, SAP application server, and (A)SCS, roles are grouped into separate [availability sets](/azure/virtual-machines/windows/tutorial-availability-sets), and at least two virtual machines are provisioned per role.</span></span> <span data-ttu-id="3c012-136">Ez lehetővé teszi a virtuális gépek magasabb szintű támogatásra jogosult [szolgáltatói szerződést](https://azure.microsoft.com/support/legal/sla/virtual-machines) (SLA).</span><span class="sxs-lookup"><span data-stu-id="3c012-136">This makes the virtual machines eligible for a higher [service level agreement](https://azure.microsoft.com/support/legal/sla/virtual-machines) (SLA).</span></span>

<span data-ttu-id="3c012-137">**Hálózati adapterek**.</span><span class="sxs-lookup"><span data-stu-id="3c012-137">**NICs**.</span></span> <span data-ttu-id="3c012-138">[Hálózati adapterek](/azure/virtual-network/virtual-network-network-interface) (NIC) a virtuális hálózaton található virtuális gépek minden kommunikáció engedélyezésére.</span><span class="sxs-lookup"><span data-stu-id="3c012-138">[Network interface cards](/azure/virtual-network/virtual-network-network-interface) (NICs) enable all communication of virtual machines on a virtual network.</span></span>

<span data-ttu-id="3c012-139">**Hálózati biztonsági csoportok**.</span><span class="sxs-lookup"><span data-stu-id="3c012-139">**Network security groups**.</span></span> <span data-ttu-id="3c012-140">Korlátozza a bejövő, kimenő, és belüli alhálózatok közötti adatforgalom a virtuális hálózatban, létrehozhat [hálózati biztonsági csoportok](/azure/virtual-network/virtual-networks-nsg) (NSG-k).</span><span class="sxs-lookup"><span data-stu-id="3c012-140">To restrict incoming, outgoing, and intra-subnet traffic in the virtual network, you can create [network security groups](/azure/virtual-network/virtual-networks-nsg) (NSGs).</span></span>

<span data-ttu-id="3c012-141">**Átjáró**.</span><span class="sxs-lookup"><span data-stu-id="3c012-141">**Gateway**.</span></span> <span data-ttu-id="3c012-142">Az átjáró kiterjeszti a helyszíni hálózat az Azure virtual Networkhöz.</span><span class="sxs-lookup"><span data-stu-id="3c012-142">A gateway extends your on-premises network to the Azure virtual network.</span></span> <span data-ttu-id="3c012-143">[Az ExpressRoute](/azure/architecture/reference-architectures/hybrid-networking/expressroute) az ajánlott Azure-szolgáltatás, amely nem a nyilvános interneten haladnak át, magánhálózati kapcsolatokat hozhat létre, de egy [Site-to-Site](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal) kapcsolat is használható.</span><span class="sxs-lookup"><span data-stu-id="3c012-143">[ExpressRoute](/azure/architecture/reference-architectures/hybrid-networking/expressroute) is the recommended Azure service for creating private connections that do not go over the public Internet, but a [Site-to-Site](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal) connection can also be used.</span></span>

<span data-ttu-id="3c012-144">**Azure Storage**.</span><span class="sxs-lookup"><span data-stu-id="3c012-144">**Azure Storage**.</span></span> <span data-ttu-id="3c012-145">Tartós tároláshoz a virtuális gépek virtuális merevlemez (VHD), amelyekkel [Azure Storage](/azure/storage/storage-standard-storage) megadása kötelező.</span><span class="sxs-lookup"><span data-stu-id="3c012-145">To provide persistent storage of a virtual machine's virtual hard disk (VHD), [Azure Storage](/azure/storage/storage-standard-storage) is required.</span></span> <span data-ttu-id="3c012-146">Azt is használja [Felhőbeli tanúsító](/windows-server/failover-clustering/deploy-cloud-witness) egy feladatátvételi fürt művelet végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="3c012-146">It is also used by [Cloud Witness](/windows-server/failover-clustering/deploy-cloud-witness) to implement a failover cluster operation.</span></span>

## <a name="recommendations"></a><span data-ttu-id="3c012-147">Javaslatok</span><span class="sxs-lookup"><span data-stu-id="3c012-147">Recommendations</span></span>

<span data-ttu-id="3c012-148">Az Ön követelményei eltérhetnek az itt leírt architektúrától.</span><span class="sxs-lookup"><span data-stu-id="3c012-148">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="3c012-149">Ezeket a javaslatokat tekintse kiindulópontnak.</span><span class="sxs-lookup"><span data-stu-id="3c012-149">Use these recommendations as a starting point.</span></span>

### <a name="sap-web-dispatcher-pool"></a><span data-ttu-id="3c012-150">Az SAP Web Dispatcher-készlet</span><span class="sxs-lookup"><span data-stu-id="3c012-150">SAP Web Dispatcher pool</span></span>

<span data-ttu-id="3c012-151">A Web Dispatcher összetevő terheléselosztóként szolgál az SAP-forgalmat az SAP-alkalmazáskiszolgálók között.</span><span class="sxs-lookup"><span data-stu-id="3c012-151">The Web Dispatcher component is used as a load balancer for SAP traffic among the SAP application servers.</span></span> <span data-ttu-id="3c012-152">Magas rendelkezésre állás a Web Dispatcher-összetevő, Azure Load Balancer segítségével a párhuzamos Web Dispatcher-beállítások megvalósításához.</span><span class="sxs-lookup"><span data-stu-id="3c012-152">To achieve high availability for the Web Dispatcher component, Azure Load Balancer is used to implement the parallel Web Dispatcher setup.</span></span> <span data-ttu-id="3c012-153">Web Dispatcher Ciklikus időszeleteléses konfigurációban HTTP (S)-forgalom elosztását az elérhető webes elosztás a terheléselosztók készlet használ.</span><span class="sxs-lookup"><span data-stu-id="3c012-153">Web Dispatcher uses in a round-robin configuration for HTTP(S) traffic distribution among the available Web Dispatchers in the balancers pool.</span></span>

<span data-ttu-id="3c012-154">Azure virtuális gépeken futó SAP NetWeaver kapcsolatos részletekért lásd: [Azure Virtual Machines tervezési és megvalósítási az SAP NetWeaver számára](/azure/virtual-machines/workloads/sap/planning-guide).</span><span class="sxs-lookup"><span data-stu-id="3c012-154">For details about running SAP NetWeaver in Azure VMs, see [Azure Virtual Machines planning and implementation for SAP NetWeaver](/azure/virtual-machines/workloads/sap/planning-guide).</span></span>

### <a name="application-servers-pool"></a><span data-ttu-id="3c012-155">Alkalmazáskészlet-kiszolgálók</span><span class="sxs-lookup"><span data-stu-id="3c012-155">Application servers pool</span></span>

<span data-ttu-id="3c012-156">Bejelentkezési csoportokat ABAP alkalmazáskiszolgálók kezeléséhez, az SMLG tranzakció szolgál.</span><span class="sxs-lookup"><span data-stu-id="3c012-156">To manage logon groups for ABAP application servers, the SMLG transaction is used.</span></span> <span data-ttu-id="3c012-157">A terheléselosztási függvényt az üzenet-kiszolgálón, a központi szolgáltatások használatával oszthatja meg a munkaterhelést SAP alkalmazáskészlet-kiszolgálók között SAPGUIs és RFC forgalmat.</span><span class="sxs-lookup"><span data-stu-id="3c012-157">It uses the load balancing function within the message server of the Central Services to distribute workload among SAP application servers pool for SAPGUIs and RFC traffic.</span></span> <span data-ttu-id="3c012-158">A magas rendelkezésre állású Central Services alkalmazás kiszolgáló kapcsolódni a fürt virtuális hálózatnevét keresztül történik.</span><span class="sxs-lookup"><span data-stu-id="3c012-158">The application server connection to the highly available Central Services is through the cluster virtual network name.</span></span>

### <a name="sap-central-services-cluster"></a><span data-ttu-id="3c012-159">Az SAP Central Services fürt</span><span class="sxs-lookup"><span data-stu-id="3c012-159">SAP Central Services cluster</span></span>

<span data-ttu-id="3c012-160">Ez a referenciaarchitektúra a virtuális gépek központi szolgáltatást futtat az alkalmazás szinten.</span><span class="sxs-lookup"><span data-stu-id="3c012-160">This reference architecture runs Central Services on VMs in the application tier.</span></span> <span data-ttu-id="3c012-161">A központi szolgáltatások egy potenciálisan hibaérzékeny pont (SPOF), egyetlen virtuális gép telepítésekor – szokásos telepítése, ha magas rendelkezésre állás nem követelmény.</span><span class="sxs-lookup"><span data-stu-id="3c012-161">The Central Services is a potential single point of failure (SPOF) when deployed to a single VM—typical deployment when high availability is not a requirement.</span></span> <span data-ttu-id="3c012-162">Egy magas rendelkezésre állású megoldás bevezetésére, vagy egy megosztott lemezfürtök, vagy egy fájlkiszolgáló-megosztás fürt használható.</span><span class="sxs-lookup"><span data-stu-id="3c012-162">To implement a high availability solution, either a shared disk cluster or a file share cluster can be used.</span></span>

<span data-ttu-id="3c012-163">Virtuális gépek megosztott lemezfürt konfigurálásához használja [Windows Server feladatátvételi fürt](https://blogs.sap.com/2018/01/25/how-to-create-sap-resources-in-windows-failover-cluster/).</span><span class="sxs-lookup"><span data-stu-id="3c012-163">To configure VMs for a shared disk cluster, use [Windows Server Failover Cluster](https://blogs.sap.com/2018/01/25/how-to-create-sap-resources-in-windows-failover-cluster/).</span></span> <span data-ttu-id="3c012-164">[Felhőbeli tanúsító](/windows-server/failover-clustering/deploy-cloud-witness) egy kvórum tanúsító ajánlott.</span><span class="sxs-lookup"><span data-stu-id="3c012-164">[Cloud Witness](/windows-server/failover-clustering/deploy-cloud-witness) is recommended as a quorum witness.</span></span> <span data-ttu-id="3c012-165">A feladatátvételi fürtkörnyezetnek támogatásához [az SIOS DataKeeper Cluster Edition](https://azuremarketplace.microsoft.com/marketplace/apps/sios_datakeeper.sios-datakeeper-8) hajtja végre a fürt megosztott kötet függvény szerepét a fürtcsomópontok független lemezeinek replikálásával.</span><span class="sxs-lookup"><span data-stu-id="3c012-165">To support the failover cluster environment, [SIOS DataKeeper Cluster Edition](https://azuremarketplace.microsoft.com/marketplace/apps/sios_datakeeper.sios-datakeeper-8) performs the cluster shared volume function by replicating independent disks owned by the cluster nodes.</span></span> <span data-ttu-id="3c012-166">Az Azure nem natív módon támogatja a megosztott lemezeket, és ezért az SIOS által biztosított megoldások igényel.</span><span class="sxs-lookup"><span data-stu-id="3c012-166">Azure does not natively support shared disks and therefore requires solutions provided by SIOS.</span></span>

<span data-ttu-id="3c012-167">További információkért lásd: "3.</span><span class="sxs-lookup"><span data-stu-id="3c012-167">For details, see "3.</span></span> <span data-ttu-id="3c012-168">Fontos frissítés SAP ügyfelek futó ASCS SIOS az Azure-ban a"következő [SAP alkalmazások futtatása Microsoft platformon](https://blogs.msdn.microsoft.com/saponsqlserver/2017/05/04/sap-on-azure-general-update-for-customers-partners-april-2017/).</span><span class="sxs-lookup"><span data-stu-id="3c012-168">Important Update for SAP Customers Running ASCS on SIOS on Azure” at [Running SAP applications on the Microsoft platform](https://blogs.msdn.microsoft.com/saponsqlserver/2017/05/04/sap-on-azure-general-update-for-customers-partners-april-2017/).</span></span>

<span data-ttu-id="3c012-169">Kezelje a fürtszolgáltatás egy másik úgy, hogy egy fájl megosztási fürtöt a Windows Server feladatátvevő fürt megvalósítását.</span><span class="sxs-lookup"><span data-stu-id="3c012-169">Another way to handle clustering is to implement a file share cluster using Windows Server Failover Cluster.</span></span> <span data-ttu-id="3c012-170">[SAP](https://blogs.sap.com/2018/03/19/migration-from-a-shared-disk-cluster-to-a-file-share-cluster/) nemrég módosította a szolgáltatások központi telepítési minta a /sapmnt globális könyvtárak keresztül UNC elérési út elérésére.</span><span class="sxs-lookup"><span data-stu-id="3c012-170">[SAP](https://blogs.sap.com/2018/03/19/migration-from-a-shared-disk-cluster-to-a-file-share-cluster/) recently modified the Central Services deployment pattern to access the /sapmnt global directories via a UNC path.</span></span> <span data-ttu-id="3c012-171">Ez a változás [nincs szükség](https://blogs.msdn.microsoft.com/saponsqlserver/2017/08/10/high-available-ascs-for-windows-on-file-share-shared-disk-no-longer-required/) SIOS vagy más megosztott lemez megoldások központi szolgáltatások virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="3c012-171">This change [removes the requirement](https://blogs.msdn.microsoft.com/saponsqlserver/2017/08/10/high-available-ascs-for-windows-on-file-share-shared-disk-no-longer-required/) for SIOS or other shared disk solutions on the Central Services VMs.</span></span> <span data-ttu-id="3c012-172">Győződjön meg arról, hogy a /sapmnt UNC megosztást továbbra is ajánlott [magas rendelkezésre állású](https://blogs.sap.com/2017/07/21/how-to-create-a-high-available-sapmnt-share/).</span><span class="sxs-lookup"><span data-stu-id="3c012-172">It is still recommended to ensure that the /sapmnt UNC share is [highly available](https://blogs.sap.com/2017/07/21/how-to-create-a-high-available-sapmnt-share/).</span></span> <span data-ttu-id="3c012-173">Ehhez a központi Services-példánytól függ használatával Windows Server feladatátvevő fürt az [kibővíthető fájlkiszolgáló](https://blogs.msdn.microsoft.com/saponsqlserver/2017/11/14/file-server-with-sofs-and-s2d-as-an-alternative-to-cluster-shared-disk-for-clustering-of-an-sap-ascs-instance-in-azure-is-generally-available/) (SOFS) és a [a közvetlen tárolóhelyek](https://blogs.sap.com/2018/03/07/your-sap-on-azure-part-5-ascs-high-availability-with-storage-spaces-direct/) (S2D) szolgáltatást a Windows Server 2016-ban.</span><span class="sxs-lookup"><span data-stu-id="3c012-173">This can be done on the Central Services instance by using Windows Server Failover Cluster with [Scale Out File Server](https://blogs.msdn.microsoft.com/saponsqlserver/2017/11/14/file-server-with-sofs-and-s2d-as-an-alternative-to-cluster-shared-disk-for-clustering-of-an-sap-ascs-instance-in-azure-is-generally-available/) (SOFS) and the [Storage Spaces Direct](https://blogs.sap.com/2018/03/07/your-sap-on-azure-part-5-ascs-high-availability-with-storage-spaces-direct/) (S2D) feature in Windows Server 2016.</span></span>

### <a name="availability-sets"></a><span data-ttu-id="3c012-174">Rendelkezésre állási csoportok</span><span class="sxs-lookup"><span data-stu-id="3c012-174">Availability sets</span></span>

<span data-ttu-id="3c012-175">A rendelkezésre állási csoportok terjesztése kiszolgálók eltérő fizikai infrastruktúra és a frissítési csoportok számára szolgáltatás rendelkezésre állásának javítása.</span><span class="sxs-lookup"><span data-stu-id="3c012-175">Availability sets distribute servers to different physical infrastructure and update groups to improve service availability.</span></span> <span data-ttu-id="3c012-176">A PUT virtuális gépek ugyanazon szerepben be egy rendelkezésre állási beállítja hardvermeghibásodásokkal szemben az Azure infrastruktúra-karbantartás által okozott állásidő és kielégítése érdekében [SLA-k](https://azure.microsoft.com/support/legal/sla/virtual-machines) (SLA).</span><span class="sxs-lookup"><span data-stu-id="3c012-176">Put virtual machines that perform the same role into an availability sets to help guard against downtime caused by Azure infrastructure maintenance and to meet [SLAs](https://azure.microsoft.com/support/legal/sla/virtual-machines) (SLAs).</span></span> <span data-ttu-id="3c012-177">Két vagy több virtuális gépet egy rendelkezésre állási csoport használata javasolt.</span><span class="sxs-lookup"><span data-stu-id="3c012-177">Two or more virtual machines per availability set is recommended.</span></span>

<span data-ttu-id="3c012-178">Egy készletben lévő összes virtuális gépet ugyanarra a szerepkörre kell elvégeznie.</span><span class="sxs-lookup"><span data-stu-id="3c012-178">All virtual machines in a set must perform the same role.</span></span> <span data-ttu-id="3c012-179">Ne keverje a kiszolgálókat különböző szerepkörök ugyanabban a rendelkezésre állási csoportban.</span><span class="sxs-lookup"><span data-stu-id="3c012-179">Do not mix servers of different roles in the same availability set.</span></span> <span data-ttu-id="3c012-180">Például ne tegyen egy központi szolgáltatások csomópont az azonos rendelkezésre állási csoportot az a kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="3c012-180">For example, don't place a Central Services node in the same availability set with the application server.</span></span>

### <a name="nics"></a><span data-ttu-id="3c012-181">Hálózati adapterek (NIC-k)</span><span class="sxs-lookup"><span data-stu-id="3c012-181">NICs</span></span>

<span data-ttu-id="3c012-182">A hagyományos helyszíni SAP-környezetekhez áthaladó üzleti forgalom a felügyeleti forgalmat leválasszanak gépenként több hálózati adapterrel (NIC) megvalósítása.</span><span class="sxs-lookup"><span data-stu-id="3c012-182">Traditional on-premises SAP deployments implement multiple network interface cards (NICs) per machine to segregate administrative traffic from business traffic.</span></span> <span data-ttu-id="3c012-183">Az Azure a virtuális hálózat, a szoftveresen definiált hálózati által küldött összes forgalom az azonos hálózati háló keresztül.</span><span class="sxs-lookup"><span data-stu-id="3c012-183">On Azure, the virtual network is a software-defined network that sends all traffic through the same network fabric.</span></span> <span data-ttu-id="3c012-184">A több hálózati adapter használatát, ezért nem szükséges.</span><span class="sxs-lookup"><span data-stu-id="3c012-184">Therefore, the use of multiple NICs is unnecessary.</span></span> <span data-ttu-id="3c012-185">Azonban ha a szervezet igényeinek áthaladó forgalmat leválasszanak, telepítheti virtuális gépenként több hálózati adapterrel, minden egyes hálózati adapter csatlakoztatása egy másik alhálózathoz, és NSG-k segítségével különböző hozzáférés-vezérlési házirendeket kényszerítése.</span><span class="sxs-lookup"><span data-stu-id="3c012-185">However, if your organization needs to segregate traffic, you can deploy multiple NICs per VM, connect each NIC to a different subnet, and then use NSGs to enforce different access control policies.</span></span>

### <a name="subnets-and-nsgs"></a><span data-ttu-id="3c012-186">Alhálózat és NSG-kkel</span><span class="sxs-lookup"><span data-stu-id="3c012-186">Subnets and NSGs</span></span>

<span data-ttu-id="3c012-187">Ez az architektúra a virtuális hálózat címtere alterületét alhálózatra.</span><span class="sxs-lookup"><span data-stu-id="3c012-187">This architecture subdivides the virtual network address space into subnets.</span></span> <span data-ttu-id="3c012-188">Ez a referenciaarchitektúra elsősorban az alkalmazás szint alhálózatáról összpontosít.</span><span class="sxs-lookup"><span data-stu-id="3c012-188">This reference architecture focuses primarily on the application tier subnet.</span></span> <span data-ttu-id="3c012-189">Minden egyes alhálózathoz is társítható egy NSG-t, amely meghatározza a hozzáférési szabályzatok az alhálózat.</span><span class="sxs-lookup"><span data-stu-id="3c012-189">Each subnet can be associated with a NSG that defines the access policies for the subnet.</span></span> <span data-ttu-id="3c012-190">Helyezze el alkalmazáskiszolgálók egy külön alhálózatot védelmére azokat könnyebben, mivel kezeli az alhálózat biztonsági házirendek, nem az egyes kiszolgálókon.</span><span class="sxs-lookup"><span data-stu-id="3c012-190">Place application servers on a separate subnet so you can secure them more easily by managing the subnet security policies, not the individual servers.</span></span>

<span data-ttu-id="3c012-191">Amikor egy NSG-t hozzárendelik egy alhálózathoz, az alhálózaton belüli összes kiszolgálóra vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="3c012-191">When a NSG is associated with a subnet, it applies to all the servers within the subnet.</span></span> <span data-ttu-id="3c012-192">A kiszolgálók egy alhálózat részletesen szabályozhatja az NSG-k használatával kapcsolatos további információkért lásd: [hálózati biztonsági csoportokkal a hálózati forgalom szűrése](https://azure.microsoft.com/blog/multiple-vm-nics-and-network-virtual-appliances-in-azure).</span><span class="sxs-lookup"><span data-stu-id="3c012-192">For more information about using NSGs for fine-grained control over the servers in a subnet, see [Filter network traffic with network security groups](https://azure.microsoft.com/blog/multiple-vm-nics-and-network-virtual-appliances-in-azure).</span></span>

### <a name="load-balancers"></a><span data-ttu-id="3c012-193">Terheléselosztók</span><span class="sxs-lookup"><span data-stu-id="3c012-193">Load balancers</span></span>

<span data-ttu-id="3c012-194">[Az SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/8fe37933114e6fe10000000a421937/frameset.htm) kezeli a egy kiszolgálókészlethez, SAP-alkalmazáskiszolgálókhoz HTTP (S)-forgalom terheléselosztásához.</span><span class="sxs-lookup"><span data-stu-id="3c012-194">[SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/8fe37933114e6fe10000000a421937/frameset.htm) handles load balancing of HTTP(S) traffic to a pool of SAP application servers.</span></span>

<span data-ttu-id="3c012-195">Egy SAP-kiszolgálóhoz DIAG protokoll vagy függvény hívások (RFC) csatlakozó ügyfeleken az SAP grafikus felhasználói Felülettel irányuló forgalom továbbítására, a központi szolgáltatások üzenetkiszolgáló SAP-alkalmazáskiszolgáló révén a terhelés elosztja [csoportok bejelentkezési](https://wiki.scn.sap.com/wiki/display/SI/ABAP+Logon+Group+based+Load+Balancing), ezért nem további terhelést a terheléselosztó van szükség.</span><span class="sxs-lookup"><span data-stu-id="3c012-195">For traffic from SAP GUI clients connecting a SAP server via DIAG protocol or Remote Function Calls (RFC), the Central Services message server balances the load through SAP application server [logon groups](https://wiki.scn.sap.com/wiki/display/SI/ABAP+Logon+Group+based+Load+Balancing), so no additional load balancer is needed.</span></span>

### <a name="azure-storage"></a><span data-ttu-id="3c012-196">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="3c012-196">Azure Storage</span></span>

<span data-ttu-id="3c012-197">Minden adatbázis kiszolgáló virtuális gép javasoljuk, Azure Premium Storage használatát az egyenletes olvasási/írási késés érdekében.</span><span class="sxs-lookup"><span data-stu-id="3c012-197">For all database server virtual machines, we recommend using Azure Premium Storage for consistent read/write latency.</span></span> <span data-ttu-id="3c012-198">Minden egypéldányos virtuális gép Premium Storage tárolást használ minden operációsrendszer-lemez és adatlemezek esetén lásd: [virtuális gépekre vonatkozó SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="3c012-198">For any single instance virtual machine using Premium Storage for all operating system disks and data disks, see [SLA for Virtual Machines](https://azure.microsoft.com/support/legal/sla/virtual-machines).</span></span> <span data-ttu-id="3c012-199">Ezenkívül az SAP-rendszereit, azt javasoljuk, prémium szintű [Azure Managed Disks](/azure/storage/storage-managed-disks-overview) minden esetben.</span><span class="sxs-lookup"><span data-stu-id="3c012-199">Also, for production SAP systems, we recommend using Premium [Azure Managed Disks](/azure/storage/storage-managed-disks-overview) in all cases.</span></span> <span data-ttu-id="3c012-200">Megbízhatóság, a Managed Disks kezelésére használhatók a VHD-fájlokat a lemezeket.</span><span class="sxs-lookup"><span data-stu-id="3c012-200">For reliability, Managed Disks are used to manage the VHD files for the disks.</span></span> <span data-ttu-id="3c012-201">A felügyelt lemezek győződjön meg arról, hogy a lemezek, virtuális gépek rendelkezésre állási csoporton belül elkülönített kritikus hibapontok elkerülése érdekében.</span><span class="sxs-lookup"><span data-stu-id="3c012-201">Managed disks ensure that the disks for virtual machines within an availability set are isolated to avoid single points of failure.</span></span>

<span data-ttu-id="3c012-202">Az SAP-alkalmazáskiszolgálókhoz, beleértve a szolgáltatások központi virtuális gépeket a standard szintű Azure Storage használatával költségcsökkentés, mert az alkalmazás végrehajtása a memóriában történik, és a lemezek csak naplózás használnak.</span><span class="sxs-lookup"><span data-stu-id="3c012-202">For SAP application servers, including the Central Services virtual machines, you can use Azure Standard Storage to reduce cost, because application execution takes place in memory and disks are used for logging only.</span></span> <span data-ttu-id="3c012-203">Azonban jelenleg standard szintű Storage csak minősítéssel nem felügyelt tárfiók.</span><span class="sxs-lookup"><span data-stu-id="3c012-203">However, at this time, Standard Storage is only certified for unmanaged storage.</span></span> <span data-ttu-id="3c012-204">Mivel az alkalmazáskiszolgálókat üzemeltet adatokat, költségek minimálisra csökkentése érdekében használhatja a kisebb P4 és a P6 prémium szintű Storage-lemezeket.</span><span class="sxs-lookup"><span data-stu-id="3c012-204">Since application servers do not host any data, you can also use the smaller P4 and P6 Premium Storage disks to help minimize cost.</span></span>

<span data-ttu-id="3c012-205">Az Azure Storage is használják [Felhőbeli tanúsító](/windows-server/failover-clustering/deploy-cloud-witness) kvórum fenntartásához egy eszközzel, az elsődleges régióban, ahol a fürtben található forrásadatok egy távoli Azure-régióban.</span><span class="sxs-lookup"><span data-stu-id="3c012-205">Azure Storage is also used by [Cloud Witness](/windows-server/failover-clustering/deploy-cloud-witness) to maintain quorum with a device in a remote Azure region away from the primary region where the cluster resides.</span></span>

<span data-ttu-id="3c012-206">Az adattár biztonsági mentéséhez javasoljuk az Azure- [coolaccess szint](/azure/storage/storage-blob-storage-tiers) és [archív hozzáférési szint tárolási](/azure/storage/storage-blob-storage-tiers).</span><span class="sxs-lookup"><span data-stu-id="3c012-206">For the backup data store, we recommend using Azure [coolaccess tier](/azure/storage/storage-blob-storage-tiers) and [archive access tier storage](/azure/storage/storage-blob-storage-tiers).</span></span> <span data-ttu-id="3c012-207">Tárolási szintek költséghatékony módon a ritkán elért hosszú élettartamú adatok tárolására.</span><span class="sxs-lookup"><span data-stu-id="3c012-207">These storage tiers are cost-effective ways to store long-lived data that is infrequently accessed.</span></span>

## <a name="performance-considerations"></a><span data-ttu-id="3c012-208">A teljesítménnyel kapcsolatos megfontolások</span><span class="sxs-lookup"><span data-stu-id="3c012-208">Performance considerations</span></span>

<span data-ttu-id="3c012-209">SAP-alkalmazáskiszolgálókhoz állandó kommunikációt, az adatbázis-kiszolgálók végzi.</span><span class="sxs-lookup"><span data-stu-id="3c012-209">SAP application servers carry on constant communications with the database servers.</span></span> <span data-ttu-id="3c012-210">A teljesítmény kritikus fontosságú alkalmazásokat futtató bármilyen adatbázis platformokon, beleértve az SAP HANA, érdemes lehet engedélyezni az [Írásgyorsító](/azure/virtual-machines/linux/how-to-enable-write-accelerator) napló írási késése javítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="3c012-210">For performance-critical applications running on any database platforms, including SAP HANA, consider enabling [Write Accelerator](/azure/virtual-machines/linux/how-to-enable-write-accelerator) to improve log write latency.</span></span> <span data-ttu-id="3c012-211">Kiszolgálóközi kommunikáció optimalizálása érdekében használja a [gyorsított hálózati](https://azure.microsoft.com/blog/linux-and-windows-networking-performance-enhancements-accelerated-networking/).</span><span class="sxs-lookup"><span data-stu-id="3c012-211">To optimize inter-server communications, use the [Accelerated Network](https://azure.microsoft.com/blog/linux-and-windows-networking-performance-enhancements-accelerated-networking/).</span></span> <span data-ttu-id="3c012-212">Vegye figyelembe, hogy a gyorsítók csak bizonyos Virtuálisgép-sorozatok érhető el.</span><span class="sxs-lookup"><span data-stu-id="3c012-212">Note that these accelerators are available only for certain VM series.</span></span>

<span data-ttu-id="3c012-213">Magas IOPS és átviteli sebessége érhető el, az általános tárolási köteten található eljárásokat [teljesítményoptimalizálás](/azure/virtual-machines/windows/premium-storage-performance) Azure tárolási elrendezést a alkalmazni.</span><span class="sxs-lookup"><span data-stu-id="3c012-213">To achieve high IOPS and disk bandwidth throughput, the common practices in storage volume [performance optimization](/azure/virtual-machines/windows/premium-storage-performance) apply to Azure storage layout.</span></span> <span data-ttu-id="3c012-214">Például egy csíkozott lemez kötet létrehozása több lemez összevonása növeli a i/o-teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="3c012-214">For example, combining multiple disks together to create a striped disk volume improves IO performance.</span></span> <span data-ttu-id="3c012-215">A tárolóban található ritkán változó tartalmak olvasási gyorsítótárazásának engedélyezésével növelhető az adatelérés sebessége.</span><span class="sxs-lookup"><span data-stu-id="3c012-215">Enabling the read cache on storage content that changes infrequently enhances the speed of data retrieval.</span></span>

<span data-ttu-id="3c012-216">Az SQL, az SAP a [Top 10 kulcs szempontjai SAP-alkalmazások üzembe helyezése az Azure-ban](https://blogs.msdn.microsoft.com/saponsqlserver/2015/05/25/top-10-key-considerations-for-deploying-sap-applications-on-azure/) blog kiváló tanácsokat az SAP számítási feladatok SQL Server az Azure storage optimalizálásához.</span><span class="sxs-lookup"><span data-stu-id="3c012-216">For SAP on SQL, the [Top 10 Key Considerations for Deploying SAP Applications on Azure](https://blogs.msdn.microsoft.com/saponsqlserver/2015/05/25/top-10-key-considerations-for-deploying-sap-applications-on-azure/) blog offers excellent advice on optimizing Azure storage for SAP workloads on SQL Server.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="3c012-217">Méretezési szempontok</span><span class="sxs-lookup"><span data-stu-id="3c012-217">Scalability considerations</span></span>

<span data-ttu-id="3c012-218">Az SAP-alkalmazási rétegben az Azure számos különféle virtuálisgép-méretek vertikális és horizontális felskálázás kínál. A teljes listát lásd: [SAP-jegyzetnek 1928533](https://launchpad.support.sap.com/#/notes/1928533) – SAP alkalmazások az Azure-ban: Támogatott termékek és Azure Virtuálisgép-típusok.</span><span class="sxs-lookup"><span data-stu-id="3c012-218">At the SAP application layer, Azure offers a wide range of virtual machine sizes for scaling up and scaling out. For an inclusive list, see [SAP note 1928533](https://launchpad.support.sap.com/#/notes/1928533) - SAP Applications on Azure: Supported Products and Azure VM Types.</span></span> <span data-ttu-id="3c012-219">(SAP Service Marketplace-fiók szükséges az eléréshez).</span><span class="sxs-lookup"><span data-stu-id="3c012-219">(SAP Service Marketplace account required for access).</span></span> <span data-ttu-id="3c012-220">SAP-alkalmazáskiszolgálókhoz, és a központi szolgáltatások fürtök méretezhetők felfelé és lefelé vagy horizontálisan felskálázhat további példányok hozzáadása révén.</span><span class="sxs-lookup"><span data-stu-id="3c012-220">SAP application servers and the Central Services clusters can scale up/down or scale out by adding more instances.</span></span> <span data-ttu-id="3c012-221">A AnyDB adatbázis felfelé és lefelé méretezését is, de nem horizontális felskálázás. Az SAP adatbázis AnyDB tárolója nem támogatja a horizontális skálázás.</span><span class="sxs-lookup"><span data-stu-id="3c012-221">The AnyDB database can scale up/down but does not scale out. The SAP database container for AnyDB does not support sharding.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="3c012-222">Rendelkezésre állási szempontok</span><span class="sxs-lookup"><span data-stu-id="3c012-222">Availability considerations</span></span>

<span data-ttu-id="3c012-223">Erőforrás-redundanciát a magas rendelkezésre állású infrastruktúra-megoldások az általános témát.</span><span class="sxs-lookup"><span data-stu-id="3c012-223">Resource redundancy is the general theme in highly available infrastructure solutions.</span></span> <span data-ttu-id="3c012-224">Az olyan vállalatok, amelyek kevésbé szigorú garantált szolgáltatási szint egypéldányos Azure virtuális gépek kínálnak hasznos üzemidővel SLA-t.</span><span class="sxs-lookup"><span data-stu-id="3c012-224">For enterprises that have a less stringent SLA, single-instance Azure VMs offer an uptime SLA.</span></span> <span data-ttu-id="3c012-225">További információkért lásd: [Azure szolgáltatásiszint-szerződés](https://azure.microsoft.com/support/legal/sla/).</span><span class="sxs-lookup"><span data-stu-id="3c012-225">For more information, see [Azure Service Level Agreement](https://azure.microsoft.com/support/legal/sla/).</span></span>

<span data-ttu-id="3c012-226">A SAP alkalmazás elosztott telepítése a rendszer replikálja az alapul szolgáló telepítés magas rendelkezésre állás.</span><span class="sxs-lookup"><span data-stu-id="3c012-226">In this distributed installation of the SAP application, the base installation is replicated to achieve high availability.</span></span> <span data-ttu-id="3c012-227">Az architektúra minden rétegében a magas rendelkezésre állás kialakítása változik.</span><span class="sxs-lookup"><span data-stu-id="3c012-227">For each layer of the architecture, the high availability design varies.</span></span>

### <a name="application-tier"></a><span data-ttu-id="3c012-228">Alkalmazásrétegek</span><span class="sxs-lookup"><span data-stu-id="3c012-228">Application tier</span></span>

<span data-ttu-id="3c012-229">Magas rendelkezésre állás az SAP Web Dispatcher redundáns példányokkal érhető el.</span><span class="sxs-lookup"><span data-stu-id="3c012-229">High availability for SAP Web Dispatcher is achieved with redundant instances.</span></span> <span data-ttu-id="3c012-230">Lásd: [SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw70ehp2/7.02.16/en-us/48/8fe37933114e6fe10000000a421937/frameset.htm) az SAP dokumentációjában.</span><span class="sxs-lookup"><span data-stu-id="3c012-230">See [SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw70ehp2/7.02.16/en-us/48/8fe37933114e6fe10000000a421937/frameset.htm) in the SAP Documentation.</span></span>

<span data-ttu-id="3c012-231">A központi szolgáltatások magas rendelkezésre állású Windows Server feladatátvevő fürt segítségével valósul meg.</span><span class="sxs-lookup"><span data-stu-id="3c012-231">High availability of the Central Services is implemented with Windows Server Failover Cluster.</span></span> <span data-ttu-id="3c012-232">Üzembe helyezett Azure-ban, a feladatátvevő fürt a fürttároló konfigurálható két módszerekkel: vagy fürtözött megosztott kötet vagy egy fájlmegosztás.</span><span class="sxs-lookup"><span data-stu-id="3c012-232">When deployed on Azure, the cluster storage for the failover cluster can be configured using two approaches: either a clustered shared volume or a file share.</span></span>

<span data-ttu-id="3c012-233">Mivel a megosztott lemezeket nem lehetséges az Azure-ban, az SIOS Datakeeper van a tartalom a fürt csomópontjaihoz csatolt független lemezek replikálásához használt, és a meghajtók absztrakt fürtként megosztott fürtkötet a kezelő számára.</span><span class="sxs-lookup"><span data-stu-id="3c012-233">Since shared disks are not possible on Azure, SIOS Datakeeper is used to replicate the content of independent disks attached to the cluster nodes and to abstract the drives as a cluster shared volume for the cluster manager.</span></span> <span data-ttu-id="3c012-234">A megvalósítás részleteit lásd: [futó SAP ASCS fürtözése az Azure-ban](https://blogs.msdn.microsoft.com/saponsqlserver/2015/05/20/clustering-sap-ascs-instance-using-windows-server-failover-cluster-on-microsoft-azure-with-sios-datakeeper-and-azure-internal-load-balancer/).</span><span class="sxs-lookup"><span data-stu-id="3c012-234">For implementation details, see [Clustering SAP ASCS on Azure](https://blogs.msdn.microsoft.com/saponsqlserver/2015/05/20/clustering-sap-ascs-instance-using-windows-server-failover-cluster-on-microsoft-azure-with-sios-datakeeper-and-azure-internal-load-balancer/).</span></span>

<span data-ttu-id="3c012-235">Egy másik lehetőség az, hogy által kiszolgált fájlmegosztást a [méretezési ki Fileserver](https://blogs.msdn.microsoft.com/saponsqlserver/2017/11/14/file-server-with-sofs-and-s2d-as-an-alternative-to-cluster-shared-disk-for-clustering-of-an-sap-ascs-instance-in-azure-is-generally-available/) (SOFS).</span><span class="sxs-lookup"><span data-stu-id="3c012-235">Another option is to use a file share served up by the [Scale Out Fileserver](https://blogs.msdn.microsoft.com/saponsqlserver/2017/11/14/file-server-with-sofs-and-s2d-as-an-alternative-to-cluster-shared-disk-for-clustering-of-an-sap-ascs-instance-in-azure-is-generally-available/) (SOFS).</span></span> <span data-ttu-id="3c012-236">SOFS-ajánlatok a refs megosztások fürtként is használhat megosztott fürtkötet a Windows-fürt számára.</span><span class="sxs-lookup"><span data-stu-id="3c012-236">SOFS offers resilient file shares you can use as a cluster shared volume for the Windows cluster.</span></span> <span data-ttu-id="3c012-237">Egy SOFS-fürt központi szolgáltatásokat több csomóponton között is megosztható.</span><span class="sxs-lookup"><span data-stu-id="3c012-237">A SOFS cluster can be shared among multiple Central Services nodes.</span></span> <span data-ttu-id="3c012-238">Jelen cikk írásakor az SOFS szolgál csak magas rendelkezésre állás kialakítása, mert az SOFS-fürthöz nem terjed ki a vész-helyreállítási támogatás biztosításához a régióban.</span><span class="sxs-lookup"><span data-stu-id="3c012-238">As of this writing, SOFS is used only for high availability design, because the SOFS cluster does not extend across regions to provide disaster recovery support.</span></span>

<span data-ttu-id="3c012-239">Magas rendelkezésre állás az SAP-alkalmazáskiszolgálók a forgalmat az alkalmazáskiszolgálók a készletben lévő terheléselosztási használatával érhető el.</span><span class="sxs-lookup"><span data-stu-id="3c012-239">High availability for the SAP application servers is achieved by load balancing traffic within a pool of application servers.</span></span>
<span data-ttu-id="3c012-240">Lásd: [SAP-tanúsítványok és a Microsoft Azure-on futó konfigurációk](/azure/virtual-machines/workloads/sap/sap-certifications).</span><span class="sxs-lookup"><span data-stu-id="3c012-240">See [SAP certifications and configurations running on Microsoft Azure](/azure/virtual-machines/workloads/sap/sap-certifications).</span></span>

### <a name="database-tier"></a><span data-ttu-id="3c012-241">Adatbázis-szint</span><span class="sxs-lookup"><span data-stu-id="3c012-241">Database tier</span></span>

<span data-ttu-id="3c012-242">Ez a referenciaarchitektúra azt feltételezi, hogy a forrásadatbázis on AnyDB fut – például az SQL Server, SAP ASE, IBM DB2-höz vagy az Oracle, a DBMS.</span><span class="sxs-lookup"><span data-stu-id="3c012-242">This reference architecture assumes the source database is running on AnyDB—that is, a DBMS such as SQL Server, SAP ASE, IBM DB2, or Oracle.</span></span> <span data-ttu-id="3c012-243">Az adatbázisszint natív replikációs funkciót biztosít a replikált csomópontok közötti manuális vagy automatikus feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="3c012-243">The database tier's native replication feature provides either manual or automatic failover between replicated nodes.</span></span>

<span data-ttu-id="3c012-244">Meghatározott adatbázis-rendszerek megvalósítási kapcsolatban lásd: [SAP NetWeaver az Azure Virtual Machines DBMS üzembe](/azure/virtual-machines/workloads/sap/dbms-guide).</span><span class="sxs-lookup"><span data-stu-id="3c012-244">For implementation details about specific database systems, see [Azure Virtual Machines DBMS deployment for SAP NetWeaver](/azure/virtual-machines/workloads/sap/dbms-guide).</span></span>

## <a name="disaster-recovery-considerations"></a><span data-ttu-id="3c012-245">Vészhelyreállítási szempontok</span><span class="sxs-lookup"><span data-stu-id="3c012-245">Disaster recovery considerations</span></span>

<span data-ttu-id="3c012-246">A vészhelyreállítás (DR) meg kell tudni átadja a feladatokat egy másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="3c012-246">For disaster recovery (DR), you must be able to fail over to a secondary region.</span></span> <span data-ttu-id="3c012-247">Minden egyes réteg más stratégiával biztosít vészhelyreállítási (DR) védelmet.</span><span class="sxs-lookup"><span data-stu-id="3c012-247">Each tier uses a different strategy to provide disaster recovery (DR) protection.</span></span>

- <span data-ttu-id="3c012-248">**Kiszolgálók alkalmazásrétegek**.</span><span class="sxs-lookup"><span data-stu-id="3c012-248">**Application servers tier**.</span></span> <span data-ttu-id="3c012-249">SAP-alkalmazáskiszolgálók nem tartalmaznak üzleti adatokat.</span><span class="sxs-lookup"><span data-stu-id="3c012-249">SAP application servers do not contain business data.</span></span> <span data-ttu-id="3c012-250">Az Azure-ban, egy egyszerű Vészhelyreállítási stratégia lehet SAP-alkalmazáskiszolgálókhoz létrehozni a másodlagos régióba, majd leállíthatja őket.</span><span class="sxs-lookup"><span data-stu-id="3c012-250">On Azure, a simple DR strategy is to create SAP application servers in the secondary region, then shut them down.</span></span> <span data-ttu-id="3c012-251">Bármilyen konfigurációmódosítás vagy kernelfrissítés az elsődleges alkalmazáskiszolgálón, hogy a módosításokat át kell másolni a virtuális gépek a másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="3c012-251">Upon any configuration changes or kernel updates on the primary application server, the same changes must be copied to the virtual machines in the secondary region.</span></span> <span data-ttu-id="3c012-252">Például a kernel végrehajtható másolja a Vészhelyreállítási virtuális gépekhez.</span><span class="sxs-lookup"><span data-stu-id="3c012-252">For example, the kernel executables copied to the DR virtual machines.</span></span> <span data-ttu-id="3c012-253">Az automatikus replikálását egy másodlagos régióba alkalmazáskiszolgálók [Azure Site Recovery](/azure/site-recovery/site-recovery-overview) az ajánlott megoldás.</span><span class="sxs-lookup"><span data-stu-id="3c012-253">For automatic replication of application servers to a secondary region, [Azure Site Recovery](/azure/site-recovery/site-recovery-overview) is the recommended solution.</span></span>

- <span data-ttu-id="3c012-254">**Központi szolgáltatások**.</span><span class="sxs-lookup"><span data-stu-id="3c012-254">**Central Services**.</span></span> <span data-ttu-id="3c012-255">Az SAP alkalmazáscsoport ezen összetevője szintén nem tárol üzleti adatokat.</span><span class="sxs-lookup"><span data-stu-id="3c012-255">This component of the SAP application stack also does not persist business data.</span></span> <span data-ttu-id="3c012-256">A vészhelyreállítási régióban lévő virtuális gép futtatása a központi szolgáltatások szerepkört hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="3c012-256">You can build a VM in the disaster recovery region to run the Central Services role.</span></span> <span data-ttu-id="3c012-257">A szinkronizálásához az elsődleges Central Services csomópont csak tartalma a /sapmnt megosztási tartalom.</span><span class="sxs-lookup"><span data-stu-id="3c012-257">The only content from the primary Central Services node to synchronize is the /sapmnt share content.</span></span> <span data-ttu-id="3c012-258">Is ha konfigurációmódosítás vagy kernelfrissítés történik meg a elsődleges központi szolgáltatások kiszolgálójára, azokat meg kell ismételni a közép-szolgáltatásokat futtató a vészhelyreállítási régióban lévő virtuális Gépen.</span><span class="sxs-lookup"><span data-stu-id="3c012-258">Also, if configuration changes or kernel updates take place on the primary Central Services servers, they must be repeated on the VM in the disaster recovery region running Central Services.</span></span> <span data-ttu-id="3c012-259">A két kiszolgáló szinkronizálását, vagy az Azure Site Recovery replikálja a fürtcsomópontok, vagy egyszerűen csak egy egyszerű ütemezett másolási feladattal /sapmnt átmásolása a vészhelyreállítási régióban használhatja.</span><span class="sxs-lookup"><span data-stu-id="3c012-259">To synchronize the two servers, you can use either Azure Site Recovery to replicate the cluster nodes or simply use a regularly scheduled copy job to copy /sapmnt to the disaster recovery region.</span></span> <span data-ttu-id="3c012-260">További információ az egyszerű replikációs mód létrehozási, másolási és tesztelési feladatátvételi folyamatok letöltési [SAP NetWeaver: A Hyper-V és a Microsoft Azure-alapú vészhelyreállítási megoldás](https://download.microsoft.com/download/9/5/6/956FEDC3-702D-4EFB-A7D3-2DB7505566B6/SAP%20NetWeaver%20-%20Building%20an%20Azure%20based%20Disaster%20Recovery%20Solution%20V1_5%20.docx), és hivatkozzon a "4.3.</span><span class="sxs-lookup"><span data-stu-id="3c012-260">For details about this simple replication method's build, copy, and test failover process, download [SAP NetWeaver: Building a Hyper-V and Microsoft Azure–based Disaster Recovery Solution](https://download.microsoft.com/download/9/5/6/956FEDC3-702D-4EFB-A7D3-2DB7505566B6/SAP%20NetWeaver%20-%20Building%20an%20Azure%20based%20Disaster%20Recovery%20Solution%20V1_5%20.docx), and refer to "4.3.</span></span> <span data-ttu-id="3c012-261">SAP SPOF layer (ASCS)” (SAP SPOF réteg – ASCS) fejezetet.</span><span class="sxs-lookup"><span data-stu-id="3c012-261">SAP SPOF layer (ASCS)."</span></span>

- <span data-ttu-id="3c012-262">**Adatbázisréteg**.</span><span class="sxs-lookup"><span data-stu-id="3c012-262">**Database tier**.</span></span> <span data-ttu-id="3c012-263">DR leginkább az adatbázis a saját integrált replikációs technológiával van megvalósítva.</span><span class="sxs-lookup"><span data-stu-id="3c012-263">DR is best implemented with the database's own integrated replication technology.</span></span> <span data-ttu-id="3c012-264">Esetén az SQL Server például azt javasoljuk, AlwaysOn rendelkezésre állási csoport létesíteni egy távoli régióba, a replika kézi feladatátvételre tranzakció aszinkron módon replikál.</span><span class="sxs-lookup"><span data-stu-id="3c012-264">In the case of SQL Server, for example, we recommend using AlwaysOn Availability Group to establish a replica in a remote region, replicating transactions asynchronously with manual failover.</span></span> <span data-ttu-id="3c012-265">Aszinkron replikáció elkerülhető az elsődleges helyen interaktív számítási feladatai teljesítményével lehet.</span><span class="sxs-lookup"><span data-stu-id="3c012-265">Asynchronous replication avoids an impact to the performance of interactive workloads at the primary site.</span></span> <span data-ttu-id="3c012-266">Manuális feladatátvétel személy elemezheti a DR hatását, és döntse el, ha a DR helyről működő indokolt lehetőséget kínál.</span><span class="sxs-lookup"><span data-stu-id="3c012-266">Manual failover offers the opportunity for a person to evaluate the DR impact and decide if operating from the DR site is justified.</span></span>

<span data-ttu-id="3c012-267">Az Azure Site Recovery segítségével automatikusan hozhatja létre az eredeti egy teljes körűen replikált éles webhelyhez, futtatnia kell a testre szabott [üzembehelyezési szkriptek](/azure/site-recovery/site-recovery-runbook-automation).</span><span class="sxs-lookup"><span data-stu-id="3c012-267">To use Azure Site Recovery to automatically build out a fully replicated production site of your original, you must run customized [deployment scripts](/azure/site-recovery/site-recovery-runbook-automation).</span></span> <span data-ttu-id="3c012-268">A Site Recovery először üzembe helyezi a virtuális gépek rendelkezésre állási csoportokban, majd a futtatások parancsfájlok erőforrások hozzáadásához például a terheléselosztók.</span><span class="sxs-lookup"><span data-stu-id="3c012-268">Site Recovery first deploys the VMs in availability sets, then runs scripts to add resources such as load balancers.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="3c012-269">Felügyeleti szempontok</span><span class="sxs-lookup"><span data-stu-id="3c012-269">Manageability considerations</span></span>

<span data-ttu-id="3c012-270">Az Azure különféle funkciót nyújt [monitorozási és diagnosztikai](/azure/architecture/best-practices/monitoring) infrastruktúra átfogó.</span><span class="sxs-lookup"><span data-stu-id="3c012-270">Azure provides several functions for [monitoring and diagnostics](/azure/architecture/best-practices/monitoring) of the overall infrastructure.</span></span> <span data-ttu-id="3c012-271">Ezenkívül fejlett monitorozását az Azure-beli virtuális gépek kezelése az Azure Operations Management Suite (OMS).</span><span class="sxs-lookup"><span data-stu-id="3c012-271">Also, enhanced monitoring of Azure virtual machines is handled by Azure Operations Management Suite (OMS).</span></span>

<span data-ttu-id="3c012-272">Az erőforrások és az SAP-infrastruktúra szolgáltatási teljesítményéhez SAP-alapú figyelést biztosít a [Azure SAP Enhanced Monitoring](/azure/virtual-machines/workloads/sap/deployment-guide#detailed-tasks-for-sap-software-deployment) bővítmény használatával kerül sor.</span><span class="sxs-lookup"><span data-stu-id="3c012-272">To provide SAP-based monitoring of resources and service performance of the SAP infrastructure, the [Azure SAP Enhanced Monitoring](/azure/virtual-machines/workloads/sap/deployment-guide#detailed-tasks-for-sap-software-deployment) extension is used.</span></span> <span data-ttu-id="3c012-273">Ez a bővítmény betölti az Azure monitorozási statisztikáit az SAP alkalmazásba az operációs rendszer monitorozása és a DBA Cockpit funkcióinak használata céljából.</span><span class="sxs-lookup"><span data-stu-id="3c012-273">This extension feeds Azure monitoring statistics into the SAP application for operating system monitoring and DBA Cockpit functions.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="3c012-274">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="3c012-274">Security considerations</span></span>

<span data-ttu-id="3c012-275">Az SAP egy saját felhasználófelügyeleti motorral (UME-vel) vezérli a szerepköralapú hozzáféréseket és az engedélyezést az SAP alkalmazáson belül.</span><span class="sxs-lookup"><span data-stu-id="3c012-275">SAP has its own Users Management Engine (UME) to control role-based access and authorization within the SAP application.</span></span> <span data-ttu-id="3c012-276">További információkért lásd: [biztonsági útmutató ABAP SAP NetWeaver alkalmazáskiszolgáló](https://help.sap.com/viewer/864321b9b3dd487d94c70f6a007b0397/7.4.19) és [SAP NetWeaver alkalmazás Server Java biztonsági útmutató](https://help.sap.com/doc/saphelp_snc_uiaddon_10/1.0/en-US/57/d8bfcf38f66f48b95ce1f52b3f5184/frameset.htm).</span><span class="sxs-lookup"><span data-stu-id="3c012-276">For details, see [SAP NetWeaver Application Server for ABAP Security Guide](https://help.sap.com/viewer/864321b9b3dd487d94c70f6a007b0397/7.4.19) and [SAP NetWeaver Application Server Java Security Guide](https://help.sap.com/doc/saphelp_snc_uiaddon_10/1.0/en-US/57/d8bfcf38f66f48b95ce1f52b3f5184/frameset.htm).</span></span>

<span data-ttu-id="3c012-277">A további hálózati biztonság érdekében vegye fontolóra egy [hálózati DMZ](../dmz/secure-vnet-hybrid.md), amely egy hálózati virtuális berendezésen használatával az alhálózat elé tűzfal létrehozása az Web Dispatcher.</span><span class="sxs-lookup"><span data-stu-id="3c012-277">For additional network security, consider implementing a [network DMZ](../dmz/secure-vnet-hybrid.md), which uses a network virtual appliance to create a firewall in front of the subnet for Web Dispatcher.</span></span>

<span data-ttu-id="3c012-278">Az infrastruktúra biztonsága és adatokat is titkosítja az átvitt inaktív.</span><span class="sxs-lookup"><span data-stu-id="3c012-278">For infrastructure security, data is encrypted in transit and at rest.</span></span> <span data-ttu-id="3c012-279">A "Biztonsági szempontok" szakasza a [SAP NetWeaver az Azure virtuális gépeken (VM) – tervezési és megvalósítási útmutató](/azure/virtual-machines/workloads/sap/planning-guide) hálózati biztonság témájával kezdődik.</span><span class="sxs-lookup"><span data-stu-id="3c012-279">The "Security considerations” section of the [SAP NetWeaver on Azure Virtual Machines (VMs) – Planning and Implementation Guide](/azure/virtual-machines/workloads/sap/planning-guide) begins to address network security.</span></span> <span data-ttu-id="3c012-280">Ez az útmutató adja meg azt is, hogy a tűzfalakon mely portokat kell megnyitni az alkalmazás kommunikációjának lehetővé tételéhez.</span><span class="sxs-lookup"><span data-stu-id="3c012-280">The guide also specifies the network ports you must open on the firewalls to allow application communication.</span></span>

<span data-ttu-id="3c012-281">Windows virtuális gépek lemezeinek titkosításához, használhatja a [az Azure Disk Encryption](/azure/security/azure-security-disk-encryption).</span><span class="sxs-lookup"><span data-stu-id="3c012-281">To encrypt Windows virtual machine disks, you can use [Azure Disk Encryption](/azure/security/azure-security-disk-encryption).</span></span> <span data-ttu-id="3c012-282">A Windows BitLocker funkcióját kötettitkosítást biztosít az operációs rendszer és az adatlemezeket használ.</span><span class="sxs-lookup"><span data-stu-id="3c012-282">It uses the BitLocker feature of Windows to provide volume encryption for the operating system and the data disks.</span></span> <span data-ttu-id="3c012-283">A megoldás az Azure Key Vault segítségével vezérelheti és felügyelheti a lemeztitkosítási kulcsokat és titkos kulcsokat a key vault-előfizetés is használható.</span><span class="sxs-lookup"><span data-stu-id="3c012-283">The solution also works with Azure Key Vault to help you control and manage the disk-encryption keys and secrets in your key vault subscription.</span></span> <span data-ttu-id="3c012-284">A virtuális gépek lemezein található, inaktív adatok az Azure Storage-ban titkosítva vannak.</span><span class="sxs-lookup"><span data-stu-id="3c012-284">Data on the virtual machine disks are encrypted at rest in your Azure storage.</span></span>

## <a name="communities"></a><span data-ttu-id="3c012-285">Közösségek</span><span class="sxs-lookup"><span data-stu-id="3c012-285">Communities</span></span>

<span data-ttu-id="3c012-286">A közösségek választ adhatnak a kérdéseire, továbbá segíthetnek a sikeres üzembe helyezésben.</span><span class="sxs-lookup"><span data-stu-id="3c012-286">Communities can answer questions and help you set up a successful deployment.</span></span> <span data-ttu-id="3c012-287">A következőket ajánljuk figyelmébe:</span><span class="sxs-lookup"><span data-stu-id="3c012-287">Consider the following:</span></span>

- [<span data-ttu-id="3c012-288">A Microsoft Platform Blog futó SAP-alkalmazások</span><span class="sxs-lookup"><span data-stu-id="3c012-288">Running SAP Applications on the Microsoft Platform Blog</span></span>](https://blogs.msdn.microsoft.com/saponsqlserver/2017/05/04/sap-on-azure-general-update-for-customers-partners-april-2017/)
- [<span data-ttu-id="3c012-289">Azure közösségi támogatás</span><span class="sxs-lookup"><span data-stu-id="3c012-289">Azure Community Support</span></span>](https://azure.microsoft.com/support/community/)
- [<span data-ttu-id="3c012-290">Az SAP közösségi</span><span class="sxs-lookup"><span data-stu-id="3c012-290">SAP Community</span></span>](https://www.sap.com/community.html)
- [<span data-ttu-id="3c012-291">Stack Overflow</span><span class="sxs-lookup"><span data-stu-id="3c012-291">Stack Overflow</span></span>](https://stackoverflow.com/tags/sap/)

## <a name="related-resources"></a><span data-ttu-id="3c012-292">Kapcsolódó források (lehet, hogy a cikkek angol nyelvűek)</span><span class="sxs-lookup"><span data-stu-id="3c012-292">Related resources</span></span>

<span data-ttu-id="3c012-293">Tekintse át az alábbiakat érdemes [Azure példaforgatókönyvek](/azure/architecture/example-scenario) , amelyek bemutatják, hogy egyes technológiákat használó adott megoldások:</span><span class="sxs-lookup"><span data-stu-id="3c012-293">You may wish to review the following [Azure example scenarios](/azure/architecture/example-scenario) that demonstrate specific solutions using some of the same technologies:</span></span>

- [<span data-ttu-id="3c012-294">Az SAP számítási feladatok futtatása Azure-beli Oracle-adatbázis használata</span><span class="sxs-lookup"><span data-stu-id="3c012-294">Running SAP production workloads using an Oracle Database on Azure</span></span>](/azure/architecture/example-scenario/apps/sap-production)
- [<span data-ttu-id="3c012-295">Az SAP-feladatokat az Azure-ban fejlesztési és tesztelési környezetek</span><span class="sxs-lookup"><span data-stu-id="3c012-295">Dev/test environments for SAP workloads on Azure</span></span>](/azure/architecture/example-scenario/apps/sap-dev-test)

<!-- links -->

[visio-download]: https://archcenter.blob.core.windows.net/cdn/sap-reference-architectures.vsdx
