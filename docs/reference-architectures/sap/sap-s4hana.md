---
title: SAP S/4HANA Azure Linux virtuális gépekhez
description: Eljárások az SAP S/4HANA környezetben futó Linux Azure magas rendelkezésre állású bizonyítása.
author: lbrader
ms.date: 05/11/2018
ms.openlocfilehash: d24ef6f9e4eae460d0d0dcfff35568c812d09951
ms.sourcegitcommit: bb348bd3a8a4e27ef61e8eee74b54b07b65dbf98
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 05/21/2018
ms.locfileid: "34423143"
---
# <a name="sap-s4hana-for-linux-virtual-machines-on-azure"></a><span data-ttu-id="86e9e-103">SAP S/4HANA Azure Linux virtuális gépekhez</span><span class="sxs-lookup"><span data-stu-id="86e9e-103">SAP S/4HANA for Linux Virtual Machines on Azure</span></span>

<span data-ttu-id="86e9e-104">A referencia-architektúrában az S/4HANA egy magas rendelkezésre állású környezet, amely támogatja a vész-helyreállítási az Azure-on futó bevált gyakorlatok csoportja jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="86e9e-104">This reference architecture shows a set of proven practices for running S/4HANA in a high availability environment that supports disaster recovery on Azure.</span></span> <span data-ttu-id="86e9e-105">Ez az architektúra van szükség az adott virtuális gép (VM), amelyek módosíthatók a szervezet igényeinek megfelelően van telepítve.</span><span class="sxs-lookup"><span data-stu-id="86e9e-105">This architecture is deployed with specific virtual machine (VM) sizes that can be changed to accommodate your organization's needs.</span></span> 


![](./images/sap-s4hana.png)

## <a name="architecture"></a><span data-ttu-id="86e9e-106">Architektúra</span><span class="sxs-lookup"><span data-stu-id="86e9e-106">Architecture</span></span>
 
> [!NOTE] 
> <span data-ttu-id="86e9e-107">A referencia-architektúrában megfelelően SAP termékek alkalmazástelepítéshez szükséges megfelelő licencelési SAP-termékek és más nem Microsoft-technológiák.</span><span class="sxs-lookup"><span data-stu-id="86e9e-107">Deploying SAP products according to this reference architecture requires appropriate licensing of SAP products and other non-Microsoft technologies.</span></span>

<span data-ttu-id="86e9e-108">A referencia-architektúrában ismerteti a vállalati szintű, éles szintű rendszeren.</span><span class="sxs-lookup"><span data-stu-id="86e9e-108">This reference architecture describes a enterprise-grade, production-level system.</span></span> <span data-ttu-id="86e9e-109">Az üzleti kell, ez a konfiguráció egyetlen virtuális gép lehet korlátozni.</span><span class="sxs-lookup"><span data-stu-id="86e9e-109">To suit your business needs, this configuration can be reduced to a single virtual machine.</span></span> <span data-ttu-id="86e9e-110">Azonban a következő összetevők szükségesek:</span><span class="sxs-lookup"><span data-stu-id="86e9e-110">However, the following components are required:</span></span>

<span data-ttu-id="86e9e-111">**Virtuális hálózat**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-111">**Virtual network**.</span></span> <span data-ttu-id="86e9e-112">A [Azure Virtual Network](/azure/virtual-network/virtual-networks-overview) szolgáltatás biztonságosan csatlakozik Azure-erőforrások egymással.</span><span class="sxs-lookup"><span data-stu-id="86e9e-112">The [Azure Virtual Network](/azure/virtual-network/virtual-networks-overview) service securely connects Azure resources to each other.</span></span> <span data-ttu-id="86e9e-113">Ebben a rendszerben a virtuális hálózat egy helyszíni környezetben telepített központban az átjárón keresztül csatlakozik egy [hub-küllős topológia](../hybrid-networking/hub-spoke.md).</span><span class="sxs-lookup"><span data-stu-id="86e9e-113">In this architecture, the virtual network connects to an on-premises environment through a gateway deployed in the hub of a [hub-spoke topology](../hybrid-networking/hub-spoke.md).</span></span> <span data-ttu-id="86e9e-114">A küllős a virtuális hálózat az SAP-alkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="86e9e-114">The spoke is the virtual network used for the SAP applications.</span></span>

<span data-ttu-id="86e9e-115">**Alhálózatok**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-115">**Subnets**.</span></span> <span data-ttu-id="86e9e-116">A virtuális hálózathoz van felosztva, külön [alhálózatok](/azure/virtual-network/virtual-network-manage-subnet) az egyes rétegekhez: átjáró, az alkalmazás, az adatbázis és a megosztott szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="86e9e-116">The virtual network is subdivided into separate [subnets](/azure/virtual-network/virtual-network-manage-subnet) for each tier: gateway, application, database, and shared services .</span></span> 

<span data-ttu-id="86e9e-117">**Virtuális gépek**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-117">**Virtual machines**.</span></span> <span data-ttu-id="86e9e-118">Ez az architektúra használja az alkalmazás réteg és adatbázis-rétegből, az alábbiak szerint csoportosítva Linuxot futtató virtuális gépek:</span><span class="sxs-lookup"><span data-stu-id="86e9e-118">This architecture uses virtual machines running Linux for the application tier and database tier, grouped as follows:</span></span>

- <span data-ttu-id="86e9e-119">**Alkalmazás réteg**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-119">**Application tier**.</span></span> <span data-ttu-id="86e9e-120">Tartalmazza a Fiori előfeldolgozó kiszolgálókészlethez, SAP webes kézbesítő készlet, alkalmazáskészletet kiszolgáló, és a központi SAP-szolgáltatások fürt.</span><span class="sxs-lookup"><span data-stu-id="86e9e-120">Includes the Fiori Front-end Server pool, SAP Web Dispatcher pool, application server pool, and SAP Central Services cluster.</span></span> <span data-ttu-id="86e9e-121">Magas rendelkezésre állású központi szolgáltatásokat Azure Linux virtuális gépeken meg kell adni egy magas rendelkezésre állású hálózati fájlrendszer (NFS) szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="86e9e-121">For high availability of Central Services on Azure Linux virtual machines, a highly available Network File System (NFS) service is required.</span></span>
- <span data-ttu-id="86e9e-122">**NFS-fürt**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-122">**NFS cluster**.</span></span> <span data-ttu-id="86e9e-123">Ez az architektúra használ egy [NFS](/azure/virtual-machines/workloads/sap/high-availability-guide-suse-nfs) server rendelkező Linux fürtökön SAP-rendszerek között megosztott adatok tárolására.</span><span class="sxs-lookup"><span data-stu-id="86e9e-123">This architecture uses an [NFS](/azure/virtual-machines/workloads/sap/high-availability-guide-suse-nfs) server running on a Linux cluster to store data shared between SAP systems.</span></span> <span data-ttu-id="86e9e-124">A központi fürtre is oszthatók meg több SAP rendszer.</span><span class="sxs-lookup"><span data-stu-id="86e9e-124">This centralized cluster can be shared across multiple SAP systems.</span></span> <span data-ttu-id="86e9e-125">Az NFS-szolgáltatás magas rendelkezésre állása a megfelelő magas rendelkezésre állási a kijelölt Linux terjesztési kiterjesztését.</span><span class="sxs-lookup"><span data-stu-id="86e9e-125">For high availability of the NFS service, the appropriate High Availability Extension for the selected Linux distribution is used.</span></span>
- <span data-ttu-id="86e9e-126">**SAP HANA**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-126">**SAP HANA**.</span></span> <span data-ttu-id="86e9e-127">Az adatbázis-rétegből két vagy több Linux virtuális gépek a fürt magas rendelkezésre állás biztosítása érdekében használja.</span><span class="sxs-lookup"><span data-stu-id="86e9e-127">The database tier uses two or more Linux virtual machines in a cluster to achieve high availability.</span></span> <span data-ttu-id="86e9e-128">HANA rendszer replikációs (HSR) segítségével tartalma replikálja az elsődleges és másodlagos HANA rendszerek között.</span><span class="sxs-lookup"><span data-stu-id="86e9e-128">HANA System Replication (HSR) is used to replicate contents between primary and secondary HANA systems.</span></span> <span data-ttu-id="86e9e-129">Linux-Fürtszolgáltatás észleli a rendszer hibáit, és automatikus feladatátvételt elősegítésére szolgál.</span><span class="sxs-lookup"><span data-stu-id="86e9e-129">Linux clustering is used to detect system failures and facilitate automatic failover.</span></span> <span data-ttu-id="86e9e-130">Egy olyan tároló vagy felhő alapú kerítés mechanizmus segítségével a sikertelen rendszer elkülönített, vagy állítsa le a fürt maszkolt feltétel elkerülése érdekében győződjön meg arról.</span><span class="sxs-lookup"><span data-stu-id="86e9e-130">A storage-based or cloud-based fencing mechanism can be used to ensure the failed system is isolated or shut down to avoid the cluster split-brain condition.</span></span>
- <span data-ttu-id="86e9e-131">**Jumpbox**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-131">**Jumpbox**.</span></span> <span data-ttu-id="86e9e-132">Más néven bástyagazdagép.</span><span class="sxs-lookup"><span data-stu-id="86e9e-132">Also called a bastion host.</span></span> <span data-ttu-id="86e9e-133">Ez a biztonságos virtuális gép, amely a rendszergazdák használhatják a virtuális számítógépekhez kapcsolódni a hálózaton.</span><span class="sxs-lookup"><span data-stu-id="86e9e-133">This is a secure virtual machine on the network that administrators use to connect to the other virtual machines.</span></span> <span data-ttu-id="86e9e-134">A Windows vagy Linux futtatható.</span><span class="sxs-lookup"><span data-stu-id="86e9e-134">It can run Windows or Linux.</span></span> <span data-ttu-id="86e9e-135">Használjon egy Windows jumpbox webböngésző kényelmi HANA vezérlőpultot vagy HANA Studio eszközök használata esetén.</span><span class="sxs-lookup"><span data-stu-id="86e9e-135">Use a Windows jumpbox for web browsing convenience when using HANA Cockpit or HANA Studio management tools.</span></span>

<span data-ttu-id="86e9e-136">**Terheléselosztók**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-136">**Load balancers**.</span></span> <span data-ttu-id="86e9e-137">Mindkét SAP beépített terheléselosztók és [Azure terheléselosztó](/azure/load-balancer/load-balancer-overview) magas rendelkezésre ÁLLÁSÚ eléréséhez használt.</span><span class="sxs-lookup"><span data-stu-id="86e9e-137">Both built-in SAP load balancers and [Azure Load Balancer](/azure/load-balancer/load-balancer-overview) are used to achieve HA.</span></span> <span data-ttu-id="86e9e-138">Az Azure Load Balancer példányok az alkalmazás réteg alhálózatban lévő virtuális gépek felé irányuló forgalom terjesztésére szolgálnak.</span><span class="sxs-lookup"><span data-stu-id="86e9e-138">Azure Load Balancer instances are used to distribute traffic to virtual machines in the application tier subnet.</span></span>

<span data-ttu-id="86e9e-139">**Rendelkezésre állási csoportok**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-139">**Availability sets**.</span></span> <span data-ttu-id="86e9e-140">A készletek és a fürtök (Web kézbesítő, SAP alkalmazáskiszolgálók, központi szolgáltatások, NFS és HANA) virtuális gépek vannak csoportosítva, különálló [rendelkezésre állási készletek](/azure/virtual-machines/windows/tutorial-availability-sets), és legalább két virtuális gép szerepkör / törlődnek.</span><span class="sxs-lookup"><span data-stu-id="86e9e-140">Virtual machines for all pools and clusters (Web Dispatcher, SAP application servers, Central Services, NFS, and HANA) are grouped into separate [availability sets](/azure/virtual-machines/windows/tutorial-availability-sets), and at least two virtual machines are provisioned per role.</span></span> <span data-ttu-id="86e9e-141">Ez lehetővé teszi a virtuális gépeket abban az esetben jogosult a magasabb [szolgáltatói szerződést](https://azure.microsoft.com/support/legal/sla/virtual-machines) (SLA).</span><span class="sxs-lookup"><span data-stu-id="86e9e-141">This makes the virtual machines eligible for a higher [service level agreement](https://azure.microsoft.com/support/legal/sla/virtual-machines) (SLA).</span></span> 

<span data-ttu-id="86e9e-142">**Hálózati adapter**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-142">**NICs**.</span></span> <span data-ttu-id="86e9e-143">[A hálózati kártyák](/azure/virtual-network/virtual-network-network-interface) (NIC) a virtuális hálózat virtuális gépei az összes kommunikáció engedélyezése.</span><span class="sxs-lookup"><span data-stu-id="86e9e-143">[Network interface cards](/azure/virtual-network/virtual-network-network-interface) (NICs) enable all communication of virtual machines on a virtual network.</span></span>

<span data-ttu-id="86e9e-144">**Hálózati biztonsági csoportok**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-144">**Network security groups**.</span></span> <span data-ttu-id="86e9e-145">Bejövő korlátozásához kimenő, és az alhálózatok közötti helyen belüli forgalmat a virtuális hálózat [hálózati biztonsági csoportok](/azure/virtual-network/virtual-networks-nsg) (NSG-k) használata.</span><span class="sxs-lookup"><span data-stu-id="86e9e-145">To restrict incoming, outgoing, and intra-subnet traffic in the virtual network, [network security groups](/azure/virtual-network/virtual-networks-nsg) (NSGs) are used.</span></span>

<span data-ttu-id="86e9e-146">**Átjáró**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-146">**Gateway**.</span></span> <span data-ttu-id="86e9e-147">Átjáró kiterjeszti a helyszíni hálózat az Azure virtuális hálózat.</span><span class="sxs-lookup"><span data-stu-id="86e9e-147">A gateway extends your on-premises network to the Azure virtual network.</span></span> <span data-ttu-id="86e9e-148">[ExpressRoute](/azure/architecture/reference-architectures/hybrid-networking/expressroute) az ajánlott Azure szolgáltatás, amely ne lépje át a nyilvános internethez magánhálózati kapcsolatok létrehozására, de egy [pont-pont](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal) kapcsolat is.</span><span class="sxs-lookup"><span data-stu-id="86e9e-148">[ExpressRoute](/azure/architecture/reference-architectures/hybrid-networking/expressroute) is the recommended Azure service for creating private connections that do not go over the public Internet, but a [Site-to-Site](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal) connection can also be used.</span></span> 

<span data-ttu-id="86e9e-149">**Azure Storage**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-149">**Azure Storage**.</span></span> <span data-ttu-id="86e9e-150">A virtuális gép virtuális merevlemez (VHD), állandó tárolást [Azure Storage](/azure/storage/) szükséges.</span><span class="sxs-lookup"><span data-stu-id="86e9e-150">To provide persistent storage of a virtual machine's virtual hard disk (VHD), [Azure Storage](/azure/storage/) is required.</span></span> 

## <a name="recommendations"></a><span data-ttu-id="86e9e-151">Javaslatok</span><span class="sxs-lookup"><span data-stu-id="86e9e-151">Recommendations</span></span>

<span data-ttu-id="86e9e-152">Ez az architektúra ismerteti egy kis termelési szint vállalati üzembe helyezéséhez.</span><span class="sxs-lookup"><span data-stu-id="86e9e-152">This architecture describes a small production-level enterprise deployment.</span></span> <span data-ttu-id="86e9e-153">Eltérőek, hogy a központi telepítés üzleti igényei alapján.</span><span class="sxs-lookup"><span data-stu-id="86e9e-153">Your deployment will differ based on your business requirements.</span></span> <span data-ttu-id="86e9e-154">Ezeket a javaslatokat tekintse kiindulópontnak.</span><span class="sxs-lookup"><span data-stu-id="86e9e-154">Use these recommendations as a starting point.</span></span>

### <a name="virtual-machines"></a><span data-ttu-id="86e9e-155">Virtual machines (Virtuális gépek)</span><span class="sxs-lookup"><span data-stu-id="86e9e-155">Virtual machines</span></span>

<span data-ttu-id="86e9e-156">Alkalmazáskészletek kiszolgáló és a fürtök állítsa be úgy a követelmények alapján virtuális gépek száma.</span><span class="sxs-lookup"><span data-stu-id="86e9e-156">In application server pools and clusters, adjust the number of virtual machines based on your requirements.</span></span> <span data-ttu-id="86e9e-157">A [Azure virtuális gépek tervezési és megvalósítási útmutató](/azure/virtual-machines/workloads/sap/planning-guide) tartalmazza a virtuális gépek hamarosan futó SAP NetWeaver, de az információk SAP S/4HANA is vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="86e9e-157">The [Azure Virtual Machines planning and implementation guide](/azure/virtual-machines/workloads/sap/planning-guide) includes details about running SAP NetWeaver on virtual machines, but the information applies to SAP S/4HANA as well.</span></span>

<span data-ttu-id="86e9e-158">SAP adatait támogatja az Azure virtuális gépek típusainak és átviteli sebességre vonatkozó mérőszámok (SAP), a következő témakörben: [SAP Megjegyzés 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span><span class="sxs-lookup"><span data-stu-id="86e9e-158">For details about SAP support for Azure virtual machine types and throughput metrics (SAPS), see [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span> 

### <a name="sap-web-dispatcher-pool"></a><span data-ttu-id="86e9e-159">SAP webes kézbesítő készlet</span><span class="sxs-lookup"><span data-stu-id="86e9e-159">SAP Web Dispatcher pool</span></span>

<span data-ttu-id="86e9e-160">A webes kézbesítő összetevő SAP forgalom között az SAP alkalmazáskiszolgálók terheléselosztó használható.</span><span class="sxs-lookup"><span data-stu-id="86e9e-160">The Web Dispatcher component is used as a load balancer for SAP traffic among the SAP application servers.</span></span> <span data-ttu-id="86e9e-161">A webes kézbesítő összetevő magas rendelkezésre állásának eléréséhez, Azure Load Balancer szolgál a párhuzamos webes kézbesítő telepítő megvalósítását a ciklikus multiplexelési konfigurációjának a rendelkezésre álló webes elosztás a terheléselosztók a forgalom eloszlása HTTP (S) háttér-készlet.</span><span class="sxs-lookup"><span data-stu-id="86e9e-161">To achieve high availability for the Web Dispatcher component, Azure Load Balancer is used to implement the parallel Web Dispatcher setup in a round-robin configuration for HTTP(S) traffic distribution among the available Web Dispatchers in the balancers back-end pool.</span></span> 

### <a name="fiori-front-end-server"></a><span data-ttu-id="86e9e-162">Fiori előtér-kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="86e9e-162">Fiori Front-end Server</span></span>

<span data-ttu-id="86e9e-163">A Fiori előtér-kiszolgáló használ a [NetWeaver átjáró](https://help.sap.com/doc/saphelp_gateway20sp12/2.0/en-US/76/08828d832e4aa78748e9f82204a864/content.htm?no_cache=true).</span><span class="sxs-lookup"><span data-stu-id="86e9e-163">The Fiori Front-end Server uses a [NetWeaver Gateway](https://help.sap.com/doc/saphelp_gateway20sp12/2.0/en-US/76/08828d832e4aa78748e9f82204a864/content.htm?no_cache=true).</span></span> <span data-ttu-id="86e9e-164">Kisebb környezetekben is betölthető a Fiori kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="86e9e-164">For small deployments, it can be loaded on the Fiori server.</span></span> <span data-ttu-id="86e9e-165">A nagyméretű telepítések esetében a NetWeaver átjáró külön kiszolgáló lehet, hogy telepítette a Fiori előfeldolgozó kiszolgálókészlet elé.</span><span class="sxs-lookup"><span data-stu-id="86e9e-165">For large deployments, a separate server for the NetWeaver Gateway may be deployed in front of the Fiori Front-end Server pool.</span></span>

### <a name="application-servers-pool"></a><span data-ttu-id="86e9e-166">Alkalmazáskészlet-kiszolgálók</span><span class="sxs-lookup"><span data-stu-id="86e9e-166">Application servers pool</span></span>

<span data-ttu-id="86e9e-167">Bejelentkezési csoportok ABAP alkalmazáskiszolgálók kezeléséhez, a SMLG tranzakció szolgál.</span><span class="sxs-lookup"><span data-stu-id="86e9e-167">To manage logon groups for ABAP application servers, the SMLG transaction is used.</span></span> <span data-ttu-id="86e9e-168">A terheléselosztási függvény központi szolgáltatások üzenet-kiszolgálón belül használja SAPGUIs és RFC oszthatja meg a munkaterhelést SAP alkalmazáskészlet-kiszolgálók közötti forgalmat.</span><span class="sxs-lookup"><span data-stu-id="86e9e-168">It uses the load balancing function within the message server of the Central Services to distribute workload among SAP application servers pool for SAPGUIs and RFC traffic.</span></span> <span data-ttu-id="86e9e-169">Az alkalmazás server kapcsolat a magas rendelkezésre állású központi szolgáltatások nem keresztül a fürt virtuális hálózat neve.</span><span class="sxs-lookup"><span data-stu-id="86e9e-169">The application server connection to the highly available Central Services is through the cluster virtual network name.</span></span> <span data-ttu-id="86e9e-170">Ezzel elkerülhető, hogy a helyi feladatátvétele után az alkalmazás server-profil központi szolgáltatások csatlakozási megváltoztatását.</span><span class="sxs-lookup"><span data-stu-id="86e9e-170">This avoids the need to change the application server profile for Central Services connectivity after a local failover.</span></span> 

### <a name="sap-central-services-cluster"></a><span data-ttu-id="86e9e-171">SAP szolgáltatásokhoz központi fürtre</span><span class="sxs-lookup"><span data-stu-id="86e9e-171">SAP Central Services cluster</span></span>

<span data-ttu-id="86e9e-172">Központi szolgáltatások egyetlen virtuális gépre telepíthető, ha magas rendelkezésre állás nem követelmény.</span><span class="sxs-lookup"><span data-stu-id="86e9e-172">Central Services can be deployed to a single virtual machine when high availability is not a requirement.</span></span> <span data-ttu-id="86e9e-173">Azonban az egyetlen virtuális gép lesz a potenciális hibaérzékeny pontok kialakulását (SPOF) az SAP-környezet.</span><span class="sxs-lookup"><span data-stu-id="86e9e-173">However, the single virtual machine becomes a potential single point of failure (SPOF) for the SAP environment.</span></span> <span data-ttu-id="86e9e-174">Egy magas rendelkezésre állású szolgáltatások központi telepítése esetén az NFS magas rendelkezésre állású fürt- és egy központi szolgáltatások magas rendelkezésre állású fürt használt.</span><span class="sxs-lookup"><span data-stu-id="86e9e-174">For a highly available Central Services deployment, a highly available NFS cluster and a highly available Central Services cluster are used.</span></span>

### <a name="nfs-cluster"></a><span data-ttu-id="86e9e-175">NFS-fürt</span><span class="sxs-lookup"><span data-stu-id="86e9e-175">NFS cluster</span></span>

<span data-ttu-id="86e9e-176">Az NFS-fürt csomópontjai közötti replikáció használható DRBD (elosztott replikált elérésű eszközt használ).</span><span class="sxs-lookup"><span data-stu-id="86e9e-176">DRBD (Distributed Replicated Block Device) is used for replication between the nodes of the NFS cluster.</span></span>

### <a name="availability-sets"></a><span data-ttu-id="86e9e-177">Rendelkezésre állási csoportok</span><span class="sxs-lookup"><span data-stu-id="86e9e-177">Availability sets</span></span>

<span data-ttu-id="86e9e-178">Rendelkezésre állási készletek terjesztése a kiszolgálókat különböző fizikai infrastruktúra és a frissítési csoport szolgáltatás rendelkezésre állásának javítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="86e9e-178">Availability sets distribute servers to different physical infrastructure and update groups to improve service availability.</span></span> <span data-ttu-id="86e9e-179">Helyezze olyan virtuális gépek, amelyek ugyanarra a szerepkörre végre a rendelkezésre állási beállítja a megfelelő és segítenek védelmet biztosítanak a Azure-infrastruktúra karbantartás miatt [SLA-k](https://azure.microsoft.com/support/legal/sla/virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="86e9e-179">Put virtual machines that perform the same role into an availability sets to help guard against downtime caused by Azure infrastructure maintenance and to meet [SLAs](https://azure.microsoft.com/support/legal/sla/virtual-machines).</span></span> <span data-ttu-id="86e9e-180">Ajánlott legalább két virtuális gép rendelkezésre állási csoportban.</span><span class="sxs-lookup"><span data-stu-id="86e9e-180">Two or more virtual machines per availability set is recommended.</span></span>

<span data-ttu-id="86e9e-181">Csoportban lévő összes virtuális gépet ugyanarra a szerepkörre kell végrehajtania.</span><span class="sxs-lookup"><span data-stu-id="86e9e-181">All virtual machines in a set must perform the same role.</span></span> <span data-ttu-id="86e9e-182">Ne keverje a kiszolgálókat különböző szerepkörök az azonos rendelkezésre állási készlet.</span><span class="sxs-lookup"><span data-stu-id="86e9e-182">Do not mix servers of different roles in the same availability set.</span></span> <span data-ttu-id="86e9e-183">Például ne tegyen ASC csomópont azonos rendelkezésre állási csoportban, az alkalmazás-kiszolgálóval.</span><span class="sxs-lookup"><span data-stu-id="86e9e-183">For example, don't place a ASCS node in the same availability set with the application server.</span></span>

### <a name="nics"></a><span data-ttu-id="86e9e-184">Hálózati adapterek (NIC-k)</span><span class="sxs-lookup"><span data-stu-id="86e9e-184">NICs</span></span>

<span data-ttu-id="86e9e-185">Hagyományos helyszíni SAP tájak több hálózati adapterek (NIC) elkülönítse a felügyeleti forgalom és a business forgalom gépenként valósítja meg.</span><span class="sxs-lookup"><span data-stu-id="86e9e-185">Traditional on-premises SAP landscapes implement multiple network interface cards (NICs) per machine to segregate administrative traffic from business traffic.</span></span> <span data-ttu-id="86e9e-186">Az Azure a virtuális hálózat a szoftver által meghatározott hálózati által küldött összes forgalom az azonos hálózati háló keresztül.</span><span class="sxs-lookup"><span data-stu-id="86e9e-186">On Azure, the virtual network is a software-defined network that sends all traffic through the same network fabric.</span></span> <span data-ttu-id="86e9e-187">Ezért a több hálózati adapter használata szükségtelen.</span><span class="sxs-lookup"><span data-stu-id="86e9e-187">Therefore, the use of multiple NICs is unnecessary.</span></span> <span data-ttu-id="86e9e-188">Azonban ha a szervezetének korlátoznia kell áthaladó forgalmat leválasszanak, telepítheti több hálózati adapter virtuális gépenként, minden egyes hálózati adapter csatlakoztatása egy másik alhálózatot, és az NSG-k segítségével különböző hozzáférés-vezérlési házirendek kényszerítése.</span><span class="sxs-lookup"><span data-stu-id="86e9e-188">However, if your organization needs to segregate traffic, you can deploy multiple NICs per VM, connect each NIC to a different subnet, and then use NSGs to enforce different access control policies.</span></span>

### <a name="subnets-and-nsgs"></a><span data-ttu-id="86e9e-189">Alhálózatokat és az NSG-k</span><span class="sxs-lookup"><span data-stu-id="86e9e-189">Subnets and NSGs</span></span>

<span data-ttu-id="86e9e-190">Ez az architektúra a virtuális hálózat címtere alterületét alhálózatokra.</span><span class="sxs-lookup"><span data-stu-id="86e9e-190">This architecture subdivides the virtual network address space into subnets.</span></span> <span data-ttu-id="86e9e-191">Az egyes alhálózatokon társítható egy NSG-t, amely meghatározza a hozzáférési házirendek az alhálózat.</span><span class="sxs-lookup"><span data-stu-id="86e9e-191">Each subnet can be associated with a NSG that defines the access policies for the subnet.</span></span> <span data-ttu-id="86e9e-192">Alkalmazáskiszolgálók helyezze külön alhálózathoz, biztonságát azokat könnyebben alhálózati biztonsági házirendeket, nem az egyes kiszolgálók kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="86e9e-192">Place application servers on a separate subnet so you can secure them more easily by managing the subnet security policies, not the individual servers.</span></span>

<span data-ttu-id="86e9e-193">Amikor egy NSG-t hozzárendelnek egy alhálózathoz, majd vonatkozik, az alhálózaton lévő összes kiszolgálót.</span><span class="sxs-lookup"><span data-stu-id="86e9e-193">When a NSG is associated with a subnet, it then applies to all the servers within the subnet.</span></span> <span data-ttu-id="86e9e-194">A minden részletre kiterjedő szabályozhatják a kiszolgálók az alhálózat NSG-k használatával kapcsolatos további információkért lásd: [hálózati forgalmat hálózati biztonsági csoportokkal](https://azure.microsoft.com/blog/multiple-vm-nics-and-network-virtual-appliances-in-azure/).</span><span class="sxs-lookup"><span data-stu-id="86e9e-194">For more information about using NSGs for fine-grained control over the servers in a subnet, see [Filter network traffic with network security groups](https://azure.microsoft.com/blog/multiple-vm-nics-and-network-virtual-appliances-in-azure/).</span></span>

<span data-ttu-id="86e9e-195">Lásd még: [tervezése és kialakítása VPN-átjáró](/azure/vpn-gateway/vpn-gateway-plan-design).</span><span class="sxs-lookup"><span data-stu-id="86e9e-195">See also [Planning and design for VPN Gateway](/azure/vpn-gateway/vpn-gateway-plan-design).</span></span>

### <a name="load-balancers"></a><span data-ttu-id="86e9e-196">Terheléselosztók</span><span class="sxs-lookup"><span data-stu-id="86e9e-196">Load balancers</span></span>

<span data-ttu-id="86e9e-197">[SAP webes kézbesítő](https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/8fe37933114e6fe10000000a421937/frameset.htm) leírók terheléselosztása Fiori stílus alkalmazást egy SAP alkalmazáskiszolgáló HTTP (S) forgalmat.</span><span class="sxs-lookup"><span data-stu-id="86e9e-197">[SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/8fe37933114e6fe10000000a421937/frameset.htm) handles load balancing of HTTP(S) traffic including Fiori style applications to a pool of SAP application servers.</span></span> 

<span data-ttu-id="86e9e-198">A Diagnosztika vagy függvény hívások (RFC) keresztül egy SAP-kiszolgálóhoz csatlakozó SAP GUI-ügyfelektől érkező forgalom, a központi szolgáltatás üzenet kiszolgáló osztja szét SAP alkalmazás kiszolgálón keresztül [csoportok bejelentkezési](https://wiki.scn.sap.com/wiki/display/SI/ABAP+Logon+Group+based+Load+Balancing), így a nem a további terheléselosztó szükséges.</span><span class="sxs-lookup"><span data-stu-id="86e9e-198">For traffic from SAP GUI clients connecting a SAP server via DIAG or Remote Function Calls (RFC), the Central Service message server balances the load through SAP application server [logon groups](https://wiki.scn.sap.com/wiki/display/SI/ABAP+Logon+Group+based+Load+Balancing), so no additional load balancer is needed.</span></span> 

### <a name="azure-storage"></a><span data-ttu-id="86e9e-199">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="86e9e-199">Azure Storage</span></span>

<span data-ttu-id="86e9e-200">Prémium szintű Azure Storage az adatbázis-kiszolgáló virtuális gépek használatát javasoljuk.</span><span class="sxs-lookup"><span data-stu-id="86e9e-200">We recommend using Azure Premium Storage for the database server virtual machines.</span></span> <span data-ttu-id="86e9e-201">Prémium szintű storage következetes olvasás/írás késést biztosít.</span><span class="sxs-lookup"><span data-stu-id="86e9e-201">Premium storage provides consistent read/write latency.</span></span> <span data-ttu-id="86e9e-202">Prémium szintű Storage segítségével az operációs rendszer és a adatok lemezek egypéldányos a virtuális gép kapcsolatos részletekért lásd: [SLA-t a virtuális gépek](https://azure.microsoft.com/support/legal/sla/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="86e9e-202">For details about using Premium Storage for the operating system disks and data disks of a single-instance virtual machine, see [SLA for Virtual Machines](https://azure.microsoft.com/support/legal/sla/virtual-machines/).</span></span> 

<span data-ttu-id="86e9e-203">Minden éles SAP rendszerek esetén, azt javasoljuk, prémium szintű [Azure felügyelt lemezek](/azure/storage/storage-managed-disks-overview).</span><span class="sxs-lookup"><span data-stu-id="86e9e-203">For all production SAP systems, we recommend using Premium [Azure Managed Disks](/azure/storage/storage-managed-disks-overview).</span></span> <span data-ttu-id="86e9e-204">Felügyelt lemezek segítségével kezelheti a VHD-fájlokat, a lemezek megbízhatóság hozzáadása.</span><span class="sxs-lookup"><span data-stu-id="86e9e-204">Managed Disks are used to manage the VHD files for the disks, adding reliability.</span></span> <span data-ttu-id="86e9e-205">Azt is biztosítják, hogy a lemezek, a virtuális gépek rendelkezésre állási csoportok belül választva egymástól a hibaérzékeny pontokat elkerülése érdekében.</span><span class="sxs-lookup"><span data-stu-id="86e9e-205">They also ensure that the disks for virtual machines within an availability set are isolated to avoid single points of failure.</span></span>

<span data-ttu-id="86e9e-206">Az SAP alkalmazáskiszolgálók, többek között a központi szolgáltatások virtuális gépeket a Azure standard szintű tárolást segítségével csökkenthető a költség, mert alkalmazásfuttatás történik, memória, és használja a lemezek csak naplózás.</span><span class="sxs-lookup"><span data-stu-id="86e9e-206">For SAP application servers, including the Central Services virtual machines, you can use Azure Standard Storage to reduce cost, because application execution takes place in memory and uses disks for logging only.</span></span> <span data-ttu-id="86e9e-207">Azonban ekkor, Standard szintű tárolót csak minősítéssel nem felügyelt tárolási.</span><span class="sxs-lookup"><span data-stu-id="86e9e-207">However, at this time, Standard Storage is only certified for unmanaged storage.</span></span> <span data-ttu-id="86e9e-208">Alkalmazáskiszolgálók tárol adatokat, mert is használhatják a kisebb P4 és P6 prémium szintű Storage lemezeket költségek csökkentése érdekében.</span><span class="sxs-lookup"><span data-stu-id="86e9e-208">Since application servers do not host any data, you can also use the smaller P4 and P6 Premium Storage disks to help minimize cost.</span></span>

<span data-ttu-id="86e9e-209">A biztonsági mentési tárolót, ajánljuk Azure [cool réteg tároló elérése és/vagy a hozzáférési réteg archivált](/azure/storage/storage-blob-storage-tiers).</span><span class="sxs-lookup"><span data-stu-id="86e9e-209">For the backup data store, we recommend using Azure [cool access tier storage and/or archive access tier storage](/azure/storage/storage-blob-storage-tiers).</span></span> <span data-ttu-id="86e9e-210">A tárolási rétegek költséghatékony módon, hogy az ritkábban hosszú élettartamú adatok tárolására.</span><span class="sxs-lookup"><span data-stu-id="86e9e-210">These storage tiers are cost-effective ways to store long-lived data that is less frequently accessed.</span></span>

## <a name="performance-considerations"></a><span data-ttu-id="86e9e-211">A teljesítménnyel kapcsolatos megfontolások</span><span class="sxs-lookup"><span data-stu-id="86e9e-211">Performance considerations</span></span>

<span data-ttu-id="86e9e-212">Az adatbázis-kiszolgálók állandó kommunikációjához SAP alkalmazáskiszolgálók végzi.</span><span class="sxs-lookup"><span data-stu-id="86e9e-212">SAP application servers carry on constant communications with the database servers.</span></span> <span data-ttu-id="86e9e-213">A HANA adatbázis virtuális gépekhez, érdemes lehet engedélyezni az [írási gyorsító](/azure/virtual-machines/linux/how-to-enable-write-accelerator) napló írási késése javítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="86e9e-213">For the HANA database virtual machines, consider enabling [Write Accelerator](/azure/virtual-machines/linux/how-to-enable-write-accelerator) to improve log write latency.</span></span> <span data-ttu-id="86e9e-214">A helyek közötti kiszolgálói kommunikáció optimalizálása érdekében használja a [az elérését gyorsítja fel hálózati](https://azure.microsoft.com/blog/linux-and-windows-networking-performance-enhancements-accelerated-networking/).</span><span class="sxs-lookup"><span data-stu-id="86e9e-214">To optimize inter-server communications, use the [Accelerated Network](https://azure.microsoft.com/blog/linux-and-windows-networking-performance-enhancements-accelerated-networking/).</span></span> <span data-ttu-id="86e9e-215">Ne feledje, hogy ezek a gyorsbillentyűk csak bizonyos Virtuálisgép-sorozat érhető el.</span><span class="sxs-lookup"><span data-stu-id="86e9e-215">Note that these accelerators are available only for certain VM series.</span></span>

<span data-ttu-id="86e9e-216">A gyakori eljárásokat magas iops-érték és a lemez sávszélesség átviteli sebesség eléréséhez a tárolókötetet [teljesítményoptimalizálás](/azure/virtual-machines/linux/premium-storage-performance) Azure tárolási elrendezés vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="86e9e-216">To achieve high IOPS and disk bandwidth throughput, the common practices in storage volume [performance optimization](/azure/virtual-machines/linux/premium-storage-performance) apply to Azure storage layout.</span></span> <span data-ttu-id="86e9e-217">Például több lemezek csoportosításával csíkozott kötet létrehozása kombinálásával növeli IO teljesítményét.</span><span class="sxs-lookup"><span data-stu-id="86e9e-217">For example, combining multiple disks together to create a striped disk volume improves IO performance.</span></span> <span data-ttu-id="86e9e-218">A tárolóban található ritkán változó tartalmak olvasási gyorsítótárazásának engedélyezésével növelhető az adatelérés sebessége.</span><span class="sxs-lookup"><span data-stu-id="86e9e-218">Enabling the read cache on storage content that changes infrequently enhances the speed of data retrieval.</span></span> <span data-ttu-id="86e9e-219">Teljesítmény-követelményekkel kapcsolatos részletekért lásd: [SAP Megjegyzés 1943937 - hardver konfiguráció ellenőrzése eszköz](https://launchpad.support.sap.com/#/notes/1943937) (SAP szolgáltatás piactér a hozzáféréshez szükséges fiók).</span><span class="sxs-lookup"><span data-stu-id="86e9e-219">For details about performance requirements, see [SAP note 1943937 - Hardware Configuration Check Tool](https://launchpad.support.sap.com/#/notes/1943937) (SAP Service Marketplace account required for access).</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="86e9e-220">Méretezési szempontok</span><span class="sxs-lookup"><span data-stu-id="86e9e-220">Scalability considerations</span></span>

<span data-ttu-id="86e9e-221">Az SAP-alkalmazás rétegben az Azure számos különböző vertikális felskálázásával és kiterjesztése a virtuálisgép-méretek kínál. A két szélsőértéket beleértve listája, [SAP Megjegyzés 1928533](https://launchpad.support.sap.com/#/notes/1928533) -Azure SAP-alkalmazásokból: támogatott termékek és az Azure virtuális gép típusok (SAP szolgáltatás piactér a hozzáféréshez szükséges fiók).</span><span class="sxs-lookup"><span data-stu-id="86e9e-221">At the SAP application layer, Azure offers a wide range of virtual machine sizes for scaling up and scaling out. For an inclusive list, see [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533) - SAP Applications on Azure: Supported Products and Azure VM types (SAP Service Marketplace account required for access).</span></span> <span data-ttu-id="86e9e-222">Több virtuális gépek típushoz tanúsítására folyamatos, méretezhető felfelé vagy lefelé az azonos felhőben üzemelő példányhoz.</span><span class="sxs-lookup"><span data-stu-id="86e9e-222">As we continue to certify more virtual machines types, you can scale up or down with the same cloud deployment.</span></span> 

<span data-ttu-id="86e9e-223">Az adatbázisrétegben az ebbe az architektúrába HANA futó virtuális gépek.</span><span class="sxs-lookup"><span data-stu-id="86e9e-223">At the database layer, this architecture runs HANA on VMs.</span></span> <span data-ttu-id="86e9e-224">Ha a terhelést meghaladja a maximális Virtuálisgép-méretet, a Microsoft is kínál [Azure nagy példányok](/azure/virtual-machines/workloads/sap/hana-overview-architecture) SAP Hana.</span><span class="sxs-lookup"><span data-stu-id="86e9e-224">If your workload exceeds the maximum VM size, Microsoft also offers [Azure Large Instances](/azure/virtual-machines/workloads/sap/hana-overview-architecture) for SAP HANA.</span></span> <span data-ttu-id="86e9e-225">Ezek a fizikai kiszolgálók egy helyen találhatók a Microsoft Azure datacenter hitelesített, és frissítésétől írásának, adja meg legfeljebb 20 TB memória kapacitást biztosít egy példányban.</span><span class="sxs-lookup"><span data-stu-id="86e9e-225">These physical servers are co-located in a Microsoft Azure certified datacenter and as of this writing, provide up to 20 TB of memory capacity for a single instance.</span></span> <span data-ttu-id="86e9e-226">Több csomópont-konfiguráció esetében is lehetséges a teljes memória 60 TB kapacitású.</span><span class="sxs-lookup"><span data-stu-id="86e9e-226">Multi-node configuration is also possible with a total memory capacity of up to 60 TB.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="86e9e-227">Rendelkezésre állási szempontok</span><span class="sxs-lookup"><span data-stu-id="86e9e-227">Availability considerations</span></span>

<span data-ttu-id="86e9e-228">Erőforrás redundanciát a magas rendelkezésre állású infrastruktúramegoldásainak általános téma.</span><span class="sxs-lookup"><span data-stu-id="86e9e-228">Resource redundancy is the general theme in highly available infrastructure solutions.</span></span> <span data-ttu-id="86e9e-229">A vállalatok számára, amelyek kevésbé szigorú SLA-t egypéldányos Azure virtuális gépek nyújtanak hasznos üzemidőt SLA-t.</span><span class="sxs-lookup"><span data-stu-id="86e9e-229">For enterprises that have a less stringent SLA, single-instance Azure VMs offer an uptime SLA.</span></span> <span data-ttu-id="86e9e-230">További információkért lásd: [Azure szolgáltatásiszint-megállapodás](https://azure.microsoft.com/support/legal/sla/).</span><span class="sxs-lookup"><span data-stu-id="86e9e-230">For more information, see [Azure Service Level Agreement](https://azure.microsoft.com/support/legal/sla/).</span></span>

<span data-ttu-id="86e9e-231">Ez az SAP-alkalmazás elosztott telepítés, a alaptelepítésének replikálódik, magas rendelkezésre állás biztosítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="86e9e-231">In this distributed installation of the SAP application, the base installation is replicated to achieve high availability.</span></span> <span data-ttu-id="86e9e-232">Az egyes rétegekhez a architektúra a magas rendelkezésre állású kialakítása függően változik.</span><span class="sxs-lookup"><span data-stu-id="86e9e-232">For each layer of the architecture, the high availability design varies.</span></span> 

### <a name="application-tier"></a><span data-ttu-id="86e9e-233">Alkalmazás réteg</span><span class="sxs-lookup"><span data-stu-id="86e9e-233">Application tier</span></span>

- <span data-ttu-id="86e9e-234">Webes kézbesítő.</span><span class="sxs-lookup"><span data-stu-id="86e9e-234">Web Dispatcher.</span></span> <span data-ttu-id="86e9e-235">Magas rendelkezésre állású redundáns webes kézbesítő osztályt érhető el.</span><span class="sxs-lookup"><span data-stu-id="86e9e-235">High availability is achieved with redundant Web Dispatcher instances.</span></span> <span data-ttu-id="86e9e-236">Lásd: [SAP webes kézbesítő](https://help.sap.com/doc/saphelp_nw70ehp2/7.02.16/en-us/48/8fe37933114e6fe10000000a421937/frameset.htm) az SAP-dokumentációban.</span><span class="sxs-lookup"><span data-stu-id="86e9e-236">See [SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw70ehp2/7.02.16/en-us/48/8fe37933114e6fe10000000a421937/frameset.htm) in the SAP documentation.</span></span>
- <span data-ttu-id="86e9e-237">Fiori kiszolgálók.</span><span class="sxs-lookup"><span data-stu-id="86e9e-237">Fiori servers.</span></span> <span data-ttu-id="86e9e-238">Magas rendelkezésre állás az terheléselosztási forgalmat egy kiszolgálókészletet belül érhető el.</span><span class="sxs-lookup"><span data-stu-id="86e9e-238">High availability is achieved by load balancing traffic within a pool of servers.</span></span>
- <span data-ttu-id="86e9e-239">Központi szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="86e9e-239">Central Services.</span></span> <span data-ttu-id="86e9e-240">A magas rendelkezésre állású központi szolgáltatásokat Azure Linux virtuális gépeken a megfelelő magas rendelkezésre állás kiterjesztése a kijelölt terjesztési használt Linux és a magas rendelkezésre állású NFS állomások DRBD tárolási fürt.</span><span class="sxs-lookup"><span data-stu-id="86e9e-240">For high availability of Central Services on Azure Linux virtual machines, the appropriate High Availability Extension for the selected Linux distribution is used, and the highly available NFS cluster hosts DRBD storage.</span></span>
- <span data-ttu-id="86e9e-241">Alkalmazáskiszolgálók.</span><span class="sxs-lookup"><span data-stu-id="86e9e-241">Application servers.</span></span> <span data-ttu-id="86e9e-242">A magas rendelkezésre állás az adatforgalom terheléselosztásával érhető el alkalmazáskiszolgálók egy csoportjában.</span><span class="sxs-lookup"><span data-stu-id="86e9e-242">High availability is achieved by load balancing traffic within a pool of application servers.</span></span>

### <a name="database-tier"></a><span data-ttu-id="86e9e-243">Adatbázis-rétegből</span><span class="sxs-lookup"><span data-stu-id="86e9e-243">Database tier</span></span>

<span data-ttu-id="86e9e-244">A referencia-architektúrában álló két Azure virtuális gépek magas rendelkezésre állású SAP HANA adatbázis rendszer ábrázol.</span><span class="sxs-lookup"><span data-stu-id="86e9e-244">This reference architecture depicts a highly available SAP HANA database system consisting of two Azure virtual machines.</span></span> <span data-ttu-id="86e9e-245">Az adatbázis-rétegből natív rendszer replikációs szolgáltatás kézi vagy automatikus replikált csomópontok közötti feladatátvételt biztosít:</span><span class="sxs-lookup"><span data-stu-id="86e9e-245">The database tier's native system replication feature provides either manual or automatic failover between replicated nodes:</span></span>

- <span data-ttu-id="86e9e-246">Kézi feladatátvételre több HANA-példány telepítése, és HANA rendszer replikációs (HSR) használja.</span><span class="sxs-lookup"><span data-stu-id="86e9e-246">For manual failover, deploy more than one HANA instance and use HANA System Replication (HSR).</span></span>
- <span data-ttu-id="86e9e-247">Automatikus feladatátvétel a Linux-disztribúció HSR és a Linux magas rendelkezésre állás bővítmény (HAE) használata.</span><span class="sxs-lookup"><span data-stu-id="86e9e-247">For automatic failover, use both HSR and Linux High Availability Extension (HAE) for your Linux distribution.</span></span> <span data-ttu-id="86e9e-248">Linux HAE szolgáltatásai a fürt HANA erőforrások hibaesemények észlelésére, és a feladatátvétel, a megfelelő csomópont errant szolgáltatások koordinálásához.</span><span class="sxs-lookup"><span data-stu-id="86e9e-248">Linux HAE provides the cluster services to the HANA resources, detecting failure events and orchestrating the failover of errant services to the healthy node.</span></span> 

<span data-ttu-id="86e9e-249">Lásd: [SAP tanúsítványokról és a Microsoft Azure-on futó konfigurációk](/azure/virtual-machines/workloads/sap/sap-certifications).</span><span class="sxs-lookup"><span data-stu-id="86e9e-249">See [SAP certifications and configurations running on Microsoft Azure](/azure/virtual-machines/workloads/sap/sap-certifications).</span></span>

### <a name="disaster-recovery-considerations"></a><span data-ttu-id="86e9e-250">Vészhelyreállítási szempontok</span><span class="sxs-lookup"><span data-stu-id="86e9e-250">Disaster recovery considerations</span></span>
<span data-ttu-id="86e9e-251">Minden egyes réteg más stratégiával biztosít vészhelyreállítási (DR) védelmet.</span><span class="sxs-lookup"><span data-stu-id="86e9e-251">Each tier uses a different strategy to provide disaster recovery (DR) protection.</span></span>

- <span data-ttu-id="86e9e-252">**Alkalmazás-kiszolgálók réteg**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-252">**Application servers tier**.</span></span> <span data-ttu-id="86e9e-253">SAP alkalmazáskiszolgálók nem tartalmaz üzleti adatokat.</span><span class="sxs-lookup"><span data-stu-id="86e9e-253">SAP application servers do not contain business data.</span></span> <span data-ttu-id="86e9e-254">A Azure-ban egy egyszerű vész-Helyreállítási stratégia, ha a SAP alkalmazáskiszolgálók másodlagos régióban, állítsa le.</span><span class="sxs-lookup"><span data-stu-id="86e9e-254">On Azure, a simple DR strategy is to create SAP application servers in the secondary region, then shut them down.</span></span> <span data-ttu-id="86e9e-255">A konfigurációs módosítások vagy az elsődleges kiszolgáló kernel-frissítések esetén a virtuális gépek használata a másodlagos régióba módosítások kell alkalmazni.</span><span class="sxs-lookup"><span data-stu-id="86e9e-255">Upon any configuration changes or kernel updates on the primary application server, the same changes must be applied to the virtual machines in the secondary region.</span></span> <span data-ttu-id="86e9e-256">Például másolja az SAP kernel végrehajtható fájlokat a vész-Helyreállítási virtuális gépek.</span><span class="sxs-lookup"><span data-stu-id="86e9e-256">For example, copy the SAP kernel executables to the DR virtual machines.</span></span> <span data-ttu-id="86e9e-257">Automatikus replikációja egy másodlagos régióban alkalmazáskiszolgálók, [Azure Site Recovery](/azure/site-recovery/site-recovery-overview) a javasolt megoldás.</span><span class="sxs-lookup"><span data-stu-id="86e9e-257">For automatic replication of application servers to a secondary region, [Azure Site Recovery](/azure/site-recovery/site-recovery-overview) is the recommended solution.</span></span> <span data-ttu-id="86e9e-258">A dokumentum írásáig automatikus rendszer-Helyreállítás nem még támogatja a replikálást az elérését gyorsítja fel hálózati konfigurációs beállítás az Azure virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="86e9e-258">As of the writing of this paper, ASR doesn't yet support the replication of the Accelerated Network configuration setting in Azure VMs.</span></span>

- <span data-ttu-id="86e9e-259">**Központi szolgáltatások**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-259">**Central Services**.</span></span> <span data-ttu-id="86e9e-260">Ez az összetevő a SAP alkalmazás verem is nem maradnak üzleti adatok.</span><span class="sxs-lookup"><span data-stu-id="86e9e-260">This component of the SAP application stack also does not persist business data.</span></span> <span data-ttu-id="86e9e-261">Létrehozhat egy virtuális Gépet a másodlagos régióban a központi szolgáltatások szerepkör futtatásához.</span><span class="sxs-lookup"><span data-stu-id="86e9e-261">You can build a VM in the secondary region to run the Central Services role.</span></span> <span data-ttu-id="86e9e-262">Csak a tartalmi szinkronizálni az elsődleges központi szolgáltatások csomópontból-e a /sapmnt megosztást.</span><span class="sxs-lookup"><span data-stu-id="86e9e-262">The only content from the primary Central Services node to synchronize is the /sapmnt share content.</span></span> <span data-ttu-id="86e9e-263">Is ha a konfigurációs módosítások és a kernel frissítéseket az elsődleges kiszolgálón központi szolgáltatások történik, azok meg kell ismételni a virtuális gép központi szolgáltatásokat futtató másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="86e9e-263">Also, if configuration changes or kernel updates take place on the primary Central Services servers, they must be repeated on the VM in the secondary region running Central Services.</span></span> <span data-ttu-id="86e9e-264">A két kiszolgáló szinkronizálásával kapcsolatban vagy Azure Site Recovery használja replikálja a fürtcsomópontokon, vagy egyszerűen csak egy rendszeres, ütemezett feladat segítségével /sapmnt másolja a vész-Helyreállítási oldalon.</span><span class="sxs-lookup"><span data-stu-id="86e9e-264">To synchronize the two servers, you can use either Azure Site Recovery, to replicate the cluster nodes, or simply use a regularly scheduled copy job to copy /sapmnt to the DR side.</span></span> <span data-ttu-id="86e9e-265">A build részleteit, másolás és a teszt feladatátvételi folyamat, töltse le a [SAP NetWeaver: a Hyper-V és a Microsoft Azure-alapú vész-helyreállítási megoldást felépítése](http://download.microsoft.com/download/9/5/6/956FEDC3-702D-4EFB-A7D3-2DB7505566B6/SAP%20NetWeaver%20-%20Building%20an%20Azure%20based%20Disaster%20Recovery%20Solution%20V1_5%20.docx), és tekintse át a részt 4.3, "SAP SPOF réteg (ASC)."</span><span class="sxs-lookup"><span data-stu-id="86e9e-265">For details about the build, copy, and test failover process, download [SAP NetWeaver: Building a Hyper-V and Microsoft Azure–based Disaster Recovery Solution](http://download.microsoft.com/download/9/5/6/956FEDC3-702D-4EFB-A7D3-2DB7505566B6/SAP%20NetWeaver%20-%20Building%20an%20Azure%20based%20Disaster%20Recovery%20Solution%20V1_5%20.docx), and refer to section 4.3, "SAP SPOF layer (ASCS)."</span></span> <span data-ttu-id="86e9e-266">A dokumentum a Windows rendszeren futó NetWeaver vonatkozik, de a Linux-egyenértékű konfigurációt is létrehozhat.</span><span class="sxs-lookup"><span data-stu-id="86e9e-266">This paper applies to NetWeaver running on Windows, but you can create the equivalent configuration for Linux.</span></span> <span data-ttu-id="86e9e-267">Központi szolgáltatások használata [Azure Site Recovery](/en-us/azure/site-recovery/site-recovery-overview) a a fürtcsomópontok és a tárolási replikálása.</span><span class="sxs-lookup"><span data-stu-id="86e9e-267">For Central Services, use [Azure Site Recovery](/en-us/azure/site-recovery/site-recovery-overview) to replicate the cluster nodes and storage.</span></span> <span data-ttu-id="86e9e-268">Linux hozzon létre egy három csomópontos földrajzi-fürt magas rendelkezésre állás kiterjesztéssel.</span><span class="sxs-lookup"><span data-stu-id="86e9e-268">For Linux, create a three node geo-cluster using a High Availability Extension.</span></span> 

- <span data-ttu-id="86e9e-269">**Adatbázis-rétegből SAP**.</span><span class="sxs-lookup"><span data-stu-id="86e9e-269">**SAP database tier**.</span></span> <span data-ttu-id="86e9e-270">HSR HANA támogatott replikáláshoz használni.</span><span class="sxs-lookup"><span data-stu-id="86e9e-270">Use HSR for HANA-supported replication.</span></span> <span data-ttu-id="86e9e-271">Egy helyi, két csomópontos magas rendelkezésre állású összeállításban mellett HSR támogatja a többrétegű replikációs, ahol egy külön Azure-régió, egy harmadik csomópontja egységként idegen, nem része a fürt működik, és a fürtözött HSR párjával másodlagos replikája regisztrálása a replikációs cél.</span><span class="sxs-lookup"><span data-stu-id="86e9e-271">In addition to a local, two-node high availability setup, HSR supports multi-tier replication where a third node in a separate Azure region acts as a foreign entity, not part of the cluster, and registers to the secondary replica of the clustered HSR pair as its replication target.</span></span> <span data-ttu-id="86e9e-272">Ez a replikációs lánckapcsolású lánc alkotnak.</span><span class="sxs-lookup"><span data-stu-id="86e9e-272">This form a replication daisy chain.</span></span> <span data-ttu-id="86e9e-273">A feladatátvételt a vész-Helyreállítási csomópontra manuális folyamatban.</span><span class="sxs-lookup"><span data-stu-id="86e9e-273">The failover to the DR node is a manual process.</span></span>

<span data-ttu-id="86e9e-274">Azure Site Recovery segítségével automatikus létrehozása egy teljes mértékben replikált munkakörnyezeti helyet az eredeti, futtatnia kell testre szabott [üzembe helyezési parancsfájlok](/azure/site-recovery/site-recovery-runbook-automation).</span><span class="sxs-lookup"><span data-stu-id="86e9e-274">To use Azure Site Recovery to automatically build a fully replicated production site of your original, you must run customized [deployment scripts](/azure/site-recovery/site-recovery-runbook-automation).</span></span> <span data-ttu-id="86e9e-275">A Site Recovery először telepíti a virtuális gépek a rendelkezésre állási csoportokban, majd futtat parancsfájlokat, mint az erőforrások hozzáadása a terheléselosztók.</span><span class="sxs-lookup"><span data-stu-id="86e9e-275">Site Recovery first deploys the virtual machines in availability sets, then runs scripts to add resources such as load balancers.</span></span> 

## <a name="manageability-considerations"></a><span data-ttu-id="86e9e-276">Felügyeleti szempontok</span><span class="sxs-lookup"><span data-stu-id="86e9e-276">Manageability considerations</span></span>

<span data-ttu-id="86e9e-277">SAP HANA rendelkezik egy biztonsági mentési szolgáltatás használja az alapul szolgáló Azure infrastruktúra.</span><span class="sxs-lookup"><span data-stu-id="86e9e-277">SAP HANA has a backup feature that makes use of the underlying Azure infrastructure.</span></span> <span data-ttu-id="86e9e-278">Annak érdekében, hogy a SAP HANA-adatbázis biztonsági mentése Azure virtuális gépeken futó, a SAP HANA-pillanatkép és az Azure storage pillanatkép használt a biztonsági mentési fájlok konzisztencia biztosításához.</span><span class="sxs-lookup"><span data-stu-id="86e9e-278">To back up the SAP HANA database running on Azure virtual machines, both the SAP HANA snapshot and Azure storage snapshot are used to ensure the backup files' consistency.</span></span> <span data-ttu-id="86e9e-279">További információkért lásd: [biztonsági útmutató SAP Hana Azure virtuális gépeken](/azure/virtual-machines/workloads/sap/sap-hana-backup-guide) és a [Azure Backup szolgáltatás – gyakori kérdések](/azure/backup/backup-azure-backup-faq).</span><span class="sxs-lookup"><span data-stu-id="86e9e-279">For details, see [Backup guide for SAP HANA on Azure Virtual Machines](/azure/virtual-machines/workloads/sap/sap-hana-backup-guide) and the [Azure Backup service FAQ](/azure/backup/backup-azure-backup-faq).</span></span> <span data-ttu-id="86e9e-280">Csak HANA egyetlen üzemelő tárolópéldányokat támogatja az Azure storage pillanatkép.</span><span class="sxs-lookup"><span data-stu-id="86e9e-280">Only HANA single container deployments support Azure storage snapshot.</span></span>

### <a name="identity-management"></a><span data-ttu-id="86e9e-281">Identitáskezelés</span><span class="sxs-lookup"><span data-stu-id="86e9e-281">Identity management</span></span>

<span data-ttu-id="86e9e-282">A központi felügyeleti identitásrendszere minden szinten erőforrásokhoz való hozzáférés szabályozása:</span><span class="sxs-lookup"><span data-stu-id="86e9e-282">Control access to resources by using a centralized identity management system at all levels:</span></span>

- <span data-ttu-id="86e9e-283">Azure-erőforrások keresztül hozzáférést biztosítanak [szerepköralapú hozzáférés-vezérlés](/azure/active-directory/role-based-access-control-what-is) (RBAC).</span><span class="sxs-lookup"><span data-stu-id="86e9e-283">Provide access to Azure resources through [role-based access control](/azure/active-directory/role-based-access-control-what-is) (RBAC).</span></span> 
- <span data-ttu-id="86e9e-284">Hozzáférés engedélyezése az Azure virtuális gépek LDAP, az Azure Active Directory, a Kerberos vagy a másik rendszerbe.</span><span class="sxs-lookup"><span data-stu-id="86e9e-284">Grant access to Azure VMs through LDAP, Azure Active Directory, Kerberos, or another system.</span></span> 
- <span data-ttu-id="86e9e-285">Támogatási hozzáférési jogosultságok magukat az alkalmazások a szolgáltatások SAP biztosít, vagy használjon [OAuth 2.0 és az Azure Active Directory](/azure/active-directory/develop/active-directory-protocols-oauth-code).</span><span class="sxs-lookup"><span data-stu-id="86e9e-285">Support access within the apps themselves through the services that SAP provides, or use [OAuth 2.0 and Azure Active Directory](/azure/active-directory/develop/active-directory-protocols-oauth-code).</span></span> 

### <a name="monitoring"></a><span data-ttu-id="86e9e-286">Figyelés</span><span class="sxs-lookup"><span data-stu-id="86e9e-286">Monitoring</span></span>

<span data-ttu-id="86e9e-287">Azure biztosít több függvények [figyelése és diagnosztikai](/azure/architecture/best-practices/monitoring) az általános infrastruktúra.</span><span class="sxs-lookup"><span data-stu-id="86e9e-287">Azure provides several functions for [monitoring and diagnostics](/azure/architecture/best-practices/monitoring) of the overall infrastructure.</span></span> <span data-ttu-id="86e9e-288">Emellett az Azure-beli virtuális gépek (Linux vagy Windows) fejlett monitorozását az Azure Operations Management Suite (OMS) végzi.</span><span class="sxs-lookup"><span data-stu-id="86e9e-288">Also, enhanced monitoring of Azure virtual machines (Linux or Windows) is handled by Azure Operations Management Suite (OMS).</span></span> 

<span data-ttu-id="86e9e-289">SAP alapú felügyelete, erőforrások és a szolgáltatás teljesítménye az SAP infrastruktúra biztosításához a [Azure SAP fokozott ellenőrzésére](/azure/virtual-machines/workloads/sap/deployment-guide#d98edcd3-f2a1-49f7-b26a-07448ceb60ca) kiterjesztését.</span><span class="sxs-lookup"><span data-stu-id="86e9e-289">To provide SAP-based monitoring of resources and service performance of the SAP infrastructure, the [Azure SAP Enhanced Monitoring](/azure/virtual-machines/workloads/sap/deployment-guide#d98edcd3-f2a1-49f7-b26a-07448ceb60ca) extension is used.</span></span> <span data-ttu-id="86e9e-290">Ez a bővítmény betölti az Azure monitorozási statisztikáit az SAP alkalmazásba az operációs rendszer monitorozása és a DBA Cockpit funkcióinak használata céljából.</span><span class="sxs-lookup"><span data-stu-id="86e9e-290">This extension feeds Azure monitoring statistics into the SAP application for operating system monitoring and DBA Cockpit functions.</span></span> <span data-ttu-id="86e9e-291">Fokozott SAP figyelési feltétele kötelező Azure SAP futtatásához.</span><span class="sxs-lookup"><span data-stu-id="86e9e-291">SAP enhanced monitoring is a mandatory prerequisite to run SAP on Azure.</span></span> <span data-ttu-id="86e9e-292">További információkért lásd: [SAP Megjegyzés 2191498](https://launchpad.support.sap.com/#/notes/2191498) – "az Azure Linux SAP: figyelés fokozott."</span><span class="sxs-lookup"><span data-stu-id="86e9e-292">For details, see [SAP Note 2191498](https://launchpad.support.sap.com/#/notes/2191498) – "SAP on Linux with Azure: Enhanced Monitoring."</span></span>

## <a name="security-considerations"></a><span data-ttu-id="86e9e-293">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="86e9e-293">Security considerations</span></span>

<span data-ttu-id="86e9e-294">Az SAP egy saját felhasználófelügyeleti motorral (UME-vel) vezérli a szerepköralapú hozzáféréseket és az engedélyezést az SAP alkalmazáson belül.</span><span class="sxs-lookup"><span data-stu-id="86e9e-294">SAP has its own Users Management Engine (UME) to control role-based access and authorization within the SAP application.</span></span> <span data-ttu-id="86e9e-295">További információkért lásd: [SAP HANA biztonsági – áttekintés egy](https://archive.sap.com/documents/docs/DOC-62943) (SAP szolgáltatás piactér fiók-hozzáférési szükséges).</span><span class="sxs-lookup"><span data-stu-id="86e9e-295">For details, see [SAP HANA Security—An Overview](https://archive.sap.com/documents/docs/DOC-62943) (SAP Service Marketplace account required for access.)</span></span>

<span data-ttu-id="86e9e-296">A további hálózati biztonság érdekében vegye fontolóra egy [hálózati DMZ](/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid), a hálózati virtuális készülék használó a tűzfal elé webes kézbesítő és Fiori előfeldolgozó Server címkészletek alhálózatát létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="86e9e-296">For additional network security, consider implementing a [Network DMZ](/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid), which uses a network virtual appliance to create a firewall in front of the subnet for Web Dispatcher and Fiori Front-End Server pools.</span></span>

<span data-ttu-id="86e9e-297">Biztonsági infrastruktúra az adatok titkosítása az átvitel során, és inaktív.</span><span class="sxs-lookup"><span data-stu-id="86e9e-297">For infrastructure security, data is encrypted in transit and at rest.</span></span> <span data-ttu-id="86e9e-298">A "Biztonsági szempontok" szakaszában a [SAP NetWeaver az Azure virtuális gépek – tervezési és megvalósítási útmutató](/azure/virtual-machines/workloads/sap/planning-guide) történő címet hálózati biztonsági kezdődik, és az S/4HANA vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="86e9e-298">The "Security considerations" section of the [SAP NetWeaver on Azure Virtual Machines–Planning and Implementation Guide](/azure/virtual-machines/workloads/sap/planning-guide) begins to address network security and applies to S/4HANA.</span></span> <span data-ttu-id="86e9e-299">Ez az útmutató adja meg azt is, hogy a tűzfalakon mely portokat kell megnyitni az alkalmazás kommunikációjának lehetővé tételéhez.</span><span class="sxs-lookup"><span data-stu-id="86e9e-299">The guide also specifies the network ports you must open on the firewalls to allow application communication.</span></span> 

<span data-ttu-id="86e9e-300">Linux IaaS virtuális gépek lemezeit titkosításához, használhatja a [Azure Disk Encryption](/azure/security/azure-security-disk-encryption).</span><span class="sxs-lookup"><span data-stu-id="86e9e-300">To encrypt Linux IaaS virtual machine disks, you can use [Azure Disk Encryption](/azure/security/azure-security-disk-encryption).</span></span> <span data-ttu-id="86e9e-301">A DM-Crypt funkció a Linux kötettitkosítást biztosít az operációs rendszer és az adatlemezek használ.</span><span class="sxs-lookup"><span data-stu-id="86e9e-301">It uses the DM-Crypt feature of Linux to provide volume encryption for the operating system and the data disks.</span></span> <span data-ttu-id="86e9e-302">A megoldás is használható az Azure Key Vault segítségével szabályozhatja, és a lemez-titkosítási kulcsok és titkos kulcsainak kulcstároló-előfizetése kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="86e9e-302">The solution also works with Azure Key Vault to help you control and manage the disk-encryption keys and secrets in your key vault subscription.</span></span> <span data-ttu-id="86e9e-303">A virtuális gépek lemezein található, inaktív adatok az Azure Storage-ban titkosítva vannak.</span><span class="sxs-lookup"><span data-stu-id="86e9e-303">Data on the virtual machine disks are encrypted at rest in your Azure storage.</span></span>

<span data-ttu-id="86e9e-304">Az SAP HANA inaktív adatainak titkosításához javasoljuk az SAP HANA natív titkosítási technológiájának használatát.</span><span class="sxs-lookup"><span data-stu-id="86e9e-304">For SAP HANA data-at-rest encryption, we recommend using the SAP HANA native encryption technology.</span></span> 

> [!NOTE]
> <span data-ttu-id="86e9e-305">Nem a HANA adatokat nyugalmi titkosítást használ Azure Disk Encryption ugyanazon a kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="86e9e-305">Do not use the HANA data-at-rest encryption with Azure Disk Encryption on the same server.</span></span> <span data-ttu-id="86e9e-306">Hana csak a HANA adatok titkosítást használjon.</span><span class="sxs-lookup"><span data-stu-id="86e9e-306">For HANA, use only HANA data encryption.</span></span>

## <a name="communities"></a><span data-ttu-id="86e9e-307">Közösségek</span><span class="sxs-lookup"><span data-stu-id="86e9e-307">Communities</span></span>

<span data-ttu-id="86e9e-308">A közösségek választ adhatnak a kérdéseire, továbbá segíthetnek a sikeres üzembe helyezésben.</span><span class="sxs-lookup"><span data-stu-id="86e9e-308">Communities can answer questions and help you set up a successful deployment.</span></span> <span data-ttu-id="86e9e-309">A következőket ajánljuk figyelmébe:</span><span class="sxs-lookup"><span data-stu-id="86e9e-309">Consider the following:</span></span>

- [<span data-ttu-id="86e9e-310">A Microsoft Platform blog futó SAP-alkalmazásokból</span><span class="sxs-lookup"><span data-stu-id="86e9e-310">Running SAP Applications on the Microsoft Platform Blog</span></span>](https://blogs.msdn.microsoft.com/saponsqlserver/2017/05/04/sap-on-azure-general-update-for-customers-partners-april-2017/)
- [<span data-ttu-id="86e9e-311">Az Azure közösségi támogatás</span><span class="sxs-lookup"><span data-stu-id="86e9e-311">Azure Community Support</span></span>](https://azure.microsoft.com/support/community/)
- [<span data-ttu-id="86e9e-312">SAP-Közösség</span><span class="sxs-lookup"><span data-stu-id="86e9e-312">SAP Community</span></span>](https://www.sap.com/community.html)
- [<span data-ttu-id="86e9e-313">Stack Overflow</span><span class="sxs-lookup"><span data-stu-id="86e9e-313">Stack Overflow</span></span>](https://stackoverflow.com/tags/sap/)
