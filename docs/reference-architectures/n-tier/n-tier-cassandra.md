---
title: Az Apache Cassandra használatával N szintű alkalmazás
titleSuffix: Azure Reference Architectures
description: Futtassa a Linux rendszerű virtuális gépek az N szintű architektúra a Microsoft Azure-ban Apache Cassandra.
author: MikeWasson
ms.date: 11/12/2018
ms.custom: seodec18
ms.openlocfilehash: 41ff90718a7795807448b0a360bb0ebb3479c402
ms.sourcegitcommit: 95131d1011def26fb629731d42a4e8d4d49b3540
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 01/17/2019
ms.locfileid: "54372898"
---
# <a name="linux-n-tier-application-in-azure-with-apache-cassandra"></a><span data-ttu-id="33d5d-103">Az Azure-ban az Apache Cassandra használatával Linux N szintű alkalmazás</span><span class="sxs-lookup"><span data-stu-id="33d5d-103">Linux N-tier application in Azure with Apache Cassandra</span></span>

<span data-ttu-id="33d5d-104">Ez a referenciaarchitektúra bemutatja, hogyan helyezhet üzembe virtuális gépeket (VM) és a egy virtuális hálózatot konfigurált egy [N szintű](../../guide/architecture-styles/n-tier.md) alkalmazást, az Apache Cassandra használatával Linux rendszeren az adatréteg számára.</span><span class="sxs-lookup"><span data-stu-id="33d5d-104">This reference architecture shows how to deploy virtual machines (VMs) and a virtual network configured for an [N-tier](../../guide/architecture-styles/n-tier.md) application, using Apache Cassandra on Linux for the data tier.</span></span> <span data-ttu-id="33d5d-105">[**A megoldás üzembe helyezése.**](#deploy-the-solution)</span><span class="sxs-lookup"><span data-stu-id="33d5d-105">[**Deploy this solution**](#deploy-the-solution).</span></span>

![N szintű architektúrához a Microsoft Azure](./images/n-tier-cassandra.png)

<span data-ttu-id="33d5d-107">*Töltse le az architektúra [Visio-fájlját][visio-download].*</span><span class="sxs-lookup"><span data-stu-id="33d5d-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="33d5d-108">Architektúra</span><span class="sxs-lookup"><span data-stu-id="33d5d-108">Architecture</span></span>

<span data-ttu-id="33d5d-109">Az architektúra a következő összetevőkből áll:</span><span class="sxs-lookup"><span data-stu-id="33d5d-109">The architecture has the following components:</span></span>

- <span data-ttu-id="33d5d-110">**Erőforráscsoport**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-110">**Resource group**.</span></span> <span data-ttu-id="33d5d-111">Az [erőforráscsoportok][resource-manager-overview] az erőforrások csoportosítására használhatók, így élettartamuk, tulajdonosuk vagy egyéb jellemzőik alapján kezelhetők.</span><span class="sxs-lookup"><span data-stu-id="33d5d-111">[Resource groups][resource-manager-overview] are used to group resources so they can be managed by lifetime, owner, or other criteria.</span></span>

- <span data-ttu-id="33d5d-112">**Virtuális hálózat (VNet) és alhálózatok**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-112">**Virtual network (VNet) and subnets**.</span></span> <span data-ttu-id="33d5d-113">Minden Azure VM egy alhálózatokra osztható virtuális hálózatban van üzembe helyezve.</span><span class="sxs-lookup"><span data-stu-id="33d5d-113">Every Azure VM is deployed into a VNet that can be segmented into subnets.</span></span> <span data-ttu-id="33d5d-114">Hozzon létre egy külön alhálózatot minden egyes szinthez.</span><span class="sxs-lookup"><span data-stu-id="33d5d-114">Create a separate subnet for each tier.</span></span>

- <span data-ttu-id="33d5d-115">**NSG-k**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-115">**NSGs**.</span></span> <span data-ttu-id="33d5d-116">Használjon [hálózati biztonsági csoportokat][nsg] (NSG-ket) a hálózati forgalom korlátozására a virtuális hálózaton belül.</span><span class="sxs-lookup"><span data-stu-id="33d5d-116">Use [network security groups][nsg] (NSGs) to restrict network traffic within the VNet.</span></span> <span data-ttu-id="33d5d-117">Az itt látható három rétegű architektúrában például az adatbázisszint az üzleti szint és a felügyeleti alhálózaton, de nem a webes kezelőfelület érkező forgalmat fogad.</span><span class="sxs-lookup"><span data-stu-id="33d5d-117">For example, in the three-tier architecture shown here, the database tier accepts traffic from the business tier and the management subnet, but not the web front end.</span></span>

- <span data-ttu-id="33d5d-118">**A DDoS Protection**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-118">**DDoS Protection**.</span></span> <span data-ttu-id="33d5d-119">Bár az Azure platform lehetővé teszi, hogy alapvető védelmet az elosztott szolgáltatásmegtagadási (DDoS-) támadások ellen, javasoljuk a [DDoS Protection Standard][ddos], amely továbbfejlesztett DDoS-támadás kockázatcsökkentése szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="33d5d-119">Although the Azure platform provides basic protection against distributed denial of service (DDoS) attacks, we recommend using [DDoS Protection Standard][ddos], which has enhanced DDoS mitigation features.</span></span> <span data-ttu-id="33d5d-120">Lásd: [biztonsági szempontok](#security-considerations).</span><span class="sxs-lookup"><span data-stu-id="33d5d-120">See [Security considerations](#security-considerations).</span></span>

- <span data-ttu-id="33d5d-121">**Virtuális gépek**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-121">**Virtual machines**.</span></span> <span data-ttu-id="33d5d-122">Javaslatok a virtuális gépek konfigurálása, lásd: [Windows virtuális gépek futtatása az Azure-beli](./windows-vm.md) és [Linux rendszerű virtuális gép futtatása az Azure-ban](./linux-vm.md).</span><span class="sxs-lookup"><span data-stu-id="33d5d-122">For recommendations on configuring VMs, see [Run a Windows VM on Azure](./windows-vm.md) and [Run a Linux VM on Azure](./linux-vm.md).</span></span>

- <span data-ttu-id="33d5d-123">**Rendelkezésre állási csoportok**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-123">**Availability sets**.</span></span> <span data-ttu-id="33d5d-124">Hozzon létre egy [rendelkezésre állási csoport] [ azure-availability-sets] mindegyik réteghez, és az egyes szintek, amelyek a virtuális gépek így magasabb szintű támogatásra jogosult legalább két virtuális gép kiépítése [szolgáltatói szerződést (SLA)] [ vm-sla].</span><span class="sxs-lookup"><span data-stu-id="33d5d-124">Create an [availability set][azure-availability-sets] for each tier, and provision at least two VMs in each tier, which makes the VMs eligible for a higher [service level agreement (SLA)][vm-sla].</span></span>

- <span data-ttu-id="33d5d-125">**Azure-terheléselosztók**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-125">**Azure load balancers**.</span></span> <span data-ttu-id="33d5d-126">A [terheléselosztók] [ load-balancer] beérkező internetes kérelmeket a Virtuálisgép-példányok elosztása.</span><span class="sxs-lookup"><span data-stu-id="33d5d-126">The [load balancers][load-balancer] distribute incoming Internet requests to the VM instances.</span></span> <span data-ttu-id="33d5d-127">Használja a [nyilvános load balancer] [ load-balancer-external] terjeszteni a bejövő internetes forgalom webes szinten és a egy [belső load balancer] [ load-balancer-internal] , elosztja a hálózati forgalmat a webes szintről az üzleti szint.</span><span class="sxs-lookup"><span data-stu-id="33d5d-127">Use a [public load balancer][load-balancer-external] to distribute incoming Internet traffic to the web tier, and an [internal load balancer][load-balancer-internal] to distribute network traffic from the web tier to the business tier.</span></span>

- <span data-ttu-id="33d5d-128">**Nyilvános IP-cím**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-128">**Public IP address**.</span></span> <span data-ttu-id="33d5d-129">A nyilvános load balancer az internetes forgalmat fogadó nyilvános IP-cím szükséges.</span><span class="sxs-lookup"><span data-stu-id="33d5d-129">A public IP address is needed for the public load balancer to receive Internet traffic.</span></span>

- <span data-ttu-id="33d5d-130">**Jumpbox**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-130">**Jumpbox**.</span></span> <span data-ttu-id="33d5d-131">Más néven [bástyagazdagép].</span><span class="sxs-lookup"><span data-stu-id="33d5d-131">Also called a [bastion host].</span></span> <span data-ttu-id="33d5d-132">A hálózaton található biztonságos virtuális gép, amelyet a rendszergazdák a többi virtuális géphez való kapcsolódásra használnak.</span><span class="sxs-lookup"><span data-stu-id="33d5d-132">A secure VM on the network that administrators use to connect to the other VMs.</span></span> <span data-ttu-id="33d5d-133">A jumpbox olyan NSG-vel rendelkezik, amely csak a biztonságos elemek listáján szereplő nyilvános IP-címekről érkező távoli forgalmat engedélyezi.</span><span class="sxs-lookup"><span data-stu-id="33d5d-133">The jumpbox has an NSG that allows remote traffic only from public IP addresses on a safe list.</span></span> <span data-ttu-id="33d5d-134">Az NSG-t engedélyezni kell az ssh adatforgalmat.</span><span class="sxs-lookup"><span data-stu-id="33d5d-134">The NSG should allow ssh traffic.</span></span>

- <span data-ttu-id="33d5d-135">**Apache Cassandra-adatbázis**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-135">**Apache Cassandra database**.</span></span> <span data-ttu-id="33d5d-136">Magas rendelkezésre állást biztosít az adatszinten a replikáció és a feladatátvétel engedélyezésével.</span><span class="sxs-lookup"><span data-stu-id="33d5d-136">Provides high availability at the data tier, by enabling replication and failover.</span></span>

- <span data-ttu-id="33d5d-137">**Azure DNS**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-137">**Azure DNS**.</span></span> <span data-ttu-id="33d5d-138">[Az Azure DNS] [ azure-dns] DNS-tartományok egy üzemeltetési szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="33d5d-138">[Azure DNS][azure-dns] is a hosting service for DNS domains.</span></span> <span data-ttu-id="33d5d-139">A Microsoft Azure infrastruktúráját használja a névfeloldást biztosít.</span><span class="sxs-lookup"><span data-stu-id="33d5d-139">It provides name resolution using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="33d5d-140">Ha tartományait az Azure-ban üzemelteti, DNS-rekordjait a többi Azure-szolgáltatáshoz is használt hitelesítő adatokkal, API-kkal, eszközökkel és számlázási információkkal kezelheti.</span><span class="sxs-lookup"><span data-stu-id="33d5d-140">By hosting your domains in Azure, you can manage your DNS records using the same credentials, APIs, tools, and billing as your other Azure services.</span></span>

## <a name="recommendations"></a><span data-ttu-id="33d5d-141">Javaslatok</span><span class="sxs-lookup"><span data-stu-id="33d5d-141">Recommendations</span></span>

<span data-ttu-id="33d5d-142">Az Ön követelményei eltérhetnek az itt leírt architektúrától.</span><span class="sxs-lookup"><span data-stu-id="33d5d-142">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="33d5d-143">Ezeket a javaslatokat tekintse kiindulópontnak.</span><span class="sxs-lookup"><span data-stu-id="33d5d-143">Use these recommendations as a starting point.</span></span>

### <a name="vnet--subnets"></a><span data-ttu-id="33d5d-144">Virtuális hálózat/alhálózatok</span><span class="sxs-lookup"><span data-stu-id="33d5d-144">VNet / Subnets</span></span>

<span data-ttu-id="33d5d-145">A virtuális hálózat létrehozásakor határozza meg az egyes alhálózatok erőforrásai által igényelt IP-címek számát.</span><span class="sxs-lookup"><span data-stu-id="33d5d-145">When you create the VNet, determine how many IP addresses your resources in each subnet require.</span></span> <span data-ttu-id="33d5d-146">[CIDR] jelöléssel adjon meg egy alhálózati maszkot és egy virtuális hálózati címtartományt, amely elég nagy a szükséges IP-címekhez.</span><span class="sxs-lookup"><span data-stu-id="33d5d-146">Specify a subnet mask and a VNet address range large enough for the required IP addresses, using [CIDR] notation.</span></span> <span data-ttu-id="33d5d-147">Használjon a szabványos [magánhálózati IP-címblokkokba][private-ip-space] eső címterületet. Ezek az IP-címblokkok a következők: 10.0.0.0/8, 172.16.0.0/12 és 192.168.0.0/16.</span><span class="sxs-lookup"><span data-stu-id="33d5d-147">Use an address space that falls within the standard [private IP address blocks][private-ip-space], which are 10.0.0.0/8, 172.16.0.0/12, and 192.168.0.0/16.</span></span>

<span data-ttu-id="33d5d-148">Válasszon olyan címtartományt, amely nincs átfedésben a helyszíni hálózat, arra az esetre, be kell állítania egy átjárót a virtuális hálózat és a helyszíni hálózat között később.</span><span class="sxs-lookup"><span data-stu-id="33d5d-148">Choose an address range that doesn't overlap with your on-premises network, in case you need to set up a gateway between the VNet and your on-premise network later.</span></span> <span data-ttu-id="33d5d-149">A virtuális hálózat létrehozása után a címtartomány nem módosítható.</span><span class="sxs-lookup"><span data-stu-id="33d5d-149">Once you create the VNet, you can't change the address range.</span></span>

<span data-ttu-id="33d5d-150">Az alhálózatokat a funkciók és a biztonsági követelmények szem előtt tartásával tervezze meg.</span><span class="sxs-lookup"><span data-stu-id="33d5d-150">Design subnets with functionality and security requirements in mind.</span></span> <span data-ttu-id="33d5d-151">Minden ugyanazon szinthez vagy szerepkörhöz tartozó virtuális gépnek egyazon alhálózaton kell lennie. Ez az alhálózat biztonsági korlátot is képezhet.</span><span class="sxs-lookup"><span data-stu-id="33d5d-151">All VMs within the same tier or role should go into the same subnet, which can be a security boundary.</span></span> <span data-ttu-id="33d5d-152">A virtuális hálózatok és alhálózatok megtervezésével kapcsolatos további információkért lásd az [Azure-beli virtuális hálózatok tervezésével és kialakításával][plan-network] foglalkozó témakört.</span><span class="sxs-lookup"><span data-stu-id="33d5d-152">For more information about designing VNets and subnets, see [Plan and design Azure Virtual Networks][plan-network].</span></span>

### <a name="load-balancers"></a><span data-ttu-id="33d5d-153">Terheléselosztók</span><span class="sxs-lookup"><span data-stu-id="33d5d-153">Load balancers</span></span>

<span data-ttu-id="33d5d-154">A virtuális gépek közvetlenül az internethez nem teszik elérhetővé.</span><span class="sxs-lookup"><span data-stu-id="33d5d-154">Do not expose the VMs directly to the Internet.</span></span> <span data-ttu-id="33d5d-155">Ehelyett adjon mindegyiknek privát IP-címet.</span><span class="sxs-lookup"><span data-stu-id="33d5d-155">Instead, give each VM a private IP address.</span></span> <span data-ttu-id="33d5d-156">Az IP-cím a nyilvános load Balancer használatával az ügyfelek csatlakoznak.</span><span class="sxs-lookup"><span data-stu-id="33d5d-156">Clients connect using the IP address of the public load balancer.</span></span>

<span data-ttu-id="33d5d-157">Adja meg a terheléselosztó a virtuális gépek felé irányuló közvetlen hálózati forgalomra vonatkozó szabályait.</span><span class="sxs-lookup"><span data-stu-id="33d5d-157">Define load balancer rules to direct network traffic to the VMs.</span></span> <span data-ttu-id="33d5d-158">Például a HTTP-forgalom engedélyezéséhez hozzon létre egy szabályt, amely hozzárendeli a 80-as portot az előtérbeli konfigurációból a háttércímkészletben található 80-as porthoz.</span><span class="sxs-lookup"><span data-stu-id="33d5d-158">For example, to enable HTTP traffic, create a rule that maps port 80 from the front-end configuration to port 80 on the back-end address pool.</span></span> <span data-ttu-id="33d5d-159">Amikor egy ügyfél HTTP-kérelmet küld a 80-as port felé, a terheléselosztó kiválaszt egy háttérbeli IP-címet egy [kivonatoló algoritmus][load-balancer-hashing] használatával, amely tartalmazza a forrás IP-címét.</span><span class="sxs-lookup"><span data-stu-id="33d5d-159">When a client sends an HTTP request to port 80, the load balancer selects a back-end IP address by using a [hashing algorithm][load-balancer-hashing] that includes the source IP address.</span></span> <span data-ttu-id="33d5d-160">Kérelmek megoszlanak az összes virtuális gép között.</span><span class="sxs-lookup"><span data-stu-id="33d5d-160">Client requests are distributed across all the VMs.</span></span>

### <a name="network-security-groups"></a><span data-ttu-id="33d5d-161">Network security groups (Hálózati biztonsági csoportok)</span><span class="sxs-lookup"><span data-stu-id="33d5d-161">Network security groups</span></span>

<span data-ttu-id="33d5d-162">A szintek közötti forgalmat NSG-szabályokkal korlátozhatja.</span><span class="sxs-lookup"><span data-stu-id="33d5d-162">Use NSG rules to restrict traffic between tiers.</span></span> <span data-ttu-id="33d5d-163">Ha például a fenti három rétegű architektúrában a webes szint nem kommunikál közvetlenül az adatbázisszint.</span><span class="sxs-lookup"><span data-stu-id="33d5d-163">For example, in the three-tier architecture shown above, the web tier does not communicate directly with the database tier.</span></span> <span data-ttu-id="33d5d-164">Ennek kényszerítése érdekében az adatbázisszintnek blokkolnia kell a webes szint alhálózatáról érkező bejövő forgalmat.</span><span class="sxs-lookup"><span data-stu-id="33d5d-164">To enforce this, the database tier should block incoming traffic from the web tier subnet.</span></span>

1. <span data-ttu-id="33d5d-165">Megtagadási az összes bejövő forgalmat a virtuális hálózatról.</span><span class="sxs-lookup"><span data-stu-id="33d5d-165">Deny all inbound traffic from the VNet.</span></span> <span data-ttu-id="33d5d-166">(A szabályban használja a `VIRTUAL_NETWORK` címkét.)</span><span class="sxs-lookup"><span data-stu-id="33d5d-166">(Use the `VIRTUAL_NETWORK` tag in the rule.)</span></span>
2. <span data-ttu-id="33d5d-167">Az üzleti szint alhálózatáról érkező forgalom engedélyezéséhez.</span><span class="sxs-lookup"><span data-stu-id="33d5d-167">Allow inbound traffic from the business tier subnet.</span></span>
3. <span data-ttu-id="33d5d-168">Az adatbázisszint alhálózatán érkező forgalom engedélyezéséhez.</span><span class="sxs-lookup"><span data-stu-id="33d5d-168">Allow inbound traffic from the database tier subnet itself.</span></span> <span data-ttu-id="33d5d-169">Ez a szabály lehetővé teszi, hogy szükség van az adatbázis-replikáció és feladatátvételi adatbázis-beli virtuális gépek közötti kommunikációt.</span><span class="sxs-lookup"><span data-stu-id="33d5d-169">This rule allows communication between the database VMs, which is needed for database replication and failover.</span></span>
4. <span data-ttu-id="33d5d-170">Forgalom ssh (22-es port) a jumpbox alhálózatáról származó.</span><span class="sxs-lookup"><span data-stu-id="33d5d-170">Allow ssh traffic (port 22) from the jumpbox subnet.</span></span> <span data-ttu-id="33d5d-171">Ez lehetővé teszi, hogy a rendszergazdák csatlakozni tudjanak az adatbázisszinthez a jumpboxból.</span><span class="sxs-lookup"><span data-stu-id="33d5d-171">This rule lets administrators connect to the database tier from the jumpbox.</span></span>

<span data-ttu-id="33d5d-172">2-szabályok létrehozása &ndash; magasabb prioritású, mint az első szabály, így azt felülbírálják a 4.</span><span class="sxs-lookup"><span data-stu-id="33d5d-172">Create rules 2 &ndash; 4 with higher priority than the first rule, so they override it.</span></span>

### <a name="cassandra"></a><span data-ttu-id="33d5d-173">Cassandra</span><span class="sxs-lookup"><span data-stu-id="33d5d-173">Cassandra</span></span>

<span data-ttu-id="33d5d-174">Éles környezetben ajánlott a [DataStax Enterprise][datastax] használata, de ezek a javaslatok bármely Cassandra-kiadásra is vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="33d5d-174">We recommend [DataStax Enterprise][datastax] for production use, but these recommendations apply to any Cassandra edition.</span></span> <span data-ttu-id="33d5d-175">További információk a DataStax futtatásáról az Azure-ban: [A DataStax Enterprise üzembehelyezési útmutatója az Azure-hoz][cassandra-in-azure].</span><span class="sxs-lookup"><span data-stu-id="33d5d-175">For more information on running DataStax in Azure, see [DataStax Enterprise Deployment Guide for Azure][cassandra-in-azure].</span></span>

<span data-ttu-id="33d5d-176">Helyezze a virtuális gépeket egy rendelkezésre állási csoport Cassandra-fürtjére annak érdekében, hogy a Cassandra-replikák több tartalék és frissítési tartományon legyenek elosztva.</span><span class="sxs-lookup"><span data-stu-id="33d5d-176">Put the VMs for a Cassandra cluster in an availability set to ensure that the Cassandra replicas are distributed across multiple fault domains and upgrade domains.</span></span> <span data-ttu-id="33d5d-177">A tartalék és a frissítési tartományokról további információkért lásd a [virtuális gépek rendelkezésre állásának kezelésével][azure-availability-sets] foglalkozó témakört.</span><span class="sxs-lookup"><span data-stu-id="33d5d-177">For more information about fault domains and upgrade domains, see [Manage the availability of virtual machines][azure-availability-sets].</span></span>

<span data-ttu-id="33d5d-178">Rendelkezésre állási csoportonként konfiguráljon három tartalék tartományt (ez a maximum) és 18 frissítési tartományt.</span><span class="sxs-lookup"><span data-stu-id="33d5d-178">Configure three fault domains (the maximum) per availability set and 18 upgrade domains per availability set.</span></span> <span data-ttu-id="33d5d-179">Így a legmagasabb számú olyan frissítési tartománya lehet, amelyet a tartalék tartományokon még egyenletesen lehet elosztani.</span><span class="sxs-lookup"><span data-stu-id="33d5d-179">This provides the maximum number of upgrade domains that can still be distributed evenly across the fault domains.</span></span>

<span data-ttu-id="33d5d-180">Konfigurálja a csomópontokat állvány-kompatibilis üzemmódban.</span><span class="sxs-lookup"><span data-stu-id="33d5d-180">Configure nodes in rack-aware mode.</span></span> <span data-ttu-id="33d5d-181">Képezze le a tartalék tartományokat állványokra a `cassandra-rackdc.properties` fájlban.</span><span class="sxs-lookup"><span data-stu-id="33d5d-181">Map fault domains to racks in the `cassandra-rackdc.properties` file.</span></span>

<span data-ttu-id="33d5d-182">A fürt előtt nincs szükség terheléselosztóra.</span><span class="sxs-lookup"><span data-stu-id="33d5d-182">You don't need a load balancer in front of the cluster.</span></span> <span data-ttu-id="33d5d-183">Az ügyfél közvetlenül csatlakozik a fürt egyik csomópontjához.</span><span class="sxs-lookup"><span data-stu-id="33d5d-183">The client connects directly to a node in the cluster.</span></span>

<span data-ttu-id="33d5d-184">A magas rendelkezésre állás érdekében a több Azure-régióban a Cassandra üzembe helyezése.</span><span class="sxs-lookup"><span data-stu-id="33d5d-184">For high availability, deploy Cassandra in more than one Azure region.</span></span> <span data-ttu-id="33d5d-185">Csomópontok minden régióban állvány-kompatibilis üzemmódban a tartalék vannak konfigurálva, és frissítési tartományokba, az a régión belüli rugalmasság.</span><span class="sxs-lookup"><span data-stu-id="33d5d-185">Nodes within each region are configured in rack-aware mode with fault and upgrade domains, for resiliency inside the region.</span></span>

### <a name="jumpbox"></a><span data-ttu-id="33d5d-186">Jumpbox</span><span class="sxs-lookup"><span data-stu-id="33d5d-186">Jumpbox</span></span>

<span data-ttu-id="33d5d-187">Nincs ssh hozzáférés engedélyezése a nyilvános internetről való az alkalmazás számítási feladatait futtató virtuális gépek.</span><span class="sxs-lookup"><span data-stu-id="33d5d-187">Don't allow ssh access from the public Internet to the VMs that run the application workload.</span></span> <span data-ttu-id="33d5d-188">Ehelyett minden ssh hozzáférési ezeken a virtuális gépeken a jumpboxon keresztül kell származnia.</span><span class="sxs-lookup"><span data-stu-id="33d5d-188">Instead, all ssh access to these VMs must come through the jumpbox.</span></span> <span data-ttu-id="33d5d-189">A rendszergazda először bejelentkezik a jumpboxba, majd azon keresztül bejelentkezik a többi virtuális gépbe.</span><span class="sxs-lookup"><span data-stu-id="33d5d-189">An administrator logs into the jumpbox, and then logs into the other VM from the jumpbox.</span></span> <span data-ttu-id="33d5d-190">A jumpbox engedélyezi ssh-forgalmat az internetről, de csak az ismert, biztonságos IP-címeket.</span><span class="sxs-lookup"><span data-stu-id="33d5d-190">The jumpbox allows ssh traffic from the Internet, but only from known, safe IP addresses.</span></span>

<span data-ttu-id="33d5d-191">A jumpbox rendelkezik a minimális teljesítménykövetelményei, ezért kattintson egy kisméretű Virtuálisgép-méretet.</span><span class="sxs-lookup"><span data-stu-id="33d5d-191">The jumpbox has minimal performance requirements, so select a small VM size.</span></span> <span data-ttu-id="33d5d-192">Hozzon létre egy [nyilvános IP-címet] a jumpbox számára.</span><span class="sxs-lookup"><span data-stu-id="33d5d-192">Create a [public IP address] for the jumpbox.</span></span> <span data-ttu-id="33d5d-193">Helyezze a jumpboxot a többi virtuális géppel megegyező virtuális hálózatba, de egy külön felügyeleti alhálózaton legyen.</span><span class="sxs-lookup"><span data-stu-id="33d5d-193">Place the jumpbox in the same VNet as the other VMs, but in a separate management subnet.</span></span>

<span data-ttu-id="33d5d-194">A jumpbox védelmére, adja hozzá egy NSG-szabályt, amely engedélyezi az ssh-kapcsolatokat csak a nyilvános IP-címkészletekről.</span><span class="sxs-lookup"><span data-stu-id="33d5d-194">To secure the jumpbox, add an NSG rule that allows ssh connections only from a safe set of public IP addresses.</span></span> <span data-ttu-id="33d5d-195">Konfigurálja az ssh forgalom engedélyezésére a felügyeleti alhálózatról a többi alhálózathoz NSG-t.</span><span class="sxs-lookup"><span data-stu-id="33d5d-195">Configure the NSGs for the other subnets to allow ssh traffic from the management subnet.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="33d5d-196">Méretezési szempontok</span><span class="sxs-lookup"><span data-stu-id="33d5d-196">Scalability considerations</span></span>

<span data-ttu-id="33d5d-197">A web és business szintek, érdemes lehet használatával [a virtual machine scale sets][vmss], állítsa be a különálló virtuális gépek rendelkezésre állási környezetbe való üzembe helyezés helyett.</span><span class="sxs-lookup"><span data-stu-id="33d5d-197">For the web and business tiers, consider using [virtual machine scale sets][vmss], instead of deploying separate VMs into an availability set.</span></span> <span data-ttu-id="33d5d-198">Egy méretezési csoportot egyszerűen üzembe helyezheti és kezelheti az azonos virtuális gépek és az automatikus méretezés a virtuális gépek teljesítmény-mérőszámok alapján.</span><span class="sxs-lookup"><span data-stu-id="33d5d-198">A scale set makes it easy to deploy and manage a set of identical VMs, and autoscale the VMs based on performance metrics.</span></span> <span data-ttu-id="33d5d-199">Ahogy a terhelés növekszik a virtuális gépeken, a rendszer további virtuális gépeket ad a terheléselosztóhoz.</span><span class="sxs-lookup"><span data-stu-id="33d5d-199">As the load on the VMs increases, additional VMs are automatically added to the load balancer.</span></span> <span data-ttu-id="33d5d-200">Fontolja meg a méretezési csoportok használatát, ha virtuális gépek gyors horizontális felskálázására vagy automatikus méretezésre van szüksége.</span><span class="sxs-lookup"><span data-stu-id="33d5d-200">Consider scale sets if you need to quickly scale out VMs, or need to autoscale.</span></span>

<span data-ttu-id="33d5d-201">A méretezési csoportokban üzembe helyezett virtuális gépek konfigurálásának két alapvető módja van:</span><span class="sxs-lookup"><span data-stu-id="33d5d-201">There are two basic ways to configure VMs deployed in a scale set:</span></span>

- <span data-ttu-id="33d5d-202">Bővítmények segítségével konfigurálhatja a virtuális Gépet a telepítés után.</span><span class="sxs-lookup"><span data-stu-id="33d5d-202">Use extensions to configure the VM after it's deployed.</span></span> <span data-ttu-id="33d5d-203">Ezzel a módszerrel az új virtuálisgép-példányok indítása több időt vehet igénybe, mint a bővítmények nélküli virtuális gépeké.</span><span class="sxs-lookup"><span data-stu-id="33d5d-203">With this approach, new VM instances may take longer to start up than a VM with no extensions.</span></span>

- <span data-ttu-id="33d5d-204">Üzembe helyezhet egy [felügyelt lemezt](/azure/storage/storage-managed-disks-overview) egy egyéni rendszerképpel.</span><span class="sxs-lookup"><span data-stu-id="33d5d-204">Deploy a [managed disk](/azure/storage/storage-managed-disks-overview) with a custom disk image.</span></span> <span data-ttu-id="33d5d-205">Ez a módszer gyorsabban kivitelezhető.</span><span class="sxs-lookup"><span data-stu-id="33d5d-205">This option may be quicker to deploy.</span></span> <span data-ttu-id="33d5d-206">Azonban ez megköveteli, hogy a kép naprakészen.</span><span class="sxs-lookup"><span data-stu-id="33d5d-206">However, it requires you to keep the image up-to-date.</span></span>

<span data-ttu-id="33d5d-207">További információkért lásd: [kialakítási szempontok a méretezési csoportok][vmss-design].</span><span class="sxs-lookup"><span data-stu-id="33d5d-207">For more information, see [Design considerations for scale sets][vmss-design].</span></span>

> [!TIP]
> <span data-ttu-id="33d5d-208">Bármilyen automatikus méretezési megoldás használata esetén jóval előre tesztelje azt az éles környezetre jellemző mennyiségű számítási feladattal.</span><span class="sxs-lookup"><span data-stu-id="33d5d-208">When using any autoscale solution, test it with production-level workloads well in advance.</span></span>

<span data-ttu-id="33d5d-209">Minden Azure-előfizetésre alapértelmezett korlátozások vonatkoznak. Ilyen például a régiónként alkalmazható virtuális gépek maximális száma.</span><span class="sxs-lookup"><span data-stu-id="33d5d-209">Each Azure subscription has default limits in place, including a maximum number of VMs per region.</span></span> <span data-ttu-id="33d5d-210">Támogatási kérelem kitöltésével megnövelheti ezt a korlátot.</span><span class="sxs-lookup"><span data-stu-id="33d5d-210">You can increase the limit by filing a support request.</span></span> <span data-ttu-id="33d5d-211">További információk: [Az Azure-előfizetések és -szolgáltatások korlátozásai, kvótái és megkötései][subscription-limits].</span><span class="sxs-lookup"><span data-stu-id="33d5d-211">For more information, see [Azure subscription and service limits, quotas, and constraints][subscription-limits].</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="33d5d-212">Rendelkezésre állási szempontok</span><span class="sxs-lookup"><span data-stu-id="33d5d-212">Availability considerations</span></span>

<span data-ttu-id="33d5d-213">Ha nem használja a virtual machine scale sets, helyezzen virtuális gépet az azonos szinten egy rendelkezésre állási csoportba.</span><span class="sxs-lookup"><span data-stu-id="33d5d-213">If you don't use virtual machine scale sets, put VMs for the same tier into an availability set.</span></span> <span data-ttu-id="33d5d-214">Hozzon létre legalább két virtuális gépet a rendelkezésre állási csoportban az [Azure-beli virtuális gépekre vonatkozó rendelkezésre állási SLA][vm-sla] támogatásához.</span><span class="sxs-lookup"><span data-stu-id="33d5d-214">Create at least two VMs in the availability set to support the [availability SLA for Azure VMs][vm-sla].</span></span> <span data-ttu-id="33d5d-215">További információk: [Virtuális gépek rendelkezésre állásának kezelése][availability-set].</span><span class="sxs-lookup"><span data-stu-id="33d5d-215">For more information, see [Manage the availability of virtual machines][availability-set].</span></span> <span data-ttu-id="33d5d-216">A méretezési csoportok automatikus használata *elhelyezési csoportra*, amely szerepét egy implicit rendelkezésre állási csoportot.</span><span class="sxs-lookup"><span data-stu-id="33d5d-216">Scale sets automatically use *placement groups*, which act as an implicit availability set.</span></span>

<span data-ttu-id="33d5d-217">A terheléselosztó [állapotmintákat][health-probes] használ a virtuálisgép-példányok rendelkezésre állásának monitorozásához.</span><span class="sxs-lookup"><span data-stu-id="33d5d-217">The load balancer uses [health probes][health-probes] to monitor the availability of VM instances.</span></span> <span data-ttu-id="33d5d-218">Ha a mintavétel nem ér el egy példányt egy bizonyos időkorláton belül, a terheléselosztó nem irányít forgalmat küld a virtuális Gépeket.</span><span class="sxs-lookup"><span data-stu-id="33d5d-218">If a probe can't reach an instance within a timeout period, the load balancer stops sending traffic to that VM.</span></span> <span data-ttu-id="33d5d-219">A terheléselosztó ezután is folytatja a, és ha a virtuális gép újra elérhetővé válik, a terheléselosztó mintavételezést forgalmat a virtuális Gépre.</span><span class="sxs-lookup"><span data-stu-id="33d5d-219">The load balancer will continue to probe, and if the VM becomes available again, the load balancer resumes sending traffic to that VM.</span></span>

<span data-ttu-id="33d5d-220">Az alábbiakban néhány javaslat olvasható a terheléselosztó állapot-mintavételére vonatkozóan:</span><span class="sxs-lookup"><span data-stu-id="33d5d-220">Here are some recommendations on load balancer health probes:</span></span>

- <span data-ttu-id="33d5d-221">A mintavételek a HTTP-t vagy a TCP-t tesztelhetik.</span><span class="sxs-lookup"><span data-stu-id="33d5d-221">Probes can test either HTTP or TCP.</span></span> <span data-ttu-id="33d5d-222">Ha a virtuális gépek HTTP-kiszolgálót futtatnak, HTTP-mintavételt hozzon létre.</span><span class="sxs-lookup"><span data-stu-id="33d5d-222">If your VMs run an HTTP server, create an HTTP probe.</span></span> <span data-ttu-id="33d5d-223">Egyéb esetben TCP-mintavételt hozzon létre.</span><span class="sxs-lookup"><span data-stu-id="33d5d-223">Otherwise create a TCP probe.</span></span>
- <span data-ttu-id="33d5d-224">A HTTP-mintavétel esetében adjon meg elérési utat egy HTTP-végponthoz.</span><span class="sxs-lookup"><span data-stu-id="33d5d-224">For an HTTP probe, specify the path to an HTTP endpoint.</span></span> <span data-ttu-id="33d5d-225">A mintavétel 200-as HTTP-választ vár erről a megadott elérési útról.</span><span class="sxs-lookup"><span data-stu-id="33d5d-225">The probe checks for an HTTP 200 response from this path.</span></span> <span data-ttu-id="33d5d-226">Ez lehet a gyökérútvonal („/”) vagy egy állapotmonitorozó végpont, amely valamilyen egyéni logikát alkalmaz az alkalmazás állapotának ellenőrzésére.</span><span class="sxs-lookup"><span data-stu-id="33d5d-226">This can be the root path ("/"), or a health-monitoring endpoint that implements some custom logic to check the health of the application.</span></span> <span data-ttu-id="33d5d-227">A végpontnak engedélyeznie kell a névtelen HTTP-kérelmeket.</span><span class="sxs-lookup"><span data-stu-id="33d5d-227">The endpoint must allow anonymous HTTP requests.</span></span>
- <span data-ttu-id="33d5d-228">A mintavétel [ismert IP-címről érkezik:][health-probe-ip] 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="33d5d-228">The probe is sent from a [known IP address][health-probe-ip], 168.63.129.16.</span></span> <span data-ttu-id="33d5d-229">Győződjön meg arról, hogy nem tiltja a bejövő és kimenő forgalmat az IP-címről valamelyik tűzfalszabályzatban vagy NSG-szabályok a.</span><span class="sxs-lookup"><span data-stu-id="33d5d-229">Make sure you don't block traffic to or from this IP address in any firewall policies or NSG rules.</span></span>
- <span data-ttu-id="33d5d-230">Az állapotminták állapotának megtekintéséhez használjon [állapotminta-naplókat][health-probe-log].</span><span class="sxs-lookup"><span data-stu-id="33d5d-230">Use [health probe logs][health-probe-log] to view the status of the health probes.</span></span> <span data-ttu-id="33d5d-231">Engedélyezze a naplózást az Azure Portalon minden egyes terheléselosztóra vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="33d5d-231">Enable logging in the Azure portal for each load balancer.</span></span> <span data-ttu-id="33d5d-232">A naplókat a rendszer az Azure Blob Storage-ba írja.</span><span class="sxs-lookup"><span data-stu-id="33d5d-232">Logs are written to Azure Blob storage.</span></span> <span data-ttu-id="33d5d-233">A naplók megmutatják, hány virtuális gépet nincsenek rájuk vonatkozó hálózati forgalom meghiúsult mintavételi válaszok miatt.</span><span class="sxs-lookup"><span data-stu-id="33d5d-233">The logs show how many VMs aren't getting network traffic because of failed probe responses.</span></span>

<span data-ttu-id="33d5d-234">A feladatátvételi funkciók a Cassandra-fürt az alkalmazás és a replikák száma használt függ.</span><span class="sxs-lookup"><span data-stu-id="33d5d-234">For the Cassandra cluster, the failover scenarios depend on the consistency levels used by the application and the number of replicas.</span></span> <span data-ttu-id="33d5d-235">Konzisztenciaszintek és használatáról a Cassandrában: [adatkonzisztencia konfigurálása] [ cassandra-consistency] és [Cassandra: Hány csomópontokat a kvórumképzés volt szó, vannak?][cassandra-consistency-usage]</span><span class="sxs-lookup"><span data-stu-id="33d5d-235">For consistency levels and usage in Cassandra, see [Configuring data consistency][cassandra-consistency] and [Cassandra: How many nodes are talked to with Quorum?][cassandra-consistency-usage]</span></span> <span data-ttu-id="33d5d-236">Az adatok elérhetősége a Cassandrában az alkalmazás által használt konzisztenciaszinttől és a replikációs mechanizmustól függ.</span><span class="sxs-lookup"><span data-stu-id="33d5d-236">Data availability in Cassandra is determined by the consistency level used by the application and the replication mechanism.</span></span> <span data-ttu-id="33d5d-237">További információ a replikációról a Cassandrában: [Adatok replikációja a NoSQL-adatbázisokban – Ismertetés][cassandra-replication].</span><span class="sxs-lookup"><span data-stu-id="33d5d-237">For replication in Cassandra, see [Data Replication in NoSQL Databases Explained][cassandra-replication].</span></span>

## <a name="security-considerations"></a><span data-ttu-id="33d5d-238">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="33d5d-238">Security considerations</span></span>

<span data-ttu-id="33d5d-239">A virtuális hálózatok forgalomelkülönítési határok az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="33d5d-239">Virtual networks are a traffic isolation boundary in Azure.</span></span> <span data-ttu-id="33d5d-240">Egy virtuális hálózaton található virtuális gépek nem tud közvetlenül kommunikálni egy másik virtuális hálózattal a virtuális gépeket.</span><span class="sxs-lookup"><span data-stu-id="33d5d-240">VMs in one VNet can't communicate directly with VMs in a different VNet.</span></span> <span data-ttu-id="33d5d-241">Az azonos virtuális hálózatban elhelyezkedő virtuális gépek képesek a kommunikációra, hacsak [hálózati biztonsági csoportokat] [ nsg] (NSG-ket) nem hoz létre a forgalom korlátozására.</span><span class="sxs-lookup"><span data-stu-id="33d5d-241">VMs within the same VNet can communicate, unless you create [network security groups][nsg] (NSGs) to restrict traffic.</span></span> <span data-ttu-id="33d5d-242">További információ: [A Microsoft felhőszolgáltatásai és hálózati biztonság][network-security].</span><span class="sxs-lookup"><span data-stu-id="33d5d-242">For more information, see [Microsoft cloud services and network security][network-security].</span></span>

<span data-ttu-id="33d5d-243">A bejövő internetes forgalom esetében a terheléselosztó szabályai határozzák meg, milyen forgalom érheti el a háttérrendszert.</span><span class="sxs-lookup"><span data-stu-id="33d5d-243">For incoming Internet traffic, the load balancer rules define which traffic can reach the back end.</span></span> <span data-ttu-id="33d5d-244">A terheléselosztó szabályai azonban nem támogatják a biztonságos IP-címek listázását, ezért ha fel kíván venni bizonyos nyilvános IP-címeket a biztonságos címek listájára, adjon hálózati biztonsági csoportot az alhálózathoz.</span><span class="sxs-lookup"><span data-stu-id="33d5d-244">However, load balancer rules don't support IP safe lists, so if you want to add certain public IP addresses to a safe list, add an NSG to the subnet.</span></span>

<span data-ttu-id="33d5d-245">**SZEGÉLYHÁLÓZAT (DMZ)**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-245">**DMZ**.</span></span> <span data-ttu-id="33d5d-246">Érdemes lehet hozzáadnia egy hálózati virtuális berendezést (network virtual appliance, NVA), hogy DMZ-t lehessen létrehozni az internet és az Azure-beli virtuális hálózat között.</span><span class="sxs-lookup"><span data-stu-id="33d5d-246">Consider adding a network virtual appliance (NVA) to create a DMZ between the Internet and the Azure virtual network.</span></span> <span data-ttu-id="33d5d-247">Az NVA egy általános kifejezés egy olyan virtuális berendezésre, amely hálózatokhoz kapcsolódó feladatokat lát el, például gondoskodik a tűzfalról, a csomagvizsgálatról, a naplózásról és az egyéni útválasztásról.</span><span class="sxs-lookup"><span data-stu-id="33d5d-247">NVA is a generic term for a virtual appliance that can perform network-related tasks, such as firewall, packet inspection, auditing, and custom routing.</span></span> <span data-ttu-id="33d5d-248">További információkért lásd a [DMZ az Azure és az internet közötti implementálásával][dmz] foglalkozó témakört.</span><span class="sxs-lookup"><span data-stu-id="33d5d-248">For more information, see [Implementing a DMZ between Azure and the Internet][dmz].</span></span>

<span data-ttu-id="33d5d-249">**Titkosítási**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-249">**Encryption**.</span></span> <span data-ttu-id="33d5d-250">Titkosíthatja az inaktív bizalmas adatokat, és az [Azure Key Vaulttal][azure-key-vault] kezelheti az adatbázis titkosítási kulcsait.</span><span class="sxs-lookup"><span data-stu-id="33d5d-250">Encrypt sensitive data at rest and use [Azure Key Vault][azure-key-vault] to manage the database encryption keys.</span></span> <span data-ttu-id="33d5d-251">A Key Vault képes a hardveres biztonsági modulok (HSM-ek) titkosítási kulcsainak tárolására.</span><span class="sxs-lookup"><span data-stu-id="33d5d-251">Key Vault can store encryption keys in hardware security modules (HSMs).</span></span> <span data-ttu-id="33d5d-252">Emellett ajánlott alkalmazások titkos adatait, például az adatbázis kapcsolati karakterláncainak tárolása a Key Vaultban.</span><span class="sxs-lookup"><span data-stu-id="33d5d-252">It's also recommended to store application secrets, such as database connection strings, in Key Vault.</span></span>

<span data-ttu-id="33d5d-253">**A DDoS protection**.</span><span class="sxs-lookup"><span data-stu-id="33d5d-253">**DDoS protection**.</span></span> <span data-ttu-id="33d5d-254">Az Azure platform alapértelmezés szerint alapszintű DDoS elleni védelmet biztosít.</span><span class="sxs-lookup"><span data-stu-id="33d5d-254">The Azure platform provides basic DDoS protection by default.</span></span> <span data-ttu-id="33d5d-255">Ez a alapvető védelem célja védelme az Azure-infrastruktúra egészében.</span><span class="sxs-lookup"><span data-stu-id="33d5d-255">This basic protection is targeted at protecting the Azure infrastructure as a whole.</span></span> <span data-ttu-id="33d5d-256">Alapszintű DDoS elleni védelem automatikusan engedélyezve van, de javasoljuk a [DDoS Protection Standard][ddos].</span><span class="sxs-lookup"><span data-stu-id="33d5d-256">Although basic DDoS protection is automatically enabled, we recommend using [DDoS Protection Standard][ddos].</span></span> <span data-ttu-id="33d5d-257">Standard szintű védelem használatával adaptív finomhangolási, az alkalmazás hálózati forgalmi minták alapján észlelheti a fenyegetéseket.</span><span class="sxs-lookup"><span data-stu-id="33d5d-257">Standard protection uses adaptive tuning, based on your application's network traffic patterns, to detect threats.</span></span> <span data-ttu-id="33d5d-258">Ez lehetővé teszi, hogy az infrastruktúra-szintű DDoS szabályzatok egyébként észrevétlenül DDoS-támadásokkal szembeni tulajdonosaival.</span><span class="sxs-lookup"><span data-stu-id="33d5d-258">This allows it to apply mitigations against DDoS attacks that might go unnoticed by the infrastructure-wide DDoS policies.</span></span> <span data-ttu-id="33d5d-259">Standard szintű védelmet is biztosít a riasztás, a telemetria és az Azure Monitor-analitikát.</span><span class="sxs-lookup"><span data-stu-id="33d5d-259">Standard protection also provides alerting, telemetry, and analytics through Azure Monitor.</span></span> <span data-ttu-id="33d5d-260">További információkért lásd: [Azure DDoS Protection: Ajánlott eljárások és referenciaarchitektúrákat][ddos-best-practices].</span><span class="sxs-lookup"><span data-stu-id="33d5d-260">For more information, see [Azure DDoS Protection: Best practices and reference architectures][ddos-best-practices].</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="33d5d-261">A megoldás üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="33d5d-261">Deploy the solution</span></span>

<span data-ttu-id="33d5d-262">Ennek a referenciaarchitektúrának egy üzemelő példánya elérhető a [GitHubon][github-folder].</span><span class="sxs-lookup"><span data-stu-id="33d5d-262">A deployment for this reference architecture is available on [GitHub][github-folder].</span></span>

### <a name="prerequisites"></a><span data-ttu-id="33d5d-263">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="33d5d-263">Prerequisites</span></span>

[!INCLUDE [ref-arch-prerequisites.md](../../../includes/ref-arch-prerequisites.md)]

### <a name="deploy-the-solution-using-azbb"></a><span data-ttu-id="33d5d-264">A megoldás üzembe helyezése az azbb használatával</span><span class="sxs-lookup"><span data-stu-id="33d5d-264">Deploy the solution using azbb</span></span>

<span data-ttu-id="33d5d-265">Ha Linux rendszerű virtuális gépeket szeretne üzembe helyezni egy N szintű alkalmazás referenciaarchitektúrájához, kövesse az alábbi lépéseket:</span><span class="sxs-lookup"><span data-stu-id="33d5d-265">To deploy the Linux VMs for an N-tier application reference architecture, follow these steps:</span></span>

1. <span data-ttu-id="33d5d-266">Navigáljon a fenti előfeltételek 1. lépése során klónozott adattár `virtual-machines\n-tier-linux` mappájához.</span><span class="sxs-lookup"><span data-stu-id="33d5d-266">Navigate to the `virtual-machines\n-tier-linux` folder for the repository you cloned in step 1 of the pre-requisites above.</span></span>

2. <span data-ttu-id="33d5d-267">A paraméterfájl egy alapértelmezett rendszergazdai felhasználónevet és jelszót határozza a központi telepítésben lévő mindegyik virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="33d5d-267">The parameter file specifies a default administrator user name and password for each VM in the deployment.</span></span> <span data-ttu-id="33d5d-268">Módosítsa ezeket a referenciaarchitektúra üzembe helyezése előtt.</span><span class="sxs-lookup"><span data-stu-id="33d5d-268">Change these before you deploy the reference architecture.</span></span> <span data-ttu-id="33d5d-269">Nyissa meg az `n-tier-linux.json` fájlt, és cserélje le az egyes **adminUsername** és **adminPassword** mezők tartalmát az új beállításokra.</span><span class="sxs-lookup"><span data-stu-id="33d5d-269">Open the `n-tier-linux.json` file and replace each **adminUsername** and **adminPassword** field with your new settings.</span></span>   <span data-ttu-id="33d5d-270">Mentse a fájlt.</span><span class="sxs-lookup"><span data-stu-id="33d5d-270">Save the file.</span></span>

3. <span data-ttu-id="33d5d-271">Üzembe helyezés a referencia architektúra használatával a **azbb** eszközt az alább látható módon.</span><span class="sxs-lookup"><span data-stu-id="33d5d-271">Deploy the reference architecture using the **azbb** tool as shown below.</span></span>

   ```azurecli
   azbb -s <your subscription_id> -g <your resource_group_name> -l <azure region> -p n-tier-linux.json --deploy
   ```

<span data-ttu-id="33d5d-272">A mintául szolgáló referenciaarchitektúra Azure-építőelemekkel történő üzembe helyezéséről további információkat a [GitHub-adattárban][git] talál.</span><span class="sxs-lookup"><span data-stu-id="33d5d-272">For more information on deploying this sample reference architecture using Azure Building Blocks, visit the [GitHub repository][git].</span></span>

## <a name="next-steps"></a><span data-ttu-id="33d5d-273">További lépések</span><span class="sxs-lookup"><span data-stu-id="33d5d-273">Next steps</span></span>

- [<span data-ttu-id="33d5d-274">A Microsoft Learn modul: Bemutató: az N szintű architektúrastílus</span><span class="sxs-lookup"><span data-stu-id="33d5d-274">Microsoft Learn module: Tour the N-tier architecture style</span></span>](/learn/modules/n-tier-architecture/)

<!-- links -->

[dmz]: ../dmz/secure-vnet-dmz.md
[multi-vm]: ./multi-vm.md
[naming conventions]: /azure/guidance/guidance-naming-conventions
[azure-availability-sets]: /azure/virtual-machines/virtual-machines-linux-manage-availability
[azure-dns]: /azure/dns/dns-overview
[azure-key-vault]: https://azure.microsoft.com/services/key-vault

[bástyagazdagép]: https://en.wikipedia.org/wiki/Bastion_host
[bastion host]: https://en.wikipedia.org/wiki/Bastion_host
[cassandra-in-azure]: https://academy.datastax.com/resources/deployment-guide-azure
[cassandra-consistency]: https://docs.datastax.com/en/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html
[cassandra-replication]: https://academy.datastax.com/planet-cassandra/data-replication-in-nosql-databases-explained
[cassandra-consistency-usage]: https://medium.com/@foundev/cassandra-how-many-nodes-are-talked-to-with-quorum-also-should-i-use-it-98074e75d7d5#.b4pb4alb2

[cidr]: https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing
[datastax]: https://www.datastax.com/products/datastax-enterprise
[ddos]: /azure/virtual-network/ddos-protection-overview
[ddos-best-practices]: /azure/security/azure-ddos-best-practices
[git]: https://github.com/mspnp/template-building-blocks
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/virtual-machines/n-tier-linux
[load-balancer-external]: /azure/load-balancer/load-balancer-internet-overview
[load-balancer-internal]: /azure/load-balancer/load-balancer-internal-overview
[nsg]: /azure/virtual-network/virtual-networks-nsg
[nsg-rules]: /azure/azure-resource-manager/best-practices-resource-manager-security#network-security-groups
[plan-network]: /azure/virtual-network/virtual-network-vnet-plan-design-arm
[private-ip-space]: https://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces
[nyilvános IP-címet]: /azure/virtual-network/virtual-network-ip-addresses-overview-arm
[public IP address]: /azure/virtual-network/virtual-network-ip-addresses-overview-arm
[vm-sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines
[visio-download]: https://archcenter.blob.core.windows.net/cdn/vm-reference-architectures.vsdx

[resource-manager-overview]: /azure/azure-resource-manager/resource-group-overview
[vmss]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview
[load-balancer]: /azure/load-balancer/load-balancer-get-started-internet-arm-cli
[load-balancer-hashing]: /azure/load-balancer/load-balancer-overview#load-balancer-features
[vmss-design]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-design-overview
[subscription-limits]: /azure/azure-subscription-service-limits
[availability-set]: /azure/virtual-machines/virtual-machines-windows-manage-availability
[health-probes]: /azure/load-balancer/load-balancer-overview#load-balancer-features
[health-probe-log]: /azure/load-balancer/load-balancer-monitor-log
[health-probe-ip]: /azure/virtual-network/virtual-networks-nsg#special-rules
[network-security]: /azure/best-practices-network-security
