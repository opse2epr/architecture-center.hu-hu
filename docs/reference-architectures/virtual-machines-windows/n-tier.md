---
title: "Futó Windows virtuális gépeinek N szintű architektúrája"
description: "How Azure, a rendelkezésre állási, biztonsági, méretezhetőség és kezelhetőség biztonsági kifizető különös figyelmet egy többrétegű architektúra végrehajtásához."
author: MikeWasson
ms.date: 11/22/2016
pnp.series.title: Windows VM workloads
pnp.series.next: multi-region-application
pnp.series.prev: multi-vm
ms.openlocfilehash: 0654239a5bbd966a2aa776415b7f15ae723ffd63
ms.sourcegitcommit: c9e6d8edb069b8c513de748ce8114c879bad5f49
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 01/08/2018
---
# <a name="run-windows-vms-for-an-n-tier-application"></a><span data-ttu-id="cc49a-103">Futtassa a Windows virtuális gépek N szintű alkalmazás</span><span class="sxs-lookup"><span data-stu-id="cc49a-103">Run Windows VMs for an N-tier application</span></span>

<span data-ttu-id="cc49a-104">A referencia-architektúrában futó Windows virtuális gépeket (VM) N szintű alkalmazások bevált gyakorlatok csoportja jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="cc49a-104">This reference architecture shows a set of proven practices for running Windows virtual machines (VMs) for an N-tier application.</span></span> [<span data-ttu-id="cc49a-105">**A megoldás üzembe helyezése**.</span><span class="sxs-lookup"><span data-stu-id="cc49a-105">**Deploy this solution**.</span></span>](#deploy-the-solution) 

<span data-ttu-id="cc49a-106">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="cc49a-106">![[0]][0]</span></span>

<span data-ttu-id="cc49a-107">*Töltse le az architektúra [Visio-fájlját][visio-download].*</span><span class="sxs-lookup"><span data-stu-id="cc49a-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="cc49a-108">Architektúra</span><span class="sxs-lookup"><span data-stu-id="cc49a-108">Architecture</span></span> 

<span data-ttu-id="cc49a-109">Számos módon valósítja meg az N szintű architektúrát.</span><span class="sxs-lookup"><span data-stu-id="cc49a-109">There are many ways to implement an N-tier architecture.</span></span> <span data-ttu-id="cc49a-110">Az ábrán egy tipikus 3 szintű webalkalmazást.</span><span class="sxs-lookup"><span data-stu-id="cc49a-110">The diagram shows a typical 3-tier web application.</span></span> <span data-ttu-id="cc49a-111">Ez az architektúra épül [futtassa a virtuális gépek elosztott terhelésű a méretezhetőség és a rendelkezésre állási][multi-vm].</span><span class="sxs-lookup"><span data-stu-id="cc49a-111">This architecture builds on [Run load-balanced VMs for scalability and availability][multi-vm].</span></span> <span data-ttu-id="cc49a-112">A web és business szintek használata virtuális gépek elosztott terhelésű.</span><span class="sxs-lookup"><span data-stu-id="cc49a-112">The web and business tiers use load-balanced VMs.</span></span>

* <span data-ttu-id="cc49a-113">**Rendelkezésre állási készletek.**</span><span class="sxs-lookup"><span data-stu-id="cc49a-113">**Availability sets.**</span></span> <span data-ttu-id="cc49a-114">Hozzon létre egy [rendelkezésre állási csoport] [ azure-availability-sets] minden egyes réteg, és minden egyes rétegben legalább két virtuális gépek telepítéséhez.</span><span class="sxs-lookup"><span data-stu-id="cc49a-114">Create an [availability set][azure-availability-sets] for each tier, and provision at least two VMs in each tier.</span></span> <span data-ttu-id="cc49a-115">Ez lehetővé teszi a virtuális gépeket abban az esetben jogosult a magasabb [szolgáltatásiszint-szerződés (SLA) szolgáltatás] [ vm-sla] virtuális gépekhez.</span><span class="sxs-lookup"><span data-stu-id="cc49a-115">This makes the VMs eligible for a higher [service level agreement (SLA)][vm-sla] for VMs.</span></span> <span data-ttu-id="cc49a-116">Telepíthet egy virtuális rendelkezésre állási csoportba, de a virtuális rendszer nem felel meg egy (SLA) garantált csak egyetlen virtuális gép prémium szintű Azure Storage használ az operációs rendszer és az összes lemez.</span><span class="sxs-lookup"><span data-stu-id="cc49a-116">You can deploy a single VM in an availability set, but the single VM will not qualify for an SLA guarantee unless the single VM is using Azure Premium Storage for all OS and data disks.</span></span>  
* <span data-ttu-id="cc49a-117">**Alhálózatok.**</span><span class="sxs-lookup"><span data-stu-id="cc49a-117">**Subnets.**</span></span> <span data-ttu-id="cc49a-118">Hozzon létre egy külön alhálózatot az egyes rétegekhez.</span><span class="sxs-lookup"><span data-stu-id="cc49a-118">Create a separate subnet for each tier.</span></span> <span data-ttu-id="cc49a-119">Adja meg a címtartományt és alhálózati maszk használatával [CIDR] jelöléssel.</span><span class="sxs-lookup"><span data-stu-id="cc49a-119">Specify the address range and subnet mask using [CIDR] notation.</span></span> 
* <span data-ttu-id="cc49a-120">**Terheléselosztók**.</span><span class="sxs-lookup"><span data-stu-id="cc49a-120">**Load balancers.**</span></span> <span data-ttu-id="cc49a-121">Használjon egy [internetre irányuló terheléselosztót] [ load-balancer-external] terjeszteni a webes réteg bejövő internetes forgalmat és egy [belső terheléselosztó] [ load-balancer-internal]hálózati forgalmat a a webes réteg az üzleti szint és terjeszteni.</span><span class="sxs-lookup"><span data-stu-id="cc49a-121">Use an [Internet-facing load balancer][load-balancer-external] to distribute incoming Internet traffic to the web tier, and an [internal load balancer][load-balancer-internal] to distribute network traffic from the web tier to the business tier.</span></span>
* <span data-ttu-id="cc49a-122">**Jumpbox.**</span><span class="sxs-lookup"><span data-stu-id="cc49a-122">**Jumpbox.**</span></span> <span data-ttu-id="cc49a-123">Más néven a [megerősített állomás].</span><span class="sxs-lookup"><span data-stu-id="cc49a-123">Also called a [bastion host].</span></span> <span data-ttu-id="cc49a-124">Biztonságos virtuális gép, amely a rendszergazdák csatlakozhat a virtuális gépeket a hálózaton.</span><span class="sxs-lookup"><span data-stu-id="cc49a-124">A secure VM on the network that administrators use to connect to the other VMs.</span></span> <span data-ttu-id="cc49a-125">A jumpbox olyan NSG-vel rendelkezik, amely csak a biztonságos elemek listáján szereplő nyilvános IP-címekről érkező távoli forgalmat engedélyezi.</span><span class="sxs-lookup"><span data-stu-id="cc49a-125">The jumpbox has an NSG that allows remote traffic only from public IP addresses on a safe list.</span></span> <span data-ttu-id="cc49a-126">Az NSG-nek engedélyeznie kell a távoli asztali (RDP) forgalmat.</span><span class="sxs-lookup"><span data-stu-id="cc49a-126">The NSG should permit remote desktop (RDP) traffic.</span></span>
* <span data-ttu-id="cc49a-127">**Figyelés.**</span><span class="sxs-lookup"><span data-stu-id="cc49a-127">**Monitoring.**</span></span> <span data-ttu-id="cc49a-128">Például a figyelés szoftver [Nagios], [Zabbix], vagy [Icinga] biztosíthat, válaszidő, illetve a virtuális gép hasznos üzemidő és a rendszer általános állapotát.</span><span class="sxs-lookup"><span data-stu-id="cc49a-128">Monitoring software such as [Nagios], [Zabbix], or [Icinga] can give you insight into response time, VM uptime, and the overall health of your system.</span></span> <span data-ttu-id="cc49a-129">Telepíti a figyelési, amely egy különálló felügyeleti alhálózat el van helyezve.</span><span class="sxs-lookup"><span data-stu-id="cc49a-129">Install the monitoring software on a VM that's placed in a separate management subnet.</span></span>
* <span data-ttu-id="cc49a-130">**Az NSG-k.**</span><span class="sxs-lookup"><span data-stu-id="cc49a-130">**NSGs.**</span></span> <span data-ttu-id="cc49a-131">Használjon [hálózati biztonsági csoportok] [ nsg] (NSG-ket) korlátozzák a hálózati forgalmat a Vneten belül.</span><span class="sxs-lookup"><span data-stu-id="cc49a-131">Use [network security groups][nsg] (NSGs) to restrict network traffic within the VNet.</span></span> <span data-ttu-id="cc49a-132">Például a 3-rétegű architektúra itt látható, az adatbázis-rétegből nem fogadja el a előtér, csak az üzleti szint és a felügyeleti alhálózati a forgalmat.</span><span class="sxs-lookup"><span data-stu-id="cc49a-132">For example, in the 3-tier architecture shown here, the database tier does not accept traffic from the web front end, only from the business tier and the management subnet.</span></span>
* <span data-ttu-id="cc49a-133">**SQL Server Always On rendelkezésre állási csoporthoz.**</span><span class="sxs-lookup"><span data-stu-id="cc49a-133">**SQL Server Always On Availability Group.**</span></span> <span data-ttu-id="cc49a-134">Itt az adatréteg: magas rendelkezésre állású replikációs és feladatátvételi engedélyezésével.</span><span class="sxs-lookup"><span data-stu-id="cc49a-134">Provides high availability at the data tier, by enabling replication and failover.</span></span>
* <span data-ttu-id="cc49a-135">**Active Directory tartományi szolgáltatások (AD DS) kiszolgálók**.</span><span class="sxs-lookup"><span data-stu-id="cc49a-135">**Active Directory Domain Services (AD DS) Servers**.</span></span> <span data-ttu-id="cc49a-136">Előtt a Windows Server 2016 SQL Server Always On rendelkezésre állási csoportok egy tartományhoz kell csatlakoztatni.</span><span class="sxs-lookup"><span data-stu-id="cc49a-136">Prior to Windows Server 2016, SQL Server Always On Availability Groups must be joined to a domain.</span></span> <span data-ttu-id="cc49a-137">Ennek az az oka a rendelkezésre állási csoportok Windows Server feladatátvételi fürt (WSFC) technológia függ.</span><span class="sxs-lookup"><span data-stu-id="cc49a-137">This is because Availability Groups depend on Windows Server Failover Cluster (WSFC) technology.</span></span> <span data-ttu-id="cc49a-138">Windows Server 2016 vezet be Active Directory nélküli feladatátvevő fürt létrehozásának ebben az esetben az Active Directory tartományi szolgáltatások-kiszolgálók esetén nincs szükség ebbe az architektúrába.</span><span class="sxs-lookup"><span data-stu-id="cc49a-138">Windows Server 2016 introduces the ability to create a Failover Cluster without Active Directory, in which case the AD DS servers are not required for this architecture.</span></span> <span data-ttu-id="cc49a-139">További információkért lásd: [a Windows Server 2016 feladatátvételi fürtszolgáltatásával kapcsolatos újdonságok][wsfc-whats-new].</span><span class="sxs-lookup"><span data-stu-id="cc49a-139">For more information, see [What's new in Failover Clustering in Windows Server 2016][wsfc-whats-new].</span></span>
* <span data-ttu-id="cc49a-140">**Az Azure DNS**.</span><span class="sxs-lookup"><span data-stu-id="cc49a-140">**Azure DNS**.</span></span> <span data-ttu-id="cc49a-141">[Az Azure DNS] [ azure-dns] üzemeltetési szolgáltatás DNS-tartományok biztosítani a névfeloldást a Microsoft Azure-infrastruktúra használatával.</span><span class="sxs-lookup"><span data-stu-id="cc49a-141">[Azure DNS][azure-dns] is a hosting service for DNS domains, providing name resolution using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="cc49a-142">Ha tartományait az Azure-ban üzemelteti, DNS-rekordjait a többi Azure-szolgáltatáshoz is használt hitelesítő adatokkal, API-kkal, eszközökkel és számlázási információkkal kezelheti.</span><span class="sxs-lookup"><span data-stu-id="cc49a-142">By hosting your domains in Azure, you can manage your DNS records using the same credentials, APIs, tools, and billing as your other Azure services.</span></span>

## <a name="recommendations"></a><span data-ttu-id="cc49a-143">Javaslatok</span><span class="sxs-lookup"><span data-stu-id="cc49a-143">Recommendations</span></span>

<span data-ttu-id="cc49a-144">Az Ön követelményei eltérhetnek az itt leírt architektúrától.</span><span class="sxs-lookup"><span data-stu-id="cc49a-144">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="cc49a-145">Ezeket a javaslatokat tekintse kiindulópontnak.</span><span class="sxs-lookup"><span data-stu-id="cc49a-145">Use these recommendations as a starting point.</span></span> 

### <a name="vnet--subnets"></a><span data-ttu-id="cc49a-146">Virtuális hálózatot / alhálózatot</span><span class="sxs-lookup"><span data-stu-id="cc49a-146">VNet / Subnets</span></span>

<span data-ttu-id="cc49a-147">A virtuális hálózat létrehozásakor határozza meg a minden alhálózatban kell hány IP-címeket.</span><span class="sxs-lookup"><span data-stu-id="cc49a-147">When you create the VNet, determine how many IP addresses your resources in each subnet require.</span></span> <span data-ttu-id="cc49a-148">Adjon meg alhálózati maszkot és egy virtuális hálózat címtartománya elég nagy a szükséges IP-címek, amely az [CIDR] jelöléssel.</span><span class="sxs-lookup"><span data-stu-id="cc49a-148">Specify a subnet mask and a VNet address range large enough for the required IP addresses, using [CIDR] notation.</span></span> <span data-ttu-id="cc49a-149">Amely a szabványos címterület használata [privát IP-címblokkok][private-ip-space], amelyeket 10.0.0.0/8, 172.16.0.0/12 vagy 192.168.0.0/16.</span><span class="sxs-lookup"><span data-stu-id="cc49a-149">Use an address space that falls within the standard [private IP address blocks][private-ip-space], which are 10.0.0.0/8, 172.16.0.0/12, and 192.168.0.0/16.</span></span>

<span data-ttu-id="cc49a-150">Válassza ki, amely nem fedi át a helyszíni hálózat címtartományt, abban az esetben, akkor be kell állítania egy átjárót a virtuális hálózat és a helyszíni hálózat között később.</span><span class="sxs-lookup"><span data-stu-id="cc49a-150">Choose an address range that does not overlap with your on-premises network, in case you need to set up a gateway between the VNet and your on-premise network later.</span></span> <span data-ttu-id="cc49a-151">Miután létrehozta a virtuális hálózat, a címtartomány nem módosítható.</span><span class="sxs-lookup"><span data-stu-id="cc49a-151">Once you create the VNet, you can't change the address range.</span></span>

<span data-ttu-id="cc49a-152">Tervezze meg működésének és biztonsági követelmények figyelembe vételével rendelkező alhálózatokhoz.</span><span class="sxs-lookup"><span data-stu-id="cc49a-152">Design subnets with functionality and security requirements in mind.</span></span> <span data-ttu-id="cc49a-153">Minden virtuális gép ugyanabban a réteg vagy szerepkör kell kísérhet ugyanazon az alhálózaton, amelyek lehetnek biztonsági korlátot.</span><span class="sxs-lookup"><span data-stu-id="cc49a-153">All VMs within the same tier or role should go into the same subnet, which can be a security boundary.</span></span> <span data-ttu-id="cc49a-154">Virtuális hálózatokat és alhálózatokat megtervezésével kapcsolatos további információkért lásd: [tervezési és kialakítási Azure virtuális hálózatok][plan-network].</span><span class="sxs-lookup"><span data-stu-id="cc49a-154">For more information about designing VNets and subnets, see [Plan and design Azure Virtual Networks][plan-network].</span></span>

<span data-ttu-id="cc49a-155">Az egyes alhálózatokon adja meg a címtér az alhálózat CIDR-formátumban.</span><span class="sxs-lookup"><span data-stu-id="cc49a-155">For each subnet, specify the address space for the subnet in CIDR notation.</span></span> <span data-ttu-id="cc49a-156">Például a "10.0.0.0/24" 256 IP-címek egy tartománya hoz létre.</span><span class="sxs-lookup"><span data-stu-id="cc49a-156">For example, '10.0.0.0/24' creates a range of 256 IP addresses.</span></span> <span data-ttu-id="cc49a-157">Virtuális gépek használhatják 251 ezek; öt vannak fenntartva.</span><span class="sxs-lookup"><span data-stu-id="cc49a-157">VMs can use 251 of these; five are reserved.</span></span> <span data-ttu-id="cc49a-158">Győződjön meg arról, hogy a cím címtartományok nem fednek át alhálózatokon keresztül.</span><span class="sxs-lookup"><span data-stu-id="cc49a-158">Make sure the address ranges don't overlap across subnets.</span></span> <span data-ttu-id="cc49a-159">Tekintse meg a [virtuális hálózat – gyakori kérdések][vnet faq].</span><span class="sxs-lookup"><span data-stu-id="cc49a-159">See the [Virtual Network FAQ][vnet faq].</span></span>

### <a name="network-security-groups"></a><span data-ttu-id="cc49a-160">Network security groups (Hálózati biztonsági csoportok)</span><span class="sxs-lookup"><span data-stu-id="cc49a-160">Network security groups</span></span>

<span data-ttu-id="cc49a-161">NSG-szabályok segítségével korlátozzák a rétegek közötti forgalmat.</span><span class="sxs-lookup"><span data-stu-id="cc49a-161">Use NSG rules to restrict traffic between tiers.</span></span> <span data-ttu-id="cc49a-162">Például a fenti 3-rétegű architektúra esetén a webes réteg nem közvetlenül kommunikálnak az adatbázis-rétegből.</span><span class="sxs-lookup"><span data-stu-id="cc49a-162">For example, in the 3-tier architecture shown above, the web tier does not communicate directly with the database tier.</span></span> <span data-ttu-id="cc49a-163">Az adatbázis-rétegből érvényesítik, a webes réteg alhálózati érkező bejövő forgalmat kell blokkolja.</span><span class="sxs-lookup"><span data-stu-id="cc49a-163">To enforce this, the database tier should block incoming traffic from the web tier subnet.</span></span>  

1. <span data-ttu-id="cc49a-164">Hozzon létre egy NSG-t, és társítsa azt az adatbázis réteg alhálózathoz.</span><span class="sxs-lookup"><span data-stu-id="cc49a-164">Create an NSG and associate it to the database tier subnet.</span></span>
2. <span data-ttu-id="cc49a-165">Adjon hozzá egy szabályt, amely minden bejövő forgalom a vnet megtagadja.</span><span class="sxs-lookup"><span data-stu-id="cc49a-165">Add a rule that denies all inbound traffic from the VNet.</span></span> <span data-ttu-id="cc49a-166">(Használja a `VIRTUAL_NETWORK` címke a szabályban.)</span><span class="sxs-lookup"><span data-stu-id="cc49a-166">(Use the `VIRTUAL_NETWORK` tag in the rule.)</span></span> 
3. <span data-ttu-id="cc49a-167">A magasabb prioritású, amely lehetővé teszi a bejövő forgalom az üzleti szint alhálózatból rendelkező szabály hozzáadását.</span><span class="sxs-lookup"><span data-stu-id="cc49a-167">Add a rule with a higher priority that allows inbound traffic from the business tier subnet.</span></span> <span data-ttu-id="cc49a-168">Ez a szabály felülírja az előző szabályt, és lehetővé teszi, hogy felvegye a az adatbázis-rétegből az üzleti szint.</span><span class="sxs-lookup"><span data-stu-id="cc49a-168">This rule overrides the previous rule, and allows the business tier to talk to the database tier.</span></span>
4. <span data-ttu-id="cc49a-169">Adjon hozzá egy szabályt, amely lehetővé teszi, hogy a bejövő forgalom maga az adatbázis réteg alhálózat belül.</span><span class="sxs-lookup"><span data-stu-id="cc49a-169">Add a rule that allows inbound traffic from within the database tier subnet itself.</span></span> <span data-ttu-id="cc49a-170">Ez a szabály lehetővé teszi, hogy az adatbázis-rétegből, szükség van az adatbázis-replikációt és feladatátvételt a virtuális gépek közötti kommunikáció.</span><span class="sxs-lookup"><span data-stu-id="cc49a-170">This rule allows communication between VMs in the database tier, which is needed for database replication and failover.</span></span>
5. <span data-ttu-id="cc49a-171">Adjon hozzá egy szabályt, amely a jumpbox alhálózatból RDP-forgalmát engedélyezi.</span><span class="sxs-lookup"><span data-stu-id="cc49a-171">Add a rule that allows RDP traffic from the jumpbox subnet.</span></span> <span data-ttu-id="cc49a-172">Ez a szabály lehetővé teszi, hogy a rendszergazdák a jumpbox az adatbázis-rétegből csatlakoztassa.</span><span class="sxs-lookup"><span data-stu-id="cc49a-172">This rule lets administrators connect to the database tier from the jumpbox.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="cc49a-173">Az NSG tartozik alapértelmezett szabályokat, amelyek lehetővé teszik a Vneten belül minden bejövő forgalom.</span><span class="sxs-lookup"><span data-stu-id="cc49a-173">An NSG has default rules that allow any inbound traffic from within the VNet.</span></span> <span data-ttu-id="cc49a-174">Ezek a szabályok nem lehet törölni, de magasabb prioritású szabályok létrehozásával felülbírálhatja.</span><span class="sxs-lookup"><span data-stu-id="cc49a-174">These rules can't be deleted, but you can override them by creating higher priority rules.</span></span>
   > 
   > 

### <a name="load-balancers"></a><span data-ttu-id="cc49a-175">Terheléselosztók</span><span class="sxs-lookup"><span data-stu-id="cc49a-175">Load balancers</span></span>

<span data-ttu-id="cc49a-176">A külső terheléselosztó osztja el a webes réteg internetes forgalmat.</span><span class="sxs-lookup"><span data-stu-id="cc49a-176">The external load balancer distributes Internet traffic to the web tier.</span></span> <span data-ttu-id="cc49a-177">Hozzon létre egy nyilvános IP-címet ehhez a terheléselosztóhoz.</span><span class="sxs-lookup"><span data-stu-id="cc49a-177">Create a public IP address for this load balancer.</span></span> <span data-ttu-id="cc49a-178">Lásd: [egy internetre irányuló Terheléselosztói][lb-external-create].</span><span class="sxs-lookup"><span data-stu-id="cc49a-178">See [Creating an Internet-facing load balancer][lb-external-create].</span></span>

<span data-ttu-id="cc49a-179">A belső terheléselosztó osztja el a hálózati forgalmat a a webes réteg és az üzleti szint.</span><span class="sxs-lookup"><span data-stu-id="cc49a-179">The internal load balancer distributes network traffic from the web tier to the business tier.</span></span> <span data-ttu-id="cc49a-180">Adjon meg egy magánhálózati IP-címet ehhez a terheléselosztóhoz, hozzon létre egy előtérbeli IP-konfigurációja, és rendelje hozzá azt az üzleti szint alhálózatát.</span><span class="sxs-lookup"><span data-stu-id="cc49a-180">To give this load balancer a private IP address, create a frontend IP configuration and associate it with the subnet for the business tier.</span></span> <span data-ttu-id="cc49a-181">Lásd: [létrehozásához a belső terheléselosztók][lb-internal-create].</span><span class="sxs-lookup"><span data-stu-id="cc49a-181">See [Get started creating an Internal load balancer][lb-internal-create].</span></span>

### <a name="sql-server-always-on-availability-groups"></a><span data-ttu-id="cc49a-182">SQL Server Always On rendelkezésre állási csoportok</span><span class="sxs-lookup"><span data-stu-id="cc49a-182">SQL Server Always On Availability Groups</span></span>

<span data-ttu-id="cc49a-183">Ajánlott [Always On rendelkezésre állási csoportok] [ sql-alwayson] SQL Server magas rendelkezésre állásra.</span><span class="sxs-lookup"><span data-stu-id="cc49a-183">We recommend [Always On Availability Groups][sql-alwayson] for SQL Server high availability.</span></span> <span data-ttu-id="cc49a-184">Windows Server 2016-ot, mielőtt az Always On rendelkezésre állási csoportok igényli tartományvezérlő, és a rendelkezésre állási csoport összes csomópontjának AD ugyanabban a tartományban kell lennie.</span><span class="sxs-lookup"><span data-stu-id="cc49a-184">Prior to Windows Server 2016, Always On Availability Groups require a domain controller, and all nodes in the availability group must be in the same AD domain.</span></span>

<span data-ttu-id="cc49a-185">Más szintekre kapcsolódni az adatbázishoz, keresztül egy [rendelkezésre állási csoport figyelőjének][sql-alwayson-listeners].</span><span class="sxs-lookup"><span data-stu-id="cc49a-185">Other tiers connect to the database through an [availability group listener][sql-alwayson-listeners].</span></span> <span data-ttu-id="cc49a-186">A figyelő lehetővé teszi, hogy a fizikai SQL Server-példány nevét ismerete nélkül kapcsolódni az SQL-ügyfeleken.</span><span class="sxs-lookup"><span data-stu-id="cc49a-186">The listener enables a SQL client to connect without knowing the name of the physical instance of SQL Server.</span></span> <span data-ttu-id="cc49a-187">A virtuális gépeket, hogy az adatbázis hozzáférés csatlakoznia kell a tartományhoz.</span><span class="sxs-lookup"><span data-stu-id="cc49a-187">VMs that access the database must be joined to the domain.</span></span> <span data-ttu-id="cc49a-188">Az ügyfél (ebben az esetben egy másik réteg) DNS-Kiszolgálókat használ, a figyelő virtuálishálózat-név feloldani az IP-címeket.</span><span class="sxs-lookup"><span data-stu-id="cc49a-188">The client (in this case, another tier) uses DNS to resolve the listener's virtual network name into IP addresses.</span></span>

<span data-ttu-id="cc49a-189">A SQL Server mindig a rendelkezésre állási csoport konfigurálásához az alábbiak szerint:</span><span class="sxs-lookup"><span data-stu-id="cc49a-189">Configure the SQL Server Always On Availability Group as follows:</span></span>

1. <span data-ttu-id="cc49a-190">Hozzon létre egy Windows Server feladatátvételi fürtszolgáltatási (WSFC) fürt, egy SQL Server mindig a rendelkezésre állási csoport és egy elsődleges másodpéldány.</span><span class="sxs-lookup"><span data-stu-id="cc49a-190">Create a Windows Server Failover Clustering (WSFC) cluster, a SQL Server Always On Availability Group, and a primary replica.</span></span> <span data-ttu-id="cc49a-191">További információkért lásd: [Ismerkedés az Always On rendelkezésre állási csoportok][sql-alwayson-getting-started].</span><span class="sxs-lookup"><span data-stu-id="cc49a-191">For more information, see [Getting Started with Always On Availability Groups][sql-alwayson-getting-started].</span></span> 
2. <span data-ttu-id="cc49a-192">Hozzon létre egy belső elosztott terhelésű hozzá statikus magánhálózati IP-cím.</span><span class="sxs-lookup"><span data-stu-id="cc49a-192">Create an internal load balancer with a static private IP address.</span></span>
3. <span data-ttu-id="cc49a-193">Hozzon létre egy rendelkezésre állási csoport figyelőjének, és képezze le a figyelő DNS-nevet a belső terheléselosztók IP-címét.</span><span class="sxs-lookup"><span data-stu-id="cc49a-193">Create an availability group listener, and map the listener's DNS name to the IP address of an internal load balancer.</span></span> 
4. <span data-ttu-id="cc49a-194">Hozzon létre olyan terheléselosztó szabályhoz a figyelő az SQL Server-porthoz (TCP 1433-as port alapértelmezés szerint).</span><span class="sxs-lookup"><span data-stu-id="cc49a-194">Create a load balancer rule for the SQL Server listening port (TCP port 1433 by default).</span></span> <span data-ttu-id="cc49a-195">Engedélyeznie kell a terheléselosztó szabályhoz *fix IP*, más néven a közvetlen kiszolgálói válasz.</span><span class="sxs-lookup"><span data-stu-id="cc49a-195">The load balancer rule must enable *floating IP*, also called Direct Server Return.</span></span> <span data-ttu-id="cc49a-196">Ez azt eredményezi, hogy a virtuális gép közvetlenül válaszolni az ügyfelet, ami lehetővé teszi, hogy a közvetlen kapcsolat az elsődleges másodpéldányhoz.</span><span class="sxs-lookup"><span data-stu-id="cc49a-196">This causes the VM to reply directly to the client, which enables a direct connection to the primary replica.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="cc49a-197">Ha fix IP engedélyezve van, a előtér-portszám lehet ugyanaz, mint a háttér-port számát, a terheléselosztó szabályhoz.</span><span class="sxs-lookup"><span data-stu-id="cc49a-197">When floating IP is enabled, the front-end port number must be the same as the back-end port number in the load balancer rule.</span></span>
  > 
  > 

<span data-ttu-id="cc49a-198">Ha egy SQL-ügyfél próbál csatlakozni, a terheléselosztó a kapcsolódási kérelmet továbbítja a az elsődleges másodpéldány.</span><span class="sxs-lookup"><span data-stu-id="cc49a-198">When a SQL client tries to connect, the load balancer routes the connection request to the primary replica.</span></span> <span data-ttu-id="cc49a-199">Ha a feladatátvételt a replika egy másik, a terheléselosztó automatikusan továbbítja az későbbi kérelmeket egy új elsődleges replika.</span><span class="sxs-lookup"><span data-stu-id="cc49a-199">If there is a failover to another replica, the load balancer automatically routes subsequent requests to a new primary replica.</span></span> <span data-ttu-id="cc49a-200">További információkért lásd: [egy ILB figyelőt az SQL Server Always On rendelkezésre állási csoportok konfigurálása][sql-alwayson-ilb].</span><span class="sxs-lookup"><span data-stu-id="cc49a-200">For more information, see [Configure an ILB listener for SQL Server Always On Availability Groups][sql-alwayson-ilb].</span></span>

<span data-ttu-id="cc49a-201">A feladatátvétel során a már meglévő ügyfélkapcsolatok be legyen zárva.</span><span class="sxs-lookup"><span data-stu-id="cc49a-201">During a failover, existing client connections are closed.</span></span> <span data-ttu-id="cc49a-202">A feladatátvétel után a rendszer az új kapcsolatok az új elsődleges replika irányítsa.</span><span class="sxs-lookup"><span data-stu-id="cc49a-202">After the failover completes, new connections will be routed to the new primary replica.</span></span>

<span data-ttu-id="cc49a-203">Ha az alkalmazás lehetővé teszi az írási műveletek mint jóval több olvasási, kiszervezése a csak olvasható másodlagos replika lekérdezések némelyike.</span><span class="sxs-lookup"><span data-stu-id="cc49a-203">If your application makes significantly more reads than writes, you can offload some of the read-only queries to a secondary replica.</span></span> <span data-ttu-id="cc49a-204">Lásd: [használja egy figyelő való csatlakozáshoz a csak olvasható másodlagos replika (csak olvasható Útválasztás)][sql-alwayson-read-only-routing].</span><span class="sxs-lookup"><span data-stu-id="cc49a-204">See [Using a Listener to Connect to a Read-Only Secondary Replica (Read-Only Routing)][sql-alwayson-read-only-routing].</span></span>

<span data-ttu-id="cc49a-205">Az üzemelő példány által [kényszerített kézi feladatátvétel] [ sql-alwayson-force-failover] a rendelkezésre állási csoport.</span><span class="sxs-lookup"><span data-stu-id="cc49a-205">Test your deployment by [forcing a manual failover][sql-alwayson-force-failover] of the availability group.</span></span>

### <a name="jumpbox"></a><span data-ttu-id="cc49a-206">Jumpbox</span><span class="sxs-lookup"><span data-stu-id="cc49a-206">Jumpbox</span></span>

<span data-ttu-id="cc49a-207">A jumpbox fogja teljesítményének minimális követelmények vonatkoznak, így jelölje ki például a Standard A1 jumpbox kis Virtuálisgép-méretet.</span><span class="sxs-lookup"><span data-stu-id="cc49a-207">The jumpbox will have minimal performance requirements, so select a small VM size for the jumpbox such as Standard A1.</span></span> 

<span data-ttu-id="cc49a-208">Hozzon létre egy [nyilvános IP-cím] a jumpbox számára.</span><span class="sxs-lookup"><span data-stu-id="cc49a-208">Create a [public IP address] for the jumpbox.</span></span> <span data-ttu-id="cc49a-209">Helyezze a jumpbox, mint a többi virtuális gépe ugyanazon virtuális, de egy különálló felügyeleti alhálózat.</span><span class="sxs-lookup"><span data-stu-id="cc49a-209">Place the jumpbox in the same VNet as the other VMs, but in a separate management subnet.</span></span>

<span data-ttu-id="cc49a-210">Engedélyezi az RDP a nyilvános interneten keresztül az alkalmazás munkaterhelés futtató virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="cc49a-210">Do not allow RDP access from the public Internet to the VMs that run the application workload.</span></span> <span data-ttu-id="cc49a-211">Ehelyett ezeket a virtuális gépek RDP-hozzáférést a jumpbox keresztül kell következnie.</span><span class="sxs-lookup"><span data-stu-id="cc49a-211">Instead, all RDP access to these VMs must come through the jumpbox.</span></span> <span data-ttu-id="cc49a-212">A rendszergazda bejelentkezik az a jumpbox, és majd bejelentkezik az a jumpbox a többi virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="cc49a-212">An administrator logs into the jumpbox, and then logs into the other VM from the jumpbox.</span></span> <span data-ttu-id="cc49a-213">A jumpbox RDP-forgalmát engedélyezi az internetről, de csak az ismert, biztonságos IP-címeket.</span><span class="sxs-lookup"><span data-stu-id="cc49a-213">The jumpbox allows RDP traffic from the Internet, but only from known, safe IP addresses.</span></span>

<span data-ttu-id="cc49a-214">A jumpbox biztonságos hozzon létre egy NSG-t, és alkalmazza azt a jumpbox alhálózathoz.</span><span class="sxs-lookup"><span data-stu-id="cc49a-214">To secure the jumpbox, create an NSG and apply it to the jumpbox subnet.</span></span> <span data-ttu-id="cc49a-215">Vegyen fel egy NSG-t, amely lehetővé teszi az RDP-kapcsolatok csak egy készletből biztonságos nyilvános IP-címek.</span><span class="sxs-lookup"><span data-stu-id="cc49a-215">Add an NSG rule that allows RDP connections only from a safe set of public IP addresses.</span></span> <span data-ttu-id="cc49a-216">Az NSG csatolhatók az alhálózatot, vagy a jumpbox hálózati adaptert.</span><span class="sxs-lookup"><span data-stu-id="cc49a-216">The NSG can be attached either to the subnet or to the jumpbox NIC.</span></span> <span data-ttu-id="cc49a-217">Ebben az esetben ajánlott való csatlakoztatás a hálózati adapter, így az RDP-forgalmát engedélyezve van a csak a jumpbox, még akkor is, ha más virtuális gépek hozzá ugyanazon az alhálózaton.</span><span class="sxs-lookup"><span data-stu-id="cc49a-217">In this case, we recommend attaching it to the NIC, so RDP traffic is permitted only to the jumpbox, even if you add other VMs to the same subnet.</span></span>

<span data-ttu-id="cc49a-218">Konfigurálja az NSG-k más alhálózatok felügyeleti alhálózatról RDP-forgalmát engedélyezi.</span><span class="sxs-lookup"><span data-stu-id="cc49a-218">Configure the NSGs for the other subnets to allow RDP traffic from the management subnet.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="cc49a-219">Rendelkezésre állási szempontok</span><span class="sxs-lookup"><span data-stu-id="cc49a-219">Availability considerations</span></span>

<span data-ttu-id="cc49a-220">Az adatbázis-rétegből, hogy több virtuális gép automatikusan jelenti azt, hogy a magas rendelkezésre állású adatbázis.</span><span class="sxs-lookup"><span data-stu-id="cc49a-220">At the database tier, having multiple VMs does not automatically translate into a highly available database.</span></span> <span data-ttu-id="cc49a-221">Egy relációs adatbázisban, az általában akkor replikációs és feladatátvételi használata magas rendelkezésre állás biztosítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="cc49a-221">For a relational database, you will typically need to use replication and failover to achieve high availability.</span></span> <span data-ttu-id="cc49a-222">SQL Server esetében javasoljuk [Always On rendelkezésre állási csoportok][sql-alwayson].</span><span class="sxs-lookup"><span data-stu-id="cc49a-222">For SQL Server, we recommend using [Always On Availability Groups][sql-alwayson].</span></span> 

<span data-ttu-id="cc49a-223">Ha magas rendelkezésre állás érdekében, mint a [Azure SLA-t a virtuális gépek] [ vm-sla] biztosít, az alkalmazás két régiók közötti replikáció és a feladatátvételre használni az Azure Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="cc49a-223">If you need higher availability than the [Azure SLA for VMs][vm-sla] provides, replicate the application across two regions and use Azure Traffic Manager for failover.</span></span> <span data-ttu-id="cc49a-224">További információkért lásd: [futtassa a Windows virtuális gépek magas rendelkezésre állásra több régióba][multi-dc].</span><span class="sxs-lookup"><span data-stu-id="cc49a-224">For more information, see [Run Windows VMs in multiple regions for high availability][multi-dc].</span></span>   

## <a name="security-considerations"></a><span data-ttu-id="cc49a-225">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="cc49a-225">Security considerations</span></span>

<span data-ttu-id="cc49a-226">Inaktív bizalmas adatok titkosítására és használata [Azure Key Vault] [ azure-key-vault] az adatbázis titkosítási kulcsok kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="cc49a-226">Encrypt sensitive data at rest and use [Azure Key Vault][azure-key-vault] to manage the database encryption keys.</span></span> <span data-ttu-id="cc49a-227">Key Vault képes tárolni a titkosítási kulcsokat a hardveres biztonsági modulokkal (HSM).</span><span class="sxs-lookup"><span data-stu-id="cc49a-227">Key Vault can store encryption keys in hardware security modules (HSMs).</span></span> <span data-ttu-id="cc49a-228">További információkért lásd: [konfigurálása Azure Key Vault-integráció az SQL Server Azure virtuális gépeken] [ sql-keyvault] is javasoljuk Key Vault alkalmazás titkos adatait, például adatbázis-kapcsolati karakterláncok tárolni.</span><span class="sxs-lookup"><span data-stu-id="cc49a-228">For more information, see [Configure Azure Key Vault Integration for SQL Server on Azure VMs][sql-keyvault] It's also recommended to store application secrets, such as database connection strings, in Key Vault.</span></span>

<span data-ttu-id="cc49a-229">Fontolja meg a hálózati virtuális készülék (NVA) az internetről és az Azure virtuális hálózat között DMZ létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="cc49a-229">Consider adding a network virtual appliance (NVA) to create a DMZ between the Internet and the Azure virtual network.</span></span> <span data-ttu-id="cc49a-230">NVA a virtuális készülék által végrehajtható műveleteket a hálózattal kapcsolatos feladatokat, mint például a tűzfal, csomag vizsgálati, naplózási és egyéni útválasztás neve.</span><span class="sxs-lookup"><span data-stu-id="cc49a-230">NVA is a generic term for a virtual appliance that can perform network-related tasks, such as firewall, packet inspection, auditing, and custom routing.</span></span> <span data-ttu-id="cc49a-231">További információkért lásd: [Azure és az Internet között DMZ végrehajtási][dmz].</span><span class="sxs-lookup"><span data-stu-id="cc49a-231">For more information, see [Implementing a DMZ between Azure and the Internet][dmz].</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="cc49a-232">Méretezési szempontok</span><span class="sxs-lookup"><span data-stu-id="cc49a-232">Scalability considerations</span></span>

<span data-ttu-id="cc49a-233">A terheléselosztók hálózati forgalmat és a web és business szintek terjesztése.</span><span class="sxs-lookup"><span data-stu-id="cc49a-233">The load balancers distribute network traffic to the web and business tiers.</span></span> <span data-ttu-id="cc49a-234">Új Virtuálisgép-példányok hozzáadásával horizontálisan méretezhető.</span><span class="sxs-lookup"><span data-stu-id="cc49a-234">Scale horizontally by adding new VM instances.</span></span> <span data-ttu-id="cc49a-235">Vegye figyelembe, hogy méretezheti a web és business szintek egymástól függetlenül, a terhelés alapján.</span><span class="sxs-lookup"><span data-stu-id="cc49a-235">Note that you can scale the web and business tiers independently, based on load.</span></span> <span data-ttu-id="cc49a-236">Ügyfélaffinitás fenntartásához szükséges okozta lehetséges komplikációk csökkentése érdekében a webes réteg a virtuális gépek állapotmentes kell lennie.</span><span class="sxs-lookup"><span data-stu-id="cc49a-236">To reduce possible complications caused by the need to maintain client affinity, the VMs in the web tier should be stateless.</span></span> <span data-ttu-id="cc49a-237">A virtuális gépeket üzemeltető üzleti logikát is kell állapot nélküli.</span><span class="sxs-lookup"><span data-stu-id="cc49a-237">The VMs hosting the business logic should also be stateless.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="cc49a-238">Felügyeleti szempontok</span><span class="sxs-lookup"><span data-stu-id="cc49a-238">Manageability considerations</span></span>

<span data-ttu-id="cc49a-239">Egyszerűbb kezelés a teljes rendszer központosított kiszolgálófelügyelet eszközei többek között a [Azure Automation][azure-administration], [a Microsoft Operations Management Suite] [ operations-management-suite], [Chef][chef], vagy [Puppet][puppet].</span><span class="sxs-lookup"><span data-stu-id="cc49a-239">Simplify management of the entire system by using centralized administration tools such as [Azure Automation][azure-administration], [Microsoft Operations Management Suite][operations-management-suite], [Chef][chef], or [Puppet][puppet].</span></span> <span data-ttu-id="cc49a-240">Ezek az eszközök konszolidálja rögzített több virtuális gépek és a rendszer általános áttekintést nyújt a diagnosztika és állapotfigyelő információkat.</span><span class="sxs-lookup"><span data-stu-id="cc49a-240">These tools can consolidate diagnostic and health information captured from multiple VMs to provide an overall view of the system.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="cc49a-241">A megoldás üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="cc49a-241">Deploy the solution</span></span>

<span data-ttu-id="cc49a-242">A központi telepítés a referenciaarchitektúra megtalálható [GitHub][github-folder].</span><span class="sxs-lookup"><span data-stu-id="cc49a-242">A deployment for this reference architecture is available on [GitHub][github-folder].</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="cc49a-243">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="cc49a-243">Prerequisites</span></span>

<span data-ttu-id="cc49a-244">Mielőtt a saját előfizetésének telepítése a referencia-architektúrában, a következő lépésekkel kell azt.</span><span class="sxs-lookup"><span data-stu-id="cc49a-244">Before you can deploy the reference architecture to your own subscription, you must perform the following steps.</span></span>

1. <span data-ttu-id="cc49a-245">Klónozza, ágaztassa vagy a zip-fájl letöltése a [AzureCAT referencia architektúra] [ ref-arch-repo] GitHub-tárházban.</span><span class="sxs-lookup"><span data-stu-id="cc49a-245">Clone, fork, or download the zip file for the [AzureCAT reference architectures][ref-arch-repo] GitHub repository.</span></span>

2. <span data-ttu-id="cc49a-246">Győződjön meg arról, hogy az Azure CLI 2.0 telepítve a számítógépre.</span><span class="sxs-lookup"><span data-stu-id="cc49a-246">Make sure you have the Azure CLI 2.0 installed on your computer.</span></span> <span data-ttu-id="cc49a-247">A parancssori felület telepítéséhez kövesse az utasításokat a [Azure CLI 2.0 telepítése][azure-cli-2].</span><span class="sxs-lookup"><span data-stu-id="cc49a-247">To install the CLI, follow the instructions in [Install Azure CLI 2.0][azure-cli-2].</span></span>

3. <span data-ttu-id="cc49a-248">Telepítse a [Azure építőelemeket] [ azbb] npm csomag.</span><span class="sxs-lookup"><span data-stu-id="cc49a-248">Install the [Azure building blocks][azbb] npm package.</span></span>

  ```bash
  npm install -g @mspnp/azure-building-blocks
  ```

4. <span data-ttu-id="cc49a-249">A parancssorból bash, vagy PowerShell kérdés, jelentkezzen be az Azure-fiókjával használja az alábbi parancsok egyikét, és kövesse az utasításokat.</span><span class="sxs-lookup"><span data-stu-id="cc49a-249">From a command prompt, bash prompt, or PowerShell prompt, login to your Azure account by using one of the commands below, and follow the prompts.</span></span>

  ```bash
  az login
  ```

### <a name="deploy-the-solution-using-azbb"></a><span data-ttu-id="cc49a-250">Az üzembe helyezéséhez azbb használatával</span><span class="sxs-lookup"><span data-stu-id="cc49a-250">Deploy the solution using azbb</span></span>

<span data-ttu-id="cc49a-251">A Windows virtuális gépek egy N szintű alkalmazás referencia architektúra telepítéséhez kövesse az alábbi lépéseket:</span><span class="sxs-lookup"><span data-stu-id="cc49a-251">To deploy the Windows VMs for an N-tier application reference architecture, follow these steps:</span></span>

1. <span data-ttu-id="cc49a-252">Keresse meg a `virtual-machines\n-tier-windows` az 1. lépésben a fenti előfeltételek klónozott tárház mappáját.</span><span class="sxs-lookup"><span data-stu-id="cc49a-252">Navigate to the `virtual-machines\n-tier-windows` folder for the repository you cloned in step 1 of the pre-requisites above.</span></span>

2. <span data-ttu-id="cc49a-253">A paraméterfájl egy alapértelmezett adminsztrátori felhasználónevet és jelszót határozza meg a központi telepítésben lévő összes virtuális Géphez.</span><span class="sxs-lookup"><span data-stu-id="cc49a-253">The parameter file specifies a default adminstrator user name and password for each VM in the deployment.</span></span> <span data-ttu-id="cc49a-254">Ezek a referencia-architektúrában központi telepítése előtt kell módosítani.</span><span class="sxs-lookup"><span data-stu-id="cc49a-254">You must change these before you deploy the reference architecture.</span></span> <span data-ttu-id="cc49a-255">Nyissa meg a `n-tier-windows.json` fájlt, és cserélje le az egyes **adminUsername** és **adminPassword** mező az új beállításokkal.</span><span class="sxs-lookup"><span data-stu-id="cc49a-255">Open the `n-tier-windows.json` file and replace each **adminUsername** and **adminPassword** field with your new settings.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="cc49a-256">Nincsenek több futtatott parancsfájlok, a telepítés során mind a a **VirtualMachineExtension** objektumok és az a **bővítmények** egyes beállításokat a **VirtualMachine**objektumok.</span><span class="sxs-lookup"><span data-stu-id="cc49a-256">There are multiple scripts that run during this deployment both in the  **VirtualMachineExtension** objects and in the **extensions** settings for some of the **VirtualMachine** objects.</span></span> <span data-ttu-id="cc49a-257">Ezek a parancsfájlok némelyike igényelnek, a rendszergazdai felhasználónevet és jelszót, amely csak módosította.</span><span class="sxs-lookup"><span data-stu-id="cc49a-257">Some of these scripts require the administrator user name and password that you have just changed.</span></span> <span data-ttu-id="cc49a-258">Javasoljuk, hogy tekintse át ezeket a parancsfájlokat győződjön meg arról, hogy a megfelelő hitelesítő adatokat adott meg.</span><span class="sxs-lookup"><span data-stu-id="cc49a-258">It's recommended that you review these scripts to ensure that you specified the correct credentials.</span></span> <span data-ttu-id="cc49a-259">A telepítés sikertelen lehet, ha nem adott meg a megfelelő hitelesítő adatokkal.</span><span class="sxs-lookup"><span data-stu-id="cc49a-259">The deployment may fail if you have not specified the correct credentials.</span></span>
  > 
  > 

<span data-ttu-id="cc49a-260">Mentse a fájlt.</span><span class="sxs-lookup"><span data-stu-id="cc49a-260">Save the file.</span></span>

3. <span data-ttu-id="cc49a-261">Telepíthető a referencia architektúra például a **azbb** parancssori eszköz alább látható módon.</span><span class="sxs-lookup"><span data-stu-id="cc49a-261">Deploy the reference architecture using the **azbb** command line tool as shown below.</span></span>

  ```bash
  azbb -s <your subscription_id> -g <your resource_group_name> -l <azure region> -p n-tier-windows.json --deploy
  ```

<span data-ttu-id="cc49a-262">A minta referenciaarchitektúra használata Azure építőelemeket telepítésével kapcsolatos további információkért látogasson el a [GitHub-tárházban][git].</span><span class="sxs-lookup"><span data-stu-id="cc49a-262">For more information on deploying this sample reference architecture using Azure Building Blocks, visit the [GitHub repository][git].</span></span>


<!-- links -->
[dmz]: ../dmz/secure-vnet-dmz.md
[multi-dc]: multi-region-application.md
[multi-vm]: multi-vm.md
[n-tier]: n-tier.md
[azbb]: https://github.com/mspnp/template-building-blocks/wiki/Install-Azure-Building-Blocks
[azure-administration]: /azure/automation/automation-intro
[azure-availability-sets]: /azure/virtual-machines/virtual-machines-windows-manage-availability#configure-each-application-tier-into-separate-availability-sets
[azure-cli]: /azure/virtual-machines-command-line-tools
[azure-cli-2]: https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest
[azure-dns]: /azure/dns/dns-overview
[azure-key-vault]: https://azure.microsoft.com/services/key-vault
[megerősített állomás]: https://en.wikipedia.org/wiki/Bastion_host
[CIDR]: https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing
[chef]: https://www.chef.io/solutions/azure/
[git]: https://github.com/mspnp/template-building-blocks
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/virtual-machines/n-tier-windows
[lb-external-create]: /azure/load-balancer/load-balancer-get-started-internet-portal
[lb-internal-create]: /azure/load-balancer/load-balancer-get-started-ilb-arm-portal
[load-balancer-external]: /azure/load-balancer/load-balancer-internet-overview
[load-balancer-internal]: /azure/load-balancer/load-balancer-internal-overview
[nsg]: /azure/virtual-network/virtual-networks-nsg
[operations-management-suite]: https://www.microsoft.com/server-cloud/operations-management-suite/overview.aspx
[plan-network]: /azure/virtual-network/virtual-network-vnet-plan-design-arm
[private-ip-space]: https://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces
[nyilvános IP-cím]: /azure/virtual-network/virtual-network-ip-addresses-overview-arm
[puppet]: https://puppetlabs.com/blog/managing-azure-virtual-machines-puppet
[ref-arch-repo]: https://github.com/mspnp/reference-architectures
[sql-alwayson]: https://msdn.microsoft.com/library/hh510230.aspx
[sql-alwayson-force-failover]: https://msdn.microsoft.com/library/ff877957.aspx
[sql-alwayson-getting-started]: https://msdn.microsoft.com/library/gg509118.aspx
[sql-alwayson-ilb]: /azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-alwayson-int-listener
[sql-alwayson-listeners]: https://msdn.microsoft.com/library/hh213417.aspx
[sql-alwayson-read-only-routing]: https://technet.microsoft.com/library/hh213417.aspx#ConnectToSecondary
[sql-keyvault]: /azure/virtual-machines/virtual-machines-windows-ps-sql-keyvault
[vm-sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines
[vnet faq]: /azure/virtual-network/virtual-networks-faq
[wsfc-whats-new]: https://technet.microsoft.com/windows-server-docs/failover-clustering/whats-new-in-failover-clustering
[Nagios]: https://www.nagios.org/
[Zabbix]: http://www.zabbix.com/
[Icinga]: http://www.icinga.org/
[visio-download]: https://archcenter.azureedge.net/cdn/vm-reference-architectures.vsdx
[0]: ./images/n-tier-diagram.png "Microsoft Azure használatával N szintű architektúra"