---
title: "Futó Windows virtuális gépeinek N szintű architektúrája"
description: "How Azure, a rendelkezésre állási, biztonsági, méretezhetőség és kezelhetőség biztonsági kifizető különös figyelmet egy többrétegű architektúra végrehajtásához."
author: MikeWasson
ms.date: 11/22/2016
pnp.series.title: Windows VM workloads
pnp.series.next: multi-region-application
pnp.series.prev: multi-vm
ms.openlocfilehash: f3c375f8fccc633d9525a8afbd11c13037265f4a
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 11/14/2017
---
# <a name="run-windows-vms-for-an-n-tier-application"></a><span data-ttu-id="f6847-103">Futtassa a Windows virtuális gépek N szintű alkalmazás</span><span class="sxs-lookup"><span data-stu-id="f6847-103">Run Windows VMs for an N-tier application</span></span>

<span data-ttu-id="f6847-104">A referencia-architektúrában futó Windows virtuális gépeket (VM) N szintű alkalmazások bevált gyakorlatok csoportja jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="f6847-104">This reference architecture shows a set of proven practices for running Windows virtual machines (VMs) for an N-tier application.</span></span> [<span data-ttu-id="f6847-105">**Ez a megoldás üzembe helyezéséhez**.</span><span class="sxs-lookup"><span data-stu-id="f6847-105">**Deploy this solution**.</span></span>](#deploy-the-solution) 

<span data-ttu-id="f6847-106">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="f6847-106">![[0]][0]</span></span>

<span data-ttu-id="f6847-107">*Töltse le a [Visio fájl] [ visio-download] ezen architektúra.*</span><span class="sxs-lookup"><span data-stu-id="f6847-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="f6847-108">Architektúra</span><span class="sxs-lookup"><span data-stu-id="f6847-108">Architecture</span></span> 

<span data-ttu-id="f6847-109">Számos módon valósítja meg az N szintű architektúrát.</span><span class="sxs-lookup"><span data-stu-id="f6847-109">There are many ways to implement an N-tier architecture.</span></span> <span data-ttu-id="f6847-110">Az ábrán egy tipikus 3 szintű webalkalmazást.</span><span class="sxs-lookup"><span data-stu-id="f6847-110">The diagram shows a typical 3-tier web application.</span></span> <span data-ttu-id="f6847-111">Ez az architektúra épül [futtassa a virtuális gépek elosztott terhelésű a méretezhetőség és a rendelkezésre állási][multi-vm].</span><span class="sxs-lookup"><span data-stu-id="f6847-111">This architecture builds on [Run load-balanced VMs for scalability and availability][multi-vm].</span></span> <span data-ttu-id="f6847-112">A web és business szintek használata virtuális gépek elosztott terhelésű.</span><span class="sxs-lookup"><span data-stu-id="f6847-112">The web and business tiers use load-balanced VMs.</span></span>

* <span data-ttu-id="f6847-113">**Rendelkezésre állási készletek.**</span><span class="sxs-lookup"><span data-stu-id="f6847-113">**Availability sets.**</span></span> <span data-ttu-id="f6847-114">Hozzon létre egy [rendelkezésre állási csoport] [ azure-availability-sets] minden egyes réteg, és minden egyes rétegben legalább két virtuális gépek telepítéséhez.</span><span class="sxs-lookup"><span data-stu-id="f6847-114">Create an [availability set][azure-availability-sets] for each tier, and provision at least two VMs in each tier.</span></span> <span data-ttu-id="f6847-115">Ez lehetővé teszi a virtuális gépeket abban az esetben jogosult a magasabb [szolgáltatásiszint-szerződés (SLA) szolgáltatás] [ vm-sla] virtuális gépekhez.</span><span class="sxs-lookup"><span data-stu-id="f6847-115">This makes the VMs eligible for a higher [service level agreement (SLA)][vm-sla] for VMs.</span></span>
* <span data-ttu-id="f6847-116">**Alhálózatok.**</span><span class="sxs-lookup"><span data-stu-id="f6847-116">**Subnets.**</span></span> <span data-ttu-id="f6847-117">Hozzon létre egy külön alhálózatot az egyes rétegekhez.</span><span class="sxs-lookup"><span data-stu-id="f6847-117">Create a separate subnet for each tier.</span></span> <span data-ttu-id="f6847-118">Adja meg a címtartományt és alhálózati maszk használatával [CIDR] jelöléssel.</span><span class="sxs-lookup"><span data-stu-id="f6847-118">Specify the address range and subnet mask using [CIDR] notation.</span></span> 
* <span data-ttu-id="f6847-119">**A terheléselosztók.**</span><span class="sxs-lookup"><span data-stu-id="f6847-119">**Load balancers.**</span></span> <span data-ttu-id="f6847-120">Használjon egy [internetre irányuló terheléselosztót] [ load-balancer-external] terjeszteni a webes réteg bejövő internetes forgalmat és egy [belső terheléselosztó] [ load-balancer-internal]hálózati forgalmat a a webes réteg az üzleti szint és terjeszteni.</span><span class="sxs-lookup"><span data-stu-id="f6847-120">Use an [Internet-facing load balancer][load-balancer-external] to distribute incoming Internet traffic to the web tier, and an [internal load balancer][load-balancer-internal] to distribute network traffic from the web tier to the business tier.</span></span>
* <span data-ttu-id="f6847-121">**Jumpbox.**</span><span class="sxs-lookup"><span data-stu-id="f6847-121">**Jumpbox.**</span></span> <span data-ttu-id="f6847-122">Más néven a [megerősített állomás].</span><span class="sxs-lookup"><span data-stu-id="f6847-122">Also called a [bastion host].</span></span> <span data-ttu-id="f6847-123">Biztonságos virtuális gép, amely a rendszergazdák csatlakozhat a virtuális gépeket a hálózaton.</span><span class="sxs-lookup"><span data-stu-id="f6847-123">A secure VM on the network that administrators use to connect to the other VMs.</span></span> <span data-ttu-id="f6847-124">A jumpbox van egy NSG-t, amely lehetővé teszi a távoli forgalom csak nyilvános IP-címekről érkező biztonságos listán.</span><span class="sxs-lookup"><span data-stu-id="f6847-124">The jumpbox has an NSG that allows remote traffic only from public IP addresses on a safe list.</span></span> <span data-ttu-id="f6847-125">Az NSG engedélyezniük kell a távoli asztal (RDP) forgalmat.</span><span class="sxs-lookup"><span data-stu-id="f6847-125">The NSG should permit remote desktop (RDP) traffic.</span></span>
* <span data-ttu-id="f6847-126">**Figyelés.**</span><span class="sxs-lookup"><span data-stu-id="f6847-126">**Monitoring.**</span></span> <span data-ttu-id="f6847-127">Például a figyelés szoftver [Nagios], [Zabbix], vagy [Icinga] biztosíthat, válaszidő, illetve a virtuális gép hasznos üzemidő és a rendszer általános állapotát.</span><span class="sxs-lookup"><span data-stu-id="f6847-127">Monitoring software such as [Nagios], [Zabbix], or [Icinga] can give you insight into response time, VM uptime, and the overall health of your system.</span></span> <span data-ttu-id="f6847-128">Telepíti a figyelési, amely egy különálló felügyeleti alhálózat el van helyezve.</span><span class="sxs-lookup"><span data-stu-id="f6847-128">Install the monitoring software on a VM that's placed in a separate management subnet.</span></span>
* <span data-ttu-id="f6847-129">**Az NSG-k.**</span><span class="sxs-lookup"><span data-stu-id="f6847-129">**NSGs.**</span></span> <span data-ttu-id="f6847-130">Használjon [hálózati biztonsági csoportok] [ nsg] (NSG-ket) korlátozzák a hálózati forgalmat a Vneten belül.</span><span class="sxs-lookup"><span data-stu-id="f6847-130">Use [network security groups][nsg] (NSGs) to restrict network traffic within the VNet.</span></span> <span data-ttu-id="f6847-131">Például a 3-rétegű architektúra itt látható, az adatbázis-rétegből nem fogadja el a előtér, csak az üzleti szint és a felügyeleti alhálózati a forgalmat.</span><span class="sxs-lookup"><span data-stu-id="f6847-131">For example, in the 3-tier architecture shown here, the database tier does not accept traffic from the web front end, only from the business tier and the management subnet.</span></span>
* <span data-ttu-id="f6847-132">**SQL Server Always On rendelkezésre állási csoporthoz.**</span><span class="sxs-lookup"><span data-stu-id="f6847-132">**SQL Server Always On Availability Group.**</span></span> <span data-ttu-id="f6847-133">Itt az adatréteg: magas rendelkezésre állású replikációs és feladatátvételi engedélyezésével.</span><span class="sxs-lookup"><span data-stu-id="f6847-133">Provides high availability at the data tier, by enabling replication and failover.</span></span>
* <span data-ttu-id="f6847-134">**Active Directory tartományi szolgáltatások (AD DS) kiszolgálók**.</span><span class="sxs-lookup"><span data-stu-id="f6847-134">**Active Directory Domain Services (AD DS) Servers**.</span></span> <span data-ttu-id="f6847-135">Előtt a Windows Server 2016 SQL Server Always On rendelkezésre állási csoportok egy tartományhoz kell csatlakoztatni.</span><span class="sxs-lookup"><span data-stu-id="f6847-135">Prior to Windows Server 2016, SQL Server Always On Availability Groups must be joined to a domain.</span></span> <span data-ttu-id="f6847-136">Ennek az az oka a rendelkezésre állási csoportok Windows Server feladatátvételi fürt (WSFC) technológia függ.</span><span class="sxs-lookup"><span data-stu-id="f6847-136">This is because Availability Groups depend on Windows Server Failover Cluster (WSFC) technology.</span></span> <span data-ttu-id="f6847-137">Windows Server 2016 vezet be Active Directory nélküli feladatátvevő fürt létrehozásának ebben az esetben az Active Directory tartományi szolgáltatások-kiszolgálók esetén nincs szükség ebbe az architektúrába.</span><span class="sxs-lookup"><span data-stu-id="f6847-137">Windows Server 2016 introduces the ability to create a Failover Cluster without Active Directory, in which case the AD DS servers are not required for this architecture.</span></span> <span data-ttu-id="f6847-138">További információkért lásd: [a Windows Server 2016 feladatátvételi fürtszolgáltatásával kapcsolatos újdonságok][wsfc-whats-new].</span><span class="sxs-lookup"><span data-stu-id="f6847-138">For more information, see [What's new in Failover Clustering in Windows Server 2016][wsfc-whats-new].</span></span>

## <a name="recommendations"></a><span data-ttu-id="f6847-139">Javaslatok</span><span class="sxs-lookup"><span data-stu-id="f6847-139">Recommendations</span></span>

<span data-ttu-id="f6847-140">A követelmények eltérhetnek az itt leírt architektúra.</span><span class="sxs-lookup"><span data-stu-id="f6847-140">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="f6847-141">Ezek a javaslatok használja kiindulópontként.</span><span class="sxs-lookup"><span data-stu-id="f6847-141">Use these recommendations as a starting point.</span></span> 

### <a name="vnet--subnets"></a><span data-ttu-id="f6847-142">Virtuális hálózatot / alhálózatot</span><span class="sxs-lookup"><span data-stu-id="f6847-142">VNet / Subnets</span></span>

<span data-ttu-id="f6847-143">A virtuális hálózat létrehozásakor határozza meg a minden alhálózatban kell hány IP-címeket.</span><span class="sxs-lookup"><span data-stu-id="f6847-143">When you create the VNet, determine how many IP addresses your resources in each subnet require.</span></span> <span data-ttu-id="f6847-144">Adjon meg alhálózati maszkot és egy virtuális hálózat címtartománya elég nagy a szükséges IP-címek, amely az [CIDR] jelöléssel.</span><span class="sxs-lookup"><span data-stu-id="f6847-144">Specify a subnet mask and a VNet address range large enough for the required IP addresses, using [CIDR] notation.</span></span> <span data-ttu-id="f6847-145">Amely a szabványos címterület használata [privát IP-címblokkok][private-ip-space], amelyeket 10.0.0.0/8, 172.16.0.0/12 vagy 192.168.0.0/16.</span><span class="sxs-lookup"><span data-stu-id="f6847-145">Use an address space that falls within the standard [private IP address blocks][private-ip-space], which are 10.0.0.0/8, 172.16.0.0/12, and 192.168.0.0/16.</span></span>

<span data-ttu-id="f6847-146">Válassza ki, amely nem fedi át a helyszíni hálózat címtartományt, abban az esetben, akkor be kell állítania egy átjárót a virtuális hálózat és a helyszíni hálózat között később.</span><span class="sxs-lookup"><span data-stu-id="f6847-146">Choose an address range that does not overlap with your on-premises network, in case you need to set up a gateway between the VNet and your on-premise network later.</span></span> <span data-ttu-id="f6847-147">Miután létrehozta a virtuális hálózat, a címtartomány nem módosítható.</span><span class="sxs-lookup"><span data-stu-id="f6847-147">Once you create the VNet, you can't change the address range.</span></span>

<span data-ttu-id="f6847-148">Tervezze meg működésének és biztonsági követelmények figyelembe vételével rendelkező alhálózatokhoz.</span><span class="sxs-lookup"><span data-stu-id="f6847-148">Design subnets with functionality and security requirements in mind.</span></span> <span data-ttu-id="f6847-149">Minden virtuális gép ugyanabban a réteg vagy szerepkör kell kísérhet ugyanazon az alhálózaton, amelyek lehetnek biztonsági korlátot.</span><span class="sxs-lookup"><span data-stu-id="f6847-149">All VMs within the same tier or role should go into the same subnet, which can be a security boundary.</span></span> <span data-ttu-id="f6847-150">Virtuális hálózatokat és alhálózatokat megtervezésével kapcsolatos további információkért lásd: [tervezési és kialakítási Azure virtuális hálózatok][plan-network].</span><span class="sxs-lookup"><span data-stu-id="f6847-150">For more information about designing VNets and subnets, see [Plan and design Azure Virtual Networks][plan-network].</span></span>

<span data-ttu-id="f6847-151">Az egyes alhálózatokon adja meg a címtér az alhálózat CIDR-formátumban.</span><span class="sxs-lookup"><span data-stu-id="f6847-151">For each subnet, specify the address space for the subnet in CIDR notation.</span></span> <span data-ttu-id="f6847-152">Például a "10.0.0.0/24" 256 IP-címek egy tartománya hoz létre.</span><span class="sxs-lookup"><span data-stu-id="f6847-152">For example, '10.0.0.0/24' creates a range of 256 IP addresses.</span></span> <span data-ttu-id="f6847-153">Virtuális gépek használhatják 251 ezek; öt vannak fenntartva.</span><span class="sxs-lookup"><span data-stu-id="f6847-153">VMs can use 251 of these; five are reserved.</span></span> <span data-ttu-id="f6847-154">Győződjön meg arról, hogy a cím címtartományok nem fednek át alhálózatokon keresztül.</span><span class="sxs-lookup"><span data-stu-id="f6847-154">Make sure the address ranges don't overlap across subnets.</span></span> <span data-ttu-id="f6847-155">Tekintse meg a [virtuális hálózat – gyakori kérdések][vnet faq].</span><span class="sxs-lookup"><span data-stu-id="f6847-155">See the [Virtual Network FAQ][vnet faq].</span></span>

### <a name="network-security-groups"></a><span data-ttu-id="f6847-156">Network security groups (Hálózati biztonsági csoportok)</span><span class="sxs-lookup"><span data-stu-id="f6847-156">Network security groups</span></span>

<span data-ttu-id="f6847-157">NSG-szabályok segítségével korlátozzák a rétegek közötti forgalmat.</span><span class="sxs-lookup"><span data-stu-id="f6847-157">Use NSG rules to restrict traffic between tiers.</span></span> <span data-ttu-id="f6847-158">Például a fenti 3-rétegű architektúra esetén a webes réteg nem közvetlenül kommunikálnak az adatbázis-rétegből.</span><span class="sxs-lookup"><span data-stu-id="f6847-158">For example, in the 3-tier architecture shown above, the web tier does not communicate directly with the database tier.</span></span> <span data-ttu-id="f6847-159">Az adatbázis-rétegből érvényesítik, a webes réteg alhálózati érkező bejövő forgalmat kell blokkolja.</span><span class="sxs-lookup"><span data-stu-id="f6847-159">To enforce this, the database tier should block incoming traffic from the web tier subnet.</span></span>  

1. <span data-ttu-id="f6847-160">Hozzon létre egy NSG-t, és társítsa azt az adatbázis réteg alhálózathoz.</span><span class="sxs-lookup"><span data-stu-id="f6847-160">Create an NSG and associate it to the database tier subnet.</span></span>
2. <span data-ttu-id="f6847-161">Adjon hozzá egy szabályt, amely minden bejövő forgalom a vnet megtagadja.</span><span class="sxs-lookup"><span data-stu-id="f6847-161">Add a rule that denies all inbound traffic from the VNet.</span></span> <span data-ttu-id="f6847-162">(Használja a `VIRTUAL_NETWORK` címke a szabályban.)</span><span class="sxs-lookup"><span data-stu-id="f6847-162">(Use the `VIRTUAL_NETWORK` tag in the rule.)</span></span> 
3. <span data-ttu-id="f6847-163">A magasabb prioritású, amely lehetővé teszi a bejövő forgalom az üzleti szint alhálózatból rendelkező szabály hozzáadását.</span><span class="sxs-lookup"><span data-stu-id="f6847-163">Add a rule with a higher priority that allows inbound traffic from the business tier subnet.</span></span> <span data-ttu-id="f6847-164">Ez a szabály felülírja az előző szabályt, és lehetővé teszi, hogy felvegye a az adatbázis-rétegből az üzleti szint.</span><span class="sxs-lookup"><span data-stu-id="f6847-164">This rule overrides the previous rule, and allows the business tier to talk to the database tier.</span></span>
4. <span data-ttu-id="f6847-165">Adjon hozzá egy szabályt, amely lehetővé teszi, hogy a bejövő forgalom maga az adatbázis réteg alhálózat belül.</span><span class="sxs-lookup"><span data-stu-id="f6847-165">Add a rule that allows inbound traffic from within the database tier subnet itself.</span></span> <span data-ttu-id="f6847-166">Ez a szabály lehetővé teszi, hogy az adatbázis-rétegből, szükség van az adatbázis-replikációt és feladatátvételt a virtuális gépek közötti kommunikáció.</span><span class="sxs-lookup"><span data-stu-id="f6847-166">This rule allows communication between VMs in the database tier, which is needed for database replication and failover.</span></span>
5. <span data-ttu-id="f6847-167">Adjon hozzá egy szabályt, amely a jumpbox alhálózatból RDP-forgalmát engedélyezi.</span><span class="sxs-lookup"><span data-stu-id="f6847-167">Add a rule that allows RDP traffic from the jumpbox subnet.</span></span> <span data-ttu-id="f6847-168">Ez a szabály lehetővé teszi, hogy a rendszergazdák a jumpbox az adatbázis-rétegből csatlakoztassa.</span><span class="sxs-lookup"><span data-stu-id="f6847-168">This rule lets administrators connect to the database tier from the jumpbox.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="f6847-169">Az NSG tartozik alapértelmezett szabályokat, amelyek lehetővé teszik a Vneten belül minden bejövő forgalom.</span><span class="sxs-lookup"><span data-stu-id="f6847-169">An NSG has default rules that allow any inbound traffic from within the VNet.</span></span> <span data-ttu-id="f6847-170">Ezek a szabályok nem lehet törölni, de magasabb prioritású szabályok létrehozásával felülbírálhatja.</span><span class="sxs-lookup"><span data-stu-id="f6847-170">These rules can't be deleted, but you can override them by creating higher priority rules.</span></span>
   > 
   > 

### <a name="load-balancers"></a><span data-ttu-id="f6847-171">Terheléselosztók</span><span class="sxs-lookup"><span data-stu-id="f6847-171">Load balancers</span></span>

<span data-ttu-id="f6847-172">A külső terheléselosztó osztja el a webes réteg internetes forgalmat.</span><span class="sxs-lookup"><span data-stu-id="f6847-172">The external load balancer distributes Internet traffic to the web tier.</span></span> <span data-ttu-id="f6847-173">Hozzon létre egy nyilvános IP-címet ehhez a terheléselosztóhoz.</span><span class="sxs-lookup"><span data-stu-id="f6847-173">Create a public IP address for this load balancer.</span></span> <span data-ttu-id="f6847-174">Lásd: [egy internetre irányuló Terheléselosztói][lb-external-create].</span><span class="sxs-lookup"><span data-stu-id="f6847-174">See [Creating an Internet-facing load balancer][lb-external-create].</span></span>

<span data-ttu-id="f6847-175">A belső terheléselosztó osztja el a hálózati forgalmat a a webes réteg és az üzleti szint.</span><span class="sxs-lookup"><span data-stu-id="f6847-175">The internal load balancer distributes network traffic from the web tier to the business tier.</span></span> <span data-ttu-id="f6847-176">Adjon meg egy magánhálózati IP-címet ehhez a terheléselosztóhoz, hozzon létre egy előtérbeli IP-konfigurációja, és rendelje hozzá azt az üzleti szint alhálózatát.</span><span class="sxs-lookup"><span data-stu-id="f6847-176">To give this load balancer a private IP address, create a frontend IP configuration and associate it with the subnet for the business tier.</span></span> <span data-ttu-id="f6847-177">Lásd: [létrehozásához a belső terheléselosztók][lb-internal-create].</span><span class="sxs-lookup"><span data-stu-id="f6847-177">See [Get started creating an Internal load balancer][lb-internal-create].</span></span>

### <a name="sql-server-always-on-availability-groups"></a><span data-ttu-id="f6847-178">SQL Server Always On rendelkezésre állási csoportok</span><span class="sxs-lookup"><span data-stu-id="f6847-178">SQL Server Always On Availability Groups</span></span>

<span data-ttu-id="f6847-179">Ajánlott [Always On rendelkezésre állási csoportok] [ sql-alwayson] SQL Server magas rendelkezésre állásra.</span><span class="sxs-lookup"><span data-stu-id="f6847-179">We recommend [Always On Availability Groups][sql-alwayson] for SQL Server high availability.</span></span> <span data-ttu-id="f6847-180">Windows Server 2016-ot, mielőtt az Always On rendelkezésre állási csoportok igényli tartományvezérlő, és a rendelkezésre állási csoport összes csomópontjának AD ugyanabban a tartományban kell lennie.</span><span class="sxs-lookup"><span data-stu-id="f6847-180">Prior to Windows Server 2016, Always On Availability Groups require a domain controller, and all nodes in the availability group must be in the same AD domain.</span></span>

<span data-ttu-id="f6847-181">Más szintekre kapcsolódni az adatbázishoz, keresztül egy [rendelkezésre állási csoport figyelőjének][sql-alwayson-listeners].</span><span class="sxs-lookup"><span data-stu-id="f6847-181">Other tiers connect to the database through an [availability group listener][sql-alwayson-listeners].</span></span> <span data-ttu-id="f6847-182">A figyelő lehetővé teszi, hogy a fizikai SQL Server-példány nevét ismerete nélkül kapcsolódni az SQL-ügyfeleken.</span><span class="sxs-lookup"><span data-stu-id="f6847-182">The listener enables a SQL client to connect without knowing the name of the physical instance of SQL Server.</span></span> <span data-ttu-id="f6847-183">A virtuális gépeket, hogy az adatbázis hozzáférés csatlakoznia kell a tartományhoz.</span><span class="sxs-lookup"><span data-stu-id="f6847-183">VMs that access the database must be joined to the domain.</span></span> <span data-ttu-id="f6847-184">Az ügyfél (ebben az esetben egy másik réteg) DNS-Kiszolgálókat használ, a figyelő virtuálishálózat-név feloldani az IP-címeket.</span><span class="sxs-lookup"><span data-stu-id="f6847-184">The client (in this case, another tier) uses DNS to resolve the listener's virtual network name into IP addresses.</span></span>

<span data-ttu-id="f6847-185">A SQL Server mindig a rendelkezésre állási csoport konfigurálásához az alábbiak szerint:</span><span class="sxs-lookup"><span data-stu-id="f6847-185">Configure the SQL Server Always On Availability Group as follows:</span></span>

1. <span data-ttu-id="f6847-186">Hozzon létre egy Windows Server feladatátvételi fürtszolgáltatási (WSFC) fürt, egy SQL Server mindig a rendelkezésre állási csoport és egy elsődleges másodpéldány.</span><span class="sxs-lookup"><span data-stu-id="f6847-186">Create a Windows Server Failover Clustering (WSFC) cluster, a SQL Server Always On Availability Group, and a primary replica.</span></span> <span data-ttu-id="f6847-187">További információkért lásd: [Ismerkedés az Always On rendelkezésre állási csoportok][sql-alwayson-getting-started].</span><span class="sxs-lookup"><span data-stu-id="f6847-187">For more information, see [Getting Started with Always On Availability Groups][sql-alwayson-getting-started].</span></span> 
2. <span data-ttu-id="f6847-188">Hozzon létre egy belső elosztott terhelésű hozzá statikus magánhálózati IP-cím.</span><span class="sxs-lookup"><span data-stu-id="f6847-188">Create an internal load balancer with a static private IP address.</span></span>
3. <span data-ttu-id="f6847-189">Hozzon létre egy rendelkezésre állási csoport figyelőjének, és képezze le a figyelő DNS-nevet a belső terheléselosztók IP-címét.</span><span class="sxs-lookup"><span data-stu-id="f6847-189">Create an availability group listener, and map the listener's DNS name to the IP address of an internal load balancer.</span></span> 
4. <span data-ttu-id="f6847-190">Hozzon létre olyan terheléselosztó szabályhoz a figyelő az SQL Server-porthoz (TCP 1433-as port alapértelmezés szerint).</span><span class="sxs-lookup"><span data-stu-id="f6847-190">Create a load balancer rule for the SQL Server listening port (TCP port 1433 by default).</span></span> <span data-ttu-id="f6847-191">Engedélyeznie kell a terheléselosztó szabályhoz *fix IP*, más néven a közvetlen kiszolgálói válasz.</span><span class="sxs-lookup"><span data-stu-id="f6847-191">The load balancer rule must enable *floating IP*, also called Direct Server Return.</span></span> <span data-ttu-id="f6847-192">Ez azt eredményezi, hogy a virtuális gép közvetlenül válaszolni az ügyfelet, ami lehetővé teszi, hogy a közvetlen kapcsolat az elsődleges másodpéldányhoz.</span><span class="sxs-lookup"><span data-stu-id="f6847-192">This causes the VM to reply directly to the client, which enables a direct connection to the primary replica.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="f6847-193">Ha fix IP engedélyezve van, a előtér-portszám lehet ugyanaz, mint a háttér-port számát, a terheléselosztó szabályhoz.</span><span class="sxs-lookup"><span data-stu-id="f6847-193">When floating IP is enabled, the front-end port number must be the same as the back-end port number in the load balancer rule.</span></span>
  > 
  > 

<span data-ttu-id="f6847-194">Ha egy SQL-ügyfél próbál csatlakozni, a terheléselosztó a kapcsolódási kérelmet továbbítja a az elsődleges másodpéldány.</span><span class="sxs-lookup"><span data-stu-id="f6847-194">When a SQL client tries to connect, the load balancer routes the connection request to the primary replica.</span></span> <span data-ttu-id="f6847-195">Ha a feladatátvételt a replika egy másik, a terheléselosztó automatikusan továbbítja az későbbi kérelmeket egy új elsődleges replika.</span><span class="sxs-lookup"><span data-stu-id="f6847-195">If there is a failover to another replica, the load balancer automatically routes subsequent requests to a new primary replica.</span></span> <span data-ttu-id="f6847-196">További információkért lásd: [egy ILB figyelőt az SQL Server Always On rendelkezésre állási csoportok konfigurálása][sql-alwayson-ilb].</span><span class="sxs-lookup"><span data-stu-id="f6847-196">For more information, see [Configure an ILB listener for SQL Server Always On Availability Groups][sql-alwayson-ilb].</span></span>

<span data-ttu-id="f6847-197">A feladatátvétel során a már meglévő ügyfélkapcsolatok be legyen zárva.</span><span class="sxs-lookup"><span data-stu-id="f6847-197">During a failover, existing client connections are closed.</span></span> <span data-ttu-id="f6847-198">A feladatátvétel után a rendszer az új kapcsolatok az új elsődleges replika irányítsa.</span><span class="sxs-lookup"><span data-stu-id="f6847-198">After the failover completes, new connections will be routed to the new primary replica.</span></span>

<span data-ttu-id="f6847-199">Ha az alkalmazás lehetővé teszi az írási műveletek mint jóval több olvasási, kiszervezése a csak olvasható másodlagos replika lekérdezések némelyike.</span><span class="sxs-lookup"><span data-stu-id="f6847-199">If your application makes significantly more reads than writes, you can offload some of the read-only queries to a secondary replica.</span></span> <span data-ttu-id="f6847-200">Lásd: [használja egy figyelő való csatlakozáshoz a csak olvasható másodlagos replika (csak olvasható Útválasztás)][sql-alwayson-read-only-routing].</span><span class="sxs-lookup"><span data-stu-id="f6847-200">See [Using a Listener to Connect to a Read-Only Secondary Replica (Read-Only Routing)][sql-alwayson-read-only-routing].</span></span>

<span data-ttu-id="f6847-201">Az üzemelő példány által [kényszerített kézi feladatátvétel] [ sql-alwayson-force-failover] a rendelkezésre állási csoport.</span><span class="sxs-lookup"><span data-stu-id="f6847-201">Test your deployment by [forcing a manual failover][sql-alwayson-force-failover] of the availability group.</span></span>

### <a name="jumpbox"></a><span data-ttu-id="f6847-202">Jumpbox</span><span class="sxs-lookup"><span data-stu-id="f6847-202">Jumpbox</span></span>

<span data-ttu-id="f6847-203">A jumpbox fogja teljesítményének minimális követelmények vonatkoznak, így jelölje ki például a Standard A1 jumpbox kis Virtuálisgép-méretet.</span><span class="sxs-lookup"><span data-stu-id="f6847-203">The jumpbox will have minimal performance requirements, so select a small VM size for the jumpbox such as Standard A1.</span></span> 

<span data-ttu-id="f6847-204">Hozzon létre egy [nyilvános IP-cím] a jumpbox számára.</span><span class="sxs-lookup"><span data-stu-id="f6847-204">Create a [public IP address] for the jumpbox.</span></span> <span data-ttu-id="f6847-205">Helyezze a jumpbox, mint a többi virtuális gépe ugyanazon virtuális, de egy különálló felügyeleti alhálózat.</span><span class="sxs-lookup"><span data-stu-id="f6847-205">Place the jumpbox in the same VNet as the other VMs, but in a separate management subnet.</span></span>

<span data-ttu-id="f6847-206">Engedélyezi az RDP a nyilvános interneten keresztül az alkalmazás munkaterhelés futtató virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="f6847-206">Do not allow RDP access from the public Internet to the VMs that run the application workload.</span></span> <span data-ttu-id="f6847-207">Ehelyett ezeket a virtuális gépek RDP-hozzáférést a jumpbox keresztül kell következnie.</span><span class="sxs-lookup"><span data-stu-id="f6847-207">Instead, all RDP access to these VMs must come through the jumpbox.</span></span> <span data-ttu-id="f6847-208">A rendszergazda bejelentkezik az a jumpbox, és majd bejelentkezik az a jumpbox a többi virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="f6847-208">An administrator logs into the jumpbox, and then logs into the other VM from the jumpbox.</span></span> <span data-ttu-id="f6847-209">A jumpbox RDP-forgalmát engedélyezi az internetről, de csak az ismert, biztonságos IP-címeket.</span><span class="sxs-lookup"><span data-stu-id="f6847-209">The jumpbox allows RDP traffic from the Internet, but only from known, safe IP addresses.</span></span>

<span data-ttu-id="f6847-210">A jumpbox biztonságos hozzon létre egy NSG-t, és alkalmazza azt a jumpbox alhálózathoz.</span><span class="sxs-lookup"><span data-stu-id="f6847-210">To secure the jumpbox, create an NSG and apply it to the jumpbox subnet.</span></span> <span data-ttu-id="f6847-211">Vegyen fel egy NSG-t, amely lehetővé teszi az RDP-kapcsolatok csak egy készletből biztonságos nyilvános IP-címek.</span><span class="sxs-lookup"><span data-stu-id="f6847-211">Add an NSG rule that allows RDP connections only from a safe set of public IP addresses.</span></span> <span data-ttu-id="f6847-212">Az NSG csatolhatók az alhálózatot, vagy a jumpbox hálózati adaptert.</span><span class="sxs-lookup"><span data-stu-id="f6847-212">The NSG can be attached either to the subnet or to the jumpbox NIC.</span></span> <span data-ttu-id="f6847-213">Ebben az esetben ajánlott való csatlakoztatás a hálózati adapter, így az RDP-forgalmát engedélyezve van a csak a jumpbox, még akkor is, ha más virtuális gépek hozzá ugyanazon az alhálózaton.</span><span class="sxs-lookup"><span data-stu-id="f6847-213">In this case, we recommend attaching it to the NIC, so RDP traffic is permitted only to the jumpbox, even if you add other VMs to the same subnet.</span></span>

<span data-ttu-id="f6847-214">Konfigurálja az NSG-k más alhálózatok felügyeleti alhálózatról RDP-forgalmát engedélyezi.</span><span class="sxs-lookup"><span data-stu-id="f6847-214">Configure the NSGs for the other subnets to allow RDP traffic from the management subnet.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="f6847-215">Rendelkezésre állási szempontok</span><span class="sxs-lookup"><span data-stu-id="f6847-215">Availability considerations</span></span>

<span data-ttu-id="f6847-216">Az adatbázis-rétegből, hogy több virtuális gép automatikusan jelenti azt, hogy a magas rendelkezésre állású adatbázis.</span><span class="sxs-lookup"><span data-stu-id="f6847-216">At the database tier, having multiple VMs does not automatically translate into a highly available database.</span></span> <span data-ttu-id="f6847-217">Egy relációs adatbázisban, az általában akkor replikációs és feladatátvételi használata magas rendelkezésre állás biztosítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="f6847-217">For a relational database, you will typically need to use replication and failover to achieve high availability.</span></span> <span data-ttu-id="f6847-218">SQL Server esetében javasoljuk [Always On rendelkezésre állási csoportok][sql-alwayson].</span><span class="sxs-lookup"><span data-stu-id="f6847-218">For SQL Server, we recommend using [Always On Availability Groups][sql-alwayson].</span></span> 

<span data-ttu-id="f6847-219">Ha magas rendelkezésre állás érdekében, mint a [Azure SLA-t a virtuális gépek] [ vm-sla] biztosít, az alkalmazás két régiók közötti replikáció és a feladatátvételre használni az Azure Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="f6847-219">If you need higher availability than the [Azure SLA for VMs][vm-sla] provides, replicate the application across two regions and use Azure Traffic Manager for failover.</span></span> <span data-ttu-id="f6847-220">További információkért lásd: [futtassa a Windows virtuális gépek magas rendelkezésre állásra több régióba][multi-dc].</span><span class="sxs-lookup"><span data-stu-id="f6847-220">For more information, see [Run Windows VMs in multiple regions for high availability][multi-dc].</span></span>   

## <a name="security-considerations"></a><span data-ttu-id="f6847-221">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="f6847-221">Security considerations</span></span>

<span data-ttu-id="f6847-222">Inaktív bizalmas adatok titkosítására és használata [Azure Key Vault] [ azure-key-vault] az adatbázis titkosítási kulcsok kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="f6847-222">Encrypt sensitive data at rest and use [Azure Key Vault][azure-key-vault] to manage the database encryption keys.</span></span> <span data-ttu-id="f6847-223">Key Vault képes tárolni a titkosítási kulcsokat a hardveres biztonsági modulokkal (HSM).</span><span class="sxs-lookup"><span data-stu-id="f6847-223">Key Vault can store encryption keys in hardware security modules (HSMs).</span></span> <span data-ttu-id="f6847-224">További információkért lásd: [konfigurálása Azure Key Vault-integráció az SQL Server Azure virtuális gépeken] [ sql-keyvault] is javasoljuk Key Vault alkalmazás titkos adatait, például adatbázis-kapcsolati karakterláncok tárolni.</span><span class="sxs-lookup"><span data-stu-id="f6847-224">For more information, see [Configure Azure Key Vault Integration for SQL Server on Azure VMs][sql-keyvault] It's also recommended to store application secrets, such as database connection strings, in Key Vault.</span></span>

<span data-ttu-id="f6847-225">Fontolja meg a hálózati virtuális készülék (NVA) az internetről és az Azure virtuális hálózat között DMZ létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="f6847-225">Consider adding a network virtual appliance (NVA) to create a DMZ between the Internet and the Azure virtual network.</span></span> <span data-ttu-id="f6847-226">NVA a virtuális készülék által végrehajtható műveleteket a hálózattal kapcsolatos feladatokat, mint például a tűzfal, csomag vizsgálati, naplózási és egyéni útválasztás neve.</span><span class="sxs-lookup"><span data-stu-id="f6847-226">NVA is a generic term for a virtual appliance that can perform network-related tasks, such as firewall, packet inspection, auditing, and custom routing.</span></span> <span data-ttu-id="f6847-227">További információkért lásd: [Azure és az Internet között DMZ végrehajtási][dmz].</span><span class="sxs-lookup"><span data-stu-id="f6847-227">For more information, see [Implementing a DMZ between Azure and the Internet][dmz].</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="f6847-228">Méretezési szempontok</span><span class="sxs-lookup"><span data-stu-id="f6847-228">Scalability considerations</span></span>

<span data-ttu-id="f6847-229">A terheléselosztók hálózati forgalmat és a web és business szintek terjesztése.</span><span class="sxs-lookup"><span data-stu-id="f6847-229">The load balancers distribute network traffic to the web and business tiers.</span></span> <span data-ttu-id="f6847-230">Új Virtuálisgép-példányok hozzáadásával horizontálisan méretezhető.</span><span class="sxs-lookup"><span data-stu-id="f6847-230">Scale horizontally by adding new VM instances.</span></span> <span data-ttu-id="f6847-231">Vegye figyelembe, hogy méretezheti a web és business szintek egymástól függetlenül, a terhelés alapján.</span><span class="sxs-lookup"><span data-stu-id="f6847-231">Note that you can scale the web and business tiers independently, based on load.</span></span> <span data-ttu-id="f6847-232">Ügyfélaffinitás fenntartásához szükséges okozta lehetséges komplikációk csökkentése érdekében a webes réteg a virtuális gépek állapotmentes kell lennie.</span><span class="sxs-lookup"><span data-stu-id="f6847-232">To reduce possible complications caused by the need to maintain client affinity, the VMs in the web tier should be stateless.</span></span> <span data-ttu-id="f6847-233">A virtuális gépeket üzemeltető üzleti logikát is kell állapot nélküli.</span><span class="sxs-lookup"><span data-stu-id="f6847-233">The VMs hosting the business logic should also be stateless.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="f6847-234">Felügyeleti szempontok</span><span class="sxs-lookup"><span data-stu-id="f6847-234">Manageability considerations</span></span>

<span data-ttu-id="f6847-235">Egyszerűbb kezelés a teljes rendszer központosított kiszolgálófelügyelet eszközei többek között a [Azure Automation][azure-administration], [a Microsoft Operations Management Suite] [ operations-management-suite], [Chef][chef], vagy [Puppet][puppet].</span><span class="sxs-lookup"><span data-stu-id="f6847-235">Simplify management of the entire system by using centralized administration tools such as [Azure Automation][azure-administration], [Microsoft Operations Management Suite][operations-management-suite], [Chef][chef], or [Puppet][puppet].</span></span> <span data-ttu-id="f6847-236">Ezek az eszközök konszolidálja rögzített több virtuális gépek és a rendszer általános áttekintést nyújt a diagnosztika és állapotfigyelő információkat.</span><span class="sxs-lookup"><span data-stu-id="f6847-236">These tools can consolidate diagnostic and health information captured from multiple VMs to provide an overall view of the system.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="f6847-237">A megoldás üzembe helyezéséhez</span><span class="sxs-lookup"><span data-stu-id="f6847-237">Deploy the solution</span></span>

<span data-ttu-id="f6847-238">Ez az architektúra telepítésének érhető el a [GitHub][github-folder].</span><span class="sxs-lookup"><span data-stu-id="f6847-238">A deployment for this architecture is available on [GitHub][github-folder].</span></span> <span data-ttu-id="f6847-239">Az architektúra három lépésben történik.</span><span class="sxs-lookup"><span data-stu-id="f6847-239">The architecture is deployed in three stages.</span></span> <span data-ttu-id="f6847-240">Az architektúra üzembe helyezéséhez kövesse az alábbi lépéseket:</span><span class="sxs-lookup"><span data-stu-id="f6847-240">To deploy the architecture, follow these steps:</span></span> 

1. <span data-ttu-id="f6847-241">Kattintson a gombra az első fázist, a telepítés megkezdéséhez:</span><span class="sxs-lookup"><span data-stu-id="f6847-241">Click the button below to begin the first stage of deployment:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fvirtual-machines%2Fn-tier-windows%2FvirtualNetwork.azuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
2. <span data-ttu-id="f6847-242">Ha a kapcsolat az Azure portálon nyitotta meg, írja be a kövesse értékeket:</span><span class="sxs-lookup"><span data-stu-id="f6847-242">Once the link has opened in the Azure portal, enter the follow values:</span></span> 
   * <span data-ttu-id="f6847-243">Az **Erőforráscsoport** neve már meg van adva a paraméterfájlban, ezért válassza az **Új létrehozása** lehetőséget és a szövegmezőbe írja az `ra-ntier-sql-network-rg` karakterláncot.</span><span class="sxs-lookup"><span data-stu-id="f6847-243">The **Resource group** name is already defined in the parameter file, so select **Create New** and enter `ra-ntier-sql-network-rg` in the text box.</span></span>
   * <span data-ttu-id="f6847-244">Válassza ki a régiót a **Hely** legördülő listából.</span><span class="sxs-lookup"><span data-stu-id="f6847-244">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="f6847-245">Ne szerkessze a **Sablon gyökér szintű URI-je** vagy a **Paraméter gyökér szintű URI-je** szövegmezőt.</span><span class="sxs-lookup"><span data-stu-id="f6847-245">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="f6847-246">Tekintse át a használati feltételeket, majd kattintson az **Elfogadom a fenti feltételeket** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="f6847-246">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="f6847-247">Kattintson a **Vásárlás** gombra.</span><span class="sxs-lookup"><span data-stu-id="f6847-247">Click on the **Purchase** button.</span></span>
3. <span data-ttu-id="f6847-248">Ellenőrizze, hogy helyesek-e az első szakasza a központi telepítés üzenet az Azure portál értesítései.</span><span class="sxs-lookup"><span data-stu-id="f6847-248">Check Azure portal notification for a message that the first stage of the deployment is complete.</span></span>
4. <span data-ttu-id="f6847-249">Kattintson a gombra, a második lépést a telepítés megkezdéséhez:</span><span class="sxs-lookup"><span data-stu-id="f6847-249">Click the button below to begin the second stage of the deployment:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fvirtual-machines%2Fn-tier-windows%2Fworkload.azuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
5. <span data-ttu-id="f6847-250">Ha a kapcsolat az Azure portálon nyitotta meg, írja be a kövesse értékeket:</span><span class="sxs-lookup"><span data-stu-id="f6847-250">Once the link has opened in the Azure portal, enter the follow values:</span></span> 
   * <span data-ttu-id="f6847-251">Az **Erőforráscsoport** neve már meg van adva a paraméterfájlban, ezért válassza az **Új létrehozása** lehetőséget és a szövegmezőbe írja az `ra-ntier-sql-workload-rg` karakterláncot.</span><span class="sxs-lookup"><span data-stu-id="f6847-251">The **Resource group** name is already defined in the parameter file, so select **Create New** and enter `ra-ntier-sql-workload-rg` in the text box.</span></span>
   * <span data-ttu-id="f6847-252">Válassza ki a régiót a **Hely** legördülő listából.</span><span class="sxs-lookup"><span data-stu-id="f6847-252">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="f6847-253">Ne szerkessze a **Sablon gyökér szintű URI-je** vagy a **Paraméter gyökér szintű URI-je** szövegmezőt.</span><span class="sxs-lookup"><span data-stu-id="f6847-253">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="f6847-254">Tekintse át a használati feltételeket, majd kattintson az **Elfogadom a fenti feltételeket** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="f6847-254">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="f6847-255">Kattintson a **Vásárlás** gombra.</span><span class="sxs-lookup"><span data-stu-id="f6847-255">Click on the **Purchase** button.</span></span>
6. <span data-ttu-id="f6847-256">Ellenőrizze, hogy helyesek-e a második lépést a központi telepítés üzenet az Azure portál értesítései.</span><span class="sxs-lookup"><span data-stu-id="f6847-256">Check Azure portal notification for a message that the second stage of deployment is complete.</span></span>
7. <span data-ttu-id="f6847-257">Kattintson a gombra a központi telepítés harmadik szakasza megkezdéséhez:</span><span class="sxs-lookup"><span data-stu-id="f6847-257">Click the button below to begin the third stage of the deployment:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fvirtual-machines%2Fn-tier-windows%2Fsecurity.azuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
8. <span data-ttu-id="f6847-258">Ha a kapcsolat az Azure portálon nyitotta meg, írja be a kövesse értékeket:</span><span class="sxs-lookup"><span data-stu-id="f6847-258">Once the link has opened in the Azure portal, enter the follow values:</span></span> 
   * <span data-ttu-id="f6847-259">A **erőforráscsoport** neve már definiálva van a paraméterfájl, ezért select **használata meglévő** , és írja be `ra-ntier-sql-network-rg` a szövegmezőben.</span><span class="sxs-lookup"><span data-stu-id="f6847-259">The **Resource group** name is already defined in the parameter file, so select **Use Existing** and enter `ra-ntier-sql-network-rg` in the text box.</span></span>
   * <span data-ttu-id="f6847-260">Válassza ki a régiót a **Hely** legördülő listából.</span><span class="sxs-lookup"><span data-stu-id="f6847-260">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="f6847-261">Ne szerkessze a **Sablon gyökér szintű URI-je** vagy a **Paraméter gyökér szintű URI-je** szövegmezőt.</span><span class="sxs-lookup"><span data-stu-id="f6847-261">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="f6847-262">Tekintse át a használati feltételeket, majd kattintson az **Elfogadom a fenti feltételeket** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="f6847-262">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="f6847-263">Kattintson a **Vásárlás** gombra.</span><span class="sxs-lookup"><span data-stu-id="f6847-263">Click on the **Purchase** button.</span></span>
9. <span data-ttu-id="f6847-264">Ellenőrizze, hogy helyesek-e a központi telepítés harmadik szakasza üzenet az Azure portál értesítései.</span><span class="sxs-lookup"><span data-stu-id="f6847-264">Check Azure portal notification for a message that the third stage of the deployment is complete.</span></span>
10. <span data-ttu-id="f6847-265">A paraméter-fájlok közé tartoznak a kódolt rendszergazda felhasználói neveket és jelszavakat, és erősen ajánlott, hogy azonnal módosítsa a virtuális gépekre is.</span><span class="sxs-lookup"><span data-stu-id="f6847-265">The parameter files include a hard-coded administrator user names and passwords, and it is strongly recommended that you immediately change both on all the VMs.</span></span> <span data-ttu-id="f6847-266">Kattintson az egyes virtuális gépek az Azure portálon, majd kattintson a lehetőségre **jelszó-átállítási** a a **támogatási + hibaelhárítási** panelen.</span><span class="sxs-lookup"><span data-stu-id="f6847-266">Click on each VM in the Azure portal then click on **Reset password** in the **Support + troubleshooting** blade.</span></span> <span data-ttu-id="f6847-267">A **Mód** legördülő listában válassza a **Jelszó alaphelyzetbe állítása** lehetőséget, majd adjon meg új értéket a **Felhasználónév** és a **Jelszó** mezőben.</span><span class="sxs-lookup"><span data-stu-id="f6847-267">Select **Reset password** in the **Mode** dropdown box, then select a new **User name** and **Password**.</span></span> <span data-ttu-id="f6847-268">Kattintson a **frissítés** gombra kattintva mentse az új felhasználónevet és jelszót.</span><span class="sxs-lookup"><span data-stu-id="f6847-268">Click the **Update** button to save the new user name and password.</span></span> 


<!-- links -->
[dmz]: ../dmz/secure-vnet-dmz.md
[multi-dc]: multi-region-application.md
[multi-vm]: multi-vm.md
[n-tier]: n-tier.md

[azure-administration]: /azure/automation/automation-intro
[azure-availability-sets]: /azure/virtual-machines/virtual-machines-windows-manage-availability#configure-each-application-tier-into-separate-availability-sets
[azure-cli]: /azure/virtual-machines-command-line-tools
[azure-key-vault]: https://azure.microsoft.com/services/key-vault
[megerősített állomás]: https://en.wikipedia.org/wiki/Bastion_host
[CIDR]: https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing
[chef]: https://www.chef.io/solutions/azure/
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/virtual-machines/n-tier-windows
[lb-external-create]: /azure/load-balancer/load-balancer-get-started-internet-portal
[lb-internal-create]: /azure/load-balancer/load-balancer-get-started-ilb-arm-portal
[load-balancer-external]: /azure/load-balancer/load-balancer-internet-overview
[load-balancer-internal]: /azure/load-balancer/load-balancer-internal-overview
[nsg]: /azure/virtual-network/virtual-networks-nsg
[operations-management-suite]: https://www.microsoft.com/server-cloud/operations-management-suite/overview.aspx
[plan-network]: /azure/virtual-network/virtual-network-vnet-plan-design-arm
[private-ip-space]: https://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces
[nyilvános IP-cím]: /azure/virtual-network/virtual-network-ip-addresses-overview-arm
[puppet]: https://puppetlabs.com/blog/managing-azure-virtual-machines-puppet
[sql-alwayson]: https://msdn.microsoft.com/library/hh510230.aspx
[sql-alwayson-force-failover]: https://msdn.microsoft.com/library/ff877957.aspx
[sql-alwayson-getting-started]: https://msdn.microsoft.com/library/gg509118.aspx
[sql-alwayson-ilb]: /azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-alwayson-int-listener
[sql-alwayson-listeners]: https://msdn.microsoft.com/library/hh213417.aspx
[sql-alwayson-read-only-routing]: https://technet.microsoft.com/library/hh213417.aspx#ConnectToSecondary
[sql-keyvault]: /azure/virtual-machines/virtual-machines-windows-ps-sql-keyvault
[vm-sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines
[vnet faq]: /azure/virtual-network/virtual-networks-faq
[wsfc-whats-new]: https://technet.microsoft.com/windows-server-docs/failover-clustering/whats-new-in-failover-clustering
[Nagios]: https://www.nagios.org/
[Zabbix]: http://www.zabbix.com/
[Icinga]: http://www.icinga.org/
[visio-download]: https://archcenter.azureedge.net/cdn/vm-reference-architectures.vsdx
[0]: ./images/n-tier-diagram.png "Microsoft Azure használatával N szintű architektúra"