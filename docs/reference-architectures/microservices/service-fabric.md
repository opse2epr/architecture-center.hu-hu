---
title: A Mikroszolgáltatási architektúra az Azure Service Fabricban
description: Üzembe helyezése az Azure Service fabric egy mikroszolgáltatás-alapú architektúra
author: PageWriter-MSFT
ms.date: 3/07/2019
ms.topic: reference-architecture
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: microservices
ms.openlocfilehash: 228e3242ce9f1ca45bc15c5b34f770bfc092dd43
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 03/20/2019
ms.locfileid: "58298989"
---
# <a name="microservices-architecture-on-azure-service-fabric"></a><span data-ttu-id="42ec8-103">A Mikroszolgáltatási architektúra az Azure Service Fabricban</span><span class="sxs-lookup"><span data-stu-id="42ec8-103">Microservices architecture on Azure Service Fabric</span></span>

<span data-ttu-id="42ec8-104">Ez a referenciaarchitektúra üzembe helyezett Azure Service fabric a mikroszolgáltatási architektúra látható.</span><span class="sxs-lookup"><span data-stu-id="42ec8-104">This reference architecture shows a microservices architecture deployed to Azure Service Fabric.</span></span> <span data-ttu-id="42ec8-105">A legtöbb telepítés esetén a kiindulási pont lehet alapszintű fürtbeállításokat mutatja.</span><span class="sxs-lookup"><span data-stu-id="42ec8-105">It shows a basic cluster configuration that can be the starting point for most deployments.</span></span>

![A Service Fabric a referencia-architektúra](./_images/ra-sf-arch.png)

> [!NOTE]
> <span data-ttu-id="42ec8-107">Ez a cikk elsősorban a [Reliable Services](/azure/service-fabric/service-fabric-reliable-services-introduction) Service Fabric programozási modell révén.</span><span class="sxs-lookup"><span data-stu-id="42ec8-107">This article focuses on the [Reliable Services](/azure/service-fabric/service-fabric-reliable-services-introduction) programming model for Service Fabric.</span></span> <span data-ttu-id="42ec8-108">A Service Fabric segítségével üzembe helyezheti és kezelheti [tárolók](/azure/service-fabric/service-fabric-containers-overview) van ez a cikk nem foglalkozik.</span><span class="sxs-lookup"><span data-stu-id="42ec8-108">Using Service Fabric to deploy and manage [containers](/azure/service-fabric/service-fabric-containers-overview) is beyond the scope of this article.</span></span>

## <a name="architecture"></a><span data-ttu-id="42ec8-109">Architektúra</span><span class="sxs-lookup"><span data-stu-id="42ec8-109">Architecture</span></span>

<span data-ttu-id="42ec8-110">Az architektúra a következőkben leírt összetevőkből áll.</span><span class="sxs-lookup"><span data-stu-id="42ec8-110">The architecture consists of the following components.</span></span> <span data-ttu-id="42ec8-111">Egyéb feltételeket, lásd: [Service Fabric a terminológia áttekintése](/azure/service-fabric/service-fabric-technical-overview).</span><span class="sxs-lookup"><span data-stu-id="42ec8-111">For other terms, see [Service Fabric terminology overview](/azure/service-fabric/service-fabric-technical-overview).</span></span>

<span data-ttu-id="42ec8-112">**Service Fabric-fürt**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-112">**Service Fabric cluster**.</span></span> <span data-ttu-id="42ec8-113">A hálózaton keresztül csatlakozó készlete, virtuális gépek (VM), amelybe mikroszolgáltatásokat helyezhet üzembe és felügyelhet.</span><span class="sxs-lookup"><span data-stu-id="42ec8-113">A network-connected set of virtual machines (VMs) into which your microservices are deployed and managed.</span></span>

<span data-ttu-id="42ec8-114">**A Virtual machine scale sets**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-114">**Virtual machine scale sets**.</span></span> <span data-ttu-id="42ec8-115">Virtuálisgép-méretezési csoportok létrehozása és kezelése egy csoportot az azonos, elosztott terhelésű és automatikus skálázású virtuális gépek lehetővé teszik.</span><span class="sxs-lookup"><span data-stu-id="42ec8-115">Virtual machine scale sets allow you to create and manage a group of identical, load balanced, and autoscaling VMs.</span></span> <span data-ttu-id="42ec8-116">A tartalék és frissítési tartományokba is tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="42ec8-116">It also provides the fault and upgrade domains.</span></span>

<span data-ttu-id="42ec8-117">**Csomópontok**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-117">**Nodes**.</span></span> <span data-ttu-id="42ec8-118">A csomópontok használata a Service Fabric-fürthöz tartozó virtuális gépeket.</span><span class="sxs-lookup"><span data-stu-id="42ec8-118">The nodes are the VMs that belong to the Service Fabric cluster.</span></span>

<span data-ttu-id="42ec8-119">**A csomóponttípusok**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-119">**Node types**.</span></span> <span data-ttu-id="42ec8-120">A csomópont típusa egy virtuális gép méretezési csoportot, amely üzembe helyezi a csomópontok gyűjteményei, jelöli.</span><span class="sxs-lookup"><span data-stu-id="42ec8-120">A node type represents a virtual machine scale set that deploys a collection of nodes.</span></span> <span data-ttu-id="42ec8-121">Service Fabric-fürt legalább egy csomópont típussal rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="42ec8-121">A Service Fabric cluster has at least one node type.</span></span> <span data-ttu-id="42ec8-122">Egy fürtben több csomóponttípus az, egy deklarálni kell a [elsődleges csomóponttípus](/azure/service-fabric/service-fabric-cluster-capacity#primary-node-type).</span><span class="sxs-lookup"><span data-stu-id="42ec8-122">In a cluster with multiple node types, one must be declared the [Primary node type](/azure/service-fabric/service-fabric-cluster-capacity#primary-node-type).</span></span> <span data-ttu-id="42ec8-123">Az elsődleges csomópont írja be a fürt fut a [Service Fabric-rendszerszolgáltatások](/azure/service-fabric/service-fabric-technical-overview#system-services).</span><span class="sxs-lookup"><span data-stu-id="42ec8-123">The primary node type in the cluster runs the [Service Fabric system services](/azure/service-fabric/service-fabric-technical-overview#system-services).</span></span> <span data-ttu-id="42ec8-124">Ezek a szolgáltatások adja meg a Service Fabric platform képességeit.</span><span class="sxs-lookup"><span data-stu-id="42ec8-124">These services provide the platform capabilities of Service Fabric.</span></span> <span data-ttu-id="42ec8-125">Az elsődleges csomóponttípushoz is funkcionál, a [magcsomópont](/azure/service-fabric/service-fabric-disaster-recovery#random-failures-leading-to-cluster-failures) a fürthöz, melyek a csomópontokat, melyek fenntartják a mögöttes fürt rendelkezésre állását.</span><span class="sxs-lookup"><span data-stu-id="42ec8-125">The primary node type also acts as the [seed nodes](/azure/service-fabric/service-fabric-disaster-recovery#random-failures-leading-to-cluster-failures) for the cluster, which are the nodes that maintain the availability of the underlying cluster.</span></span> <span data-ttu-id="42ec8-126">Konfigurálása [további csomóponttípusok](/azure/service-fabric/service-fabric-cluster-capacity#non-primary-node-type) a szolgáltatások futtatásához.</span><span class="sxs-lookup"><span data-stu-id="42ec8-126">Configure [additional node types](/azure/service-fabric/service-fabric-cluster-capacity#non-primary-node-type) to run your services.</span></span>

<span data-ttu-id="42ec8-127">**Szolgáltatások**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-127">**Services**.</span></span> <span data-ttu-id="42ec8-128">A szolgáltatás hajtja végre a különálló függvény, amely elindíthatja és egyéb szolgáltatások függetlenül futnak.</span><span class="sxs-lookup"><span data-stu-id="42ec8-128">A service performs a standalone function that can start and run independently of other services.</span></span> <span data-ttu-id="42ec8-129">Példányok szolgáltatások a fürtben található csomópontok üzembe lesznek helyezve.</span><span class="sxs-lookup"><span data-stu-id="42ec8-129">Instances of services get deployed to nodes in the cluster.</span></span> <span data-ttu-id="42ec8-130">Van a Service Fabric-szolgáltatás két fajta:</span><span class="sxs-lookup"><span data-stu-id="42ec8-130">There are two varieties of service in Service Fabric:</span></span>

- <span data-ttu-id="42ec8-131">**Az állapotmentes szolgáltatás**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-131">**Stateless service**.</span></span> <span data-ttu-id="42ec8-132">Állapotmentes szolgáltatás nem tárol a szolgáltatás állapotát.</span><span class="sxs-lookup"><span data-stu-id="42ec8-132">A stateless service does not maintain state within the service.</span></span> <span data-ttu-id="42ec8-133">Ha állapot megőrzését szükség, majd állapot írt és beolvasni egy külső áruházból, például az Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="42ec8-133">If state persistence is required, then state is written to and retrieved from an external store, such as Azure Cosmos DB.</span></span>
- <span data-ttu-id="42ec8-134">**Állapotalapú szolgáltatás**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-134">**Stateful service**.</span></span> <span data-ttu-id="42ec8-135">A [szolgáltatás állapota](/azure/service-fabric/service-fabric-concepts-state) fog zajlani a szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="42ec8-135">The [service state](/azure/service-fabric/service-fabric-concepts-state) is kept within the service itself.</span></span> <span data-ttu-id="42ec8-136">Legtöbb állapotalapú szolgáltatások révén a Service Fabric megvalósításának [a Reliable Collections](/azure/service-fabric/service-fabric-reliable-services-reliable-collections).</span><span class="sxs-lookup"><span data-stu-id="42ec8-136">Most stateful services implement this through Service Fabric’s [Reliable Collections](/azure/service-fabric/service-fabric-reliable-services-reliable-collections).</span></span>

<span data-ttu-id="42ec8-137">**Service Fabric Explorer**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-137">**Service Fabric Explorer**.</span></span> <span data-ttu-id="42ec8-138">[A Service Fabric Explorer] [ sfx] egy nyílt forráskódú eszköz vizsgálatához és kezeléséhez a Service Fabric-fürtöket.</span><span class="sxs-lookup"><span data-stu-id="42ec8-138">[Service Fabric Explorer][sfx] is an open-source tool for inspecting and managing Service Fabric clusters.</span></span>

<span data-ttu-id="42ec8-139">**Az Azure folyamatok**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-139">**Azure Pipelines**.</span></span> <span data-ttu-id="42ec8-140">[A folyamatok](/azure/devops/pipelines/?view=azure-devops) része [Azure DevOps-szolgáltatásokkal](/azure/devops/index?view=azure-devops) és automatizált buildekig, tesztek és központi telepítések futtatja.</span><span class="sxs-lookup"><span data-stu-id="42ec8-140">[Pipelines](/azure/devops/pipelines/?view=azure-devops) is part of [Azure DevOps Services](/azure/devops/index?view=azure-devops) and runs automated builds, tests, and deployments.</span></span> <span data-ttu-id="42ec8-141">Külső CI/CD megoldásokra, például a Jenkins is használhatja.</span><span class="sxs-lookup"><span data-stu-id="42ec8-141">You can also use third-party CI/CD solutions such as Jenkins.</span></span>

<span data-ttu-id="42ec8-142">**Az Azure Monitor**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-142">**Azure Monitor**.</span></span> <span data-ttu-id="42ec8-143">[Az Azure Monitor](/azure/azure-monitor/) összegyűjti és tárolja a metrikák és naplók, beleértve a platform az Azure-szolgáltatások mérőszámait a megoldás és alkalmazások telemetrikus adatait.</span><span class="sxs-lookup"><span data-stu-id="42ec8-143">[Azure Monitor](/azure/azure-monitor/) collects and stores metrics and logs, including platform metrics for the Azure services in the solution and application telemetry.</span></span> <span data-ttu-id="42ec8-144">Ezen adatok segítségével figyelheti az alkalmazást, állítsa be a riasztások és az irányítópultok és hajtsa végre a kiváltó okok elemzése a hibák.</span><span class="sxs-lookup"><span data-stu-id="42ec8-144">Use this data to monitor the application, set up alerts and dashboards, and perform root cause analysis of failures.</span></span> <span data-ttu-id="42ec8-145">Az Azure Monitor integrálható a tartományvezérlők, csomópontok, és a tárolók, valamint a tároló naplóinak és fő csomópont naplóinak begyűjtése, hogy a Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="42ec8-145">Azure Monitor integrates with Service Fabric to collect metrics from controllers, nodes, and containers, as well as container logs and master node logs.</span></span>

<span data-ttu-id="42ec8-146">**Azure Key Vault**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-146">**Azure Key Vault**.</span></span> <span data-ttu-id="42ec8-147">Használat [Key Vault](/azure/key-vault/) a mikroszolgáltatások, például kapcsolati karakterláncokat által használt alkalmazás titkos kulcsok tárolásához.</span><span class="sxs-lookup"><span data-stu-id="42ec8-147">Use [Key Vault](/azure/key-vault/) to store any application secrets used by the microservices, such as connection strings.</span></span>

<span data-ttu-id="42ec8-148">**Az Azure API Management**.</span><span class="sxs-lookup"><span data-stu-id="42ec8-148">**Azure API Management**.</span></span> <span data-ttu-id="42ec8-149">Ebben az architektúrában [az API Management](/azure/api-management/api-management-key-concepts) API-átjáró, amely fogad az ügyfelektől érkező kéréseket, és továbbítja a szolgáltatások funkcionál.</span><span class="sxs-lookup"><span data-stu-id="42ec8-149">In this architecture, [API Management](/azure/api-management/api-management-key-concepts) acts as an API gateway that accepts requests from clients and routes them to your services.</span></span>

## <a name="design-considerations"></a><span data-ttu-id="42ec8-150">Kialakítási szempontok</span><span class="sxs-lookup"><span data-stu-id="42ec8-150">Design considerations</span></span>

<span data-ttu-id="42ec8-151">Ez a referenciaarchitektúra összpontosít [mikroszolgáltatás-architektúrákat](../../guide/architecture-styles/microservices.md).</span><span class="sxs-lookup"><span data-stu-id="42ec8-151">This reference architecture is focused on [microservices architectures](../../guide/architecture-styles/microservices.md).</span></span> <span data-ttu-id="42ec8-152">A mikroszolgáltatások általában a kód kisebb, független verziójú egysége.</span><span class="sxs-lookup"><span data-stu-id="42ec8-152">A microservice is a small, independently versioned unit of code.</span></span> <span data-ttu-id="42ec8-153">Szolgáltatás felderítési mechanizmusokon keresztül felderíthető és API-k keresztül kommunikálhat más szolgáltatásokkal.</span><span class="sxs-lookup"><span data-stu-id="42ec8-153">It is discoverable through service discovery mechanisms and can communicate with other services over APIs.</span></span> <span data-ttu-id="42ec8-154">Mindegyik szolgáltatás önálló, és egyetlen üzleti képességet valósít meg.</span><span class="sxs-lookup"><span data-stu-id="42ec8-154">Each service is self-contained and should implement a single business capability.</span></span> <span data-ttu-id="42ec8-155">Hogyan bontható fel a doména aplikace mikroszolgáltatásokra kapcsolatos további információkért lásd: [tartományelemzés a mikroszolgáltatás-alapú modell használatával](../../microservices/model/domain-analysis.md).</span><span class="sxs-lookup"><span data-stu-id="42ec8-155">For more information about how to decompose your application domain into microservices, see [Using domain analysis to model microservices](../../microservices/model/domain-analysis.md).</span></span>

<span data-ttu-id="42ec8-156">A Service Fabric elkészítheti, telepítheti és mikroszolgáltatások hatékonyan frissítése infrastruktúrát biztosít.</span><span class="sxs-lookup"><span data-stu-id="42ec8-156">Service Fabric provides an infrastructure to build, deploy, and upgrade microservices efficiently.</span></span> <span data-ttu-id="42ec8-157">Automatikus méretezés, állapot kezelése, állapotának monitorozása és hiba esetén szolgáltatások újraindítása lehetőségeket is kínál.</span><span class="sxs-lookup"><span data-stu-id="42ec8-157">It also provides options for auto scaling, managing state, monitoring health, and restarting services in case of failure.</span></span>

<span data-ttu-id="42ec8-158">A Service Fabric-alkalmazásmodell követi, ahol egy alkalmazás mikroszolgáltatások gyűjteménye.</span><span class="sxs-lookup"><span data-stu-id="42ec8-158">Service Fabric follows an application model where an application is a collection of microservices.</span></span> <span data-ttu-id="42ec8-159">Az alkalmazás leírását egy [alkalmazásjegyzék](/azure/service-fabric/service-fabric-application-and-service-manifests) fájlt, amely meghatározza a különböző típusú szolgáltatás állapotadatait az adott alkalmazáshoz, és független szolgáltatási csomagokra mutató hivatkozások.</span><span class="sxs-lookup"><span data-stu-id="42ec8-159">The application is described in an [application manifest](/azure/service-fabric/service-fabric-application-and-service-manifests) file that defines the different types of service contained in that application, and pointers to the independent service packages.</span></span> <span data-ttu-id="42ec8-160">Az alkalmazáscsomag általában is szolgálhat a felülbírálja az egyes beállítások a szolgáltatások által használt paramétereket tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="42ec8-160">The application package also usually contains parameters that serve as overrides for certain settings used by the services.</span></span> <span data-ttu-id="42ec8-161">Minden szolgáltatás csomagnak jegyzékfájl, amely ismerteti a fizikai fájlok és mappák, a szolgáltatáshoz, beleértve a bináris fájlokat, a konfigurációs fájlok és a csak olvasható adatok, hogy a szolgáltatás futtatásához szükséges.</span><span class="sxs-lookup"><span data-stu-id="42ec8-161">Each service package has a manifest file that describes the physical files and folders that are necessary to run that service, including binaries, configuration files, and read-only data for that service.</span></span> <span data-ttu-id="42ec8-162">Szolgáltatások és alkalmazások egymástól függetlenül rendszerverzióval ellátott, bővíthető.</span><span class="sxs-lookup"><span data-stu-id="42ec8-162">Services and applications are independently versioned and upgradable.</span></span>

<span data-ttu-id="42ec8-163">Szükség esetén az alkalmazás jegyzékfájlja szolgáltatásokat, automatikusan hozzáférést kapnak az alkalmazás egy példányát létrehozásakor is ismertetik.</span><span class="sxs-lookup"><span data-stu-id="42ec8-163">Optionally, the application manifest can describe services that are automatically provisioned when an instance of the application is created.</span></span> <span data-ttu-id="42ec8-164">Ezek az úgynevezett alapértelmezett szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="42ec8-164">These are called default services.</span></span> <span data-ttu-id="42ec8-165">Ebben az esetben az alkalmazásjegyzék is ismerteti, hogyan ezeket a szolgáltatásokat kell létrehozni, beleértve a szolgáltatás nevét, példányszámot, biztonsági vagy elkülönítési szabályzat és elhelyezési korlátozások.</span><span class="sxs-lookup"><span data-stu-id="42ec8-165">In this case, the application manifest also describes how these services should be created, including the service’s name, instance count, security/isolation policy, and placement constraints.</span></span>

> [!NOTE]
> <span data-ttu-id="42ec8-166">Ne használja az alapértelmezett szolgáltatások, ha szeretné szabályozni a szolgáltatások teljes élettartama.</span><span class="sxs-lookup"><span data-stu-id="42ec8-166">Avoid using default services if you want to control the life time of your services.</span></span> <span data-ttu-id="42ec8-167">Alapértelmezett szolgáltatások jönnek létre az alkalmazást a létrehozása, és futtassa az alkalmazást futtató is.</span><span class="sxs-lookup"><span data-stu-id="42ec8-167">Default services are created when the application is created, and run as long as the application is running.</span></span>

<span data-ttu-id="42ec8-168">További információ a Service Fabric ismertetése: [ezért ismerje meg a Service Fabric?](/azure/service-fabric/service-fabric-content-roadmap)</span><span class="sxs-lookup"><span data-stu-id="42ec8-168">For more information about understanding Service Fabric, see [So you want to learn about Service Fabric?](/azure/service-fabric/service-fabric-content-roadmap)</span></span>

### <a name="choose-an-application-to-service-packaging-model"></a><span data-ttu-id="42ec8-169">Az alkalmazás-to-service csomagolási modell kiválasztása</span><span class="sxs-lookup"><span data-stu-id="42ec8-169">Choose an application-to-service packaging model</span></span>

<span data-ttu-id="42ec8-170">Mikroszolgáltatások alaptétele, hogy egyes szolgáltatások egymástól függetlenül is telepíthető.</span><span class="sxs-lookup"><span data-stu-id="42ec8-170">A tenet of microservices is that each service can be independently deployed.</span></span> <span data-ttu-id="42ec8-171">A Service Fabricben Ha csoport összes szolgáltatását egyetlen alkalmazáscsomag be, és a egy szolgáltatás meghibásodik, a frissítéshez a teljes alkalmazás frissítés lekérdezi vonva, amely megakadályozza, hogy a másik szolgáltatás frissítését.</span><span class="sxs-lookup"><span data-stu-id="42ec8-171">In Service Fabric, if you group all of your services into a single application package, and one service fails to upgrade, the entire application upgrade gets rolled back, which prevents other service from being upgraded.</span></span>

<span data-ttu-id="42ec8-172">A mikroszolgáltatási architektúrákban, ezért azt javasoljuk, több alkalmazáscsomagot.</span><span class="sxs-lookup"><span data-stu-id="42ec8-172">For that reason, in a microservices architecture, we recommend using multiple application packages.</span></span> <span data-ttu-id="42ec8-173">Egy vagy több szorosan kapcsolódó szolgáltatási típus helyezzen egy egyetlen alkalmazás típusát.</span><span class="sxs-lookup"><span data-stu-id="42ec8-173">Put one or more closely related service types into a single application type.</span></span> <span data-ttu-id="42ec8-174">Ha a csapat felelős a szolgáltatások, amelyek ugyanannyi ideig futnak, és a egy időben, frissíteni kell az azonos életciklussal rendelkezik, vagy erőforrások, például a függőségeket vagy a konfiguráció megosztása, majd jelölje ezen szolgáltatások típusok ugyanabból.</span><span class="sxs-lookup"><span data-stu-id="42ec8-174">If your team is responsible for a set of services that run for the same duration and need to be updated at the same time, have the same lifecycle, or share resources such as dependencies or configuration, then place those services types in the same application type.</span></span>

### <a name="service-fabric-programming-models"></a><span data-ttu-id="42ec8-175">A Service Fabric programozási modelljei</span><span class="sxs-lookup"><span data-stu-id="42ec8-175">Service Fabric programming models</span></span>

<span data-ttu-id="42ec8-176">Mikroszolgáltatások Service Fabric-alkalmazások hozzáadásakor döntse el, hogy állapot vagy a magas rendelkezésre állású és megbízható tenni azok rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="42ec8-176">When you add a microservice to a Service Fabric application, decide whether it has state or data that needs to be made highly available and reliable.</span></span> <span data-ttu-id="42ec8-177">Ha igen, azt adatot tárolhat kívülről vagy az adatokat a szolgáltatás részeként tartalmazza?</span><span class="sxs-lookup"><span data-stu-id="42ec8-177">If so, can it store data externally or is the data contained as part of the service?</span></span> <span data-ttu-id="42ec8-178">Válassza ki a állapotmentes szolgáltatás, ha nem szeretne adatokat tárolni, vagy szeretné tárolni az adatokat a külső tárhelyen található.</span><span class="sxs-lookup"><span data-stu-id="42ec8-178">Choose a stateless service if you don’t need to store data or want to store data in external storage.</span></span> <span data-ttu-id="42ec8-179">Ha meg szeretné-e tartani az állapot vagy az adatok a szolgáltatás részeként (például kell, hogy az adatok a memória, a kód közelében található), vagy nem egy függőség egy külső tároló a működését, fontolja meg az állapotalapú szolgáltatás kiválasztása.</span><span class="sxs-lookup"><span data-stu-id="42ec8-179">If you want to maintain state or data as part of the service (for example, you need that data to reside in memory close to the code), or cannot tolerate a dependency on an external store, consider choosing a stateful service.</span></span>

<span data-ttu-id="42ec8-180">Ha rendelkezik meglévő kódot, amely a Service Fabric szolgáltatásban futtatja, futtathatja azt egy Vendég végrehajtható, mint egy tetszőleges végrehajtható fájl, amely szolgáltatásként fut, vagyis.</span><span class="sxs-lookup"><span data-stu-id="42ec8-180">If you have existing code that you want to run on Service Fabric, you can run it as a guest executable, which is an arbitrary executable that runs as a service.</span></span> <span data-ttu-id="42ec8-181">Másik lehetőségként csomagot készíthet a futtatható egy tároló, amely rendelkezik a telepítéshez szükséges összes függőséget.</span><span class="sxs-lookup"><span data-stu-id="42ec8-181">Alternatively, you can package the executable in a container that has all the dependencies needed for deployment.</span></span> <span data-ttu-id="42ec8-182">A Service Fabric állapotmentes szolgáltatások, tárolókkal és vendégalkalmazásokkal egyaránt modellek.</span><span class="sxs-lookup"><span data-stu-id="42ec8-182">Service Fabric models both containers and guest executables as stateless services.</span></span> <span data-ttu-id="42ec8-183">A modell kiválasztásával kapcsolatban, tekintse át [Service Fabric programozási modell áttekintése](/azure/service-fabric/service-fabric-choose-framework).</span><span class="sxs-lookup"><span data-stu-id="42ec8-183">For guidance about choosing a model, see [Service Fabric programming model overview](/azure/service-fabric/service-fabric-choose-framework).</span></span>

<span data-ttu-id="42ec8-184">Futtatható vendégalkalmazás, az Ön felelős a környezet, amelyben fut. karbantartása.</span><span class="sxs-lookup"><span data-stu-id="42ec8-184">With guest executables, you are responsible of maintaining the environment in which it runs.</span></span> <span data-ttu-id="42ec8-185">Tegyük fel, hogy egy Vendég végrehajtható fájl futtatásához szükséges Python.</span><span class="sxs-lookup"><span data-stu-id="42ec8-185">For example, suppose that a guest executable requires Python.</span></span> <span data-ttu-id="42ec8-186">Ha a végrehajtható fájl nem önálló, győződjön meg arról, hogy a környezet előzetesen már telepítve-e a szükséges Python-verzió van szükség.</span><span class="sxs-lookup"><span data-stu-id="42ec8-186">If the executable is not self-contained, you need to make sure that the required version of Python is pre-installed in the environment.</span></span> <span data-ttu-id="42ec8-187">A Service Fabric nem felügyeli a környezetben.</span><span class="sxs-lookup"><span data-stu-id="42ec8-187">Service Fabric does not manage the environment.</span></span> <span data-ttu-id="42ec8-188">Az Azure kínál a környezetet, beleértve az egyéni virtuálisgép-rendszerképek és -bővítmények többféle módszerét.</span><span class="sxs-lookup"><span data-stu-id="42ec8-188">Azure offers multiple mechanisms to set up the environment, including custom virtual machine images and extensions.</span></span>

<span data-ttu-id="42ec8-189">További információkért lásd:</span><span class="sxs-lookup"><span data-stu-id="42ec8-189">For more information, see:</span></span>

- [<span data-ttu-id="42ec8-190">Alkalmazás becsomagolása</span><span class="sxs-lookup"><span data-stu-id="42ec8-190">Package an application</span></span>](/azure/service-fabric/service-fabric-package-apps)
- [<span data-ttu-id="42ec8-191">Csomagolása és üzembe helyezése egy meglévő végrehajtható fájlt a Service Fabric</span><span class="sxs-lookup"><span data-stu-id="42ec8-191">Package and deploy an existing executable to Service Fabric</span></span>](/azure/service-fabric/service-fabric-deploy-existing-app)

### <a name="api-gateway"></a><span data-ttu-id="42ec8-192">API-átjáró</span><span class="sxs-lookup"><span data-stu-id="42ec8-192">API gateway</span></span>

<span data-ttu-id="42ec8-193">Egy [API-átjáró](../..//microservices/design/gateway.md) (bejövő) külső ügyfelek és a mikroszolgáltatások között helyezkedik el.</span><span class="sxs-lookup"><span data-stu-id="42ec8-193">An [API gateway](../..//microservices/design/gateway.md) (ingress) sits between external clients and the microservices.</span></span> <span data-ttu-id="42ec8-194">Fordított proxy, mikroszolgáltatás-alapú ügyfelek útválasztási kérelmeit funkcionál.</span><span class="sxs-lookup"><span data-stu-id="42ec8-194">It acts as a reverse proxy, routing requests from clients to microservices.</span></span> <span data-ttu-id="42ec8-195">Emellett végrehajthatnak, például a hitelesítést, az SSL-lezárást és a sebességkorlátozás különböző általános feladatok.</span><span class="sxs-lookup"><span data-stu-id="42ec8-195">It may also perform various cross-cutting tasks such as authentication, SSL termination, and rate limiting.</span></span>

<span data-ttu-id="42ec8-196">Az Azure API Management a legtöbb esetben ajánlott, de [Træfik](https://docs.traefik.io/) népszerű nyílt forráskódú jelent.</span><span class="sxs-lookup"><span data-stu-id="42ec8-196">Azure API Management is recommended for most scenarios, but [Træfik](https://docs.traefik.io/) is a popular open-source alternative.</span></span> <span data-ttu-id="42ec8-197">Mindkét technológia lehetőségek integrálva vannak a Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="42ec8-197">Both technology options are integrated with Service Fabric.</span></span>

- <span data-ttu-id="42ec8-198">Az API Management tesz közzé egy nyilvános IP-cím és útvonalak forgalmat az Ön felhőszolgáltatásainak.</span><span class="sxs-lookup"><span data-stu-id="42ec8-198">API Management exposes a public IP address and routes traffic to your services.</span></span> <span data-ttu-id="42ec8-199">A Service Fabric-fürt ugyanazon a virtuális hálózaton a kijelölt alhálózatot fusson.</span><span class="sxs-lookup"><span data-stu-id="42ec8-199">It runs in a dedicated subnet in the same virtual network as the Service Fabric cluster.</span></span>  <span data-ttu-id="42ec8-200">férhetnek hozzá a szolgáltatásokhoz a csomópont típusa, amely ki van téve a magánhálózati IP-címmel a terheléselosztón keresztül.</span><span class="sxs-lookup"><span data-stu-id="42ec8-200">can access services in a node type that is exposed through a load balancer with a private IP address.</span></span> <span data-ttu-id="42ec8-201">Ez a beállítás csak az API Management fejlesztői és a prémium szintű csomagban érhető el.</span><span class="sxs-lookup"><span data-stu-id="42ec8-201">This option is only available in the Premium and Developer tiers of API Management.</span></span> <span data-ttu-id="42ec8-202">Az éles számítási feladatokhoz a prémium szint használja.</span><span class="sxs-lookup"><span data-stu-id="42ec8-202">For production workloads, use the Premium tier.</span></span> <span data-ttu-id="42ec8-203">Díjszabási információk leírt [az API Management díjszabása](https://azure.microsoft.com/pricing/details/api-management/).</span><span class="sxs-lookup"><span data-stu-id="42ec8-203">Pricing information is described in [API Management pricing](https://azure.microsoft.com/pricing/details/api-management/).</span></span> <span data-ttu-id="42ec8-204">További információkért tekintse meg a Service Fabric és [Azure API Management áttekintése](/azure/service-fabric/service-fabric-api-management-overview).</span><span class="sxs-lookup"><span data-stu-id="42ec8-204">For more information, see Service Fabric with [Azure API Management overview](/azure/service-fabric/service-fabric-api-management-overview).</span></span>
- <span data-ttu-id="42ec8-205">Træfik útválasztást, nyomon követését, naplók és mérőszámok funkciókat támogatja.</span><span class="sxs-lookup"><span data-stu-id="42ec8-205">Træfik supports features such as routing, tracing, logs, and metrics.</span></span> <span data-ttu-id="42ec8-206">Træfik állapotmentes szolgáltatás a Service Fabric-fürtben fut.</span><span class="sxs-lookup"><span data-stu-id="42ec8-206">Træfik runs as a stateless service in the Service Fabric cluster.</span></span> <span data-ttu-id="42ec8-207">Service versioning az Útválasztás nem használható.</span><span class="sxs-lookup"><span data-stu-id="42ec8-207">Service versioning can be supported through routing.</span></span> <span data-ttu-id="42ec8-208">A szolgáltatás bejövő forgalom, mint a fürtben a fordított proxy Træfik beállítása további információkért lásd: [Azure Service Fabric-szolgáltató](https://docs.traefik.io/configuration/backends/servicefabric/).</span><span class="sxs-lookup"><span data-stu-id="42ec8-208">For information on how to set up Træfik for service ingress and as the reverse proxy within the cluster, see [Azure Service Fabric Provider](https://docs.traefik.io/configuration/backends/servicefabric/).</span></span> <span data-ttu-id="42ec8-209">A Service Fabric Træfik használatával kapcsolatos további információkért lásd: [intelligens útválasztás a Service Fabric és Træfik](https://blogs.msdn.microsoft.com/azureservicefabric/2018/04/05/intelligent-routing-on-service-fabric-with-traefik/) (blogbejegyzés).</span><span class="sxs-lookup"><span data-stu-id="42ec8-209">For more information about using Træfik with Service Fabric, see [Intelligent routing on Service Fabric with Træfik](https://blogs.msdn.microsoft.com/azureservicefabric/2018/04/05/intelligent-routing-on-service-fabric-with-traefik/) (blog post).</span></span>

<span data-ttu-id="42ec8-210">Más API-t Managementment lehetőségek a következők [Azure Application Gateway](/azure/application-gateway/) és [Azure bejárati ajtajának](/azure/frontdoor/).</span><span class="sxs-lookup"><span data-stu-id="42ec8-210">Other API Managementment options include [Azure Application Gateway](/azure/application-gateway/) and [Azure Front Door](/azure/frontdoor/).</span></span> <span data-ttu-id="42ec8-211">Ezek a szolgáltatások a feladatok végrehajtását, mint az útválasztást, az SSL-lezárást és a tűzfal az API Management szolgáltatással együtt is használható.</span><span class="sxs-lookup"><span data-stu-id="42ec8-211">These services can be used in conjunction with API Management to perform tasks such as routing, SSL termination, and firewall.</span></span>

### <a name="interservice-communication"></a><span data-ttu-id="42ec8-212">Szolgáltatások közötti kommunikáció</span><span class="sxs-lookup"><span data-stu-id="42ec8-212">Interservice communication</span></span>

<span data-ttu-id="42ec8-213">Szolgáltatások közötti kommunikáció támogatására, fontolja meg a HTTP-n keresztül a kommunikációs protokollként.</span><span class="sxs-lookup"><span data-stu-id="42ec8-213">To facilitate service-to-service communication, consider using HTTP as the communication protocol.</span></span> <span data-ttu-id="42ec8-214">A legtöbb forgatókönyvhöz kiindulópontként, javasoljuk a [a fordított proxy szolgáltatás](/azure/service-fabric/service-fabric-reverseproxy) szolgáltatásfelderítési.</span><span class="sxs-lookup"><span data-stu-id="42ec8-214">As a baseline for most scenarios, we recommend using [the reverse proxy service](/azure/service-fabric/service-fabric-reverseproxy) for service discovery.</span></span>

- <span data-ttu-id="42ec8-215">Kommunikációs protokollt.</span><span class="sxs-lookup"><span data-stu-id="42ec8-215">Communication protocol.</span></span> <span data-ttu-id="42ec8-216">Mikroszolgáltatási architektúrában a szolgáltatások kell egymással kommunikálni minimális kapcsoló futásidőben.</span><span class="sxs-lookup"><span data-stu-id="42ec8-216">In a microservices architecture, services need to communicate with each other with minimum coupling at runtime.</span></span> <span data-ttu-id="42ec8-217">Nyelvfüggetlen kommunikációhoz HTTP egy iparági szabványnak megfelelő az eszköz-és HTTP-kiszolgáló összes Service Fabric által támogatott különböző nyelveken elérhető számos.</span><span class="sxs-lookup"><span data-stu-id="42ec8-217">To enable language-agnostic communication, HTTP is an industry-standard with a wide range of tools and HTTP servers that are available in different languages, all supported by Service Fabric.</span></span> <span data-ttu-id="42ec8-218">Ezért a HTTP helyett a Service Fabric beépített szolgáltatás távelérésének lehetővé tétele ajánlott a legtöbb számítási feladatokhoz.</span><span class="sxs-lookup"><span data-stu-id="42ec8-218">Therefore, using HTTP instead of Service Fabric’s built in service remoting is recommended for most workloads.</span></span>
- <span data-ttu-id="42ec8-219">Szolgáltatás felderítése.</span><span class="sxs-lookup"><span data-stu-id="42ec8-219">Service discovery.</span></span> <span data-ttu-id="42ec8-220">Fürtön belüli más szolgáltatásokkal kommunikálni, egy ügyfél szolgáltatáshoz szükség van, oldja fel a célként megadott szolgáltatás jelenlegi helyet.</span><span class="sxs-lookup"><span data-stu-id="42ec8-220">To communicate with other services within a cluster, a client service needs to resolve the target service’s current location.</span></span> <span data-ttu-id="42ec8-221">A Service Fabric services helyezheti át csomópontokra, így dinamikusan változik, hogy a Szolgáltatásvégpontok között.</span><span class="sxs-lookup"><span data-stu-id="42ec8-221">In Service Fabric, services can move between nodes, causing the service endpoints to change dynamically.</span></span> <span data-ttu-id="42ec8-222">Kapcsolatok végpontok elavult elkerülése érdekében a Service Fabric elnevezési szolgáltatásban használható lekérni frissített végpont-információkat.</span><span class="sxs-lookup"><span data-stu-id="42ec8-222">To avoid connections to stale endpoints, Service Fabric’s Naming Service can be used to retrieve updated endpoint information.</span></span> <span data-ttu-id="42ec8-223">Azonban a Service Fabric is biztosít beépített [fordított proxy szolgáltatás](/azure/service-fabric/service-fabric-reverseproxy) , amely kivonatolja az elnevezési szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="42ec8-223">However, Service Fabric also provides a built-in [reverse proxy service](/azure/service-fabric/service-fabric-reverseproxy) that abstracts the naming service.</span></span> <span data-ttu-id="42ec8-224">Ez a beállítás használata egyszerűbb és egyszerűbb kódot.</span><span class="sxs-lookup"><span data-stu-id="42ec8-224">This option is easier to use and results in simpler code.</span></span>

<span data-ttu-id="42ec8-225">A szolgáltatások közötti kommunikációt eredményezhet más lehetőségek a következők,</span><span class="sxs-lookup"><span data-stu-id="42ec8-225">Other options for interservice communication include,</span></span>

- <span data-ttu-id="42ec8-226">[Træfik](https://docs.traefik.io/) speciális útválasztást.</span><span class="sxs-lookup"><span data-stu-id="42ec8-226">[Træfik](https://docs.traefik.io/) for advanced routing.</span></span>
- <span data-ttu-id="42ec8-227">[DNS](/azure/dns/) kompatibilitási forgatókönyvekhez, ahol a szolgáltatás DNS használatához vár.</span><span class="sxs-lookup"><span data-stu-id="42ec8-227">[DNS](/azure/dns/) for compatibility scenarios where a service expects to use DNS.</span></span>
- <span data-ttu-id="42ec8-228">[ServicePartitionClient&lt;TCommunicationClient&gt; ](/dotnet/api/microsoft.servicefabric.services.communication.client.servicepartitionclient-1?view=azure-dotnet) osztály.</span><span class="sxs-lookup"><span data-stu-id="42ec8-228">[ServicePartitionClient&lt;TCommunicationClient&gt;](/dotnet/api/microsoft.servicefabric.services.communication.client.servicepartitionclient-1?view=azure-dotnet) class.</span></span> <span data-ttu-id="42ec8-229">Az osztály a Szolgáltatásvégpontok gyorsítótárazza, és engedélyezheti a jobb teljesítmény érdekében, közvetlenül a közvetítők és egyéni protokollokat nélkül szolgáltatások közötti hívások mennek.</span><span class="sxs-lookup"><span data-stu-id="42ec8-229">The class caches service endpoints and can enable better performance, as calls go directly between services without intermediaries or custom protocols.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="42ec8-230">Méretezési szempontok</span><span class="sxs-lookup"><span data-stu-id="42ec8-230">Scalability considerations</span></span>

<span data-ttu-id="42ec8-231">Ezek az entitások fürt méretezése a Service Fabric támogatja:</span><span class="sxs-lookup"><span data-stu-id="42ec8-231">Service Fabric supports scaling these cluster entities:</span></span>

- <span data-ttu-id="42ec8-232">Méretezés az egyes csomóponttípusok csomópontok számát.</span><span class="sxs-lookup"><span data-stu-id="42ec8-232">Scaling the number of nodes for each node type.</span></span>
- <span data-ttu-id="42ec8-233">Szolgáltatások méretezése.</span><span class="sxs-lookup"><span data-stu-id="42ec8-233">Scaling services.</span></span>

<span data-ttu-id="42ec8-234">Ez a szakasz az automatikus skálázás összpontosít.</span><span class="sxs-lookup"><span data-stu-id="42ec8-234">This section is focused on autoscaling.</span></span> <span data-ttu-id="42ec8-235">Ha szeretné, manuális méretezése helyzetekben, ahol szükséges.</span><span class="sxs-lookup"><span data-stu-id="42ec8-235">You can choose to manually scale in situations where appropriate.</span></span> <span data-ttu-id="42ec8-236">Ha például egy ahol manuális beavatkozásra van szükség, a példányok száma helyzetben.</span><span class="sxs-lookup"><span data-stu-id="42ec8-236">For example, a situation where manual intervention is required to set the number of instances.</span></span>  

### <a name="initial-cluster-configuration-for-scalability"></a><span data-ttu-id="42ec8-237">A méretezhetőség érdekében a kezdeti fürtkonfigurációtól</span><span class="sxs-lookup"><span data-stu-id="42ec8-237">Initial cluster configuration for scalability</span></span>

<span data-ttu-id="42ec8-238">Service Fabric-fürt létrehozásakor építhet ki a csomóponttípusok a biztonság és méretezhetőségi igényei alapján.</span><span class="sxs-lookup"><span data-stu-id="42ec8-238">When you create a Service Fabric cluster, provision the node types based on your security and scalability needs.</span></span> <span data-ttu-id="42ec8-239">Mindegyik csomóponttípus egymástól függetlenül skálázhatók, és a le van képezve egy virtuálisgép-méretezési csoportot.</span><span class="sxs-lookup"><span data-stu-id="42ec8-239">Each node type is mapped to a virtual machine scale set and can be scaled independently.</span></span>

- <span data-ttu-id="42ec8-240">Hozzon létre egy csomópont típusa, amelyekhez különböző skálázhatósági vagy erőforrás-igényű szolgáltatásokat mindegyik csoportjához.</span><span class="sxs-lookup"><span data-stu-id="42ec8-240">Create a node type for each group of services that have different scalability or resource requirements.</span></span> <span data-ttu-id="42ec8-241">Első lépésként kiépítése a csomópont típusa (válik, amely a [elsődleges csomóponttípus](/azure/service-fabric/service-fabric-cluster-capacity#primary-node-type)) a Service Fabric-szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="42ec8-241">Start by provisioning a node type (which becomes the [primary node type](/azure/service-fabric/service-fabric-cluster-capacity#primary-node-type)) for the Service Fabric system services.</span></span> <span data-ttu-id="42ec8-242">Ezután hozzon létre külön csomóponttípusok a nyilvános vagy előtér-szolgáltatások futtatásához, és szükség esetén a háttérrendszer és a magán- vagy elkülönített szolgáltatások más csomóponttípusok.</span><span class="sxs-lookup"><span data-stu-id="42ec8-242">Then create separate node types to run your public or front-end services, and other node types as necessary for your backend and private or isolated services.</span></span> <span data-ttu-id="42ec8-243">Adja meg [elhelyezési korlátozások](/azure/service-fabric/service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies) úgy, hogy a szolgáltatások csak az importálni kívánt csomóponttípusok vannak telepítve.</span><span class="sxs-lookup"><span data-stu-id="42ec8-243">Specify [placement constraints](/azure/service-fabric/service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies) so that the services are only deployed to the intended node types.</span></span>
- <span data-ttu-id="42ec8-244">Adja meg az egyes csomóponttípusok tartóssági szint.</span><span class="sxs-lookup"><span data-stu-id="42ec8-244">Specify the durability tier for each node type.</span></span> <span data-ttu-id="42ec8-245">A tartóssági szint arra, hogy a Service Fabric befolyásolhatja a virtual machine scale set-frissítések és karbantartási műveleteket az jelöli.</span><span class="sxs-lookup"><span data-stu-id="42ec8-245">The durability tier represents the ability for Service Fabric to influence virtual machine scale set updates and maintenance operations.</span></span> <span data-ttu-id="42ec8-246">Az éles számítási feladatokhoz válassza ki a Silver és magasabb szintű tartóssági szint.</span><span class="sxs-lookup"><span data-stu-id="42ec8-246">For production workloads, choose the Silver or higher durability tier.</span></span> <span data-ttu-id="42ec8-247">Az egyes csomagok kapcsolatos információkért lásd: [a fürt tartóssági jellemzőit](/azure/service-fabric/service-fabric-cluster-capacity#the-durability-characteristics-of-the-cluster).</span><span class="sxs-lookup"><span data-stu-id="42ec8-247">For information about each tier, see [The durability characteristics of the cluster](/azure/service-fabric/service-fabric-cluster-capacity#the-durability-characteristics-of-the-cluster).</span></span>
- <span data-ttu-id="42ec8-248">A bronz tartóssági szint használata esetén a bizonyos műveletekhez szükséges manuális lépéseket.</span><span class="sxs-lookup"><span data-stu-id="42ec8-248">If using the Bronze durability tier, certain operations require manual steps.</span></span>  <span data-ttu-id="42ec8-249">A csomóponttípusok a bronz tartóssági szint további lépésekre szükség a méretezés során.</span><span class="sxs-lookup"><span data-stu-id="42ec8-249">For node types with Bronze durability tier additional steps are required during scale in.</span></span> <span data-ttu-id="42ec8-250">Műveletek méretezéssel kapcsolatos további információkért lásd: [Ez az útmutató](/azure/service-fabric/service-fabric-cluster-scale-up-down).</span><span class="sxs-lookup"><span data-stu-id="42ec8-250">For more information on scaling operations, see [this guide](/azure/service-fabric/service-fabric-cluster-scale-up-down).</span></span>

### <a name="scaling-nodes"></a><span data-ttu-id="42ec8-251">Csomópontok skálázása</span><span class="sxs-lookup"><span data-stu-id="42ec8-251">Scaling nodes</span></span>

<span data-ttu-id="42ec8-252">A Service Fabric automatikus skálázás támogatja a horizontális leskálázási és a horizontális felskálázás. Mindegyik csomóponttípus egymástól függetlenül konfigurálhatók az automatikus skálázáshoz.</span><span class="sxs-lookup"><span data-stu-id="42ec8-252">Service Fabric supports autoscaling for scale-in and scale-out. Each node type can be configured for autoscaling independently.</span></span>

<span data-ttu-id="42ec8-253">Mindegyik csomóponttípus legfeljebb 100 csomópont.</span><span class="sxs-lookup"><span data-stu-id="42ec8-253">Each node type can have a maximum of 100 nodes.</span></span> <span data-ttu-id="42ec8-254">Kisebb meg csomópontok kezdődhet, és adjon hozzá több csomópontot a betöltés függően.</span><span class="sxs-lookup"><span data-stu-id="42ec8-254">Start with a smaller set of nodes and add more nodes depending on your load.</span></span> <span data-ttu-id="42ec8-255">Ha több mint 100 csomópont a csomópont típusa van szüksége, szüksége lesz a további csomóponttípusok hozzáadása.</span><span class="sxs-lookup"><span data-stu-id="42ec8-255">If you require more than 100 nodes in a node type, you will need to add more node types.</span></span> <span data-ttu-id="42ec8-256">További információkért lásd: [tervezési megfontolások a Service Fabric-fürt kapacitása](/azure/service-fabric/service-fabric-cluster-capacity).</span><span class="sxs-lookup"><span data-stu-id="42ec8-256">For details, see [Service Fabric cluster capacity planning considerations](/azure/service-fabric/service-fabric-cluster-capacity).</span></span> <span data-ttu-id="42ec8-257">Egy virtuálisgép-méretezési csoportot nem azonnal méretezhető, ezért érdemes faktor, az automatikus skálázási szabályok beállítása során.</span><span class="sxs-lookup"><span data-stu-id="42ec8-257">A virtual machine scale set does not scale instantaneously, so consider that factor when you set up autoscale rules.</span></span>

<span data-ttu-id="42ec8-258">Támogatja az automatikus leskálázási, konfigurálnia kell a Silver vagy Gold tartóssági szint typ uzlu.</span><span class="sxs-lookup"><span data-stu-id="42ec8-258">To support automatic scale-in, configure the node type to have the Silver or Gold durability tier.</span></span> <span data-ttu-id="42ec8-259">Ez teszi arról, hogy a skálázás késik a Service Fabric-ig befejezett átvitel, szolgáltatások és, hogy a virtuálisgép-méretezési csoportok tájékoztatja a Service Fabric, hogy a virtuális gépek lesznek eltávolítva, nem csak le ideiglenesen.</span><span class="sxs-lookup"><span data-stu-id="42ec8-259">This makes sure that scaling in is delayed until Service Fabric is finished relocating services and that the virtual machine scale sets inform Service Fabric that the VMs are removed, not just down temporarily.</span></span>

<span data-ttu-id="42ec8-260">A csomópont/fürt szintjén méretezésével kapcsolatos további információkért lásd: [méretezése az Azure Service Fabric-fürtök](/azure/service-fabric/service-fabric-cluster-scaling).</span><span class="sxs-lookup"><span data-stu-id="42ec8-260">For more information about scaling at the node/cluster level, see [Scaling Azure Service Fabric clusters](/azure/service-fabric/service-fabric-cluster-scaling).</span></span>

### <a name="scaling-services"></a><span data-ttu-id="42ec8-261">Szolgáltatások méretezése</span><span class="sxs-lookup"><span data-stu-id="42ec8-261">Scaling services</span></span>

<span data-ttu-id="42ec8-262">Állapot nélküli és állapotalapú szolgáltatások többféle alkalmazni skálázás.</span><span class="sxs-lookup"><span data-stu-id="42ec8-262">Stateless and stateful services apply different approaches to scaling.</span></span>

#### <a name="autoscaling-for-stateless-services"></a><span data-ttu-id="42ec8-263">Az automatikus skálázás az állapotmentes szolgáltatások esetében</span><span class="sxs-lookup"><span data-stu-id="42ec8-263">Autoscaling for stateless services</span></span>

- <span data-ttu-id="42ec8-264">Az átlagos partíció terhelés eseményindítót használja.</span><span class="sxs-lookup"><span data-stu-id="42ec8-264">Use the average partition load trigger.</span></span> <span data-ttu-id="42ec8-265">Ez az eseményindító határozza meg, hogy mikor van ellátva a szolgáltatás vagy a méretezési házirendben megadott betöltése küszöbérték alapján.</span><span class="sxs-lookup"><span data-stu-id="42ec8-265">This trigger determines when the service is scaled in or out, based on a load threshold value specified in the scaling policy.</span></span> <span data-ttu-id="42ec8-266">Azt is beállíthatja, hogy milyen gyakran az eseményindító be van jelölve.</span><span class="sxs-lookup"><span data-stu-id="42ec8-266">You can also set how often the trigger is checked.</span></span> <span data-ttu-id="42ec8-267">Lásd: [partíció átlagos terhelés eseményindító példány-alapú méretezés](/azure/service-fabric/service-fabric-cluster-resource-manager-autoscaling#average-partition-load-trigger-with-instance-based-scaling).</span><span class="sxs-lookup"><span data-stu-id="42ec8-267">See [Average partition load trigger with instance-based scaling](/azure/service-fabric/service-fabric-cluster-resource-manager-autoscaling#average-partition-load-trigger-with-instance-based-scaling).</span></span> <span data-ttu-id="42ec8-268">Ez lehetővé teszi, hogy az elérhető csomópontok számát a vertikális felskálázás.</span><span class="sxs-lookup"><span data-stu-id="42ec8-268">This allows you to scale up to the number of available nodes.</span></span>
- <span data-ttu-id="42ec8-269">Állítsa be **InstanceCount** -1 értéket a szolgáltatásjegyzékben, amely tájékoztatja a Service Fabric a szolgáltatás egy példányának futtatását minden csomóponton.</span><span class="sxs-lookup"><span data-stu-id="42ec8-269">Set **InstanceCount** to -1 in the service manifest, which tells Service Fabric to run an instance of the service on every node.</span></span> <span data-ttu-id="42ec8-270">Ez a megközelítés lehetővé teszi, hogy a szolgáltatást, hogy a fürt skálázását követve rugalmasan méretezhető dinamikusan méretezhető.</span><span class="sxs-lookup"><span data-stu-id="42ec8-270">This approach enables the service to scale dynamically as the cluster scales.</span></span> <span data-ttu-id="42ec8-271">A fürt módosításait a csomópontok számát, mint a Service Fabric automatikusan hoz létre, és törli a szolgáltatáspéldányok megfelelően.</span><span class="sxs-lookup"><span data-stu-id="42ec8-271">As the number of nodes in the cluster changes, Service Fabric automatically creates and deletes service instances to match.</span></span>

> [!NOTE]
> <span data-ttu-id="42ec8-272">Bizonyos esetekben előfordulhat, hogy szeretné manuálisan méretezni a szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="42ec8-272">In some cases, you might want to manually scale your service.</span></span>  <span data-ttu-id="42ec8-273">Például ha egy szolgáltatás, amely beolvassa az Event Hubsból, érdemes egy dedikált példány minden egyes esemény hub-partícióról olvas, a partíció való egyidejű hozzáférés elkerülése érdekében.</span><span class="sxs-lookup"><span data-stu-id="42ec8-273">For example, if you have a service that reads from Event Hubs, you might want a dedicated instance to read from each event hub partition, to avoid concurrent access to the partition.</span></span>  

#### <a name="scaling-for-stateful-services"></a><span data-ttu-id="42ec8-274">Az állapotalapú szolgáltatások méretezése</span><span class="sxs-lookup"><span data-stu-id="42ec8-274">Scaling for stateful services</span></span>

<span data-ttu-id="42ec8-275">Egy állapotalapú szolgáltatás méretezése vezérli a partíciók száma, mérete mindegyik partíció, és a egy adott gépen futó partíciók/replika száma.</span><span class="sxs-lookup"><span data-stu-id="42ec8-275">For a stateful service, scaling is controlled by the number of partitions, the size of each partition, and the number of partitions/replicas running on a given machine.</span></span>

- <span data-ttu-id="42ec8-276">A particionált szolgáltatások létrehozásakor, célszerű megadnia, hogy nagy számú kis méretű partíciókat.</span><span class="sxs-lookup"><span data-stu-id="42ec8-276">If you are creating partitioned services, we recommend having a high number of partitions that are small in size.</span></span> <span data-ttu-id="42ec8-277">Ha további csomópontokat ad hozzá, a Service Fabric alapértelmezés szerint osztja el a munkaterhelés összevonásához az új gépeket.</span><span class="sxs-lookup"><span data-stu-id="42ec8-277">If more nodes are added, Service Fabric distributes the workloads onto the new machines by default.</span></span> <span data-ttu-id="42ec8-278">Például ha 5 csomópontot és 10 partíciók, alapértelmezés szerint a Service Fabric fogja elhelyezni két elsődleges replika minden egyes csomóponton.</span><span class="sxs-lookup"><span data-stu-id="42ec8-278">For example, if there are 5 nodes and 10 partitions, by default Service Fabric will place two primary replicas on each node.</span></span> <span data-ttu-id="42ec8-279">Ha a csomópontok horizontális felskálázása, nagyobb teljesítményt érhet el, mert a munkahelyi egyenlően elosztva a további erőforrások.</span><span class="sxs-lookup"><span data-stu-id="42ec8-279">If you scale out the nodes, you can achieve greater performance, because the work is evenly distributed across more resources.</span></span> <span data-ttu-id="42ec8-280">Ez a stratégia előnyeit forgatókönyvekkel kapcsolatos további információkért lásd: [méretezése Service Fabric](/azure/service-fabric/service-fabric-concepts-scalability).</span><span class="sxs-lookup"><span data-stu-id="42ec8-280">For information about scenarios that take advantage of this strategy, see [Scaling in Service Fabric](/azure/service-fabric/service-fabric-concepts-scalability).</span></span>
- <span data-ttu-id="42ec8-281">Partíciók hozzáadásával vagy eltávolításával nem is támogatott.</span><span class="sxs-lookup"><span data-stu-id="42ec8-281">Adding or removing partitions is not well supported.</span></span> <span data-ttu-id="42ec8-282">A gyakran használt egy másik lehetőség méretezés dinamikusan létrehozása vagy törlése a szolgáltatások vagy a teljes alkalmazáspéldányok.</span><span class="sxs-lookup"><span data-stu-id="42ec8-282">Another option commonly used to scale is to dynamically create or delete services or whole application instances.</span></span> <span data-ttu-id="42ec8-283">Egy példa a minta leírt [méretezése a létrehozásával, vagy új elnevezett szolgáltatások eltávolítása](/azure/service-fabric/service-fabric-concepts-scalability#scaling-by-creating-or-removing-new-named-services).</span><span class="sxs-lookup"><span data-stu-id="42ec8-283">An example of that pattern is described in [Scaling by creating or removing new named services](/azure/service-fabric/service-fabric-concepts-scalability#scaling-by-creating-or-removing-new-named-services).</span></span>

<span data-ttu-id="42ec8-284">További információkért lásd:</span><span class="sxs-lookup"><span data-stu-id="42ec8-284">For more information, see:</span></span>

- [<span data-ttu-id="42ec8-285">Méretezheti a Service Fabric-fürt a- vagy leskálázása automatikus skálázási szabályok használatával vagy manuálisan</span><span class="sxs-lookup"><span data-stu-id="42ec8-285">Scale a Service Fabric cluster in or out using autoscale rules or manually</span></span>](/azure/service-fabric/service-fabric-cluster-scale-up-down)
- [<span data-ttu-id="42ec8-286">A Service Fabric-fürt programozott skálázása</span><span class="sxs-lookup"><span data-stu-id="42ec8-286">Scale a Service Fabric cluster programmatically</span></span>](/azure/service-fabric/service-fabric-cluster-programmatic-scaling)
- [<span data-ttu-id="42ec8-287">Egy virtuálisgép-méretezési csoportban hozzáadásával ki a Service Fabric-fürt méretezése</span><span class="sxs-lookup"><span data-stu-id="42ec8-287">Scale a Service Fabric cluster out by adding a Virtual Machine Scale Set</span></span>](/azure/service-fabric/virtual-machine-scale-set-scale-node-type-scale-out)

### <a name="using-metrics-to-balance-load"></a><span data-ttu-id="42ec8-288">Mérőszámok segítségével a terhelés kiegyenlítése érdekében</span><span class="sxs-lookup"><span data-stu-id="42ec8-288">Using metrics to balance load</span></span>

<span data-ttu-id="42ec8-289">Attól függően, hogyan tervezi meg a partíció lehetséges, hogy a többinél nagyobb forgalmat replikákkal rendelkező csomópontok.</span><span class="sxs-lookup"><span data-stu-id="42ec8-289">Depending on how you design the partition, you might have nodes with replicas that get more traffic than others.</span></span> <span data-ttu-id="42ec8-290">Ezen helyzet elkerülése érdekében particionálása a szolgáltatás állapotát, hogy az összes partíció között oszlanak meg azt.</span><span class="sxs-lookup"><span data-stu-id="42ec8-290">To avoid this situation, partition the service state so that it is distributed across all partitions.</span></span> <span data-ttu-id="42ec8-291">A particionálási séma egy megfelelő kivonatoló algoritmust használnak.</span><span class="sxs-lookup"><span data-stu-id="42ec8-291">Use the range partitioning scheme with a good hash algorithm.</span></span> <span data-ttu-id="42ec8-292">Lásd: [– első lépések a particionálás](/azure/service-fabric/service-fabric-concepts-partitioning#get-started-with-partitioning).</span><span class="sxs-lookup"><span data-stu-id="42ec8-292">See [Get started with partitioning](/azure/service-fabric/service-fabric-concepts-partitioning#get-started-with-partitioning).</span></span>

<span data-ttu-id="42ec8-293">A Service Fabric metrikák használatával tudja, hogyan helyezze el, és a egy fürtön belüli szolgáltatások elosztása.</span><span class="sxs-lookup"><span data-stu-id="42ec8-293">Service Fabric uses metrics to know how to place and balance services within a cluster.</span></span> <span data-ttu-id="42ec8-294">Megadhatja, hogy a szolgáltatás létrehozásakor szolgáltatáshoz társított minden egyes metrika alapértelmezett terhelést.</span><span class="sxs-lookup"><span data-stu-id="42ec8-294">You can specify a default load for each metric associated with a service when that service is created.</span></span> <span data-ttu-id="42ec8-295">A Service Fabric majd figyelembe veszi a terhelés, ha a szolgáltatás elhelyezése, illetve minden alkalommal, amikor a szolgáltatást (például frissítések) során áthelyezése a fürt csomópontjainak megpróbálni kell.</span><span class="sxs-lookup"><span data-stu-id="42ec8-295">Service Fabric then takes that load into account when placing the service, or whenever the service needs to move (for example, during upgrades) to try to balance the nodes in the cluster.</span></span>

<span data-ttu-id="42ec8-296">A szolgáltatás eredetileg megadott alapértelmezett terhelés élettartama során a szolgáltatás nem változik.</span><span class="sxs-lookup"><span data-stu-id="42ec8-296">The initially specified default load for a service will not change over the lifetime of the service.</span></span> <span data-ttu-id="42ec8-297">Egy adott szolgáltatáshoz változó metrikákat rögzítheti, azt javasoljuk, hogy a szolgáltatás figyelése, és jelentést készít a terhelést dinamikusan.</span><span class="sxs-lookup"><span data-stu-id="42ec8-297">To capture changing metrics for a given service, we recommend that you monitor your service and then report the load dynamically.</span></span> <span data-ttu-id="42ec8-298">Ez lehetővé teszi, hogy módosítsa a foglalási egy adott időben a jelentett terhelés alapján a Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="42ec8-298">This allows Service Fabric to adjust the allocation based on the reported load at a given time.</span></span> <span data-ttu-id="42ec8-299">Használja a [IServicePartition.ReportLoad](/dotnet/api/system.fabric.iservicepartition.reportload?view=azure-dotnet) metódus egyéni metrikákat jelenti.</span><span class="sxs-lookup"><span data-stu-id="42ec8-299">Use the [IServicePartition.ReportLoad](/dotnet/api/system.fabric.iservicepartition.reportload?view=azure-dotnet) method to report custom metrics.</span></span> <span data-ttu-id="42ec8-300">További információkért lásd: [dinamikus terhelésjelentés](/azure/service-fabric/service-fabric-cluster-resource-manager-metrics#dynamic-load).</span><span class="sxs-lookup"><span data-stu-id="42ec8-300">For more information, see [Dynamic load](/azure/service-fabric/service-fabric-cluster-resource-manager-metrics#dynamic-load).</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="42ec8-301">Rendelkezésre állási szempontok</span><span class="sxs-lookup"><span data-stu-id="42ec8-301">Availability considerations</span></span>

<span data-ttu-id="42ec8-302">Helyezze el a szolgáltatásokat egy csomópont típusa nem az elsődleges csomóponttípushoz.</span><span class="sxs-lookup"><span data-stu-id="42ec8-302">Place your services in a node type other than the primary node type.</span></span> <span data-ttu-id="42ec8-303">A Service Fabric-rendszerszolgáltatások mindig az elsődleges csomóponttípushoz vannak telepítve.</span><span class="sxs-lookup"><span data-stu-id="42ec8-303">The Service Fabric system services are always deployed to the primary node type.</span></span> <span data-ttu-id="42ec8-304">A szolgáltatások az elsődleges csomóponttípushoz van telepítve, ha ezeket előfordulhat, hogy az erőforrások rendszerszolgáltatások versenyeznek, és zavarja meg a helyrendszeri szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="42ec8-304">If your services are deployed to the primary node type, they might compete with system services for resources and interfere with the system services.</span></span> <span data-ttu-id="42ec8-305">Typ uzlu várhatóan állapotalapú szolgáltatások működtetéséhez, hogy legalább öt csomópont-példányokat, és kiválasztja a Silver vagy Gold tartóssági szintet.</span><span class="sxs-lookup"><span data-stu-id="42ec8-305">If a node type is expected to host stateful services, make sure there are at least five node instances and you select the Silver or Gold Durability tier.</span></span>

<span data-ttu-id="42ec8-306">Vegye figyelembe, hogy beazonosítsa az erőforrások szolgáltatását.</span><span class="sxs-lookup"><span data-stu-id="42ec8-306">Consider constraining the resources of your services.</span></span> <span data-ttu-id="42ec8-307">Lásd: [erőforrás cégirányítási mechanizmus](/azure/service-fabric/service-fabric-resource-governance#resource-governance-mechanism).</span><span class="sxs-lookup"><span data-stu-id="42ec8-307">See [Resource governance mechanism](/azure/service-fabric/service-fabric-resource-governance#resource-governance-mechanism).</span></span>

- <span data-ttu-id="42ec8-308">Ne keverje a szabályozott erőforrás és erőforrás-nem tartozik az adott csomópont típusú szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="42ec8-308">Do not mix resource governed and resource non-governed services on the same node type.</span></span> <span data-ttu-id="42ec8-309">A nem szabályozott szolgáltatások túl sok erőforrást, amely hatással van az erőforrás, szolgáltatás-szolgáltatások igénybe vehet.</span><span class="sxs-lookup"><span data-stu-id="42ec8-309">The non-governed services might consume too many resources, affecting the resource governed services.</span></span> <span data-ttu-id="42ec8-310">Adja meg [elhelyezési korlátozások](/azure/service-fabric/service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies) , győződjön meg arról, hogy ilyen típusú szolgáltatások nem futnak a csomópontok ugyanazon az adatkészleten.</span><span class="sxs-lookup"><span data-stu-id="42ec8-310">Specify [placement constraints](/azure/service-fabric/service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies) to make sure that those types of services do not run on the same set of nodes.</span></span> <span data-ttu-id="42ec8-311">Lásd: [adja meg az erőforrás-szabályozás](/azure/service-fabric/service-fabric-resource-governance#specify-resource-governance).</span><span class="sxs-lookup"><span data-stu-id="42ec8-311">See [Specify resource governance](/azure/service-fabric/service-fabric-resource-governance#specify-resource-governance).</span></span> <span data-ttu-id="42ec8-312">(Ez a példa a [válaszfal minta](../../patterns/bulkhead.md).)</span><span class="sxs-lookup"><span data-stu-id="42ec8-312">(This is an example of the [Bulkhead pattern](../../patterns/bulkhead.md).)</span></span>
- <span data-ttu-id="42ec8-313">Adja meg a processzormagot és memóriát foglaljon le egy szolgáltatáspéldány.</span><span class="sxs-lookup"><span data-stu-id="42ec8-313">Specify the CPU cores and memory to reserve for a service instance.</span></span> <span data-ttu-id="42ec8-314">További információ a használati és az erőforrás-szabályozási házirendek korlátozásai: [erőforrás-szabályozás](/azure/service-fabric/service-fabric-resource-governance).</span><span class="sxs-lookup"><span data-stu-id="42ec8-314">For information about usage and limitations of resource governance policies, see [Resource governance](/azure/service-fabric/service-fabric-resource-governance).</span></span>

<span data-ttu-id="42ec8-315">Ellenőrizze, hogy minden szolgáltatáspéldány cél vagy replika száma elkerülése érdekében a hibaérzékeny pont (SPOF) 1-nél nagyobb.</span><span class="sxs-lookup"><span data-stu-id="42ec8-315">Make sure every service’s target instance or replica count is greater than 1 to avoid a single point of failure (SPOF).</span></span> <span data-ttu-id="42ec8-316">A legnagyobb számot, amely lehetővé teszi, a szolgáltatáspéldány vagy replika száma az eredménye, hogy, amelyhez a szolgáltatás korlátozza a csomópontok.</span><span class="sxs-lookup"><span data-stu-id="42ec8-316">The largest number that you can use as service instance or replica count equals the number nodes that to which the service is constrained.</span></span>

<span data-ttu-id="42ec8-317">Ellenőrizze, hogy minden állapotalapú szolgáltatás legalább két aktív másodlagos replikákon.</span><span class="sxs-lookup"><span data-stu-id="42ec8-317">Make sure every stateful service has at least two active secondary replicas.</span></span> <span data-ttu-id="42ec8-318">Öt replikák ajánlottak éles számítási feladatok esetében.</span><span class="sxs-lookup"><span data-stu-id="42ec8-318">Five replicas are recommended for production workloads.</span></span>

<span data-ttu-id="42ec8-319">További információkért lásd: [rendelkezésre állását a Service Fabric-szolgáltatások](/azure/service-fabric/service-fabric-availability-services).</span><span class="sxs-lookup"><span data-stu-id="42ec8-319">For more information, see [Availability of Service Fabric services](/azure/service-fabric/service-fabric-availability-services).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="42ec8-320">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="42ec8-320">Security considerations</span></span>

<span data-ttu-id="42ec8-321">Az alábbiakban az alkalmazás a Service Fabric védelmét biztosító néhány alapvető szempontokat:</span><span class="sxs-lookup"><span data-stu-id="42ec8-321">Here are some key points for securing your application on Service Fabric:</span></span>

### <a name="virtual-network"></a><span data-ttu-id="42ec8-322">Virtuális hálózat</span><span class="sxs-lookup"><span data-stu-id="42ec8-322">Virtual network</span></span>

<span data-ttu-id="42ec8-323">Vegye figyelembe, hogy minden egyes virtuálisgép-méretezési csoportba szabályozhatja a kommunikáció áramlását alhálózati határok meghatározása.</span><span class="sxs-lookup"><span data-stu-id="42ec8-323">Consider defining subnet boundaries for each virtual machine scale set to control the flow of communication.</span></span> <span data-ttu-id="42ec8-324">Mindegyik csomóponttípus külön virtuálisgép-méretezési csoportba a Service Fabric-fürt virtuális hálózaton belül egy alhálózat rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="42ec8-324">Each node type has its own virtual machine scale set in a subnet within the Service Fabric cluster's virtual network.</span></span> <span data-ttu-id="42ec8-325">Engedélyezi vagy elutasítja a hálózati forgalmat az alhálózatok hálózati biztonsági csoportok (NSG-k) lehet hozzáadni.</span><span class="sxs-lookup"><span data-stu-id="42ec8-325">Network Security Groups (NSGs) can be added to the subnets to allow or reject network traffic.</span></span> <span data-ttu-id="42ec8-326">Például az előtér- és csomóponttípusok, adhat hozzá egy NSG-t csak az előtérbeli alhálózat bejövő forgalmat fogadjon a háttérrendszer alhálózatát.</span><span class="sxs-lookup"><span data-stu-id="42ec8-326">For example, with front-end and back-end node types, you can add an NSG to the backend subnet to accept inbound traffic only the front-end subnet.</span></span>

<span data-ttu-id="42ec8-327">Ha külső Azure-szolgáltatások hívja meg a fürtről, [virtuális hálózati Szolgáltatásvégpontok](/azure/virtual-network/virtual-network-service-endpoints-overview) , ha az Azure-szolgáltatás támogatja ezt a funkciót.</span><span class="sxs-lookup"><span data-stu-id="42ec8-327">When calling external Azure Services from the cluster, use [Virtual Network service endpoints](/azure/virtual-network/virtual-network-service-endpoints-overview) if the Azure service supports it.</span></span> <span data-ttu-id="42ec8-328">A szolgáltatás csak a fürt virtuális hálózati szolgáltatásvégpont használatával védi.</span><span class="sxs-lookup"><span data-stu-id="42ec8-328">Using a service endpoint secures the service to only the cluster’s Virtual Network.</span></span> <span data-ttu-id="42ec8-329">Például ha adatok tárolásához a Cosmos DB használ, konfigurálja a Cosmos DB-fiókot, engedélyezze a hozzáférést csak a megadott alhálózat szolgáltatásvégpont.</span><span class="sxs-lookup"><span data-stu-id="42ec8-329">For example, if you are using Cosmos DB to store data, configure the Cosmos DB account with a service endpoint to allow access only from a specific subnet.</span></span> <span data-ttu-id="42ec8-330">Lásd: [hozzáférés az Azure Cosmos DB-erőforrások virtuális hálózatokról](/azure/cosmos-db/vnet-service-endpoint).</span><span class="sxs-lookup"><span data-stu-id="42ec8-330">See [Access Azure Cosmos DB resources from virtual networks](/azure/cosmos-db/vnet-service-endpoint).</span></span>

### <a name="endpoints-and-interservice-communication"></a><span data-ttu-id="42ec8-331">Végpontok és a szolgáltatások közötti kommunikációt eredményezhet</span><span class="sxs-lookup"><span data-stu-id="42ec8-331">Endpoints and interservice communication</span></span>

<span data-ttu-id="42ec8-332">Ne hozzon létre egy nem biztonságos Service Fabric-fürthöz.</span><span class="sxs-lookup"><span data-stu-id="42ec8-332">Do not create an unsecured Service Fabric cluster.</span></span> <span data-ttu-id="42ec8-333">A fürt felügyeleti végpontok, a nyilvános internetre tesz közzé, ha a névtelen felhasználók csatlakozhatnak hozzá.</span><span class="sxs-lookup"><span data-stu-id="42ec8-333">If the cluster exposes management endpoints to the public internet, anonymous users can connect to it.</span></span> <span data-ttu-id="42ec8-334">Nem biztonságos fürtökhöz nem támogatottak a termelési számítási feladatokhoz.</span><span class="sxs-lookup"><span data-stu-id="42ec8-334">Unsecured clusters are not supported for production workloads.</span></span> <span data-ttu-id="42ec8-335">Lásd: [Service Fabric-fürtök biztonsági forgatókönyveit](/azure/service-fabric/service-fabric-cluster-security).</span><span class="sxs-lookup"><span data-stu-id="42ec8-335">See: [Service Fabric cluster security scenarios](/azure/service-fabric/service-fabric-cluster-security).</span></span>

<span data-ttu-id="42ec8-336">A eredményezhet kommunikáció biztonságossá tételéhez:</span><span class="sxs-lookup"><span data-stu-id="42ec8-336">To secure your interservice communications:</span></span>

- <span data-ttu-id="42ec8-337">Vegye figyelembe, hogy az ASP.NET Core vagy a Java-webszolgáltatások HTTPS-végpontok engedélyezésére.</span><span class="sxs-lookup"><span data-stu-id="42ec8-337">Consider enabling HTTPS endpoints in your ASP.NET Core or Java web services.</span></span>
- <span data-ttu-id="42ec8-338">A fordított proxy és a szolgáltatások közötti biztonságos kapcsolat létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="42ec8-338">Establish a secure connection between the reverse proxy and services.</span></span>  <span data-ttu-id="42ec8-339">További információkért lásd: [csatlakozás a biztonságos service](/azure/service-fabric/service-fabric-reverseproxy-configure-secure-communication).</span><span class="sxs-lookup"><span data-stu-id="42ec8-339">For details, see [Connect to a secure service](/azure/service-fabric/service-fabric-reverseproxy-configure-secure-communication).</span></span>

<span data-ttu-id="42ec8-340">Ha használ egy [API-átjáró](../../microservices/design/gateway.md), is [hitelesítési kiürítési](../../patterns/gateway-offloading.md) az átjáróhoz.</span><span class="sxs-lookup"><span data-stu-id="42ec8-340">If you are using an [API gateway](../../microservices/design/gateway.md), you can [offload authentication](../../patterns/gateway-offloading.md) to the gateway.</span></span> <span data-ttu-id="42ec8-341">Győződjön meg arról, hogy az egyes szolgáltatások nem érhető el közvetlenül (az API-átjáró) nélkül, kivéve, ha további biztonsági üzenetek hitelesítésére helyen e származnak az átjáróból.</span><span class="sxs-lookup"><span data-stu-id="42ec8-341">Make sure that the individual services cannot be reached directly (without the API gateway) unless additional security is in place to authenticate messages whether they come from the gateway.</span></span>

<span data-ttu-id="42ec8-342">Nem teszik elérhetővé a Service Fabric fordított proxy nyilvánosan.</span><span class="sxs-lookup"><span data-stu-id="42ec8-342">Do not expose the Service Fabric reverse proxy publicly.</span></span> <span data-ttu-id="42ec8-343">Ekkor minden olyan szolgáltatás, amely kívül a fürt biztonsági rések bemutatása, és ki feleslegesen további információt a fürtön kívülről címezhető lennie HTTP-végpontokat tesznek közzé.</span><span class="sxs-lookup"><span data-stu-id="42ec8-343">Doing so causes all services that expose HTTP endpoints to be addressable from outside the cluster, introducing security vulnerabilities and potentially exposing additional information outside the cluster unnecessarily.</span></span> <span data-ttu-id="42ec8-344">Ha azt szeretné, nyilvánosan elérni egy szolgáltatást, használja az API-átjáró.</span><span class="sxs-lookup"><span data-stu-id="42ec8-344">If you want to access a service publicly, use an API gateway.</span></span> <span data-ttu-id="42ec8-345">Az egyes beállítások szerepelnek a [API-átjáró](#api-gateway) szakaszban.</span><span class="sxs-lookup"><span data-stu-id="42ec8-345">Some options are mentioned in the [API gateway](#api-gateway) section.</span></span>

<span data-ttu-id="42ec8-346">A távoli asztal akkor hasznos, ha a diagnosztikai és hibaelhárítási, de győződjön meg arról, ellenkező esetben azt eredményezi, hogy egy biztonsági rés nyitva hagyja, hogy nem.</span><span class="sxs-lookup"><span data-stu-id="42ec8-346">Remote desktop is useful for diagnostic and troubleshooting, but make sure not to leave it open otherwise it causes a security hole.</span></span>

### <a name="secrets-and-certificates"></a><span data-ttu-id="42ec8-347">Titkos kulcsok és tanúsítványok</span><span class="sxs-lookup"><span data-stu-id="42ec8-347">Secrets and certificates</span></span>

<span data-ttu-id="42ec8-348">Engedélyezze a Service Fabric-szolgáltatás eléréséhez a Key Vault titkos kódok, [identitás](/azure/active-directory/managed-identities-azure-resources/services-support-msi#azure-virtual-machine-scale-sets) meg a virtuális gép méretezési csoportot, amely üzemelteti a szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="42ec8-348">To access Key Vault secrets from a Service Fabric service, enable [managed identity](/azure/active-directory/managed-identities-azure-resources/services-support-msi#azure-virtual-machine-scale-sets) on the virtual machine scale set that hosts the service.</span></span> <span data-ttu-id="42ec8-349">Kódminta: App Service-ből a Key Vault használata a Felügyeltszolgáltatás-identitás segítségével.</span><span class="sxs-lookup"><span data-stu-id="42ec8-349">Sample code: Use Key Vault from App Service with Managed Service Identity.</span></span>

<span data-ttu-id="42ec8-350">Ne használja az ügyféltanúsítványokat a Service Fabric Explorer eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="42ec8-350">Do not use client certificates to access Service Fabric Explorer.</span></span> <span data-ttu-id="42ec8-351">Ehelyett használja az Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="42ec8-351">Instead, use Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="42ec8-352">Is megtekintheti, [Azure-szolgáltatások, hogy a támogatás az Azure AD-hitelesítés](/azure/active-directory/managed-identities-azure-resources/services-support-msi%23azure-services-that-support-azure-ad-authentication).</span><span class="sxs-lookup"><span data-stu-id="42ec8-352">Also see, [Azure services that support Azure AD authentication](/azure/active-directory/managed-identities-azure-resources/services-support-msi%23azure-services-that-support-azure-ad-authentication).</span></span>

<span data-ttu-id="42ec8-353">Éles környezetben ne használjon önaláírt tanúsítványokat.</span><span class="sxs-lookup"><span data-stu-id="42ec8-353">Do not use self-signed certificates for production.</span></span>

<span data-ttu-id="42ec8-354">A Service Fabric védelmével kapcsolatos további információkért lásd:</span><span class="sxs-lookup"><span data-stu-id="42ec8-354">For more information about securing Service Fabric, see:</span></span>

- [<span data-ttu-id="42ec8-355">Az Azure Service Fabric biztonsági áttekintése</span><span class="sxs-lookup"><span data-stu-id="42ec8-355">Azure Service Fabric security overview</span></span>](/azure/security/azure-service-fabric-security-overview)
- [<span data-ttu-id="42ec8-356">Az Azure Service Fabric ajánlott biztonsági eljárások</span><span class="sxs-lookup"><span data-stu-id="42ec8-356">Azure Service Fabric security best practices</span></span>](/azure/security/azure-service-fabric-security-best-practices)
- [<span data-ttu-id="42ec8-357">Az Azure Service Fabric biztonsági ellenőrzőlista</span><span class="sxs-lookup"><span data-stu-id="42ec8-357">Azure Service Fabric security checklist</span></span>](/azure/security/azure-service-fabric-security-checklist)

## <a name="monitoring-considerations"></a><span data-ttu-id="42ec8-358">Felügyeleti szempontok</span><span class="sxs-lookup"><span data-stu-id="42ec8-358">Monitoring considerations</span></span>

<span data-ttu-id="42ec8-359">A figyelési lehetőségek előtt javasoljuk, hogy olvassa el ebben a cikkben [diagnosztizálása a Service Fabric gyakori helyzetek](/azure/service-fabric/service-fabric-diagnostics-common-scenarios).</span><span class="sxs-lookup"><span data-stu-id="42ec8-359">Before you explore the monitoring options, we recommend you read this article about [diagnosing common scenarios with Service Fabric](/azure/service-fabric/service-fabric-diagnostics-common-scenarios).</span></span> <span data-ttu-id="42ec8-360">Monitorozási adatok a készletekben található felfoghatók:</span><span class="sxs-lookup"><span data-stu-id="42ec8-360">You can think of monitoring data in these sets:</span></span>

- [<span data-ttu-id="42ec8-361">Alkalmazás-metrikák és naplók</span><span class="sxs-lookup"><span data-stu-id="42ec8-361">Application metrics and logs</span></span>](#application-metrics-and-logs)
- [<span data-ttu-id="42ec8-362">A Service Fabric állapotának és az adatok</span><span class="sxs-lookup"><span data-stu-id="42ec8-362">Service Fabric health and event data</span></span>](#service-fabric-health-and-event-data)
- [<span data-ttu-id="42ec8-363">Infrastruktúra-metrikák és naplók</span><span class="sxs-lookup"><span data-stu-id="42ec8-363">Infrastructure metrics and logs</span></span>](#infrastructure-metrics-and-logs)
- [<span data-ttu-id="42ec8-364">Metrikák és naplók függő szolgáltatásokhoz</span><span class="sxs-lookup"><span data-stu-id="42ec8-364">Metrics and logs for dependent services</span></span>](#dependent-service-metrics)

<span data-ttu-id="42ec8-365">A két fő lehetőség, hogy az adatelemzés számára az alábbiak:</span><span class="sxs-lookup"><span data-stu-id="42ec8-365">These are the two main options for analyzing that data:</span></span>

- <span data-ttu-id="42ec8-366">Application Insights</span><span class="sxs-lookup"><span data-stu-id="42ec8-366">Application Insights</span></span>
- <span data-ttu-id="42ec8-367">Log Analytics</span><span class="sxs-lookup"><span data-stu-id="42ec8-367">Log Analytics</span></span>

<span data-ttu-id="42ec8-368">Használhatja az Azure Monitor irányítópultok figyelés beállításához és az operátorok riasztásokat küldhet.</span><span class="sxs-lookup"><span data-stu-id="42ec8-368">You can use Azure Monitor to set up dashboards for monitoring and to send alerts to operators.</span></span> <span data-ttu-id="42ec8-369">Egyes külső Hálózatfigyelő eszközök, amelyek integrálhatók a Service Fabric, például a dynatrace-szel is vannak.</span><span class="sxs-lookup"><span data-stu-id="42ec8-369">There are also some third-party monitoring tools that are integrated with Service Fabric, such as Dynatrace.</span></span> <span data-ttu-id="42ec8-370">További információkért lásd: [Azure Service Fabric figyelési partnerek](/azure/service-fabric/service-fabric-diagnostics-partners).</span><span class="sxs-lookup"><span data-stu-id="42ec8-370">For details, see [Azure Service Fabric Monitoring Partners](/azure/service-fabric/service-fabric-diagnostics-partners).</span></span>

### <a name="application-metrics-and-logs"></a><span data-ttu-id="42ec8-371">Alkalmazás-metrikák és naplók</span><span class="sxs-lookup"><span data-stu-id="42ec8-371">Application metrics and logs</span></span>

<span data-ttu-id="42ec8-372">Alkalmazáshasználati nyújt a szolgáltatásról, amelyek segítségével adatokat a szolgáltatás állapotának figyelésére, és azonosíthatja a problémákat.</span><span class="sxs-lookup"><span data-stu-id="42ec8-372">Application telemetry provides data about your service that can help you monitor the health of your service and identify issues.</span></span> <span data-ttu-id="42ec8-373">A szolgáltatás nyomkövetési és események hozzáadása:</span><span class="sxs-lookup"><span data-stu-id="42ec8-373">To add traces and events in your service:</span></span>

- <span data-ttu-id="42ec8-374">[Microsoft.Extensions.Logging](/azure/service-fabric/service-fabric-how-to-diagnostics-log#microsoftextensionslogging) a szolgáltatás az ASP.NET Core használatának fejleszt.</span><span class="sxs-lookup"><span data-stu-id="42ec8-374">[Microsoft.Extensions.Logging](/azure/service-fabric/service-fabric-how-to-diagnostics-log#microsoftextensionslogging) if you are developing your service with ASP.NET Core.</span></span> <span data-ttu-id="42ec8-375">Más keretrendszerek például Serilog tetszőleges naplózási szalagtár használatára.</span><span class="sxs-lookup"><span data-stu-id="42ec8-375">For other frameworks, use a logging library of your choice such as Serilog.</span></span>
- <span data-ttu-id="42ec8-376">A saját instrumentation használatával adhat hozzá a [TelemetryClient](/dotnet/api/microsoft.applicationinsights.telemetryclient?view=azure-dotnet) osztályt az SDK-ban, és az adatok megtekintése az Application Insights.</span><span class="sxs-lookup"><span data-stu-id="42ec8-376">You can add your own instrumentation by using the [TelemetryClient](/dotnet/api/microsoft.applicationinsights.telemetryclient?view=azure-dotnet) class in the SDK and view the data in Application Insights.</span></span> <span data-ttu-id="42ec8-377">Lásd: [egyéni kialakítás hozzáadása az alkalmazáshoz](/azure/service-fabric/service-fabric-tutorial-monitoring-aspnet#add-custom-instrumentation-to-your-application).</span><span class="sxs-lookup"><span data-stu-id="42ec8-377">See [Add custom instrumentation to your application](/azure/service-fabric/service-fabric-tutorial-monitoring-aspnet#add-custom-instrumentation-to-your-application).</span></span>
- <span data-ttu-id="42ec8-378">ETW-esemény naplózása használatával [EventSource](/azure/service-fabric/service-fabric-diagnostics-event-generation-app#eventsource).</span><span class="sxs-lookup"><span data-stu-id="42ec8-378">Log ETW events by using [EventSource](/azure/service-fabric/service-fabric-diagnostics-event-generation-app#eventsource).</span></span> <span data-ttu-id="42ec8-379">Ez a beállítás alapértelmezés szerint a Visual Studio a Service Fabric megoldás érhető el.</span><span class="sxs-lookup"><span data-stu-id="42ec8-379">This option is available by default in a Visual Studio Service Fabric solution.</span></span>

<span data-ttu-id="42ec8-380">A nyomkövetés és eseménynaplók megtekintéséhez használja [Application Insights](/azure/service-fabric/service-fabric-diagnostics-event-analysis-appinsights) a fogadóként strukturált naplózást, hogy a szolgáltatás nyomkövetési és események jelenítheti meg az egyik.</span><span class="sxs-lookup"><span data-stu-id="42ec8-380">To view the trace and event logs, use [Application Insights](/azure/service-fabric/service-fabric-diagnostics-event-analysis-appinsights) as one of the sinks for structured logging so that your service can visualize traces and events.</span></span> <span data-ttu-id="42ec8-381">Az Application Insights sok beépített telemetriát nyújt: kérelmek, nyomkövetéseket, események, kivételek, metrikák, függőségeit.</span><span class="sxs-lookup"><span data-stu-id="42ec8-381">Application Insights provides a lot of built-in telemetry: requests, traces, events, exceptions, metrics, dependencies.</span></span> <span data-ttu-id="42ec8-382">A szolgáltatás, Application insights kialakításáról információkért tanulmányozza a következő cikkeket:</span><span class="sxs-lookup"><span data-stu-id="42ec8-382">For information about instrumenting your service for Application Insights, see these articles:</span></span>

- <span data-ttu-id="42ec8-383">[Oktatóanyag: A Service Fabric Application Insights használatával egy ASP.NET Core alkalmazás monitorozása és diagnosztizálása](/azure/service-fabric/service-fabric-tutorial-monitoring-aspnet).</span><span class="sxs-lookup"><span data-stu-id="42ec8-383">[Tutorial: Monitor and diagnose an ASP.NET Core application on Service Fabric using Application Insights](/azure/service-fabric/service-fabric-tutorial-monitoring-aspnet).</span></span>
- [<span data-ttu-id="42ec8-384">Application Insights for ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="42ec8-384">Application Insights for ASP.NET Core</span></span>](/azure/application-insights/app-insights-asp-net-core)
- [<span data-ttu-id="42ec8-385">Application Insights .NET SDK</span><span class="sxs-lookup"><span data-stu-id="42ec8-385">Application Insights .NET SDK</span></span>](/azure/application-insights/app-insights-api-custom-events-metrics)
- [<span data-ttu-id="42ec8-386">Az Application Insights SDK-t a Service Fabrichez</span><span class="sxs-lookup"><span data-stu-id="42ec8-386">Application Insights SDK for Service Fabric</span></span>](https://github.com/Microsoft/ApplicationInsights-ServiceFabric)

<span data-ttu-id="42ec8-387">ASP.NET Core szolgáltatások használatát a [ILogger felület](/aspnet/core/fundamentals/logging/?view=aspnetcore-2.2) az alkalmazásnaplózáshoz.</span><span class="sxs-lookup"><span data-stu-id="42ec8-387">ASP.NET Core services use the [ILogger interface](/aspnet/core/fundamentals/logging/?view=aspnetcore-2.2) for application logging.</span></span> <span data-ttu-id="42ec8-388">Elérhetővé teszi ezeket az alkalmazásnaplókat az Azure monitorban, küldjön a `ILogger` az eseményeket az Application Insights.</span><span class="sxs-lookup"><span data-stu-id="42ec8-388">To make these application logs available in Azure Monitor, send the `ILogger` events to Application Insights.</span></span> <span data-ttu-id="42ec8-389">További információkért lásd: [az ASP.NET Core alkalmazás ILogger](https://github.com/Microsoft/ApplicationInsights-dotnet-logging/blob/develop/src/ILogger/Readme.md#aspnet-core-application).</span><span class="sxs-lookup"><span data-stu-id="42ec8-389">For more information, see [ILogger in an ASP.NET Core application](https://github.com/Microsoft/ApplicationInsights-dotnet-logging/blob/develop/src/ILogger/Readme.md#aspnet-core-application).</span></span> <span data-ttu-id="42ec8-390">Az Application Insights tulajdonságokat adhat hozzá korrelációs ILogger események, amelyek akkor hasznos, ha elosztott nyomkövetést megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="42ec8-390">Application Insights can add correlation properties to ILogger events, which is useful for visualizing distributed tracing.</span></span>

<span data-ttu-id="42ec8-391">További információkért lásd:</span><span class="sxs-lookup"><span data-stu-id="42ec8-391">For more information, see:</span></span>

- [<span data-ttu-id="42ec8-392">Alkalmazásnaplózás</span><span class="sxs-lookup"><span data-stu-id="42ec8-392">Application logging</span></span>](/azure/service-fabric/service-fabric-diagnostics-event-generation-app)
- [<span data-ttu-id="42ec8-393">Naplózás hozzáadása Service Fabric-alkalmazáshoz</span><span class="sxs-lookup"><span data-stu-id="42ec8-393">Add logging to your Service Fabric application</span></span>](/azure/azure-monitor/app/correlation)

### <a name="service-fabric-health-and-event-data"></a><span data-ttu-id="42ec8-394">A Service Fabric állapotának és az adatok</span><span class="sxs-lookup"><span data-stu-id="42ec8-394">Service Fabric health and event data</span></span>

<span data-ttu-id="42ec8-395">A Service Fabric telemetriai adatokat is tartalmaz, egészségügyi metrikákkal és eseményekkel kapcsolatban a művelet és a egy Service Fabric-fürt és entitásai teljesítményét: az csomópontok, alkalmazások, szolgáltatások, a partíciók és replikáit.</span><span class="sxs-lookup"><span data-stu-id="42ec8-395">Service Fabric telemetry includes health metrics and events about the operation and performance of a Service Fabric cluster and its entities: its nodes, applications, services, partitions, and replicas.</span></span>

- <span data-ttu-id="42ec8-396">[Az EventStore](/azure/service-fabric/service-fabric-diagnostics-eventstore).</span><span class="sxs-lookup"><span data-stu-id="42ec8-396">[EventStore](/azure/service-fabric/service-fabric-diagnostics-eventstore).</span></span> <span data-ttu-id="42ec8-397">Egy állapot-nyilvántartó-szolgáltatás, amely a fürt és az entitások kapcsolatos eseményeket gyűjti.</span><span class="sxs-lookup"><span data-stu-id="42ec8-397">A stateful system service that collects events related to the cluster and its entities.</span></span> <span data-ttu-id="42ec8-398">A Service Fabric használ az EventStore írása [Service Fabric-események](/azure/service-fabric/service-fabric-diagnostics-event-generation-operational) , adja meg a fürttel kapcsolatos adatokat és állapotának frissítése, hibaelhárítás, figyelése is használható.</span><span class="sxs-lookup"><span data-stu-id="42ec8-398">Service Fabric uses EventStore to write [Service Fabric events](/azure/service-fabric/service-fabric-diagnostics-event-generation-operational) to provide information about your cluster and can be used for status updates, troubleshooting, monitoring.</span></span> <span data-ttu-id="42ec8-399">Azt is összehasonlíthatja a különböző entitások eseményeit, egy adott időben a fürt problémák azonosításához.</span><span class="sxs-lookup"><span data-stu-id="42ec8-399">It can also correlate events from different entities at a given time to identify issues in the cluster.</span></span> <span data-ttu-id="42ec8-400">A szolgáltatás REST API-n keresztül az események közzététele.</span><span class="sxs-lookup"><span data-stu-id="42ec8-400">The service exposes those events through a REST API.</span></span> <span data-ttu-id="42ec8-401">Az EventStore API-k kapcsolatos információkért lásd: [lekérdezés EventStore API-k a fürthöz kapcsolódó események](/azure/service-fabric/service-fabric-diagnostics-eventstore-query).</span><span class="sxs-lookup"><span data-stu-id="42ec8-401">For information about how to query the EventStore APIs, see [Query EventStore APIs for cluster events](/azure/service-fabric/service-fabric-diagnostics-eventstore-query).</span></span> <span data-ttu-id="42ec8-402">A Log Analytics az EventStore eseményei úgy konfigurálja a fürt WAD kiterjesztésű tekintheti meg.</span><span class="sxs-lookup"><span data-stu-id="42ec8-402">You can view the events from EventStore in Log Analytics by configuring your cluster with WAD extension.</span></span>
- <span data-ttu-id="42ec8-403">[HealthStore](/azure/service-fabric/service-fabric-health-introduction).</span><span class="sxs-lookup"><span data-stu-id="42ec8-403">[HealthStore](/azure/service-fabric/service-fabric-health-introduction).</span></span> <span data-ttu-id="42ec8-404">A fürt jelenlegi állapotáról pillanatképet tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="42ec8-404">Provides a snapshot of the current health of the cluster.</span></span> <span data-ttu-id="42ec8-405">Állapotalapú szolgáltatás, amely összefoglalja az entitások a hierarchia által jelentett összes egészségügyi adatokat.</span><span class="sxs-lookup"><span data-stu-id="42ec8-405">A stateful service that aggregates all health data reported by entities in a hierarchy.</span></span> <span data-ttu-id="42ec8-406">Az adatokat a rendszer vizualizálja [Service Fabric Explorer][sfx].</span><span class="sxs-lookup"><span data-stu-id="42ec8-406">The data is visualized in [Service Fabric Explorer][sfx].</span></span> <span data-ttu-id="42ec8-407">A HealthStore is figyeli az alkalmazás frissítése.</span><span class="sxs-lookup"><span data-stu-id="42ec8-407">The HealthStore also monitors application upgrades.</span></span> <span data-ttu-id="42ec8-408">A PowerShell, a .NET-alkalmazás vagy a REST API-k állapotlekérdezések is használhatja.</span><span class="sxs-lookup"><span data-stu-id="42ec8-408">You can use health queries in PowerShell, a .NET application, or REST APIs.</span></span> <span data-ttu-id="42ec8-409">Látható, [Service Fabric állapotmonitorozásának bemutatása](/azure/service-fabric/service-fabric-health-introduction).</span><span class="sxs-lookup"><span data-stu-id="42ec8-409">See, [Introduction to Service Fabric health monitoring](/azure/service-fabric/service-fabric-health-introduction).</span></span>
- <span data-ttu-id="42ec8-410">Vegye fontolóra belső egyéni figyelő szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="42ec8-410">Consider implementing internal custom watchdog services.</span></span> <span data-ttu-id="42ec8-411">Ezeket a szolgáltatásokat rendszeresen készíthető jelentés az egyéni egészségügyi adatok, például a futó szolgáltatások hibás állapotok.</span><span class="sxs-lookup"><span data-stu-id="42ec8-411">Those services can periodically report custom health data such as faulty states of running services.</span></span> <span data-ttu-id="42ec8-412">További információkért lásd: [egyéni állapotjelentések](/azure/service-fabric/service-fabric-report-health).</span><span class="sxs-lookup"><span data-stu-id="42ec8-412">For more information, see [Custom health reports](/azure/service-fabric/service-fabric-report-health).</span></span> <span data-ttu-id="42ec8-413">A rendszerállapot-jelentések, a Service Fabric explorer használatával olvashatja.</span><span class="sxs-lookup"><span data-stu-id="42ec8-413">You can read the health reports using the Service Fabric explorer.</span></span>  

### <a name="infrastructure-metrics-and-logs"></a><span data-ttu-id="42ec8-414">Infrastruktúra-metrikák és naplók</span><span class="sxs-lookup"><span data-stu-id="42ec8-414">Infrastructure metrics and logs</span></span>

<span data-ttu-id="42ec8-415">Infrastruktúra-metrikák könnyebben értheti meg a fürtben lévő erőforrás-kiosztást.</span><span class="sxs-lookup"><span data-stu-id="42ec8-415">Infrastructure metrics help you to understand resource allocation in the cluster.</span></span> <span data-ttu-id="42ec8-416">Az alábbiakban a fő lehetőségeket ezen adatok gyűjtése:</span><span class="sxs-lookup"><span data-stu-id="42ec8-416">Here are the main options for collecting this information:</span></span>

- <span data-ttu-id="42ec8-417">Windows Azure Diagnostics (WAD).</span><span class="sxs-lookup"><span data-stu-id="42ec8-417">Windows Azure Diagnostics (WAD).</span></span> <span data-ttu-id="42ec8-418">Windows naplók és a csomópont-szintű metrikákat gyűjt.</span><span class="sxs-lookup"><span data-stu-id="42ec8-418">Collect logs and metrics at the node level on Windows.</span></span> <span data-ttu-id="42ec8-419">WAD használhatja a IaaSDiagnostics Virtuálisgép-bővítmény konfigurálásával bármely virtuális gép méretezési csoport, amely le van képezve egy csomópont típusa, például a Windows-eseménynaplók, teljesítményszámlálók, ETW/jegyzékek system és a működési eseményeit és egyéni diagnosztikai események gyűjtéséhez. naplók.</span><span class="sxs-lookup"><span data-stu-id="42ec8-419">You can use WAD by configuring the IaaSDiagnostics VM extension on any virtual machine scale set that is mapped to a node type to collect diagnostic events, such as Windows event logs, performance counters, ETW/manifests system and operational events, and custom logs.</span></span>
- <span data-ttu-id="42ec8-420">Log Analytics-ügynököket.</span><span class="sxs-lookup"><span data-stu-id="42ec8-420">Log Analytics agent.</span></span> <span data-ttu-id="42ec8-421">A Windows biztonságiesemény-naplóinak, a teljesítményszámlálók és az egyéni naplók küldése a Log Analytics MicrosoftMonitoringAgent Virtuálisgép-bővítmény konfigurálása.</span><span class="sxs-lookup"><span data-stu-id="42ec8-421">Configure the MicrosoftMonitoringAgent VM extension to send Windows event logs, performance counters, and custom logs to Log Analytics.</span></span>

<span data-ttu-id="42ec8-422">Az előző módszerek, például teljesítményszámlálók gyűjtött metrikák típusú átfedés van.</span><span class="sxs-lookup"><span data-stu-id="42ec8-422">There is some overlap in the type of metrics collected through the preceding mechanisms, such as performance counters.</span></span> <span data-ttu-id="42ec8-423">Ahol nincs átfedés, javasoljuk a Log Analytics ügynökét használja.</span><span class="sxs-lookup"><span data-stu-id="42ec8-423">Where there is overlap, we recommend using the Log Analytics agent.</span></span> <span data-ttu-id="42ec8-424">Mivel a Log Analytics-ügynök nem az Azure storage, nincs közel valós idejű.</span><span class="sxs-lookup"><span data-stu-id="42ec8-424">Because there is no Azure storage for the Log Analytics agent, there is low latency.</span></span> <span data-ttu-id="42ec8-425">Emellett a teljesítményszámlálókat IaaSDiagnostics nem lehet betölteni Log analyticsbe egyszerűen.</span><span class="sxs-lookup"><span data-stu-id="42ec8-425">Also, the performance counters in IaaSDiagnostics cannot be fed into Log Analytics easily.</span></span>

![Infrastruktúra megfigyelése a Service Fabricben](./_images/ra-sf-monitoring.png)

<span data-ttu-id="42ec8-427">A Virtuálisgép-bővítmények használatával kapcsolatos információkért lásd: [Azure virtuális gépi bővítmények és szolgáltatások](/azure/virtual-machines/extensions/overview).</span><span class="sxs-lookup"><span data-stu-id="42ec8-427">For information about using VM extensions, see [Azure virtual machine extensions and features](/azure/virtual-machines/extensions/overview).</span></span>

<span data-ttu-id="42ec8-428">Az adatok megtekintéséhez, konfigurálása a Log Analytics WAD gyűjtött adatok megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="42ec8-428">To view the data, configure Log Analytics to view the data collected through WAD.</span></span> <span data-ttu-id="42ec8-429">A storage-fiókból olvassa az eseményeket a Log Analytics konfigurálásával kapcsolatos további információkért lásd: [Log Analytics beállítása a fürt](/azure/service-fabric/service-fabric-diagnostics-oms-setup).</span><span class="sxs-lookup"><span data-stu-id="42ec8-429">For information about how to configure Log Analytics to read events from a storage account, see [Set up Log Analytics for a cluster](/azure/service-fabric/service-fabric-diagnostics-oms-setup).</span></span>

<span data-ttu-id="42ec8-430">Teljesítménynaplók és a Service Fabric-fürt, számítási, hálózati forgalmat, függőben lévő frissítést, és további kapcsolatos telemetriai adatokat is megtekintheti.</span><span class="sxs-lookup"><span data-stu-id="42ec8-430">You can also view performance logs and telemetry data related to a Service Fabric cluster, workloads, network traffic, pending updates, and more.</span></span> <span data-ttu-id="42ec8-431">Lásd: [alkalmazásteljesítmény-figyelés a Log Analytics](/azure/service-fabric/service-fabric-diagnostics-oms-agent).</span><span class="sxs-lookup"><span data-stu-id="42ec8-431">See [Performance Monitoring with Log Analytics](/azure/service-fabric/service-fabric-diagnostics-oms-agent).</span></span>

<span data-ttu-id="42ec8-432">[A Service Map megoldás a Log Analyticsben](/azure/azure-monitor/insights/service-map) arról nyújt tájékoztatást, a topológia a fürt (azaz futó folyamatokat minden csomópont).</span><span class="sxs-lookup"><span data-stu-id="42ec8-432">[Service Map solution in Log Analytics](/azure/azure-monitor/insights/service-map) provides information about the topology of the cluster (that is, the processes running in each node).</span></span> <span data-ttu-id="42ec8-433">Az adatok küldése a storage-fiókban [Application Insights](/azure/monitoring-and-diagnostics/azure-diagnostics-configure-application-insights).</span><span class="sxs-lookup"><span data-stu-id="42ec8-433">Send the data in the storage account to [Application Insights](/azure/monitoring-and-diagnostics/azure-diagnostics-configure-application-insights).</span></span> <span data-ttu-id="42ec8-434">Előfordulhat némi késleltetés az adatok Application Insightsban való lekérése közben.</span><span class="sxs-lookup"><span data-stu-id="42ec8-434">There might be some delay in getting data into Application Insights.</span></span> <span data-ttu-id="42ec8-435">Ha meg szeretné tekinteni a az adatok valós idejű, érdemes úgy konfigurálni [Eseményközpont](/azure/monitoring-and-diagnostics/azure-diagnostics-streaming-event-hubs) fogadók és csatornákat.</span><span class="sxs-lookup"><span data-stu-id="42ec8-435">If you want to see the data real time, consider configuring [Event Hub](/azure/monitoring-and-diagnostics/azure-diagnostics-streaming-event-hubs) using sinks and channels.</span></span> <span data-ttu-id="42ec8-436">További információkért lásd: [esemény összesítésére és a Windows Azure Diagnostics segítségével gyűjteményt](/azure/service-fabric/service-fabric-diagnostics-event-aggregation-wad).</span><span class="sxs-lookup"><span data-stu-id="42ec8-436">For more information, see [Event aggregation and collection using Windows Azure Diagnostics](/azure/service-fabric/service-fabric-diagnostics-event-aggregation-wad).</span></span>

### <a name="dependent-service-metrics"></a><span data-ttu-id="42ec8-437">Függő szolgáltatások mérőszámok</span><span class="sxs-lookup"><span data-stu-id="42ec8-437">Dependent service metrics</span></span>

- <span data-ttu-id="42ec8-438">[Application Insights Alkalmazástérkép](/azure/azure-monitor/app/app-map) lehetővé teszi az alkalmazás topológiájának HTTP függőségi hívások közötti szolgáltatások, a telepített Application Insights SDK használatával.</span><span class="sxs-lookup"><span data-stu-id="42ec8-438">[Application Insights Application Map](/azure/azure-monitor/app/app-map) provides the topology of the application by using HTTP dependency calls made between services, with the installed Application Insights SDK.</span></span>
- <span data-ttu-id="42ec8-439">[A Service Map megoldás a Log Analyticsben](/azure/azure-monitor/insights/service-map) bejövő és kimenő forgalom/külső szolgáltatásokkal kapcsolatos információkat biztosít.</span><span class="sxs-lookup"><span data-stu-id="42ec8-439">[Service Map solution in Log Analytics](/azure/azure-monitor/insights/service-map) provides information about inbound and outbound traffic from/to external services.</span></span> <span data-ttu-id="42ec8-440">A Service Map ezenkívül integrálható más megoldásokkal, például frissítések vagy biztonsági.</span><span class="sxs-lookup"><span data-stu-id="42ec8-440">In addition, Service Map integrates with other solutions such as updates or security.</span></span>
- <span data-ttu-id="42ec8-441">Egyéni watchdogs hibaállapotok jelentés a külső szolgáltatások segítségével.</span><span class="sxs-lookup"><span data-stu-id="42ec8-441">Custom watchdogs can be used to report error conditions on external services.</span></span> <span data-ttu-id="42ec8-442">A szolgáltatás például sikerült jelentést ad health hibajelentésben, ha nem fér hozzá egy külső szolgáltatás vagy az adat storage (az Azure Cosmos DB-hez).</span><span class="sxs-lookup"><span data-stu-id="42ec8-442">For example, the service could report an error health report if it cannot access an external service or data storage (Azure Cosmos DB).</span></span>  

### <a name="distributed-tracing"></a><span data-ttu-id="42ec8-443">Elosztott nyomkövetés</span><span class="sxs-lookup"><span data-stu-id="42ec8-443">Distributed tracing</span></span>

<span data-ttu-id="42ec8-444">A mikroszolgáltatási architektúra több szolgáltatás gyakran egy adott feladat végrehajtásához részt venni.</span><span class="sxs-lookup"><span data-stu-id="42ec8-444">In microservices architecture, several services often participate to complete a task.</span></span> <span data-ttu-id="42ec8-445">Az egyes ezeket a szolgáltatásokat a telemetria környezet mező (Műveletazonosító, kérelem azonosítója, és így tovább) egy elosztott nyomkövetést a visszamenőleges korrelációban állnak.</span><span class="sxs-lookup"><span data-stu-id="42ec8-445">The telemetry from each of those services is correlated by using context fields (operation ID, request ID, and so forth) in a distributed trace.</span></span> <span data-ttu-id="42ec8-446">Használatával [Alkalmazástérkép](/azure/azure-monitor/app/app-map) az Application Insights, elosztott logikai művelet a nézet létrehozása és az alkalmazás a teljes szolgáltatás grafikon megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="42ec8-446">By using [Application Map](/azure/azure-monitor/app/app-map) in Application Insights, you can build the view of distributed logical operation and visualize the entire service graph of your application.</span></span> <span data-ttu-id="42ec8-447">Tranzakció diagnosztikája az Application Insights kiszolgálóoldali telemetria korrelációját is használhatja.</span><span class="sxs-lookup"><span data-stu-id="42ec8-447">You can also use transaction diagnostics in Application Insight to correlate server-side telemetry.</span></span> <span data-ttu-id="42ec8-448">További információkért lásd: [összetevőt tranzakció diagnosztikája egyesített](/azure/application-insights/app-insights-transaction-diagnostics).</span><span class="sxs-lookup"><span data-stu-id="42ec8-448">For more information, see [Unified cross-component transaction diagnostics](/azure/application-insights/app-insights-transaction-diagnostics).</span></span>

<span data-ttu-id="42ec8-449">[Application Insights Alkalmazástérkép](/azure/azure-monitor/app/app-map) lehetővé teszi az alkalmazás topológiájának HTTP függőségi hívások közötti szolgáltatások, a telepített Application Insights SDK használatával.</span><span class="sxs-lookup"><span data-stu-id="42ec8-449">[Application Insights Application Map](/azure/azure-monitor/app/app-map) provides the topology of the application by using HTTP dependency calls made between  services, with the installed Application Insights SDK.</span></span> <span data-ttu-id="42ec8-450">Fontos a feladatokat, amelyek aszinkron módon üzenetsorral elküldése összekapcsolását is.</span><span class="sxs-lookup"><span data-stu-id="42ec8-450">It’s also important to correlate tasks that are dispatched asynchronously using a queue.</span></span> <span data-ttu-id="42ec8-451">Az üzenetsori üzenet korrelációs telemetriai adatokat küldenek kapcsolatos részletekért lásd: [instrumentation várólistára](/azure/azure-monitor/app/custom-operations-tracking#queue-instrumentation).</span><span class="sxs-lookup"><span data-stu-id="42ec8-451">For details about sending correlation telemetry in a queue message, see [Queue instrumentation](/azure/azure-monitor/app/custom-operations-tracking#queue-instrumentation).</span></span>

<span data-ttu-id="42ec8-452">További információkért lásd:</span><span class="sxs-lookup"><span data-stu-id="42ec8-452">For more information, see:</span></span>

- [<span data-ttu-id="42ec8-453">A lekérdezés végrehajtása több erőforrás között</span><span class="sxs-lookup"><span data-stu-id="42ec8-453">Performing a query across multiple resources</span></span>](/azure/azure-monitor/log-query/cross-workspace-query#performing-a-query-across-multiple-resources)
- [<span data-ttu-id="42ec8-454">Az Application Insights telemetriai korreláció</span><span class="sxs-lookup"><span data-stu-id="42ec8-454">Telemetry correlation in Application Insights</span></span>](/azure/azure-monitor/app/correlation)

#### <a name="alerts-and-dashboards"></a><span data-ttu-id="42ec8-455">Riasztások és az irányítópultok</span><span class="sxs-lookup"><span data-stu-id="42ec8-455">Alerts and Dashboards</span></span>

<span data-ttu-id="42ec8-456">Az Application Insights és a Log Analytics-támogatást egy [részletes lekérdezési nyelvet](/azure/log-analytics/query-language/get-started-queries) (Kusto lekérdezési nyelv), amely lehetővé teszi lekérése és elemzését adatok naplózása.</span><span class="sxs-lookup"><span data-stu-id="42ec8-456">Application Insights and Log Analytics support an [extensive query language](/azure/log-analytics/query-language/get-started-queries) (Kusto query language) that lets you retrieve and analyze log data.</span></span> <span data-ttu-id="42ec8-457">Adathalmazokat hozhat létre, és a diagnosztika irányítópultok megjelenítheti a lekérdezések használatával.</span><span class="sxs-lookup"><span data-stu-id="42ec8-457">Use the queries to create data sets and visualize it in diagnostics dashboards.</span></span>

<span data-ttu-id="42ec8-458">Az Azure Monitor riasztások segítségével részt értesítése, ha bizonyos események történnek az adott erőforrásokhoz.</span><span class="sxs-lookup"><span data-stu-id="42ec8-458">Use Azure Monitor alerts to notify sysadmins when certain conditions occur in specific resources.</span></span> <span data-ttu-id="42ec8-459">Az értesítés sikerült kell-e-mailek, az Azure-függvényt, egy webhook hívása, és így tovább.</span><span class="sxs-lookup"><span data-stu-id="42ec8-459">The notification could be an email, Azure function, call a web hook, and so on.</span></span> <span data-ttu-id="42ec8-460">További információkért lásd: [az Azure monitorban riasztásokat](/azure/azure-monitor/platform/alerts-overview).</span><span class="sxs-lookup"><span data-stu-id="42ec8-460">For more information, see [Alerts in Azure Monitor](/azure/azure-monitor/platform/alerts-overview).</span></span>

<span data-ttu-id="42ec8-461">[Keresés naplóriasztási szabályok](/azure/azure-monitor/platform/alerts-unified-log) határozza meg, és rendszeres időközönként Log Analytics-munkaterület Kusto-lekérdezés futtatásához.</span><span class="sxs-lookup"><span data-stu-id="42ec8-461">[Log search alert rules](/azure/azure-monitor/platform/alerts-unified-log) allow you to define and run a Kusto query against a Log Analytics workspace at regular intervals.</span></span> <span data-ttu-id="42ec8-462">Egy riasztás akkor jön létre, ha a lekérdezés eredménye megfelel egy bizonyos feltételnek.</span><span class="sxs-lookup"><span data-stu-id="42ec8-462">An alert is created if the query result matches a certain condition.</span></span>

## <a name="next-steps"></a><span data-ttu-id="42ec8-463">További lépések</span><span class="sxs-lookup"><span data-stu-id="42ec8-463">Next steps</span></span>

- [<span data-ttu-id="42ec8-464">Tartományelemzés a mikroszolgáltatás-alapú modell használatával</span><span class="sxs-lookup"><span data-stu-id="42ec8-464">Using domain analysis to model microservices</span></span>](../../microservices/model/domain-analysis.md)
- [<span data-ttu-id="42ec8-465">A mikroszolgáltatási architektúra tervezése</span><span class="sxs-lookup"><span data-stu-id="42ec8-465">Designing a microservices architecture</span></span>](../../microservices/design/index.md)

[sfx]: /azure/service-fabric/service-fabric-visualizing-your-cluster
