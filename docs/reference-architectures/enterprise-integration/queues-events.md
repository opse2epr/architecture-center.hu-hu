---
title: Vállalati integráció üzenetsorokat és események használata
titleSuffix: Azure Reference Architectures
description: Javasolt architektúra megvalósítása az Azure Logic Apps, az Azure API Management, az Azure Service Bus és az Azure Event Grid, egy vállalati integrációs minta.
author: mattfarm
ms.reviewer: jonfan, estfan, LADocs
ms.topic: reference-architecture
ms.date: 12/03/2018
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: integration-services
ms.openlocfilehash: 4c9d2e201bcfc077990d746a1decd55ede2f220a
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 03/20/2019
ms.locfileid: "58299183"
---
# <a name="enterprise-integration-on-azure-using-message-queues-and-events"></a><span data-ttu-id="a08bc-103">Vállalati integráció az Azure-üzenetsorok és események használata</span><span class="sxs-lookup"><span data-stu-id="a08bc-103">Enterprise integration on Azure using message queues and events</span></span>

<span data-ttu-id="a08bc-104">Ez a referenciaarchitektúra integrálható a vállalati háttérrendszerekhez, üzenetsorokat és események használata különítse el a szolgáltatásokat a nagyobb méretezhetőség és megbízhatóság.</span><span class="sxs-lookup"><span data-stu-id="a08bc-104">This reference architecture integrates enterprise backend systems, using message queues and events to decouple services for greater scalability and reliability.</span></span> <span data-ttu-id="a08bc-105">A háttérrendszerekhez szoftver feltétlenül tartalmazzák a szoftverszolgáltatások (SaaS) rendszerek, az Azure-szolgáltatásokkal, mint, és a vállalat meglévő webszolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="a08bc-105">The backend systems may include software as a service (SaaS) systems, Azure services, and existing web services in your enterprise.</span></span>

![Az üzenetsorok és események használata vállalati integráció a referencia-architektúra](./_images/enterprise-integration-queues-events.png)

## <a name="architecture"></a><span data-ttu-id="a08bc-107">Architektúra</span><span class="sxs-lookup"><span data-stu-id="a08bc-107">Architecture</span></span>

<span data-ttu-id="a08bc-108">Itt látható architektúrában épül, amely egy egyszerűbb architektúra látható [alapszintű enterprise integration][basic-enterprise-integration].</span><span class="sxs-lookup"><span data-stu-id="a08bc-108">The architecture shown here builds on a simpler architecture that is shown in [Basic enterprise integration][basic-enterprise-integration].</span></span> <span data-ttu-id="a08bc-109">Az architektúra használ [Logic Apps] [ logic-apps] szolgáltatásokat tartalmazó munkafolyamat és [az API Management] [ apim] katalógusok az API-k létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="a08bc-109">That architecture uses [Logic Apps][logic-apps] to orchestrate workflows and [API Management][apim] to create catalogs of APIs.</span></span>

<span data-ttu-id="a08bc-110">Ez a verzió, az architektúra két összetevőből, amelyek segítségével a rendszer több megbízható és méretezhető bővült:</span><span class="sxs-lookup"><span data-stu-id="a08bc-110">This version of the architecture adds two components that help make the system more reliable and scalable:</span></span>

- <span data-ttu-id="a08bc-111">**[Az Azure Service Bus][service-bus]**.</span><span class="sxs-lookup"><span data-stu-id="a08bc-111">**[Azure Service Bus][service-bus]**.</span></span> <span data-ttu-id="a08bc-112">Service Bus az egy biztonságos, megbízható közvetítő.</span><span class="sxs-lookup"><span data-stu-id="a08bc-112">Service Bus is a secure, reliable message broker.</span></span>

- <span data-ttu-id="a08bc-113">**[Az Azure Event Grid][event-grid]**.</span><span class="sxs-lookup"><span data-stu-id="a08bc-113">**[Azure Event Grid][event-grid]**.</span></span> <span data-ttu-id="a08bc-114">Event Grid-esemény-útválasztó szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="a08bc-114">Event Grid is an event routing service.</span></span> <span data-ttu-id="a08bc-115">Használja a [közzétételi/előfizetési](../../patterns/publisher-subscriber.md) (pub/sub) modellt alkalmaznak eseménykezelési.</span><span class="sxs-lookup"><span data-stu-id="a08bc-115">It uses a [publish/subscribe](../../patterns/publisher-subscriber.md) (pub/sub) eventing model.</span></span>

<span data-ttu-id="a08bc-116">Egy közvetítő aszinkron kommunikációt biztosít számos előnnyel jár a háttérszolgáltatásoknak küldött közvetlen, szinkron hívások keresztül:</span><span class="sxs-lookup"><span data-stu-id="a08bc-116">Asynchronous communication using a message broker provides a number of advantages over making direct, synchronous calls to backend services:</span></span>

- <span data-ttu-id="a08bc-117">Terheléskiegyenlítés kezelni a számítási feladatok használatával adatlöketekkel biztosít a [terhelés üzenetsor-alapú terheléskiegyenlítési minta](../../patterns/queue-based-load-leveling.md).</span><span class="sxs-lookup"><span data-stu-id="a08bc-117">Provides load-leveling to handle bursts in workloads, using the [Queue-Based Load Leveling pattern](../../patterns/queue-based-load-leveling.md).</span></span>
- <span data-ttu-id="a08bc-118">Megbízhatóan nyomon követi a hosszan futó munkafolyamatokat, több lépést vagy több alkalmazást érintő előrehaladását.</span><span class="sxs-lookup"><span data-stu-id="a08bc-118">Reliably tracks the progress of long-running workflows that involve multiple steps or multiple applications.</span></span>
- <span data-ttu-id="a08bc-119">Segítséget nyújt az alkalmazások szétválaszthatók.</span><span class="sxs-lookup"><span data-stu-id="a08bc-119">Helps to decouple applications.</span></span>
- <span data-ttu-id="a08bc-120">Integrálható a meglévő üzenet-alapú rendszerekhez.</span><span class="sxs-lookup"><span data-stu-id="a08bc-120">Integrates with existing message-based systems.</span></span>
- <span data-ttu-id="a08bc-121">Lehetővé teszi a munkahelyi használatát a várólistára kerül, ha a háttérrendszer nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="a08bc-121">Allows work to be queued when a backend system is not available.</span></span>

<span data-ttu-id="a08bc-122">Event Grid lehetővé teszi, hogy a különböző összetevők reagálhat rájuk, azok a rendszer, nem pedig hagyatkoznia a lekérdezéses vagy ütemezett feladatokat.</span><span class="sxs-lookup"><span data-stu-id="a08bc-122">Event Grid enables the various components in the system to react to events as they happen, rather than relying on polling or scheduled tasks.</span></span> <span data-ttu-id="a08bc-123">Csakúgy, mint egy üzenet-várólista nyújt segítséget az alkalmazások és szolgáltatások szétválaszthatók.</span><span class="sxs-lookup"><span data-stu-id="a08bc-123">As with a message queue, it helps decouple applications and services.</span></span> <span data-ttu-id="a08bc-124">Egy alkalmazás vagy szolgáltatás tehetik közzé az eseményeket, és bármely érdekelt előfizetők értesítést fog kapni.</span><span class="sxs-lookup"><span data-stu-id="a08bc-124">An application or service can publish events, and any interested subscribers will be notified.</span></span> <span data-ttu-id="a08bc-125">A küldő frissítése nélkül adhat hozzá új előfizetők számára.</span><span class="sxs-lookup"><span data-stu-id="a08bc-125">New subscribers can be added without updating the sender.</span></span>

<span data-ttu-id="a08bc-126">Sok Azure-szolgáltatás támogatja az Event Gridbe küldő eseményeket.</span><span class="sxs-lookup"><span data-stu-id="a08bc-126">Many Azure services support sending events to Event Grid.</span></span> <span data-ttu-id="a08bc-127">Például egy logikai alkalmazást egy eseményt, amikor új fájlokat adnak hozzá egy blob tároló figyelheti.</span><span class="sxs-lookup"><span data-stu-id="a08bc-127">For example, a logic app can listen for an event when new files are added to a blob store.</span></span> <span data-ttu-id="a08bc-128">Ez a minta lehetővé teszi a reaktív munkafolyamatok, ahol fájlt feltölteni, vagy egy üzenetet elhelyezése az üzenetsorban elindít egy sorozatát folyamatokat.</span><span class="sxs-lookup"><span data-stu-id="a08bc-128">This pattern enables reactive workflows, where uploading a file or putting a message on a queue kicks off a series of processes.</span></span> <span data-ttu-id="a08bc-129">A folyamatok előfordulhat, hogy hajtható végre párhuzamosan, vagy meghatározott sorrendben.</span><span class="sxs-lookup"><span data-stu-id="a08bc-129">The processes might be executed in parallel or in a specific sequence.</span></span>

## <a name="recommendations"></a><span data-ttu-id="a08bc-130">Javaslatok</span><span class="sxs-lookup"><span data-stu-id="a08bc-130">Recommendations</span></span>

<span data-ttu-id="a08bc-131">A javaslatok ismertetett [alapszintű enterprise integration] [ basic-enterprise-integration] ebben az architektúrában a alkalmazni.</span><span class="sxs-lookup"><span data-stu-id="a08bc-131">The recommendations described in [Basic enterprise integration][basic-enterprise-integration] apply to this architecture.</span></span> <span data-ttu-id="a08bc-132">Az alábbi javaslatokat is érvényesek:</span><span class="sxs-lookup"><span data-stu-id="a08bc-132">The following recommendations also apply:</span></span>

### <a name="service-bus"></a><span data-ttu-id="a08bc-133">Service Bus</span><span class="sxs-lookup"><span data-stu-id="a08bc-133">Service Bus</span></span>

<span data-ttu-id="a08bc-134">A Service Bus rendelkezik kétféle kézbesítési *lekéréses* vagy *leküldéses*.</span><span class="sxs-lookup"><span data-stu-id="a08bc-134">Service Bus has two delivery modes, *pull* or *push*.</span></span> <span data-ttu-id="a08bc-135">A lekéréses modell a fogadó folyamatosan üzeneteket kérdez le új.</span><span class="sxs-lookup"><span data-stu-id="a08bc-135">In the pull model, the receiver continuously polls for new messages.</span></span> <span data-ttu-id="a08bc-136">Lekérdezés nem elég hatékony, lehet, főleg, ha sok várólisták, hogy minden egyes néhány üzenetek fogadása, vagy ha nincs sok időt közötti üzenetek.</span><span class="sxs-lookup"><span data-stu-id="a08bc-136">Polling can be inefficient, especially if you have many queues that each receive a few messages, or if there a lot of time between messages.</span></span> <span data-ttu-id="a08bc-137">A leküldéses modell, a Service Bus Event Griden keresztül eseményt küld, ha új üzenetek vannak.</span><span class="sxs-lookup"><span data-stu-id="a08bc-137">In the push model, Service Bus sends an event through Event Grid when there are new messages.</span></span> <span data-ttu-id="a08bc-138">A fogadó feliratkozik az eseményre.</span><span class="sxs-lookup"><span data-stu-id="a08bc-138">The receiver subscribes to the event.</span></span> <span data-ttu-id="a08bc-139">Az esemény kiváltásakor a fogadó a következő köteg az üzenetek a Service Bus kér le.</span><span class="sxs-lookup"><span data-stu-id="a08bc-139">When the event is triggered, the receiver pulls the next batch of messages from Service Bus.</span></span>

<span data-ttu-id="a08bc-140">Amikor létrehoz egy logikai alkalmazást a Service Bus-üzenetek lefoglalhatja, az Event Grid integráció a leküldéses modell használatát javasoljuk.</span><span class="sxs-lookup"><span data-stu-id="a08bc-140">When you create a logic app to consume Service Bus messages, we recommend using the push model with Event Grid integration.</span></span> <span data-ttu-id="a08bc-141">Ez a legtöbbször további költséghatékony megoldás, mert a logikai alkalmazás nem kell lekérdeznie, a Service Bus.</span><span class="sxs-lookup"><span data-stu-id="a08bc-141">It's often more cost efficient, because the logic app doesn't need to poll Service Bus.</span></span> <span data-ttu-id="a08bc-142">További információkért lásd: [Azure Service Bus – Event Grid integráció áttekintése](/azure/service-bus-messaging/service-bus-to-event-grid-integration-concept).</span><span class="sxs-lookup"><span data-stu-id="a08bc-142">For more information, see [Azure Service Bus to Event Grid integration overview](/azure/service-bus-messaging/service-bus-to-event-grid-integration-concept).</span></span> <span data-ttu-id="a08bc-143">Jelenleg a Service Bus [prémium szintű](https://azure.microsoft.com/pricing/details/service-bus/) az Event Grid értesítések megadása kötelező.</span><span class="sxs-lookup"><span data-stu-id="a08bc-143">Currently, Service Bus [Premium tier](https://azure.microsoft.com/pricing/details/service-bus/) is required for Event Grid notifications.</span></span>

<span data-ttu-id="a08bc-144">Használat [PeekLock](/azure/service-bus-messaging/service-bus-messaging-overview#queues) üzenetek csoportja eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="a08bc-144">Use [PeekLock](/azure/service-bus-messaging/service-bus-messaging-overview#queues) for accessing a group of messages.</span></span> <span data-ttu-id="a08bc-145">PeekLock használatakor a logikai alkalmazás lépésekkel végrehajtása vagy a megszakítása előtt minden üzenetet érvényesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="a08bc-145">When you use PeekLock, the logic app can perform steps to validate each message before completing or abandoning the message.</span></span> <span data-ttu-id="a08bc-146">Ez a megközelítés véletlen üzenet adatvesztés elleni védelmet biztosít.</span><span class="sxs-lookup"><span data-stu-id="a08bc-146">This approach protects against accidental message loss.</span></span>

### <a name="event-grid"></a><span data-ttu-id="a08bc-147">Event Grid</span><span class="sxs-lookup"><span data-stu-id="a08bc-147">Event Grid</span></span>

<span data-ttu-id="a08bc-148">Ha egy Event Grid-trigger akkor aktiválódik, azt jelenti, hogy *legalább egy* esemény történt.</span><span class="sxs-lookup"><span data-stu-id="a08bc-148">When an Event Grid trigger fires, it means *at least one* event happened.</span></span> <span data-ttu-id="a08bc-149">Tételezzük fel, ha egy logikai alkalmazást egy Event Grid-triggerek, a Service Bus-üzenet beolvasása, azt kell, hogy több üzenetet lehet rendelkezésre állnak.</span><span class="sxs-lookup"><span data-stu-id="a08bc-149">For example, when a logic app gets an Event Grid triggers for a Service Bus message, it should assume that several messages might be available to process.</span></span>

<span data-ttu-id="a08bc-150">Event Grid egy kiszolgáló nélküli modellt használ.</span><span class="sxs-lookup"><span data-stu-id="a08bc-150">Event Grid uses a serverless model.</span></span> <span data-ttu-id="a08bc-151">A számlázás a műveletek (esemény végrehajtások) száma alapján lesz kiszámítva.</span><span class="sxs-lookup"><span data-stu-id="a08bc-151">Billing is calculated based on the number of operations (event executions).</span></span> <span data-ttu-id="a08bc-152">További információkért lásd: [Event Grid díjszabási](https://azure.microsoft.com/pricing/details/event-grid/).</span><span class="sxs-lookup"><span data-stu-id="a08bc-152">For more information, see [Event Grid pricing](https://azure.microsoft.com/pricing/details/event-grid/).</span></span> <span data-ttu-id="a08bc-153">Jelenleg nincsenek szint szempontok az Event Gridhez.</span><span class="sxs-lookup"><span data-stu-id="a08bc-153">Currently, there are no tier considerations for Event Grid.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="a08bc-154">Méretezési szempontok</span><span class="sxs-lookup"><span data-stu-id="a08bc-154">Scalability considerations</span></span>

<span data-ttu-id="a08bc-155">Magasabb szintű skálázhatóság érdekében a Service Bus prémium szintű horizontálisan üzenetkezelési egységek száma.</span><span class="sxs-lookup"><span data-stu-id="a08bc-155">To achieve higher scalability, the Service Bus Premium tier can scale out the number of messaging units.</span></span> <span data-ttu-id="a08bc-156">Prémium szintű konfigurációk egy, kettő vagy négy üzenetkezelési egységre is rendelkezhet.</span><span class="sxs-lookup"><span data-stu-id="a08bc-156">Premium tier configurations can have one, two, or four messaging units.</span></span> <span data-ttu-id="a08bc-157">A Service Bus méretezésével kapcsolatos további információkért lásd: [ajánlott eljárások a teljesítmény Service Bus-üzenetkezelés használatával](/azure/service-bus-messaging/service-bus-performance-improvements).</span><span class="sxs-lookup"><span data-stu-id="a08bc-157">For more information about scaling Service Bus, see [Best practices for performance improvements by using Service Bus Messaging](/azure/service-bus-messaging/service-bus-performance-improvements).</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="a08bc-158">Rendelkezésre állási szempontok</span><span class="sxs-lookup"><span data-stu-id="a08bc-158">Availability considerations</span></span>

<span data-ttu-id="a08bc-159">Tekintse át az SLA-t az egyes szolgáltatásokhoz:</span><span class="sxs-lookup"><span data-stu-id="a08bc-159">Review the SLA for each service:</span></span>

- <span data-ttu-id="a08bc-160">[Az API Management szolgáltatásiszint-szerződés][apim-sla]</span><span class="sxs-lookup"><span data-stu-id="a08bc-160">[API Management SLA][apim-sla]</span></span>
- <span data-ttu-id="a08bc-161">[Event Grid szolgáltatásiszint-szerződés][event-grid-sla]</span><span class="sxs-lookup"><span data-stu-id="a08bc-161">[Event Grid SLA][event-grid-sla]</span></span>
- <span data-ttu-id="a08bc-162">[A Logic Apps szolgáltatásiszint-szerződés][logic-apps-sla]</span><span class="sxs-lookup"><span data-stu-id="a08bc-162">[Logic Apps SLA][logic-apps-sla]</span></span>
- <span data-ttu-id="a08bc-163">[Service Busra vonatkozó SLA][sb-sla]</span><span class="sxs-lookup"><span data-stu-id="a08bc-163">[Service Bus SLA][sb-sla]</span></span>

<span data-ttu-id="a08bc-164">Ahhoz, hogy feladatátvétel súlyos kimaradás során, vegye fontolóra geo-vészhelyreállítás a Service Bus prémium szintű.</span><span class="sxs-lookup"><span data-stu-id="a08bc-164">To enable failover if a serious outage occurs, consider implementing geo-disaster recovery in Service Bus Premium.</span></span> <span data-ttu-id="a08bc-165">További információkért lásd: [Azure Service Bus geo-disaster recovery](/azure/service-bus-messaging/service-bus-geo-dr).</span><span class="sxs-lookup"><span data-stu-id="a08bc-165">For more information, see [Azure Service Bus geo-disaster recovery](/azure/service-bus-messaging/service-bus-geo-dr).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="a08bc-166">Biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="a08bc-166">Security considerations</span></span>

<span data-ttu-id="a08bc-167">A Service Bus biztonságos, használja a közös hozzáférésű jogosultságkód (SAS).</span><span class="sxs-lookup"><span data-stu-id="a08bc-167">To secure Service Bus, use shared access signature (SAS).</span></span> <span data-ttu-id="a08bc-168">Is hozzáférést biztosít egy felhasználó a megadott jogokat a Service Bus-erőforrások használatával [SAS hitelesítési](/azure/service-bus-messaging/service-bus-sas).</span><span class="sxs-lookup"><span data-stu-id="a08bc-168">You can grant a user access to Service Bus resources with specific rights by using [SAS authentication](/azure/service-bus-messaging/service-bus-sas).</span></span> <span data-ttu-id="a08bc-169">További információkért lásd: [Service Bus-hitelesítés és engedélyezés](/azure/service-bus-messaging/service-bus-authentication-and-authorization).</span><span class="sxs-lookup"><span data-stu-id="a08bc-169">For more information, see [Service Bus authentication and authorization](/azure/service-bus-messaging/service-bus-authentication-and-authorization).</span></span>

<span data-ttu-id="a08bc-170">Ha szeretne közzétenni egy HTTP-végpontot, Service Bus-üzenetsorba, például az új üzeneteket tehet közzé az API Management védheti a várólista fronting a végpont által.</span><span class="sxs-lookup"><span data-stu-id="a08bc-170">If you need to expose a Service Bus queue as an HTTP endpoint, for example, to post new messages, use API Management to secure the queue by fronting the endpoint.</span></span> <span data-ttu-id="a08bc-171">A végpont tanúsítványokat vagy OAuth-hitelesítés megfelelő majd gondoskodhat.</span><span class="sxs-lookup"><span data-stu-id="a08bc-171">You can then secure the endpoint with certificates or OAuth authentication as appropriate.</span></span> <span data-ttu-id="a08bc-172">A legegyszerűbben úgy, hogy a végpont biztonságos köztes egy logikai alkalmazást használ egy HTTP-kérés/válasz eseményindító.</span><span class="sxs-lookup"><span data-stu-id="a08bc-172">The easiest way to secure an endpoint is using a logic app with an HTTP request/response trigger as an intermediary.</span></span>

<span data-ttu-id="a08bc-173">Az Event Grid szolgáltatás egy érvényesítési kód eseménykézbesítés védi.</span><span class="sxs-lookup"><span data-stu-id="a08bc-173">The Event Grid service secures event delivery through a validation code.</span></span> <span data-ttu-id="a08bc-174">Ha a Logic Apps használatával az események felhasználásához, érvényesítés automatikusan történik.</span><span class="sxs-lookup"><span data-stu-id="a08bc-174">If you use Logic Apps to consume the event, validation is automatically performed.</span></span> <span data-ttu-id="a08bc-175">További információkért lásd: [Event Grid biztonsági és hitelesítési](/azure/event-grid/security-authentication).</span><span class="sxs-lookup"><span data-stu-id="a08bc-175">For more information, see [Event Grid security and authentication](/azure/event-grid/security-authentication).</span></span>

[apim]: /azure/api-management
[apim-sla]: https://azure.microsoft.com/support/legal/sla/api-management/
[event-grid]: /azure/event-grid/
[event-grid-sla]: https://azure.microsoft.com/support/legal/sla/event-grid
[logic-apps]: /azure/logic-apps/logic-apps-overview
[logic-apps-sla]: https://azure.microsoft.com/support/legal/sla/logic-apps
[sb-sla]: https://azure.microsoft.com/support/legal/sla/service-bus/
[service-bus]: /azure/service-bus-messaging/
[basic-enterprise-integration]: ./basic-enterprise-integration.md
