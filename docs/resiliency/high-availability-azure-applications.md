---
title: Magas rendelkezésre állás a Azure-alkalmazások
description: A műszaki áttekintés és és a magas rendelkezésre állású alkalmazások támaszkodva a Microsoft Azure ad részletes tájékoztatást.
author: adamglick
ms.date: 05/31/2017
ms.openlocfilehash: f116b9e64f1722b5141ae90239d5c8a8b4a89487
ms.sourcegitcommit: e67b751f230792bba917754d67789a20810dc76b
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30848563"
---
[!INCLUDE [header](../_includes/header.md)]

# <a name="high-availability-for-applications-built-on-microsoft-azure"></a><span data-ttu-id="d2e42-103">Magas rendelkezésre állás a Microsoft Azure épülő alkalmazások</span><span class="sxs-lookup"><span data-stu-id="d2e42-103">High availability for applications built on Microsoft Azure</span></span>
<span data-ttu-id="d2e42-104">A magas rendelkezésre állású alkalmazások elnyeli a rendelkezésre állási, a betöltés és a függő szolgáltatások, valamint a hardver ideiglenes hibák ingadozását.</span><span class="sxs-lookup"><span data-stu-id="d2e42-104">A highly available application absorbs fluctuations in availability, load, and temporary failures in dependent services and hardware.</span></span> <span data-ttu-id="d2e42-105">Az alkalmazás továbbra is fennáll, üzleti követelmények vagy alkalmazás szolgáltatásiszint-szerződések (SLA) által megadott akadálytalanul végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="d2e42-105">The application continues to perform acceptably, as defined by business requirements or application service-level agreements (SLAs).</span></span>

## <a name="azure-high-availability-features"></a><span data-ttu-id="d2e42-106">Az Azure magas rendelkezésre állású szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="d2e42-106">Azure high-availability features</span></span>
<span data-ttu-id="d2e42-107">Azure számos beépített platform szolgáltatást, amely támogatja a magas rendelkezésre állású alkalmazások rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="d2e42-107">Azure has many built-in platform features that support highly available applications.</span></span> <span data-ttu-id="d2e42-108">Ez a szakasz ismerteti azokat a kulcsfontosságú szolgáltatásokat egy részénél.</span><span class="sxs-lookup"><span data-stu-id="d2e42-108">This section describes some of those key features.</span></span>

### <a name="fabric-controller"></a><span data-ttu-id="d2e42-109">Fabric-vezérlő</span><span class="sxs-lookup"><span data-stu-id="d2e42-109">Fabric controller</span></span>
<span data-ttu-id="d2e42-110">Az Azure fabric controller kiépítését, és az Azure számítási példányokért állapotát figyeli.</span><span class="sxs-lookup"><span data-stu-id="d2e42-110">The Azure fabric controller provisions and monitors the condition of Azure compute instances.</span></span> <span data-ttu-id="d2e42-111">A fabric controller figyeli a hardver állapotát, és a gazdagép és vendég gépen példányok szoftver.</span><span class="sxs-lookup"><span data-stu-id="d2e42-111">The fabric controller monitors the status of the hardware and software of the host and guest machine instances.</span></span> <span data-ttu-id="d2e42-112">Ha hibát észlel, automatikusan áthelyezése a Virtuálisgép-példányok által karbantartott SLA-k.</span><span class="sxs-lookup"><span data-stu-id="d2e42-112">When it detects a failure, it maintains SLAs by automatically relocating the VM instances.</span></span> <span data-ttu-id="d2e42-113">További hiba és a frissítési tartományok fogalma a compute SLA-t támogatja.</span><span class="sxs-lookup"><span data-stu-id="d2e42-113">The concept of fault and upgrade domains further supports the compute SLA.</span></span>

<span data-ttu-id="d2e42-114">Amikor a felhőalapú szolgáltatás szerepkör több példánya van telepítve, Azure különböző tartalék tartományok ezek a példányok telepíti.</span><span class="sxs-lookup"><span data-stu-id="d2e42-114">When multiple Cloud Service role instances are deployed, Azure deploys these instances to different fault domains.</span></span> <span data-ttu-id="d2e42-115">A tartalék tartomány határ lényegében egy másik hardverre állvány ugyanabban a régióban.</span><span class="sxs-lookup"><span data-stu-id="d2e42-115">A fault domain boundary is essentially a different hardware rack in the same region.</span></span> <span data-ttu-id="d2e42-116">Tartalék tartományok csökkenti annak a valószínűsége, hogy a honosított hardverhiba megzavarja a szolgáltatás egy alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="d2e42-116">Fault domains reduce the probability that a localized hardware failure interrupts the service of an application.</span></span> <span data-ttu-id="d2e42-117">A feldolgozói szerepkörök vagy a webes szerepkörök tartalék tartományok száma nem lehet kezelni.</span><span class="sxs-lookup"><span data-stu-id="d2e42-117">You cannot manage the number of fault domains of your worker roles or web roles.</span></span> <span data-ttu-id="d2e42-118">A fabric controller a dedikált erőforrások, amelyek az Azure által kezelt alkalmazásokból külön.</span><span class="sxs-lookup"><span data-stu-id="d2e42-118">The fabric controller uses dedicated resources that are separate from Azure-hosted applications.</span></span> <span data-ttu-id="d2e42-119">Mivel az Azure rendszer magja körül, 100 %-os hasznos üzemidő igényel.</span><span class="sxs-lookup"><span data-stu-id="d2e42-119">It requires 100 percent uptime because it serves as the nucleus of the Azure system.</span></span> <span data-ttu-id="d2e42-120">Azt figyeli, és kezeli a szerepkörpéldányok tartalék tartományok között.</span><span class="sxs-lookup"><span data-stu-id="d2e42-120">It monitors and manages role instances across fault domains.</span></span>

<span data-ttu-id="d2e42-121">Az alábbi ábrán látható Azure megosztott erőforrások, hogy a háló vezérlő telepíti, és kezeli a különböző tartalék tartományok között.</span><span class="sxs-lookup"><span data-stu-id="d2e42-121">The following diagram shows Azure shared resources that the fabric controller deploys and manages across different fault domains.</span></span>

![Tartalék tartomány elkülönítési egyszerűsített nézete](./images/high-availability-azure-applications/fault-domain-isolation.png)

<span data-ttu-id="d2e42-123">Míg tartalék tartományok fizikai színkivonatok hiba elhárítása érdekében, a frissítési tartományok példány elkülönítése határozza meg, mely egy szolgáltatás példányának frissíti, az adott időpontban logikai egységek.</span><span class="sxs-lookup"><span data-stu-id="d2e42-123">While fault domains are physical separations to mitigate failure, upgrade domains are logical units of instance separation that determine which instances of a service will be upgraded at a specific time.</span></span> <span data-ttu-id="d2e42-124">Alapértelmezés szerint az öt frissítési tartományok az üzemeltetett szolgáltatás üzembe helyezéshez vannak definiálva.</span><span class="sxs-lookup"><span data-stu-id="d2e42-124">By default, five upgrade domains are defined for your hosted service deployment.</span></span> <span data-ttu-id="d2e42-125">Azonban módosíthatja ezt az értéket a szolgáltatásdefiníciós fájlban.</span><span class="sxs-lookup"><span data-stu-id="d2e42-125">However, you can change that value in the service definition file.</span></span> <span data-ttu-id="d2e42-126">Például ha a webes szerepkör nyolc példányai, nincsenek két-három frissítési tartományok példány és egy frissítési tartományt két példánya.</span><span class="sxs-lookup"><span data-stu-id="d2e42-126">For example, if you have eight instances of your web role, there are two instances in three upgrade domains and two instances in one upgrade domain.</span></span> <span data-ttu-id="d2e42-127">Azure határozza meg, hogy a frissítés során a frissítési tartományok száma alapján.</span><span class="sxs-lookup"><span data-stu-id="d2e42-127">Azure defines the update sequence based on the number of upgrade domains.</span></span> <span data-ttu-id="d2e42-128">További információkért lásd: [felhőalapú szolgáltatás frissítése](/azure/cloud-services/cloud-services-update-azure-service/).</span><span class="sxs-lookup"><span data-stu-id="d2e42-128">For more information, see [Update a cloud service](/azure/cloud-services/cloud-services-update-azure-service/).</span></span>

### <a name="features-in-other-services"></a><span data-ttu-id="d2e42-129">Egyéb szolgáltatások szolgáltatásai</span><span class="sxs-lookup"><span data-stu-id="d2e42-129">Features in other services</span></span>
<span data-ttu-id="d2e42-130">A platform funkciói, amely támogatja a magas rendelkezésre állású számítási erőforrásokat, valamint az Azure magas rendelkezésre állású szolgáltatások beágyazása az egyéb szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="d2e42-130">In addition to the platform features that support high availability of compute resources, Azure embeds high-availability features in its other services.</span></span> <span data-ttu-id="d2e42-131">Például az Azure Storage Azure-tárfiókja adatait legalább három replikáit tárolja.</span><span class="sxs-lookup"><span data-stu-id="d2e42-131">For example, Azure Storage maintains at least three replicas of all data in your Azure storage account.</span></span> <span data-ttu-id="d2e42-132">Emellett lehetővé teszi az adatok másolatát tárolja egy másodlagos régióban a georeplikáció.</span><span class="sxs-lookup"><span data-stu-id="d2e42-132">It also enables geo-replication to store copies of your data in a secondary region.</span></span> <span data-ttu-id="d2e42-133">Az Azure Content Delivery Network lehetővé teszi, hogy a blobok gyorsítótárazni a világ redundancia, a méretezhetőség és a kisebb késést biztosít.</span><span class="sxs-lookup"><span data-stu-id="d2e42-133">The Azure Content Delivery Network allows blobs to be cached around the world for redundancy, scalability, and lower latency.</span></span> <span data-ttu-id="d2e42-134">Az Azure SQL-adatbázis, valamint a több replikáit tárolja.</span><span class="sxs-lookup"><span data-stu-id="d2e42-134">Azure SQL Database maintains multiple replicas as well.</span></span>

<span data-ttu-id="d2e42-135">Azure platformon rendelkezésre állási funkcióval mélyebb tárgyalását lásd: [rugalmassági műszaki útmutatót](index.md).</span><span class="sxs-lookup"><span data-stu-id="d2e42-135">For a deeper discussion of Azure platform availability features, see [Resiliency technical guidance](index.md).</span></span> <span data-ttu-id="d2e42-136">Lásd még: [ajánlott eljárások a Windows Azure felügyeleti teendők központjaként szolgáltatások tervezéséhez](https://azure.microsoft.com/blog/best-practices-for-designing-large-scale-services-on-windows-azure/).</span><span class="sxs-lookup"><span data-stu-id="d2e42-136">Also see [Best practices for designing large-scale services on Windows Azure](https://azure.microsoft.com/blog/best-practices-for-designing-large-scale-services-on-windows-azure/).</span></span>

<span data-ttu-id="d2e42-137">Azure több funkció, amely támogatja a magas rendelkezésre állást biztosít, de fontos tudni, hogy azok korlátai:</span><span class="sxs-lookup"><span data-stu-id="d2e42-137">Although Azure provides multiple features that support high availability, it's important to understand their limitations:</span></span>

* <span data-ttu-id="d2e42-138">Számítás Azure biztosítja azt, hogy a szerepkörök rendelkezésre álló és fut, de az nem észleli, ha az alkalmazás fut, vagy túlterhelt.</span><span class="sxs-lookup"><span data-stu-id="d2e42-138">For compute, Azure guarantees that your roles are available and running, but it cannot detect whether your application is running or overloaded.</span></span>
* <span data-ttu-id="d2e42-139">Az Azure SQL Database adatait replikálja a rendszer szinkron módon történik a régión belül.</span><span class="sxs-lookup"><span data-stu-id="d2e42-139">For Azure SQL Database, data is replicated synchronously within the region.</span></span> <span data-ttu-id="d2e42-140">Lehetősége van aktív georeplikáció, amely lehetővé teszi, hogy legfeljebb négy további adatbázis-másolatok a ugyanabban a régióban (vagy különböző régiókban).</span><span class="sxs-lookup"><span data-stu-id="d2e42-140">You can choose active geo-replication, which allows up to four additional database copies in the same region (or different regions).</span></span> <span data-ttu-id="d2e42-141">Ezek az adatbázis-replikák nincsenek időpontban biztonsági mentések, SQL-adatbázis időpontban a biztonsági mentési lehetőségeket nyújtja.</span><span class="sxs-lookup"><span data-stu-id="d2e42-141">While these database replicas are not point-in-time backups, SQL Database does provide point-in-time backup capabilities.</span></span> <span data-ttu-id="d2e42-142">További információkért lásd: [automatikus biztonsági mentések használatával Azure SQL-adatbázis helyreállítása: pont időponthoz kötött visszaállítás](/azure/sql-database/sql-database-recovery-using-backups#point-in-time-restore).</span><span class="sxs-lookup"><span data-stu-id="d2e42-142">For more information, see [Recover an Azure SQL Database using automated data backups: Point-in-time restore](/azure/sql-database/sql-database-recovery-using-backups#point-in-time-restore).</span></span>
* <span data-ttu-id="d2e42-143">Az Azure Storage tábla adatai és a blob adatait egy másik régióban alapértelmezés szerint lesznek replikálva.</span><span class="sxs-lookup"><span data-stu-id="d2e42-143">For Azure Storage, table data and blob data are replicated by default to an alternate region.</span></span> <span data-ttu-id="d2e42-144">Azonban nem férhet hozzá a replikák mindaddig, amíg a Microsoft úgy dönt, hogy áthelyezze a feladatokat a másodlagos helyre.</span><span class="sxs-lookup"><span data-stu-id="d2e42-144">However, you cannot access the replicas until Microsoft chooses to fail over to the alternate site.</span></span> <span data-ttu-id="d2e42-145">Régió feladatátvétel csak a hosszan tartó régió kiterjedő szolgáltatás szüneteltetése során, és nincs nincs SLA-t a földrajzi-feladatátvételi idő.</span><span class="sxs-lookup"><span data-stu-id="d2e42-145">A region failover occurs only during a prolonged region-wide service disruption, and there is no SLA for geo-failover time.</span></span> <span data-ttu-id="d2e42-146">Is fontos megjegyezni, hogy sérült adatainak gyors között osztja el a replikához.</span><span class="sxs-lookup"><span data-stu-id="d2e42-146">It's also important to note that any data corruption quickly spreads to the replicas.</span></span> <span data-ttu-id="d2e42-147">Ezen okok miatt platform rendelkezésre állási funkcióval rendelkező alkalmazás-specifikus rendelkezésre állási funkciót, beleértve a időpontban biztonsági mentéseket a blob típusú adatok létrehozása a blob pillanatkép funkció kell kiegészíteni.</span><span class="sxs-lookup"><span data-stu-id="d2e42-147">For these reasons, you must supplement platform availability features with application-specific availability features, including the blob snapshot feature to create point-in-time backups of blob data.</span></span>

### <a name="availability-sets-for-azure-virtual-machines"></a><span data-ttu-id="d2e42-148">Rendelkezésre állási készletek az Azure virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="d2e42-148">Availability sets for Azure Virtual Machines</span></span>
<span data-ttu-id="d2e42-149">Ez a dokumentum elsősorban a felhőalapú szolgáltatásokat, amelyek platform,--szolgáltatás (PaaS) modellt használnak összpontosít.</span><span class="sxs-lookup"><span data-stu-id="d2e42-149">This document primarily focuses on cloud services, which use a platform-as-a-service (PaaS) model.</span></span> <span data-ttu-id="d2e42-150">Van még adott rendelkezésre állási funkcióval az Azure virtuális gépek, amelyek olyan infrastruktúra,--szolgáltatás (IaaS) modellt használnak.</span><span class="sxs-lookup"><span data-stu-id="d2e42-150">There are also specific availability features for Azure Virtual Machines, which use an infrastructure-as-a-service (IaaS) model.</span></span> <span data-ttu-id="d2e42-151">A virtuális gépek magas rendelkezésre állás elérése érdekében rendelkezésre állási készletek, amelyek fault és frissítési tartományt hasonló funkcióval szolgálnak kell használnia.</span><span class="sxs-lookup"><span data-stu-id="d2e42-151">To achieve high availability with Virtual Machines, you must use availability sets, which serve a similar function to fault and upgrade domains.</span></span> <span data-ttu-id="d2e42-152">Egy rendelkezésre állási csoportot belül Azure állítható be a virtuális gépek oly módon, hogy a honosított hardver hibák és karbantartási tevékenységeket, hogy a csoportban található összes gép leáll.</span><span class="sxs-lookup"><span data-stu-id="d2e42-152">Within an availability set, Azure positions the virtual machines in a way that prevents localized hardware faults and maintenance activities from bringing down all the machines in that group.</span></span> <span data-ttu-id="d2e42-153">Rendelkezésre állási csoportok az Azure garantált szolgáltatási szintje a virtuális gépek rendelkezésre állásának eléréséhez szükséges.</span><span class="sxs-lookup"><span data-stu-id="d2e42-153">Availability sets are required to achieve the Azure SLA for the availability of Virtual Machines.</span></span>

<span data-ttu-id="d2e42-154">Az alábbi ábrán látható, két rendelkezésre állási készletek és az SQL Server virtuális gépek, illetve.</span><span class="sxs-lookup"><span data-stu-id="d2e42-154">The following diagram shows two availability sets for web and SQL Server virtual machines, respectively.</span></span>

![Rendelkezésre állási készletek az Azure virtuális gépek](./images/high-availability-azure-applications/availability-set-for-azure-virtual-machines.png)

> [!NOTE]
> <span data-ttu-id="d2e42-156">A fenti ábrán az SQL Server telepítve és fut a virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="d2e42-156">In the preceding diagram, SQL Server is installed and running on virtual machines.</span></span> <span data-ttu-id="d2e42-157">Ez eltér az Azure SQL Database, amely felügyelt szolgáltatásként adatbázist biztosít.</span><span class="sxs-lookup"><span data-stu-id="d2e42-157">This is different from Azure SQL Database, which provides a database as a managed service.</span></span>
> 
> 

## <a name="application-strategies-for-high-availability"></a><span data-ttu-id="d2e42-158">Alkalmazás stratégiák a magas rendelkezésre állás</span><span class="sxs-lookup"><span data-stu-id="d2e42-158">Application strategies for high availability</span></span>
<span data-ttu-id="d2e42-159">A magas rendelkezésre állás érdekében a legtöbb alkalmazás stratégiák tartalmaz, amely redundancia vagy alkalmazás-összetevők közötti rögzített függőségek eltávolítása.</span><span class="sxs-lookup"><span data-stu-id="d2e42-159">Most application strategies for high availability involve either redundancy or the removal of hard dependencies between application components.</span></span> <span data-ttu-id="d2e42-160">Alkalmazás tervét támogatnia kell a hibatűrés Azure vagy harmadik féltől származó szolgáltatással szórványos leállások során.</span><span class="sxs-lookup"><span data-stu-id="d2e42-160">Application design should support fault tolerance during sporadic downtime of Azure or third-party services.</span></span> <span data-ttu-id="d2e42-161">A következő szakaszok ismertetik a felhőalapú szolgáltatások rendelkezésre állásának javítása az alkalmazás minták.</span><span class="sxs-lookup"><span data-stu-id="d2e42-161">The following sections describe application patterns for improving the availability of your cloud services.</span></span>

### <a name="asynchronous-communication-and-durable-queues"></a><span data-ttu-id="d2e42-162">Aszinkron kommunikációt és a tartós várólisták</span><span class="sxs-lookup"><span data-stu-id="d2e42-162">Asynchronous communication and durable queues</span></span>
<span data-ttu-id="d2e42-163">Rendelkezésre állás biztosításához az Azure-alkalmazások javítása érdekében fontolja meg lazán összekapcsolt szolgáltatások közötti aszinkron kommunikációhoz.</span><span class="sxs-lookup"><span data-stu-id="d2e42-163">To increase availability in Azure applications, consider asynchronous communication between loosely coupled services.</span></span> <span data-ttu-id="d2e42-164">Ebben a mintában üzenetek kerülnek vagy tárolási sorok vagy az Azure Service Bus-üzenetsorok későbbi feldolgozásra.</span><span class="sxs-lookup"><span data-stu-id="d2e42-164">In this pattern, messages are written to either storage queues or Azure Service Bus queues for later processing.</span></span> <span data-ttu-id="d2e42-165">Üzenet a várólistában írásakor vezérlő azonnal visszaadja a küldőnek.</span><span class="sxs-lookup"><span data-stu-id="d2e42-165">When a message is written to the queue, control immediately returns to the sender.</span></span> <span data-ttu-id="d2e42-166">(Általában valósul meg a feldolgozói szerepkör) az alkalmazás egy másik szolgáltatás feldolgozza az üzenetet.</span><span class="sxs-lookup"><span data-stu-id="d2e42-166">Another service of the application (typically implemented as a worker role) processes the message.</span></span> <span data-ttu-id="d2e42-167">Ha a feldolgozási szolgáltatás leáll, az üzenetek gyűlik össze a várólista a feldolgozási szolgáltatás visszaállításáig.</span><span class="sxs-lookup"><span data-stu-id="d2e42-167">If the processing service stops working, the messages accumulate in the queue until the processing service is restored.</span></span> <span data-ttu-id="d2e42-168">Az előtér-feladó és az üzenet processzor között nincs közvetlen függőség van.</span><span class="sxs-lookup"><span data-stu-id="d2e42-168">There is no direct dependency between the front-end sender and the message processor.</span></span> <span data-ttu-id="d2e42-169">Ezzel a megoldással a szinkron hívások okozó szűk keresztmetszetek az elosztott alkalmazásokban.</span><span class="sxs-lookup"><span data-stu-id="d2e42-169">This eliminates synchronous service calls that can cause bottlenecks in distributed applications.</span></span>

<span data-ttu-id="d2e42-170">Ez a minta egy változata Azure Storage (BLOB, tábla vagy várólisták) vagy a Service Bus-üzenetsorok adatbázis sikertelen hívások adatait tárolja.</span><span class="sxs-lookup"><span data-stu-id="d2e42-170">A variation of this pattern stores information about failed database calls in Azure Storage (blobs, tables, or queues) or Service Bus queues.</span></span> <span data-ttu-id="d2e42-171">Például egy szinkron (például az Azure SQL Database) egy másik szolgáltatásba az alkalmazáson belül hibát jelez, ismételten.</span><span class="sxs-lookup"><span data-stu-id="d2e42-171">For example, a synchronous call within an application to another service (such as Azure SQL Database) fails repeatedly.</span></span> <span data-ttu-id="d2e42-172">Előfordulhat, hogy a kérésre szerializálni a tartós tárba.</span><span class="sxs-lookup"><span data-stu-id="d2e42-172">You might be able to serialize that request into durable storage.</span></span> <span data-ttu-id="d2e42-173">Később bármikor Ha a szolgáltatás vagy az adatbázis online elérhető lesz, az alkalmazás is küldje el újra a kérelmet tárolóból.</span><span class="sxs-lookup"><span data-stu-id="d2e42-173">At some later point when the service or database is back online, the application can resubmit the request from storage.</span></span> <span data-ttu-id="d2e42-174">Ebben a modellben különbség, hogy a köztes hely szolgál csak során hibák, nem az alkalmazás munkafolyamata során.</span><span class="sxs-lookup"><span data-stu-id="d2e42-174">The difference in this model is that the intermediate location is used only during failures, not as a regular part of the application workflow.</span></span>

<span data-ttu-id="d2e42-175">Mindkét esetben aszinkron kommunikációt és köztes tárolási megakadályozhatják, hogy egy leállított háttér-szolgáltatás a teljes alkalmazás leáll.</span><span class="sxs-lookup"><span data-stu-id="d2e42-175">In both scenarios, asynchronous communication and intermediate storage prevent a downed back-end service from bringing down the entire application.</span></span> <span data-ttu-id="d2e42-176">A logikai közvetítő várólisták szolgál.</span><span class="sxs-lookup"><span data-stu-id="d2e42-176">Queues serve as a logical intermediary.</span></span> <span data-ttu-id="d2e42-177">Sorkezelési szolgáltatások közötti kiválasztásáról további információkért lásd: [Azure várólisták és az Azure Service Bus-üzenetsorok &mdash; képest és ellentétben](/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted/).</span><span class="sxs-lookup"><span data-stu-id="d2e42-177">For more information on choosing between queuing services, see [Azure queues and Azure Service Bus queues &mdash; compared and contrasted](/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted/).</span></span>

### <a name="fault-detection-and-retry-logic"></a><span data-ttu-id="d2e42-178">Hiba észlelése, és próbálkozzon újra logika</span><span class="sxs-lookup"><span data-stu-id="d2e42-178">Fault detection and retry logic</span></span>
<span data-ttu-id="d2e42-179">Egyik fontos szempontja a magas rendelkezésre állású alkalmazások kialakításának újrapróbálkozási logika egy szolgáltatás, amely ideiglenesen nem érhető el kezelésére kód használata.</span><span class="sxs-lookup"><span data-stu-id="d2e42-179">A key aspect of the design of highly available applications is the use of retry logic within code to gracefully handle a service that is temporarily unavailable.</span></span> <span data-ttu-id="d2e42-180">Azure Storage mind az Azure Service Bus SDK újabb verzióiban az újrapróbálkozások natív módon támogatja.</span><span class="sxs-lookup"><span data-stu-id="d2e42-180">Recent versions of SDKs for both Azure Storage and Azure Service Bus natively support retries.</span></span> <span data-ttu-id="d2e42-181">Az egyéni újrapróbálkozási logika biztosítása az alkalmazás további információkért lásd: a [újrapróbálkozási mintát](../patterns/retry.md).</span><span class="sxs-lookup"><span data-stu-id="d2e42-181">For more information on providing custom retry logic for your application, see the [Retry pattern](../patterns/retry.md).</span></span>

### <a name="reference-data-pattern-for-high-availability"></a><span data-ttu-id="d2e42-182">A magas rendelkezésre állású hivatkozás adatmintát</span><span class="sxs-lookup"><span data-stu-id="d2e42-182">Reference data pattern for high availability</span></span>
<span data-ttu-id="d2e42-183">Referenciaadatok az alkalmazás csak olvasható adatai.</span><span class="sxs-lookup"><span data-stu-id="d2e42-183">Reference data is the read-only data of an application.</span></span> <span data-ttu-id="d2e42-184">Ezeket az adatokat biztosít a az üzleti környezet, amelyben az alkalmazás adatokat állít elő tranzakciós üzleti művelet során.</span><span class="sxs-lookup"><span data-stu-id="d2e42-184">This data provides the business context within which the application generates transactional data during a business operation.</span></span> <span data-ttu-id="d2e42-185">Pillanatkép készítése a referencia-adatokat a tranzakció befejeződött időpontjában tranzakciós adatok integritásának függ.</span><span class="sxs-lookup"><span data-stu-id="d2e42-185">The integrity of transactional data depends on a snapshot of the reference data at the time the transaction was completed.</span></span>

<span data-ttu-id="d2e42-186">Referenciaadatok szükség az alkalmazás megfelelő működését.</span><span class="sxs-lookup"><span data-stu-id="d2e42-186">Reference data is necessary for the proper operation of the application.</span></span> <span data-ttu-id="d2e42-187">Számos olyan alkalmazás létrehozása és karbantartása a referenciaadatok; törzsadat-felügyelet (MDM) rendszerek gyakran ez a művelet végrehajtására szolgál(nak).</span><span class="sxs-lookup"><span data-stu-id="d2e42-187">Various applications create and maintain reference data; master data management (MDM) systems often perform this function.</span></span> <span data-ttu-id="d2e42-188">Ezek a rendszerek a referenciaadatok életciklusának felelősek.</span><span class="sxs-lookup"><span data-stu-id="d2e42-188">These systems are responsible for the life cycle of the reference data.</span></span> <span data-ttu-id="d2e42-189">Referenciaadatok például termékkatalógus, alkalmazott master, részek master és berendezések fő.</span><span class="sxs-lookup"><span data-stu-id="d2e42-189">Examples of reference data include product catalog, employee master, parts master, and equipment master.</span></span> <span data-ttu-id="d2e42-190">Referenciaadatok kezdeményezhetik a szervezeten kívülre, például irányítószám vagy adó díjszabás is.</span><span class="sxs-lookup"><span data-stu-id="d2e42-190">Reference data can also originate from outside the organization, for example, postal codes or tax rates.</span></span> <span data-ttu-id="d2e42-191">Referenciaadatok rendelkezésre állásának növelése kapcsolatos olyan stratégiák nehezen általában kevesebb mint a tranzakciós adatok.</span><span class="sxs-lookup"><span data-stu-id="d2e42-191">Strategies for increasing the availability of reference data are typically less difficult than those for transactional data.</span></span> <span data-ttu-id="d2e42-192">Referenciaadatok azt az előnyt, hogy legtöbbször nem módosítható.</span><span class="sxs-lookup"><span data-stu-id="d2e42-192">Reference data has the advantage of being mostly immutable.</span></span>

<span data-ttu-id="d2e42-193">Hivatkozási adatokat használó Azure webes és feldolgozói szerepkörök lehet kapcsolódni a autonóm futási időben telepítésével a referenciaadatok együtt az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="d2e42-193">Azure web and worker roles that consume reference data can be made autonomous at runtime by deploying the reference data along with the application.</span></span> <span data-ttu-id="d2e42-194">Ez a megközelítés ideális, ha a helyi tárterület mérete lehetővé teszi, hogy a központi telepítés.</span><span class="sxs-lookup"><span data-stu-id="d2e42-194">This approach is ideal if the size of the local storage allows such a deployment.</span></span> <span data-ttu-id="d2e42-195">Beágyazott SQL-adatbázisok, NoSQL-adatbázisok vagy XML-fájlok helyben telepített Azure számítási méretezési egységek önállóan számára.</span><span class="sxs-lookup"><span data-stu-id="d2e42-195">Embedded SQL databases, NoSQL databases, or XML files deployed locally help with the autonomy of Azure compute scale units.</span></span> <span data-ttu-id="d2e42-196">Azonban rendelkeznie kell egy olyan mechanizmus az adatokon az egyes szerepkörökhöz anélkül, hogy újbóli üzembe helyezése.</span><span class="sxs-lookup"><span data-stu-id="d2e42-196">However, you should have a mechanism to update the data in each role without requiring redeployment.</span></span> <span data-ttu-id="d2e42-197">Ehhez az szükséges, helyezze a referenciaadatok frissítéseit a tárolási felhővégpontnak (például az Azure Blob-tároló vagy az SQL-adatbázis).</span><span class="sxs-lookup"><span data-stu-id="d2e42-197">To do this, place any updates to the reference data at a cloud storage endpoint (for example, Azure Blob storage or SQL Database).</span></span> <span data-ttu-id="d2e42-198">Adja hozzá mindegyik szerepkör, amely letölti a frissítéseket a számítási csomópontok szerepkör indításkor a kódot.</span><span class="sxs-lookup"><span data-stu-id="d2e42-198">Add code to each role that downloads the data updates into the compute nodes at role startup.</span></span> <span data-ttu-id="d2e42-199">Azt is megteheti adja hozzá a kódot, amely lehetővé teszi a rendszergazdáknak a szerepkör-példányok a kényszerített letölteni.</span><span class="sxs-lookup"><span data-stu-id="d2e42-199">Alternatively, add code that allows an administrator to perform a forced download into the role instances.</span></span>

<span data-ttu-id="d2e42-200">Magasabb rendelkezésre állását, a szerepkörök is tartalmaznia kell a hivatkozás adatkészletet abban az esetben, ha tárolási nem működik.</span><span class="sxs-lookup"><span data-stu-id="d2e42-200">To increase availability, the roles should also contain a set of reference data in case storage is down.</span></span> <span data-ttu-id="d2e42-201">Szerepkör indításához referenciaadatok alapvető vannak beállítva, míg a tárolási erőforrások érhető el a frissítéseket.</span><span class="sxs-lookup"><span data-stu-id="d2e42-201">Roles can start with a basic set of reference data until the storage resource becomes available for the updates.</span></span>

![Alkalmazás magas rendelkezésre állású autonóm számítási csomóponton keresztül](./images/high-availability-azure-applications/application-high-availability-through-autonomous-compute-nodes.png)

<span data-ttu-id="d2e42-203">Ebben a mintában az új telepítések vagy a szerepkörpéldányok hosszabb időt vehet igénybe elindítani a referenciaadatok nagy mennyiségű letöltése vagy telepítése.</span><span class="sxs-lookup"><span data-stu-id="d2e42-203">With this pattern, new deployments or role instances may take longer to start if you are deploying or downloading large amounts of reference data.</span></span> <span data-ttu-id="d2e42-204">Előfordulhat, hogy ez kompromisszumot azonnal referenciaadatok gyakorló szerepkörönként helyett attól függően, külső tárolószolgáltatások önállóan elfogadható.</span><span class="sxs-lookup"><span data-stu-id="d2e42-204">This tradeoff might be acceptable for the autonomy of having the reference data immediately available on each role, rather than depending on external storage services.</span></span>

### <a name="transactional-data-pattern-for-high-availability"></a><span data-ttu-id="d2e42-205">A magas rendelkezésre állású tranzakciós adatmintát</span><span class="sxs-lookup"><span data-stu-id="d2e42-205">Transactional data pattern for high availability</span></span>
<span data-ttu-id="d2e42-206">Tranzakciós adatok az adatai, amely az alkalmazás hoz létre egy vállalati környezetben.</span><span class="sxs-lookup"><span data-stu-id="d2e42-206">Transactional data is the data that the application generates in a business context.</span></span> <span data-ttu-id="d2e42-207">Tranzakciós adatok, amely az alkalmazás megvalósítja az üzleti folyamatokat és a referenciaadatok, amely támogatja ezeket a folyamatokat kombinációja.</span><span class="sxs-lookup"><span data-stu-id="d2e42-207">Transactional data is a combination of the set of business processes that the application implements and the reference data that supports these processes.</span></span> <span data-ttu-id="d2e42-208">Tranzakciós adatok tartalmazhatnak rendelések, speciális szállítási értesítéseket, számlákat és felhasználói kapcsolat kezelő (CRM) lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="d2e42-208">Examples of transactional data can include orders, advanced shipping notices, invoices, and customer relationship management (CRM) opportunities.</span></span> <span data-ttu-id="d2e42-209">Tranzakciós adatok külső rendszerekkel rögzítésére, vagy további feldolgozásra van megadva.</span><span class="sxs-lookup"><span data-stu-id="d2e42-209">Transactional data is supplied to external systems for record keeping or for further processing.</span></span>

<span data-ttu-id="d2e42-210">Referenciaadatok a rendszerek, adatok felelős belül módosíthatja.</span><span class="sxs-lookup"><span data-stu-id="d2e42-210">Reference data can change within the systems that are responsible for that data.</span></span> <span data-ttu-id="d2e42-211">Ezért tranzakciós adatok minimalizálása érdekében a szemantikai konzisztencia vonatkozó külső függőségeket időpontban hivatkozás adatkörnyezet kell menteni.</span><span class="sxs-lookup"><span data-stu-id="d2e42-211">Therefore, transactional data must save the point-in-time reference data context to minimize external dependencies for its semantic consistency.</span></span> <span data-ttu-id="d2e42-212">Például a termék eltávolíthatja a katalógusból több hónap után egy rendelés teljesül.</span><span class="sxs-lookup"><span data-stu-id="d2e42-212">For example, a product may be removed from the catalog several months after an order is fulfilled.</span></span> <span data-ttu-id="d2e42-213">Mértékű hivatkozás adatkörnyezetet tárolása a tranzakcióhoz lehetőség szerinti használata ajánlott.</span><span class="sxs-lookup"><span data-stu-id="d2e42-213">Storing as much reference data context as possible with the transaction is recommended.</span></span> <span data-ttu-id="d2e42-214">Ezt a módszert megőrzi a tranzakcióhoz tartozó szemantikáját, még akkor is, ha a referenciaadatok megváltozik, a tranzakció rögzített.</span><span class="sxs-lookup"><span data-stu-id="d2e42-214">This approach preserves the semantics associated with the transaction, even if the reference data changes after the transaction is captured.</span></span>

<span data-ttu-id="d2e42-215">Ahogy korábban említettük ömlesztve berendezés és aszinkron kommunikációt használó architektúrák biztosíthat magasabb szintű elérhetőségét.</span><span class="sxs-lookup"><span data-stu-id="d2e42-215">As mentioned previously, architectures that use loose coupling and asynchronous communication can provide higher levels of availability.</span></span> <span data-ttu-id="d2e42-216">Ez igaz, valamint a tranzakciós adatokat, de a megvalósítás összetettebb.</span><span class="sxs-lookup"><span data-stu-id="d2e42-216">This is true for transactional data as well, but the implementation is more complex.</span></span> <span data-ttu-id="d2e42-217">Hagyományos tranzakciós minták általában támaszkodnak az adatbázist a tranzakció biztosítása.</span><span class="sxs-lookup"><span data-stu-id="d2e42-217">Traditional transactional patterns usually rely on the database for guaranteeing the transaction.</span></span> <span data-ttu-id="d2e42-218">Köztes rétegek vezetnek be, amikor az alkalmazás kódja helyesen kezelni kell az adatokat a különböző rétegek elegendő konzisztencia és tartós biztosításához.</span><span class="sxs-lookup"><span data-stu-id="d2e42-218">When you introduce intermediate layers, the application code must correctly handle the data at various layers to ensure sufficient consistency and durability.</span></span>

<span data-ttu-id="d2e42-219">Az alábbi sorrendben, amely elválasztja a feldolgozási tranzakciós adatok rögzítése munkafolyamat ismerteti:</span><span class="sxs-lookup"><span data-stu-id="d2e42-219">The following sequence describes a workflow that separates the capture of transactional data from its processing:</span></span>

1. <span data-ttu-id="d2e42-220">Webes számítási csomópont: jelen adatokra hivatkoztak.</span><span class="sxs-lookup"><span data-stu-id="d2e42-220">Web compute node: Present reference data.</span></span>
2. <span data-ttu-id="d2e42-221">A külső tárhelyen: köztes tranzakciós adatok mentése.</span><span class="sxs-lookup"><span data-stu-id="d2e42-221">External storage: Save intermediate transactional data.</span></span>
3. <span data-ttu-id="d2e42-222">Webes számítási csomópont: végezze el a végfelhasználói tranzakció.</span><span class="sxs-lookup"><span data-stu-id="d2e42-222">Web compute node: Complete the end-user transaction.</span></span>
4. <span data-ttu-id="d2e42-223">Webes számítási csomópont: a hivatkozási adatokat kontextusú a befejezett tranzakciós adatokat küldeni a kiszámítható választ ad garantáltan ideiglenes tartós tároló.</span><span class="sxs-lookup"><span data-stu-id="d2e42-223">Web compute node: Send the completed transactional data with its reference data context to temporary durable storage that is guaranteed to give a predictable response.</span></span>
5. <span data-ttu-id="d2e42-224">Webes számítási csomópont: a végfelhasználói tranzakció befejezésekor, jelezze.</span><span class="sxs-lookup"><span data-stu-id="d2e42-224">Web compute node: Signal the end-user completion of the transaction.</span></span>
6. <span data-ttu-id="d2e42-225">Háttér számítási csomópont: a tranzakciós adatokat nyerhet ki, a feldolgozást szükség esetén és a jelenlegi rendszer elküldi a végleges tárolási helyét.</span><span class="sxs-lookup"><span data-stu-id="d2e42-225">Background compute node: Extract the transactional data, process it further if necessary, and send it to its final storage location in the current system.</span></span>

<span data-ttu-id="d2e42-226">A következő ábrán egy lehetséges Ez a kialakítás megvalósítása az Azure által üzemeltetett felhőalapú szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="d2e42-226">The following diagram shows one possible implementation of this design in an Azure-hosted cloud service.</span></span>

![Laza kapcsoló magas rendelkezésre állása](./images/disaster-recovery-high-availability-azure-applications/application-high-availability-through-loose-coupling.png)

<span data-ttu-id="d2e42-228">A fenti ábrán szaggatott nyilak az aszinkron feldolgozás jelzi.</span><span class="sxs-lookup"><span data-stu-id="d2e42-228">The dashed arrows in the preceding diagram indicate asynchronous processing.</span></span> <span data-ttu-id="d2e42-229">Az előtér-webkiszolgáló szerepkör nincs tisztában az aszinkron feldolgozás.</span><span class="sxs-lookup"><span data-stu-id="d2e42-229">The front-end web role is not aware of this asynchronous processing.</span></span> <span data-ttu-id="d2e42-230">Ennek eredménye a tranzakció-a végső rendeltetési hely alapján a jelenlegi rendszer tárolására.</span><span class="sxs-lookup"><span data-stu-id="d2e42-230">This leads to the storage of the transaction at its final destination with reference to the current system.</span></span> <span data-ttu-id="d2e42-231">A késés, amely a aszinkron modell vezet be, mert a tranzakciós adatok nincs azonnal lekérdezhetők.</span><span class="sxs-lookup"><span data-stu-id="d2e42-231">Due to the latency that this asynchronous model introduces, the transactional data is not immediately available for query.</span></span> <span data-ttu-id="d2e42-232">Ezért a tranzakciós adatok tárolóegységekhez kell menteni a gyorsítótár, vagy a felhasználói munkamenet az azonnali UI teljesítéséhez szükséges.</span><span class="sxs-lookup"><span data-stu-id="d2e42-232">Therefore, each unit of the transactional data needs to be saved in a cache or a user session to meet the immediate UI needs.</span></span>

<span data-ttu-id="d2e42-233">A webes szerepkör az autonóm az infrastruktúra többi részétől.</span><span class="sxs-lookup"><span data-stu-id="d2e42-233">The web role is autonomous from the rest of the infrastructure.</span></span> <span data-ttu-id="d2e42-234">A rendelkezésre állási profil a webes szerepkör és az Azure üzenetsor-kezelési és nem a teljes infrastruktúra.</span><span class="sxs-lookup"><span data-stu-id="d2e42-234">Its availability profile is a combination of the web role and the Azure queue and not the entire infrastructure.</span></span> <span data-ttu-id="d2e42-235">Túl magas rendelkezésre állású ezzel a megközelítéssel a webes szerepkör vízszintesen, a háttér-tároló független méretezése.</span><span class="sxs-lookup"><span data-stu-id="d2e42-235">In addition to high availability, this approach allows the web role to scale horizontally, independent of the back-end storage.</span></span> <span data-ttu-id="d2e42-236">Ez a magas rendelkezésre állású modell hatással lehetnek a műveletek gazdasági.</span><span class="sxs-lookup"><span data-stu-id="d2e42-236">This high-availability model can have an impact on the economics of operations.</span></span> <span data-ttu-id="d2e42-237">További összetevők, például az Azure várólisták és feldolgozói szerepkörök hatással lehet a havi használati költségek.</span><span class="sxs-lookup"><span data-stu-id="d2e42-237">Additional components like Azure queues and worker roles can affect monthly usage costs.</span></span>

<span data-ttu-id="d2e42-238">Az előző ábrán látható, a tranzakciós adatok leválasztott megközelítést több megvalósítása.</span><span class="sxs-lookup"><span data-stu-id="d2e42-238">The previous diagram shows one implementation of this decoupled approach to transactional data.</span></span> <span data-ttu-id="d2e42-239">Nincsenek sok más lehetőség esetében.</span><span class="sxs-lookup"><span data-stu-id="d2e42-239">There are many other possible implementations.</span></span> <span data-ttu-id="d2e42-240">Az alábbiakban néhány más:</span><span class="sxs-lookup"><span data-stu-id="d2e42-240">The following list provides some alternatives:</span></span>

* <span data-ttu-id="d2e42-241">A webes szerepkör és a tároló várólista közötti lehet, hogy helyezhető el a feldolgozói szerepkör.</span><span class="sxs-lookup"><span data-stu-id="d2e42-241">A worker role might be placed between the web role and the storage queue.</span></span>
* <span data-ttu-id="d2e42-242">A Service Bus-üzenetsorba helyett az Azure Storage üzenetsorába használható.</span><span class="sxs-lookup"><span data-stu-id="d2e42-242">A Service Bus queue can be used instead of an Azure Storage queue.</span></span>
* <span data-ttu-id="d2e42-243">A végső cél Azure Storage vagy egy másik adatbázis-szolgáltató lehet.</span><span class="sxs-lookup"><span data-stu-id="d2e42-243">The final destination might be Azure Storage or a different database provider.</span></span>
* <span data-ttu-id="d2e42-244">Az Azure Cache a webes réteg a közvetlen gyorsítótár követelmények biztosításához a tranzakció után lehet használni.</span><span class="sxs-lookup"><span data-stu-id="d2e42-244">Azure Cache can be used at the web layer to provide the immediate caching requirements after the transaction.</span></span>

### <a name="scalability-patterns"></a><span data-ttu-id="d2e42-245">Méretezhetőség minták</span><span class="sxs-lookup"><span data-stu-id="d2e42-245">Scalability patterns</span></span>
<span data-ttu-id="d2e42-246">Fontos megjegyezni, hogy a méretezhetőség egy felhőalapú szolgáltatás rendelkezésre állási közvetlen hatással van.</span><span class="sxs-lookup"><span data-stu-id="d2e42-246">It's important to note that the scalability of a cloud service directly affects availability.</span></span> <span data-ttu-id="d2e42-247">Ha a megnövekedett terhelés miatt a szolgáltatás lefagyottnak, a felhasználói egyensúlyozhatom, hogy az alkalmazás nem működik.</span><span class="sxs-lookup"><span data-stu-id="d2e42-247">If increased load causes your service to be unresponsive, the user perception is that the application is down.</span></span> <span data-ttu-id="d2e42-248">Kövesse a bevált gyakorlatokat méretezhetőségre, a várt alkalmazásterhelés és a későbbi verziójával kapcsolatos elvárások alapján.</span><span class="sxs-lookup"><span data-stu-id="d2e42-248">Follow proven practices for scalability based on your expected application load and future expectations.</span></span> <span data-ttu-id="d2e42-249">Sok szempontok, például egy vagy több tárfiókot, több adatbázis közötti megosztás, és a gyorsítótár stratégiák méretezési maximalizálva magában foglalja.</span><span class="sxs-lookup"><span data-stu-id="d2e42-249">Maximizing scale involves many considerations, such as single versus multiple storage accounts, sharing across multiple databases, and caching strategies.</span></span> <span data-ttu-id="d2e42-250">Ezek a minták kapcsolatos részletes információkért lásd: [ajánlott eljárások a Microsoft Azure felügyeleti teendők központjaként szolgáltatások tervezéséhez](https://azure.microsoft.com/blog/best-practices-for-designing-large-scale-services-on-windows-azure/).</span><span class="sxs-lookup"><span data-stu-id="d2e42-250">For in-depth information about these patterns, see [Best practices for designing large-scale services on Microsoft Azure](https://azure.microsoft.com/blog/best-practices-for-designing-large-scale-services-on-windows-azure/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="d2e42-251">További lépések</span><span class="sxs-lookup"><span data-stu-id="d2e42-251">Next steps</span></span>
<span data-ttu-id="d2e42-252">Az adatsorozat dokumentumok vész-helyreállítási és magas rendelkezésre állás a Microsoft Azure épülő alkalmazások tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="d2e42-252">This series of documents covers disaster recovery and high availability for applications built on Microsoft Azure.</span></span> <span data-ttu-id="d2e42-253">A következő cikk az adatsorozat [Microsoft Azure épülő alkalmazások vész-helyreállítási](disaster-recovery-azure-applications.md).</span><span class="sxs-lookup"><span data-stu-id="d2e42-253">The next article in the series is [Disaster recovery for applications built on Microsoft Azure](disaster-recovery-azure-applications.md).</span></span>

