---
title: "Adatsérülés vagy véletlen törlés helyreállítása"
description: "A következő cikket: az adatok sérülésének adatok vagy a véletlen adattörlés és rugalmas, magas rendelkezésre állású, hiba hibatűrő alkalmazásokhoz tervezéséhez, valamint vészhelyreállítás tervezése alapos ismerete"
author: adamglick
ms.date: 08/18/2016
ms.openlocfilehash: b75c774f85c42f64472167897f08a7302ab50a3f
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 11/14/2017
---
[!INCLUDE [header](../_includes/header.md)]
# <a name="azure-resiliency-technical-guidance-recovery-from-data-corruption-or-accidental-deletion"></a><span data-ttu-id="b3788-103">Az Azure rugalmasságát műszaki útmutatót: helyreállítási adatok sérülése vagy véletlen törlés</span><span class="sxs-lookup"><span data-stu-id="b3788-103">Azure resiliency technical guidance: recovery from data corruption or accidental deletion</span></span>
<span data-ttu-id="b3788-104">Ha az adatok beolvasása sérült, vagy véletlenül törölt egy robusztus üzletmenet folytonosságát biztosító terve részeként nehézségekkel egy tervet.</span><span class="sxs-lookup"><span data-stu-id="b3788-104">Part of a robust business continuity plan is having a plan if your data gets corrupted or accidentally deleted.</span></span> <span data-ttu-id="b3788-105">A következő helyreállítási információt után adatok sérült, vagy véletlenül törölt alkalmazáshibák vagy a kezelő hibája miatt.</span><span class="sxs-lookup"><span data-stu-id="b3788-105">The following is information about recovery after data has been corrupted or accidentally deleted, due to application errors or operator error.</span></span>

## <a name="virtual-machines"></a><span data-ttu-id="b3788-106">Virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="b3788-106">Virtual Machines</span></span>
<span data-ttu-id="b3788-107">Az Azure virtuális gépek (más néven infrastruktúra,--szolgáltatás virtuális gépek) alkalmazáshibák vagy véletlen törlés elleni védelem, használjon [Azure biztonsági mentés](https://azure.microsoft.com/services/backup/).</span><span class="sxs-lookup"><span data-stu-id="b3788-107">To protect your Azure Virtual Machines (sometimes called infrastructure-as-a-service VMs) from application errors or accidental deletion, use [Azure Backup](https://azure.microsoft.com/services/backup/).</span></span> <span data-ttu-id="b3788-108">Azure biztonsági mentés lehetővé teszi a több virtuális gép lemezre összhangban legyenek biztonsági mentések létrehozását.</span><span class="sxs-lookup"><span data-stu-id="b3788-108">Azure Backup enables the creation of backups that are consistent across multiple VM disks.</span></span> <span data-ttu-id="b3788-109">Emellett a mentési tárolóhoz az biztosítása érdekében származó régió régiók replikálható.</span><span class="sxs-lookup"><span data-stu-id="b3788-109">In addition, the Backup Vault can be replicated across regions to provide recovery from region loss.</span></span>

## <a name="storage"></a><span data-ttu-id="b3788-110">Storage</span><span class="sxs-lookup"><span data-stu-id="b3788-110">Storage</span></span>
<span data-ttu-id="b3788-111">Figyelje meg, míg az Azure Storage automatikus replikák keresztül adatrugalmasság kínál, ez nem akadályozza a alkalmazáskód (vagy fejlesztők/felhasználók) származó adatok rongál keresztül nem szándékos vagy véletlen törlés, frissítés, és így tovább.</span><span class="sxs-lookup"><span data-stu-id="b3788-111">Note that while Azure Storage provides data resiliency through automated replicas, this does not prevent your application code (or developers/users) from corrupting data through accidental or unintended deletion, update, and so on.</span></span> <span data-ttu-id="b3788-112">Speciális módszerek, például másolja az adatokat a másodlagos tárolóját az audit napló állásuk alkalmazás- vagy hiba adatok hűség karbantartása szükséges.</span><span class="sxs-lookup"><span data-stu-id="b3788-112">Maintaining data fidelity in the face of application or user error requires more advanced techniques, such as copying the data to a secondary storage location with an audit log.</span></span> <span data-ttu-id="b3788-113">A fejlesztők kihasználhatják a BLOB [pillanatkép-funkció](https://msdn.microsoft.com/library/azure/ee691971.aspx), amely a blob tartalmát csak olvasható időpontban pillanatképeket hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="b3788-113">Developers can take advantage of the blob [snapshot capability](https://msdn.microsoft.com/library/azure/ee691971.aspx), which can create read-only point-in-time snapshots of blob contents.</span></span> <span data-ttu-id="b3788-114">Ez használható alapjául szolgáló adatok minőségű megoldást az Azure Storage blobs szolgáltatásban.</span><span class="sxs-lookup"><span data-stu-id="b3788-114">This can be used as the basis of a data-fidelity solution for Azure Storage blobs.</span></span>

### <a name="blob-and-table-storage-backup"></a><span data-ttu-id="b3788-115">A BLOB és Table Storage biztonsági mentése</span><span class="sxs-lookup"><span data-stu-id="b3788-115">Blob and Table Storage Backup</span></span>
<span data-ttu-id="b3788-116">Míg a blobok és táblák magas tartós, mindig képviselnek az adatok aktuális állapotát.</span><span class="sxs-lookup"><span data-stu-id="b3788-116">While blobs and tables are highly durable, they always represent the current state of the data.</span></span> <span data-ttu-id="b3788-117">A nem kívánt módosításának és törlésének adatok helyreállítási lehet szükség, adat-visszaállítást a korábbi állapotába.</span><span class="sxs-lookup"><span data-stu-id="b3788-117">Recovery from unwanted modification or deletion of data may require restoring data to a previous state.</span></span> <span data-ttu-id="b3788-118">Ez a tárolására és időpontban másolatok Azure által biztosított képességek kihasználásával elérhető.</span><span class="sxs-lookup"><span data-stu-id="b3788-118">This can be achieved by taking advantage of the capabilities provided by Azure to store and retain point-in-time copies.</span></span>

<span data-ttu-id="b3788-119">Az Azure BLOB, időpontban biztonsági mentések használatával végezheti el a [blob pillanatkép funkció](https://msdn.microsoft.com/library/ee691971.aspx).</span><span class="sxs-lookup"><span data-stu-id="b3788-119">For Azure Blobs, you can perform point-in-time backups using the [blob snapshot feature](https://msdn.microsoft.com/library/ee691971.aspx).</span></span> <span data-ttu-id="b3788-120">Minden egyes pillanatkép van csak szó, a szükséges a különbségek belül a blob tárolására, mert az utolsó pillanatkép-állapot tárolásához.</span><span class="sxs-lookup"><span data-stu-id="b3788-120">For each snapshot, you are only charged for the storage required to store the differences within the blob since the last snapshot state.</span></span> <span data-ttu-id="b3788-121">A pillanatképek függnek a létezik-e az eredeti blob, alapulnak, ezért egy másik blob vagy akár egy másik tárfiókhoz a másolási műveletek használata javasolt.</span><span class="sxs-lookup"><span data-stu-id="b3788-121">The snapshots are dependent on the existence of the original blob they are based on, so a copy operation to another blob or even another storage account is advisable.</span></span> <span data-ttu-id="b3788-122">Ez biztosítja, hogy a biztonsági mentési adatok megfelelően védett véletlen törlése ellen.</span><span class="sxs-lookup"><span data-stu-id="b3788-122">This ensures that backup data is properly protected against accidental deletion.</span></span> <span data-ttu-id="b3788-123">Az Azure táblázatban időpontban másolatok egy másik táblához vagy az Azure BLOB teheti meg.</span><span class="sxs-lookup"><span data-stu-id="b3788-123">For Azure Tables, you can make point-in-time copies to a different table or to Azure Blobs.</span></span> <span data-ttu-id="b3788-124">Részletes útmutatás és példák bemutatják táblák alkalmazásszintű biztonsági másolatait és blobok itt található:</span><span class="sxs-lookup"><span data-stu-id="b3788-124">More detailed guidance and examples of performing application-level backups of tables and blobs can be found here:</span></span>

* [<span data-ttu-id="b3788-125">A táblák alkalmazáshibák elleni védelme</span><span class="sxs-lookup"><span data-stu-id="b3788-125">Protecting Your Tables Against Application Errors</span></span>](https://blogs.msdn.microsoft.com/windowsazurestorage/2010/05/03/protecting-your-tables-against-application-errors/)
* [<span data-ttu-id="b3788-126">A Blobok alkalmazáshibák elleni védelme</span><span class="sxs-lookup"><span data-stu-id="b3788-126">Protecting Your Blobs Against Application Errors</span></span>](https://blogs.msdn.microsoft.com/windowsazurestorage/2010/04/29/protecting-your-blobs-against-application-errors/)

## <a name="database"></a><span data-ttu-id="b3788-127">Adatbázis</span><span class="sxs-lookup"><span data-stu-id="b3788-127">Database</span></span>
<span data-ttu-id="b3788-128">Több [az üzletmenet folytonossága](/azure/sql-database/sql-database-business-continuity/) (biztonsági másolat, visszaállítási) az Azure SQL Database elérhető beállítások.</span><span class="sxs-lookup"><span data-stu-id="b3788-128">There are several [business continuity](/azure/sql-database/sql-database-business-continuity/) (backup, restore) options available for Azure SQL Database.</span></span> <span data-ttu-id="b3788-129">Adatbázisok segítségével másolhatók a [adatbázis-másolat](/azure/sql-database/sql-database-copy/) funkciót, vagy a [exportálása](/azure/sql-database/sql-database-export/) és [importálása](https://msdn.microsoft.com/library/hh710052.aspx) egy SQL Server bacpac-fájl.</span><span class="sxs-lookup"><span data-stu-id="b3788-129">Databases can be copied by using the [Database Copy](/azure/sql-database/sql-database-copy/) functionality, or by  [exporting](/azure/sql-database/sql-database-export/) and [importing](https://msdn.microsoft.com/library/hh710052.aspx) a SQL Server bacpac file.</span></span> <span data-ttu-id="b3788-130">Adatbázis-másolat biztosítja a tranzakciós úton konzisztens eredmények (keresztül az import/export szolgáltatás) egy bacpac azonban nem.</span><span class="sxs-lookup"><span data-stu-id="b3788-130">Database Copy provides transactionally consistent results, while a bacpac (through the import/export service) does not.</span></span> <span data-ttu-id="b3788-131">Mindkét lehetőség az adatközponton belül várólista alapú szolgáltatások futnak, és jelenleg nem biztosít egy idő létrehozása után SLA-t.</span><span class="sxs-lookup"><span data-stu-id="b3788-131">Both of these options run as queue-based services within the data center, and they do not currently provide a time-to-completion SLA.</span></span>

> [!NOTE]
> <span data-ttu-id="b3788-132">Az adatbázis másolása és importálási/exportálási beállítások terhelés jelentős mértékben a forrásadatbázis helyezze el.</span><span class="sxs-lookup"><span data-stu-id="b3788-132">The database copy and import/export options place a significant degree of load on the source database.</span></span> <span data-ttu-id="b3788-133">Indíthatnak Erőforrásverseny vagy a sávszélesség-szabályozás események.</span><span class="sxs-lookup"><span data-stu-id="b3788-133">They can trigger resource contention or throttling events.</span></span>
> 
> 

### <a name="sql-database-backup"></a><span data-ttu-id="b3788-134">SQL-adatbázis biztonsági mentése</span><span class="sxs-lookup"><span data-stu-id="b3788-134">SQL Database Backup</span></span>
<span data-ttu-id="b3788-135">Microsoft Azure SQL Database időpontban biztonsági mentés által érhetők el [az Azure SQL-adatbázis másolása](/azure/sql-database/sql-database-copy/).</span><span class="sxs-lookup"><span data-stu-id="b3788-135">Point-in-time backups for Microsoft Azure SQL Database are achieved by [copying your Azure SQL database](/azure/sql-database/sql-database-copy/).</span></span> <span data-ttu-id="b3788-136">Ez a parancs segítségével adatbázis tranzakciós úton konzisztens másolat létrehozása ugyanazon a logikai adatbázis-kiszolgálón vagy egy másik kiszolgálóra.</span><span class="sxs-lookup"><span data-stu-id="b3788-136">You can use this command to create a transactionally consistent copy of a database on the same logical database server or to a different server.</span></span> <span data-ttu-id="b3788-137">Mindkét esetben az adatbázis-példány teljesen működőképes és a source adatbázis teljesen független.</span><span class="sxs-lookup"><span data-stu-id="b3788-137">In either case, the database copy is fully functional and completely independent of the source database.</span></span> <span data-ttu-id="b3788-138">Minden egyes példányra hoz létre egy időpontban helyreállítási lehetőség jelöli.</span><span class="sxs-lookup"><span data-stu-id="b3788-138">Each copy you create represents a point-in-time recovery option.</span></span> <span data-ttu-id="b3788-139">A forrás-adatbázis nevét új adatbázis átnevezésével teljesen helyreállíthatja az adatbázis állapotát.</span><span class="sxs-lookup"><span data-stu-id="b3788-139">You can recover the database state completely by renaming the new database with the source database name.</span></span> <span data-ttu-id="b3788-140">Azt is megteheti helyreállíthatja az adatokat egy adott részének az új adatbázis Transact-SQL-lekérdezések használatával.</span><span class="sxs-lookup"><span data-stu-id="b3788-140">Alternatively, you can recover a specific subset of data from the new database by using Transact-SQL queries.</span></span> <span data-ttu-id="b3788-141">SQL-adatbázis kapcsolatos további részletekért lásd: [az Azure SQL Database üzletmenet áttekintése](/azure/sql-database/sql-database-business-continuity/).</span><span class="sxs-lookup"><span data-stu-id="b3788-141">For additional details about SQL Database, see [Overview of business continuity with Azure SQL Database](/azure/sql-database/sql-database-business-continuity/).</span></span>

### <a name="sql-server-on-virtual-machines-backup"></a><span data-ttu-id="b3788-142">A virtuális gépek biztonsági mentése SQL-kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="b3788-142">SQL Server on Virtual Machines Backup</span></span>
<span data-ttu-id="b3788-143">Az SQL Server használja az Azure-infrastruktúra a szolgáltatási célú virtuális gépek (IaaS és infrastruktúra-szolgáltatási virtuális gépeken gyakran nevezik), két módon: hagyományos biztonsági mentések és a naplóküldésben.</span><span class="sxs-lookup"><span data-stu-id="b3788-143">For SQL Server used with Azure infrastructure as a service virtual machines (often called IaaS or IaaS VMs), there are two options: traditional backups and log shipping.</span></span> <span data-ttu-id="b3788-144">Hagyományos biztonsági mentések használata lehetővé teszi adott visszaállítása időpontra, de a helyreállítási folyamat lassú.</span><span class="sxs-lookup"><span data-stu-id="b3788-144">Using traditional backups enables you to restore to a specific point in time, but the recovery process is slow.</span></span> <span data-ttu-id="b3788-145">Hagyományos biztonsági másolatok visszaállítása szükséges kezdődő, és egy kezdeti teljes biztonsági mentést, és minden biztonsági másolatának után, majd alkalmazza.</span><span class="sxs-lookup"><span data-stu-id="b3788-145">Restoring traditional backups requires starting with an initial full backup, and then applying any backups taken after that.</span></span> <span data-ttu-id="b3788-146">A második lehetőség a Naplók biztonsági másolatainak helyreállítását (például úgy, hogy két órával) késleltetése munkamenet naplóküldő konfigurálása.</span><span class="sxs-lookup"><span data-stu-id="b3788-146">The second option is to configure a log shipping session to delay the restore of log backups (for example, by two hours).</span></span> <span data-ttu-id="b3788-147">Ez lehetővé teszi egy ablakot, ahol az elsődleges végrehajtott hibák elhárítása.</span><span class="sxs-lookup"><span data-stu-id="b3788-147">This provides a window to recover from errors made on the primary.</span></span>

## <a name="other-azure-platform-services"></a><span data-ttu-id="b3788-148">Egyéb Azure platform szolgáltatásaiból</span><span class="sxs-lookup"><span data-stu-id="b3788-148">Other Azure platform services</span></span>
<span data-ttu-id="b3788-149">Bizonyos Azure platform szolgáltatásaiból információk egy felhasználó által szabályozott tárfiókhoz vagy Azure SQL-adatbázis tárolja.</span><span class="sxs-lookup"><span data-stu-id="b3788-149">Some Azure platform services store information in a user-controlled storage account or Azure SQL Database.</span></span> <span data-ttu-id="b3788-150">Ha a fiók vagy a storage erőforrás nem található vagy sérült, ez a szolgáltatás a súlyos hibákat okozhat.</span><span class="sxs-lookup"><span data-stu-id="b3788-150">If the account or storage resource is deleted or corrupted, this could cause serious errors with the service.</span></span> <span data-ttu-id="b3788-151">Ebben az esetben fontos karbantartása biztonsági mentések, amely lehetővé tenné, hogy hozza létre ezeket az erőforrásokat, mintha törölt vagy sérült.</span><span class="sxs-lookup"><span data-stu-id="b3788-151">In these cases, it is important to maintain backups that would enable you to re-create these resources if they were deleted or corrupted.</span></span>

<span data-ttu-id="b3788-152">Azure-webhelyek és az Azure Mobile Services, a biztonsági mentéshez és a társított adatbázisokban karbantartása.</span><span class="sxs-lookup"><span data-stu-id="b3788-152">For Azure Web Sites and Azure Mobile Services, you must backup and maintain the associated databases.</span></span> <span data-ttu-id="b3788-153">Az Azure Media Services és a virtuális gépek kezelnie kell a társított Azure Storage-fiók és a fiókhoz tartozó összes erőforrást.</span><span class="sxs-lookup"><span data-stu-id="b3788-153">For Azure Media Service and Virtual Machines, you must maintain the associated Azure Storage account and all resources in that account.</span></span> <span data-ttu-id="b3788-154">Például a virtuális gépek kell biztonsági mentése és felügyelnie a virtuális gép lemezeivel az Azure blob Storage tárolóban.</span><span class="sxs-lookup"><span data-stu-id="b3788-154">For example, for Virtual Machines, you must back up and manage the VM disks in Azure blob storage.</span></span>

## <a name="checklists-for-data-corruption-or-accidental-deletion"></a><span data-ttu-id="b3788-155">A program sérült adatokat vagy véletlen törlés Ellenőrzőlisták</span><span class="sxs-lookup"><span data-stu-id="b3788-155">Checklists for data corruption or accidental deletion</span></span>
## <a name="virtual-machines-checklist"></a><span data-ttu-id="b3788-156">Virtuális gépek ellenőrzőlista</span><span class="sxs-lookup"><span data-stu-id="b3788-156">Virtual Machines checklist</span></span>
1. <span data-ttu-id="b3788-157">Tekintse át a virtuális gépek szakasz ebben a dokumentumban.</span><span class="sxs-lookup"><span data-stu-id="b3788-157">Review the Virtual Machines section of this document.</span></span>
2. <span data-ttu-id="b3788-158">Készítsen biztonsági másolatot, és karbantartása a virtuális gépek lemezei Azure biztonsági mentés (vagy a saját biztonsági mentési rendszer, az Azure blob storage és a VHD-pillanatképek használatával).</span><span class="sxs-lookup"><span data-stu-id="b3788-158">Back up and maintain the VM disks with Azure Backup (or your own backup system by using Azure blob storage and VHD snapshots).</span></span>

## <a name="storage-checklist"></a><span data-ttu-id="b3788-159">Tárolási ellenőrzőlista</span><span class="sxs-lookup"><span data-stu-id="b3788-159">Storage checklist</span></span>
1. <span data-ttu-id="b3788-160">Tekintse át a dokumentum a tárolási szakaszát.</span><span class="sxs-lookup"><span data-stu-id="b3788-160">Review the Storage section of this document.</span></span>
2. <span data-ttu-id="b3788-161">Rendszeresen biztonsági másolatot készíteni a kritikus tároló-erőforrások.</span><span class="sxs-lookup"><span data-stu-id="b3788-161">Regularly back up critical storage resources.</span></span>
3. <span data-ttu-id="b3788-162">Vegye figyelembe, hogy a pillanatkép funkció használata a blobok.</span><span class="sxs-lookup"><span data-stu-id="b3788-162">Consider using the snapshot feature for blobs.</span></span>

## <a name="database-checklist"></a><span data-ttu-id="b3788-163">Adatbázis ellenőrzőlista</span><span class="sxs-lookup"><span data-stu-id="b3788-163">Database checklist</span></span>
1. <span data-ttu-id="b3788-164">Tekintse át a dokumentum az adatbázis szakaszát.</span><span class="sxs-lookup"><span data-stu-id="b3788-164">Review the Database section of this document.</span></span>
2. <span data-ttu-id="b3788-165">Hozzon létre időpontban biztonsági mentések az adatbázis-másolat parancs használatával.</span><span class="sxs-lookup"><span data-stu-id="b3788-165">Create point-in-time backups by using the Database Copy command.</span></span>

## <a name="sql-server-on-virtual-machines-backup-checklist"></a><span data-ttu-id="b3788-166">SQL Server, a virtuális gépek biztonsági mentése ellenőrzőlista</span><span class="sxs-lookup"><span data-stu-id="b3788-166">SQL Server on Virtual Machines Backup checklist</span></span>
1. <span data-ttu-id="b3788-167">Tekintse át az SQL Server virtuális gépek biztonsági mentése szakasz ebben a dokumentumban.</span><span class="sxs-lookup"><span data-stu-id="b3788-167">Review the SQL Server on Virtual Machines Backup section of this document.</span></span>
2. <span data-ttu-id="b3788-168">Hagyományos biztonságimásolat-készítő és technikák visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="b3788-168">Use traditional backup and restore techniques.</span></span>
3. <span data-ttu-id="b3788-169">A késleltetett naplószolgáltató munkamenet létrehozása.</span><span class="sxs-lookup"><span data-stu-id="b3788-169">Create a delayed log shipping session.</span></span>

## <a name="web-apps-checklist"></a><span data-ttu-id="b3788-170">Web Apps ellenőrzőlista</span><span class="sxs-lookup"><span data-stu-id="b3788-170">Web Apps checklist</span></span>
1. <span data-ttu-id="b3788-171">Készítsen biztonsági másolatot, és a kapcsolódó adatbázis karbantartása, ha van ilyen.</span><span class="sxs-lookup"><span data-stu-id="b3788-171">Back up and maintain the associated database, if any.</span></span>

## <a name="media-services-checklist"></a><span data-ttu-id="b3788-172">A Media Services ellenőrzőlista</span><span class="sxs-lookup"><span data-stu-id="b3788-172">Media Services checklist</span></span>
1. <span data-ttu-id="b3788-173">Készítsen biztonsági másolatot, és a társított tárolási erőforrások kezelése.</span><span class="sxs-lookup"><span data-stu-id="b3788-173">Back up and maintain the associated storage resources.</span></span>

## <a name="more-information"></a><span data-ttu-id="b3788-174">További információ</span><span class="sxs-lookup"><span data-stu-id="b3788-174">More information</span></span>
<span data-ttu-id="b3788-175">Az Azure biztonsági mentési és visszaállítási funkciókkal kapcsolatos további információkért lásd: [tárolási, a biztonsági mentési és helyreállítási forgatókönyvek](https://azure.microsoft.com/documentation/scenarios/storage-backup-recovery/).</span><span class="sxs-lookup"><span data-stu-id="b3788-175">For more information about backup and restore features in Azure, see [Storage, backup and recovery scenarios](https://azure.microsoft.com/documentation/scenarios/storage-backup-recovery/).</span></span>


