---
title: Az Azure-alkalmazások vészhelyreállítása
description: Technikai áttekintése és részletes információk a vész-helyreállítási a Microsoft Azure-alkalmazások tervezéséhez.
author: adamglick
ms.date: 05/26/2017
ms.openlocfilehash: faae658d91ec0cb2dd5dc436e67aa9b494fd4b49
ms.sourcegitcommit: 46ed67297e6247f9a80027cfe891a5e51ee024b4
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 09/13/2018
ms.locfileid: "45556682"
---
# <a name="disaster-recovery-for-azure-applications"></a><span data-ttu-id="d8b0e-103">Az Azure-alkalmazások vészhelyreállítása</span><span class="sxs-lookup"><span data-stu-id="d8b0e-103">Disaster recovery for Azure applications</span></span>

<span data-ttu-id="d8b0e-104">A vészhelyreállítás (DR) összpontosít történő helyreállítás egy végzetes elvesztése az alkalmazás funkciói.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-104">Disaster recovery (DR) is focused on recovering from a catastrophic loss of application functionality.</span></span> <span data-ttu-id="d8b0e-105">Például ha az alkalmazást egy Azure-régió elérhetetlenné válik, szüksége egy csomag az alkalmazás fut, vagy egy másik régióban adataihoz kapcsolódó tárolási.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-105">For example, if an Azure region hosting your application becomes unavailable, you need a plan for running your application or accessing your data in another region.</span></span> 

<span data-ttu-id="d8b0e-106">Üzleti és technológiai tulajdonosok meg kell határoznia egy katasztrófa során mekkora funkció is szükséges.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-106">Business and technology owners must determine how much functionality is required during a disaster.</span></span> <span data-ttu-id="d8b0e-107">Ezt a szintű funkcióit is igénybe vehet néhány űrlapok: teljesen elérhetetlenné, korlátozott funkciókkal vagy késleltetett feldolgozási részben elérhető vagy teljes körűen elérhető.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-107">This level of functionality can take a few forms: completely unavailable, partially available via reduced functionality or delayed processing, or fully available.</span></span>

<span data-ttu-id="d8b0e-108">Rugalmasság és a magas rendelkezésre állású stratégiák célja, hogy ideiglenes meghibásodás kezelésére.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-108">Resiliency and high availability strategies are intended to handling temporary failure conditions.</span></span>  <span data-ttu-id="d8b0e-109">Ez a csomag végrehajtása magában foglalja a személyeket, folyamatokat és támogató alkalmazások, amelyek lehetővé teszik a rendszer folytatja a működését.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-109">Executing this plan involves people, processes, and supporting applications that allow the system to continue functioning.</span></span> <span data-ttu-id="d8b0e-110">Tartalmaznia kell a csomag próba során hibák, és győződjön meg, hogy a csomag-adatbázisok a helyreállítás tesztelésére megbízható-e.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-110">Your plan should include rehearsing failures and testing the recovery of databases to ensure the plan is sound.</span></span> 

## <a name="azure-disaster-recovery-features"></a><span data-ttu-id="d8b0e-111">Azure vész-helyreállítási szolgáltatás</span><span class="sxs-lookup"><span data-stu-id="d8b0e-111">Azure disaster recovery features</span></span>

<span data-ttu-id="d8b0e-112">Az Azure biztosít a rendelkezésre állási lehetőségekért [rugalmasság műszaki útmutatást](./index.md) vész-helyreállítási támogatására.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-112">As with availability considerations, Azure provides [resiliency technical guidance](./index.md) designed to support disaster recovery.</span></span> <span data-ttu-id="d8b0e-113">Az Azure és a vészhelyreállítás elérhetőségi funkcióit között is van egy kapcsolat.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-113">There is also a relationship between availability features of Azure and disaster recovery.</span></span> <span data-ttu-id="d8b0e-114">A felügyeleti szerepkörök tartalék tartomány között például egy alkalmazás rendelkezésre állásának növeli.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-114">For example, the management of roles across fault domains increases the availability of an application.</span></span> <span data-ttu-id="d8b0e-115">Egy nem kezelt hardverhiba anélkül, hogy a felügyeleti "vészhelyreállítási" Ez a forgatókönyv válnak.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-115">Without that management, an unhandled hardware failure would become a “disaster” scenario.</span></span> <span data-ttu-id="d8b0e-116">Ezek a szolgáltatások rendelkezésre állási és stratégiák alkalmazását vészhelyreállítás nyelvi ellenőrző fontos részét képezi.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-116">Leveraging these availability features and strategies is an important part of disaster-proofing your application.</span></span> <span data-ttu-id="d8b0e-117">Azonban ez a cikk túllép általános rendelkezésre állási problémák vészhelyreállítási események több súlyos (és ritkább).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-117">However, this article goes beyond general availability issues to more serious (and rarer) disaster events.</span></span>

## <a name="multiple-datacenter-regions"></a><span data-ttu-id="d8b0e-118">Több adatközpont-régió</span><span class="sxs-lookup"><span data-stu-id="d8b0e-118">Multiple datacenter regions</span></span>
<span data-ttu-id="d8b0e-119">Az Azure számos régióban, a világ különböző pontjain található adatközpontokban tárolja.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-119">Azure maintains datacenters in many regions around the world.</span></span> <span data-ttu-id="d8b0e-120">Ez az infrastruktúra támogatja a több vész-helyreállítási helyzetekben, például a rendszer által biztosított georeplikáció az Azure Storage másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-120">This infrastructure supports several disaster recovery scenarios, such as system-provided geo-replication of Azure Storage to secondary regions.</span></span> <span data-ttu-id="d8b0e-121">Emellett egyszerűen és alacsony költséggel valósíthatnak telepíthet egy felhőalapú szolgáltatás, a világ különböző pontjain található.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-121">You can also easily and inexpensively deploy a cloud service to multiple locations around the world.</span></span> <span data-ttu-id="d8b0e-122">Hasonlítsa össze ennek költségét és nehézségét a létrehozása és karbantartása a saját adatközpontok, több régióban a.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-122">Compare this with the cost and difficulty of building and maintaining your own datacenters in multiple regions.</span></span> <span data-ttu-id="d8b0e-123">Adatok és szolgáltatások telepítése több régióban megvédi az alkalmazás egy adott régióban jelentős meghibásodás után.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-123">Deploying data and services to multiple regions helps protect your application from a major outage in a single region.</span></span> <span data-ttu-id="d8b0e-124">A vész-helyreállítási terv kialakításakor, fontos tudni, hogy a társított két régió bármelyikén fogalmát.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-124">As you design your disaster recovery plan, it’s important to understand the concept of paired regions.</span></span> <span data-ttu-id="d8b0e-125">További információkért lásd: [üzleti folytonossági és vészhelyreállítási helyreállítási (BCDR): Azure párosított régiói](/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-125">For more information, see [Business continuity and disaster recovery (BCDR): Azure Paired Regions](/azure/best-practices-availability-paired-regions).</span></span>

## <a name="azure-site-recovery"></a><span data-ttu-id="d8b0e-126">Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="d8b0e-126">Azure Site Recovery</span></span>

<span data-ttu-id="d8b0e-127">[Az Azure Site Recovery](/azure/site-recovery/) nyújt egy egyszerű módja az Azure-beli virtuális gépek replikálása régiók között.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-127">[Azure Site Recovery](/azure/site-recovery/) provides a simple way to replicate Azure VMs between regions.</span></span> <span data-ttu-id="d8b0e-128">Minimumal munkaterhelést, mert nem kell a másodlagos régió minden olyan további erőforrások kiosztása rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-128">It has minimumal management overhead, because you don't need to provision any additional resources in the secondary region.</span></span> <span data-ttu-id="d8b0e-129">Ha engedélyezi a replikációt, a Site Recovery automatikusan létrehozza a szükséges erőforrásokat a célrégióban a forrás virtuális gép beállításai alapján.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-129">When you enable replication, Site Recovery automatically creates the required resources in the target region, based on the source VM settings.</span></span> <span data-ttu-id="d8b0e-130">Automatizált folyamatos replikációt biztosít, és lehetővé teszi, hogy alkalmazás feladatátvételt egyetlen kattintással.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-130">It provides automated continuous replication, and enables you to perform application failover with a single click.</span></span> <span data-ttu-id="d8b0e-131">Is futtathatja vészhelyreállítási próbák anélkül, hogy ez hatással lenne az éles számítási feladatokra vagy a folyamatban lévő replikáció, feladatátvétel tesztelésével.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-131">You can also run disaster recovery drills by testing failover, without affecting your production workloads or ongoing replication.</span></span> 

## <a name="azure-traffic-manager"></a><span data-ttu-id="d8b0e-132">Azure Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="d8b0e-132">Azure Traffic Manager</span></span>
<span data-ttu-id="d8b0e-133">Régióspecifikus hiba történik, amikor a forgalom kell átirányítása a szolgáltatások vagy telepítések egy másik régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-133">When a region-specific failure occurs, you must redirect traffic to services or deployments in another region.</span></span> <span data-ttu-id="d8b0e-134">Akkor a leghatékonyabb, kezelni a szolgáltatások, például az Azure Traffic Manager, amely automatizálja a feladatátvételt egy másik régióba érkező felhasználói forgalom, ha az elsődleges régió nem sikerül.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-134">It is most effective to handle this via services such as Azure Traffic Manager, which automates the failover of user traffic to another region if the primary region fails.</span></span> <span data-ttu-id="d8b0e-135">A Traffic Manager – alapok megértése fontos egy hatékony Vészhelyreállítási stratégia tervezésekor.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-135">Understanding the fundamentals of Traffic Manager is important when designing an effective DR strategy.</span></span>

<span data-ttu-id="d8b0e-136">A TRAFFIC Manager a tartománynévrendszer (DNS) használatával a leginkább megfelelő végpontra a forgalom-útválasztási módszer és a végpontok állapota alapján az ügyfélkéréseket.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-136">Traffic Manager uses the Domain Name System (DNS) to direct client requests to the most appropriate endpoint based on a traffic-routing method and the health of the endpoints.</span></span> <span data-ttu-id="d8b0e-137">A következő ábra a felhasználók csatlakozni egy Traffic Manager URL-címet (`http://myATMURL.trafficmanager.net`) amely kivonatolja a tényleges URL-címek (`http://app1URL.cloudapp.net` és `http://app2URL.cloudapp.net`).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-137">In the following diagram, users connect to a Traffic Manager URL (`http://myATMURL.trafficmanager.net`) which abstracts the actual site URLs (`http://app1URL.cloudapp.net` and `http://app2URL.cloudapp.net`).</span></span> <span data-ttu-id="d8b0e-138">Felhasználói kérelem irányul, a megfelelő alapul szolgáló URL-cím alapján a konfigurált [Traffic Manager útválasztási módszer](/azure/traffic-manager/traffic-manager-routing-methods).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-138">User requests are routed to the proper underlying URL based on your configured [Traffic Manager routing method](/azure/traffic-manager/traffic-manager-routing-methods).</span></span> <span data-ttu-id="d8b0e-139">Az ebben a cikkben azt fogja érintett, csak a feladatátvételi lehetőséggel.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-139">For the sake of this article, we will be concerned with only the failover option.</span></span>

![Útválasztás az Azure Traffic Manager-n keresztül](./images/disaster-recovery-azure-applications/routing-using-azure-traffic-manager.png)

<span data-ttu-id="d8b0e-141">A Traffic Manager konfigurálásakor meg kell adnia egy új Traffic Manager DNS-előtagot, mely felhasználók fogják használni, a szolgáltatás eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-141">When configuring Traffic Manager, you provide a new Traffic Manager DNS prefix, which users will use to access your service.</span></span> <span data-ttu-id="d8b0e-142">Traffic Manager most kivonatok terheléselosztás 1. szintű újabb verziója, amely a regionális szinten.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-142">Traffic Manager now abstracts load balancing one level higher that the regional level.</span></span> <span data-ttu-id="d8b0e-143">A Traffic Manager DNS képez le egy olyan CNAME REKORDOT, az összes üzemelő példányhoz, amelyet felügyel.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-143">The Traffic Manager DNS maps to a CNAME for all the deployments that it manages.</span></span>

<span data-ttu-id="d8b0e-144">Belül a Traffic Manager, akkor adja meg a üzemelő példánya, amely a felhasználók továbbítja a meghibásodás rangsorolt listáját.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-144">Within Traffic Manager, you specify a prioritized list of deployments that users will be routed to when failure occurs.</span></span> <span data-ttu-id="d8b0e-145">A TRAFFIC Manager figyeli a központi telepítési végpontok.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-145">Traffic Manager monitors the deployment endpoints.</span></span> <span data-ttu-id="d8b0e-146">Ha az elsődleges üzemelő példány nem érhető el, a Traffic Manager átirányítja a felhasználókat a következő központi telepítéshez, a prioritási listán lévő.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-146">If the primary deployment becomes unavailable, Traffic Manager routes users to the next deployment on the priority list.</span></span>

<span data-ttu-id="d8b0e-147">Bár a Traffic Manager úgy dönt, hogy hová lépjen egy feladatátvétel során, megadhatja, hogy a feladatátvétel tartomány-e alvó vagy aktív amíg Ön nem feladatátvételi módban (amely független a Traffic Manager).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-147">Although Traffic Manager decides where to go during a failover, you can decide whether your failover domain is dormant or active while you're not in failover mode (which is unrelated to Traffic Manager).</span></span> <span data-ttu-id="d8b0e-148">A TRAFFIC Manager hibát észlel, az elsődleges helyen, és áthalad a feladatátvételi helyet, függetlenül attól, hogy a hely jelenleg szolgálja ki felhasználók.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-148">Traffic Manager detects a failure in the primary site and rolls over to the failover site, regardless of whether that site is currently serving users.</span></span>

<span data-ttu-id="d8b0e-149">Az Azure Traffic Manager működésével kapcsolatos további információkért tekintse meg:</span><span class="sxs-lookup"><span data-stu-id="d8b0e-149">For more information on how Azure Traffic Manager works, refer to:</span></span>

* [<span data-ttu-id="d8b0e-150">A TRAFFIC Manager áttekintése</span><span class="sxs-lookup"><span data-stu-id="d8b0e-150">Traffic Manager overview</span></span>](/azure/traffic-manager/traffic-manager-overview/)
* [<span data-ttu-id="d8b0e-151">A Traffic Manager útválasztási módszerei</span><span class="sxs-lookup"><span data-stu-id="d8b0e-151">Traffic Manager routing methods</span></span>](/azure/traffic-manager/traffic-manager-routing-methods)
* [<span data-ttu-id="d8b0e-152">Feladatátvétel útválasztási módjának konfigurálása</span><span class="sxs-lookup"><span data-stu-id="d8b0e-152">Configure failover routing method</span></span>](/azure/traffic-manager/traffic-manager-configure-failover-routing-method/)

## <a name="azure-disaster-scenarios"></a><span data-ttu-id="d8b0e-153">Azure vészhelyreállítási forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="d8b0e-153">Azure disaster scenarios</span></span>
<span data-ttu-id="d8b0e-154">Az alábbi szakaszok a vészhelyreállítási forgatókönyveket számos különböző típusú terjed ki.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-154">The following sections cover several different types of disaster scenarios.</span></span> <span data-ttu-id="d8b0e-155">Régióra kiterjedő szolgáltatáskimaradás nem tartoznak alkalmazásszintű hibák csak okát.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-155">Region-wide service disruptions are not the only cause of application-wide failures.</span></span> <span data-ttu-id="d8b0e-156">Rossz kialakítás és a felügyeleti hibák valamilyen okból kimaradás lép is vezethet.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-156">Poor design and administrative errors can also lead to outages.</span></span> <span data-ttu-id="d8b0e-157">Fontos figyelembe venni a hiba lehetséges okait és a tervezési és a tesztelési fázisban a helyreállítási terv során.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-157">It's important to consider the possible causes of a failure during both the design and testing phases of your recovery plan.</span></span> <span data-ttu-id="d8b0e-158">Egy jó terv kihasználja az Azure-funkciókról, és úgy bővíti az őket az alkalmazás-specifikus stratégiák.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-158">A good plan takes advantage of Azure features and augments them with application-specific strategies.</span></span> <span data-ttu-id="d8b0e-159">A kiválasztott válasz határozza meg az alkalmazás fontossága a helyreállításipont-célkitűzés (RPO) és a helyreállítási időre vonatkozó célkitűzés (RTO).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-159">The chosen response is determined by the importance of the application, the recovery point objective (RPO), and the recovery time objective (RTO).</span></span>

### <a name="application-failure"></a><span data-ttu-id="d8b0e-160">Alkalmazáshiba</span><span class="sxs-lookup"><span data-stu-id="d8b0e-160">Application failure</span></span>
<span data-ttu-id="d8b0e-161">Az Azure Traffic Manager automatikusan kezeli a gazdagép virtuális gép a mögöttes hardver vagy operációs rendszer szoftvert eredő hibák.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-161">Azure Traffic Manager automatically handles failures that result from the underlying hardware or operating system software in the host virtual machine.</span></span> <span data-ttu-id="d8b0e-162">Az Azure létrehoz egy új szerepkör-példányt, és hozzáadja azt a rendelkezésre álló készlet.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-162">Azure creates a new role instance and adds it to the available pool.</span></span> <span data-ttu-id="d8b0e-163">Ha több szerepkör-példány már futott, Azure feldolgozási a többi futó szerepkörpéldányok közben, és cserélje le a sikertelen csomópontra lesz.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-163">If  more than one role instance was already running, Azure shifts processing to the other running role instances while replacing the failed node.</span></span>

<span data-ttu-id="d8b0e-164">Súlyos hiba fordulhat elő, a hardver vagy operációs rendszer alapjául szolgáló meghibásodás nélkül.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-164">Serious application errors can occur without any underlying failure of the hardware or operating system.</span></span> <span data-ttu-id="d8b0e-165">Az alkalmazás hibás logika vagy az adatok épségével kapcsolatos problémákat okozott végzetes kivétel miatt sikertelen lehet.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-165">The application might fail due to catastrophic exceptions caused by bad logic or data integrity issues.</span></span> <span data-ttu-id="d8b0e-166">Az alkalmazás kódjában elegendő telemetriai szerepelnie kell, hogy a monitorozási rendszer hibafeltételek észleli, és a egy alkalmazás-rendszergazda értesítést.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-166">You must include sufficient telemetry in the application code so that a monitoring system can detect failure conditions and notify an application administrator.</span></span> <span data-ttu-id="d8b0e-167">Olyan rendszergazda, aki rendelkezik a vész-helyreállítási folyamatok teljes ismerete is döntsön feladatátvételi folyamatot indíthat, vagy fogadja el a rendelkezésre állási kimaradás a kritikus hibák feloldása közben.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-167">An administrator who has full knowledge of the disaster recovery processes can decide whether to trigger a failover process or accept an availability outage while resolving the critical errors.</span></span>

### <a name="data-corruption"></a><span data-ttu-id="d8b0e-168">Adatsérülés</span><span class="sxs-lookup"><span data-stu-id="d8b0e-168">Data corruption</span></span>
<span data-ttu-id="d8b0e-169">Az Azure automatikusan tárolja az Azure SQL Database és az Azure Storage adatokat háromszor redundantly belül különböző tartalék tartományban találhatók ugyanabban a régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-169">Azure automatically stores Azure SQL Database and Azure Storage data three times redundantly within different fault domains in the same region.</span></span> <span data-ttu-id="d8b0e-170">Ha georeplikációt használ, az adatok további három alkalommal tárolódik egy másik régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-170">If you use geo-replication, the data is stored three additional times in a different region.</span></span> <span data-ttu-id="d8b0e-171">Azonban ha a felhasználók vagy az alkalmazás megsérülnek az elsődleges verziót az adatokhoz, az adatok gyorsan replikálja a többi példány.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-171">However, if your users or your application corrupts that data in the primary copy, the data quickly replicates to the other copies.</span></span> <span data-ttu-id="d8b0e-172">Sajnos az eredmény sérült adatok több példányát.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-172">Unfortunately, this results in multiple copies of corrupt data.</span></span>

<span data-ttu-id="d8b0e-173">A lehetséges meghibásodási az adatok kezeléséhez, két lehetősége van.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-173">To manage potential corruption of your data, you have two options.</span></span> <span data-ttu-id="d8b0e-174">Először egy egyéni biztonsági mentési stratégia segítségével kezelheti.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-174">First, you can manage a custom backup strategy.</span></span> <span data-ttu-id="d8b0e-175">A biztonsági másolatok tárolása Azure-ban vagy a helyszínen, az üzleti követelményeit vagy szabályozási előírások függően.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-175">You can store your backups in Azure or on-premises, depending on your business requirements or governance regulations.</span></span> <span data-ttu-id="d8b0e-176">Egy másik lehetőség, hogy az SQL-adatbázis helyreállítása időponthoz visszaállítási lehetőség használatával.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-176">Another option is to use the point-in-time restore option to recover a SQL database.</span></span> <span data-ttu-id="d8b0e-177">További információkért lásd: a [vész-helyreállítási stratégiát adatok](#data-strategies-for-disaster-recovery) szakaszt.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-177">For more information, see the [data strategies for disaster recovery](#data-strategies-for-disaster-recovery) section below.</span></span>

### <a name="network-outage"></a><span data-ttu-id="d8b0e-178">Hálózati kimaradás</span><span class="sxs-lookup"><span data-stu-id="d8b0e-178">Network outage</span></span>
<span data-ttu-id="d8b0e-179">Ha az Azure-hálózat részét nem érhető el, előfordulhat, hogy nem lehet elérni az alkalmazást vagy adatokat.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-179">When parts of the Azure network are inaccessible, you may be unable to access your application or data.</span></span> <span data-ttu-id="d8b0e-180">Ha egy vagy több szerepkörpéldányt hálózati problémák miatt nem érhető el, az Azure az alkalmazás többi rendelkezésre álló példányát használja.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-180">If one or more role instances are unavailable due to network issues, Azure uses the remaining available instances of your application.</span></span> <span data-ttu-id="d8b0e-181">Ha az alkalmazás egy Azure-beli hálózati szolgáltatáskimaradás miatt nem érhető el az adatokat, potenciálisan futtathatja a csökkentett az alkalmazás funkciói helyileg gyorsítótárazott adatok használatával.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-181">If your application cannot access its data because of an Azure network outage, you can potentially run with reduced application functionality locally by using cached data.</span></span> <span data-ttu-id="d8b0e-182">Kell terveznie a vész-helyreállítási stratégiát az alkalmazás-ban korlátozott funkciókkal rendelkező futtatásához.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-182">You need to design the disaster recovery strategy to run with reduced functionality in your application.</span></span> <span data-ttu-id="d8b0e-183">Egyes alkalmazások esetében ez nem praktikus.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-183">For some applications, this might not be practical.</span></span>

<span data-ttu-id="d8b0e-184">Egy másik lehetőség, hogy az adatok tárolása egy másik helyre, amíg a kapcsolat helyreáll.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-184">Another option is to store data in an alternate location until connectivity is restored.</span></span> <span data-ttu-id="d8b0e-185">Ha csökkenti a funkció nem egy beállítást, a további beállításokat is alkalmazás állásidő és a egy másodlagos régióba történő feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-185">If reducing functionality is not an option, the remaining options are application downtime or failover to an alternate region.</span></span> <span data-ttu-id="d8b0e-186">Az alkalmazás korlátozott funkciókkal működik tervezési műszaki ütemezésként akár egy üzleti döntés.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-186">The design of an application running with reduced functionality is as much a business decision as a technical one.</span></span> <span data-ttu-id="d8b0e-187">Ezekről a szakaszban a további [csökkenteni az alkalmazás funkciói](#reduced-application-functionality).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-187">This is discussed further in the section on [reduced application functionality](#reduced-application-functionality).</span></span>

### <a name="failure-of-a-dependent-service"></a><span data-ttu-id="d8b0e-188">Az egyik függő szolgáltatás hibája</span><span class="sxs-lookup"><span data-stu-id="d8b0e-188">Failure of a dependent service</span></span>
<span data-ttu-id="d8b0e-189">Az Azure számos olyan szolgáltatás, amely a rendszeres szoftverkarbantartás is biztosít.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-189">Azure provides many services that can experience periodic downtime.</span></span> <span data-ttu-id="d8b0e-190">Ha például [Azure Redis Cache](https://azure.microsoft.com/services/cache/) egy több-bérlős szolgáltatás, amely az alkalmazás gyorsítótárazási lehetőségeket kínál.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-190">For example, [Azure Redis Cache](https://azure.microsoft.com/services/cache/) is a multi-tenant service which provides caching capabilities to your application.</span></span> <span data-ttu-id="d8b0e-191">Fontos figyelembe venni, mi történik az alkalmazásban, ha a függő szolgáltatás nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-191">It's important to consider what happens in your application if the dependent service is unavailable.</span></span> <span data-ttu-id="d8b0e-192">Számos módon ebben a forgatókönyvben a hálózati szolgáltatáskimaradás forgatókönyv hasonló.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-192">In many ways, this scenario is similar to the network outage scenario.</span></span> <span data-ttu-id="d8b0e-193">Azonban az egyes szolgáltatások egymástól függetlenül eredményez az általános tervhez lehetséges fejlesztései mérlegeli.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-193">However, considering each service independently results in potential improvements to your overall plan.</span></span>

<span data-ttu-id="d8b0e-194">Az Azure Redis Cache az alkalmazásnak a belül a felhőszolgáltatás üzembe helyezésének, amely katasztrófa utáni helyreállítás értékelemeket biztosít gyorsítótárazást biztosítja.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-194">Azure Redis Cache provides caching to your application from within your cloud service deployment, which provides disaster recovery benefits.</span></span> <span data-ttu-id="d8b0e-195">Először a szolgáltatás most a szerepkörök, amelyek helyi az üzemelő példány fog futni.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-195">First, the service now runs on roles that are local to your deployment.</span></span> <span data-ttu-id="d8b0e-196">Ezért most már jobban tudja figyelheti és kezelheti a gyorsítótár állapotát a felügyeleti folyamatok a felhőalapú szolgáltatás részeként.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-196">Therefore, you're better able to monitor and manage the status of the cache as part of your overall management processes for the cloud service.</span></span> <span data-ttu-id="d8b0e-197">Az ilyen típusú gyorsítótár is közzétesz az új funkciók, például a magas rendelkezésre állás a gyorsítótárazott adatokat, amely megőrzi a gyorsítótárban lévő adatok duplikált más csomópontokon megőrzése egyetlen csomópont meghibásodásakor.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-197">This type of caching also exposes new features such as high availability for cached data, which preserves cached data if a single node fails by maintaining duplicate copies on other nodes.</span></span>

<span data-ttu-id="d8b0e-198">Vegye figyelembe, hogy magas rendelkezésre állású csökkenti az átviteli sebességet, és növeli a késés, mivel az írási műveletek is kell upedate minden másodlagos példánya.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-198">Note that high availability decreases throughput and increases latency because write operations must also upedate any secondary copies.</span></span> <span data-ttu-id="d8b0e-199">A gyorsítótárazott adatok tárolásához szükséges memória hatékonyan megduplázódott, amely kell figyelembe venni kapacitásának tervezése során.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-199">The amount of memory required to store the cached data is effectively doubled, which must be taken into account during capacity planning.</span></span>  <span data-ttu-id="d8b0e-200">Ez a példa bemutatja, hogy minden függő szolgáltatás előfordulhat, hogy képességekkel rendelkeznek, javíthatja a rendelkezésre állás és a megrögzöttség végzetes hibák.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-200">This example demonstrates that each dependent service might have capabilities that improve your overall availability and resistance to catastrophic failures.</span></span>

<span data-ttu-id="d8b0e-201">És minden függő szolgáltatás a szolgáltatás megszűnésének következményei tisztában kell lennie.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-201">With each dependent service, you should understand the implications of a service disruption.</span></span> <span data-ttu-id="d8b0e-202">A gyorsítótárazási példában lehet érhetők el az adatokat közvetlenül az adatbázis mindaddig, amíg a gyorsítótár visszaállítását.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-202">In the caching example, it might be possible to access the data directly from a database until you restore your cache.</span></span> <span data-ttu-id="d8b0e-203">Ez azt eredményezi csökkentett teljesítményt, miközben alkalmazásadatok teljes hozzáférést biztosít.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-203">This would result in reduced performance while providing full access to application data.</span></span>

### <a name="region-wide-service-disruption"></a><span data-ttu-id="d8b0e-204">Régióra kiterjedő szolgáltatáskimaradás</span><span class="sxs-lookup"><span data-stu-id="d8b0e-204">Region-wide service disruption</span></span>
<span data-ttu-id="d8b0e-205">A korábbi hibák elsősorban lett hibák, amelyek azonos Azure-régióban kezelhetők.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-205">The previous failures have primarily been failures that can be managed within the same Azure region.</span></span> <span data-ttu-id="d8b0e-206">Azonban el kell készítenie is, hogy nincs-e egy teljes régió szolgáltatáskimaradás lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-206">However, you must also prepare for the possibility that there is a service disruption of the entire region.</span></span> <span data-ttu-id="d8b0e-207">Régióra kiterjedő szolgáltatáskimaradás esetén a helyileg redundáns másolatait az adatok nem érhetők el.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-207">If a region-wide service disruption occurs, the locally redundant copies of your data are not available.</span></span> <span data-ttu-id="d8b0e-208">Engedélyezte a georeplikáció, van-e a blobok és a egy másik régióban lévő táblák három további másolatot készít.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-208">If you have enabled geo-replication, there are three additional copies of your blobs and tables in a different region.</span></span> <span data-ttu-id="d8b0e-209">Ha a Microsoft deklarálja megszakadt a régió, Azure ismételten leképezett összes DNS-bejegyzéseket, a georeplikált régióba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-209">If Microsoft declares the region lost, Azure remaps all of the DNS entries to the geo-replicated region.</span></span>

> [!NOTE]
> <span data-ttu-id="d8b0e-210">Vegye figyelembe, hogy nem kell minden olyan ezt a folyamatot szabályozhatja, és azt csak a régióra kiterjedő szolgáltatáskimaradás lép fel.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-210">Be aware that you don't have any control over this process, and it will occur only for region-wide service disruption.</span></span> <span data-ttu-id="d8b0e-211">Fontolja meg [Azure Site Recovery](/azure/site-recovery/) jobb RPO és RTO érhető el.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-211">Consider using [Azure Site Recovery](/azure/site-recovery/) to achieve better RPO and RTO.</span></span> <span data-ttu-id="d8b0e-212">A Site Recovery lehetővé teszi, hogy az alkalmazás döntse el, mi elfogadható kimaradás, és mikor kell a replikált virtuális gépek a feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-212">Site Recovery allows application to decide what is an acceptable outage, and when to fail over to the replicated VMs.</span></span>

### <a name="azure-wide-service-disruption"></a><span data-ttu-id="d8b0e-213">Azure kiterjedő szolgáltatáskimaradás</span><span class="sxs-lookup"><span data-stu-id="d8b0e-213">Azure-wide service disruption</span></span>
<span data-ttu-id="d8b0e-214">A vészhelyreállítás megtervezése, figyelembe kell vennie annak teljes tartományát, a lehetséges vészhelyzetek esetére.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-214">In disaster planning, you must consider the entire range of possible disasters.</span></span> <span data-ttu-id="d8b0e-215">A legsúlyosabb szolgáltatáskimaradásokat közül egyszerre járna minden Azure-régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-215">One of the most severe service disruptions would involve all Azure regions simultaneously.</span></span> <span data-ttu-id="d8b0e-216">Csakúgy, mint más szolgáltatáskimaradásokat dönthet, hogy fogadja el ebben az esetben az ideiglenes állásidő kockázatát.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-216">As with other service disruptions, you might decide to accept the risk of temporary downtime in that event.</span></span> <span data-ttu-id="d8b0e-217">Széles körű szolgáltatáskimaradásokat régiók kiterjedő olyan elkülönített szolgáltatáskimaradásokat függő szolgáltatások vagy az egyetlen régióban, mint jóval ritkább.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-217">Widespread service disruptions that span regions are much rarer than isolated service disruptions involving dependent services or single regions.</span></span>

<span data-ttu-id="d8b0e-218">Azonban dönthet úgy, hogy bizonyos alapvető fontosságú alkalmazásokhoz egy többrégiós szolgáltatáskimaradás lép fel a biztonsági mentési terv szükséges.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-218">However, you may decide that certain mission-critical applications require a backup plan for a multi-region service disruption.</span></span> <span data-ttu-id="d8b0e-219">Ez a séma tartalmazhat átadni a feladatokat a szolgáltatások egy [alternatív felhőalapú](#alternative-cloud) vagy egy [a helyszíni és hibrid felhőalapú megoldással](#hybrid-on-premises-and-cloud-solution).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-219">This plan might include failing over to services in an [alternative cloud](#alternative-cloud) or a [hybrid on-premises and cloud solution](#hybrid-on-premises-and-cloud-solution).</span></span>

### <a name="reduced-application-functionality"></a><span data-ttu-id="d8b0e-220">Csökkentett az alkalmazás funkciói</span><span class="sxs-lookup"><span data-stu-id="d8b0e-220">Reduced application functionality</span></span>
<span data-ttu-id="d8b0e-221">Egy jól megtervezett alkalmazás általában a szolgáltatások, amelyek egymással kommunikálnak, ha lazán kapcsolódó adatcsere-minták végrehajtásának használ.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-221">A well-designed application typically uses services that communicate with each other though the implementation of loosely coupled information-interchange patterns.</span></span> <span data-ttu-id="d8b0e-222">A DR-barát alkalmazás használatához a szolgáltatási szinten a feladatkörök elkülönítése.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-222">A DR-friendly application requires separation of responsibilities at the service level.</span></span> <span data-ttu-id="d8b0e-223">Ez megakadályozza, hogy az egyik függő szolgáltatás a megszakítások időtartamát a teljes alkalmazás leáll.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-223">This prevents the disruption of a dependent service from bringing down the entire application.</span></span> <span data-ttu-id="d8b0e-224">Például vegyünk egy kereskedelmi webalkalmazás az Y vállalathoz. A következő modulok számít előfordulhat, hogy az alkalmazás:</span><span class="sxs-lookup"><span data-stu-id="d8b0e-224">For example, consider a web commerce application for Company Y. The following modules might constitute the application:</span></span>

* <span data-ttu-id="d8b0e-225">**Termékkatalógus** lehetővé teszi, hogy a felhasználók számára a termékek.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-225">**Product Catalog** allows users to browse products.</span></span>
* <span data-ttu-id="d8b0e-226">**Bevásárlókocsi** lehetővé teszi a felhasználóknak a bevásárlókocsi-termékekről hozzáadása/eltávolítása.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-226">**Shopping Cart** allows users to add/remove products in their shopping cart.</span></span>
* <span data-ttu-id="d8b0e-227">**ORDER Status** felhasználói rendelések szállítás állapotát jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-227">**Order Status** shows the shipping status of user orders.</span></span>
* <span data-ttu-id="d8b0e-228">**Beküldés ORDER** a vásárlási munkamenet finalizes fizetési megrendelés elküldésével.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-228">**Order Submission** finalizes the shopping session by submitting the order with payment.</span></span>
* <span data-ttu-id="d8b0e-229">**Rendelések feldolgozása** érvényesíti a rendelés az adatok integritását, és mennyiség rendelkezésre állását ellenőrzi.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-229">**Order Processing** validates the order for data integrity and performs a quantity availability check.</span></span>

<span data-ttu-id="d8b0e-230">Amikor egy szolgáltatásfüggőség az alkalmazás nem érhető el, hogyan nem a szolgáltatás működőképes, amíg a függőségi állítja helyre?</span><span class="sxs-lookup"><span data-stu-id="d8b0e-230">When a service dependency in this application becomes unavailable, how does the service function until the dependency recovers?</span></span> <span data-ttu-id="d8b0e-231">Egy jól megtervezett rendszer valósítja meg az elkülönítési határokat a tervezés során, és futásidőben felelősségekről, szétválasztása révén.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-231">A well-designed system implements isolation boundaries through separation of responsibilities, both at design time and at runtime.</span></span> <span data-ttu-id="d8b0e-232">Minden hiba elhárítása érdekében, és nem állítható helyre, rendezheti az.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-232">You can categorize every failure as recoverable and non-recoverable.</span></span> <span data-ttu-id="d8b0e-233">Helyreállíthatatlan hibák tartalomtérkép le a szolgáltatást, de csökkentheti keresztül alternatívák Helyrehozható hiba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-233">Non-recoverable errors will bring down the service, but you can mitigate a recoverable error through alternatives.</span></span> <span data-ttu-id="d8b0e-234">Bizonyos problémák automatikus hibák kezeléséhez, és más műveleteket, amelyek átlátható a felhasználó.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-234">Certain problems addressed by automatically handling faults and taking alternate actions are transparent to the user.</span></span> <span data-ttu-id="d8b0e-235">Egy komolyabb szolgáltatáskimaradás során az alkalmazás lehet teljesen nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-235">During a more serious service disruption, the application might be completely unavailable.</span></span> <span data-ttu-id="d8b0e-236">Egy harmadik lehetőség, hogy továbbra is a felhasználói kérelmek kezelését az korlátozott funkciókkal.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-236">A third option is to continue handling user requests with reduced functionality.</span></span>

<span data-ttu-id="d8b0e-237">Például az adatbázist tartalmazó rendeléseket leáll, ha a rendelések feldolgozása szolgáltatás nem képes a értékesítési tranzakciók feldolgozását.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-237">For instance, if the database for hosting orders goes down, the Order Processing service loses its ability to process sales transactions.</span></span> <span data-ttu-id="d8b0e-238">Az architektúra függően nehéz vagy lehetetlen a rendelés benyújtása és a rendelések feldolgozása szolgáltatások az alkalmazás továbbra is lehet.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-238">Depending on the architecture, it might be difficult or impossible for the Order Submission and Order Processing services of the application to continue.</span></span> <span data-ttu-id="d8b0e-239">Ha az alkalmazás nem célja e forgatókönyv, a teljes alkalmazás offline lehet, hogy lépjen.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-239">If the application is not designed to handle this scenario, the entire application might go offline.</span></span> <span data-ttu-id="d8b0e-240">Azonban ha a termék adatai egy másik helyen található, akkor a termékkatalógus modul továbbra is használhatók termékek megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-240">However, if the product data is stored in a different location, then the Product Catalog module can still be used for viewing products.</span></span> <span data-ttu-id="d8b0e-241">Az alkalmazás egyéb részei azonban nem érhető el, például rendezés vagy készlet lekérdezéseket is.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-241">However, other parts of the application are unavailable, such as ordering or inventory queries.</span></span>

<span data-ttu-id="d8b0e-242">Annak eldöntése, milyen csökkentett alkalmazás funkció érhető el egy üzleti döntés és a egy műszaki döntés.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-242">Deciding what reduced application functionality is available is both a business decision and a technical decision.</span></span> <span data-ttu-id="d8b0e-243">El kell döntenie, hogyan az alkalmazás ideiglenes problémákra a felhasználókat tájékoztatni fogja.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-243">You must decide how the application will inform the users of any temporary problems.</span></span> <span data-ttu-id="d8b0e-244">A fenti példában az alkalmazás előfordulhat, hogy engedélyezi a termékek megtekintése és hozzáadni azokat egy kosár.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-244">In the example above, the application might allow viewing products and adding them to a shopping cart.</span></span> <span data-ttu-id="d8b0e-245">Azonban amikor a felhasználó megpróbál e vásárolni valamit, az alkalmazás értesíti a felhasználót, hogy a rendelési funkciók átmenetileg nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-245">However, when the user attempts to make a purchase, the application notifies the user that the ordering functionality is temporarily unavailable.</span></span> <span data-ttu-id="d8b0e-246">Ez ideális az ügyfél nem, de az alkalmazás kiterjedő szolgáltatáskimaradás akadályozza meg.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-246">This isn't ideal for the customer, but it does prevent an application-wide service disruption.</span></span>

## <a name="data-strategies-for-disaster-recovery"></a><span data-ttu-id="d8b0e-247">Vész-helyreállítási adatok stratégiák</span><span class="sxs-lookup"><span data-stu-id="d8b0e-247">Data strategies for disaster recovery</span></span>
<span data-ttu-id="d8b0e-248">Megfelelő adatkezeléssel vész-helyreállítási terv kihívást aspektusa.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-248">Proper data handling is a challenging aspect of a disaster recovery plan.</span></span> <span data-ttu-id="d8b0e-249">A helyreállítási folyamat során adatok helyreállítása általában a legtöbb időt vesz igénybe.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-249">During the recovery process, data restoration typically takes the most time.</span></span> <span data-ttu-id="d8b0e-250">Adat-helyreállítást hiba és a konzisztencia nehéz kapcsolatban felmerülő kihívások hiba után csökkenti a funkciók különböző lehetőségeit eredményez.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-250">Different choices for reducing functionality result in difficult challenges for data recovery from failure and consistency after failure.</span></span>

<span data-ttu-id="d8b0e-251">Egy szempont, visszaállítása vagy az alkalmazás adatokat karbantartása.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-251">One consideration is the need to restore or maintain a copy of the application’s data.</span></span> <span data-ttu-id="d8b0e-252">Ezeket az adatokat a hivatkozást és a egy másodlagos helyen lévő tranzakciós célú fogja használni.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-252">You will use this data for reference and transactional purposes at a secondary site.</span></span> <span data-ttu-id="d8b0e-253">Egy helyi központi egy költséges és hosszadalmas tervezési folyamat több régiók vészhelyreállítási stratégia megvalósításához szükséges.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-253">An on-premises deployment requires an expensive and lengthy planning process to implement a multiple-region disaster recovery strategy.</span></span> <span data-ttu-id="d8b0e-254">A legtöbb felhőszolgáltatóhoz, mint amilyen az Azure-ban, kényelmesen, könnyen engedélyezése az alkalmazások több régióban üzembe.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-254">Conveniently, most cloud providers, including Azure, readily allow the deployment of applications to multiple regions.</span></span> <span data-ttu-id="d8b0e-255">Ezekben a régiókban vannak földrajzilag elosztott oly módon, hogy több régiók szolgáltatáskimaradás rendkívül ritka legyen-e.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-255">These regions are geographically distributed in such a way that multiple-region service disruption should be extremely rare.</span></span> <span data-ttu-id="d8b0e-256">A stratégia az adatok régiók közötti egyike a sikeres működés érdekében minden olyan vész-helyreállítási terv befolyásoló meghatározó tényezőket.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-256">The strategy for handling data across regions is one of the contributing factors for the success of any disaster recovery plan.</span></span>

<span data-ttu-id="d8b0e-257">A következő részekben bemutatjuk a katasztrófa utáni helyreállítással kapcsolatos adatok biztonsági mentése, a referenciaadatok és a tranzakciós adatok.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-257">The following sections discuss disaster recovery techniques related to data backups, reference data, and transactional data.</span></span>

### <a name="backup-and-restore"></a><span data-ttu-id="d8b0e-258">Biztonsági mentés és visszaállítás</span><span class="sxs-lookup"><span data-stu-id="d8b0e-258">Backup and restore</span></span>
<span data-ttu-id="d8b0e-259">Rendszeres biztonsági mentést készít az egyes vész-helyreállítási helyzetekben képes támogatni.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-259">Regular backups of application data can support some disaster recovery scenarios.</span></span> <span data-ttu-id="d8b0e-260">Más tárolási erőforrások szükséges különböző módszereket.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-260">Different storage resources require different techniques.</span></span>

#### <a name="sql-database"></a><span data-ttu-id="d8b0e-261">SQL Database</span><span class="sxs-lookup"><span data-stu-id="d8b0e-261">SQL Database</span></span>
<span data-ttu-id="d8b0e-262">A Basic, Standard és prémium szintű SQL Database-szinten akkor kihasználhatja időponthoz visszaállítás az adatbázis helyreállítása.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-262">For the Basic, Standard, and Premium SQL Database tiers, you can take advantage of point-in-time restore to recover your database.</span></span> <span data-ttu-id="d8b0e-263">További információkért lásd: [áttekintése: a felhő üzleti folytonossági és adatbázis katasztrófa utáni helyreállítás az SQL Database](/azure/sql-database/sql-database-business-continuity/).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-263">For more information, see [Overview: Cloud business continuity and database disaster recovery with SQL Database](/azure/sql-database/sql-database-business-continuity/).</span></span> <span data-ttu-id="d8b0e-264">Egy másik lehetőség, az aktív Georeplikáció által használandó SQL Database-hez.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-264">Another option is to use Active Geo-Replication for SQL Database.</span></span> <span data-ttu-id="d8b0e-265">Ez automatikusan replikál a adatbázis másodlagos adatbázisok ugyanazon Azure-régióban, vagy akár egy másik régióba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-265">This automatically replicates database changes to secondary databases in the same Azure region or even in a different Azure region.</span></span> <span data-ttu-id="d8b0e-266">Ez néhány ebben a cikkben bemutatott több manuális adatok szinkronizálási módszert lehetséges alternatívát kínál.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-266">This provides a potential alternative to some of the more manual data synchronization techniques presented in this article.</span></span> <span data-ttu-id="d8b0e-267">További információkért lásd: [áttekintés: SQL adatbázis aktív Georeplikációt](/azure/sql-database/sql-database-geo-replication-overview/).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-267">For more information, see [Overview: SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/).</span></span>

<span data-ttu-id="d8b0e-268">Is több manuális módszer használata a biztonsági mentés és visszaállítás.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-268">You can also use a more manual approach for backup and restore.</span></span> <span data-ttu-id="d8b0e-269">Az adatbázis-Másolás parancs segítségével az adatbázis biztonsági másolatának létrehozása tranzakció-konzisztencia.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-269">Use the DATABASE COPY command to create a backup copy of the database with transactional consistency.</span></span> <span data-ttu-id="d8b0e-270">Az import/export szolgáltatás támogatja a exportálása BACPAC fájlok (az adatbázisséma és a társított adatokat tartalmazó tömörített fájlok), az Azure Blob storage-ban tárolt adatbázisok Azure SQL Database is használhatja.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-270">You can also use the import/export service of Azure SQL Database, which supports exporting databases to BACPAC files (compressed files containing your database schema and associated data) that are stored in Azure Blob storage.</span></span>

<span data-ttu-id="d8b0e-271">A beépített redundancia, az Azure Storage két replika a biztonságimásolat-fájl ugyanabban a régióban hoz létre.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-271">The built-in redundancy of Azure Storage creates two replicas of the backup file in the same region.</span></span> <span data-ttu-id="d8b0e-272">Azonban a biztonsági mentési folyamat futtatásának gyakoriságát határozza meg a helyreállítási Időkorlát, vagyis az adatmennyiség elveszítheti a vész.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-272">However, the frequency of running the backup process determines your RPO, which is the amount of data you might lose in disaster scenarios.</span></span> <span data-ttu-id="d8b0e-273">Képzeljünk el például, hogy készítsen biztonsági mentést óránként tetején, és katasztrófa-két percet, az óra elején is.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-273">For example, imagine that you perform a backup at the top of each hour, and a disaster occurs two minutes before the top of the hour.</span></span> <span data-ttu-id="d8b0e-274">58 perc után az utolsó biztonsági másolat rögzített adatok elvesznek.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-274">You lose 58 minutes of data recorded after the last backup was performed.</span></span> <span data-ttu-id="d8b0e-275">Ezenkívül régióra kiterjedő szolgáltatáskimaradás ellen, másolja a BACPAC-fájl egy másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-275">Also, to protect against a region-wide service disruption, you should copy the BACPAC files to an alternate region.</span></span> <span data-ttu-id="d8b0e-276">Ezután lehetősége visszaállításának ezeket a biztonsági mentéseket a másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-276">You then have the option of restoring those backups in the alternate region.</span></span> <span data-ttu-id="d8b0e-277">További részletekért lásd: [áttekintése: a felhő üzleti folytonossági és adatbázis katasztrófa utáni helyreállítás az SQL Database](/azure/sql-database/sql-database-business-continuity/).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-277">For more details, see [Overview: Cloud business continuity and database disaster recovery with SQL Database](/azure/sql-database/sql-database-business-continuity/).</span></span>

#### <a name="azure-storage"></a><span data-ttu-id="d8b0e-278">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="d8b0e-278">Azure Storage</span></span>
<span data-ttu-id="d8b0e-279">Az Azure Storage esetében egy egyéni biztonsági mentési folyamat fejlesztése, vagy használja számos külső biztonsági mentési eszközök egyikét.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-279">For Azure Storage, you can develop a custom backup process or use one of many third-party backup tools.</span></span> <span data-ttu-id="d8b0e-280">Vegye figyelembe, hogy a legtöbb alkalmazás tervek további hagyhatják amikor tárolási erőforrások hivatkozás egymással.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-280">Note that most application designs have additional complexities where storage resources reference each other.</span></span> <span data-ttu-id="d8b0e-281">Például vegyünk egy SQL-adatbázis, amely rendelkezik egy olyan oszlop, hogy az Azure Storage-blobba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-281">For example, consider a SQL database that has a column that links to a blob in Azure Storage.</span></span> <span data-ttu-id="d8b0e-282">A biztonsági mentések nem egyszerre következnek be, ha az adatbázis egy blobot, amely nem készült biztonsági másolat a hiba előtt mutató kell.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-282">If the backups do not happen simultaneously, the database might have a pointer to a blob that was not backed up before the failure.</span></span> <span data-ttu-id="d8b0e-283">Az alkalmazás vagy a vész-helyreállítási terv musí implementovat rozhraní folyamatok kezeléséhez a inkonzisztenciát helyreállítás után.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-283">The application or disaster recovery plan must implement processes to handle this inconsistency after a recovery.</span></span>

#### <a name="other-data-platforms"></a><span data-ttu-id="d8b0e-284">Más adatplatform</span><span class="sxs-lookup"><span data-stu-id="d8b0e-284">Other data platforms</span></span>
<span data-ttu-id="d8b0e-285">Más infrastruktúra--szolgáltatásként (IaaS) üzemeltetett az adatplatformok, például a Elasticsearch vagy a MongoDB, a saját képességek és szempontok az integrált biztonsági mentési és visszaállítási folyamat létrehozásakor.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-285">Other infrastructure-as-a-service (IaaS) hosted data platforms, such as Elasticsearch or MongoDB, have their own capabilities and considerations when creating an integrated backup and restore process.</span></span> <span data-ttu-id="d8b0e-286">Ezen adatok platformon az általános ajánlás, hogy bármilyen natív vagy elérhető integrációs-alapú replikálás vagy pillanatfelvételeinek képességeket.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-286">For these data platforms, the general recommendation is to use any native or available integration-based replication or snapshotting capabilities.</span></span> <span data-ttu-id="d8b0e-287">Ezen képességek nem létezik vagy nem megfelelő, majd vagy használata javasolt az Azure Backup szolgáltatás kombinace spravovaného a nespravovaného pillanatképeit alkalmazásadatok időponthoz másolatának létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-287">If those capabilities do not exist or are not suitable, then consider using Azure Backup Service or managed/unmanaged disk snapshots to create a point-in-time copy of application data.</span></span> <span data-ttu-id="d8b0e-288">Minden esetben fontos határozza meg, hogyan konzisztens biztonsági másolatok eléréséhez, különösen akkor, ha az alkalmazásadatok kiterjedő több fájlrendszerek, vagy ha több meghajtó kötet kezelők vagy a szoftveres RAID használatával egyetlen fájlrendszer vannak egyesítve.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-288">In all cases, it’s important to determine how to achieve consistent backups, especially when application data spans multiple files systems, or when multiple drives are combined into a single file system using volume managers or software-based RAID.</span></span>

### <a name="reference-data-pattern-for-disaster-recovery"></a><span data-ttu-id="d8b0e-289">Vész-helyreállítási referencia adatmintát</span><span class="sxs-lookup"><span data-stu-id="d8b0e-289">Reference data pattern for disaster recovery</span></span>
<span data-ttu-id="d8b0e-290">Referenciaadatok, amely támogatja az alkalmazás funkciói csak olvasható adatok.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-290">Reference data is read-only data that supports application functionality.</span></span> <span data-ttu-id="d8b0e-291">Ez jellemzően nem változik gyakran.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-291">It typically does not change frequently.</span></span> <span data-ttu-id="d8b0e-292">Habár a biztonsági mentés és visszaállítás egy metódust régióra kiterjedő szolgáltatáskimaradás, az RTO viszonylag hosszú.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-292">Although backup and restore is one method to handle region-wide service disruptions, the RTO is relatively long.</span></span> <span data-ttu-id="d8b0e-293">Az alkalmazás egy másodlagos régióba történő telepítésekor néhány stratégiát javíthatja az RTO a referenciaadatoknál.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-293">When you deploy the application to a secondary region, some strategies can improve the RTO for reference data.</span></span>

<span data-ttu-id="d8b0e-294">Mert az adatok változásának hivatkozhat ritkán, javíthatja az RTO a referenciaadatokat a másodlagos régió az állandó másolatának megtartásával.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-294">Because reference data changes infrequently, you can improve the RTO by maintaining a permanent copy of the reference data in the secondary region.</span></span> <span data-ttu-id="d8b0e-295">Ezzel elkerülhető, hogy egy esetleges vészhelyzet esetén a biztonsági másolatok visszaállításához szükséges időt.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-295">This eliminates the time required to restore backups in the event of a disaster.</span></span> <span data-ttu-id="d8b0e-296">A több régiók vész-helyreállítási követelmények teljesítéséhez telepítenie kell az alkalmazás és a referenciaadatok együtt több régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-296">To meet the multiple-region disaster recovery requirements, you must deploy the application and the reference data together in multiple regions.</span></span> <span data-ttu-id="d8b0e-297">A [referencia adatmintát magas rendelkezésre állású](high-availability-azure-applications.md#reference-data-pattern-for-high-availability), referenciaadatok szerepe magát, a külső tárhelyen, vagy olyan kombinációját is telepíthet.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-297">As mentioned in [Reference data pattern for high availability](high-availability-azure-applications.md#reference-data-pattern-for-high-availability), you can deploy reference data to the role itself, to external storage, or to a combination of both.</span></span>

<span data-ttu-id="d8b0e-298">Referencia üzembe helyezési adatmodelljébe számítási csomópontok implicit módon eleget tesz a katasztrófa utáni helyreállítás.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-298">The reference data deployment model within compute nodes implicitly satisfies the disaster recovery requirements.</span></span> <span data-ttu-id="d8b0e-299">Az SQL Database referenciaadat-telepítés szükséges, hogy minden egyes régióban való üzembe helyezése a referenciaadatok másolatát.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-299">Reference data deployment to SQL Database requires that you deploy a copy of the reference data to each region.</span></span> <span data-ttu-id="d8b0e-300">Az azonos stratégia az Azure Storage vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-300">The same strategy applies to Azure Storage.</span></span> <span data-ttu-id="d8b0e-301">Telepítenie kell az elsődleges és másodlagos régiók az Azure Storage szolgáltatásban tárolt adatok másolatát.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-301">You must deploy a copy of any reference data that's stored in Azure Storage to the primary and secondary regions.</span></span>

![Adatok kiadvány referencia elsődleges és másodlagos régiók](./images/disaster-recovery-azure-applications/reference-data-publication-to-both-primary-and-secondary-regions.png)

<span data-ttu-id="d8b0e-303">Saját alkalmazás-specifikus biztonsági mentési rutinokat összes adatot, beleértve a referenciaadatok is meg kell valósítani.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-303">You must implement your own application-specific backup routines for all data, including reference data.</span></span> <span data-ttu-id="d8b0e-304">Georeplikált másolatok régióban kizárólag régióra kiterjedő szolgáltatáskimaradás használhatók.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-304">Geo-replicated copies across regions are used only in a region-wide service disruption.</span></span> <span data-ttu-id="d8b0e-305">Kiterjesztett állásidő elkerülése érdekében telepítse az alkalmazásadatok alapvető fontosságú részei a másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-305">To prevent extended downtime, deploy the mission-critical parts of the application’s data to the secondary region.</span></span> <span data-ttu-id="d8b0e-306">Ez a topológia egy példa: a [aktív-passzív modell](#active-passive).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-306">For an example of this topology, see the [active-passive model](#active-passive).</span></span>

### <a name="transactional-data-pattern-for-disaster-recovery"></a><span data-ttu-id="d8b0e-307">Vész-helyreállítási tranzakciós adatok minta</span><span class="sxs-lookup"><span data-stu-id="d8b0e-307">Transactional data pattern for disaster recovery</span></span>
<span data-ttu-id="d8b0e-308">Mód teljesen működőképes vészhelyreállítási stratégia megvalósítását, a tranzakciós adatokat a másodlagos régióba aszinkron replikáció igényel.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-308">Implementation of a fully functional disaster mode strategy requires asynchronous replication of the transactional data to the secondary region.</span></span> <span data-ttu-id="d8b0e-309">A gyakorlati idő windows belül, amely a replikáció fordulhat elő, határozza meg az alkalmazás RPO jellemzőit.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-309">The practical time windows within which the replication can occur will determine the RPO characteristics of the application.</span></span> <span data-ttu-id="d8b0e-310">Előfordulhat, hogy ilyenkor is helyreállíthatók az adatok, amelyek a replikáció időszak alatt az elsődleges régióból történő megszakadt.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-310">You might still recover the data that was lost from the primary region during the replication window.</span></span> <span data-ttu-id="d8b0e-311">Előfordulhat, hogy kell egyesíteni később a másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-311">You might also be able to merge with the secondary region later.</span></span>

<span data-ttu-id="d8b0e-312">A következő architektúra példák néhány ötletet a feladatátviteli forgatókönyv tranzakciós adatok kezelésének alapelveit különböző módszert is biztosítanak.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-312">The following architecture examples provide some ideas on different ways of handling transactional data in a failover scenario.</span></span> <span data-ttu-id="d8b0e-313">Fontos megjegyezni, hogy ezek a példák nem állnak teljes körű.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-313">It's important to note that these examples are not exhaustive.</span></span> <span data-ttu-id="d8b0e-314">Köztes tárolókba, például az üzenetsorok például az Azure SQL Database kell cserélni.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-314">For example, intermediate storage locations such as queues might be replaced with Azure SQL Database.</span></span> <span data-ttu-id="d8b0e-315">Lehet, hogy magukat az üzenetsorokat Azure Storage vagy az Azure Service Bus-üzenetsorok (lásd: [az Azure-üzenetsorok és Service Bus-üzenetsorok - képest, és összehasonlítása](/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted/)).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-315">The queues themselves might be either Azure Storage or Azure Service Bus queues (see [Azure queues and Service Bus queues - compared and contrasted](/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted/)).</span></span> <span data-ttu-id="d8b0e-316">Kiszolgáló tárolási célhely is eltérő lehet, például az Azure-táblák SQL-adatbázis helyett.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-316">Server storage destinations might also vary, such as Azure tables instead of SQL Database.</span></span> <span data-ttu-id="d8b0e-317">Feldolgozói szerepkör ezenkívül közvetítőként működik különböző lépésben lehet beszúrni.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-317">In addition, worker roles might be inserted as intermediaries in various steps.</span></span> <span data-ttu-id="d8b0e-318">Az célja nem pontosan emulációjához architektúrák, de érdemes figyelembe venni a különböző lehetőségeket a tranzakciós adatokat és a kapcsolódó modulok helyreállítását.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-318">The intent is not to emulate these architectures exactly, but to consider various alternatives in the recovery of transactional data and related modules.</span></span>

#### <a name="replication-of-transactional-data-in-preparation-for-disaster-recovery"></a><span data-ttu-id="d8b0e-319">Vész-helyreállítási előkészítésekor tranzakciós adatok replikálása</span><span class="sxs-lookup"><span data-stu-id="d8b0e-319">Replication of transactional data in preparation for disaster recovery</span></span>
<span data-ttu-id="d8b0e-320">Fontolja meg a tranzakciós adatok tárolásához Azure Storage-üzenetsorokat használó alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-320">Consider an application that uses Azure Storage queues to hold transactional data.</span></span> <span data-ttu-id="d8b0e-321">Ez lehetővé teszi a feldolgozói szerepkörök a kiszolgáló adatbázisába leválasztott architektúra a tranzakciós adatok feldolgozásához.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-321">This allows worker roles to process the transactional data to the server database in a decoupled architecture.</span></span> <span data-ttu-id="d8b0e-322">Ehhez a tranzakciókat valamilyen ideiglenes gyorsítótárazást, ha az előtér-szerepkörök van szükség a közvetlen lekérdezés adatok.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-322">This requires the transactions to use some form of temporary caching if the front-end roles require the immediate query of that data.</span></span> <span data-ttu-id="d8b0e-323">Adatvesztés tűréshatára szintjétől függően választhatja, az üzenetsorok, a database vagy az összes tárolási erőforrást replikálni.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-323">Depending on the level of data-loss tolerance, you might choose to replicate the queues, the database, or all of the storage resources.</span></span> <span data-ttu-id="d8b0e-324">Csak adatbázis-replikáció, az az elsődleges régió leáll, ha továbbra is helyreállíthatja az adatokat a várólisták, ha az elsődleges régió fog érkezni.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-324">With only database replication, if the primary region goes down, you can still recover the data in the queues when the primary region comes back.</span></span>

<span data-ttu-id="d8b0e-325">Az alábbi ábrán látható az architektúra, ahol a kiszolgáló adatbázis-régiók között szinkronizálva.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-325">The following diagram shows an architecture where the server database is synchronized across regions.</span></span>

![Vész-helyreállítási előkészítésekor tranzakciós adatok replikálása](./images/disaster-recovery-azure-applications/replicate-transactional-data-in-preparation-for-disaster-recovery.png)

<span data-ttu-id="d8b0e-327">A legnagyobb kihívás, ez az architektúra implementálása a régiók közötti replikációs stratégiát.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-327">The biggest challenge to implementing this architecture is the replication strategy between regions.</span></span> <span data-ttu-id="d8b0e-328">A [Azure SQL Data Sync](/azure/sql-database/sql-database-get-started-sql-data-sync/) szolgáltatás lehetővé teszi az ilyen típusú replikáció.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-328">The [Azure SQL Data Sync](/azure/sql-database/sql-database-get-started-sql-data-sync/) service enables this type of replication.</span></span> <span data-ttu-id="d8b0e-329">A jelen cikk írásakor, a szolgáltatás előzetes verzióban érhető el, és még nem javasolt éles környezetben.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-329">As of this writing, the service is in preview and is not yet recommended for production environments.</span></span> <span data-ttu-id="d8b0e-330">További információkért lásd: [áttekintése: a felhő üzleti folytonossági és adatbázis katasztrófa utáni helyreállítás az SQL Database](/azure/sql-database/sql-database-business-continuity/).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-330">For more information, see [Overview: Cloud business continuity and database disaster recovery with SQL Database](/azure/sql-database/sql-database-business-continuity/).</span></span> <span data-ttu-id="d8b0e-331">Az éles környezetben egy külső megoldás beruházni vagy a saját replikációs logika létrehozása a code-ban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-331">For production applications, you must invest in a third-party solution or create your own replication logic in code.</span></span> <span data-ttu-id="d8b0e-332">Függően az architektúra a replikáció lehet kétirányú, amely összetettebb.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-332">Depending on the architecture, the replication might be bidirectional, which is more complex.</span></span>

<span data-ttu-id="d8b0e-333">Egy lehetséges megvalósítása processzorkihasználtsága használja, az előző példában a köztes várólista.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-333">One potential implementation might make use of the intermediate queue in the previous example.</span></span> <span data-ttu-id="d8b0e-334">A feldolgozói szerepkör, amely feldolgozza az adatokat a végső célhelyet, előfordulhat, hogy a módosításnak az elsődleges régióban, mind a másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-334">The worker role that processes the data to the final storage destination might make the change in both the primary region and the secondary region.</span></span> <span data-ttu-id="d8b0e-335">Ezek nem triviális feladat, és teljes körű útmutatást replikációs kód van ez a cikk nem foglalkozik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-335">These are not trivial tasks, and complete guidance for replication code is beyond the scope of this article.</span></span> <span data-ttu-id="d8b0e-336">Jelentős mennyiségű időt és a tesztelés módszere a másodlagos régióba replikálja az adatokat az befektetni.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-336">Invest significant time and testing into the approach for replicating data to the secondary region.</span></span> <span data-ttu-id="d8b0e-337">További feldolgozás és tesztelési segítségével, győződjön meg arról, hogy a feladatátvételi és helyreállítási folyamatok megfelelően kezelni minden lehetséges adatinkonzisztencia vagy ismétlődő tranzakciók.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-337">Additional processing and testing can help ensure that the failover and recovery processes correctly handle any possible data inconsistencies or duplicate transactions.</span></span>

> [!NOTE]
> <span data-ttu-id="d8b0e-338">Ez a tanulmány a legtöbb összpontosít platform (PaaS) szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-338">Most of this paper focuses on platform as a service (PaaS).</span></span> <span data-ttu-id="d8b0e-339">Hibrid alkalmazások további replikáció és a rendelkezésre állási lehetőségek azonban az Azure Virtual Machines használatához.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-339">However, additional replication and availability options for hybrid applications use Azure Virtual Machines.</span></span> <span data-ttu-id="d8b0e-340">Ezek a hibrid alkalmazások szolgáltatás (IaaS) infrastruktúra használatával futtatni az SQL Server az Azure-beli virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-340">These hybrid applications use infrastructure as a service (IaaS) to host SQL Server on virtual machines in Azure.</span></span> <span data-ttu-id="d8b0e-341">Ez lehetővé teszi a hagyományos rendelkezésre állási megközelítések az SQL Server AlwaysOn rendelkezésre állási csoportok vagy Naplóküldést például.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-341">This allows traditional availability approaches in SQL Server, such as AlwaysOn Availability Groups or Log Shipping.</span></span> <span data-ttu-id="d8b0e-342">Egyes technikák, például az AlwaysOn, csak a helyszíni SQL Server-példányokat és az Azure-beli virtuális gépek között működik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-342">Some techniques, such as AlwaysOn, work only between on-premises SQL Server instances and Azure virtual machines.</span></span> <span data-ttu-id="d8b0e-343">További információkért lásd: [az SQL Server Azure virtuális gépek magas rendelkezésre állás és vészhelyreállítás helyreállítási](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-343">For more information, see [High availability and disaster recovery for SQL Server in Azure Virtual Machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>
> 
> 

#### <a name="reduced-application-functionality-for-transaction-capture"></a><span data-ttu-id="d8b0e-344">A tranzakció rögzítéshez csökkentett az alkalmazás funkciói</span><span class="sxs-lookup"><span data-stu-id="d8b0e-344">Reduced application functionality for transaction capture</span></span>
<span data-ttu-id="d8b0e-345">Fontolja meg egy második architektúrájának, korlátozott funkciókkal működik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-345">Consider a second architecture that operates with reduced functionality.</span></span> <span data-ttu-id="d8b0e-346">Az alkalmazás a másodlagos régió a funkciókat, például a jelentésben, üzleti intelligenciára épülő (BI), vagy várólisták a kiürítés inaktiválja.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-346">The application in the secondary region deactivates all the functionality, such as reporting, business intelligence (BI), or draining queues.</span></span> <span data-ttu-id="d8b0e-347">Tranzakciós munkafolyamatok, kizárólag a legfontosabb típusú fogad a üzleti igények szerint.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-347">It accepts only the most important types of transactional workflows, as defined by business requirements.</span></span> <span data-ttu-id="d8b0e-348">A rendszer rögzíti a tranzakciókat, és a várólisták írja őket.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-348">The system captures the transactions and writes them to queues.</span></span> <span data-ttu-id="d8b0e-349">A rendszer előfordulhat, hogy halassza el az adatok feldolgozása során a szolgáltatás megszűnésének kezdeti szakaszában.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-349">The system might postpone processing the data during the initial stage of the service disruption.</span></span> <span data-ttu-id="d8b0e-350">Ha az elsődleges régió, a rendszer újraaktiválja a várt időtartományon belül, a feldolgozói szerepkörök az elsődleges régióban a várólistákat is kiürítési.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-350">If the system on the primary region is reactivated within the expected time window, the worker roles in the primary region can drain the queues.</span></span> <span data-ttu-id="d8b0e-351">Ez a folyamat nem kell az adatbázis egyesítését.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-351">This process eliminates the need for database merging.</span></span> <span data-ttu-id="d8b0e-352">Ha az elsődleges régió szolgáltatáskimaradás megkezdte a megengedhető ablakot, az alkalmazás megkezdheti az üzenetsorok feldolgozását.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-352">If the primary region service disruption goes beyond the tolerable window, the application can start processing the queues.</span></span>

<span data-ttu-id="d8b0e-353">Ebben a forgatókönyvben az adatbázist a másodlagos régióban kell egyesíteni, miután az elsődleges újraaktiválnak növekményes tranzakciós adatokat tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-353">In this scenario, the database in the secondary region contains incremental transactional data that must be merged after the primary is reactivated.</span></span> <span data-ttu-id="d8b0e-354">Az alábbi ábrán látható, ezt a stratégiát ideiglenesen tárolja a tranzakciós adatok, az elsődleges régió visszaállításáig.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-354">The following diagram shows this strategy for temporarily storing transactional data until the primary region is restored.</span></span>

![A tranzakció rögzítéshez csökkentett az alkalmazás funkciói](./images/disaster-recovery-azure-applications/reduced-application-functionality-for-transaction-capture.png)

<span data-ttu-id="d8b0e-356">Adatok felügyeleti módszerek rugalmas Azure-alkalmazások további ismertetéséhez lásd: [Failsafe: Útmutató a rugalmas Felhőbeli architektúrákat](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-356">For more discussion of data management techniques for resilient Azure applications, see [Failsafe: Guidance for Resilient Cloud Architectures](https://channel9.msdn.com/Series/FailSafe).</span></span>

## <a name="deployment-topologies-for-disaster-recovery"></a><span data-ttu-id="d8b0e-357">Vész-helyreállítási üzembe helyezési topológiák</span><span class="sxs-lookup"><span data-stu-id="d8b0e-357">Deployment topologies for disaster recovery</span></span>
<span data-ttu-id="d8b0e-358">Régióra kiterjedő szolgáltatáskimaradás kritikus fontosságú alkalmazások elő kell készítenie.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-358">You must prepare mission-critical applications to handle region-wide service disruptions.</span></span> <span data-ttu-id="d8b0e-359">Egy több-a régióban üzembe helyezési stratégiához funkcióját beépítse az üzemeltetés megtervezése.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-359">Incorporate a multiple-region deployment strategy into the operational planning.</span></span>

<span data-ttu-id="d8b0e-360">Több-a régióban üzemelő példányok is járhat, IT-folyamatok az alkalmazás- és referencia adatok közzététele a másodlagos régióba egy vészhelyzetet követően.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-360">Multiple-region deployments might involve IT processes to publish the application and reference data to the secondary region after a disaster.</span></span> <span data-ttu-id="d8b0e-361">Ha az alkalmazás azonnali feladatátvételt, az üzembe helyezési folyamat egy aktív/passzív beállítás vagy egy aktív/aktív beállítást is járhat.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-361">If the application requires instant failover, the deployment process might involve an active/passive setup or an active/active setup.</span></span> <span data-ttu-id="d8b0e-362">A központi telepítési típus az alkalmazás a másodlagos régióban futó meglévő példánnyal rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-362">This type of deployment has existing instances of the application running in the alternate region.</span></span> <span data-ttu-id="d8b0e-363">Például az Azure Traffic Manager útválasztási szolgáltatás a DNS szintjén terheléselosztási szolgáltatásokat biztosít.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-363">A routing service such as Azure Traffic Manager provides load-balancing services at the DNS level.</span></span> <span data-ttu-id="d8b0e-364">Képes észlelni a szolgáltatáskimaradásokat és irányíthatja a különböző régiókban, szükség esetén a felhasználókat.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-364">It can detect service disruptions and route the users to different regions when needed.</span></span>

<span data-ttu-id="d8b0e-365">Egy sikeres Azure-beli vészhelyreállításához tartalmazza, hogy a helyreállítási beépítése a kezdetektől a megoldást.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-365">A successful Azure disaster recovery includes building that recovery into the solution from the start.</span></span> <span data-ttu-id="d8b0e-366">A felhőbe történő helyreállítás során fellépő hibák katasztrófa, amelyek nem érhetők el a hagyományos szolgáltató további lehetőséget biztosít.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-366">The cloud provides additional options for recovering from failures during a disaster that are not available in a traditional hosting provider.</span></span> <span data-ttu-id="d8b0e-367">Pontosabban gyorsan és dinamikusan foglalhat egy másik régióban lévő erőforrások kerülje a hiba előtt üresjárati erőforrások költségét.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-367">Specifically, you can dynamically and quickly allocate resources in a different region, avoiding the cost of idle resources prior to a failure.</span></span>

<span data-ttu-id="d8b0e-368">A következő szakaszok különböző üzemi topológiák vész-helyreállítási terjed ki.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-368">The following sections cover different deployment topologies for disaster recovery.</span></span> <span data-ttu-id="d8b0e-369">Általában nincs egy vonatkozóan kompromisszumot jelent a nagyobb költségek vagy további rendelkezésre állási összetettsége.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-369">Typically, there's a tradeoff in increased cost or complexity for additional availability.</span></span>

### <a name="single-region-deployment"></a><span data-ttu-id="d8b0e-370">Egyetlen régióban üzembe helyezés</span><span class="sxs-lookup"><span data-stu-id="d8b0e-370">Single-region deployment</span></span>
<span data-ttu-id="d8b0e-371">Egy egyetlen régióban üzembe helyezési valójában nem egy vész-helyreállítási topológia, de a célja, hogy a többi architektúrák kontrasztját.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-371">A single-region deployment is not really a disaster recovery topology, but is meant to contrast with the other architectures.</span></span> <span data-ttu-id="d8b0e-372">Egyetlen régióban üzemelő példányok gyakoriak alkalmazásokhoz az Azure-ban; azonban azok nem felelnek meg egy vész-helyreállítási topológia követelményeinek.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-372">Single-region deployments are common for applications in Azure; however, they do not meet the requirements of a disaster recovery topology.</span></span>

<span data-ttu-id="d8b0e-373">Az alábbi ábra bemutatja egy Azure-régióban futó alkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-373">The following diagram depicts an application running in a single Azure region.</span></span> <span data-ttu-id="d8b0e-374">Az Azure Traffic Manager és a tartalék és frissítési tartományokba alkalmazását a régión belül az alkalmazás rendelkezésre állásának növeléséhez.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-374">Azure Traffic Manager and the use of fault and upgrade domains increase availability of the application within the region.</span></span>

![Egyetlen régióban üzembe helyezés](./images/disaster-recovery-azure-applications/single-region-deployment.png)

<span data-ttu-id="d8b0e-376">Ebben a forgatókönyvben az adatbázis egy meghibásodási pont.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-376">In this scenario, the database is a single point of failure.</span></span> <span data-ttu-id="d8b0e-377">Bár az Azure belső replikákra különböző tartalék tartomány között replikálja az adatokat, a replikáció csak az ugyanazon a régión belül.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-377">Though Azure replicates the data across different fault domains to internal replicas, this replication occurs only within the same region.</span></span> <span data-ttu-id="d8b0e-378">Az alkalmazás elviselni nem végzetes hiba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-378">The application cannot withstand a catastrophic failure.</span></span> <span data-ttu-id="d8b0e-379">Ha a régió elérhetetlenné válik, így hajtsa végre a tartalék tartományok, beleértve a szolgáltatás példányai és a tárolási erőforrások.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-379">If the region becomes unavailable, then so do the fault domains, including all service instances and storage resources.</span></span>

<span data-ttu-id="d8b0e-380">Az összes, de legalább fontos alkalmazásait megtervezi a csomag az alkalmazások üzembe helyezése több régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-380">For all but the least critical applications, you must devise a plan to deploy your applications across multiple regions.</span></span> <span data-ttu-id="d8b0e-381">Emellett érdemes lehet az RTO és korlátozásokat, figyelembe véve, melyik üzemi topológia használandó költség.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-381">You should also consider RTO and cost constraints in considering which deployment topology to use.</span></span>

<span data-ttu-id="d8b0e-382">Vessünk most vonatkozhatnak egyedi megközelítésekre tekintse meg a feladatátvétel támogatása a különböző régiók között.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-382">Let's take a look now at specific approaches to supporting failover across different regions.</span></span> <span data-ttu-id="d8b0e-383">Ezekben a példákban az összes folyamatát írják le, két régiót használnak.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-383">These examples all use two regions to describe the process.</span></span>

### <a name="failover-using-azure-site-recovery"></a><span data-ttu-id="d8b0e-384">Feladatátvétel az Azure Site Recovery használatával</span><span class="sxs-lookup"><span data-stu-id="d8b0e-384">Failover using Azure Site Recovery</span></span>

<span data-ttu-id="d8b0e-385">Ha engedélyezi az Azure Site Recovery használatával az Azure virtuális gép replikációja, a másodlagos régióban létrehoz több erőforrás:</span><span class="sxs-lookup"><span data-stu-id="d8b0e-385">When you enable Azure VM replication using Azure Site Recovery, it creates several resources in the secondary region:</span></span>

- <span data-ttu-id="d8b0e-386">Erőforráscsoport.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-386">Resource group.</span></span>
- <span data-ttu-id="d8b0e-387">Virtuális hálózat (VNet).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-387">Virtual network (VNet).</span></span>
- <span data-ttu-id="d8b0e-388">Storage-fiók.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-388">Storage account.</span></span> 
- <span data-ttu-id="d8b0e-389">Rendelkezésre állási csoportok, amely tárolja a virtuális gépek a feladatátvételt követően.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-389">Availability sets to hold VMs after failover.</span></span>

<span data-ttu-id="d8b0e-390">A Virtuálisgép-lemezek az elsődleges régióban lévő adatírásokat folyamatosan átkerülnek a másodlagos régióban lévő tárfiókhoz.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-390">Data writes on the VM disks in the primary region are continuously transferred to the storage account in the secondary region.</span></span> <span data-ttu-id="d8b0e-391">Helyreállítási pontok létrejönnek a célként megadott tárfiók néhány perces időközönként.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-391">Recovery points are generated in the target storage account every few minutes.</span></span> <span data-ttu-id="d8b0e-392">Kezdeményezzen feladatátvételt, ha a cél erőforrás csoport, a virtuális hálózat és a rendelkezésre állási a helyreállított virtuális gépek jönnek létre.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-392">When you initiate a failover, the recovered VMs are created in the target resource group, VNet, and availability set.</span></span> <span data-ttu-id="d8b0e-393">A feladatátvétel során a bármelyik elérhető helyreállítási pontot kiválaszthatja.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-393">During a failover, you can choose any available recovery point.</span></span>


### <a name="redeployment-to-a-secondary-azure-region"></a><span data-ttu-id="d8b0e-394">Újbóli üzembe helyezése egy másodlagos Azure-régióba</span><span class="sxs-lookup"><span data-stu-id="d8b0e-394">Redeployment to a secondary Azure region</span></span>
<span data-ttu-id="d8b0e-395">Újbóli üzembe helyezése egy másodlagos régióba megközelítés csak az elsődleges régió alkalmazásokat és adatbázisokat futtató rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-395">For the approach of redeployment to a secondary region, only the primary region has applications and databases running.</span></span> <span data-ttu-id="d8b0e-396">A másodlagos régióba nincs beállítva az automatikus feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-396">The secondary region is not set up for an automatic failover.</span></span> <span data-ttu-id="d8b0e-397">Így katasztrófa történik, ha meg kell üzembe helyezése a szolgáltatás az új régióban minden része.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-397">So when a disaster occurs, you must spin up all the parts of the service in the new region.</span></span> <span data-ttu-id="d8b0e-398">Ez magában foglalja egy felhőalapú szolgáltatás feltöltése az Azure-ba, a felhőalapú szolgáltatás telepítéséhez, az adatok visszaállítása és DNS-kiszolgálót úgy, hogy a forgalom átirányítása módosítása.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-398">This includes uploading a cloud service to Azure, deploying the cloud service, restoring the data, and changing DNS to reroute the traffic.</span></span>

<span data-ttu-id="d8b0e-399">Bár ez a több-régió közül a legtöbb megfizethető, a legrosszabb RTO-jellemzőkkel rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-399">Although this is the most affordable of the multiple-region options, it has the worst RTO characteristics.</span></span> <span data-ttu-id="d8b0e-400">Ebben a modellben a szolgáltatási csomag és az adatbázis biztonsági másolatai a helyszínen vagy a másodlagos régióba az Azure Blob storage-példány.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-400">In this model, the service package and database backups are stored either on-premises or in the Azure Blob storage instance of the secondary region.</span></span> <span data-ttu-id="d8b0e-401">Azonban kell egy új szolgáltatás üzembe helyezése, és állítsa vissza az adatokat, mielőtt folytatja a műveletet.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-401">However, you must deploy a new service and restore the data before it resumes operation.</span></span> <span data-ttu-id="d8b0e-402">Még a biztonsági mentési tárolóból az adatok átvitele teljes körű automatizálását egy új adatbázis-környezet kiépítése sok időt használ fel.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-402">Even with full automation of the data transfer from backup storage, provisioning a new database environment consumes a lot of time.</span></span> <span data-ttu-id="d8b0e-403">Adatok áthelyezése a biztonsági mentési disk storage-ból az üres adatbázist a másodlagos régióban része a legköltségesebb a visszaállítási folyamat.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-403">Moving data from the backup disk storage to the empty database on the secondary region is the most expensive part of the restore process.</span></span> <span data-ttu-id="d8b0e-404">Akkor kell megtennie, ez azonban ahhoz, hogy az új adatbázis a egy működési állapotot, mert azt nem replikálja.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-404">You must do this, however, to bring the new database to an operational state because it isn't replicated.</span></span>

<span data-ttu-id="d8b0e-405">A legjobb módja, hogy a szolgáltatási csomagok tárolására a Blob storage-ban a másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-405">The best approach is to store the service packages in Blob storage in the secondary region.</span></span> <span data-ttu-id="d8b0e-406">Ez így nem kell a az Azure-ba, mi történik, ha telepít egy helyi fejlesztői gépen, amely a csomag feltöltése.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-406">This eliminates the need to upload the package to Azure, which is what happens when you deploy from an on-premises development machine.</span></span> <span data-ttu-id="d8b0e-407">Gyorsan telepíteni a szolgáltatást egy új felhőszolgáltatást a Blob storage-ból PowerShell-parancsfájlok használatával.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-407">You can quickly deploy the service packages to a new cloud service from Blob storage by using PowerShell scripts.</span></span>

<span data-ttu-id="d8b0e-408">Ez a beállítás akkor gyakorlati csak egy nagy RTO tűri nem kritikus fontosságú alkalmazások esetében.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-408">This option is practical only for non-critical applications that can tolerate a high RTO.</span></span> <span data-ttu-id="d8b0e-409">Például ez esetében is működik egy alkalmazást, amely lehet néhány órán keresztül van szükség, 24 órában elérhető legyen.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-409">For instance, this might work for an application that can be down for several hours but is required to be available within 24 hours.</span></span>

![Újbóli üzembe helyezése egy másodlagos Azure-régióba](./images/disaster-recovery-azure-applications/redeploy-to-a-secondary-azure-region.png)

### <a name="active-passive"></a><span data-ttu-id="d8b0e-411">Aktív-passzív</span><span class="sxs-lookup"><span data-stu-id="d8b0e-411">Active-passive</span></span>
<span data-ttu-id="d8b0e-412">Egy aktív-passzív topológia a kiválasztott számos vállalat alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-412">An active-passive topology is the choice that many companies favor.</span></span> <span data-ttu-id="d8b0e-413">Ez a topológia a költségek viszonylag kis növekedése az RTO fejlesztései az újbóli üzembe helyezés megközelítés keresztül biztosít.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-413">This topology provides improvements to the RTO with a relatively small increase in cost over the redeployment approach.</span></span> <span data-ttu-id="d8b0e-414">Ebben a forgatókönyvben nincs újra egy elsődleges és a egy másodlagos Azure-régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-414">In this scenario, there is again a primary and a secondary Azure region.</span></span> <span data-ttu-id="d8b0e-415">Összes forgalmat kerül az aktív központi telepítés az elsődleges régiótól.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-415">All of the traffic goes to the active deployment on the primary region.</span></span> <span data-ttu-id="d8b0e-416">A másodlagos régióba jobban előkészített vész-helyreállítási, mert az adatbázis működik-e a mindkét régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-416">The secondary region is better prepared for disaster recovery because the database is running on both regions.</span></span> <span data-ttu-id="d8b0e-417">Emellett a szinkronizálási mechanizmus van közöttük.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-417">Additionally, a synchronization mechanism is in place between them.</span></span> <span data-ttu-id="d8b0e-418">Ez a megközelítés készenléti is magában foglalhat két változata létezik: egy adatbázis csak megközelítés vagy a teljes üzembe helyezés a másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-418">This standby approach can involve two variations: a database-only approach or a complete deployment in the secondary region.</span></span>

#### <a name="database-only"></a><span data-ttu-id="d8b0e-419">Csak adatbázis</span><span class="sxs-lookup"><span data-stu-id="d8b0e-419">Database only</span></span>
<span data-ttu-id="d8b0e-420">Az első változat az aktív-passzív topológia csak az elsődleges régióban van, egy üzembe helyezett cloud service-alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-420">In the first variation of the active-passive topology, only the primary region has a deployed cloud service application.</span></span> <span data-ttu-id="d8b0e-421">Azonban eltérően az újbóli üzembe helyezés módszer mindkét régióban szinkronizálva legyenek az adatbázis tartalmát.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-421">However, unlike the redeployment approach, both regions are synchronized with the contents of the database.</span></span> <span data-ttu-id="d8b0e-422">(További információkért lásd a szakasz [tranzakciós adatok minta vész-helyreállítási](#transactional-data-pattern-for-disaster-recovery).) Katasztrófa történik, ha nincsenek kevesebb kapcsolatos aktiválási követelményekre vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-422">(For more information, see the section on [transactional data pattern for disaster recovery](#transactional-data-pattern-for-disaster-recovery).) When a disaster occurs, there are fewer activation requirements.</span></span> <span data-ttu-id="d8b0e-423">Az alkalmazás elindítása a másodlagos régióban, módosítsa az új adatbázis kapcsolati karakterláncok, és módosítsa a DNS-bejegyzéseket, hogy átirányítsa a forgalom.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-423">You start the application in the secondary region, change connection strings to the new database, and change the DNS entries to reroute traffic.</span></span>

<span data-ttu-id="d8b0e-424">Az újbóli üzembe helyezés a módszert használja, mint kell már tárolt a szolgáltatáscsomagok az Azure Blob storage a másodlagos régió gyorsabb üzembe helyezéshez.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-424">Like the redeployment approach, you should have already stored the service packages in Azure Blob storage in the secondary region for faster deployment.</span></span> <span data-ttu-id="d8b0e-425">Azonban nem függő díj a legtöbb, a terhet a szükséges adatbázis-visszaállítási művelet, mert az adatbázis készen áll, és fut.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-425">However, you don’t incur the majority of the overhead that database restore operation requires, because the database is ready and running.</span></span> <span data-ttu-id="d8b0e-426">Ez menti a jelentős mennyiségű időt, ami egy kedvező díjszabású DR-mintát (és az egyik leggyakrabban használt).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-426">This saves a significant amount of time, making this an affordable DR pattern (and the one most frequently used).</span></span>

![Csak az aktív-passzív adatbázis](./images/disaster-recovery-azure-applications/active-passive-database-only.png)

#### <a name="full-replica"></a><span data-ttu-id="d8b0e-428">Teljes replika</span><span class="sxs-lookup"><span data-stu-id="d8b0e-428">Full replica</span></span>
<span data-ttu-id="d8b0e-429">A második változat az aktív-passzív topológia mind az elsődleges régióban, és a másodlagos régióba rendelkezik teljes körű telepítésére.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-429">In the second variation of the active-passive topology, both the primary region and the secondary region have a full deployment.</span></span> <span data-ttu-id="d8b0e-430">A központi telepítés magában foglalja a cloud services és a egy szinkronizált adatbázis.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-430">This deployment includes the cloud services and a synchronized database.</span></span> <span data-ttu-id="d8b0e-431">Azonban csak az elsődleges régió aktívan kezeli a felhasználók a hálózati kérelmek.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-431">However, only the primary region is actively handling network requests from the users.</span></span> <span data-ttu-id="d8b0e-432">A másodlagos régióhoz csak amikor az elsődleges régióban egy szolgáltatáskimaradás aktívvá válik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-432">The secondary region becomes active only when the primary region experiences a service disruption.</span></span> <span data-ttu-id="d8b0e-433">Ebben az esetben minden új hálózati kérés átirányítása a másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-433">In that case, all new network requests route to the secondary region.</span></span> <span data-ttu-id="d8b0e-434">Az Azure Traffic Manager automatikusan kezelheti a feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-434">Azure Traffic Manager can manage this failover automatically.</span></span>

<span data-ttu-id="d8b0e-435">Feladatátvétel gyorsabb, mint az adatbázis csak változat történik, mert a szolgáltatás már telepítve van.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-435">Failover occurs faster than the database-only variation because the services are already deployed.</span></span> <span data-ttu-id="d8b0e-436">Ez a topológia egy nagyon alacsony RTO biztosít.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-436">This topology provides a very low RTO.</span></span> <span data-ttu-id="d8b0e-437">A másodlagos feladatátvételi régióban, az elsődleges régióban hiba után azonnal fel kell lennie.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-437">The secondary failover region must be ready to go immediately after failure of the primary region.</span></span>

<span data-ttu-id="d8b0e-438">Gyorsabb válaszidő, valamint az ehhez a topológiához előre kiosztja, és üzembe helyezi a biztonsági mentési szolgáltatásai, elkerülve a kevés helyet foglal le új példányokat egy katasztrófa során a lehetőségét.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-438">Along with a quicker response time, this topology pre-allocates and deploys backup services, avoiding the possibility of a lack of space to allocate new instances during a disaster.</span></span> <span data-ttu-id="d8b0e-439">Ez azért fontos, ha a másodlagos Azure-régióba közelít kapacitásának határához.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-439">This is important if your secondary Azure region is nearing capacity.</span></span> <span data-ttu-id="d8b0e-440">Nincs szolgáltatásszint-szerződés (SLA) garantálja, hogy azonnal telepíthet egy vagy több új felhőalapú szolgáltatások bármelyik régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-440">No service-level agreement (SLA) guarantees that you can instantly deploy one or more new cloud services in any region.</span></span>

<span data-ttu-id="d8b0e-441">A leggyorsabb válaszidejű ebben a modellben az elsődleges és másodlagos régióban hasonló méretezési (a szerepkörpéldányok számát) kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-441">For the fastest response time with this model, you must have similar scale (number of role instances) in the primary and secondary regions.</span></span> <span data-ttu-id="d8b0e-442">Annak ellenére, hogy az előnnyel jár és a fel nem használt számítási példányok költséges, és ez nem feltétlenül a legtöbb körültekintő pénzügyi választás.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-442">Despite the advantages, paying for unused compute instances is costly, and this might not be the most prudent financial choice.</span></span> <span data-ttu-id="d8b0e-443">Ez az oka jelenleg egyre gyakoribb, és a cloud services egy némileg horizontálisan le verzióját használja a másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-443">Because of this, it's more common to use a slightly scaled-down version of cloud services on the secondary region.</span></span> <span data-ttu-id="d8b0e-444">Majd gyorsan átadja a feladatokat és a másodlagos üzembe helyezés horizontális, ha szükséges.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-444">Then you can quickly fail over and scale out the secondary deployment if necessary.</span></span> <span data-ttu-id="d8b0e-445">A feladatátvételi folyamat kell automatizálni, így miután az elsődleges régióban nem érhető el, további példányokat, terhelésétől függően aktiválása.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-445">You should automate the failover process so that after the primary region is inaccessible, you activate additional instances, depending on the load.</span></span> <span data-ttu-id="d8b0e-446">Ez is járhat, például egy automatikus skálázási mechanizmus használata [a virtual machine scale sets](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-446">This might involve the use of an autoscaling mechanism like [virtual machine scale sets](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span></span>

<span data-ttu-id="d8b0e-447">Az alábbi ábrán látható, ha az elsődleges és másodlagos régiók tartalmaz-e egy teljes mértékben üzembe helyezett felhőalapú szolgáltatás egy aktív-passzív topológiában a modellt.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-447">The following diagram shows the model where the primary and secondary regions contain a fully deployed cloud service in an active-passive topology.</span></span>

![Aktív-passzív, a teljes replika](./images/disaster-recovery-azure-applications/active-passive-full-replica.png)

### <a name="active-active"></a><span data-ttu-id="d8b0e-449">Aktív-aktív</span><span class="sxs-lookup"><span data-stu-id="d8b0e-449">Active-active</span></span>
<span data-ttu-id="d8b0e-450">Egy aktív-aktív topológia a cloud services és az adatbázis teljes mértékben telepítve mindkét régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-450">In an active-active topology, the cloud services and database are fully deployed in both regions.</span></span> <span data-ttu-id="d8b0e-451">Ellentétben az aktív-passzív modell mindkét régióban a felhasználói forgalom fogadására.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-451">Unlike the active-passive model, both regions receive user traffic.</span></span> <span data-ttu-id="d8b0e-452">Ez a beállítás a leggyorsabb helyreállítási idő alapján.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-452">This option yields the quickest recovery time.</span></span> <span data-ttu-id="d8b0e-453">A szolgáltatások már vannak méretezve, hogy kezelni a terhelés mellett minden egyes régió egy részét.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-453">The services are already scaled to handle a portion of the load at each region.</span></span> <span data-ttu-id="d8b0e-454">DNS használata a másodlagos régió már engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-454">DNS is already enabled to use the secondary region.</span></span> <span data-ttu-id="d8b0e-455">Nincs további összetettséget irányíthatja a felhasználókat a megfelelő régiót módjának meghatározása.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-455">There's additional complexity in determining how to route users to the appropriate region.</span></span> <span data-ttu-id="d8b0e-456">Ciklikus időszeleteléses ütemezés lehetséges.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-456">Round-robin scheduling might be possible.</span></span> <span data-ttu-id="d8b0e-457">Több valószínű, hogy bizonyos felhasználók használna egy adott régióban, ahol az elsődleges verziót adataik található.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-457">It's more likely that certain users would use a specific region where the primary copy of their data resides.</span></span>

<span data-ttu-id="d8b0e-458">A feladatátvétel esetén egyszerűen letilthatja DNS az elsődleges régióba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-458">In case of failover, simply disable DNS to the primary region.</span></span> <span data-ttu-id="d8b0e-459">Ez minden forgalmat a másodlagos régió felé irányítja.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-459">This routes all traffic to the secondary region.</span></span>

<span data-ttu-id="d8b0e-460">Ez a modell még akkor is, vannak bizonyos eltérések.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-460">Even in this model, there are some variations.</span></span> <span data-ttu-id="d8b0e-461">Ha például a következő ábra szemlélteti egy elsődleges régióban, a fő másolatot készít az adatbázisról tulajdonosa.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-461">For example, the following diagram depicts a primary region which owns the master copy of the database.</span></span> <span data-ttu-id="d8b0e-462">A cloud services mindkét régióban írni az elsődleges adatbázis.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-462">The cloud services in both regions write to that primary database.</span></span> <span data-ttu-id="d8b0e-463">A másodlagos telepítési olvashatja az elsődleges vagy a replikált adatbázisból.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-463">The secondary deployment can read from the primary or replicated database.</span></span> <span data-ttu-id="d8b0e-464">Ebben a példában a replikációt még csak egyirányú.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-464">Replication in this example is one-way.</span></span>

![Aktív-aktív](./images/disaster-recovery-azure-applications/active-active.png)

<span data-ttu-id="d8b0e-466">Egy, a fenti ábrán az aktív-aktív architektúra hátránya van.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-466">There is a downside to the active-active architecture in the preceding diagram.</span></span> <span data-ttu-id="d8b0e-467">A második régiót kell hozzáférni az adatbázis az első régióban, mert a fő példány ott található.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-467">The second region must access the database in the first region because the master copy resides there.</span></span> <span data-ttu-id="d8b0e-468">Teljesítmény jelentős mértékben csökken a régión kívül származó adatok elérésekor.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-468">Performance significantly drops off when you access data from outside a region.</span></span> <span data-ttu-id="d8b0e-469">A régiók közötti adatbázis-hívás érdemes valamilyen kötegelés stratégia hívások teljesítményének javítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-469">In cross-region database calls, you should consider some type of batching strategy to improve the performance of these calls.</span></span> <span data-ttu-id="d8b0e-470">További információkért lásd: [kötegelés használata SQL Database-alkalmazások teljesítményének javítása érdekében](/azure/sql-database/sql-database-use-batching-to-improve-performance/).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-470">For more information, see [How to use batching to improve SQL Database application performance](/azure/sql-database/sql-database-use-batching-to-improve-performance/).</span></span>

<span data-ttu-id="d8b0e-471">Egy alternatív architektúra is járhat, minden régióban, közvetlenül a saját adatbázis elérése közben.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-471">An alternative architecture might involve each region accessing its own database directly.</span></span> <span data-ttu-id="d8b0e-472">Az adott modell valamilyen típusú kétirányú replikációt az egyes régiókban az adatbázis szinkronizálásához szükséges.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-472">In that model, some type of bidirectional replication is required to synchronize the databases in each region.</span></span>

<span data-ttu-id="d8b0e-473">Az előző topológiákkal RTO általában csökkentésével növeli a költségeket és összetettséget.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-473">With the previous topologies, decreasing RTO generally increases costs and complexity.</span></span> <span data-ttu-id="d8b0e-474">Az aktív-aktív topológia eltér a költség minta.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-474">The active-active topology deviates from this cost pattern.</span></span> <span data-ttu-id="d8b0e-475">Az aktív-aktív topológia esetén nem szükséges annyi példányok az elsődleges régióban, mint az aktív-passzív topológiáját.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-475">In the active-active topology, you might not need as many instances on the primary region as you would in the active-passive topology.</span></span> <span data-ttu-id="d8b0e-476">Ha az elsődleges régióban egy aktív – passzív architektúra 10 példányra van, szüksége lehet a csak egy aktív-aktív az architektúrában minden régióban 5.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-476">If you have 10 instances on the primary region in an active-passive architecture, you might need only 5 in each region in an active-active architecture.</span></span> <span data-ttu-id="d8b0e-477">Mindkét régióban most már megoszthatja a terhelés.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-477">Both regions now share the load.</span></span> <span data-ttu-id="d8b0e-478">Ez lehet egy költséget takaríthat meg az aktív-passzív topológia keresztül Ha megtartja a meleg készenléti passzív régió, Várakozás a feladatátvételi 10 példányaival.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-478">This might be a cost savings over the active-passive topology if you keep a warm standby on the passive region with 10 instances waiting for failover.</span></span>

<span data-ttu-id="d8b0e-479">Vegye figyelembe, hogy visszaállítja az elsődleges régióban, amíg a másodlagos régióba kaphat az új felhasználók hirtelen megnő.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-479">Realize that until you restore the primary region, the secondary region might receive a sudden surge of new users.</span></span> <span data-ttu-id="d8b0e-480">Ha 10 000 felhasználó minden kiszolgálón amikor az elsődleges régióban egy szolgáltatáskimaradás lép fel, a másodlagos régióba hirtelen rendelkezik 20 000 felhasználóhoz kezelésére.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-480">If there are 10,000 users on each server when the primary region experiences a service disruption, the secondary region suddenly has to handle 20,000 users.</span></span> <span data-ttu-id="d8b0e-481">Figyelési szabályt, a másodlagos régióban észlelnie kell a növekvő és a dupla a példányok a másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-481">Monitoring rules on the secondary region must detect this increase and double the instances in the secondary region.</span></span> <span data-ttu-id="d8b0e-482">Ezzel kapcsolatban további információkért lásd a szakasz [hibaészlelés](#failure-detection).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-482">For more information on this, see the section on [failure detection](#failure-detection).</span></span>

## <a name="hybrid-on-premises-and-cloud-solution"></a><span data-ttu-id="d8b0e-483">A helyszíni és hibrid felhőalapú megoldással</span><span class="sxs-lookup"><span data-stu-id="d8b0e-483">Hybrid on-premises and cloud solution</span></span>
<span data-ttu-id="d8b0e-484">Egy további vész-helyreállítási stratégiát az, hogy tervezhet, amelyen a helyszíni hibrid alkalmazás és a felhőben.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-484">One additional strategy for disaster recovery is to architect a hybrid application that runs on-premises and in the cloud.</span></span> <span data-ttu-id="d8b0e-485">Az alkalmazástól függően az elsődleges régió lehet bármelyik helyet.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-485">Depending on the application, the primary region might be either location.</span></span> <span data-ttu-id="d8b0e-486">Fontolja meg az előző architektúrában, és az imagine egy helyszíni helyhez és az elsődleges vagy másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-486">Consider the previous architectures and imagine the primary or secondary region as an on-premises location.</span></span>

<span data-ttu-id="d8b0e-487">Nincsenek hibrid architektúrák áttekinthet néhány problémát.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-487">There are some challenges in these hybrid architectures.</span></span> <span data-ttu-id="d8b0e-488">Először is ez a cikk a legtöbb foglalkozott PaaS felhőarchitektúra-sémák.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-488">First, most of this article has addressed PaaS architecture patterns.</span></span> <span data-ttu-id="d8b0e-489">Tipikus PaaS-alkalmazások az Azure-ban az Azure-ra vonatkozó szerkezeteket, például a szerepköröket, a cloud services és a Traffic Manager támaszkodnak.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-489">Typical PaaS applications in Azure rely on Azure-specific constructs such as roles, cloud services, and Traffic Manager.</span></span> <span data-ttu-id="d8b0e-490">Az ilyen típusú PaaS-alkalmazást egy helyszíni megoldás létrehozása a jelentősen eltérő architektúra kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-490">Creating an on-premises solution for this type of PaaS application would require a significantly different architecture.</span></span> <span data-ttu-id="d8b0e-491">Ez nem feltétlenül megvalósítható, felügyeleti és költségek szempontjából.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-491">This might not be feasible from a management or cost perspective.</span></span>

<span data-ttu-id="d8b0e-492">Vész-helyreállítási hibrid megoldás azonban kevesebb kihívásokat a felhőbe, például az IaaS-alapú architektúrák áttelepített hagyományos architektúrák rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-492">However, a hybrid solution for disaster recovery has fewer challenges for traditional architectures that have been migrated to the cloud, such as IaaS-based architectures.</span></span> <span data-ttu-id="d8b0e-493">IaaS-alkalmazások használó virtuális gépek, amelyeken közvetlen helyszíni megfelelője a felhőben.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-493">IaaS applications use virtual machines in the cloud that can have direct on-premises equivalents.</span></span> <span data-ttu-id="d8b0e-494">Virtuális hálózatok használatával a helyszíni hálózati erőforrásokhoz való kapcsolódás a gépek a felhőben.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-494">You can also use virtual networks to connect machines in the cloud with on-premises network resources.</span></span> <span data-ttu-id="d8b0e-495">Ez lehetővé teszi a különböző lehetőségeket, amelyek nem lehetséges a PaaS-csak alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-495">This allows several possibilities that are not possible with PaaS-only applications.</span></span> <span data-ttu-id="d8b0e-496">Ha például az SQL Server kihasználhatja a vészhelyreállítási megoldások például az AlwaysOn rendelkezésre állási csoportok és az adatbázis-tükrözés.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-496">For example, SQL Server can take advantage of disaster recovery solutions such as AlwaysOn Availability Groups and database mirroring.</span></span> <span data-ttu-id="d8b0e-497">További információkért lásd: [magas rendelkezésre állás és vészhelyreállítás helyreállítási SQL Serverhez készült Azure-beli virtuális gépeken](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-497">For details, see [High availability and disaster recovery for SQL Server in Azure virtual machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>

<span data-ttu-id="d8b0e-498">IaaS-megoldások is biztosítanak egy egyszerűbb útvonalat a helyszíni alkalmazások számára az Azure-t a feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-498">IaaS solutions also provide an easier path for on-premises applications to use Azure as the failover option.</span></span> <span data-ttu-id="d8b0e-499">Egy teljesen működőképes alkalmazást előfordulhat, hogy rendelkezik egy meglévő helyi régióban.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-499">You might have a fully functioning application in an existing on-premises region.</span></span> <span data-ttu-id="d8b0e-500">Azonban mi történik, ha nem rendelkezik a szükséges erőforrásokat a feladatátvételhez egy földrajzilag elkülönült régióban karbantartása?</span><span class="sxs-lookup"><span data-stu-id="d8b0e-500">However, what if you lack the resources to maintain a geographically separate region for failover?</span></span> <span data-ttu-id="d8b0e-501">Dönthet, hogy a virtuális gépek és virtuális hálózatok használatával az Azure-ban futó alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-501">You might decide to use virtual machines and virtual networks to get your application running in Azure.</span></span> <span data-ttu-id="d8b0e-502">Ebben az esetben adja meg a folyamatokat, amelyek a felhőbeli adatok szinkronizálása.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-502">In that case, define processes that synchronize data to the cloud.</span></span> <span data-ttu-id="d8b0e-503">Az Azure üzemi válik a feladatátvétel végrehajtásához a másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-503">The Azure deployment then becomes the secondary region to use for failover.</span></span> <span data-ttu-id="d8b0e-504">Az elsődleges régió továbbra is a helyszíni alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-504">The primary region remains the on-premises application.</span></span> <span data-ttu-id="d8b0e-505">IaaS-architektúrát és funkciókkal kapcsolatos további információkért lásd: a [Virtual Machines dokumentációja](https://azure.microsoft.com/documentation/services/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-505">For more information about IaaS architectures and capabilities, see the [Virtual Machines documentation](https://azure.microsoft.com/documentation/services/virtual-machines/).</span></span>

## <a name="alternative-cloud"></a><span data-ttu-id="d8b0e-506">Alternatív felhőalapú</span><span class="sxs-lookup"><span data-stu-id="d8b0e-506">Alternative cloud</span></span>
<span data-ttu-id="d8b0e-507">Vannak helyzetek, ahol a Microsoft Azure széleskörű képességeit továbbra is lehetséges, hogy nem felel meg belső megfelelőségi szabályok vagy a szervezete által megkövetelt házirendeket.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-507">There are situations where the broad capabilities of Microsoft Azure still may not meet internal compliance rules or policies required by your organization.</span></span> <span data-ttu-id="d8b0e-508">Még a legjobb előkészítése és megtervezése és megvalósítása a biztonsági mentési rendszerek katasztrófa során nem megfelelőek a globális szolgáltatás megszakadását felhőszolgáltató során.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-508">Even the best preparation and design to implement backup systems during a disaster are inadequate during a global service disruption of a cloud service provider.</span></span>

<span data-ttu-id="d8b0e-509">Hasonlítsa a járó bonyodalmak és költségek megnövelt rendelkezésre állást a rendelkezésre állási követelmények vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-509">You should compare availability requirements with the cost and complexity of increased availability.</span></span> <span data-ttu-id="d8b0e-510">Egy kockázati elemzéseket végezhet, és az RTO és RPO definiálja a megoldáshoz.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-510">Perform a risk analysis, and define the RTO and RPO for your solution.</span></span> <span data-ttu-id="d8b0e-511">Ha az alkalmazás zavarják a leállás, akkor érdemes egy további felhőalapú megoldást használ.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-511">If your application cannot tolerate any downtime, you might consider using an additional cloud solution.</span></span> <span data-ttu-id="d8b0e-512">Az interneten leáll, ha egy másik felhőalapú megoldás továbbra is lehet érhető el, ha az Azure globálisan elérhetetlenné válik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-512">Unless the entire Internet goes down, another cloud solution might still be available if Azure becomes globally inaccessible.</span></span>

<span data-ttu-id="d8b0e-513">A hibrid forgatókönyv-feladatátvétel a központi telepítések a korábbi vész-helyreállítási architektúrák is egy másik felhőalapú megoldáson belül létezhet.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-513">As with the hybrid scenario, the failover deployments in the previous disaster recovery architectures can also exist within another cloud solution.</span></span> <span data-ttu-id="d8b0e-514">Alternatív felhőalapú Vészhelyreállítás helyek csak olyan megoldásokat, amelyek RTO lehetővé teszi, hogy a nagyon kicsi, ha van ilyen, állásidő kell használni.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-514">Alternative cloud DR sites should be used only for solutions whose RTO allows very little, if any, downtime.</span></span> <span data-ttu-id="d8b0e-515">Vegye figyelembe, hogy a megoldás által használt Azure-on kívülről DR-webhelyként szükséges-e a munka konfigurálása, fejlesztése, üzembe helyezése és karbantartása.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-515">Note that a solution that uses a DR site outside Azure will require more work to configure, develop, deploy, and maintain.</span></span> <span data-ttu-id="d8b0e-516">Emellett akkor is nehezebb a több felhőre kiterjedő architektúra bevált eljárásokat megvalósításához.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-516">It's also more difficult to implement proven practices in a cross-cloud architecture.</span></span> <span data-ttu-id="d8b0e-517">Bár a cloud platform hasonló fogalmait, az API-k és architektúrákat eltérőek.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-517">Although cloud platforms have similar high-level concepts, the APIs and architectures are different.</span></span>

<span data-ttu-id="d8b0e-518">A Vészhelyreállítás stratégiájának megbízhatóak több felhőalapú platform, hogy értékes absztrakciós réteg szerepeljenek a megoldás kialakítását.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-518">If your DR strategy relies upon multiple cloud platforms, it's valuable to include abstraction layers in the design of the solution.</span></span> <span data-ttu-id="d8b0e-519">Ez így nem kell a fejlesztéséhez és karbantartásához ugyanazt az alkalmazást, másik felhőalapú platformon vészhelyzet két különböző verzióit.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-519">This eliminates the need to develop and maintain two different versions of the same application for different cloud platforms in case of disaster.</span></span> <span data-ttu-id="d8b0e-520">Mint a hibrid forgatókönyv az Azure Virtual Machines vagy az Azure Container Service használata lehet egyszerűbben ezekben az esetekben a felhőspecifikus PaaS minták használatát.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-520">As with the hybrid scenario, the use of Azure Virtual Machines or Azure Container Service might be easier in these cases than the use of cloud-specific PaaS designs.</span></span>

## <a name="automation"></a><span data-ttu-id="d8b0e-521">Automation</span><span class="sxs-lookup"><span data-stu-id="d8b0e-521">Automation</span></span>
<span data-ttu-id="d8b0e-522">Az imént említett mintáit szükséges offline telepítés gyors aktiválásának, valamint a rendszer bizonyos részeit visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-522">Some of the patterns that we just discussed require quick activation of offline deployments as well as restoration of specific parts of a system.</span></span> <span data-ttu-id="d8b0e-523">Automatizálási szkriptek erőforrások igény szerint aktiválhatja és megoldások gyors üzembe helyezését.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-523">Automation scripts can activate resources on demand and deploy solutions rapidly.</span></span> <span data-ttu-id="d8b0e-524">Alábbi használja a DR-kapcsolódó automation példák [Azure PowerShell-lel](https://msdn.microsoft.com/library/azure/jj156055.aspx), de használatával a [Azure CLI-vel](https://docs.microsoft.com/cli/azure/get-started-with-azure-cli) vagy a [Service Management REST API](https://msdn.microsoft.com/library/azure/ee460799.aspx) is jó lehetőségei vannak.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-524">The DR-related automation examples below use [Azure PowerShell](https://msdn.microsoft.com/library/azure/jj156055.aspx), but using the [Azure CLI](https://docs.microsoft.com/cli/azure/get-started-with-azure-cli) or the [Service Management REST API](https://msdn.microsoft.com/library/azure/ee460799.aspx) are also good options.</span></span>

<span data-ttu-id="d8b0e-525">Automatizálási szkriptek DR nem transzparens módon kezeli az Azure-os eleme felügyelhető.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-525">Automation scripts manage aspects of DR not transparently handled by Azure.</span></span> <span data-ttu-id="d8b0e-526">Ez a minimálisra csökkentik az emberi hibák egységes és megismételhető eredményeket hoz létre.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-526">This produces consistent and repeatable results, minimizing human error.</span></span> <span data-ttu-id="d8b0e-527">Előre definiált Vészhelyreállítási szkripteket is egy katasztrófa során a rendszer, és azok részlegei újraépítése idő csökkentése érdekében.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-527">Predefined DR scripts also reduce the time to rebuild a system and its constituent parts during a disaster.</span></span> <span data-ttu-id="d8b0e-528">Nem szeretné manuálisan döntse el, a hely visszaállítása, bár le, és elveszett pénzt percenként próbál.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-528">You don’t want to try to manually figure out how to restore your site while it's down and losing money every minute.</span></span>

<span data-ttu-id="d8b0e-529">Tesztelje a parancsfájlokat, ismételten elejétől a végéig.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-529">Test your scripts repeatedly from start to finish.</span></span> <span data-ttu-id="d8b0e-530">Miután ellenőrizte az alapvető funkciókat, ügyeljen arra, hogy tesztelje le azokat az [vészhelyreállítási szimuláció](#disaster-simulation).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-530">After verifying their basic functionality, make sure to test them in [disaster simulation](#disaster-simulation).</span></span> <span data-ttu-id="d8b0e-531">Ez segít a hibák száma a parancsfájlok vagy folyamatok tárhat fel.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-531">This helps uncover defects in the scripts or processes.</span></span>

<span data-ttu-id="d8b0e-532">Az Automation szolgáltatással a legjobb, ha egy adattár, PowerShell-parancsfájlok vagy parancssori felület (CLI) Azure-beli vészhelyreállításához parancsfájlok.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-532">A best practice with automation is to create a repository of PowerShell scripts or command-line interface (CLI) scripts for Azure disaster recovery.</span></span> <span data-ttu-id="d8b0e-533">Egyértelműen jelölje meg, és kategorizálja őket a gyors hozzáférés céljából.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-533">Clearly mark and categorize them for quick access.</span></span> <span data-ttu-id="d8b0e-534">Kijelöl egy elsődleges, aki kezelheti a tárházat és a parancsfájlok verziókezelését.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-534">Designate a primary person to manage the repository and versioning of the scripts.</span></span> <span data-ttu-id="d8b0e-535">A paraméterek és a példa a parancsfájl magyarázatok dokumentáljuk őket.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-535">Document them well with explanations of parameters and examples of script use.</span></span> <span data-ttu-id="d8b0e-536">Emellett győződjön meg arról, hogy Ön ezt a dokumentációt szinkronizálva legyenek az Azure-környezetek.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-536">Also ensure that you keep this documentation in sync with your Azure deployments.</span></span> <span data-ttu-id="d8b0e-537">Ez aláhúzásjeleket a célja, hogy egy elsődleges személy felelős a tárház minden része.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-537">This underscores the purpose of having a primary person in charge of all parts of the repository.</span></span>

## <a name="failure-detection"></a><span data-ttu-id="d8b0e-538">Hiba észlelése</span><span class="sxs-lookup"><span data-stu-id="d8b0e-538">Failure detection</span></span>
<span data-ttu-id="d8b0e-539">Rendelkezésre állással és a vész-helyreállítási problémák megfelelő kezelése érdekében meg kell tudni észlelheti és diagnosztizálhatja a hibákat.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-539">To correctly handle problems with availability and disaster recovery, you must be able to detect and diagnose failures.</span></span> <span data-ttu-id="d8b0e-540">Hajtsa végre a speciális kiszolgáló és a központi telepítés figyelésének gyors felismerése a rendszer vagy összetevőinek hirtelen elérhetetlenné válik.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-540">Perform advanced server and deployment monitoring to quickly recognize when a system or its components suddenly become unavailable.</span></span> <span data-ttu-id="d8b0e-541">Felmérheti az általános állapotát, a felhőszolgáltatás és annak függőségeit monitoringeszközök hajthat végre a munka egy részét.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-541">Monitoring tools that assess the overall health of the cloud service and its dependencies can perform part of this work.</span></span> <span data-ttu-id="d8b0e-542">Egy megfelelő Microsoft eszköz [a System Center 2016](https://www.microsoft.com/cloud-platform/system-center).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-542">One suitable Microsoft tool is [System Center 2016](https://www.microsoft.com/cloud-platform/system-center).</span></span> <span data-ttu-id="d8b0e-543">Harmadik féltől származó eszközökkel is lehetővé teszi figyelési funkciókat.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-543">Third-party tools can also provide monitoring capabilities.</span></span> <span data-ttu-id="d8b0e-544">A legtöbb figyelési megoldások nyomon követheti a kulcsfontosságú teljesítményszámlálók és szolgáltatás rendelkezésre állása.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-544">Most monitoring solutions track key performance counters and service availability.</span></span>

<span data-ttu-id="d8b0e-545">Bár ezek az eszközök létfontosságú, meg kell terveznie a hibák észlelése és a jelentéskészítő egy felhőszolgáltatáson belül.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-545">Although these tools are vital, you must plan for fault detection and reporting within a cloud service.</span></span> <span data-ttu-id="d8b0e-546">Megfelelően használni az Azure Diagnostics is meg kell terveznie.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-546">You must also plan to properly use Azure Diagnostics.</span></span> <span data-ttu-id="d8b0e-547">Egyéni teljesítményszámlálók vagy eseménynapló bejegyzések is lehet az általános stratégia részeként.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-547">Custom performance counters or event-log entries can also be part of the overall strategy.</span></span> <span data-ttu-id="d8b0e-548">Ez további adatokat gyorsan diagnosztizálni a problémát, és állítsa vissza a teljes körű képességekkel meghibásodások biztosít.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-548">This provides more data during failures to quickly diagnose the problem and restore full capabilities.</span></span> <span data-ttu-id="d8b0e-549">A monitorozási eszközök segítségével meghatározhatja az alkalmazás állapotáról további metrikák is tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-549">It also provides additional metrics that the monitoring tools can use to determine application health.</span></span> <span data-ttu-id="d8b0e-550">További információkért lásd: [Azure-diagnosztika engedélyezése az Azure Cloud Servicesben](/azure/cloud-services/cloud-services-dotnet-diagnostics/).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-550">For more information, see [Enabling Azure Diagnostics in Azure Cloud Services](/azure/cloud-services/cloud-services-dotnet-diagnostics/).</span></span> <span data-ttu-id="d8b0e-551">Az általános "állapotmodell" tervezéséről, lásd: [Failsafe: Útmutató a rugalmas Felhőbeli architektúrákat](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="d8b0e-551">For a discussion of how to plan for an overall “health model,” see [Failsafe: Guidance for Resilient Cloud Architectures](https://channel9.msdn.com/Series/FailSafe).</span></span>

## <a name="disaster-simulation"></a><span data-ttu-id="d8b0e-552">Vészhelyreállítási szimuláció</span><span class="sxs-lookup"><span data-stu-id="d8b0e-552">Disaster simulation</span></span>
<span data-ttu-id="d8b0e-553">Szimuláció tesztelés magában foglalja a kis valós beszédhelyzetek helyzetek létrehozását a munkahelyi emelet, hogy figyelje meg, miként reagálhat rájuk a csapat tagjainak.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-553">Simulation testing involves creating small real-life situations on the work floor to observe how the team members react.</span></span> <span data-ttu-id="d8b0e-554">Szimuláció azt is bemutatják, hogyan hatékony megoldások vannak a helyreállítási tervben.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-554">Simulations also show how effective the solutions are in the recovery plan.</span></span> <span data-ttu-id="d8b0e-555">Hajtsa végre a szimuláció úgy, hogy a létrehozott forgatókönyvek nem zavarja a tényleges üzleti közben továbbra is kedvében van például a valós helyzeteket.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-555">Execute simulations so that the created scenarios don't disrupt actual business, while still feeling like real situations.</span></span>

<span data-ttu-id="d8b0e-556">Vegye figyelembe, hogy manuálisan szimulálása a rendelkezésre állási problémák az alkalmazásban a "kapcsolótábla" típusú mikroszolgáltatásokra.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-556">Consider architecting a type of “switchboard” in the application to manually simulate availability issues.</span></span> <span data-ttu-id="d8b0e-557">Például egy helyreállítható kapcsolón keresztül indítása a adatbázis-hozzáférés kivételek-sorbarendezésre modul által okozza, hogy megfelelően működni.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-557">For instance, through a soft switch, trigger database access exceptions for an ordering module by causing it to malfunction.</span></span> <span data-ttu-id="d8b0e-558">A hálózati adapter szintjén más modulok hasonló egyszerűsített megközelítések is igénybe vehet.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-558">You can take similar lightweight approaches for other modules at the network interface level.</span></span>

<span data-ttu-id="d8b0e-559">A szimuláció emeli ki, amely nem megfelelően foglalkozott problémákat.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-559">The simulation highlights any issues that were inadequately addressed.</span></span> <span data-ttu-id="d8b0e-560">A szimulált esetekben teljesen vezérelhető kell lennie.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-560">The simulated scenarios must be completely controllable.</span></span> <span data-ttu-id="d8b0e-561">Ez azt jelenti, hogy akkor is, ha a helyreállítási terv úgy tűnik, hogy hibás, visszaállíthatja a helyzet vissza a normál anélkül, hogy ez jelentős károkat.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-561">This means that, even if the recovery plan seems to be failing, you can restore the situation back to normal without causing any significant damage.</span></span> <span data-ttu-id="d8b0e-562">Emellett az is fontos, hogy értesítse-e a magasabb szintű felügyeleti arról, hogy mikor és hogyan történjen a szimuláció gyakorlatok lesz végrehajtva.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-562">It’s also important that you inform higher-level management about when and how the simulation exercises will be executed.</span></span> <span data-ttu-id="d8b0e-563">Ebben a csomagban kell részletesen ideje vagy erőforrása a szimuláció hatással.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-563">This plan should detail the time or resources affected during the simulation.</span></span> <span data-ttu-id="d8b0e-564">A mértékek a siker is meghatározhat, történő tesztelésekor a vészhelyreállítási tervet.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-564">Also define the measures of success when testing your disaster recovery plan.</span></span>

<span data-ttu-id="d8b0e-565">Ha az Azure Site Recovery használja, az Azure-ba, ellenőrizze a replikációs stratégiáját, vagy hajtson végre adatveszteség és állásidő nélkül vészhelyreállítási próbát egy feladatátvételi tesztet hajthat végre.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-565">If you are using Azure Site Recovery, you can execute a test failover to Azure, to validate your replication strategy or perform a disaster recovery drill without any data loss or downtime.</span></span> <span data-ttu-id="d8b0e-566">Feladatátvételi teszt nem érinti a folyamatban lévő virtuális gépek replikációja vagy az éles környezetben.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-566">A test failover does not affect on the ongoing VM replication or your production environment.</span></span>

<span data-ttu-id="d8b0e-567">Számos egyéb módszert is tesztelheti a vészhelyreállítási terveket.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-567">Several other techniques can test disaster recovery plans.</span></span> <span data-ttu-id="d8b0e-568">Azonban ezek többsége el egyszerűen ezen alapvető technikából változata.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-568">However, most of them are simply variations of these basic techniques.</span></span> <span data-ttu-id="d8b0e-569">Ezt a célt értékelheti ki a helyreállítási terv a megvalósíthatósági vizsgálat.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-569">The intent of this testing is to evaluate the feasibility of the recovery plan.</span></span> <span data-ttu-id="d8b0e-570">A részleteket az egyszerű helyreállítási tervben szereplő hézagokat felderítését a vészhelyreállítás tesztelését összpontosít.</span><span class="sxs-lookup"><span data-stu-id="d8b0e-570">Disaster recovery testing focuses on the details to discover gaps in the basic recovery plan.</span></span>

## <a name="service-specific-guidance"></a><span data-ttu-id="d8b0e-571">Szolgáltatásspecifikus útmutató</span><span class="sxs-lookup"><span data-stu-id="d8b0e-571">Service-specific guidance</span></span>

<span data-ttu-id="d8b0e-572">Az alábbi témakörök ismertetik a katasztrófa utáni helyreállítás adott Azure-szolgáltatások:</span><span class="sxs-lookup"><span data-stu-id="d8b0e-572">The following topics describe disaster recovery specific Azure services:</span></span>

| <span data-ttu-id="d8b0e-573">Szolgáltatás</span><span class="sxs-lookup"><span data-stu-id="d8b0e-573">Service</span></span> | <span data-ttu-id="d8b0e-574">Témakör</span><span class="sxs-lookup"><span data-stu-id="d8b0e-574">Topic</span></span> |
|---------|-------|
| <span data-ttu-id="d8b0e-575">Azure Database for MySQL</span><span class="sxs-lookup"><span data-stu-id="d8b0e-575">Azure Database for MySQL</span></span> | [<span data-ttu-id="d8b0e-576">Az Azure Database for MySQL üzletmenet-folytonossági funkcióinak áttekintése</span><span class="sxs-lookup"><span data-stu-id="d8b0e-576">Overview of business continuity with Azure Database for MySQL</span></span>](/azure/mysql/concepts-business-continuity) |
| <span data-ttu-id="d8b0e-577">Azure Database for PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="d8b0e-577">Azure Database for PostgreSQL</span></span> | [<span data-ttu-id="d8b0e-578">Az Azure Database for PostgreSQL üzletmenet-folytonossági funkcióinak áttekintése</span><span class="sxs-lookup"><span data-stu-id="d8b0e-578">Overview of business continuity with Azure Database for PostgreSQL</span></span>](/azure/postgresql/concepts-business-continuity)
| <span data-ttu-id="d8b0e-579">Cloud Services</span><span class="sxs-lookup"><span data-stu-id="d8b0e-579">Cloud Services</span></span> | [<span data-ttu-id="d8b0e-580">Mi a teendő az Azure Cloud Servicest befolyásoló Azure szolgáltatás kiesése esetén?</span><span class="sxs-lookup"><span data-stu-id="d8b0e-580">What to do in the event of an Azure service disruption that impacts Azure Cloud Services</span></span>](/azure/cloud-services/cloud-services-disaster-recovery-guidance) |
| <span data-ttu-id="d8b0e-581">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="d8b0e-581">Cosmos DB</span></span> | [<span data-ttu-id="d8b0e-582">Az Azure Cosmos DB az üzletmenet folytonosságának automatikus regionális feladatátvétel</span><span class="sxs-lookup"><span data-stu-id="d8b0e-582">Automatic regional failover for business continuity in Azure Cosmos DB</span></span>](/azure/cosmos-db/regional-failover)
| <span data-ttu-id="d8b0e-583">Key Vault</span><span class="sxs-lookup"><span data-stu-id="d8b0e-583">Key Vault</span></span> | [<span data-ttu-id="d8b0e-584">Az Azure Key Vault rendelkezésre állás és redundancia</span><span class="sxs-lookup"><span data-stu-id="d8b0e-584">Azure Key Vault availability and redundancy</span></span>](/azure/key-vault/key-vault-disaster-recovery-guidance) |
|<span data-ttu-id="d8b0e-585">Storage</span><span class="sxs-lookup"><span data-stu-id="d8b0e-585">Storage</span></span> | [<span data-ttu-id="d8b0e-586">Mi a teendő az Azure Storage leállása esetén?</span><span class="sxs-lookup"><span data-stu-id="d8b0e-586">What to do if an Azure Storage outage occurs</span></span>](/azure/storage/storage-disaster-recovery-guidance) |
| <span data-ttu-id="d8b0e-587">SQL Database</span><span class="sxs-lookup"><span data-stu-id="d8b0e-587">SQL Database</span></span> | [<span data-ttu-id="d8b0e-588">Visszaállítása egy Azure SQL Database vagy feladatátvétel a másodlagos kiszolgálóra</span><span class="sxs-lookup"><span data-stu-id="d8b0e-588">Restore an Azure SQL Database or failover to a secondary</span></span>](/azure/sql-database/sql-database-disaster-recovery) |
| <span data-ttu-id="d8b0e-589">Virtual machines (Virtuális gépek)</span><span class="sxs-lookup"><span data-stu-id="d8b0e-589">Virtual machines</span></span> | [<span data-ttu-id="d8b0e-590">Mi a teendő abban az esetben, ha egy Azure-szolgáltatáskimaradás hatással van az Azure-beli virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="d8b0e-590">What to do in the event that an Azure service disruption impacts Azure virtual machines</span></span>](/azure/virtual-machines/virtual-machines-disaster-recovery-guidance) |
| <span data-ttu-id="d8b0e-591">Virtuális hálózatok</span><span class="sxs-lookup"><span data-stu-id="d8b0e-591">Virtual networks</span></span> | [<span data-ttu-id="d8b0e-592">Virtuális hálózat – üzletmenet-folytonossági</span><span class="sxs-lookup"><span data-stu-id="d8b0e-592">Virtual Network – Business Continuity</span></span>](/azure/virtual-network/virtual-network-disaster-recovery-guidance) |


