---
title: "Az Azure-alkalmazások katasztrófa utáni helyreállítás"
description: "Műszaki áttekintés és alkalmazások a Microsoft Azure vész-helyreállítási megtervezésével kapcsolatos részletes információkat."
author: adamglick
ms.date: 05/26/2017
ms.openlocfilehash: d415b27dd7928996e2a6dc7fd8fcf6a77c835768
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 11/14/2017
---
[!INCLUDE [header](../_includes/header.md)]
# <a name="disaster-recovery-for-azure-applications"></a><span data-ttu-id="60d79-103">Az Azure-alkalmazások katasztrófa utáni helyreállítás</span><span class="sxs-lookup"><span data-stu-id="60d79-103">Disaster recovery for Azure applications</span></span>
<span data-ttu-id="60d79-104">Rugalmasság és a magas rendelkezésre állást biztosító stratégiáikhoz célja, hogy átmeneti hiba feltételek kezelésére.</span><span class="sxs-lookup"><span data-stu-id="60d79-104">Resiliency and high availability strategies are intended to handling temporary failure conditions.</span></span> <span data-ttu-id="60d79-105">Vészhelyreállítás (DR) arra irányul, végezze el az alkalmazás funkciói helyreállíthatatlan adatvesztést.</span><span class="sxs-lookup"><span data-stu-id="60d79-105">Disaster recovery (DR) is focused on recovering from a catastrophic loss of application functionality.</span></span> <span data-ttu-id="60d79-106">Például egy Azure-régió, az alkalmazás nem érhető el, ha szüksége a tervek az alkalmazás fut, vagy egy másik régióban az adatok elérésekor.</span><span class="sxs-lookup"><span data-stu-id="60d79-106">For example, if an Azure region hosting your application becomes unavailable, you need a plan for running your application or accessing your data in another region.</span></span> <span data-ttu-id="60d79-107">A terv végrehajtása magában foglalja a személyeket, folyamatok és támogató alkalmazások, amelyek lehetővé teszik a rendszer folytatja a működését.</span><span class="sxs-lookup"><span data-stu-id="60d79-107">Executing this plan involves people, processes, and supporting applications that allow the system to continue functioning.</span></span> <span data-ttu-id="60d79-108">A tervnek mindenképp tartalmaznia kell próba során hibák, és a terv biztosításához adatbázisok helyreállítási tesztelés hang-e.</span><span class="sxs-lookup"><span data-stu-id="60d79-108">Your plan should include rehearsing failures and testing the recovery of databases to ensure the plan is sound.</span></span> <span data-ttu-id="60d79-109">Üzleti és informatikai tulajdonosai számára adja meg egy olyan vészhelyzet esetén a rendszer működési módját is meghatározni a szolgáltatás funkcióit során egy olyan vészhelyzet esetén szükséges.</span><span class="sxs-lookup"><span data-stu-id="60d79-109">The business and technology owners who define the system's operational mode for a disaster also determine the level of service functionality required during a disaster.</span></span> <span data-ttu-id="60d79-110">Ez a funkció szint is igénybe vehet néhány űrlapok: teljesen elérhetetlenné, részben elérhető csökkentett vagy késleltetett feldolgozási keresztül vagy teljes érhető el.</span><span class="sxs-lookup"><span data-stu-id="60d79-110">This level of functionality can take a few forms: completely unavailable, partially available via reduced functionality or delayed processing, or fully available.</span></span>

## <a name="azure-disaster-recovery-features"></a><span data-ttu-id="60d79-111">Azure vész-helyreállítási szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="60d79-111">Azure disaster recovery features</span></span>
<span data-ttu-id="60d79-112">Mivel a rendelkezésre állási lehetőségekért Azure biztosít [rugalmassági műszaki útmutatót](./index.md) arra tervezték, hogy katasztrófa utáni helyreállítás.</span><span class="sxs-lookup"><span data-stu-id="60d79-112">As with availability considerations, Azure provides [resiliency technical guidance](./index.md) designed to support disaster recovery.</span></span> <span data-ttu-id="60d79-113">Kapcsolat áll fenn is az Azure és a vészhelyreállításnak rendelkezésre állása szolgáltatásai között.</span><span class="sxs-lookup"><span data-stu-id="60d79-113">There is also a relationship between availability features of Azure and disaster recovery.</span></span> <span data-ttu-id="60d79-114">A tartalék tartományok közötti szerepkörök felügyeleti például egy alkalmazás rendelkezésre állásának növeli.</span><span class="sxs-lookup"><span data-stu-id="60d79-114">For example, the management of roles across fault domains increases the availability of an application.</span></span> <span data-ttu-id="60d79-115">Egy nem kezelt hardverhiba anélkül, hogy a felügyeleti válna a "vész" forgatókönyvhöz.</span><span class="sxs-lookup"><span data-stu-id="60d79-115">Without that management, an unhandled hardware failure would become a “disaster” scenario.</span></span> <span data-ttu-id="60d79-116">Ezen rendelkezésre állási funkciók és stratégiák, ami fontos eleme annak a vész-ellenőrző van az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="60d79-116">Leveraging these availability features and strategies is an important part of disaster-proofing your application.</span></span> <span data-ttu-id="60d79-117">Azonban ez a cikk túllép általános elérhetőségével kapcsolatos problémákat katasztrófa események több súlyos (és egyes).</span><span class="sxs-lookup"><span data-stu-id="60d79-117">However, this article goes beyond general availability issues to more serious (and rarer) disaster events.</span></span>

## <a name="multiple-datacenter-regions"></a><span data-ttu-id="60d79-118">Több adatközpont-régiókban</span><span class="sxs-lookup"><span data-stu-id="60d79-118">Multiple datacenter regions</span></span>
<span data-ttu-id="60d79-119">Azure adatközpontjaiban a világ számos régiókban tart fenn.</span><span class="sxs-lookup"><span data-stu-id="60d79-119">Azure maintains datacenters in many regions around the world.</span></span> <span data-ttu-id="60d79-120">Ez az infrastruktúra támogatja a több vész-helyreállítási eljárással, például a rendszer által biztosított georeplikáció az Azure Storage másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-120">This infrastructure supports several disaster recovery scenarios, such as system-provided geo-replication of Azure Storage to secondary regions.</span></span> <span data-ttu-id="60d79-121">Is könnyen és olcsón telepíthet egy felhőalapú szolgáltatás világszerte több helyre.</span><span class="sxs-lookup"><span data-stu-id="60d79-121">You can also easily and inexpensively deploy a cloud service to multiple locations around the world.</span></span> <span data-ttu-id="60d79-122">Hasonlítsa össze a költségek és nehezen létrehozása és karbantartása a saját adatközpontját több régióba.</span><span class="sxs-lookup"><span data-stu-id="60d79-122">Compare this with the cost and difficulty of building and maintaining your own datacenters in multiple regions.</span></span> <span data-ttu-id="60d79-123">Adatok és a szolgáltatások telepítése több területre megvédi az alkalmazást egy fő leállás egy régió a.</span><span class="sxs-lookup"><span data-stu-id="60d79-123">Deploying data and services to multiple regions helps protect your application from a major outage in a single region.</span></span> <span data-ttu-id="60d79-124">A vész-helyreállítási terv tervezéséhez, fontos párosított régiók fogalom megértéséhez.</span><span class="sxs-lookup"><span data-stu-id="60d79-124">As you design your disaster recovery plan, it’s important to understand the concept of paired regions.</span></span> <span data-ttu-id="60d79-125">További információkért lásd: [üzleti folytonossági és vészhelyreállítási helyreállítási (BCDR): Azure-régiókat párosítva](/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="60d79-125">For more information, see [Business continuity and disaster recovery (BCDR): Azure Paired Regions](/azure/best-practices-availability-paired-regions).</span></span>

## <a name="azure-traffic-manager"></a><span data-ttu-id="60d79-126">Azure Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="60d79-126">Azure Traffic Manager</span></span>
<span data-ttu-id="60d79-127">Egy régióspecifikus hiba akkor fordul elő, amikor services vagy egy másik régióban központi telepítései kell átirányítja a forgalmat.</span><span class="sxs-lookup"><span data-stu-id="60d79-127">When a region-specific failure occurs, you must redirect traffic to services or deployments in another region.</span></span> <span data-ttu-id="60d79-128">A leghatékonyabb kezelésére a szolgáltatások, például az Azure Traffic Managerben, amely automatizálja a felhasználói forgalomnak egy másik régióban a feladatátvétel az elsődleges régióban meghibásodásakor keresztül is.</span><span class="sxs-lookup"><span data-stu-id="60d79-128">It is most effective to handle this via services such as Azure Traffic Manager, which automates the failover of user traffic to another region if the primary region fails.</span></span> <span data-ttu-id="60d79-129">A Traffic Manager alapja megértése fontos egy hatékony vész-Helyreállítási stratégia tervezésekor.</span><span class="sxs-lookup"><span data-stu-id="60d79-129">Understanding the fundamentals of Traffic Manager is important when designing an effective DR strategy.</span></span>

<span data-ttu-id="60d79-130">A TRAFFIC Manager használ a tartománynévrendszer (DNS) ügyfél kéréseiket legmegfelelőbb végpontra irányuló forgalom-útválasztási módszert és a végpontok állapotát.</span><span class="sxs-lookup"><span data-stu-id="60d79-130">Traffic Manager uses the Domain Name System (DNS) to direct client requests to the most appropriate endpoint based on a traffic-routing method and the health of the endpoints.</span></span> <span data-ttu-id="60d79-131">Az alábbi ábra a felhasználók csatlakoznak a Traffic Manager URL-címe (`http://myATMURL.trafficmanager.net`) amely kivonatolja a tényleges URL-címek (`http://app1URL.cloudapp.net` és `http://app2URL.cloudapp.net`).</span><span class="sxs-lookup"><span data-stu-id="60d79-131">In the following diagram, users connect to a Traffic Manager URL (`http://myATMURL.trafficmanager.net`) which abstracts the actual site URLs (`http://app1URL.cloudapp.net` and `http://app2URL.cloudapp.net`).</span></span> <span data-ttu-id="60d79-132">Felhasználói kérelmek átirányítja a megfelelő alapul szolgáló URL-címe alapján a konfigurált [Traffic Manager útválasztási módszer](/azure/traffic-manager/traffic-manager-routing-methods).</span><span class="sxs-lookup"><span data-stu-id="60d79-132">User requests are routed to the proper underlying URL based on your configured [Traffic Manager routing method](/azure/traffic-manager/traffic-manager-routing-methods).</span></span> <span data-ttu-id="60d79-133">Az ebben a cikkben azt fogja érintett, csak a feladatátvételi kapcsolóval.</span><span class="sxs-lookup"><span data-stu-id="60d79-133">For the sake of this article, we will be concerned with only the failover option.</span></span>

![Segítségével az Azure Traffic Manager útválasztási](./images/disaster-recovery-azure-applications/routing-using-azure-traffic-manager.png)

<span data-ttu-id="60d79-135">A Traffic Manager konfigurálásakor meg kell adnia egy új Traffic Manager DNS-előtagot, mely felhasználók fogják használni a szolgáltatás eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="60d79-135">When configuring Traffic Manager, you provide a new Traffic Manager DNS prefix, which users will use to access your service.</span></span> <span data-ttu-id="60d79-136">Traffic Manager most kivonatok terheléselosztás 1. szint nagyobb, a regionális szintű.</span><span class="sxs-lookup"><span data-stu-id="60d79-136">Traffic Manager now abstracts load balancing one level higher that the regional level.</span></span> <span data-ttu-id="60d79-137">A Traffic Manager DNS egy olyan CNAME REKORDOT, amely akkor kezeli az telepítésére vonatkozó van leképezve.</span><span class="sxs-lookup"><span data-stu-id="60d79-137">The Traffic Manager DNS maps to a CNAME for all the deployments that it manages.</span></span>

<span data-ttu-id="60d79-138">Traffic Manager szoftverben, megadhatja a felhasználók továbbítja a hiba akkor fordul elő, amikor központi telepítések rangsorolt listáját.</span><span class="sxs-lookup"><span data-stu-id="60d79-138">Within Traffic Manager, you specify a prioritized list of deployments that users will be routed to when failure occurs.</span></span> <span data-ttu-id="60d79-139">A TRAFFIC Manager figyeli a központi telepítés végpontok.</span><span class="sxs-lookup"><span data-stu-id="60d79-139">Traffic Manager monitors the deployment endpoints.</span></span> <span data-ttu-id="60d79-140">Az elsődleges üzemelő példány nem érhető el, ha a Traffic Manager a következő központi telepítés a prioritási listán lévő felhasználók irányítja.</span><span class="sxs-lookup"><span data-stu-id="60d79-140">If the primary deployment becomes unavailable, Traffic Manager routes users to the next deployment on the priority list.</span></span>

<span data-ttu-id="60d79-141">Bár a Traffic Manager úgy dönt, hogy önállóan hol találhatnak egy feladatátvétel során, eldöntheti, hogy a feladatátvétel tartomány-e aktív vagy inaktív közben nem feladatátvételi módban (amely független a Traffic Manager).</span><span class="sxs-lookup"><span data-stu-id="60d79-141">Although Traffic Manager decides where to go during a failover, you can decide whether your failover domain is dormant or active while you're not in failover mode (which is unrelated to Traffic Manager).</span></span> <span data-ttu-id="60d79-142">A TRAFFIC Manager hibát észlel, az elsődleges helyen, és a feladatátvételi helyen, függetlenül attól, hogy, hogy a hely jelenleg szolgál felhasználók értéke.</span><span class="sxs-lookup"><span data-stu-id="60d79-142">Traffic Manager detects a failure in the primary site and rolls over to the failover site, regardless of whether that site is currently serving users.</span></span>

<span data-ttu-id="60d79-143">Azure Traffic Manager működéséről további információkért tekintse meg:</span><span class="sxs-lookup"><span data-stu-id="60d79-143">For more information on how Azure Traffic Manager works, refer to:</span></span>

* [<span data-ttu-id="60d79-144">A TRAFFIC Manager – áttekintés</span><span class="sxs-lookup"><span data-stu-id="60d79-144">Traffic Manager overview</span></span>](/azure/traffic-manager/traffic-manager-overview/)
* [<span data-ttu-id="60d79-145">A Traffic Manager útválasztási módszerei</span><span class="sxs-lookup"><span data-stu-id="60d79-145">Traffic Manager routing methods</span></span>](/azure/traffic-manager/traffic-manager-routing-methods)
* [<span data-ttu-id="60d79-146">Feladatátvétel útválasztási módjának konfigurálása</span><span class="sxs-lookup"><span data-stu-id="60d79-146">Configure failover routing method</span></span>](/azure/traffic-manager/traffic-manager-configure-failover-routing-method/)

## <a name="azure-disaster-scenarios"></a><span data-ttu-id="60d79-147">Az Azure vészhelyreállítási forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="60d79-147">Azure disaster scenarios</span></span>
<span data-ttu-id="60d79-148">Az alábbi szakaszok a vészhelyreállítási forgatókönyveket számos különféle típusú foglalkozik.</span><span class="sxs-lookup"><span data-stu-id="60d79-148">The following sections cover several different types of disaster scenarios.</span></span> <span data-ttu-id="60d79-149">Régió kiterjedő szolgáltatás zavarokat nincsenek az alkalmazásszintű hibák csak okait.</span><span class="sxs-lookup"><span data-stu-id="60d79-149">Region-wide service disruptions are not the only cause of application-wide failures.</span></span> <span data-ttu-id="60d79-150">Gyenge tervezési és a felügyeleti hibák kimaradások esetén is vezethet.</span><span class="sxs-lookup"><span data-stu-id="60d79-150">Poor design and administrative errors can also lead to outages.</span></span> <span data-ttu-id="60d79-151">Fontos tervezési és a helyreállítási terv tesztelési fázis során fontolja meg a hiba lehetséges okait.</span><span class="sxs-lookup"><span data-stu-id="60d79-151">It's important to consider the possible causes of a failure during both the design and testing phases of your recovery plan.</span></span> <span data-ttu-id="60d79-152">Egy jó terv kihasználja az Azure szolgáltatásait, és az alkalmazás-specifikus stratégiák szabályozva őket az információhasználat.</span><span class="sxs-lookup"><span data-stu-id="60d79-152">A good plan takes advantage of Azure features and augments them with application-specific strategies.</span></span> <span data-ttu-id="60d79-153">A kiválasztott válasz határozza meg az alkalmazás megbízhatósága egyre fontosabb szempont a helyreállítási időkorlát (RPO), és a helyreállítási idő célkitűzése (RTO).</span><span class="sxs-lookup"><span data-stu-id="60d79-153">The chosen response is determined by the importance of the application, the recovery point objective (RPO), and the recovery time objective (RTO).</span></span>

### <a name="application-failure"></a><span data-ttu-id="60d79-154">Alkalmazáshiba</span><span class="sxs-lookup"><span data-stu-id="60d79-154">Application failure</span></span>
<span data-ttu-id="60d79-155">Az Azure Traffic Manager automatikusan kezeli a gazdagép virtuális gép a mögöttes hardver vagy operációs rendszer szoftver hiba.</span><span class="sxs-lookup"><span data-stu-id="60d79-155">Azure Traffic Manager automatically handles failures that result from the underlying hardware or operating system software in the host virtual machine.</span></span> <span data-ttu-id="60d79-156">Azure létrehoz egy új szerepkör-példányt, és hozzáadja azt a rendelkezésre álló készlet.</span><span class="sxs-lookup"><span data-stu-id="60d79-156">Azure creates a new role instance and adds it to the available pool.</span></span> <span data-ttu-id="60d79-157">Ha több szerepkör-példány már futott, Azure feldolgozási a többi futó szerepkörpéldányon közben a mag cseréje a hibás csomópont lesz.</span><span class="sxs-lookup"><span data-stu-id="60d79-157">If  more than one role instance was already running, Azure shifts processing to the other running role instances while replacing the failed node.</span></span>

<span data-ttu-id="60d79-158">Súlyos hiba akkor fordulhat elő, a hardver vagy operációs rendszer alapjául szolgáló meghibásodás nélkül.</span><span class="sxs-lookup"><span data-stu-id="60d79-158">Serious application errors can occur without any underlying failure of the hardware or operating system.</span></span> <span data-ttu-id="60d79-159">Az alkalmazás hibás programot vagy az adatok épségével kapcsolatos problémák okozta végzetes kivétel miatt sikertelen lehet.</span><span class="sxs-lookup"><span data-stu-id="60d79-159">The application might fail due to catastrophic exceptions caused by bad logic or data integrity issues.</span></span> <span data-ttu-id="60d79-160">Az alkalmazás kódjának elegendő telemetriai szerepelnie kell, hogy a felügyeleti rendszer hibát észleli, és értesíti az alkalmazás-rendszergazda.</span><span class="sxs-lookup"><span data-stu-id="60d79-160">You must include sufficient telemetry in the application code so that a monitoring system can detect failure conditions and notify an application administrator.</span></span> <span data-ttu-id="60d79-161">Olyan rendszergazda, aki rendelkezik teljes körű ismeretekkel a vész-helyreállítási folyamatokat eldöntheti, indul el, a feladatátvételi folyamat, illetve a rendelkezésre állási kimaradás fogadni a kritikus hibák feloldása közben.</span><span class="sxs-lookup"><span data-stu-id="60d79-161">An administrator who has full knowledge of the disaster recovery processes can decide whether to trigger a failover process or accept an availability outage while resolving the critical errors.</span></span>

### <a name="data-corruption"></a><span data-ttu-id="60d79-162">Adatsérülés</span><span class="sxs-lookup"><span data-stu-id="60d79-162">Data corruption</span></span>
<span data-ttu-id="60d79-163">Azure automatikusan tárolja az Azure SQL Database és az Azure Storage adatokat háromszor redundantly belül különböző tartalék tartományok ugyanabban a régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-163">Azure automatically stores Azure SQL Database and Azure Storage data three times redundantly within different fault domains in the same region.</span></span> <span data-ttu-id="60d79-164">A georeplikáció használja, az adatok tárolódnak a további háromszor egy másik régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-164">If you use geo-replication, the data is stored three additional times in a different region.</span></span> <span data-ttu-id="60d79-165">Azonban ha a felhasználók vagy az alkalmazás megsérülnek tárolt adatokat az elsődleges verziót, az adatok gyorsan replikálja a többi példányt.</span><span class="sxs-lookup"><span data-stu-id="60d79-165">However, if your users or your application corrupts that data in the primary copy, the data quickly replicates to the other copies.</span></span> <span data-ttu-id="60d79-166">Sajnos az eredmény sérült adatok többszörös lemásolását.</span><span class="sxs-lookup"><span data-stu-id="60d79-166">Unfortunately, this results in multiple copies of corrupt data.</span></span>

<span data-ttu-id="60d79-167">Kezelheti az adatok esetleges sérülését, két lehetősége van.</span><span class="sxs-lookup"><span data-stu-id="60d79-167">To manage potential corruption of your data, you have two options.</span></span> <span data-ttu-id="60d79-168">Először egy egyéni biztonsági mentési stratégia segítségével kezelheti.</span><span class="sxs-lookup"><span data-stu-id="60d79-168">First, you can manage a custom backup strategy.</span></span> <span data-ttu-id="60d79-169">A biztonsági másolatok tárolhatja az Azure vagy a helyszínen, attól függően, hogy az üzleti igényeknek és a cégirányítási szabályzat.</span><span class="sxs-lookup"><span data-stu-id="60d79-169">You can store your backups in Azure or on-premises, depending on your business requirements or governance regulations.</span></span> <span data-ttu-id="60d79-170">Egy másik lehetőség egy SQL-adatbázis helyreállítása a pont időponthoz kötött visszaállítás segítségével.</span><span class="sxs-lookup"><span data-stu-id="60d79-170">Another option is to use the point-in-time restore option to recover a SQL database.</span></span> <span data-ttu-id="60d79-171">További információkért lásd: a [vész-helyreállítási adatok stratégiák](#data-strategies-for-disaster-recovery) az alábbi szakasz.</span><span class="sxs-lookup"><span data-stu-id="60d79-171">For more information, see the [data strategies for disaster recovery](#data-strategies-for-disaster-recovery) section below.</span></span>

### <a name="network-outage"></a><span data-ttu-id="60d79-172">Hálózati kimaradás</span><span class="sxs-lookup"><span data-stu-id="60d79-172">Network outage</span></span>
<span data-ttu-id="60d79-173">Nem érhetők el az Azure-hálózatot részeit, akkor is lehet nem érhető el az alkalmazás vagy az adatok.</span><span class="sxs-lookup"><span data-stu-id="60d79-173">When parts of the Azure network are inaccessible, you may be unable to access your application or data.</span></span> <span data-ttu-id="60d79-174">Ha hálózati problémák miatt nem érhetők el egy vagy több szerepkörpéldányt beállítani, az Azure a fennmaradó rendelkezésre álló példányok az alkalmazás használja.</span><span class="sxs-lookup"><span data-stu-id="60d79-174">If one or more role instances are unavailable due to network issues, Azure uses the remaining available instances of your application.</span></span> <span data-ttu-id="60d79-175">Ha az alkalmazás nem fér hozzá az adatok Azure hálózati kimaradás mert, potenciálisan futtathatja csökkentett alkalmazás funkciójú helyben gyorsítótárazott adatok használatával.</span><span class="sxs-lookup"><span data-stu-id="60d79-175">If your application cannot access its data because of an Azure network outage, you can potentially run with reduced application functionality locally by using cached data.</span></span> <span data-ttu-id="60d79-176">Kell terveznie a vész-helyreállítási stratégiát az korlátozott funkciókkal az alkalmazás futtatásához.</span><span class="sxs-lookup"><span data-stu-id="60d79-176">You need to design the disaster recovery strategy to run with reduced functionality in your application.</span></span> <span data-ttu-id="60d79-177">Egyes alkalmazások esetében ez nem feltétlenül gyakorlati.</span><span class="sxs-lookup"><span data-stu-id="60d79-177">For some applications, this might not be practical.</span></span>

<span data-ttu-id="60d79-178">Egy másik lehetőség egy adat tárolása egy másik helyre, amíg a kapcsolat visszaállítására.</span><span class="sxs-lookup"><span data-stu-id="60d79-178">Another option is to store data in an alternate location until connectivity is restored.</span></span> <span data-ttu-id="60d79-179">Funkció csökkenti lehetőség nem érhető el, a többi beállítás esetén alkalmazás állásidő és a feladatátvétel egy másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="60d79-179">If reducing functionality is not an option, the remaining options are application downtime or failover to an alternate region.</span></span> <span data-ttu-id="60d79-180">A tervező az korlátozott funkciókkal futó alkalmazás mértékű üzleti döntés műszaki ütemezésként.</span><span class="sxs-lookup"><span data-stu-id="60d79-180">The design of an application running with reduced functionality is as much a business decision as a technical one.</span></span> <span data-ttu-id="60d79-181">Erről szól című szakaszban további [csökkenteni az alkalmazás funkciói](#reduced-application-functionality).</span><span class="sxs-lookup"><span data-stu-id="60d79-181">This is discussed further in the section on [reduced application functionality](#reduced-application-functionality).</span></span>

### <a name="failure-of-a-dependent-service"></a><span data-ttu-id="60d79-182">Sikertelen volt-e a függő szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="60d79-182">Failure of a dependent service</span></span>
<span data-ttu-id="60d79-183">Azure számos olyan szolgáltatásokat biztosít, rendszeres leállásra is.</span><span class="sxs-lookup"><span data-stu-id="60d79-183">Azure provides many services that can experience periodic downtime.</span></span> <span data-ttu-id="60d79-184">Például [Azure Redis Cache](https://azure.microsoft.com/services/cache/) egy több-bérlős szolgáltatás, amely az alkalmazás gyorsítótárazási képességeket biztosít.</span><span class="sxs-lookup"><span data-stu-id="60d79-184">For example, [Azure Redis Cache](https://azure.microsoft.com/services/cache/) is a multi-tenant service which provides caching capabilities to your application.</span></span> <span data-ttu-id="60d79-185">Fontos figyelembe venni, mi történik az alkalmazásban, ha a függő szolgáltatás nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="60d79-185">It's important to consider what happens in your application if the dependent service is unavailable.</span></span> <span data-ttu-id="60d79-186">Az sokféleképpen ebben a forgatókönyvben hasonlít a hálózati kimaradás forgatókönyv.</span><span class="sxs-lookup"><span data-stu-id="60d79-186">In many ways, this scenario is similar to the network outage scenario.</span></span> <span data-ttu-id="60d79-187">Azonban annak eldöntéséhez, hogy minden egyes szolgáltatás egymástól függetlenül az általános tervhez lehetséges fejlesztései eredményez.</span><span class="sxs-lookup"><span data-stu-id="60d79-187">However, considering each service independently results in potential improvements to your overall plan.</span></span>

<span data-ttu-id="60d79-188">Azure Redis Cache belül a felhő szolgáltatástelepítés, amely vész-helyreállítási előnyöket biztosítja az alkalmazás a gyorsítótárazást biztosítja.</span><span class="sxs-lookup"><span data-stu-id="60d79-188">Azure Redis Cache provides caching to your application from within your cloud service deployment, which provides disaster recovery benefits.</span></span> <span data-ttu-id="60d79-189">A szolgáltatás először, most már fut a szerepköröket, amelyek a helyi, a központi telepítés.</span><span class="sxs-lookup"><span data-stu-id="60d79-189">First, the service now runs on roles that are local to your deployment.</span></span> <span data-ttu-id="60d79-190">Ezért még jobban megfigyelése és kezelése a gyorsítótár állapotát a felügyeleti folyamatok a felhőalapú szolgáltatás részeként.</span><span class="sxs-lookup"><span data-stu-id="60d79-190">Therefore, you're better able to monitor and manage the status of the cache as part of your overall management processes for the cloud service.</span></span> <span data-ttu-id="60d79-191">Az ilyen típusú gyorsítótár is közzétesz az új funkciók, például a magas rendelkezésre állás a gyorsítótárazott adatokat, amely megőrzi a gyorsítótárazott adatokat, megőrizve a többi csomóponton duplikált egyetlen csomópont meghibásodásakor.</span><span class="sxs-lookup"><span data-stu-id="60d79-191">This type of caching also exposes new features such as high availability for cached data, which preserves cached data if a single node fails by maintaining duplicate copies on other nodes.</span></span>

<span data-ttu-id="60d79-192">Vegye figyelembe, hogy a magas rendelkezésre állású csökkenti a teljesítményt, és növeli a késés, mivel az írási műveletek kell is upedate másodlagos példányokra.</span><span class="sxs-lookup"><span data-stu-id="60d79-192">Note that high availability decreases throughput and increases latency because write operations must also upedate any secondary copies.</span></span> <span data-ttu-id="60d79-193">A gyorsítótárazott adatok tárolásához szükséges memória hatékonyan kettőzni, amely kell figyelembe kell venni a kapacitástervezés során.</span><span class="sxs-lookup"><span data-stu-id="60d79-193">The amount of memory required to store the cached data is effectively doubled, which must be taken into account during capacity planning.</span></span>  <span data-ttu-id="60d79-194">Ez a példa bemutatja, hogy minden függő szolgáltatás előfordulhat, hogy olyan képességekkel rendelkeznek, javítja az általános rendelkezésre állására, és a végzetes hibák elleni védelem.</span><span class="sxs-lookup"><span data-stu-id="60d79-194">This example demonstrates that each dependent service might have capabilities that improve your overall availability and resistance to catastrophic failures.</span></span>

<span data-ttu-id="60d79-195">Az egyes függő szolgáltatás használata esetén meg kell ismernie a szolgáltatás szüneteltetése következményekkel járhat.</span><span class="sxs-lookup"><span data-stu-id="60d79-195">With each dependent service, you should understand the implications of a service disruption.</span></span> <span data-ttu-id="60d79-196">A gyorsítótárazási példában esetleg az adatok közvetlenül elérje adatbázis addig, amíg a gyorsítótár visszaállítását.</span><span class="sxs-lookup"><span data-stu-id="60d79-196">In the caching example, it might be possible to access the data directly from a database until you restore your cache.</span></span> <span data-ttu-id="60d79-197">A csökkentett teljesítményt, ugyanakkor biztosítható a teljes körű hozzáférés az alkalmazásadatok eredményezne.</span><span class="sxs-lookup"><span data-stu-id="60d79-197">This would result in reduced performance while providing full access to application data.</span></span>

### <a name="region-wide-service-disruption"></a><span data-ttu-id="60d79-198">A régióban kiterjedő szolgáltatáskiesés várható</span><span class="sxs-lookup"><span data-stu-id="60d79-198">Region-wide service disruption</span></span>
<span data-ttu-id="60d79-199">A korábbi hibák elsősorban törölték az Azure-régión belül kezelhető hibák.</span><span class="sxs-lookup"><span data-stu-id="60d79-199">The previous failures have primarily been failures that can be managed within the same Azure region.</span></span> <span data-ttu-id="60d79-200">Azonban el kell készítenie is, hogy van-e a szolgáltatás szüneteltetése a teljes régió lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="60d79-200">However, you must also prepare for the possibility that there is a service disruption of the entire region.</span></span> <span data-ttu-id="60d79-201">A régió kiterjedő szolgáltatás szüneteltetése akkor fordul elő, ha a helyileg redundáns másolatait az adatok nem érhetők el.</span><span class="sxs-lookup"><span data-stu-id="60d79-201">If a region-wide service disruption occurs, the locally redundant copies of your data are not available.</span></span> <span data-ttu-id="60d79-202">Ha engedélyezett a georeplikáció, nincsenek a blobok és egy másik régióban táblák három további példányokat.</span><span class="sxs-lookup"><span data-stu-id="60d79-202">If you have enabled geo-replication, there are three additional copies of your blobs and tables in a different region.</span></span> <span data-ttu-id="60d79-203">Ha Microsoft deklarálja a régió elveszett, amelyek Azure összes DNS-bejegyzéseket, a georeplikált régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-203">If Microsoft declares the region lost, Azure remaps all of the DNS entries to the geo-replicated region.</span></span>

> [!NOTE]
> <span data-ttu-id="60d79-204">Vegye figyelembe, hogy nem tudja befolyásolni bármely ezt a folyamatot, és azt csak a régió kiterjedő szolgáltatáskimaradás történik.</span><span class="sxs-lookup"><span data-stu-id="60d79-204">Be aware that you don't have any control over this process, and it will occur only for region-wide service disruption.</span></span> <span data-ttu-id="60d79-205">Emiatt más alkalmazás-specifikus biztonsági stratégiák a legmagasabb rendelkezésre állásának eléréséhez kell támaszkodnak.</span><span class="sxs-lookup"><span data-stu-id="60d79-205">Because of this, you must rely on other application-specific backup strategies to achieve the highest level of availability.</span></span> <span data-ttu-id="60d79-206">További információkért lásd [vész-helyreállítási adatok stratégiák](#data-strategies-for-disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="60d79-206">For more information, see the section on [data strategies for disaster recovery](#data-strategies-for-disaster-recovery).</span></span>
> 
> 

### <a name="azure-wide-service-disruption"></a><span data-ttu-id="60d79-207">Azure kiterjedő szolgáltatáskiesés várható</span><span class="sxs-lookup"><span data-stu-id="60d79-207">Azure-wide service disruption</span></span>
<span data-ttu-id="60d79-208">A vészhelyreállítás megtervezése, figyelembe kell vennie a lehetséges katasztrófák teljes skáláját.</span><span class="sxs-lookup"><span data-stu-id="60d79-208">In disaster planning, you must consider the entire range of possible disasters.</span></span> <span data-ttu-id="60d79-209">Minden Azure-régió egyidejűleg járna a legsúlyosabb károkat okozó szolgáltatás szolgáltatások közül.</span><span class="sxs-lookup"><span data-stu-id="60d79-209">One of the most severe service disruptions would involve all Azure regions simultaneously.</span></span> <span data-ttu-id="60d79-210">Akárcsak más service üzemzavarokhoz vezethet, dönthet ebben az esetben elfogadja az ideiglenes állásidő kockázatát.</span><span class="sxs-lookup"><span data-stu-id="60d79-210">As with other service disruptions, you might decide to accept the risk of temporary downtime in that event.</span></span> <span data-ttu-id="60d79-211">Széles körű szolgáltatás zavarokat régiók kiterjedő olyan sokkal ritkább mint függő szolgáltatások vagy egyetlen régiók elkülönített szolgáltatás vezetnének.</span><span class="sxs-lookup"><span data-stu-id="60d79-211">Widespread service disruptions that span regions are much rarer than isolated service disruptions involving dependent services or single regions.</span></span>

<span data-ttu-id="60d79-212">Azonban dönthet úgy, hogy bizonyos létfontosságú alkalmazások számára a több területi szolgáltatás szüneteltetése biztonsági mentési terv szükséges.</span><span class="sxs-lookup"><span data-stu-id="60d79-212">However, you may decide that certain mission-critical applications require a backup plan for a multi-region service disruption.</span></span> <span data-ttu-id="60d79-213">A terv állhatnak szolgáltatások feladatátvétele egy [alternatív felhő](#alternative-cloud) vagy egy [a helyszíni és hibrid felhőalapú megoldás](#hybrid-on-premises-and-cloud-solution).</span><span class="sxs-lookup"><span data-stu-id="60d79-213">This plan might include failing over to services in an [alternative cloud](#alternative-cloud) or a [hybrid on-premises and cloud solution](#hybrid-on-premises-and-cloud-solution).</span></span>

### <a name="reduced-application-functionality"></a><span data-ttu-id="60d79-214">Csökkentett az alkalmazás funkciói</span><span class="sxs-lookup"><span data-stu-id="60d79-214">Reduced application functionality</span></span>
<span data-ttu-id="60d79-215">Egy jól megtervezett alkalmazás szolgáltatásokról, amelyek egymással kommunikálnak, ha annak a lazán összekapcsolt adatcsere végrehajtása általában használ.</span><span class="sxs-lookup"><span data-stu-id="60d79-215">A well-designed application typically uses services that communicate with each other though the implementation of loosely coupled information-interchange patterns.</span></span> <span data-ttu-id="60d79-216">A vész-Helyreállítási mobilbarát az alkalmazáshoz a szolgáltatási szintű a feladatkörök elkülönítése.</span><span class="sxs-lookup"><span data-stu-id="60d79-216">A DR-friendly application requires separation of responsibilities at the service level.</span></span> <span data-ttu-id="60d79-217">Ez megakadályozza, hogy a megszakítás a függő szolgáltatás a teljes alkalmazás leáll.</span><span class="sxs-lookup"><span data-stu-id="60d79-217">This prevents the disruption of a dependent service from bringing down the entire application.</span></span> <span data-ttu-id="60d79-218">Az Y vállalatot vegye figyelembe például kereskedelmi webalkalmazás. A következő modulok előfordulhat, hogy jelent a alkalmazás:</span><span class="sxs-lookup"><span data-stu-id="60d79-218">For example, consider a web commerce application for Company Y. The following modules might constitute the application:</span></span>

* <span data-ttu-id="60d79-219">**Termékkatalógus** lehetővé teszi, hogy a felhasználók számára a termékek.</span><span class="sxs-lookup"><span data-stu-id="60d79-219">**Product Catalog** allows users to browse products.</span></span>
* <span data-ttu-id="60d79-220">**Vásárlás bevásárlókocsiból** lehetővé teszi a felhasználóknak a saját kosár termékek hozzáadása/eltávolítása.</span><span class="sxs-lookup"><span data-stu-id="60d79-220">**Shopping Cart** allows users to add/remove products in their shopping cart.</span></span>
* <span data-ttu-id="60d79-221">**Rendelés állapot** felhasználói rendelések szállítási állapotát jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="60d79-221">**Order Status** shows the shipping status of user orders.</span></span>
* <span data-ttu-id="60d79-222">**Rendezés küldésének** finalizes a vásárlásra szolgáló munkamenet által a fizetési rendelés.</span><span class="sxs-lookup"><span data-stu-id="60d79-222">**Order Submission** finalizes the shopping session by submitting the order with payment.</span></span>
* <span data-ttu-id="60d79-223">**Feldolgozási sorrendben** érvényesíti a ahhoz, hogy az adatok integritását, és ellenőrzi a mennyiség rendelkezésre állási.</span><span class="sxs-lookup"><span data-stu-id="60d79-223">**Order Processing** validates the order for data integrity and performs a quantity availability check.</span></span>

<span data-ttu-id="60d79-224">Amikor egy szolgáltatásfüggőség az alkalmazás nem érhető el, hogyan a szolgáltatás működik addig, amíg a függőség helyreállítja?</span><span class="sxs-lookup"><span data-stu-id="60d79-224">When a service dependency in this application becomes unavailable, how does the service function until the dependency recovers?</span></span> <span data-ttu-id="60d79-225">Tetszetős rendszer megvalósítja az elkülönítési határokat tervezési időben, és futásidőben, a feladatkörök elkülönítése keresztül.</span><span class="sxs-lookup"><span data-stu-id="60d79-225">A well-designed system implements isolation boundaries through separation of responsibilities, both at design time and at runtime.</span></span> <span data-ttu-id="60d79-226">Minden helyreállítható és helyreállíthatatlan hiba rendezheti.</span><span class="sxs-lookup"><span data-stu-id="60d79-226">You can categorize every failure as recoverable and non-recoverable.</span></span> <span data-ttu-id="60d79-227">Helyrehozhatatlan hiba megjelenik a le a szolgáltatást, de mérséklésére vonatkozó útmutatások egy helyreállíthatatlan hiba alternatívák keresztül.</span><span class="sxs-lookup"><span data-stu-id="60d79-227">Non-recoverable errors will bring down the service, but you can mitigate a recoverable error through alternatives.</span></span> <span data-ttu-id="60d79-228">Bizonyos problémák automatikus hibák kezelése és a másodlagos műveletek átlátható a felhasználó.</span><span class="sxs-lookup"><span data-stu-id="60d79-228">Certain problems addressed by automatically handling faults and taking alternate actions are transparent to the user.</span></span> <span data-ttu-id="60d79-229">A több súlyos szolgáltatás szüneteltetése során az alkalmazás teljesen elérhetetlenné, előfordulhat, hogy lesz.</span><span class="sxs-lookup"><span data-stu-id="60d79-229">During a more serious service disruption, the application might be completely unavailable.</span></span> <span data-ttu-id="60d79-230">A harmadik lehetőség egy továbbra is csökkentett felhasználói kérelmek kezelését.</span><span class="sxs-lookup"><span data-stu-id="60d79-230">A third option is to continue handling user requests with reduced functionality.</span></span>

<span data-ttu-id="60d79-231">Például ha az adatbázis üzemeltetéséhez rendelések leáll, a feldolgozási sorrendben szolgáltatás nem képes a értékesítési tranzakciók feldolgozásához.</span><span class="sxs-lookup"><span data-stu-id="60d79-231">For instance, if the database for hosting orders goes down, the Order Processing service loses its ability to process sales transactions.</span></span> <span data-ttu-id="60d79-232">Attól függően, hogy a architektúrára épülő nehéz vagy lehetetlen folytatja az alkalmazás a kérelem és a feldolgozási sorrendben szolgáltatások lehet.</span><span class="sxs-lookup"><span data-stu-id="60d79-232">Depending on the architecture, it might be difficult or impossible for the Order Submission and Order Processing services of the application to continue.</span></span> <span data-ttu-id="60d79-233">Ha az alkalmazás nem célja, hogy ez a forgatókönyv kezelni, a teljes alkalmazás előfordulhat, hogy kapcsolat nélkül.</span><span class="sxs-lookup"><span data-stu-id="60d79-233">If the application is not designed to handle this scenario, the entire application might go offline.</span></span> <span data-ttu-id="60d79-234">Azonban ha a termék adatok mentése más helyre, majd a termékkatalógus modul továbbra is használhatók termékek megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="60d79-234">However, if the product data is stored in a different location, then the Product Catalog module can still be used for viewing products.</span></span> <span data-ttu-id="60d79-235">Azonban az alkalmazás más részei nem érhetők el, például a rendezés vagy a készlet lekérdezések.</span><span class="sxs-lookup"><span data-stu-id="60d79-235">However, other parts of the application are unavailable, such as ordering or inventory queries.</span></span>

<span data-ttu-id="60d79-236">Milyen csökkentett az alkalmazás funkciói elérhető legmegfelelőbb egyben üzleti döntés és műszaki döntést hoznak.</span><span class="sxs-lookup"><span data-stu-id="60d79-236">Deciding what reduced application functionality is available is both a business decision and a technical decision.</span></span> <span data-ttu-id="60d79-237">El kell döntenie, hogyan az alkalmazás tájékoztatja a felhasználókat az átmeneti problémákat.</span><span class="sxs-lookup"><span data-stu-id="60d79-237">You must decide how the application will inform the users of any temporary problems.</span></span> <span data-ttu-id="60d79-238">A fenti példában az alkalmazás lehetővé teheti termékek megtekintése és hozzáadását egy kosár.</span><span class="sxs-lookup"><span data-stu-id="60d79-238">In the example above, the application might allow viewing products and adding them to a shopping cart.</span></span> <span data-ttu-id="60d79-239">Azonban amikor a felhasználó megkísérli a vásárlás, az alkalmazás értesíti a felhasználót, hogy a rendezési funkció átmenetileg nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="60d79-239">However, when the user attempts to make a purchase, the application notifies the user that the ordering functionality is temporarily unavailable.</span></span> <span data-ttu-id="60d79-240">Ez ideális, ha az ügyfél nem, de akadályozza meg az alkalmazásszintű üzemkimaradás időtartamát.</span><span class="sxs-lookup"><span data-stu-id="60d79-240">This isn't ideal for the customer, but it does prevent an application-wide service disruption.</span></span>

## <a name="data-strategies-for-disaster-recovery"></a><span data-ttu-id="60d79-241">Adatok stratégiák katasztrófa utáni helyreállítás</span><span class="sxs-lookup"><span data-stu-id="60d79-241">Data strategies for disaster recovery</span></span>
<span data-ttu-id="60d79-242">Megfelelő adatok kezelése az egyik kihívást szempontja, hogy a vész-helyreállítási terv.</span><span class="sxs-lookup"><span data-stu-id="60d79-242">Proper data handling is a challenging aspect of a disaster recovery plan.</span></span> <span data-ttu-id="60d79-243">A helyreállítási folyamat során adatok helyreállítása általában a legtöbb időt vesz igénybe.</span><span class="sxs-lookup"><span data-stu-id="60d79-243">During the recovery process, data restoration typically takes the most time.</span></span> <span data-ttu-id="60d79-244">Funkció csökkenti a különböző választás kedvezőtlen nehéz kihívásai az adat-helyreállítás sikertelen, és konzisztencia-meghibásodás után.</span><span class="sxs-lookup"><span data-stu-id="60d79-244">Different choices for reducing functionality result in difficult challenges for data recovery from failure and consistency after failure.</span></span>

<span data-ttu-id="60d79-245">Meg kell vizsgálni egy, a helyreállítási és karbantartása az alkalmazásadatok egy példányát kell.</span><span class="sxs-lookup"><span data-stu-id="60d79-245">One consideration is the need to restore or maintain a copy of the application’s data.</span></span> <span data-ttu-id="60d79-246">Ezeket az adatokat fogja használni a hivatkozást és a tranzakciós célból egy másodlagos helyen.</span><span class="sxs-lookup"><span data-stu-id="60d79-246">You will use this data for reference and transactional purposes at a secondary site.</span></span> <span data-ttu-id="60d79-247">Egy helyszíni telepítéséhez szükséges egy drága és hosszadalmas tervezési folyamat végrehajtásához egy több-régió vész-helyreállítási stratégiát.</span><span class="sxs-lookup"><span data-stu-id="60d79-247">An on-premises deployment requires an expensive and lengthy planning process to implement a multiple-region disaster recovery strategy.</span></span> <span data-ttu-id="60d79-248">A legtöbb szolgáltatók, beleértve az Azure-ban kényelmesen, könnyen engedélyezése az alkalmazások központi telepítését figyelemmel több területre.</span><span class="sxs-lookup"><span data-stu-id="60d79-248">Conveniently, most cloud providers, including Azure, readily allow the deployment of applications to multiple regions.</span></span> <span data-ttu-id="60d79-249">Ezek a területek földrajzilag terjesztése úgy, hogy a több-régió szolgáltatáskiesés várható nagyon ritkán kell lennie.</span><span class="sxs-lookup"><span data-stu-id="60d79-249">These regions are geographically distributed in such a way that multiple-region service disruption should be extremely rare.</span></span> <span data-ttu-id="60d79-250">Az adatok régiók közötti kezelése stratégia egyike a sikeres működés érdekében minden vész-helyreállítási terv tényezőkről.</span><span class="sxs-lookup"><span data-stu-id="60d79-250">The strategy for handling data across regions is one of the contributing factors for the success of any disaster recovery plan.</span></span>

<span data-ttu-id="60d79-251">Az alábbi szakaszok ismertetik a vész-helyreállítással kapcsolatos adatok biztonsági mentése, a referenciaadatok és a tranzakciós adatok.</span><span class="sxs-lookup"><span data-stu-id="60d79-251">The following sections discuss disaster recovery techniques related to data backups, reference data, and transactional data.</span></span>

### <a name="backup-and-restore"></a><span data-ttu-id="60d79-252">Biztonsági mentés és visszaállítás</span><span class="sxs-lookup"><span data-stu-id="60d79-252">Backup and restore</span></span>
<span data-ttu-id="60d79-253">Az alkalmazásadatok rendszeres biztonsági mentések egyes vész-helyreállítási eljárással tud támogatni.</span><span class="sxs-lookup"><span data-stu-id="60d79-253">Regular backups of application data can support some disaster recovery scenarios.</span></span> <span data-ttu-id="60d79-254">Eltérőek a tárolási erőforrások különböző eljárásokra van szükség.</span><span class="sxs-lookup"><span data-stu-id="60d79-254">Different storage resources require different techniques.</span></span>

#### <a name="sql-database"></a><span data-ttu-id="60d79-255">SQL Database</span><span class="sxs-lookup"><span data-stu-id="60d79-255">SQL Database</span></span>
<span data-ttu-id="60d79-256">Alapszintű, Standard és Premium SQL adatbázis rétegek kihasználhatja a pont időponthoz kötött visszaállítás az adatbázis helyreállításához.</span><span class="sxs-lookup"><span data-stu-id="60d79-256">For the Basic, Standard, and Premium SQL Database tiers, you can take advantage of point-in-time restore to recover your database.</span></span> <span data-ttu-id="60d79-257">További információkért lásd: [áttekintése: üzleti folytonossági és az adatbázis katasztrófa utáni helyreállítás az SQL Database Felhőbeli](/azure/sql-database/sql-database-business-continuity/).</span><span class="sxs-lookup"><span data-stu-id="60d79-257">For more information, see [Overview: Cloud business continuity and database disaster recovery with SQL Database](/azure/sql-database/sql-database-business-continuity/).</span></span> <span data-ttu-id="60d79-258">Egy másik lehetőség egy SQL-adatbázis aktív Georeplikációt használja.</span><span class="sxs-lookup"><span data-stu-id="60d79-258">Another option is to use Active Geo-Replication for SQL Database.</span></span> <span data-ttu-id="60d79-259">Ez automatikusan azonos Azure-régióban vagy akár egy másik Azure-régiót másodlagos adatbázisok adatbázis-változást visszaállított replikálja.</span><span class="sxs-lookup"><span data-stu-id="60d79-259">This automatically replicates database changes to secondary databases in the same Azure region or even in a different Azure region.</span></span> <span data-ttu-id="60d79-260">Ennek lehetséges alternatívát a néhány ebben a cikkben bemutatott több kézi adatok szinkronizálási módszert.</span><span class="sxs-lookup"><span data-stu-id="60d79-260">This provides a potential alternative to some of the more manual data synchronization techniques presented in this article.</span></span> <span data-ttu-id="60d79-261">További információkért lásd: [áttekintése: SQL adatbázis aktív Georeplikáció](/azure/sql-database/sql-database-geo-replication-overview/).</span><span class="sxs-lookup"><span data-stu-id="60d79-261">For more information, see [Overview: SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/).</span></span>

<span data-ttu-id="60d79-262">Is több manuális módszerrel a biztonsági mentéshez használni, és állítsa vissza.</span><span class="sxs-lookup"><span data-stu-id="60d79-262">You can also use a more manual approach for backup and restore.</span></span> <span data-ttu-id="60d79-263">Az adatbázis-másolat paranccsal tranzakciós konzisztencia az adatbázis biztonsági másolatának létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="60d79-263">Use the DATABASE COPY command to create a backup copy of the database with transactional consistency.</span></span> <span data-ttu-id="60d79-264">Az import/export szolgáltatásról az Azure SQL-adatbázis, amely támogatja a exportáló adatbázisokat az Azure Blob storage szolgáltatásban tárolt BACPAC fájlok (az adatbázis-séma fájljait és kapcsolódó adatait tartalmazó tömörített fájlok) is használhatja.</span><span class="sxs-lookup"><span data-stu-id="60d79-264">You can also use the import/export service of Azure SQL Database, which supports exporting databases to BACPAC files (compressed files containing your database schema and associated data) that are stored in Azure Blob storage.</span></span>

<span data-ttu-id="60d79-265">A beépített redundanciát az Azure Storage két replikákat a biztonságimásolat-fájl ugyanabban a régióban hoz létre.</span><span class="sxs-lookup"><span data-stu-id="60d79-265">The built-in redundancy of Azure Storage creates two replicas of the backup file in the same region.</span></span> <span data-ttu-id="60d79-266">Azonban fut, a biztonsági mentés gyakoriságát határozza meg, a helyreállítási Időkorlát, amely a vészhelyreállítási forgatókönyveket elveszhetnek adatok mennyisége.</span><span class="sxs-lookup"><span data-stu-id="60d79-266">However, the frequency of running the backup process determines your RPO, which is the amount of data you might lose in disaster scenarios.</span></span> <span data-ttu-id="60d79-267">Tegyük fel, hogy készítsen biztonsági mentést óránként tetején, és a katasztrófa történik az óra elején két percet.</span><span class="sxs-lookup"><span data-stu-id="60d79-267">For example, imagine that you perform a backup at the top of each hour, and a disaster occurs two minutes before the top of the hour.</span></span> <span data-ttu-id="60d79-268">58 perc után utolsó biztonsági másolat rögzített adatok elvesznek.</span><span class="sxs-lookup"><span data-stu-id="60d79-268">You lose 58 minutes of data recorded after the last backup was performed.</span></span> <span data-ttu-id="60d79-269">Emellett a régió kiterjedő szolgáltatás szüneteltetése elleni védelem érdekében, kell másolnia a BACPAC fájlok egy másik régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-269">Also, to protect against a region-wide service disruption, you should copy the BACPAC files to an alternate region.</span></span> <span data-ttu-id="60d79-270">Ezután lehetősége nyílik a visszaállításának azokat a biztonsági másolatok a másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-270">You then have the option of restoring those backups in the alternate region.</span></span> <span data-ttu-id="60d79-271">További részletekért lásd: [áttekintése: üzleti folytonossági és az adatbázis katasztrófa utáni helyreállítás az SQL Database Felhőbeli](/azure/sql-database/sql-database-business-continuity/).</span><span class="sxs-lookup"><span data-stu-id="60d79-271">For more details, see [Overview: Cloud business continuity and database disaster recovery with SQL Database](/azure/sql-database/sql-database-business-continuity/).</span></span>

#### <a name="azure-storage"></a><span data-ttu-id="60d79-272">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="60d79-272">Azure Storage</span></span>
<span data-ttu-id="60d79-273">Az Azure Storage egy egyéni biztonsági mentési folyamat kifejlesztése, vagy használja sok külső biztonsági mentési eszközök egyikét.</span><span class="sxs-lookup"><span data-stu-id="60d79-273">For Azure Storage, you can develop a custom backup process or use one of many third-party backup tools.</span></span> <span data-ttu-id="60d79-274">Ne feledje, hogy a legtöbb alkalmazás tervek további összetett szolgáltatásokkal amikor a tárolási erőforrások egymástól hivatkozás.</span><span class="sxs-lookup"><span data-stu-id="60d79-274">Note that most application designs have additional complexities where storage resources reference each other.</span></span> <span data-ttu-id="60d79-275">Tegyük fel, amely rendelkezik egy olyan oszlop, hogy az Azure Storage egy blobba SQL-adatbázis.</span><span class="sxs-lookup"><span data-stu-id="60d79-275">For example, consider a SQL database that has a column that links to a blob in Azure Storage.</span></span> <span data-ttu-id="60d79-276">Ha a biztonsági mentések egy időben történik, az adatbázis kell blob, amely nem készült biztonsági másolat a meghibásodás előtt mutató hivatkozások.</span><span class="sxs-lookup"><span data-stu-id="60d79-276">If the backups do not happen simultaneously, the database might have a pointer to a blob that was not backed up before the failure.</span></span> <span data-ttu-id="60d79-277">Az alkalmazás vagy a vész-helyreállítási terv folyamatok a inkonzisztenciát kezelni a helyreállítás után meg kell valósítania.</span><span class="sxs-lookup"><span data-stu-id="60d79-277">The application or disaster recovery plan must implement processes to handle this inconsistency after a recovery.</span></span>

#### <a name="other-data-platforms"></a><span data-ttu-id="60d79-278">Más adatok platformok</span><span class="sxs-lookup"><span data-stu-id="60d79-278">Other data platforms</span></span>
<span data-ttu-id="60d79-279">Egyéb infrastruktúrával,--szolgáltatás (IaaS) tárolt adatok platformok, például a Elasticsearch vagy a MongoDB, a saját képességek és szempontok az integrált biztonsági mentési és visszaállítási folyamat létrehozásakor.</span><span class="sxs-lookup"><span data-stu-id="60d79-279">Other infrastructure-as-a-service (IaaS) hosted data platforms, such as Elasticsearch or MongoDB, have their own capabilities and considerations when creating an integrated backup and restore process.</span></span> <span data-ttu-id="60d79-280">Ezen adatok platformok az általános ajánljuk, hogy bármely natív vagy elérhető integrációs-alapú replikálás vagy pillanatfelvételeinek képességeit.</span><span class="sxs-lookup"><span data-stu-id="60d79-280">For these data platforms, the general recommendation is to use any native or available integration-based replication or snapshotting capabilities.</span></span> <span data-ttu-id="60d79-281">Ha ezekre a képességekre nem létezik vagy nem megfelelő, akkor érdemes Azure Backup szolgáltatás vagy a lemez felügyelt/nem felügyelt pillanatfelvételek alkalmazásadatok időpontban másolatának létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="60d79-281">If those capabilities do not exist or are not suitable, then consider using Azure Backup Service or managed/unmanaged disk snapshots to create a point-in-time copy of application data.</span></span> <span data-ttu-id="60d79-282">Minden esetben fontos, különösen akkor, ha az alkalmazás adatait is több fájlok rendszer, vagy ha több meghajtó van egyesítve, a kötet kezelők vagy szoftveres RAID egyetlen fájlrendszer konzisztens biztonsági másolatok, eléréséhez, hogyan lehet.</span><span class="sxs-lookup"><span data-stu-id="60d79-282">In all cases, it’s important to determine how to achieve consistent backups, especially when application data spans multiple files systems, or when multiple drives are combined into a single file system using volume managers or software-based RAID.</span></span>

### <a name="reference-data-pattern-for-disaster-recovery"></a><span data-ttu-id="60d79-283">Vész-helyreállítási hivatkozás adatmintát</span><span class="sxs-lookup"><span data-stu-id="60d79-283">Reference data pattern for disaster recovery</span></span>
<span data-ttu-id="60d79-284">Referenciaadatok, amely támogatja az alkalmazás funkciói csak olvasható adatok.</span><span class="sxs-lookup"><span data-stu-id="60d79-284">Reference data is read-only data that supports application functionality.</span></span> <span data-ttu-id="60d79-285">Ez általában nem változnak gyakran.</span><span class="sxs-lookup"><span data-stu-id="60d79-285">It typically does not change frequently.</span></span> <span data-ttu-id="60d79-286">Bár a biztonsági mentési és visszaállítási régió kiterjedő szolgáltatás zavarokat egy metódust, a RTO viszonylag hosszú.</span><span class="sxs-lookup"><span data-stu-id="60d79-286">Although backup and restore is one method to handle region-wide service disruptions, the RTO is relatively long.</span></span> <span data-ttu-id="60d79-287">A másodlagos régióba alkalmazást telepít központilag, néhány stratégiák javítható a RTO a referenciaadatoknál.</span><span class="sxs-lookup"><span data-stu-id="60d79-287">When you deploy the application to a secondary region, some strategies can improve the RTO for reference data.</span></span>

<span data-ttu-id="60d79-288">Mivel adatváltozásokat hivatkozhat ritkán, javíthatja a RTO a referenciaadatok másodlagos régióban az állandó másolatának megtartásával.</span><span class="sxs-lookup"><span data-stu-id="60d79-288">Because reference data changes infrequently, you can improve the RTO by maintaining a permanent copy of the reference data in the secondary region.</span></span> <span data-ttu-id="60d79-289">Ez megszünteti a biztonsági másolatok visszaállítása katasztrófa esetén szükséges időt.</span><span class="sxs-lookup"><span data-stu-id="60d79-289">This eliminates the time required to restore backups in the event of a disaster.</span></span> <span data-ttu-id="60d79-290">A több-régió vész-helyreállítási követelmények teljesítéséhez az alkalmazás és a referenciaadatok egyszerre több régióba kell telepítenie.</span><span class="sxs-lookup"><span data-stu-id="60d79-290">To meet the multiple-region disaster recovery requirements, you must deploy the application and the reference data together in multiple regions.</span></span> <span data-ttu-id="60d79-291">A [hivatkozás adatmintát a magas rendelkezésre állású](high-availability-azure-applications.md#reference-data-pattern-for-high-availability), referenciaadatok szerepe magát, a külső tárhelyen, illetve kombinációjából is telepíthet.</span><span class="sxs-lookup"><span data-stu-id="60d79-291">As mentioned in [Reference data pattern for high availability](high-availability-azure-applications.md#reference-data-pattern-for-high-availability), you can deploy reference data to the role itself, to external storage, or to a combination of both.</span></span>

<span data-ttu-id="60d79-292">A hivatkozás adatok telepítési modell belül a számítási csomópontok implicit módon a vész helyreállítási követelményének eleget tesz.</span><span class="sxs-lookup"><span data-stu-id="60d79-292">The reference data deployment model within compute nodes implicitly satisfies the disaster recovery requirements.</span></span> <span data-ttu-id="60d79-293">Hivatkozási adatokat az SQL Database történő szükséges központi telepítését a referencia-adatok másolatát mindegyik régióhoz.</span><span class="sxs-lookup"><span data-stu-id="60d79-293">Reference data deployment to SQL Database requires that you deploy a copy of the reference data to each region.</span></span> <span data-ttu-id="60d79-294">Az azonos stratégia Azure Storage vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="60d79-294">The same strategy applies to Azure Storage.</span></span> <span data-ttu-id="60d79-295">Minden elsődleges és másodlagos régióban az Azure Storage tárolt referenciaadatok egy példányát kell telepítenie.</span><span class="sxs-lookup"><span data-stu-id="60d79-295">You must deploy a copy of any reference data that's stored in Azure Storage to the primary and secondary regions.</span></span>

![Hivatkozás adatok közzétételét az elsődleges és másodlagos régiók](./images/disaster-recovery-azure-applications/reference-data-publication-to-both-primary-and-secondary-regions.png)

<span data-ttu-id="60d79-297">Meg kell valósítani a saját alkalmazás-specifikus biztonsági mentési rutinok minden adathoz, beleértve a referenciaadatoknál.</span><span class="sxs-lookup"><span data-stu-id="60d79-297">You must implement your own application-specific backup routines for all data, including reference data.</span></span> <span data-ttu-id="60d79-298">Georeplikált másolatok régiók között csak egy régió kiterjedő szolgáltatáskiesés várható használnak.</span><span class="sxs-lookup"><span data-stu-id="60d79-298">Geo-replicated copies across regions are used only in a region-wide service disruption.</span></span> <span data-ttu-id="60d79-299">Hibaelhárításra megelőzése érdekében telepítenie kell az alkalmazásadatok kritikus fontosságú részei a másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="60d79-299">To prevent extended downtime, deploy the mission-critical parts of the application’s data to the secondary region.</span></span> <span data-ttu-id="60d79-300">Ez a topológia példáért lásd: a [aktív-passzív modell](#active-passive).</span><span class="sxs-lookup"><span data-stu-id="60d79-300">For an example of this topology, see the [active-passive model](#active-passive).</span></span>

### <a name="transactional-data-pattern-for-disaster-recovery"></a><span data-ttu-id="60d79-301">Vész-helyreállítási tranzakciós adatmintát</span><span class="sxs-lookup"><span data-stu-id="60d79-301">Transactional data pattern for disaster recovery</span></span>
<span data-ttu-id="60d79-302">Egy teljesen működőképes katasztrófa mód stratégia végrehajtásához a tranzakciós adatokat a másodlagos régióba aszinkron replikációját.</span><span class="sxs-lookup"><span data-stu-id="60d79-302">Implementation of a fully functional disaster mode strategy requires asynchronous replication of the transactional data to the secondary region.</span></span> <span data-ttu-id="60d79-303">A gyakorlati időablakokat, amelyen belül a replikáció akkor fordulhat elő, az alkalmazás RPO jellemzői határozza meg.</span><span class="sxs-lookup"><span data-stu-id="60d79-303">The practical time windows within which the replication can occur will determine the RPO characteristics of the application.</span></span> <span data-ttu-id="60d79-304">Előfordulhat, hogy ilyenkor is helyreállíthatók az adatok a replikáció időszak alatt az elsődleges régióban megszakadt.</span><span class="sxs-lookup"><span data-stu-id="60d79-304">You might still recover the data that was lost from the primary region during the replication window.</span></span> <span data-ttu-id="60d79-305">Előfordulhat, hogy is el lehet a másodlagos régióba később egyesíteni.</span><span class="sxs-lookup"><span data-stu-id="60d79-305">You might also be able to merge with the secondary region later.</span></span>

<span data-ttu-id="60d79-306">A következő architektúra példák néhány ötleteket különböző módokon feladatátvétel esetén tranzakciós adatok kezelésére szolgálnak.</span><span class="sxs-lookup"><span data-stu-id="60d79-306">The following architecture examples provide some ideas on different ways of handling transactional data in a failover scenario.</span></span> <span data-ttu-id="60d79-307">Fontos megjegyezni, hogy ezek a példák nem teljes.</span><span class="sxs-lookup"><span data-stu-id="60d79-307">It's important to note that these examples are not exhaustive.</span></span> <span data-ttu-id="60d79-308">Például köztes tárolókba, mint például a várólisták előfordulhat, hogy az Azure SQL Database írni.</span><span class="sxs-lookup"><span data-stu-id="60d79-308">For example, intermediate storage locations such as queues might be replaced with Azure SQL Database.</span></span> <span data-ttu-id="60d79-309">Lehet, hogy magukat az üzenetsorok Azure Storage vagy Azure Service Bus-üzenetsorok (lásd: [Azure várólisták és a Service Bus-üzenetsorok - képest és ellentétben](/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted/)).</span><span class="sxs-lookup"><span data-stu-id="60d79-309">The queues themselves might be either Azure Storage or Azure Service Bus queues (see [Azure queues and Service Bus queues - compared and contrasted](/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted/)).</span></span> <span data-ttu-id="60d79-310">Kiszolgáló tárolási célhoz is változhat, például az Azure-táblákban SQL-adatbázis helyett.</span><span class="sxs-lookup"><span data-stu-id="60d79-310">Server storage destinations might also vary, such as Azure tables instead of SQL Database.</span></span> <span data-ttu-id="60d79-311">Feldolgozói szerepkörök emellett a különböző lépésekben közvetítőként lehet beszúrni.</span><span class="sxs-lookup"><span data-stu-id="60d79-311">In addition, worker roles might be inserted as intermediaries in various steps.</span></span> <span data-ttu-id="60d79-312">Nem pontosan emulálni ezek architektúrák, de kell figyelembe venni a különböző alternatívák tranzakciós adatok és a kapcsolódó modulok a helyreállítás célja.</span><span class="sxs-lookup"><span data-stu-id="60d79-312">The intent is not to emulate these architectures exactly, but to consider various alternatives in the recovery of transactional data and related modules.</span></span>

#### <a name="replication-of-transactional-data-in-preparation-for-disaster-recovery"></a><span data-ttu-id="60d79-313">A vész-helyreállítási előkészítése tranzakciós adatok replikálása</span><span class="sxs-lookup"><span data-stu-id="60d79-313">Replication of transactional data in preparation for disaster recovery</span></span>
<span data-ttu-id="60d79-314">Vegye figyelembe a tranzakciós adatok tárolásához Azure tárüzenetsort használó alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="60d79-314">Consider an application that uses Azure Storage queues to hold transactional data.</span></span> <span data-ttu-id="60d79-315">Ez lehetővé teszi, hogy a feldolgozói szerepkörök az adatbázishoz a leválasztott architektúrák tranzakciós adatok feldolgozására.</span><span class="sxs-lookup"><span data-stu-id="60d79-315">This allows worker roles to process the transactional data to the server database in a decoupled architecture.</span></span> <span data-ttu-id="60d79-316">Ehhez a tranzakciók valamilyen ideiglenes gyorsítótárazást, ha az előtér-szerepkörökhöz szükség a közvetlen lekérdezés az adatok.</span><span class="sxs-lookup"><span data-stu-id="60d79-316">This requires the transactions to use some form of temporary caching if the front-end roles require the immediate query of that data.</span></span> <span data-ttu-id="60d79-317">Attól függően, hogy az adatok-adatvesztési tűréshatár szintjét akkor célszerű használni replikálásához a várólisták, az adatbázis vagy az összes tároló-erőforrások.</span><span class="sxs-lookup"><span data-stu-id="60d79-317">Depending on the level of data-loss tolerance, you might choose to replicate the queues, the database, or all of the storage resources.</span></span> <span data-ttu-id="60d79-318">Az csak adatbázis-replikációval Ha az elsődleges régióban leáll, akkor továbbra is helyreállíthatja az adatokat, a várólisták ismét elérhető lesz az elsődleges régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-318">With only database replication, if the primary region goes down, you can still recover the data in the queues when the primary region comes back.</span></span>

<span data-ttu-id="60d79-319">Az alábbi ábrán látható az architektúrát, ahol a kiszolgáló adatbázisában régiók szinkronizálását.</span><span class="sxs-lookup"><span data-stu-id="60d79-319">The following diagram shows an architecture where the server database is synchronized across regions.</span></span>

![A vész-helyreállítási előkészítése tranzakciós adatok replikálása](./images/disaster-recovery-azure-applications/replicate-transactional-data-in-preparation-for-disaster-recovery.png)

<span data-ttu-id="60d79-321">A legnagyobb kihívás az ebbe az architektúrába végrehajtási régiók közötti replikáció stratégia.</span><span class="sxs-lookup"><span data-stu-id="60d79-321">The biggest challenge to implementing this architecture is the replication strategy between regions.</span></span> <span data-ttu-id="60d79-322">A [Azure SQL adatszinkronizálás](/azure/sql-database/sql-database-get-started-sql-data-sync/) szolgáltatás lehetővé teszi, hogy a replikáció az ilyen típusú.</span><span class="sxs-lookup"><span data-stu-id="60d79-322">The [Azure SQL Data Sync](/azure/sql-database/sql-database-get-started-sql-data-sync/) service enables this type of replication.</span></span> <span data-ttu-id="60d79-323">Től írásának pillanatában Ez a szolgáltatás jelenleg előzetes verzióban érhető, és még nem javasolt éles környezetekben.</span><span class="sxs-lookup"><span data-stu-id="60d79-323">As of this writing, the service is in preview and is not yet recommended for production environments.</span></span> <span data-ttu-id="60d79-324">További információkért lásd: [áttekintése: üzleti folytonossági és az adatbázis katasztrófa utáni helyreállítás az SQL Database Felhőbeli](/azure/sql-database/sql-database-business-continuity/).</span><span class="sxs-lookup"><span data-stu-id="60d79-324">For more information, see [Overview: Cloud business continuity and database disaster recovery with SQL Database](/azure/sql-database/sql-database-business-continuity/).</span></span> <span data-ttu-id="60d79-325">Az éles környezetben egy harmadik féltől származó megoldás beruházásának vagy a saját replikációs logika létrehozása a kódban.</span><span class="sxs-lookup"><span data-stu-id="60d79-325">For production applications, you must invest in a third-party solution or create your own replication logic in code.</span></span> <span data-ttu-id="60d79-326">Attól függően, hogy az architektúra a replikáció is kétirányú, ez bonyolultabb.</span><span class="sxs-lookup"><span data-stu-id="60d79-326">Depending on the architecture, the replication might be bidirectional, which is more complex.</span></span>

<span data-ttu-id="60d79-327">Az egyik lehetséges megvalósítási tehetik használni, az előző példában a köztes várólista.</span><span class="sxs-lookup"><span data-stu-id="60d79-327">One potential implementation might make use of the intermediate queue in the previous example.</span></span> <span data-ttu-id="60d79-328">A feldolgozói szerepkör, amely feldolgozza az adatokat a végső célhelyet lehet, hogy a módosítás az elsődleges régióban, mind a másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="60d79-328">The worker role that processes the data to the final storage destination might make the change in both the primary region and the secondary region.</span></span> <span data-ttu-id="60d79-329">Ezek nincsenek trivial feladatok, és teljes útmutatás replikációs kód nem ez a cikk a terjed.</span><span class="sxs-lookup"><span data-stu-id="60d79-329">These are not trivial tasks, and complete guidance for replication code is beyond the scope of this article.</span></span> <span data-ttu-id="60d79-330">Jelentős mennyiségű időt és az adatok replikálásához a másodlagos régióba módszerrel történő tesztelése fektetnek.</span><span class="sxs-lookup"><span data-stu-id="60d79-330">Invest significant time and testing into the approach for replicating data to the secondary region.</span></span> <span data-ttu-id="60d79-331">További feldolgozás és tesztelés révén biztos lehet abban, hogy a feladatátvételi és helyreállítási folyamatok megfelelően kezeli a lehetséges inkonzisztenciát vagy ismétlődő tranzakciók.</span><span class="sxs-lookup"><span data-stu-id="60d79-331">Additional processing and testing can help ensure that the failover and recovery processes correctly handle any possible data inconsistencies or duplicate transactions.</span></span>

> [!NOTE]
> <span data-ttu-id="60d79-332">A dokumentum a legtöbb összpontosít platform (PaaS) szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="60d79-332">Most of this paper focuses on platform as a service (PaaS).</span></span> <span data-ttu-id="60d79-333">További replikáció és a rendelkezésre állási beállításokat a hibrid alkalmazások használják, Azure virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="60d79-333">However, additional replication and availability options for hybrid applications use Azure Virtual Machines.</span></span> <span data-ttu-id="60d79-334">Ezen hibrid alkalmazások szolgáltatásként (IaaS) infrastruktúra használatával futtatni az SQL Server Azure virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="60d79-334">These hybrid applications use infrastructure as a service (IaaS) to host SQL Server on virtual machines in Azure.</span></span> <span data-ttu-id="60d79-335">Az SQL Server AlwaysOn rendelkezésre állási csoportok vagy Naplóküldést például így hagyományos rendelkezésre állási módszerekkel.</span><span class="sxs-lookup"><span data-stu-id="60d79-335">This allows traditional availability approaches in SQL Server, such as AlwaysOn Availability Groups or Log Shipping.</span></span> <span data-ttu-id="60d79-336">Egyes módszereket, például az AlwaysOn, csak a helyszíni SQL Server-példány és az Azure virtuális gépek között működik.</span><span class="sxs-lookup"><span data-stu-id="60d79-336">Some techniques, such as AlwaysOn, work only between on-premises SQL Server instances and Azure virtual machines.</span></span> <span data-ttu-id="60d79-337">További információkért lásd: [az SQL Server Azure virtuális gépek magas rendelkezésre állási és vészhelyreállítási helyreállítási](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span><span class="sxs-lookup"><span data-stu-id="60d79-337">For more information, see [High availability and disaster recovery for SQL Server in Azure Virtual Machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>
> 
> 

#### <a name="reduced-application-functionality-for-transaction-capture"></a><span data-ttu-id="60d79-338">A tranzakció rögzítéshez csökkentett az alkalmazás funkciói</span><span class="sxs-lookup"><span data-stu-id="60d79-338">Reduced application functionality for transaction capture</span></span>
<span data-ttu-id="60d79-339">Fontolja meg egy második architektúra, amely a csökkentett, működik.</span><span class="sxs-lookup"><span data-stu-id="60d79-339">Consider a second architecture that operates with reduced functionality.</span></span> <span data-ttu-id="60d79-340">Az alkalmazást a másodlagos régióban inaktiválja az összes funkciót, például a jelentésekben, üzleti intelligenciával, vagy a kiürítés várólisták.</span><span class="sxs-lookup"><span data-stu-id="60d79-340">The application in the secondary region deactivates all the functionality, such as reporting, business intelligence (BI), or draining queues.</span></span> <span data-ttu-id="60d79-341">Csak a tranzakciós munkafolyamatok legfontosabb típusú üzleti követelmények által definiált fogad.</span><span class="sxs-lookup"><span data-stu-id="60d79-341">It accepts only the most important types of transactional workflows, as defined by business requirements.</span></span> <span data-ttu-id="60d79-342">A rendszer a tranzakciók rögzíti, és a várólisták írja azokat.</span><span class="sxs-lookup"><span data-stu-id="60d79-342">The system captures the transactions and writes them to queues.</span></span> <span data-ttu-id="60d79-343">A rendszer, előfordulhat, hogy halassza el az adatok feldolgozása a szolgáltatás megszűnésének kezdeti szakaszában.</span><span class="sxs-lookup"><span data-stu-id="60d79-343">The system might postpone processing the data during the initial stage of the service disruption.</span></span> <span data-ttu-id="60d79-344">Ha az elsődleges régió, a rendszer újraaktiválja a várt időn belül időszakban, a feldolgozói szerepkörök az elsődleges régióban a várólistákat is üríthetik.</span><span class="sxs-lookup"><span data-stu-id="60d79-344">If the system on the primary region is reactivated within the expected time window, the worker roles in the primary region can drain the queues.</span></span> <span data-ttu-id="60d79-345">Ez a folyamat nem kell az adatbázis az egyesítés.</span><span class="sxs-lookup"><span data-stu-id="60d79-345">This process eliminates the need for database merging.</span></span> <span data-ttu-id="60d79-346">Ha az elsődleges régióban szolgáltatáskiesés várható a megengedhető ablak túllép, az alkalmazás indításához a várólisták feldolgozása.</span><span class="sxs-lookup"><span data-stu-id="60d79-346">If the primary region service disruption goes beyond the tolerable window, the application can start processing the queues.</span></span>

<span data-ttu-id="60d79-347">Ebben a forgatókönyvben az adatbázis másodlagos régióban úgy kell egyesíteni, miután az elsődleges aktiválódik növekményes tranzakciós adatokat tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="60d79-347">In this scenario, the database in the secondary region contains incremental transactional data that must be merged after the primary is reactivated.</span></span> <span data-ttu-id="60d79-348">Az alábbi ábrán látható, ezt a stratégiát ideiglenesen tranzakciós adatok tárolására, amíg az elsődleges régióban helyreáll.</span><span class="sxs-lookup"><span data-stu-id="60d79-348">The following diagram shows this strategy for temporarily storing transactional data until the primary region is restored.</span></span>

![A tranzakció rögzítéshez csökkentett az alkalmazás funkciói](./images/disaster-recovery-azure-applications/reduced-application-functionality-for-transaction-capture.png)

<span data-ttu-id="60d79-350">Rugalmas Azure-alkalmazások adatok technikák további tárgyalását lásd: [Failsafe: Útmutató a rugalmas felhő architektúrák](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="60d79-350">For more discussion of data management techniques for resilient Azure applications, see [Failsafe: Guidance for Resilient Cloud Architectures](https://channel9.msdn.com/Series/FailSafe).</span></span>

## <a name="deployment-topologies-for-disaster-recovery"></a><span data-ttu-id="60d79-351">Vész-helyreállítási üzembe helyezési topológiák</span><span class="sxs-lookup"><span data-stu-id="60d79-351">Deployment topologies for disaster recovery</span></span>
<span data-ttu-id="60d79-352">Kritikus fontosságú alkalmazások régió kiterjedő szolgáltatás zavarokat elő kell készítenie.</span><span class="sxs-lookup"><span data-stu-id="60d79-352">You must prepare mission-critical applications to handle region-wide service disruptions.</span></span> <span data-ttu-id="60d79-353">A régióban több központi telepítési stratégiával beépítse az üzemeltetés megtervezése.</span><span class="sxs-lookup"><span data-stu-id="60d79-353">Incorporate a multiple-region deployment strategy into the operational planning.</span></span>

<span data-ttu-id="60d79-354">Több-területre vonatkozó telepítések IT-folyamatok az alkalmazás- és referenciainformációkat adatok közzétételére a másodlagos régióba katasztrófa utáni vonatkozhat.</span><span class="sxs-lookup"><span data-stu-id="60d79-354">Multiple-region deployments might involve IT processes to publish the application and reference data to the secondary region after a disaster.</span></span> <span data-ttu-id="60d79-355">Ha az alkalmazás azonnali feladatátvétel, a telepítési folyamat egy aktív/passzív telepítő vagy egy aktív telepítő vonatkozhat.</span><span class="sxs-lookup"><span data-stu-id="60d79-355">If the application requires instant failover, the deployment process might involve an active/passive setup or an active/active setup.</span></span> <span data-ttu-id="60d79-356">Ennél a telepítési típusnál a másodlagos régióban fut az alkalmazás meglévő példánnyal rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="60d79-356">This type of deployment has existing instances of the application running in the alternate region.</span></span> <span data-ttu-id="60d79-357">Például az Azure Traffic Manager útválasztási szolgáltatás a DNS-szintű terheléselosztás szolgáltatások biztosít.</span><span class="sxs-lookup"><span data-stu-id="60d79-357">A routing service such as Azure Traffic Manager provides load-balancing services at the DNS level.</span></span> <span data-ttu-id="60d79-358">Azt szolgáltatás zavarokat észleli, és átirányíthatja a felhasználók különböző régiókban, amikor szükséges.</span><span class="sxs-lookup"><span data-stu-id="60d79-358">It can detect service disruptions and route the users to different regions when needed.</span></span>

<span data-ttu-id="60d79-359">Egy sikeres Azure vész-helyreállítási tartalmazza, hogy a helyreállítási elejéről megoldásba történő létrehozása.</span><span class="sxs-lookup"><span data-stu-id="60d79-359">A successful Azure disaster recovery includes building that recovery into the solution from the start.</span></span> <span data-ttu-id="60d79-360">A felhő esetén a helyreállítás során fellépő hibák egy olyan vészhelyzet esetén, amelyek nem érhetők el a hagyományos szolgáltató további lehetőségeket is kínál.</span><span class="sxs-lookup"><span data-stu-id="60d79-360">The cloud provides additional options for recovering from failures during a disaster that are not available in a traditional hosting provider.</span></span> <span data-ttu-id="60d79-361">Pontosabban dinamikusan és gyorsan hozzárendelhet erőforrásokat egy másik régióban található, elkerülve a meghibásodás előtt üresjárati erőforrások költsége.</span><span class="sxs-lookup"><span data-stu-id="60d79-361">Specifically, you can dynamically and quickly allocate resources in a different region, avoiding the cost of idle resources prior to a failure.</span></span>

<span data-ttu-id="60d79-362">A következő szakaszok különböző központi telepítési topológiák vész-helyreállítási foglalkozik.</span><span class="sxs-lookup"><span data-stu-id="60d79-362">The following sections cover different deployment topologies for disaster recovery.</span></span> <span data-ttu-id="60d79-363">Általában nincs egy kompromisszumot nagyobb költség vagy a további rendelkezésre állás érdekében összetettségét.</span><span class="sxs-lookup"><span data-stu-id="60d79-363">Typically, there's a tradeoff in increased cost or complexity for additional availability.</span></span>

### <a name="single-region-deployment"></a><span data-ttu-id="60d79-364">Egyetlen területi központi telepítés</span><span class="sxs-lookup"><span data-stu-id="60d79-364">Single-region deployment</span></span>
<span data-ttu-id="60d79-365">Egyetlen területi központi telepítés valóban nem a vész-helyreállítási topológia, de a célja, hogy ezzel szemben a más architektúrák rendelkező.</span><span class="sxs-lookup"><span data-stu-id="60d79-365">A single-region deployment is not really a disaster recovery topology, but is meant to contrast with the other architectures.</span></span> <span data-ttu-id="60d79-366">Egyetlen területi központi telepítések megegyeznek az alkalmazások az Azure rendszerben; azonban ezek nem felelnek meg a vész-helyreállítási topológia követelményeinek.</span><span class="sxs-lookup"><span data-stu-id="60d79-366">Single-region deployments are common for applications in Azure; however, they do not meet the requirements of a disaster recovery topology.</span></span>

<span data-ttu-id="60d79-367">A következő ábra szemlélteti az alkalmazást egy Azure-régió.</span><span class="sxs-lookup"><span data-stu-id="60d79-367">The following diagram depicts an application running in a single Azure region.</span></span> <span data-ttu-id="60d79-368">Az Azure Traffic Manager és a tartalék és a frissítési tartományok használatához az alkalmazás abban a régióban rendelkezésre állásának növelése</span><span class="sxs-lookup"><span data-stu-id="60d79-368">Azure Traffic Manager and the use of fault and upgrade domains increase availability of the application within the region.</span></span>

![Egyetlen területi központi telepítés](./images/disaster-recovery-azure-applications/single-region-deployment.png)

<span data-ttu-id="60d79-370">Ebben a forgatókönyvben az adatbázis nem a hibaérzékeny pontok kialakulását.</span><span class="sxs-lookup"><span data-stu-id="60d79-370">In this scenario, the database is a single point of failure.</span></span> <span data-ttu-id="60d79-371">Bár az Azure replikálja a belső replikákra különböző tartalék tartományokban, a replikáció csak az ugyanabban a régióban belül.</span><span class="sxs-lookup"><span data-stu-id="60d79-371">Though Azure replicates the data across different fault domains to internal replicas, this replication occurs only within the same region.</span></span> <span data-ttu-id="60d79-372">Az alkalmazás nem képes elviselni végzetes hiba.</span><span class="sxs-lookup"><span data-stu-id="60d79-372">The application cannot withstand a catastrophic failure.</span></span> <span data-ttu-id="60d79-373">Ha a régió nem érhető el, ezért tegye a tartalék tartományok, beleértve a szolgáltatáspéldány, és a tárolási erőforrások.</span><span class="sxs-lookup"><span data-stu-id="60d79-373">If the region becomes unavailable, then so do the fault domains, including all service instances and storage resources.</span></span>

<span data-ttu-id="60d79-374">Az összes legalább kritikus fontosságú alkalmazások, a megtervezi a különféle régiókban az alkalmazások telepítését tervezi.</span><span class="sxs-lookup"><span data-stu-id="60d79-374">For all but the least critical applications, you must devise a plan to deploy your applications across multiple regions.</span></span> <span data-ttu-id="60d79-375">Kell RTO fontolja meg, és korlátozások annak eldöntéséhez, hogy melyik üzemi topológia használandó költsége.</span><span class="sxs-lookup"><span data-stu-id="60d79-375">You should also consider RTO and cost constraints in considering which deployment topology to use.</span></span>

<span data-ttu-id="60d79-376">Most vessen egy pillantást most egyedi megközelítésekre teszi lehetővé a feladatátvevő különböző régiókban között.</span><span class="sxs-lookup"><span data-stu-id="60d79-376">Let’s take a look now at specific approaches to supporting failover across different regions.</span></span> <span data-ttu-id="60d79-377">Ezek a példák összes két régió segítségével folyamatát írják le.</span><span class="sxs-lookup"><span data-stu-id="60d79-377">These examples all use two regions to describe the process.</span></span>

### <a name="redeployment-to-a-secondary-azure-region"></a><span data-ttu-id="60d79-378">Egy másodlagos Azure régióra újbóli üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="60d79-378">Redeployment to a secondary Azure region</span></span>
<span data-ttu-id="60d79-379">A módjáról lévőre egy másodlagos régióban csak az elsődleges régióban alkalmazásokat és adatbázisokat futtató rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="60d79-379">For the approach of redeployment to a secondary region, only the primary region has applications and databases running.</span></span> <span data-ttu-id="60d79-380">A másodlagos régióba nincs beállítva az automatikus feladatátvételre.</span><span class="sxs-lookup"><span data-stu-id="60d79-380">The secondary region is not set up for an automatic failover.</span></span> <span data-ttu-id="60d79-381">Ezért ha katasztrófa történik, meg kell léptetéses fel az új szolgáltatás a kijelzők.</span><span class="sxs-lookup"><span data-stu-id="60d79-381">So when a disaster occurs, you must spin up all the parts of the service in the new region.</span></span> <span data-ttu-id="60d79-382">Ez magában foglalja a felhőalapú szolgáltatás feltöltése az Azure-ba, a felhőalapú szolgáltatás telepítéséhez, az adatok helyreállításához és a forgalom átirányítása a DNS módosítása.</span><span class="sxs-lookup"><span data-stu-id="60d79-382">This includes uploading a cloud service to Azure, deploying the cloud service, restoring the data, and changing DNS to reroute the traffic.</span></span>

<span data-ttu-id="60d79-383">Bár ez a legtöbb megfizethető a több területi beállításokat, akkor a legrosszabb RTO jellemzőkkel rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="60d79-383">Although this is the most affordable of the multiple-region options, it has the worst RTO characteristics.</span></span> <span data-ttu-id="60d79-384">Ebben a modellben a szolgáltatás csomag és az adatbázis biztonsági másolatai a helyszínen vagy a másodlagos régióba az Azure Blob storage-példány.</span><span class="sxs-lookup"><span data-stu-id="60d79-384">In this model, the service package and database backups are stored either on-premises or in the Azure Blob storage instance of the secondary region.</span></span> <span data-ttu-id="60d79-385">Azonban kell telepítenie egy új szolgáltatás, és állítsa vissza az adatokat, mielőtt folytatja a műveletet.</span><span class="sxs-lookup"><span data-stu-id="60d79-385">However, you must deploy a new service and restore the data before it resumes operation.</span></span> <span data-ttu-id="60d79-386">Még a biztonsági mentési tárolóból az adatátvitel teljes körű automatizálását egy új adatbázis-környezet kiépítési igényel sok időt.</span><span class="sxs-lookup"><span data-stu-id="60d79-386">Even with full automation of the data transfer from backup storage, provisioning a new database environment consumes a lot of time.</span></span> <span data-ttu-id="60d79-387">Helyezze át a adatokat a biztonsági mentési lemezegység a másodlagos régióba az üres adatbázis része a legköltségesebb a visszaállítási folyamat.</span><span class="sxs-lookup"><span data-stu-id="60d79-387">Moving data from the backup disk storage to the empty database on the secondary region is the most expensive part of the restore process.</span></span> <span data-ttu-id="60d79-388">Kell megtennie, azonban, hogy az új adatbázis egy működési állapotot, azt nem replikálja.</span><span class="sxs-lookup"><span data-stu-id="60d79-388">You must do this, however, to bring the new database to an operational state because it isn't replicated.</span></span>

<span data-ttu-id="60d79-389">A legjobb megoldás, a szolgáltatás csomagok tárolására a Blob Storage tárolóban, a másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-389">The best approach is to store the service packages in Blob storage in the secondary region.</span></span> <span data-ttu-id="60d79-390">Ez szükségtelenné teszi a csomag feltöltése az Azure-ba, amely mi történik, ha telepít egy helyi fejlesztési gépről.</span><span class="sxs-lookup"><span data-stu-id="60d79-390">This eliminates the need to upload the package to Azure, which is what happens when you deploy from an on-premises development machine.</span></span> <span data-ttu-id="60d79-391">Gyorsan telepítene a szervizcsomagok új felhőalapú szolgáltatás blobtárolóból PowerShell-parancsfájlok használatával.</span><span class="sxs-lookup"><span data-stu-id="60d79-391">You can quickly deploy the service packages to a new cloud service from Blob storage by using PowerShell scripts.</span></span>

<span data-ttu-id="60d79-392">Ez a beállítás akkor gyakorlati csak magas RTO tűri nem kritikus fontosságú alkalmazások esetében.</span><span class="sxs-lookup"><span data-stu-id="60d79-392">This option is practical only for non-critical applications that can tolerate a high RTO.</span></span> <span data-ttu-id="60d79-393">Például ez is alkalmasak olyan alkalmazás, amely lehet több órán keresztül, de 24 órán belül elérhető kell megadni.</span><span class="sxs-lookup"><span data-stu-id="60d79-393">For instance, this might work for an application that can be down for several hours but is required to be available within 24 hours.</span></span>

![Egy másodlagos Azure régióra újbóli üzembe helyezése](./images/disaster-recovery-azure-applications/redeploy-to-a-secondary-azure-region.png)

### <a name="active-passive"></a><span data-ttu-id="60d79-395">Aktív-passzív</span><span class="sxs-lookup"><span data-stu-id="60d79-395">Active-passive</span></span>
<span data-ttu-id="60d79-396">Egy aktív-passzív topológia a választott számos vállalat alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="60d79-396">An active-passive topology is the choice that many companies favor.</span></span> <span data-ttu-id="60d79-397">Ez a topológia tartalmaz javításokat az költség viszonylag kis növekedése RTO keresztül az újratelepítés módszerrel.</span><span class="sxs-lookup"><span data-stu-id="60d79-397">This topology provides improvements to the RTO with a relatively small increase in cost over the redeployment approach.</span></span> <span data-ttu-id="60d79-398">Ilyen esetben van újra egy elsődleges és egy másodlagos Azure-régiót.</span><span class="sxs-lookup"><span data-stu-id="60d79-398">In this scenario, there is again a primary and a secondary Azure region.</span></span> <span data-ttu-id="60d79-399">Összes forgalmat állapotba aktív központi az elsődleges régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-399">All of the traffic goes to the active deployment on the primary region.</span></span> <span data-ttu-id="60d79-400">Mivel az adatbázis fut mindkét régió a másodlagos régióba jobban felkészül a vész-helyreállítási.</span><span class="sxs-lookup"><span data-stu-id="60d79-400">The secondary region is better prepared for disaster recovery because the database is running on both regions.</span></span> <span data-ttu-id="60d79-401">Emellett a szinkronizálási mechanizmus közöttük rendelkezésre áll.</span><span class="sxs-lookup"><span data-stu-id="60d79-401">Additionally, a synchronization mechanism is in place between them.</span></span> <span data-ttu-id="60d79-402">Ez a megközelítés készenléti magába foglaló két változata: csak adatbázis megközelítés vagy egy másodlagos régióban teljes telepítése.</span><span class="sxs-lookup"><span data-stu-id="60d79-402">This standby approach can involve two variations: a database-only approach or a complete deployment in the secondary region.</span></span>

#### <a name="database-only"></a><span data-ttu-id="60d79-403">Csak az adatbázis</span><span class="sxs-lookup"><span data-stu-id="60d79-403">Database only</span></span>
<span data-ttu-id="60d79-404">Az aktív-passzív topológia első változata csak az elsődleges régióban van egy telepített felhő szolgáltatásalkalmazást.</span><span class="sxs-lookup"><span data-stu-id="60d79-404">In the first variation of the active-passive topology, only the primary region has a deployed cloud service application.</span></span> <span data-ttu-id="60d79-405">Azonban eltérően az újratelepítés módszert használja, a két régió szinkronizálva legyenek az adatbázis tartalmát.</span><span class="sxs-lookup"><span data-stu-id="60d79-405">However, unlike the redeployment approach, both regions are synchronized with the contents of the database.</span></span> <span data-ttu-id="60d79-406">(További információkért lásd [tranzakciós adatmintát vész-helyreállítási](#transactional-data-pattern-for-disaster-recovery).) Egy olyan vészhelyzet esetén következik be, amikor nincsenek kevesebb kapcsolatos aktiválási követelményekre vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="60d79-406">(For more information, see the section on [transactional data pattern for disaster recovery](#transactional-data-pattern-for-disaster-recovery).) When a disaster occurs, there are fewer activation requirements.</span></span> <span data-ttu-id="60d79-407">Az alkalmazás elindítása a másodlagos régióban, módosítsa az új adatbázis kapcsolati karakterláncok, és módosítsa a DNS-bejegyzéseket a forgalom átirányítása.</span><span class="sxs-lookup"><span data-stu-id="60d79-407">You start the application in the secondary region, change connection strings to the new database, and change the DNS entries to reroute traffic.</span></span>

<span data-ttu-id="60d79-408">Például az újratelepítés módszerrel kell már tárolt a szervizcsomagok az Azure Blob storage gyorsabb telepítése másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-408">Like the redeployment approach, you should have already stored the service packages in Azure Blob storage in the secondary region for faster deployment.</span></span> <span data-ttu-id="60d79-409">Azonban nem függő díj a legtöbb, a terhet a szükséges adatbázis-visszaállítási művelet, mert az adatbázis készen áll, és fut.</span><span class="sxs-lookup"><span data-stu-id="60d79-409">However, you don’t incur the majority of the overhead that database restore operation requires, because the database is ready and running.</span></span> <span data-ttu-id="60d79-410">Ezáltal jelentős mennyiségű időt, így egy megfizethető DR-mintát (és az egyik leggyakrabban használt).</span><span class="sxs-lookup"><span data-stu-id="60d79-410">This saves a significant amount of time, making this an affordable DR pattern (and the one most frequently used).</span></span>

![Csak az aktív-passzív adatbázis](./images/disaster-recovery-azure-applications/active-passive-database-only.png)

#### <a name="full-replica"></a><span data-ttu-id="60d79-412">Teljes replika</span><span class="sxs-lookup"><span data-stu-id="60d79-412">Full replica</span></span>
<span data-ttu-id="60d79-413">A második változat aktív-passzív topológiájának mind az elsődleges régióban, és a másodlagos régióba rendelkezik teljes körű telepítésére.</span><span class="sxs-lookup"><span data-stu-id="60d79-413">In the second variation of the active-passive topology, both the primary region and the secondary region have a full deployment.</span></span> <span data-ttu-id="60d79-414">A központi telepítés a felhőszolgáltatások és egy szinkronizált adatbázist tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="60d79-414">This deployment includes the cloud services and a synchronized database.</span></span> <span data-ttu-id="60d79-415">Csak az elsődleges régióban azonban aktívan kezeli a hálózati kérelmek, a felhasználóktól.</span><span class="sxs-lookup"><span data-stu-id="60d79-415">However, only the primary region is actively handling network requests from the users.</span></span> <span data-ttu-id="60d79-416">A másodlagos régióba válik aktívvá, csak akkor, ha az elsődleges régióban észlel a szolgáltatás szüneteltetése.</span><span class="sxs-lookup"><span data-stu-id="60d79-416">The secondary region becomes active only when the primary region experiences a service disruption.</span></span> <span data-ttu-id="60d79-417">Ebben az esetben minden új hálózati kérelmek átirányíthatja a másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="60d79-417">In that case, all new network requests route to the secondary region.</span></span> <span data-ttu-id="60d79-418">Az Azure Traffic Manager automatikusan kezelheti a feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="60d79-418">Azure Traffic Manager can manage this failover automatically.</span></span>

<span data-ttu-id="60d79-419">Feladatátvételi gyorsabb, mint az adatbázis csak variation oka, hogy a szolgáltatás már telepítve van.</span><span class="sxs-lookup"><span data-stu-id="60d79-419">Failover occurs faster than the database-only variation because the services are already deployed.</span></span> <span data-ttu-id="60d79-420">Ez a topológia egy nagyon alacsony RTO biztosít.</span><span class="sxs-lookup"><span data-stu-id="60d79-420">This topology provides a very low RTO.</span></span> <span data-ttu-id="60d79-421">A másodlagos feladatátvételi régió készen áll az elsődleges régióban hiba után azonnal kell lennie.</span><span class="sxs-lookup"><span data-stu-id="60d79-421">The secondary failover region must be ready to go immediately after failure of the primary region.</span></span>

<span data-ttu-id="60d79-422">Gyorsabb válaszidővel, valamint ez a topológia előre foglal le, és telepíti a biztonsági mentését, elkerülve a tárhely új példányok során egy olyan vészhelyzet esetén hiánya lehetőségét.</span><span class="sxs-lookup"><span data-stu-id="60d79-422">Along with a quicker response time, this topology pre-allocates and deploys backup services, avoiding the possibility of a lack of space to allocate new instances during a disaster.</span></span> <span data-ttu-id="60d79-423">Ez azért fontos, ha a másodlagos Azure-régiót közelít kapacitásának határához.</span><span class="sxs-lookup"><span data-stu-id="60d79-423">This is important if your secondary Azure region is nearing capacity.</span></span> <span data-ttu-id="60d79-424">Nincs szolgáltatásszint-szerződéssel (SLA) biztosítja, hogy azonnal telepíthet egy vagy több új felhőalapú szolgáltatások bármely régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-424">No service-level agreement (SLA) guarantees that you can instantly deploy one or more new cloud services in any region.</span></span>

<span data-ttu-id="60d79-425">A leggyorsabb válaszidejű ebben a modellben rendelkeznie kell hasonló méretezési (a szerepkörpéldányok számát) az elsődleges és másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-425">For the fastest response time with this model, you must have similar scale (number of role instances) in the primary and secondary regions.</span></span> <span data-ttu-id="60d79-426">Annak ellenére, hogy a következő előnyöket a nem használt számítási példányokért fizető költséges, és ez nem feltétlenül a legtöbb probléma kivizsgálása pénzügyi választás.</span><span class="sxs-lookup"><span data-stu-id="60d79-426">Despite the advantages, paying for unused compute instances is costly, and this might not be the most prudent financial choice.</span></span> <span data-ttu-id="60d79-427">Emiatt gyakori felhőszolgáltatások egy kis mértékben méretezhető régebbi verziója a másodlagos régióba használatára.</span><span class="sxs-lookup"><span data-stu-id="60d79-427">Because of this, it's more common to use a slightly scaled-down version of cloud services on the secondary region.</span></span> <span data-ttu-id="60d79-428">Ezután gyorsan feladatátvételt és a másodlagos telepítésének bővítése, ha szükséges.</span><span class="sxs-lookup"><span data-stu-id="60d79-428">Then you can quickly fail over and scale out the secondary deployment if necessary.</span></span> <span data-ttu-id="60d79-429">A feladatátvételi folyamat kell automatizálhatja, így miután az elsődleges régióban nem érhető el, további példányok, attól függően, hogy a terhelés aktiválja.</span><span class="sxs-lookup"><span data-stu-id="60d79-429">You should automate the failover process so that after the primary region is inaccessible, you activate additional instances, depending on the load.</span></span> <span data-ttu-id="60d79-430">Ez vonatkozhat például az automatikus skálázás mechanizmus használata [virtuálisgép-méretezési csoportok](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span><span class="sxs-lookup"><span data-stu-id="60d79-430">This might involve the use of an autoscaling mechanism like [virtual machine scale sets](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span></span>

<span data-ttu-id="60d79-431">Az alábbi ábrán látható, ha az elsődleges és másodlagos területeket tartalmazza-e egy teljes körűen rendszerbe állított felhőszolgáltatás egy aktív-passzív topológia a modell.</span><span class="sxs-lookup"><span data-stu-id="60d79-431">The following diagram shows the model where the primary and secondary regions contain a fully deployed cloud service in an active-passive topology.</span></span>

![Aktív-passzív, a teljes replika](./images/disaster-recovery-azure-applications/active-passive-full-replica.png)

### <a name="active-active"></a><span data-ttu-id="60d79-433">Aktív-aktív</span><span class="sxs-lookup"><span data-stu-id="60d79-433">Active-active</span></span>
<span data-ttu-id="60d79-434">Egy aktív-aktív topológia a felhőszolgáltatás és az adatbázis teljes mértékben telepítve mindkét régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-434">In an active-active topology, the cloud services and database are fully deployed in both regions.</span></span> <span data-ttu-id="60d79-435">Az aktív-passzív modell eltérően mindkét régió felhasználói forgalom fogadására.</span><span class="sxs-lookup"><span data-stu-id="60d79-435">Unlike the active-passive model, both regions receive user traffic.</span></span> <span data-ttu-id="60d79-436">Ez a beállítás a leggyorsabb helyreállítási adja eredményül.</span><span class="sxs-lookup"><span data-stu-id="60d79-436">This option yields the quickest recovery time.</span></span> <span data-ttu-id="60d79-437">A szolgáltatások kezeléséhez a terhelés mellett minden egyes régió egy része már méretezése.</span><span class="sxs-lookup"><span data-stu-id="60d79-437">The services are already scaled to handle a portion of the load at each region.</span></span> <span data-ttu-id="60d79-438">DNS már engedélyezve van a másodlagos régióba használatára.</span><span class="sxs-lookup"><span data-stu-id="60d79-438">DNS is already enabled to use the secondary region.</span></span> <span data-ttu-id="60d79-439">Nincs nagyobb fokú összetettségével jár a felhasználók a megfelelő régióba irányításához módjának meghatározása.</span><span class="sxs-lookup"><span data-stu-id="60d79-439">There's additional complexity in determining how to route users to the appropriate region.</span></span> <span data-ttu-id="60d79-440">Ciklikus multiplexelés ütemezés esetleg.</span><span class="sxs-lookup"><span data-stu-id="60d79-440">Round-robin scheduling might be possible.</span></span> <span data-ttu-id="60d79-441">Valószínűbb, hogy bizonyos felhasználókra szeretné használni egy adott területre, ahol az adatokat az elsődleges példány található.</span><span class="sxs-lookup"><span data-stu-id="60d79-441">It's more likely that certain users would use a specific region where the primary copy of their data resides.</span></span>

<span data-ttu-id="60d79-442">A feladatátvétel esetén csupán letiltsa DNS az elsődleges régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-442">In case of failover, simply disable DNS to the primary region.</span></span> <span data-ttu-id="60d79-443">Ez továbbítja az összes forgalom a másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="60d79-443">This routes all traffic to the secondary region.</span></span>

<span data-ttu-id="60d79-444">Még akkor is, ez a modell több változata is.</span><span class="sxs-lookup"><span data-stu-id="60d79-444">Even in this model, there are some variations.</span></span> <span data-ttu-id="60d79-445">Például a következő ábra szemlélteti a elsődleges régióban, amely azonos a fő másolatot az adatbázisról.</span><span class="sxs-lookup"><span data-stu-id="60d79-445">For example, the following diagram depicts a primary region which owns the master copy of the database.</span></span> <span data-ttu-id="60d79-446">A cloud services csomag mindkét régiókban írni, hogy az elsődleges adatbázis.</span><span class="sxs-lookup"><span data-stu-id="60d79-446">The cloud services in both regions write to that primary database.</span></span> <span data-ttu-id="60d79-447">A másodlagos központi telepítés is olvassa a elsődleges vagy replikált adatbázis.</span><span class="sxs-lookup"><span data-stu-id="60d79-447">The secondary deployment can read from the primary or replicated database.</span></span> <span data-ttu-id="60d79-448">Ebben a példában a replikációt még csak egyirányú.</span><span class="sxs-lookup"><span data-stu-id="60d79-448">Replication in this example is one-way.</span></span>

![Aktív-aktív](./images/disaster-recovery-azure-applications/active-active.png)

<span data-ttu-id="60d79-450">Az aktív-aktív architektúra a fenti ábrán egy hátránya van.</span><span class="sxs-lookup"><span data-stu-id="60d79-450">There is a downside to the active-active architecture in the preceding diagram.</span></span> <span data-ttu-id="60d79-451">A második régióban kell hozzáférni az adatbázis az első régióban, mert a fő példány nem található.</span><span class="sxs-lookup"><span data-stu-id="60d79-451">The second region must access the database in the first region because the master copy resides there.</span></span> <span data-ttu-id="60d79-452">Teljesítmény jelentős mértékben csökken egy régiót kívül származó adatok elérésekor.</span><span class="sxs-lookup"><span data-stu-id="60d79-452">Performance significantly drops off when you access data from outside a region.</span></span> <span data-ttu-id="60d79-453">A kereszt-régió adatbázishívások érdemes valamilyen kötegelés stratégia az adott hívások a teljesítmény javítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="60d79-453">In cross-region database calls, you should consider some type of batching strategy to improve the performance of these calls.</span></span> <span data-ttu-id="60d79-454">További információkért lásd: [használata a kötegelés SQL-adatbázis teljesítményének javítása érdekében](/azure/sql-database/sql-database-use-batching-to-improve-performance/).</span><span class="sxs-lookup"><span data-stu-id="60d79-454">For more information, see [How to use batching to improve SQL Database application performance](/azure/sql-database/sql-database-use-batching-to-improve-performance/).</span></span>

<span data-ttu-id="60d79-455">Egy alternatív architektúra vonatkozhat minden egyes régió közvetlenül a saját adatbázis elérése közben.</span><span class="sxs-lookup"><span data-stu-id="60d79-455">An alternative architecture might involve each region accessing its own database directly.</span></span> <span data-ttu-id="60d79-456">Valamilyen kétirányú replikációt, hogy a modellben minden régióban az adatbázis szinkronizálásához szükséges.</span><span class="sxs-lookup"><span data-stu-id="60d79-456">In that model, some type of bidirectional replication is required to synchronize the databases in each region.</span></span>

<span data-ttu-id="60d79-457">Az előző-topológiával rendelkező RTO általában csökkentése növeli a költségeket és a bonyolultságot.</span><span class="sxs-lookup"><span data-stu-id="60d79-457">With the previous topologies, decreasing RTO generally increases costs and complexity.</span></span> <span data-ttu-id="60d79-458">Az aktív-aktív topológia eltér a költség mintát.</span><span class="sxs-lookup"><span data-stu-id="60d79-458">The active-active topology deviates from this cost pattern.</span></span> <span data-ttu-id="60d79-459">Az aktív-aktív topológia nem szükség lehet az elsődleges régióban annyi példány, mint az aktív-passzív topológiáját.</span><span class="sxs-lookup"><span data-stu-id="60d79-459">In the active-active topology, you might not need as many instances on the primary region as you would in the active-passive topology.</span></span> <span data-ttu-id="60d79-460">Ha 10 elsődleges régió, egy aktív-passzív-architektúrában, szükség lehet a csak egy aktív-aktív architektúrában minden régióban 5.</span><span class="sxs-lookup"><span data-stu-id="60d79-460">If you have 10 instances on the primary region in an active-passive architecture, you might need only 5 in each region in an active-active architecture.</span></span> <span data-ttu-id="60d79-461">Mindkét régió most megoszthatja a terhelést.</span><span class="sxs-lookup"><span data-stu-id="60d79-461">Both regions now share the load.</span></span> <span data-ttu-id="60d79-462">Ez lehet egy költséghatékony keresztül az aktív-passzív topológia Ha megtartja a meleg készenléti passzív régió, Várakozás a feladatátvételi 10 osztályt.</span><span class="sxs-lookup"><span data-stu-id="60d79-462">This might be a cost savings over the active-passive topology if you keep a warm standby on the passive region with 10 instances waiting for failover.</span></span>

<span data-ttu-id="60d79-463">Vegye figyelembe, hogy csak az elsődleges régióban visszaállításához a másodlagos régióba fordulhat elő, az új felhasználók hirtelen megugrását.</span><span class="sxs-lookup"><span data-stu-id="60d79-463">Realize that until you restore the primary region, the secondary region might receive a sudden surge of new users.</span></span> <span data-ttu-id="60d79-464">Ha vannak olyan 10 000 felhasználók minden kiszolgálón amikor az elsődleges régióban a szolgáltatás szüneteltetése, a másodlagos régióba hirtelen rendelkezik 20 000 felhasználót kezelésére.</span><span class="sxs-lookup"><span data-stu-id="60d79-464">If there are 10,000 users on each server when the primary region experiences a service disruption, the secondary region suddenly has to handle 20,000 users.</span></span> <span data-ttu-id="60d79-465">Állapotfigyelési szabályainak másodlagos helyének felismeri a növelése és a dupla a példányok másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-465">Monitoring rules on the secondary region must detect this increase and double the instances in the secondary region.</span></span> <span data-ttu-id="60d79-466">A további információkért lásd [tárhelyhiba-észlelés](#failure-detection).</span><span class="sxs-lookup"><span data-stu-id="60d79-466">For more information on this, see the section on [failure detection](#failure-detection).</span></span>

## <a name="hybrid-on-premises-and-cloud-solution"></a><span data-ttu-id="60d79-467">A helyszíni és hibrid felhőalapú megoldás</span><span class="sxs-lookup"><span data-stu-id="60d79-467">Hybrid on-premises and cloud solution</span></span>
<span data-ttu-id="60d79-468">Egy további vész-helyreállítási stratégiát az, hogy a tervezővel egy hibrid alkalmazás, amely a helyszíni és a felhőben.</span><span class="sxs-lookup"><span data-stu-id="60d79-468">One additional strategy for disaster recovery is to architect a hybrid application that runs on-premises and in the cloud.</span></span> <span data-ttu-id="60d79-469">Az alkalmazástól függően az elsődleges régióban lehet az egyik helyen.</span><span class="sxs-lookup"><span data-stu-id="60d79-469">Depending on the application, the primary region might be either location.</span></span> <span data-ttu-id="60d79-470">Fontolja meg az előző architektúrák és képzelhető el, egy helyszíni hely és az elsődleges vagy másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-470">Consider the previous architectures and imagine the primary or secondary region as an on-premises location.</span></span>

<span data-ttu-id="60d79-471">A hibrid architektúrák nincsenek némi kihívást.</span><span class="sxs-lookup"><span data-stu-id="60d79-471">There are some challenges in these hybrid architectures.</span></span> <span data-ttu-id="60d79-472">Először ebben a cikkben a legtöbb küldött PaaS architektúra kombinációját.</span><span class="sxs-lookup"><span data-stu-id="60d79-472">First, most of this article has addressed PaaS architecture patterns.</span></span> <span data-ttu-id="60d79-473">Tipikus PaaS alkalmazások az Azure-ban Azure-specifikus megoldások, például a szerepköröket, a felhőszolgáltatások és a Traffic Manager támaszkodnak.</span><span class="sxs-lookup"><span data-stu-id="60d79-473">Typical PaaS applications in Azure rely on Azure-specific constructs such as roles, cloud services, and Traffic Manager.</span></span> <span data-ttu-id="60d79-474">Egy helyszíni megoldás az ilyen típusú PaaS-alkalmazás létrehozása egy jelentősen eltérő architektúra kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="60d79-474">Creating an on-premises solution for this type of PaaS application would require a significantly different architecture.</span></span> <span data-ttu-id="60d79-475">Ez nem lehet felügyeleti vagy költség szempontjából valósítható meg.</span><span class="sxs-lookup"><span data-stu-id="60d79-475">This might not be feasible from a management or cost perspective.</span></span>

<span data-ttu-id="60d79-476">Vész-helyreállítási hibrid megoldás azonban a felhőbe, például az IaaS-alapú architektúrák áttelepített hagyományos architektúrák kevesebb kapcsolatban felmerülő kihívások rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="60d79-476">However, a hybrid solution for disaster recovery has fewer challenges for traditional architectures that have been migrated to the cloud, such as IaaS-based architectures.</span></span> <span data-ttu-id="60d79-477">Infrastruktúra-szolgáltatási alkalmazás használja a virtuális gépek, amelyeken közvetlen helyszíni alakokat a felhőben.</span><span class="sxs-lookup"><span data-stu-id="60d79-477">IaaS applications use virtual machines in the cloud that can have direct on-premises equivalents.</span></span> <span data-ttu-id="60d79-478">Virtuális hálózatok gépek való csatlakoztatásához a felhőben és a helyszíni hálózati erőforrások is használhatja.</span><span class="sxs-lookup"><span data-stu-id="60d79-478">You can also use virtual networks to connect machines in the cloud with on-premises network resources.</span></span> <span data-ttu-id="60d79-479">Ez lehetővé teszi a különböző lehetőségeket, amelyek nem csak a PaaS alkalmazásokat tesz lehetővé.</span><span class="sxs-lookup"><span data-stu-id="60d79-479">This allows several possibilities that are not possible with PaaS-only applications.</span></span> <span data-ttu-id="60d79-480">Például az SQL Server kihasználhatja vész-helyreállítási megoldások, például az AlwaysOn rendelkezésre állási csoportok és az adatbázis-tükrözés.</span><span class="sxs-lookup"><span data-stu-id="60d79-480">For example, SQL Server can take advantage of disaster recovery solutions such as AlwaysOn Availability Groups and database mirroring.</span></span> <span data-ttu-id="60d79-481">További információkért lásd: [magas rendelkezésre állás és katasztrófa-helyreállítás az SQL Server Azure virtuális gépekben](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span><span class="sxs-lookup"><span data-stu-id="60d79-481">For details, see [High availability and disaster recovery for SQL Server in Azure virtual machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>

<span data-ttu-id="60d79-482">IaaS-megoldásokat is egy egyszerűbb a helyszíni alkalmazások és a feladatátvételi használható Azure az elérési útját adja meg.</span><span class="sxs-lookup"><span data-stu-id="60d79-482">IaaS solutions also provide an easier path for on-premises applications to use Azure as the failover option.</span></span> <span data-ttu-id="60d79-483">Lehetséges, hogy egy teljes mértékben működő alkalmazás egy meglévő helyszíni régióban.</span><span class="sxs-lookup"><span data-stu-id="60d79-483">You might have a fully functioning application in an existing on-premises region.</span></span> <span data-ttu-id="60d79-484">Azonban mi történik, ha nem rendelkezik az erőforrások feladatátvételhez földrajzilag különálló terület karbantartásához?</span><span class="sxs-lookup"><span data-stu-id="60d79-484">However, what if you lack the resources to maintain a geographically separate region for failover?</span></span> <span data-ttu-id="60d79-485">Előfordulhat, hogy az alkalmazás Azure-ban futó virtuális gépek és virtuális hálózatok használata mellett dönt.</span><span class="sxs-lookup"><span data-stu-id="60d79-485">You might decide to use virtual machines and virtual networks to get your application running in Azure.</span></span> <span data-ttu-id="60d79-486">Ebben az esetben adja meg a folyamatok, amelyek szinkronizálja az adatokat a felhőbe.</span><span class="sxs-lookup"><span data-stu-id="60d79-486">In that case, define processes that synchronize data to the cloud.</span></span> <span data-ttu-id="60d79-487">Az Azure-telepítés majd válik a feladatátvételre használni másodlagos régióba.</span><span class="sxs-lookup"><span data-stu-id="60d79-487">The Azure deployment then becomes the secondary region to use for failover.</span></span> <span data-ttu-id="60d79-488">Az elsődleges régióban továbbra is a helyszíni alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="60d79-488">The primary region remains the on-premises application.</span></span> <span data-ttu-id="60d79-489">IaaS-architektúrát és képességeire vonatkozó további információkért lásd: a [Virtual Machines – dokumentáció](https://azure.microsoft.com/documentation/services/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="60d79-489">For more information about IaaS architectures and capabilities, see the [Virtual Machines documentation](https://azure.microsoft.com/documentation/services/virtual-machines/).</span></span>

## <a name="alternative-cloud"></a><span data-ttu-id="60d79-490">Alternatív felhő</span><span class="sxs-lookup"><span data-stu-id="60d79-490">Alternative cloud</span></span>
<span data-ttu-id="60d79-491">Vannak olyan helyzetek, ahol a széles körű képességeit a Microsoft Azure még nem teljesíti belső megfelelőségi szabályok vagy intézménye igényei szerint házirendeket.</span><span class="sxs-lookup"><span data-stu-id="60d79-491">There are situations where the broad capabilities of Microsoft Azure still may not meet internal compliance rules or policies required by your organization.</span></span> <span data-ttu-id="60d79-492">Még a legjobb előkészítése és biztonságimásolat-készítő rendszerek megvalósítása során egy olyan vészhelyzet esetén a tervező nem megfelelőek a felhőbeli szolgáltató a globális szolgáltatás szüneteltetése során.</span><span class="sxs-lookup"><span data-stu-id="60d79-492">Even the best preparation and design to implement backup systems during a disaster are inadequate during a global service disruption of a cloud service provider.</span></span>

<span data-ttu-id="60d79-493">Rendelkezésre állási követelmények, a költségek és mértékű rendelkezésre állást kell összehasonlítani.</span><span class="sxs-lookup"><span data-stu-id="60d79-493">You should compare availability requirements with the cost and complexity of increased availability.</span></span> <span data-ttu-id="60d79-494">Hajtsa végre a kockázati elemzés, valamint határozzon meg a megoldást a RTO és a helyreállítási Időkorlát.</span><span class="sxs-lookup"><span data-stu-id="60d79-494">Perform a risk analysis, and define the RTO and RPO for your solution.</span></span> <span data-ttu-id="60d79-495">Ha az alkalmazás zavarják a leállási, érdemes további felhőalapú megoldás.</span><span class="sxs-lookup"><span data-stu-id="60d79-495">If your application cannot tolerate any downtime, you might consider using an additional cloud solution.</span></span> <span data-ttu-id="60d79-496">Kivéve, ha a teljes internetes leáll, egy másik felhőalapú megoldás lehet, hogy továbbra is elérhetők, ha Azure globálisan elérhetetlenné válik.</span><span class="sxs-lookup"><span data-stu-id="60d79-496">Unless the entire Internet goes down, another cloud solution might still be available if Azure becomes globally inaccessible.</span></span>

<span data-ttu-id="60d79-497">A hibrid forgatókönyvek esetében a feladatátvételt a központi telepítések a korábbi vész-helyreállítási architektúrák is létezhet belül egy másik felhőalapú megoldás.</span><span class="sxs-lookup"><span data-stu-id="60d79-497">As with the hybrid scenario, the failover deployments in the previous disaster recovery architectures can also exist within another cloud solution.</span></span> <span data-ttu-id="60d79-498">Alternatív felhő DR helyek kell használni, csak a megoldások, amelyek RTO lehetővé teszi, hogy az állásidő minimális, ha van ilyen.</span><span class="sxs-lookup"><span data-stu-id="60d79-498">Alternative cloud DR sites should be used only for solutions whose RTO allows very little, if any, downtime.</span></span> <span data-ttu-id="60d79-499">Vegye figyelembe, hogy a DR-webhelyként kívül Azure alkalmazó megoldás szükséges-e a további munkahelyi konfigurálása, fejleszthet, telepíteni és fenntartani.</span><span class="sxs-lookup"><span data-stu-id="60d79-499">Note that a solution that uses a DR site outside Azure will require more work to configure, develop, deploy, and maintain.</span></span> <span data-ttu-id="60d79-500">Egyúttal nehezebb a bevált gyakorlat a kereszt-architektúra valósít meg.</span><span class="sxs-lookup"><span data-stu-id="60d79-500">It's also more difficult to implement proven practices in a cross-cloud architecture.</span></span> <span data-ttu-id="60d79-501">Bár a felhőplatformokkal hasonló fogalmait, az API-k és architektúrák eltérőek.</span><span class="sxs-lookup"><span data-stu-id="60d79-501">Although cloud platforms have similar high-level concepts, the APIs and architectures are different.</span></span>

<span data-ttu-id="60d79-502">A vész-Helyreállítási stratégia több felhőalapú platform alapul, akkor értékes ahhoz, hogy a megoldás kialakításának absztrakciós réteget szerepeljen.</span><span class="sxs-lookup"><span data-stu-id="60d79-502">If your DR strategy relies upon multiple cloud platforms, it's valuable to include abstraction layers in the design of the solution.</span></span> <span data-ttu-id="60d79-503">A szükségtelenné fejlesztésére, és ugyanahhoz az alkalmazáshoz, a másik felhőt platformok katasztrófa esetén két különböző verzióinak kezelése.</span><span class="sxs-lookup"><span data-stu-id="60d79-503">This eliminates the need to develop and maintain two different versions of the same application for different cloud platforms in case of disaster.</span></span> <span data-ttu-id="60d79-504">A hibrid forgatókönyv esetén az Azure virtuális gépek vagy az Azure Tárolószolgáltatás használata lehet egyszerűbben ezekben az esetekben a felhő-specifikus PaaS tervek használatát.</span><span class="sxs-lookup"><span data-stu-id="60d79-504">As with the hybrid scenario, the use of Azure Virtual Machines or Azure Container Service might be easier in these cases than the use of cloud-specific PaaS designs.</span></span>

## <a name="automation"></a><span data-ttu-id="60d79-505">Automatizálás</span><span class="sxs-lookup"><span data-stu-id="60d79-505">Automation</span></span>
<span data-ttu-id="60d79-506">A minta csak ismertettük némelyike szükséges offline központi telepítésekhez gyors aktiválásának, valamint a rendszer meghatározott részeit visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="60d79-506">Some of the patterns that we just discussed require quick activation of offline deployments as well as restoration of specific parts of a system.</span></span> <span data-ttu-id="60d79-507">Automatizálási parancsfájlokat az igény szerinti erőforrások aktiválhatja és gyorsan állíthat rendszerbe megoldásokat.</span><span class="sxs-lookup"><span data-stu-id="60d79-507">Automation scripts can activate resources on demand and deploy solutions rapidly.</span></span> <span data-ttu-id="60d79-508">Az automatizálási vész-Helyreállítási kapcsolatos példák használata alatt [Azure PowerShell](https://msdn.microsoft.com/library/azure/jj156055.aspx), de használatával a [Azure CLI](https://docs.microsoft.com/en-us/cli/azure/get-started-with-azure-cli) vagy a [szolgáltatásfelügyelet REST API](https://msdn.microsoft.com/library/azure/ee460799.aspx) helyes módon is.</span><span class="sxs-lookup"><span data-stu-id="60d79-508">The DR-related automation examples below use [Azure PowerShell](https://msdn.microsoft.com/library/azure/jj156055.aspx), but using the [Azure CLI](https://docs.microsoft.com/en-us/cli/azure/get-started-with-azure-cli) or the [Service Management REST API](https://msdn.microsoft.com/library/azure/ee460799.aspx) are also good options.</span></span>

<span data-ttu-id="60d79-509">Automatizálási parancsfájlokat kezelheti a vész-Helyreállítási nem transzparens módon kezeli az Azure tulajdonságát.</span><span class="sxs-lookup"><span data-stu-id="60d79-509">Automation scripts manage aspects of DR not transparently handled by Azure.</span></span> <span data-ttu-id="60d79-510">Ennek eredménye következetes és ismételhető, minimalizálja a emberi tévedések.</span><span class="sxs-lookup"><span data-stu-id="60d79-510">This produces consistent and repeatable results, minimizing human error.</span></span> <span data-ttu-id="60d79-511">Előre definiált vész-Helyreállítási parancsfájlokat is, hogy a rendszer és a bennük foglalt részeit során egy olyan vészhelyzet esetén idő csökkentése érdekében.</span><span class="sxs-lookup"><span data-stu-id="60d79-511">Predefined DR scripts also reduce the time to rebuild a system and its constituent parts during a disaster.</span></span> <span data-ttu-id="60d79-512">Nem szeretnénk próbálja meg manuálisan mérje fel, a hely visszaállítása, amíg le, és elveszett pénz percenként.</span><span class="sxs-lookup"><span data-stu-id="60d79-512">You don’t want to try to manually figure out how to restore your site while it's down and losing money every minute.</span></span>

<span data-ttu-id="60d79-513">Tesztelje a parancsfájlokat ismételten elejétől a végéig.</span><span class="sxs-lookup"><span data-stu-id="60d79-513">Test your scripts repeatedly from start to finish.</span></span> <span data-ttu-id="60d79-514">Annak ellenőrzése után a alapvető funkciókat, ügyeljen arra, hogy tesztelje azokat [katasztrófa szimuláció](#disaster-simulation).</span><span class="sxs-lookup"><span data-stu-id="60d79-514">After verifying their basic functionality, make sure to test them in [disaster simulation](#disaster-simulation).</span></span> <span data-ttu-id="60d79-515">Ez segít a parancsfájlok vagy folyamatok hibák fedik le.</span><span class="sxs-lookup"><span data-stu-id="60d79-515">This helps uncover defects in the scripts or processes.</span></span>

<span data-ttu-id="60d79-516">Az Automation szolgáltatásban, a legjobb, ha egy PowerShell-parancsfájlok vagy parancssori felület (CLI) parancsfájlok Azure vész-helyreállítási-tárházat.</span><span class="sxs-lookup"><span data-stu-id="60d79-516">A best practice with automation is to create a repository of PowerShell scripts or command-line interface (CLI) scripts for Azure disaster recovery.</span></span> <span data-ttu-id="60d79-517">Egyértelműen megjelölni, és kategorizálása őket a gyors elérés érdekében.</span><span class="sxs-lookup"><span data-stu-id="60d79-517">Clearly mark and categorize them for quick access.</span></span> <span data-ttu-id="60d79-518">A tárház és a parancsfájlok versioning elsődleges személyt kijelölni.</span><span class="sxs-lookup"><span data-stu-id="60d79-518">Designate a primary person to manage the repository and versioning of the scripts.</span></span> <span data-ttu-id="60d79-519">Dokumentum jól igazodik ismereteket szeretnének elsajátítani a paraméterek és példákat a parancsfájlt használja őket.</span><span class="sxs-lookup"><span data-stu-id="60d79-519">Document them well with explanations of parameters and examples of script use.</span></span> <span data-ttu-id="60d79-520">Bizonyosodjon meg arról, hogy Ön szinkronban tartsa az ebben a dokumentációban és az Azure-környezetekhez.</span><span class="sxs-lookup"><span data-stu-id="60d79-520">Also ensure that you keep this documentation in sync with your Azure deployments.</span></span> <span data-ttu-id="60d79-521">Ez a célja, hogy egy elsődleges személy feladata a tárház mindegyik részének aláhúzásjeleket tartalmazhatnak.</span><span class="sxs-lookup"><span data-stu-id="60d79-521">This underscores the purpose of having a primary person in charge of all parts of the repository.</span></span>

## <a name="failure-detection"></a><span data-ttu-id="60d79-522">Hiba észlelése</span><span class="sxs-lookup"><span data-stu-id="60d79-522">Failure detection</span></span>
<span data-ttu-id="60d79-523">Rendelkezésre álláshoz és vészhelyreállításhoz kapcsolatos problémák kezeléséhez, észlelheti és diagnosztizálhatja a hibák képesnek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="60d79-523">To correctly handle problems with availability and disaster recovery, you must be able to detect and diagnose failures.</span></span> <span data-ttu-id="60d79-524">Hajtsa végre a kiszolgáló speciális és a központi telepítés figyelésének gyors felismerése a rendszer vagy az összetevők hirtelen elérhetetlenné válik.</span><span class="sxs-lookup"><span data-stu-id="60d79-524">Perform advanced server and deployment monitoring to quickly recognize when a system or its components suddenly become unavailable.</span></span> <span data-ttu-id="60d79-525">Figyelési eszközök általános állapotát, a felhőszolgáltatás és a függőségek felmérő része a munka hajthat végre.</span><span class="sxs-lookup"><span data-stu-id="60d79-525">Monitoring tools that assess the overall health of the cloud service and its dependencies can perform part of this work.</span></span> <span data-ttu-id="60d79-526">Egy megfelelő Microsoft eszköz [System Center 2016](https://www.microsoft.com/en-us/server-cloud/products/system-center-2016/).</span><span class="sxs-lookup"><span data-stu-id="60d79-526">One suitable Microsoft tool is [System Center 2016](https://www.microsoft.com/en-us/server-cloud/products/system-center-2016/).</span></span> <span data-ttu-id="60d79-527">Külső eszközöket is biztosít figyelési lehetőségek körét.</span><span class="sxs-lookup"><span data-stu-id="60d79-527">Third-party tools can also provide monitoring capabilities.</span></span> <span data-ttu-id="60d79-528">A legtöbb figyelési megoldások nyomon követheti a főbb teljesítményszámlálók és a szolgáltatás rendelkezésre állása.</span><span class="sxs-lookup"><span data-stu-id="60d79-528">Most monitoring solutions track key performance counters and service availability.</span></span>

<span data-ttu-id="60d79-529">Annak ellenére, hogy ezek az eszközök létfontosságú, meg kell terveznie és a jelentéskészítés a felhőszolgáltatásban.</span><span class="sxs-lookup"><span data-stu-id="60d79-529">Although these tools are vital, you must plan for fault detection and reporting within a cloud service.</span></span> <span data-ttu-id="60d79-530">Megfelelően használni az Azure Diagnostics is meg kell tervezni.</span><span class="sxs-lookup"><span data-stu-id="60d79-530">You must also plan to properly use Azure Diagnostics.</span></span> <span data-ttu-id="60d79-531">Egyéni teljesítményszámlálóit vagy eseménynapló bejegyzés is lehet a teljes stratégiájának a részét.</span><span class="sxs-lookup"><span data-stu-id="60d79-531">Custom performance counters or event-log entries can also be part of the overall strategy.</span></span> <span data-ttu-id="60d79-532">Így lehetővé teszi több adat esetén gyorsan diagnosztizálhatja a problémát, és állítsa vissza a szolgáltatás összes funkciójáról.</span><span class="sxs-lookup"><span data-stu-id="60d79-532">This provides more data during failures to quickly diagnose the problem and restore full capabilities.</span></span> <span data-ttu-id="60d79-533">A Hálózatfigyelő eszközök segítségével meghatározhatja az alkalmazás állapotának további metrikák is tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="60d79-533">It also provides additional metrics that the monitoring tools can use to determine application health.</span></span> <span data-ttu-id="60d79-534">További információkért lásd: [Azure Diagnostics engedélyezése az Azure Cloud Services](/azure/cloud-services/cloud-services-dotnet-diagnostics/).</span><span class="sxs-lookup"><span data-stu-id="60d79-534">For more information, see [Enabling Azure Diagnostics in Azure Cloud Services](/azure/cloud-services/cloud-services-dotnet-diagnostics/).</span></span> <span data-ttu-id="60d79-535">Olyan, átfogó "állapotmodell" tervezéséről tárgyalását lásd: [Failsafe: Útmutató a rugalmas felhő architektúrák](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="60d79-535">For a discussion of how to plan for an overall “health model,” see [Failsafe: Guidance for Resilient Cloud Architectures](https://channel9.msdn.com/Series/FailSafe).</span></span>

## <a name="disaster-simulation"></a><span data-ttu-id="60d79-536">Vészhelyreállítás szimulálása</span><span class="sxs-lookup"><span data-stu-id="60d79-536">Disaster simulation</span></span>
<span data-ttu-id="60d79-537">Szimuláció tesztelés magában foglalja a kis valós helyzetek létrehozását a munkahelyi emelet, és figyelje meg, hogyan reagáljon a a csoport tagjai.</span><span class="sxs-lookup"><span data-stu-id="60d79-537">Simulation testing involves creating small real-life situations on the work floor to observe how the team members react.</span></span> <span data-ttu-id="60d79-538">Szimulációja is látható, hogyan hatékony megoldások szerepelnek a helyreállítási terv.</span><span class="sxs-lookup"><span data-stu-id="60d79-538">Simulations also show how effective the solutions are in the recovery plan.</span></span> <span data-ttu-id="60d79-539">Végrehajtás szimulációja, hogy a létrehozott forgatókönyvek nem zavarja a tényleges üzleti közben továbbra is valós helyzetek például már.</span><span class="sxs-lookup"><span data-stu-id="60d79-539">Execute simulations so that the created scenarios don't disrupt actual business, while still feeling like real situations.</span></span>

<span data-ttu-id="60d79-540">Fontolja meg a "kapcsolótábla" manuálisan szimulálása elérhetőségével kapcsolatos problémákat a kérelemben egy típusú újratervezni.</span><span class="sxs-lookup"><span data-stu-id="60d79-540">Consider architecting a type of “switchboard” in the application to manually simulate availability issues.</span></span> <span data-ttu-id="60d79-541">Például egy letölthető kapcsolón keresztül indítható el egy rendezési modul adatbázis kivételek által okozza, hogy megfelelően működni.</span><span class="sxs-lookup"><span data-stu-id="60d79-541">For instance, through a soft switch, trigger database access exceptions for an ordering module by causing it to malfunction.</span></span> <span data-ttu-id="60d79-542">A hálózati illesztő szinten más modulok hasonló egyszerűsített megközelítések is igénybe vehet.</span><span class="sxs-lookup"><span data-stu-id="60d79-542">You can take similar lightweight approaches for other modules at the network interface level.</span></span>

<span data-ttu-id="60d79-543">A szimuláció nem megfelelően foglalkozott fellépő esetleges problémákat mutatja be.</span><span class="sxs-lookup"><span data-stu-id="60d79-543">The simulation highlights any issues that were inadequately addressed.</span></span> <span data-ttu-id="60d79-544">A szimulált forgatókönyvek teljesen ellenőrizhetőnek kell lenniük.</span><span class="sxs-lookup"><span data-stu-id="60d79-544">The simulated scenarios must be completely controllable.</span></span> <span data-ttu-id="60d79-545">Ez azt jelenti, hogy akkor is, ha a helyreállítási terv úgy tűnik, hogy hibás, visszaállíthatja a helyzet vissza a normál jelentős károsodása nélkül.</span><span class="sxs-lookup"><span data-stu-id="60d79-545">This means that, even if the recovery plan seems to be failing, you can restore the situation back to normal without causing any significant damage.</span></span> <span data-ttu-id="60d79-546">Fontos továbbá, tájékoztatják a magasabb szintű felügyeleti arról, hogy mikor és hogyan a szimuláció gyakorlatok fogja végrehajtani.</span><span class="sxs-lookup"><span data-stu-id="60d79-546">It’s also important that you inform higher-level management about when and how the simulation exercises will be executed.</span></span> <span data-ttu-id="60d79-547">Ezt a tervet az idő vagy az erőforrások lesz hatással a szimuláció kell részletesen.</span><span class="sxs-lookup"><span data-stu-id="60d79-547">This plan should detail the time or resources affected during the simulation.</span></span> <span data-ttu-id="60d79-548">A mértékek siker is definiálhat a vész-helyreállítási terv tesztelése során.</span><span class="sxs-lookup"><span data-stu-id="60d79-548">Also define the measures of success when testing your disaster recovery plan.</span></span>

<span data-ttu-id="60d79-549">Számos más módszert tesztelheti a vész-helyreállítási tervek.</span><span class="sxs-lookup"><span data-stu-id="60d79-549">Several other techniques can test disaster recovery plans.</span></span> <span data-ttu-id="60d79-550">Azonban legtöbbjük nem egyszerűen az alábbi alapvető eljárások változata.</span><span class="sxs-lookup"><span data-stu-id="60d79-550">However, most of them are simply variations of these basic techniques.</span></span> <span data-ttu-id="60d79-551">Ez a leképezés tesztelése az, hogy a helyreállítási terv megvalósíthatósági kiértékelése.</span><span class="sxs-lookup"><span data-stu-id="60d79-551">The intent of this testing is to evaluate the feasibility of the recovery plan.</span></span> <span data-ttu-id="60d79-552">A részleteket az egyszerű helyreállítási terv hiányosságait felderítésére összpontosít vész-helyreállítási tesztelése.</span><span class="sxs-lookup"><span data-stu-id="60d79-552">Disaster recovery testing focuses on the details to discover gaps in the basic recovery plan.</span></span>

## <a name="service-specific-guidance"></a><span data-ttu-id="60d79-553">Szolgáltatással kapcsolatos útmutatást</span><span class="sxs-lookup"><span data-stu-id="60d79-553">Service-specific guidance</span></span>

<span data-ttu-id="60d79-554">A következő témakörök ismertetik a katasztrófa utáni helyreállítás adott Azure-szolgáltatások:</span><span class="sxs-lookup"><span data-stu-id="60d79-554">The following topics describe disaster recovery specific Azure services:</span></span>

| <span data-ttu-id="60d79-555">Szolgáltatás</span><span class="sxs-lookup"><span data-stu-id="60d79-555">Service</span></span> | <span data-ttu-id="60d79-556">Témakör</span><span class="sxs-lookup"><span data-stu-id="60d79-556">Topic</span></span> |
|---------|-------|
| <span data-ttu-id="60d79-557">Cloud Services</span><span class="sxs-lookup"><span data-stu-id="60d79-557">Cloud Services</span></span> | [<span data-ttu-id="60d79-558">Mi a teendő az Azure Cloud Servicest befolyásoló Azure szolgáltatás kiesése esetén?</span><span class="sxs-lookup"><span data-stu-id="60d79-558">What to do in the event of an Azure service disruption that impacts Azure Cloud Services</span></span>](/azure/cloud-services/cloud-services-disaster-recovery-guidance) |
| <span data-ttu-id="60d79-559">Key Vault</span><span class="sxs-lookup"><span data-stu-id="60d79-559">Key Vault</span></span> | [<span data-ttu-id="60d79-560">Az Azure Key Vault rendelkezésre állás és redundancia</span><span class="sxs-lookup"><span data-stu-id="60d79-560">Azure Key Vault availability and redundancy</span></span>](/azure/key-vault/key-vault-disaster-recovery-guidance) |
|<span data-ttu-id="60d79-561">Storage</span><span class="sxs-lookup"><span data-stu-id="60d79-561">Storage</span></span> | [<span data-ttu-id="60d79-562">Mi a teendő, ha egy Azure Storage kimaradás során</span><span class="sxs-lookup"><span data-stu-id="60d79-562">What to do if an Azure Storage outage occurs</span></span>](/azure/storage/storage-disaster-recovery-guidance) |
| <span data-ttu-id="60d79-563">SQL Database</span><span class="sxs-lookup"><span data-stu-id="60d79-563">SQL Database</span></span> | [<span data-ttu-id="60d79-564">Egy Azure SQL Database vagy feladatátvételi visszaállításához a másodlagos</span><span class="sxs-lookup"><span data-stu-id="60d79-564">Restore an Azure SQL Database or failover to a secondary</span></span>](/azure/sql-database/sql-database-disaster-recovery) |
| <span data-ttu-id="60d79-565">Virtual machines (Virtuális gépek)</span><span class="sxs-lookup"><span data-stu-id="60d79-565">Virtual machines</span></span> | [<span data-ttu-id="60d79-566">Mi a teendő arra az esetre, ha egy Azure szolgáltatás megszűnésének hatással van az Azure virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="60d79-566">What to do in the event that an Azure service disruption impacts Azure virtual machines</span></span>](/azure/virtual-machines/virtual-machines-disaster-recovery-guidance) |
| <span data-ttu-id="60d79-567">Virtuális hálózatok</span><span class="sxs-lookup"><span data-stu-id="60d79-567">Virtual networks</span></span> | [<span data-ttu-id="60d79-568">Virtuális hálózat – az üzletmenet folytonossága</span><span class="sxs-lookup"><span data-stu-id="60d79-568">Virtual Network – Business Continuity</span></span>](/azure/virtual-network/virtual-network-disaster-recovery-guidance) |


