---
title: Eseményvezérelt architektúra
titleSuffix: Azure Application Architecture Guide
description: Ismerteti a előnyeit, kihívásait és ajánlott eljárások az eseményvezérelt és IoT-architektúráival az Azure-ban.
author: MikeWasson
ms.date: 08/30/2018
ms.custom: seojan19
ms.openlocfilehash: 87a4c859517d50f3cc9f0125c5596c1cb4f92207
ms.sourcegitcommit: 1f4cdb08fe73b1956e164ad692f792f9f635b409
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 01/08/2019
ms.locfileid: "54111342"
---
# <a name="event-driven-architecture-style"></a><span data-ttu-id="2c4c6-103">Eseményvezérelt architektúra</span><span class="sxs-lookup"><span data-stu-id="2c4c6-103">Event-driven architecture style</span></span>

<span data-ttu-id="2c4c6-104">Az eseményvezérelt architektúra az eseménystreamet létrehozó **eseménykészítőkből** és az eseményeket figyelő **eseményfeldolgozókból** áll.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-104">An event-driven architecture consists of **event producers** that generate a stream of events, and **event consumers** that listen for the events.</span></span>

![Az eseményvezérelt architektúra stílusának ábrája](./images/event-driven.svg)

<span data-ttu-id="2c4c6-106">Az események kézbesítése közel valós időben történik, így a feldolgozók azonnal reagálhatnak rájuk, amint bekövetkeznek.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-106">Events are delivered in near real time, so consumers can respond immediately to events as they occur.</span></span> <span data-ttu-id="2c4c6-107">A készítők el vannak választva a feldolgozóktól – a készítő nem tudja, hogy mely feldolgozók figyelik az eseményeket.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-107">Producers are decoupled from consumers &mdash; a producer doesn't know which consumers are listening.</span></span> <span data-ttu-id="2c4c6-108">A feldolgozók szintén el vannak választva egymástól, és minden feldolgozó minden eseményt lát.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-108">Consumers are also decoupled from each other, and every consumer sees all of the events.</span></span> <span data-ttu-id="2c4c6-109">Ez eltér a [versengő felhasználók][competing-consumers] mintától, amelyben a feldolgozók egy üzenetsorból kérik le az üzeneteket, és az üzenetek feldolgozására csak egyszer kerül sor (amennyiben nem történik hiba).</span><span class="sxs-lookup"><span data-stu-id="2c4c6-109">This differs from a [Competing Consumers][competing-consumers] pattern, where consumers pull messages from a queue and a message is processed just once (assuming no errors).</span></span> <span data-ttu-id="2c4c6-110">Bizonyos rendszerekben, amilyen például az IoT, az események betöltése nagyon nagy mennyiségben történik.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-110">In some systems, such as IoT, events must be ingested at very high volumes.</span></span>

<span data-ttu-id="2c4c6-111">Az eseményvezérelt architektúra közzétevői/előfizetői vagy eseménystreamelési modellt használhat.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-111">An event driven architecture can use a pub/sub model or an event stream model.</span></span>

- <span data-ttu-id="2c4c6-112">**Közzétevői/előfizetői**: Az üzenetkezelési infrastruktúra nyomon követi az előfizetéseket.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-112">**Pub/sub**: The messaging infrastructure keeps track of subscriptions.</span></span> <span data-ttu-id="2c4c6-113">Esemény közzétételekor az eseményt minden előfizetőnek elküldi.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-113">When an event is published, it sends the event to each subscriber.</span></span> <span data-ttu-id="2c4c6-114">Az esemény fogadását követően az esemény nem játszható vissza, és az új előfizetők nem látják az eseményt.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-114">After an event is received, it cannot be replayed, and new subscribers do not see the event.</span></span>

- <span data-ttu-id="2c4c6-115">**Eseménystreamelés**: Eseményeket egy naplóba írja a program.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-115">**Event streaming**: Events are written to a log.</span></span> <span data-ttu-id="2c4c6-116">A rendszer szigorú sorrendben tárolja az eseményeket (egy partíción belül), és meg is őrzi őket.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-116">Events are strictly ordered (within a partition) and durable.</span></span> <span data-ttu-id="2c4c6-117">Az ügyfelek nem fizetnek elő a streamre, hanem a stream bármelyik részét beolvashatják.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-117">Clients don't subscribe to the stream, instead a client can read from any part of the stream.</span></span> <span data-ttu-id="2c4c6-118">Az ügyfél felelőssége, hogy továbbhaladjon a streamen belül.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-118">The client is responsible for advancing its position in the stream.</span></span> <span data-ttu-id="2c4c6-119">Ez azt jelenti, hogy az ügyfél bármikor csatlakozhat, és visszajátszhatja az eseményeket.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-119">That means a client can join at any time, and can replay events.</span></span>

<span data-ttu-id="2c4c6-120">A feldolgozói oldalon több gyakori változat áll rendelkezésre:</span><span class="sxs-lookup"><span data-stu-id="2c4c6-120">On the consumer side, there are some common variations:</span></span>

- <span data-ttu-id="2c4c6-121">**Egyszerű eseményfeldolgozás**.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-121">**Simple event processing**.</span></span> <span data-ttu-id="2c4c6-122">Az esemény azonnali műveletet aktivál a feldolgozónál.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-122">An event immediately triggers an action in the consumer.</span></span> <span data-ttu-id="2c4c6-123">Az Azure Functions és egy Service Bus-trigger használatával például kiválthatja egy függvény végrehajtását, amikor közzétesznek egy üzenetet egy Service Bus-témakörben.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-123">For example, you could use Azure Functions with a Service Bus trigger, so that a function executes whenever a message is published to a Service Bus topic.</span></span>

- <span data-ttu-id="2c4c6-124">**Összetett eseményfeldolgozás**.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-124">**Complex event processing**.</span></span> <span data-ttu-id="2c4c6-125">A feldolgozó az eseményadatokban található mintákat keresve dolgoz fel egy eseménysorozatot egy olyan technológiával, mint például az Azure Stream Analytics vagy az Apache Storm.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-125">A consumer processes a series of events, looking for patterns in the event data, using a technology such as Azure Stream Analytics or Apache Storm.</span></span> <span data-ttu-id="2c4c6-126">Összesíthet például beágyazott eszközből származó adatokat egy adott időtartamra vonatkozóan, és értesítést hozhat létre, ha a mozgó átlag átlép egy bizonyos küszöbértéket.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-126">For example, you could aggregate readings from an embedded device over a time window, and generate a notification if the moving average crosses a certain threshold.</span></span>

- <span data-ttu-id="2c4c6-127">**Eseménystream-feldolgozás**.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-127">**Event stream processing**.</span></span> <span data-ttu-id="2c4c6-128">Egy adatstreamelési platformot (például az Azure IoT Hubot vagy az Apache Kafkát) folyamatként használva olvashatja be az eseményeket, és továbbíthatja azokat a streamfeldolgozóknak.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-128">Use a data streaming platform, such as Azure IoT Hub or Apache Kafka, as a pipeline to ingest events and feed them to stream processors.</span></span> <span data-ttu-id="2c4c6-129">A streamfeldolgozók feldolgozzák vagy átalakítják a streamet.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-129">The stream processors act to process or transform the stream.</span></span> <span data-ttu-id="2c4c6-130">Több streamfeldolgozó is használható az alkalmazás különböző alrendszereihez.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-130">There may be multiple stream processors for different subsystems of the application.</span></span> <span data-ttu-id="2c4c6-131">Ez a megközelítés jó megoldás lehet IoT számítási feladatokhoz.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-131">This approach is a good fit for IoT workloads.</span></span>

<span data-ttu-id="2c4c6-132">Az események forrása lehet a rendszeren kívüli is, ilyenek például egy IoT-megoldás fizikai eszközei.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-132">The source of the events may be external to the system, such as physical devices in an IoT solution.</span></span> <span data-ttu-id="2c4c6-133">Ebben az esetben a rendszernek képesnek kell lennie az adatoknak olyan mennyiségben és átviteli sebességen történő beolvasására, amelyet az adatforrás megkövetel.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-133">In that case, the system must be able to ingest the data at the volume and throughput that is required by the data source.</span></span>

<span data-ttu-id="2c4c6-134">A fenti logikai ábrán az egyes feldolgozótípusok külön dobozként jelennek meg.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-134">In the logical diagram above, each type of consumer is shown as a single box.</span></span> <span data-ttu-id="2c4c6-135">A gyakorlatban sokszor előfordul, hogy egy feldolgozó több példánya fut is annak érdekében, nehogy a feldolgozó hibaérzékeny ponttá váljon a rendszerben.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-135">In practice, it's common to have multiple instances of a consumer, to avoid having the consumer become a single point of failure in system.</span></span> <span data-ttu-id="2c4c6-136">Több példányra a nagy mennyiségű vagy gyakori események kezeléséhez is szükség lehet.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-136">Multiple instances might also be necessary to handle the volume and frequency of events.</span></span> <span data-ttu-id="2c4c6-137">Emellett egy adott feldolgozó több szálon is feldolgozhat eseményeket.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-137">Also, a single consumer might process events on multiple threads.</span></span> <span data-ttu-id="2c4c6-138">Ez kihívásokat támaszthat, ha az eseményeket sorrendben kell feldolgozni, vagy „pontosan egyszeri” szemantikára van szükség.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-138">This can create challenges if events must be processed in order, or require exactly-once semantics.</span></span> <span data-ttu-id="2c4c6-139">Lásd: [A koordináció minimalizálása][minimize-coordination].</span><span class="sxs-lookup"><span data-stu-id="2c4c6-139">See [Minimize Coordination][minimize-coordination].</span></span>

## <a name="when-to-use-this-architecture"></a><span data-ttu-id="2c4c6-140">Mikor érdemes ezt az architektúrát használni?</span><span class="sxs-lookup"><span data-stu-id="2c4c6-140">When to use this architecture</span></span>

- <span data-ttu-id="2c4c6-141">Több alrendszernek ugyanazokat az eseményeket kell feldolgoznia.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-141">Multiple subsystems must process the same events.</span></span>
- <span data-ttu-id="2c4c6-142">Valós idejű feldolgozásra van szükség, minimális időbeli késés mellett.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-142">Real-time processing with minimum time lag.</span></span>
- <span data-ttu-id="2c4c6-143">Összetett eseményfeldolgozásra van szükség, például mintaegyeztetésre vagy időtartamokra vonatkozó összesítésre.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-143">Complex event processing, such as pattern matching or aggregation over time windows.</span></span>
- <span data-ttu-id="2c4c6-144">Nagy mennyiségű vagy gyakoriságú adatról van szó, például IoT esetén.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-144">High volume and high velocity of data, such as IoT.</span></span>

## <a name="benefits"></a><span data-ttu-id="2c4c6-145">Előnyök</span><span class="sxs-lookup"><span data-stu-id="2c4c6-145">Benefits</span></span>

- <span data-ttu-id="2c4c6-146">A létrehozók és a feldolgozók el vannak választva egymástól.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-146">Producers and consumers are decoupled.</span></span>
- <span data-ttu-id="2c4c6-147">Nincs szükség pontok közötti integrációra.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-147">No point-to point-integrations.</span></span> <span data-ttu-id="2c4c6-148">Az új feldolgozók egyszerűen adhatók hozzá a rendszerhez.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-148">It's easy to add new consumers to the system.</span></span>
- <span data-ttu-id="2c4c6-149">A feldolgozók az érkezésükkor azonnal reagálhatnak az eseményekre.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-149">Consumers can respond to events immediately as they arrive.</span></span>
- <span data-ttu-id="2c4c6-150">Hatékonyan méretezhető és elosztható.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-150">Highly scalable and distributed.</span></span>
- <span data-ttu-id="2c4c6-151">Az alrendszerek az eseménystream önálló nézetével rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-151">Subsystems have independent views of the event stream.</span></span>

## <a name="challenges"></a><span data-ttu-id="2c4c6-152">Problémák</span><span class="sxs-lookup"><span data-stu-id="2c4c6-152">Challenges</span></span>

- <span data-ttu-id="2c4c6-153">Garantált kézbesítés.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-153">Guaranteed delivery.</span></span> <span data-ttu-id="2c4c6-154">Egyes rendszerekben, különösen IoT-forgatókönyvek esetén, alapvető fontosságú az események kézbesítésének garantálása.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-154">In some systems, especially in IoT scenarios, it's crucial to guarantee that events are delivered.</span></span>
- <span data-ttu-id="2c4c6-155">Események feldolgozása sorrendben vagy pontosan egyszer.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-155">Processing events in order or exactly once.</span></span> <span data-ttu-id="2c4c6-156">Általában minden feldolgozótípus több példányban fut a rugalmasság és a méretezhetőség érdekében.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-156">Each consumer type typically runs in multiple instances, for resiliency and scalability.</span></span> <span data-ttu-id="2c4c6-157">Ez kihívást támaszthat, ha az eseményeket sorrendben kell feldolgozni (egy feldolgozótípuson belül), illetve ha a feldolgozási logika nem idempotens.</span><span class="sxs-lookup"><span data-stu-id="2c4c6-157">This can create a challenge if the events must be processed in order (within a consumer type), or if the processing logic is not idempotent.</span></span>

 <!-- links -->

[competing-consumers]: ../../patterns/competing-consumers.md
[minimize-coordination]: ../design-principles/minimize-coordination.md
