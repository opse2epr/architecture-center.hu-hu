---
title: Architektúra eseményvezérelt stílus
description: Előnyeit, kihívást és ajánlott eljárásai ismerteti eseményvezérelt és Azure IoT-architektúra
author: MikeWasson
ms.openlocfilehash: 3289bf784b02d62e3d0c1a29b4839c9be3501134
ms.sourcegitcommit: 3d9ee03e2dda23753661a80c7106d1789f5223bb
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 02/23/2018
---
# <a name="event-driven-architecture-style"></a><span data-ttu-id="e60b0-103">Architektúra eseményvezérelt stílus</span><span class="sxs-lookup"><span data-stu-id="e60b0-103">Event-driven architecture style</span></span>

<span data-ttu-id="e60b0-104">Egy eseményvezérelt architektúra áll **esemény gyártók** , amely egy az események streamjét, létrehozása és **eseményfelhasználók** , amely az események figyelését.</span><span class="sxs-lookup"><span data-stu-id="e60b0-104">An event-driven architecture consists of **event producers** that generate a stream of events, and **event consumers** that listen for the events.</span></span> 

![](./images/event-driven.svg)

<span data-ttu-id="e60b0-105">Az események azonnal közel valós időben, így a felhasználók válaszolhassanak azonnal események azok bekövetkezésekor.</span><span class="sxs-lookup"><span data-stu-id="e60b0-105">Events are delivered in near real time, so consumers can respond immediately to events as they occur.</span></span> <span data-ttu-id="e60b0-106">Gyártók vannak különválik fogyasztók &mdash; termelő nem ismert, mely a fogyasztók figyelő.</span><span class="sxs-lookup"><span data-stu-id="e60b0-106">Producers are decoupled from consumers &mdash; a producer doesn't know which consumers are listening.</span></span> <span data-ttu-id="e60b0-107">A fogyasztók is le vannak egymástól, és minden felhasználó számára megjelenített összes eseményt.</span><span class="sxs-lookup"><span data-stu-id="e60b0-107">Consumers are also decoupled from each other, and every consumer sees all of the events.</span></span> <span data-ttu-id="e60b0-108">Ez eltér a [versengő fogyasztók] [ competing-consumers] mintát, ahol a fogyasztók lekéréses üzenetek várólistából való várólistából, és csak egyszer dolgozza fel üzenet (feltéve, hogy nincs hiba).</span><span class="sxs-lookup"><span data-stu-id="e60b0-108">This differs from a [Competing Consumers][competing-consumers] pattern, where consumers pull messages from a queue and a message is processed just once (assuming no errors).</span></span> <span data-ttu-id="e60b0-109">Az egyes rendszerek, például az IoT események kell fogyasztanak, nagyon nagy kötetek.</span><span class="sxs-lookup"><span data-stu-id="e60b0-109">In some systems, such as IoT, events must be ingested at very high volumes.</span></span>

<span data-ttu-id="e60b0-110">Egy esemény architektúra pub/sub modell vagy egy esemény-adatfolyam modell használhatja.</span><span class="sxs-lookup"><span data-stu-id="e60b0-110">An event driven architecture can use a pub/sub model or an event stream model.</span></span> 

- <span data-ttu-id="e60b0-111">**Pub/sub**: az üzenetkezelési infrastruktúra nyomon követi az előfizetések.</span><span class="sxs-lookup"><span data-stu-id="e60b0-111">**Pub/sub**: The messaging infrastructure keeps track of subscriptions.</span></span> <span data-ttu-id="e60b0-112">Az esemény közzétételekor mindegyik előfizető az esemény küld.</span><span class="sxs-lookup"><span data-stu-id="e60b0-112">When an event is published, it sends the event to each subscriber.</span></span> <span data-ttu-id="e60b0-113">Egy esemény fogadását követően nem kell újból, és új előfizetők nem jelenik meg az esemény.</span><span class="sxs-lookup"><span data-stu-id="e60b0-113">After an event is received, it cannot be replayed, and new subscribers do not see the event.</span></span> 

- <span data-ttu-id="e60b0-114">**Adatfolyam-esemény**: események kerülnek egy naplóban.</span><span class="sxs-lookup"><span data-stu-id="e60b0-114">**Event streaming**: Events are written to a log.</span></span> <span data-ttu-id="e60b0-115">Események szigorúan csak rendezett (belül partíció) és tartós.</span><span class="sxs-lookup"><span data-stu-id="e60b0-115">Events are strictly ordered (within a partition) and durable.</span></span> <span data-ttu-id="e60b0-116">Az ügyfelek az adatfolyam nem előfizetni, ehelyett az adatfolyam valamely része egy ügyfél is olvasható.</span><span class="sxs-lookup"><span data-stu-id="e60b0-116">Clients don't subscribe to the stream, instead a client can read from any part of the stream.</span></span> <span data-ttu-id="e60b0-117">Az ügyfél felelős a pozíciót az adatfolyamban lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="e60b0-117">The client is responsible for advancing its position in the stream.</span></span> <span data-ttu-id="e60b0-118">Ez azt jelenti, hogy egy ügyfél bármikor csatlakozhat, és képes visszajátszásos események.</span><span class="sxs-lookup"><span data-stu-id="e60b0-118">That means a client can join at any time, and can replay events.</span></span>

<span data-ttu-id="e60b0-119">A fogyasztó oldalon közös változata is:</span><span class="sxs-lookup"><span data-stu-id="e60b0-119">On the consumer side, there are some common variations:</span></span>

- <span data-ttu-id="e60b0-120">**Egyszerű esemény feldolgozása**.</span><span class="sxs-lookup"><span data-stu-id="e60b0-120">**Simple event processing**.</span></span> <span data-ttu-id="e60b0-121">Egy esemény azonnal elindítja a végfelhasználói művelet.</span><span class="sxs-lookup"><span data-stu-id="e60b0-121">An event immediately triggers an action in the consumer.</span></span> <span data-ttu-id="e60b0-122">Például használhatja az Azure Functions az Service Bus eseményindító, úgy, hogy egy függvény hajt végre, amikor egy Service Bus-témakörbe közzétett egy üzenetet.</span><span class="sxs-lookup"><span data-stu-id="e60b0-122">For example, you could use Azure Functions with a Service Bus trigger, so that a function executes whenever a message is published to a Service Bus topic.</span></span>

- <span data-ttu-id="e60b0-123">**Az összetett eseményfeldolgozást**.</span><span class="sxs-lookup"><span data-stu-id="e60b0-123">**Complex event processing**.</span></span> <span data-ttu-id="e60b0-124">A fogyasztó dolgozza fel események sorozatát keres mintákat az adatok, például az Azure Stream Analytics vagy alatt futó Apache Storm technológiával.</span><span class="sxs-lookup"><span data-stu-id="e60b0-124">A consumer processes a series of events, looking for patterns in the event data, using a technology such as Azure Stream Analytics or Apache Storm.</span></span> <span data-ttu-id="e60b0-125">Például akkor képes összesíteni szivattyútelepek érzékelőinek adatai az embedded-eszköz egy olyan időkeretet keresztül, és generálása egy értesítést, ha a mozgóátlag keverve használ egy bizonyos küszöböt.</span><span class="sxs-lookup"><span data-stu-id="e60b0-125">For example, you could aggregate readings from an embedded device over a time window, and generate a notification if the moving average crosses a certain threshold.</span></span> 

- <span data-ttu-id="e60b0-126">**Az adatfolyam Eseményfeldolgozási**.</span><span class="sxs-lookup"><span data-stu-id="e60b0-126">**Event stream processing**.</span></span> <span data-ttu-id="e60b0-127">Egy adatfolyam platform, például az Azure IoT-központ vagy az Apache Kafka, mint a betöltési események és hírcsatornát őket adatfolyam processzorok folyamat használja.</span><span class="sxs-lookup"><span data-stu-id="e60b0-127">Use a data streaming platform, such as Azure IoT Hub or Apache Kafka, as a pipeline to ingest events and feed them to stream processors.</span></span> <span data-ttu-id="e60b0-128">Az adatfolyam processzorok folyamat való működésre, vagy az adatfolyam átalakítása.</span><span class="sxs-lookup"><span data-stu-id="e60b0-128">The stream processors act to process or transform the stream.</span></span> <span data-ttu-id="e60b0-129">Előfordulhat, hogy az alkalmazás különböző alrendszerek több adatfolyam processzor.</span><span class="sxs-lookup"><span data-stu-id="e60b0-129">There may be multiple stream processors for different subsystems of the application.</span></span> <span data-ttu-id="e60b0-130">Erre akkor remekül beválik, ha az IoT-munkaterhelések.</span><span class="sxs-lookup"><span data-stu-id="e60b0-130">This approach is a good fit for IoT workloads.</span></span>

<span data-ttu-id="e60b0-131">Lehet, hogy a rendszer, például egy IoT-megoldás a fizikai eszközök külső az események forrása.</span><span class="sxs-lookup"><span data-stu-id="e60b0-131">The source of the events may be external to the system, such as physical devices in an IoT solution.</span></span> <span data-ttu-id="e60b0-132">A rendszer ebben az esetben az adatok a kötet és az adatforrás által igényelt átviteli képesnek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="e60b0-132">In that case, the system must be able to ingest the data at the volume and throughput that is required by the data source.</span></span>

<span data-ttu-id="e60b0-133">Logikai a fenti ábrán minden ügyfél típusú egyetlen mezőben jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="e60b0-133">In the logical diagram above, each type of consumer is shown as a single box.</span></span> <span data-ttu-id="e60b0-134">Az eljárás az gyakori, hogy olyan ügyféllel, kívánja kerülni a fogyasztó a hibaérzékeny pontok kialakulását vált a rendszer több példánya is.</span><span class="sxs-lookup"><span data-stu-id="e60b0-134">In practice, it's common to have multiple instances of a consumer, to avoid having the consumer become a single point of failure in system.</span></span> <span data-ttu-id="e60b0-135">Lehet, hogy több példánya is szükségesek, hogy a kötet és az események gyakorisága.</span><span class="sxs-lookup"><span data-stu-id="e60b0-135">Multiple instances might also be necessary to handle the volume and frequency of events.</span></span> <span data-ttu-id="e60b0-136">Emellett egy-egy fogyasztó előfordulhat, hogy feldolgozni az eseményeket az egyszerre használható szálak.</span><span class="sxs-lookup"><span data-stu-id="e60b0-136">Also, a single consumer might process events on multiple threads.</span></span> <span data-ttu-id="e60b0-137">Ez kihívást hozhat létre, ha események sorrendben kell végrehajtani, vagy szükség pontosan-egyszer szemantikáját.</span><span class="sxs-lookup"><span data-stu-id="e60b0-137">This can create challenges if events must be processed in order, or require exactly-once semantics.</span></span> <span data-ttu-id="e60b0-138">Lásd: [minimalizálása érdekében koordinációs][minimize-coordination].</span><span class="sxs-lookup"><span data-stu-id="e60b0-138">See [Minimize Coordination][minimize-coordination].</span></span> 

## <a name="when-to-use-this-architecture"></a><span data-ttu-id="e60b0-139">Mikor érdemes használni, ez az architektúra</span><span class="sxs-lookup"><span data-stu-id="e60b0-139">When to use this architecture</span></span>

- <span data-ttu-id="e60b0-140">Több alrendszereket kell feldolgozni a azonos események.</span><span class="sxs-lookup"><span data-stu-id="e60b0-140">Multiple subsystems must process the same events.</span></span> 
- <span data-ttu-id="e60b0-141">A minimális időeltolódást valós idejű feldolgozással.</span><span class="sxs-lookup"><span data-stu-id="e60b0-141">Real-time processing with minimum time lag.</span></span>
- <span data-ttu-id="e60b0-142">Összetett Eseményfeldolgozási, például mintaegyezéshez vagy Összesítés idő windows keresztül.</span><span class="sxs-lookup"><span data-stu-id="e60b0-142">Complex event processing, such as pattern matching or aggregation over time windows.</span></span>
- <span data-ttu-id="e60b0-143">Nagy adatmennyiség és nagy sebességű adatok, például az IoT.</span><span class="sxs-lookup"><span data-stu-id="e60b0-143">High volume and high velocity of data, such as IoT.</span></span>

## <a name="benefits"></a><span data-ttu-id="e60b0-144">Előnyök</span><span class="sxs-lookup"><span data-stu-id="e60b0-144">Benefits</span></span>

- <span data-ttu-id="e60b0-145">Létrehozói és felhasználói le.</span><span class="sxs-lookup"><span data-stu-id="e60b0-145">Producers and consumers are decoupled.</span></span>
- <span data-ttu-id="e60b0-146">Nincs pont közötti pont-integrációja.</span><span class="sxs-lookup"><span data-stu-id="e60b0-146">No point-to point-integrations.</span></span> <span data-ttu-id="e60b0-147">Akkor is könnyen új felhasználók hozzáadása a rendszer.</span><span class="sxs-lookup"><span data-stu-id="e60b0-147">It's easy to add new consumers to the system.</span></span>
- <span data-ttu-id="e60b0-148">Felhasználók válaszolhassanak események azonnal azok az ügyfélszámítógépekre érkeznek.</span><span class="sxs-lookup"><span data-stu-id="e60b0-148">Consumers can respond to events immediately as they arrive.</span></span> 
- <span data-ttu-id="e60b0-149">Rugalmasan méretezhető, terjesztett.</span><span class="sxs-lookup"><span data-stu-id="e60b0-149">Highly scalable and distributed.</span></span> 
- <span data-ttu-id="e60b0-150">A alrendszereket az eseménystream független nézetek.</span><span class="sxs-lookup"><span data-stu-id="e60b0-150">Subsystems have independent views of the event stream.</span></span>

## <a name="challenges"></a><span data-ttu-id="e60b0-151">Kihívásai</span><span class="sxs-lookup"><span data-stu-id="e60b0-151">Challenges</span></span>

- <span data-ttu-id="e60b0-152">Garantált kézbesítés.</span><span class="sxs-lookup"><span data-stu-id="e60b0-152">Guaranteed delivery.</span></span> <span data-ttu-id="e60b0-153">Az egyes rendszerek, különösen az IoT-forgatókönyvek esetén rendkívül fontos garantálja, hogy kézbesíti az eseményeket.</span><span class="sxs-lookup"><span data-stu-id="e60b0-153">In some systems, especially in IoT scenarios, it's crucial to guarantee that events are delivered.</span></span>
- <span data-ttu-id="e60b0-154">Feldolgozási sorrendben események vagy pontosan egyszer.</span><span class="sxs-lookup"><span data-stu-id="e60b0-154">Processing events in order or exactly once.</span></span> <span data-ttu-id="e60b0-155">Minden felhasználói típus általában több példányát, a rugalmasság és a méretezhetőség fut.</span><span class="sxs-lookup"><span data-stu-id="e60b0-155">Each consumer type typically runs in multiple instances, for resiliency and scalability.</span></span> <span data-ttu-id="e60b0-156">Ez kihívást hozhat létre, ha az események (tartozó ügyfél) sorrendben kell végrehajtani, vagy ha a feldolgozó logika nem idempotent.</span><span class="sxs-lookup"><span data-stu-id="e60b0-156">This can create a challenge if the events must be processed in order (within a consumer type), or if the processing logic is not idempotent.</span></span>

## <a name="iot-architecture"></a><span data-ttu-id="e60b0-157">IoT-architektúra</span><span class="sxs-lookup"><span data-stu-id="e60b0-157">IoT architecture</span></span>

<span data-ttu-id="e60b0-158">Eseményvezérelt architektúrák olyan központi helyet foglalnak el az IoT-megoldások.</span><span class="sxs-lookup"><span data-stu-id="e60b0-158">Event-driven architectures are central to IoT solutions.</span></span> <span data-ttu-id="e60b0-159">Az alábbi ábra a IoT egy lehetséges logikai architektúráját mutatja be.</span><span class="sxs-lookup"><span data-stu-id="e60b0-159">The following diagram shows a possible logical architecture for IoT.</span></span> <span data-ttu-id="e60b0-160">A diagram az esemény-adatfolyam-összetevők a architektúra emeli ki.</span><span class="sxs-lookup"><span data-stu-id="e60b0-160">The diagram emphasizes the event-streaming components of the architecture.</span></span>

![](./images/iot.png)

<span data-ttu-id="e60b0-161">A **felhőátjáróhoz** ingests eszköz események, a felhő határt, egy megbízható, alacsony késésű rendszer üzenetküldési használatával.</span><span class="sxs-lookup"><span data-stu-id="e60b0-161">The **cloud gateway** ingests device events at the cloud boundary, using a reliable, low latency messaging system.</span></span>

<span data-ttu-id="e60b0-162">Eszközök el tudja küldeni események közvetlenül az átjáró, vagy egy **mező átjáró**.</span><span class="sxs-lookup"><span data-stu-id="e60b0-162">Devices might send events directly to the cloud gateway, or through a **field gateway**.</span></span> <span data-ttu-id="e60b0-163">A mező az átjáró az speciális eszközt vagy szoftvert, az eszközök általában közösen elhelyezett fogadó eseményeket, és továbbítja őket a felhőátjáróhoz.</span><span class="sxs-lookup"><span data-stu-id="e60b0-163">A field gateway is a specialized device or software, usually colocated with the devices, that receives events and forwards them to the cloud gateway.</span></span> <span data-ttu-id="e60b0-164">A mező átjáró is előfordulhat, hogy előfeldolgozása nyers eszköz események, funkciókat, például a szűrést, összesítési vagy protokoll átalakítás végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="e60b0-164">The field gateway might also preprocess the raw device events, performing functions such as filtering, aggregation, or protocol transformation.</span></span>

<span data-ttu-id="e60b0-165">Bevitel, után események halad át egy vagy több **adatfolyam-processzorok** , amelyek az adatok (például, hogy a tároló) útvonalát, vagy hajtsa végre a kapcsolódó elemzések és egyéb feldolgozási.</span><span class="sxs-lookup"><span data-stu-id="e60b0-165">After ingestion, events go through one or more **stream processors** that can route the data (for example, to storage) or perform analytics and other processing.</span></span>

<span data-ttu-id="e60b0-166">Az alábbiakban néhány gyakori hibatípusokat feldolgozása.</span><span class="sxs-lookup"><span data-stu-id="e60b0-166">The following are some common types of processing.</span></span> <span data-ttu-id="e60b0-167">(A lista létrehozási biztosan nem teljes.)</span><span class="sxs-lookup"><span data-stu-id="e60b0-167">(This list is certainly not exhaustive.)</span></span>

- <span data-ttu-id="e60b0-168">Írás a esemény cold tárhely, az archiválás vagy kötegelt elemzés.</span><span class="sxs-lookup"><span data-stu-id="e60b0-168">Writing event data to cold storage, for archiving or batch analytics.</span></span>

- <span data-ttu-id="e60b0-169">Elérési út analytics közbeni, az esemény-adatfolyam elemzésekor a (mellett) valós idejű, rendellenességek észlelését ismeri fel az minták keresztül működés közbeni idő windows vagy aktiváltak riasztásokat, ha egy adott feltétel lép fel az adatfolyam.</span><span class="sxs-lookup"><span data-stu-id="e60b0-169">Hot path analytics, analyzing the event stream in (near) real time, to detect anomalies, recognize patterns over rolling time windows, or trigger alerts when a specific condition occurs in the stream.</span></span> 

- <span data-ttu-id="e60b0-170">Kezeli a különleges típusú eszközök, például az értesítések és riasztások nem telemetriai üzeneteit.</span><span class="sxs-lookup"><span data-stu-id="e60b0-170">Handling special types of non-telemetry messages from devices, such as notifications and alarms.</span></span> 

- <span data-ttu-id="e60b0-171">Gépi tanulás.</span><span class="sxs-lookup"><span data-stu-id="e60b0-171">Machine learning.</span></span>

<span data-ttu-id="e60b0-172">A listák, amelyek az egyes elemek árnyékolt szürke összetevőket az IoT-rendszer nem közvetlenül kapcsolódó adatfolyam-esemény, de ide tartoznak a teljesség megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="e60b0-172">The boxes that are shaded gray show components of an IoT system that are not directly related to event streaming, but are included here for completeness.</span></span>

- <span data-ttu-id="e60b0-173">A **eszközbeállításjegyzékben** kiépített eszközt, beleértve az eszköz azonosítóját, és általában eszköz metaadatait, például a hely egy adatbázis.</span><span class="sxs-lookup"><span data-stu-id="e60b0-173">The **device registry** is a database of the provisioned devices, including the device IDs and usually device metadata, such as location.</span></span>

- <span data-ttu-id="e60b0-174">A **API kiépítés** egy közös külső felület üzembe helyezési és új eszközök regisztrációja.</span><span class="sxs-lookup"><span data-stu-id="e60b0-174">The **provisioning API** is a common external interface for provisioning and registering new devices.</span></span>

- <span data-ttu-id="e60b0-175">Bizonyos IoT-megoldás lehetővé teszi **parancs és a vezérlő üzenetek** eszközökre küldendő.</span><span class="sxs-lookup"><span data-stu-id="e60b0-175">Some IoT solutions allow **command and control messages** to be sent to devices.</span></span>

> <span data-ttu-id="e60b0-176">Ebben a szakaszban bemutatott IoT nagyon magas szintű nézetét, és sok subtleties és kihívásokkal kell figyelembe venni.</span><span class="sxs-lookup"><span data-stu-id="e60b0-176">This section has presented a very high-level view of IoT, and there are many subtleties and challenges to consider.</span></span> <span data-ttu-id="e60b0-177">Részletesebb referencia-architektúrában és vitafórum, tekintse meg a [Microsoft Azure IoT-Referenciaarchitektúra] [ iot-ref-arch] (PDF-fájl letöltése).</span><span class="sxs-lookup"><span data-stu-id="e60b0-177">For a more detailed reference architecture and discussion, see the [Microsoft Azure IoT Reference Architecture][iot-ref-arch] (PDF download).</span></span>

 <!-- links -->

[competing-consumers]: ../../patterns/competing-consumers.md
[iot-ref-arch]: https://azure.microsoft.com/updates/microsoft-azure-iot-reference-architecture-available/
[minimize-coordination]: ../design-principles/minimize-coordination.md


