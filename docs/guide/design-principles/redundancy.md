---
title: Tervezzen mindent redundánsra
titleSuffix: Azure Application Architecture Guide
description: Redundanciát építve az alkalmazásba elkerülheti a kritikus meghibásodási pontokat.
author: MikeWasson
ms.date: 08/30/2018
ms.custom: seojan19
ms.openlocfilehash: 784413f637e4f857a2ba3775f3d4de66c91fbd95
ms.sourcegitcommit: 1f4cdb08fe73b1956e164ad692f792f9f635b409
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 01/08/2019
ms.locfileid: "54111845"
---
# <a name="make-all-things-redundant"></a><span data-ttu-id="f9dac-103">Tervezzen mindent redundánsra</span><span class="sxs-lookup"><span data-stu-id="f9dac-103">Make all things redundant</span></span>

## <a name="build-redundancy-into-your-application-to-avoid-having-single-points-of-failure"></a><span data-ttu-id="f9dac-104">Redundanciát építve az alkalmazásba elkerülheti a kritikus meghibásodási pontokat</span><span class="sxs-lookup"><span data-stu-id="f9dac-104">Build redundancy into your application, to avoid having single points of failure</span></span>

<span data-ttu-id="f9dac-105">A rugalmas alkalmazások átirányítással megkerülik a hibákat.</span><span class="sxs-lookup"><span data-stu-id="f9dac-105">A resilient application routes around failure.</span></span> <span data-ttu-id="f9dac-106">Azonosítsa a kritikus útvonalakat az alkalmazásban.</span><span class="sxs-lookup"><span data-stu-id="f9dac-106">Identify the critical paths in your application.</span></span> <span data-ttu-id="f9dac-107">Van redundancia az útvonal minden pontján?</span><span class="sxs-lookup"><span data-stu-id="f9dac-107">Is there redundancy at each point in the path?</span></span> <span data-ttu-id="f9dac-108">Ha egy alrendszer meghiúsul, akkor az alkalmazás feladatainak átvétele megoldott?</span><span class="sxs-lookup"><span data-stu-id="f9dac-108">If a subsystem fails, will the application fail over to something else?</span></span>

## <a name="recommendations"></a><span data-ttu-id="f9dac-109">Javaslatok</span><span class="sxs-lookup"><span data-stu-id="f9dac-109">Recommendations</span></span>

<span data-ttu-id="f9dac-110">**Vegye figyelembe az üzleti követelményeket**.</span><span class="sxs-lookup"><span data-stu-id="f9dac-110">**Consider business requirements**.</span></span> <span data-ttu-id="f9dac-111">A rendszerbe épített redundancia mennyisége befolyásolhatja a költségeket és az összetettséget.</span><span class="sxs-lookup"><span data-stu-id="f9dac-111">The amount of redundancy built into a system can affect both cost and complexity.</span></span> <span data-ttu-id="f9dac-112">Az architektúrának az üzleti követelményeken kell alapulnia, például a helyreállítási időre vonatkozó célkitűzésen (RTO).</span><span class="sxs-lookup"><span data-stu-id="f9dac-112">Your architecture should be informed by your business requirements, such as recovery time objective (RTO).</span></span> <span data-ttu-id="f9dac-113">Egy több régióban történő üzembe helyezés például drágább, mint az egyrégiós üzembe helyezések, és bonyolultabb a kezelése.</span><span class="sxs-lookup"><span data-stu-id="f9dac-113">For example, a multi-region deployment is more expensive than a single-region deployment, and is more complicated to manage.</span></span> <span data-ttu-id="f9dac-114">Műveleti eljárásokra lesz szükség a feladatátvétel és a feladat-visszavétel kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="f9dac-114">You will need operational procedures to handle failover and failback.</span></span> <span data-ttu-id="f9dac-115">A nagyobb költségek és összetettség egyes üzleti forgatókönyvek esetében indokolt, mások esetében azonban nem.</span><span class="sxs-lookup"><span data-stu-id="f9dac-115">The additional cost and complexity might be justified for some business scenarios and not others.</span></span>

<span data-ttu-id="f9dac-116">**Helyezzen virtuális gépeket egy terheléselosztó mögé**.</span><span class="sxs-lookup"><span data-stu-id="f9dac-116">**Place VMs behind a load balancer**.</span></span> <span data-ttu-id="f9dac-117">Ne használjon önálló virtuális gépeket a kritikus fontosságú számítási feladatokhoz.</span><span class="sxs-lookup"><span data-stu-id="f9dac-117">Don't use a single VM for mission-critical workloads.</span></span> <span data-ttu-id="f9dac-118">Ehelyett helyezzen több virtuális gépet egy terheléselosztó mögé.</span><span class="sxs-lookup"><span data-stu-id="f9dac-118">Instead, place multiple VMs behind a load balancer.</span></span> <span data-ttu-id="f9dac-119">Ha valamelyik virtuális gép elérhetetlenné válik, a terheléselosztó a többi megfelelő állapotú virtuális gépre osztja el a forgalmat.</span><span class="sxs-lookup"><span data-stu-id="f9dac-119">If any VM becomes unavailable, the load balancer distributes traffic to the remaining healthy VMs.</span></span> <span data-ttu-id="f9dac-120">A konfiguráció üzembe helyezésével kapcsolatos tudnivalókért tekintse meg [a skálázhatóságot és a rendelkezésre állást több virtuális géppel megvalósító rendszer ismertetését][multi-vm-blueprint].</span><span class="sxs-lookup"><span data-stu-id="f9dac-120">To learn how to deploy this configuration, see [Multiple VMs for scalability and availability][multi-vm-blueprint].</span></span>

![Elosztott terhelésű virtuális gépek ábrája](./images/load-balancing.svg)

<span data-ttu-id="f9dac-122">**Replikáljon adatbázisokat**.</span><span class="sxs-lookup"><span data-stu-id="f9dac-122">**Replicate databases**.</span></span> <span data-ttu-id="f9dac-123">Az Azure SQL Database és a Cosmos DB automatikusan replikálja az adatokat a régión belül, és engedélyezheti a georeplikációt a régiók között.</span><span class="sxs-lookup"><span data-stu-id="f9dac-123">Azure SQL Database and Cosmos DB automatically replicate the data within a region, and you can enable geo-replication across regions.</span></span> <span data-ttu-id="f9dac-124">Ha IaaS adatbázis-megoldást használ, válasszon olyat, amely támogatja a replikációt és a feladatátvételt, például az [SQL Server Always On rendelkezésre állási csoportokat][sql-always-on].</span><span class="sxs-lookup"><span data-stu-id="f9dac-124">If you are using an IaaS database solution, choose one that supports replication and failover, such as [SQL Server Always On Availability Groups][sql-always-on].</span></span>

<span data-ttu-id="f9dac-125">**Engedélyezze a georeplikációt**.</span><span class="sxs-lookup"><span data-stu-id="f9dac-125">**Enable geo-replication**.</span></span> <span data-ttu-id="f9dac-126">Az [Azure SQL Database][sql-geo-replication] és a [Cosmos DB][cosmosdb-geo-replication] georeplikációja az adatok másodlagos olvasható replikáját hozza létre egy vagy több másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="f9dac-126">Geo-replication for [Azure SQL Database][sql-geo-replication] and [Cosmos DB][cosmosdb-geo-replication] creates secondary readable replicas of your data in one or more secondary regions.</span></span> <span data-ttu-id="f9dac-127">Leállás esetén az adatbázis feladatátvételt hajt végre a másodlagos régióba írásra.</span><span class="sxs-lookup"><span data-stu-id="f9dac-127">In the event of an outage, the database can fail over to the secondary region for writes.</span></span>

<span data-ttu-id="f9dac-128">**Partíciók rendelkezésre álláshoz**.</span><span class="sxs-lookup"><span data-stu-id="f9dac-128">**Partition for availability**.</span></span> <span data-ttu-id="f9dac-129">Gyakran használnak adatbázis-particionálást a jobb skálázhatóság érdekében, de ez a módszer a rendelkezésre állást is javíthatja.</span><span class="sxs-lookup"><span data-stu-id="f9dac-129">Database partitioning is often used to improve scalability, but it can also improve availability.</span></span> <span data-ttu-id="f9dac-130">Ha egy szegmens leáll, a többi szegmens továbbra is elérhető.</span><span class="sxs-lookup"><span data-stu-id="f9dac-130">If one shard goes down, the other shards can still be reached.</span></span> <span data-ttu-id="f9dac-131">Az egyik szegmens hibája csak a tranzakciók egy részét zavarja meg.</span><span class="sxs-lookup"><span data-stu-id="f9dac-131">A failure in one shard will only disrupt a subset of the total transactions.</span></span>

<span data-ttu-id="f9dac-132">**Végezzen üzembe helyezést több régióban**.</span><span class="sxs-lookup"><span data-stu-id="f9dac-132">**Deploy to more than one region**.</span></span> <span data-ttu-id="f9dac-133">A legnagyobb rendelkezésre állás érdekében egy vagy több régióban helyezze üzembe az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="f9dac-133">For the highest availability, deploy the application to more than one region.</span></span> <span data-ttu-id="f9dac-134">Így azon ritka esetekben, amikor egy probléma egy teljes régióra hatással van, az alkalmazás feladatátvételt végezhet egy másik régióra.</span><span class="sxs-lookup"><span data-stu-id="f9dac-134">That way, in the rare case when a problem affects an entire region, the application can fail over to another region.</span></span> <span data-ttu-id="f9dac-135">Az alábbi ábrán egy több régiót használó alkalmazás látható, amely az Azure Traffic Managerrel kezeli a feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="f9dac-135">The following diagram shows a multi-region application that uses Azure Traffic Manager to handle failover.</span></span>

![Az Azure Traffic Managerrel kezeli a feladatátvételt ábrája](./images/failover.svg)

<span data-ttu-id="f9dac-137">**Szinkronizálja az előtérbeli és a háttérbeli feladatátvételt**.</span><span class="sxs-lookup"><span data-stu-id="f9dac-137">**Synchronize front and backend failover**.</span></span> <span data-ttu-id="f9dac-138">Az Azure Traffic Managerrel végezhet feladatátvételt az előtérben.</span><span class="sxs-lookup"><span data-stu-id="f9dac-138">Use Azure Traffic Manager to fail over the front end.</span></span> <span data-ttu-id="f9dac-139">Ha az előtérrendszer az egyik régióban elérhetetlenné válik, a Traffic Manager a másodlagos régióba irányítja át az új kéréseket.</span><span class="sxs-lookup"><span data-stu-id="f9dac-139">If the front end becomes unreachable in one region, Traffic Manager will route new requests to the secondary region.</span></span> <span data-ttu-id="f9dac-140">Az adatbázis-megoldástól függően előfordulhat, hogy koordinálnia kell az adatbázis feladatátvételét.</span><span class="sxs-lookup"><span data-stu-id="f9dac-140">Depending on your database solution, you may need to coordinate failing over the database.</span></span>

<span data-ttu-id="f9dac-141">**Használjon automatikus feladatátvételt, de manuális feladat-visszavételt**.</span><span class="sxs-lookup"><span data-stu-id="f9dac-141">**Use automatic failover but manual failback**.</span></span> <span data-ttu-id="f9dac-142">A Traffic Managert használja az automatikus feladatátvételhez, az automatikus feladat-visszavételhez azonban ne.</span><span class="sxs-lookup"><span data-stu-id="f9dac-142">Use Traffic Manager for automatic failover, but not for automatic failback.</span></span> <span data-ttu-id="f9dac-143">Az automatikus feladat-visszavétellel kockáztatja, hogy az elsődleges régióra vált még az előtt, hogy a régió megfelelő állapotú lenne.</span><span class="sxs-lookup"><span data-stu-id="f9dac-143">Automatic failback carries a risk that you might switch to the primary region before the region is completely healthy.</span></span> <span data-ttu-id="f9dac-144">Ehelyett a manuális feladat-visszavétel előtt ellenőrizze, hogy az alkalmazás minden alrendszere megfelelő állapotú-e.</span><span class="sxs-lookup"><span data-stu-id="f9dac-144">Instead, verify that all application subsystems are healthy before manually failing back.</span></span> <span data-ttu-id="f9dac-145">Ezenkívül az adatbázistól függően lehet, hogy ellenőriznie kell az adatkonzisztenciát a feladat-visszavétel előtt.</span><span class="sxs-lookup"><span data-stu-id="f9dac-145">Also, depending on the database, you might need to check data consistency before failing back.</span></span>

<span data-ttu-id="f9dac-146">**Legyen a rendszerben redundancia a Traffic Managerhez**.</span><span class="sxs-lookup"><span data-stu-id="f9dac-146">**Include redundancy for Traffic Manager**.</span></span> <span data-ttu-id="f9dac-147">A Traffic Manager egy lehetséges meghibásodási pont.</span><span class="sxs-lookup"><span data-stu-id="f9dac-147">Traffic Manager is a possible failure point.</span></span> <span data-ttu-id="f9dac-148">Tekintse át a Traffic Manager szolgáltatói szerződését, és döntse el, hogy a Traffic Manager egyedüli használata elegendő-e vállalata magas rendelkezésre állásra vonatkozó követelményeihez.</span><span class="sxs-lookup"><span data-stu-id="f9dac-148">Review the Traffic Manager SLA, and determine whether using Traffic Manager alone meets your business requirements for high availability.</span></span> <span data-ttu-id="f9dac-149">Ha nem, akkor a biztonság érdekében érdemes lehet hozzáadni egy másik forgalomkezelési szolgáltatást a feladat-visszavételhez.</span><span class="sxs-lookup"><span data-stu-id="f9dac-149">If not, consider adding another traffic management solution as a failback.</span></span> <span data-ttu-id="f9dac-150">Ha az Azure Traffic Manager szolgáltatás meghibásodik, módosítsa a CNAME rekordját a DNS-ben úgy, hogy a többi forgalomkezelő szolgáltatásra mutasson.</span><span class="sxs-lookup"><span data-stu-id="f9dac-150">If the Azure Traffic Manager service fails, change your CNAME records in DNS to point to the other traffic management service.</span></span>

<!-- links -->

[multi-vm-blueprint]: ../../reference-architectures/virtual-machines-windows/multi-vm.md

[cassandra]: https://cassandra.apache.org/
[cosmosdb-geo-replication]: /azure/cosmos-db/distribute-data-globally
[sql-always-on]: https://msdn.microsoft.com/library/hh510230.aspx
[sql-geo-replication]: /azure/sql-database/sql-database-geo-replication-overview
