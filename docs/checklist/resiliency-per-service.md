---
title: Rugalmasság ellenőrzőlista az Azure-szolgáltatások
description: Útmutató rugalmasság a különböző Azure-szolgáltatásokat nyújtó ellenőrzőlista.
author: petertaylor9999
ms.date: 03/02/2018
ms.custom: resiliency, checklist
ms.openlocfilehash: 25d961d6bb753b1f515fc073e51bbb912cc59db7
ms.sourcegitcommit: 2123c25b1a0b5501ff1887f98030787191cf6994
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 03/08/2018
ms.locfileid: "29782670"
---
# <a name="resiliency-checklist-for-specific-azure-services"></a><span data-ttu-id="50188-103">Rugalmasság ellenőrzőlista az adott Azure-szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="50188-103">Resiliency checklist for specific Azure services</span></span>

<span data-ttu-id="50188-104">Rugalmasság azon képessége, a rendszer helyreállni hibák után, és továbbra is működik, és az egyik a [szoftver minőségű oszlopok](../guide/pillars.md).</span><span class="sxs-lookup"><span data-stu-id="50188-104">Resiliency is the ability of a system to recover from failures and continue to function, and is one of the [pillars of software quality](../guide/pillars.md).</span></span> <span data-ttu-id="50188-105">Minden technológiára saját adott hiba módokat, amelyek kialakításakor és az alkalmazást kell végiggondolni rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="50188-105">Every technology has its own particular failure modes, which you must consider when designing and implementing your application.</span></span> <span data-ttu-id="50188-106">Az alábbi ellenőrzőlista segítségével tekintse át az adott Azure-szolgáltatások rugalmassági szempontjai.</span><span class="sxs-lookup"><span data-stu-id="50188-106">Use this checklist to review the resiliency considerations for specific Azure services.</span></span> <span data-ttu-id="50188-107">Tekintse át a [általános rugalmassági ellenőrzőlista](./resiliency.md).</span><span class="sxs-lookup"><span data-stu-id="50188-107">Also review the [general resiliency checklist](./resiliency.md).</span></span>

## <a name="app-service"></a><span data-ttu-id="50188-108">App Service</span><span class="sxs-lookup"><span data-stu-id="50188-108">App Service</span></span>

<span data-ttu-id="50188-109">**Standard vagy prémium szintű csomagot használja.**</span><span class="sxs-lookup"><span data-stu-id="50188-109">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="50188-110">Ezek a rétegek átmeneti üzembe helyezési ponti támogatja, és automatikus biztonsági mentés.</span><span class="sxs-lookup"><span data-stu-id="50188-110">These tiers support staging slots and automated backups.</span></span> <span data-ttu-id="50188-111">További információkért lásd: [Azure App Service-csomagok részletes áttekintése](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)</span><span class="sxs-lookup"><span data-stu-id="50188-111">For more information, see [Azure App Service plans in-depth overview](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)</span></span>

<span data-ttu-id="50188-112">**Kerülje a skálázás felfelé vagy lefelé.**</span><span class="sxs-lookup"><span data-stu-id="50188-112">**Avoid scaling up or down.**</span></span> <span data-ttu-id="50188-113">Ehelyett válassza ki a réteg és a példány mérete, hogy alkalmazkodjanak a teljesítménykövetelményekhez szokásos terhelés alatt, majd [horizontális felskálázás](/azure/app-service-web/web-sites-scale/) a példányok adatforgalma változásainak kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="50188-113">Instead, select a tier and instance size that meet your performance requirements under typical load, and then [scale out](/azure/app-service-web/web-sites-scale/) the instances to handle changes in traffic volume.</span></span> <span data-ttu-id="50188-114">Skálázás felfelé és lefelé indíthatnak újra kell indítani az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="50188-114">Scaling up and down may trigger an application restart.</span></span>  

<span data-ttu-id="50188-115">**Adattár konfigurálása alkalmazás-beállításként.**</span><span class="sxs-lookup"><span data-stu-id="50188-115">**Store configuration as app settings.**</span></span> <span data-ttu-id="50188-116">Alkalmazásbeállítások segítségével Alkalmazásbeállítások konfigurációs beállításokat tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="50188-116">Use app settings to hold configuration settings as app settings.</span></span> <span data-ttu-id="50188-117">Adja meg a beállításokat a Resource Manager-sablonok vagy a powershellel, így azokat az automatikus központi telepítésének részeként, / folyamat, amely megbízhatóbb frissítése.</span><span class="sxs-lookup"><span data-stu-id="50188-117">Define the settings in your Resource Manager templates, or using PowerShell, so that you can apply them as part of an automated deployment / update process, which is more reliable.</span></span> <span data-ttu-id="50188-118">További információkért lásd: [webes alkalmazások konfigurálása az Azure App Service](/azure/app-service-web/web-sites-configure/).</span><span class="sxs-lookup"><span data-stu-id="50188-118">For more information, see [Configure web apps in Azure App Service](/azure/app-service-web/web-sites-configure/).</span></span>

<span data-ttu-id="50188-119">**Hozzon létre külön App Service-csomagokról éles és tesztelési.**</span><span class="sxs-lookup"><span data-stu-id="50188-119">**Create separate App Service plans for production and test.**</span></span> <span data-ttu-id="50188-120">Ne használjon üzembe helyezési ponti az éles telepítési a teszteléshez.</span><span class="sxs-lookup"><span data-stu-id="50188-120">Don't use slots on your production deployment for testing.</span></span>  <span data-ttu-id="50188-121">Minden alkalmazás belül az azonos App Service-csomag az ugyanazon Virtuálisgép-példány megosztása.</span><span class="sxs-lookup"><span data-stu-id="50188-121">All apps within the same App Service plan share the same VM instances.</span></span> <span data-ttu-id="50188-122">Éles üzemi pontjának és próbatelepítést be a csomagot, negatívan befolyásolhatja az éles környezet.</span><span class="sxs-lookup"><span data-stu-id="50188-122">If you put production and test deployments in the same plan, it can negatively affect the production deployment.</span></span> <span data-ttu-id="50188-123">Például terhelés tesztek csökkentheti a élő munkakörnyezeti helyet.</span><span class="sxs-lookup"><span data-stu-id="50188-123">For example, load tests might degrade the live production site.</span></span> <span data-ttu-id="50188-124">Tegyen próbatelepítést egy külön tervbe, hogy ezeket elszigeteli éles verzióját.</span><span class="sxs-lookup"><span data-stu-id="50188-124">By putting test deployments into a separate plan, you isolate them from the production version.</span></span>  

<span data-ttu-id="50188-125">**A webes API-k külön webalkalmazások.**</span><span class="sxs-lookup"><span data-stu-id="50188-125">**Separate web apps from web APIs.**</span></span> <span data-ttu-id="50188-126">Ha a megoldás egy előtér-webkiszolgáló és a webes API-k is rendelkezik, fontolja meg, decomposing őket külön App Service-alkalmazásokba.</span><span class="sxs-lookup"><span data-stu-id="50188-126">If your solution has both a web front-end and a web API, consider decomposing them into separate App Service apps.</span></span> <span data-ttu-id="50188-127">Ez a kialakítás megkönnyíti a megoldás felbontani a munkaterhelés szerint.</span><span class="sxs-lookup"><span data-stu-id="50188-127">This design makes it easier to decompose the solution by workload.</span></span> <span data-ttu-id="50188-128">Futtathatja a web app és az API-t az önálló App Service-csomagokról, így ezek egymástól függetlenül lehet méretezni.</span><span class="sxs-lookup"><span data-stu-id="50188-128">You can run the web app and the API in separate App Service plans, so they can be scaled independently.</span></span> <span data-ttu-id="50188-129">Ha nincs szüksége ekkora szintű méretezhetőséget, először telepítheti az alkalmazások azokat a csomagot, és áthelyezi őket külön tervek később, ha szükséges.</span><span class="sxs-lookup"><span data-stu-id="50188-129">If you don't need that level of scalability at first, you can deploy the apps into the same plan, and move them into separate plans later, if needed.</span></span>

<span data-ttu-id="50188-130">**Ne használja az alkalmazás biztonsági mentési szolgáltatás Azure SQL-adatbázisok biztonsági mentése.**</span><span class="sxs-lookup"><span data-stu-id="50188-130">**Avoid using the App Service backup feature to back up Azure SQL databases.**</span></span> <span data-ttu-id="50188-131">Ehelyett használjon [SQL-adatbázis automatikus biztonsági mentés][sql-backup].</span><span class="sxs-lookup"><span data-stu-id="50188-131">Instead, use [SQL Database automated backups][sql-backup].</span></span> <span data-ttu-id="50188-132">App Service biztonsági mentés az adatbázist egy SQL .bacpac fájlba, amely költségek dtu-k exportálja.</span><span class="sxs-lookup"><span data-stu-id="50188-132">App Service backup exports the database to a SQL .bacpac file, which costs DTUs.</span></span>  

<span data-ttu-id="50188-133">**Telepíthet egy átmeneti helyet.**</span><span class="sxs-lookup"><span data-stu-id="50188-133">**Deploy to a staging slot.**</span></span> <span data-ttu-id="50188-134">Az átmeneti egy üzembe helyezési tárhely létrehozása.</span><span class="sxs-lookup"><span data-stu-id="50188-134">Create a deployment slot for staging.</span></span> <span data-ttu-id="50188-135">Alkalmazás frissítések telepítése az átmeneti helyet, és a telepítés előtt csere az éles környezetben.</span><span class="sxs-lookup"><span data-stu-id="50188-135">Deploy application updates to the staging slot, and verify the deployment before swapping it into production.</span></span> <span data-ttu-id="50188-136">Ez csökkenti az éles környezetben egy hibás frissítés esélyét.</span><span class="sxs-lookup"><span data-stu-id="50188-136">This reduces the chance of a bad update in production.</span></span> <span data-ttu-id="50188-137">Emellett biztosítja, hogy a példányainak Mielőtt éles környezetben felcserélés folyamatban vannak tárolóhelyspecifikus.</span><span class="sxs-lookup"><span data-stu-id="50188-137">It also ensures that all instances are warmed up before being swapped into production.</span></span> <span data-ttu-id="50188-138">Számos alkalmazás jelentős melegítési és cold-a kezdési idő rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="50188-138">Many applications have a significant warmup and cold-start time.</span></span> <span data-ttu-id="50188-139">További információkért lásd: [átmeneti környezet az Azure App Service web Apps beállítása](/azure/app-service-web/web-sites-staged-publishing/).</span><span class="sxs-lookup"><span data-stu-id="50188-139">For more information, see [Set up staging environments for web apps in Azure App Service](/azure/app-service-web/web-sites-staged-publishing/).</span></span>

<span data-ttu-id="50188-140">**Egy üzembe helyezési tárhely ahhoz, hogy a legutóbbi helyes (LKG) központi telepítés létrehozása.**</span><span class="sxs-lookup"><span data-stu-id="50188-140">**Create a deployment slot to hold the last-known-good (LKG) deployment.**</span></span> <span data-ttu-id="50188-141">Üzemi környezetben telepít egy frissítést, ha az előző éles környezet áthelyezi a LKG tárolóhelye.</span><span class="sxs-lookup"><span data-stu-id="50188-141">When you deploy an update to production, move the previous production deployment into the LKG slot.</span></span> <span data-ttu-id="50188-142">Így könnyebben rossz üzemelő példány visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="50188-142">This makes it easier to roll back a bad deployment.</span></span> <span data-ttu-id="50188-143">Ha később felderíteni a probléma, gyorsan visszatérhet a LKG verziót.</span><span class="sxs-lookup"><span data-stu-id="50188-143">If you discover a problem later, you can quickly revert to the LKG version.</span></span> <span data-ttu-id="50188-144">További információkért lásd: [alapvető webalkalmazás](../reference-architectures/app-service-web-app/basic-web-app.md).</span><span class="sxs-lookup"><span data-stu-id="50188-144">For more information, see [Basic web application](../reference-architectures/app-service-web-app/basic-web-app.md).</span></span>

<span data-ttu-id="50188-145">**Diagnosztikai naplózás engedélyezése**, beleértve a alkalmazásnaplózás és web server naplózása.</span><span class="sxs-lookup"><span data-stu-id="50188-145">**Enable diagnostics logging**, including application logging and web server logging.</span></span> <span data-ttu-id="50188-146">Naplózási figyelése és diagnosztika fontos.</span><span class="sxs-lookup"><span data-stu-id="50188-146">Logging is important for monitoring and diagnostics.</span></span> <span data-ttu-id="50188-147">Lásd: [az Azure App Service web Apps diagnosztikai naplózás engedélyezése](/azure/app-service-web/web-sites-enable-diagnostic-log/)</span><span class="sxs-lookup"><span data-stu-id="50188-147">See [Enable diagnostics logging for web apps in Azure App Service](/azure/app-service-web/web-sites-enable-diagnostic-log/)</span></span>

<span data-ttu-id="50188-148">**A blob-tároló napló.**</span><span class="sxs-lookup"><span data-stu-id="50188-148">**Log to blob storage.**</span></span> <span data-ttu-id="50188-149">Így könnyebben, amely összegyűjti és elemzi az adatokat.</span><span class="sxs-lookup"><span data-stu-id="50188-149">This makes it easier to collect and analyze the data.</span></span>

<span data-ttu-id="50188-150">**Hozzon létre egy külön tárfiókot a naplókat.**</span><span class="sxs-lookup"><span data-stu-id="50188-150">**Create a separate storage account for logs.**</span></span> <span data-ttu-id="50188-151">Ne használja ugyanazt a tárfiókot naplókat és az alkalmazásadatokat.</span><span class="sxs-lookup"><span data-stu-id="50188-151">Don't use the same storage account for logs and application data.</span></span> <span data-ttu-id="50188-152">Ez segít megakadályozni a naplózás alkalmazásteljesítmény csökkentése.</span><span class="sxs-lookup"><span data-stu-id="50188-152">This helps to prevent logging from reducing application performance.</span></span>

<span data-ttu-id="50188-153">**Figyelemmel kísérni a teljesítményét.**</span><span class="sxs-lookup"><span data-stu-id="50188-153">**Monitor performance.**</span></span> <span data-ttu-id="50188-154">A Teljesítményfigyelő szolgáltatás például [New Relic](http://newrelic.com/) vagy [Application Insights](/azure/application-insights/app-insights-overview/) alkalmazás teljesítményének figyelése és a terhelés viselkedését.</span><span class="sxs-lookup"><span data-stu-id="50188-154">Use a performance monitoring service such as [New Relic](http://newrelic.com/) or [Application Insights](/azure/application-insights/app-insights-overview/) to monitor application performance and behavior under load.</span></span>  <span data-ttu-id="50188-155">Teljesítményfigyelés lehetővé teszi az alkalmazás valós idejű betekintést.</span><span class="sxs-lookup"><span data-stu-id="50188-155">Performance monitoring gives you real-time insight into the application.</span></span> <span data-ttu-id="50188-156">Lehetővé teszi eseményadatokat, és végezze el a probléma alapvető okát a hibákat.</span><span class="sxs-lookup"><span data-stu-id="50188-156">It enables you to diagnose issues and perform root-cause analysis of failures.</span></span>

## <a name="application-gateway"></a><span data-ttu-id="50188-157">Application Gateway</span><span class="sxs-lookup"><span data-stu-id="50188-157">Application Gateway</span></span>

<span data-ttu-id="50188-158">**Legalább két példányt kiépítéséhez.**</span><span class="sxs-lookup"><span data-stu-id="50188-158">**Provision at least two instances.**</span></span> <span data-ttu-id="50188-159">Alkalmazás-átjáró üzembe helyezéséhez legalább két példánnyal.</span><span class="sxs-lookup"><span data-stu-id="50188-159">Deploy Application Gateway with at least two instances.</span></span> <span data-ttu-id="50188-160">Egyetlen példány a hibaérzékeny pontok kialakulását.</span><span class="sxs-lookup"><span data-stu-id="50188-160">A single instance is a single point of failure.</span></span> <span data-ttu-id="50188-161">Két vagy több példányát használja a redundancia és a méretezhetőséget.</span><span class="sxs-lookup"><span data-stu-id="50188-161">Use two or more instances for redundancy and scalability.</span></span> <span data-ttu-id="50188-162">Ahhoz, hogy érvényes a [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/), el kell juttatnia legalább két közepes vagy nagyobb példányát.</span><span class="sxs-lookup"><span data-stu-id="50188-162">In order to qualify for the [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/), you must provision two or more medium or larger instances.</span></span>

## <a name="cosmos-db"></a><span data-ttu-id="50188-163">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="50188-163">Cosmos DB</span></span>

<span data-ttu-id="50188-164">**Az adatbázis replikálása régiók között.**</span><span class="sxs-lookup"><span data-stu-id="50188-164">**Replicate the database across regions.**</span></span> <span data-ttu-id="50188-165">Cosmos DB lehetővé teszi tetszőleges számú Azure-régiók társítandó egy Cosmos-adatbázis adatbázis-fiók.</span><span class="sxs-lookup"><span data-stu-id="50188-165">Cosmos DB allows you to associate any number of Azure regions with a Cosmos DB database account.</span></span> <span data-ttu-id="50188-166">Egy Cosmos DB adatbázisban régió egy írási és olvasási több régióba is rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="50188-166">A Cosmos DB database can have one write region and multiple read regions.</span></span> <span data-ttu-id="50188-167">Ha hiba történik a írási régióban, egy másik replikából olvashatja.</span><span class="sxs-lookup"><span data-stu-id="50188-167">If there is a failure in the write region, you can read from another replica.</span></span> <span data-ttu-id="50188-168">Az ügyfél SDK kezeli ezt automatikusan.</span><span class="sxs-lookup"><span data-stu-id="50188-168">The Client SDK handles this automatically.</span></span> <span data-ttu-id="50188-169">Az írási régió, egy másik régióban is átadásra.</span><span class="sxs-lookup"><span data-stu-id="50188-169">You can also fail over the write region to another region.</span></span> <span data-ttu-id="50188-170">További információkért lásd: [miként ossza el a globális adatok Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span><span class="sxs-lookup"><span data-stu-id="50188-170">For more information, see [How to distribute data globally with Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span></span>

## <a name="event-hubs"></a><span data-ttu-id="50188-171">Event Hubs</span><span class="sxs-lookup"><span data-stu-id="50188-171">Event Hubs</span></span>

<span data-ttu-id="50188-172">**Használjon ellenőrzőpontokat**.</span><span class="sxs-lookup"><span data-stu-id="50188-172">**Use checkpoints**.</span></span>  <span data-ttu-id="50188-173">Egy eseményközpontból, eseményfelhasználó az egyes előre meghatározott időközönként állandó tároló kell írni a jelenlegi állapotában.</span><span class="sxs-lookup"><span data-stu-id="50188-173">An event consumer should write its current position to persistent storage at some predefined interval.</span></span> <span data-ttu-id="50188-174">Így ha a fogyasztó (például a fogyasztói összeomlik vagy az állomás nem tud) hibát észlel, majd új példányt folytathatja az adatfolyam olvasásakor az utolsó rögzített hely.</span><span class="sxs-lookup"><span data-stu-id="50188-174">That way, if the consumer experiences a fault (for example, the consumer crashes, or the host fails), then a new instance can resume reading the stream from the last recorded position.</span></span> <span data-ttu-id="50188-175">További információkért lásd: [eseményfelhasználók](/azure/event-hubs/event-hubs-features#event-consumers).</span><span class="sxs-lookup"><span data-stu-id="50188-175">For more information, see [Event consumers](/azure/event-hubs/event-hubs-features#event-consumers).</span></span>

<span data-ttu-id="50188-176">**Duplikált üzenetek kezeléséhez.**</span><span class="sxs-lookup"><span data-stu-id="50188-176">**Handle duplicate messages.**</span></span> <span data-ttu-id="50188-177">Ha nem sikerül egy eseményközpontból, eseményfelhasználó, üzenet feldolgozása a legutóbbi rögzített ellenőrzőponttól folytatja a működését.</span><span class="sxs-lookup"><span data-stu-id="50188-177">If an event consumer fails, message processing is resumed from the last recorded checkpoint.</span></span> <span data-ttu-id="50188-178">Az üzenetek után utolsó ellenőrzőpontja feldolgozása már megtörtént, újra lesz feldolgozva.</span><span class="sxs-lookup"><span data-stu-id="50188-178">Any messages that were already processed after the last checkpoint will be processed again.</span></span> <span data-ttu-id="50188-179">Ezért az üzenetfeldolgozás logikát kell az idempotent, vagy az alkalmazás fájlok deduplikálása üzenetek képesnek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="50188-179">Therefore, your message processing logic must be idempotent, or the application must be able to deduplicate messages.</span></span>

<span data-ttu-id="50188-180">**Kivétel kezelése.** .</span><span class="sxs-lookup"><span data-stu-id="50188-180">**Handle exceptions.**.</span></span> <span data-ttu-id="50188-181">Egy eseményközpontból, eseményfelhasználó általában az ismétlődő üzenetkötegek dolgozza fel.</span><span class="sxs-lookup"><span data-stu-id="50188-181">An event consumer typically processes a batch of messages in a loop.</span></span> <span data-ttu-id="50188-182">Kezelje a kivételek elkerülése érdekében az egész köteget üzenetek elvesztését, ha egyetlen üzenet kivételt okoz a feldolgozási hurkon belül.</span><span class="sxs-lookup"><span data-stu-id="50188-182">You should handle exceptions within this processing loop to avoid losing an entire batch of messages if a single message causes an exception.</span></span>

<span data-ttu-id="50188-183">**Használja a kézbesítetlen levelek várólistájára.**</span><span class="sxs-lookup"><span data-stu-id="50188-183">**Use a dead-letter queue.**</span></span> <span data-ttu-id="50188-184">Ha egy üzenet feldolgozása nem átmeneti hibát, az üzenet lemezre írását a kézbesítetlen levelek várólistájára, hogy a állapotát nyomon követheti.</span><span class="sxs-lookup"><span data-stu-id="50188-184">If processing a message results in a non-transient failure, put the message onto a dead-letter queue, so that you can track the status.</span></span> <span data-ttu-id="50188-185">A helyzettől függően előfordulhat, hogy néhány más művelet végrehajtása, olyan kompenzációs tranzakció vagy az üzenet később újra el.</span><span class="sxs-lookup"><span data-stu-id="50188-185">Depending on the scenario, you might retry the message later, apply a compensating transaction, or take some other action.</span></span> <span data-ttu-id="50188-186">Vegye figyelembe, hogy az Event Hubs nem rendelkezik olyan beépített kézbesítetlen levelek várólistájára funkciót.</span><span class="sxs-lookup"><span data-stu-id="50188-186">Note that Event Hubs does not have any built-in dead-letter queue functionality.</span></span> <span data-ttu-id="50188-187">Azure Queue Storage vagy a Service Bus használatával valósítja meg a kézbesítetlen levelek várólistájára, illetve az Azure Functions vagy valamilyen más esemény mód használata.</span><span class="sxs-lookup"><span data-stu-id="50188-187">You can use Azure Queue Storage or Service Bus to implement a dead-letter queue, or use Azure Functions or some other eventing mechanism.</span></span>  

<span data-ttu-id="50188-188">**Katasztrófa utáni helyreállítás egy másodlagos Event Hubs névtér feladatátvételét által megvalósítani.**</span><span class="sxs-lookup"><span data-stu-id="50188-188">**Implement disaster recovery by failing over to a secondary Event Hubs namespace.**</span></span> <span data-ttu-id="50188-189">További információkért lásd: [Azure Event Hubs földrajzi-vész-helyreállítási](/azure/event-hubs/event-hubs-geo-dr).</span><span class="sxs-lookup"><span data-stu-id="50188-189">For more information, see [Azure Event Hubs Geo-disaster recovery](/azure/event-hubs/event-hubs-geo-dr).</span></span>

## <a name="redis-cache"></a><span data-ttu-id="50188-190">Redis Cache</span><span class="sxs-lookup"><span data-stu-id="50188-190">Redis Cache</span></span>

<span data-ttu-id="50188-191">**A georeplikáció konfigurálása**.</span><span class="sxs-lookup"><span data-stu-id="50188-191">**Configure Geo-replication**.</span></span> <span data-ttu-id="50188-192">A georeplikáció lehetővé teszi a csatolás két Premium szint Azure Redis Cache példányt.</span><span class="sxs-lookup"><span data-stu-id="50188-192">Geo-replication provides a mechanism for linking two Premium tier Azure Redis Cache instances.</span></span> <span data-ttu-id="50188-193">Az elsődleges gyorsítótár írt adatokat a másodlagos csak olvasható gyorsítótárának replikálódik.</span><span class="sxs-lookup"><span data-stu-id="50188-193">Data written to the primary cache is replicated to a secondary read-only cache.</span></span> <span data-ttu-id="50188-194">További információkért lásd: [georeplikáció konfigurálása az Azure Redis Cache](/azure/redis-cache/cache-how-to-geo-replication)</span><span class="sxs-lookup"><span data-stu-id="50188-194">For more information, see [How to configure Geo-replication for Azure Redis Cache](/azure/redis-cache/cache-how-to-geo-replication)</span></span>

<span data-ttu-id="50188-195">**Adatmegőrzés konfigurálásához.**</span><span class="sxs-lookup"><span data-stu-id="50188-195">**Configure data persistence.**</span></span> <span data-ttu-id="50188-196">A redis-adatmegőrzés lehetővé teszi a Redis tárolt adatok megőrzéséhez.</span><span class="sxs-lookup"><span data-stu-id="50188-196">Redis persistence allows you to persist data stored in Redis.</span></span> <span data-ttu-id="50188-197">Pillanatképek és hardver meghibásodása esetén is betölthet adatainak biztonsági mentését is.</span><span class="sxs-lookup"><span data-stu-id="50188-197">You can also take snapshots and back up the data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="50188-198">További információkért lásd: [adatok megőrzését egy prémium szintű Azure Redis Cache konfigurálása](/azure/redis-cache/cache-how-to-premium-persistence)</span><span class="sxs-lookup"><span data-stu-id="50188-198">For more information, see [How to configure data persistence for a Premium Azure Redis Cache](/azure/redis-cache/cache-how-to-premium-persistence)</span></span>

<span data-ttu-id="50188-199">Ha a Redis Cache-gyorsítótár egy ideiglenes, nem pedig egy állandó tároló használ, ezek a javaslatok nem feltétlenül vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="50188-199">If you are using Redis Cache as a temporary data cache and not as a persistent store, these recommendations may not apply.</span></span> 

## <a name="search"></a><span data-ttu-id="50188-200">Keresés</span><span class="sxs-lookup"><span data-stu-id="50188-200">Search</span></span>

<span data-ttu-id="50188-201">**Több replika kiépítéséhez.**</span><span class="sxs-lookup"><span data-stu-id="50188-201">**Provision more than one replica.**</span></span> <span data-ttu-id="50188-202">Legalább két replikákat használ a olvasási magas rendelkezésre állású, vagy az olvasási és írási magas rendelkezésre állású három.</span><span class="sxs-lookup"><span data-stu-id="50188-202">Use at least two replicas for read high-availability, or three for read-write high-availability.</span></span>

<span data-ttu-id="50188-203">**Indexelő több területi telepítések konfigurálása.**</span><span class="sxs-lookup"><span data-stu-id="50188-203">**Configure indexers for multi-region deployments.**</span></span> <span data-ttu-id="50188-204">Ha egy több területi központi telepítéssel rendelkezik, fontolja meg az indexelő folytonosságát lehetőségeknek.</span><span class="sxs-lookup"><span data-stu-id="50188-204">If you have a multi-region deployment, consider your options for continuity in indexing.</span></span>

  * <span data-ttu-id="50188-205">Ha az adatforrás georeplikált, általában kell mutatnia minden egyes regionális Azure Search szolgáltatás indexelő fogja a helyi adatok adatforrás replikáját.</span><span class="sxs-lookup"><span data-stu-id="50188-205">If the data source is geo-replicated, you should generally point each indexer of each regional Azure Search service to its local data source replica.</span></span> <span data-ttu-id="50188-206">Azt a módszert azonban nem ajánlott nagy adatmennyiségek Azure SQL adatbázis tárolja.</span><span class="sxs-lookup"><span data-stu-id="50188-206">However, that approach is not recommended for large datasets stored in Azure SQL Database.</span></span> <span data-ttu-id="50188-207">A hiba oka, hogy Azure Search nem végezhető el a másodlagos SQL-adatbázis-replikákat, csak az elsődleges replikára változott növekményes indexelő.</span><span class="sxs-lookup"><span data-stu-id="50188-207">The reason is that Azure Search cannot perform incremental indexing from secondary SQL Database replicas, only from primary replicas.</span></span> <span data-ttu-id="50188-208">Összes indexelő helyette, mutasson az elsődleges másodpéldány.</span><span class="sxs-lookup"><span data-stu-id="50188-208">Instead, point all indexers to the primary replica.</span></span> <span data-ttu-id="50188-209">A feladatátvétel után az új elsődleges replika az Azure Search indexelők helyen.</span><span class="sxs-lookup"><span data-stu-id="50188-209">After a failover, point the Azure Search indexers at the new primary replica.</span></span>  
  * <span data-ttu-id="50188-210">Ha az adatforrás nincs georeplikált, pont több indexelők ugyanarra az adatforrásra, így több régióba Azure Search szolgáltatás folyamatosan és egymástól függetlenül felületindexét az adatforrás.</span><span class="sxs-lookup"><span data-stu-id="50188-210">If the data source is not geo-replicated, point multiple indexers at the same data source, so that Azure Search services in multiple regions continuously and independently index from the data source.</span></span> <span data-ttu-id="50188-211">További információkért lásd: [Azure Search teljesítmény- és optimalizálási szempontok][search-optimization].</span><span class="sxs-lookup"><span data-stu-id="50188-211">For more information, see [Azure Search performance and optimization considerations][search-optimization].</span></span>

## <a name="storage"></a><span data-ttu-id="50188-212">Tárolás</span><span class="sxs-lookup"><span data-stu-id="50188-212">Storage</span></span>

<span data-ttu-id="50188-213">**Az alkalmazásadatok használja az írásvédett georedundáns tárolás (RA-GRS).**</span><span class="sxs-lookup"><span data-stu-id="50188-213">**For application data, use read-access geo-redundant storage (RA-GRS).**</span></span> <span data-ttu-id="50188-214">RA-GRS tárolási másodlagos régióba replikálja az adatokat, és a másodlagos régióban olvasási hozzáférést biztosít.</span><span class="sxs-lookup"><span data-stu-id="50188-214">RA-GRS storage replicates the data to a secondary region, and provides read-only access from the secondary region.</span></span> <span data-ttu-id="50188-215">Ha egy tárolási leállás az elsődleges régióban, az alkalmazást a másodlagos régióba lehet beolvasni az adatokat.</span><span class="sxs-lookup"><span data-stu-id="50188-215">If there is a storage outage in the primary region, the application can read the data from the secondary region.</span></span> <span data-ttu-id="50188-216">További információkért lásd: [Azure Storage replikációs](/azure/storage/storage-redundancy/).</span><span class="sxs-lookup"><span data-stu-id="50188-216">For more information, see [Azure Storage replication](/azure/storage/storage-redundancy/).</span></span>

<span data-ttu-id="50188-217">**A virtuális gépek lemezei felügyelt lemezek használhatók.**</span><span class="sxs-lookup"><span data-stu-id="50188-217">**For VM disks, use Managed Disks.**</span></span> <span data-ttu-id="50188-218">[Által kezelt lemezeken] [ managed-disks] megbízhatóságnak virtuális gépek rendelkezésre állási csoportba, mert a lemezek megfelelően különítve egymástól elkerülése érdekében a hibaérzékeny pontokat.</span><span class="sxs-lookup"><span data-stu-id="50188-218">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="50188-219">Felügyelt lemezek is, nem a VHD-k egy tárfiókot létre IOPS határértékeken.</span><span class="sxs-lookup"><span data-stu-id="50188-219">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="50188-220">További információkért lásd: [a Windows Azure virtuális gépek rendelkezésre állásának kezelése][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="50188-220">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="50188-221">**A várólista-tároló hozzon létre egy biztonsági mentési várólistát egy másik régióban.**</span><span class="sxs-lookup"><span data-stu-id="50188-221">**For Queue storage, create a backup queue in another region.**</span></span> <span data-ttu-id="50188-222">Várólista tárolására csak olvasható replika korlátozott használatát, mert nem a várólistára vagy created elemek.</span><span class="sxs-lookup"><span data-stu-id="50188-222">For Queue storage, a read-only replica has limited use, because you can't queue or dequeue items.</span></span> <span data-ttu-id="50188-223">Ehelyett hozzon létre egy biztonsági mentési várólistát egy másik régióban tárfiókokban.</span><span class="sxs-lookup"><span data-stu-id="50188-223">Instead, create a backup queue in a storage account in another region.</span></span> <span data-ttu-id="50188-224">Egy tároló leállás esetén az alkalmazás használhat a biztonsági mentési várólista, míg az elsődleges régióban elérhető újra.</span><span class="sxs-lookup"><span data-stu-id="50188-224">If there is a storage outage, the application can use the backup queue, until the primary region becomes available again.</span></span> <span data-ttu-id="50188-225">Így az alkalmazás továbbra is az új kérelmek tud feldolgozni.</span><span class="sxs-lookup"><span data-stu-id="50188-225">That way, the application can still process new requests.</span></span>  

## <a name="sql-database"></a><span data-ttu-id="50188-226">SQL Database</span><span class="sxs-lookup"><span data-stu-id="50188-226">SQL Database</span></span>

<span data-ttu-id="50188-227">**Standard vagy prémium szintű csomagot használja.**</span><span class="sxs-lookup"><span data-stu-id="50188-227">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="50188-228">Ezek a rétegek adjon meg egy már pont időponthoz kötött visszaállítás időszak (35 nap).</span><span class="sxs-lookup"><span data-stu-id="50188-228">These tiers provide a longer point-in-time restore period (35 days).</span></span> <span data-ttu-id="50188-229">További információkért lásd: [SQL Database beállításai és teljesítménye](/azure/sql-database/sql-database-service-tiers/).</span><span class="sxs-lookup"><span data-stu-id="50188-229">For more information, see [SQL Database options and performance](/azure/sql-database/sql-database-service-tiers/).</span></span>

<span data-ttu-id="50188-230">**SQL-adatbázis naplózásának engedélyezése.**</span><span class="sxs-lookup"><span data-stu-id="50188-230">**Enable SQL Database auditing.**</span></span> <span data-ttu-id="50188-231">Naplózás rosszindulatú támadások és emberi tévedések diagnosztizálásához használható.</span><span class="sxs-lookup"><span data-stu-id="50188-231">Auditing can be used to diagnose malicious attacks or human error.</span></span> <span data-ttu-id="50188-232">További információkért lásd: [Ismerkedés az SQL-adatbázis naplózásának](/azure/sql-database/sql-database-auditing-get-started/).</span><span class="sxs-lookup"><span data-stu-id="50188-232">For more information, see [Get started with SQL database auditing](/azure/sql-database/sql-database-auditing-get-started/).</span></span>

<span data-ttu-id="50188-233">**Aktív Georeplikáció használja** használatát aktív Georeplikáció olvasható másodlagos létrehozásához egy másik régióban.</span><span class="sxs-lookup"><span data-stu-id="50188-233">**Use Active Geo-Replication** Use Active Geo-Replication to create a readable secondary in a different region.</span></span>  <span data-ttu-id="50188-234">Ha az elsődleges adatbázis, vagy egyszerűen csak offline állapotba helyezte, hajtsa végre a másodlagos adatbázis manuális feladatátvétele van szüksége.</span><span class="sxs-lookup"><span data-stu-id="50188-234">If your primary database fails, or simply needs to be taken offline, perform a manual failover to the secondary database.</span></span>  <span data-ttu-id="50188-235">Feladatátvételt, amíg a másodlagos adatbázis csak olvasható maradjon.</span><span class="sxs-lookup"><span data-stu-id="50188-235">Until you fail over, the secondary database remains read-only.</span></span>  <span data-ttu-id="50188-236">További információkért lásd: [SQL adatbázis aktív Georeplikáció](/azure/sql-database/sql-database-geo-replication-overview/).</span><span class="sxs-lookup"><span data-stu-id="50188-236">For more information, see [SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/).</span></span>

<span data-ttu-id="50188-237">**Horizontális használja.**</span><span class="sxs-lookup"><span data-stu-id="50188-237">**Use sharding.**</span></span> <span data-ttu-id="50188-238">Fontolja meg az adatbázis vízszintesen particionálásához horizontális használatát.</span><span class="sxs-lookup"><span data-stu-id="50188-238">Consider using sharding to partition the database horizontally.</span></span> <span data-ttu-id="50188-239">Horizontális tartalék elkülönítési biztosít.</span><span class="sxs-lookup"><span data-stu-id="50188-239">Sharding can provide fault isolation.</span></span> <span data-ttu-id="50188-240">További információkért lásd: [az Azure SQL Database kiterjesztése](/azure/sql-database/sql-database-elastic-scale-introduction/).</span><span class="sxs-lookup"><span data-stu-id="50188-240">For more information, see [Scaling out with Azure SQL Database](/azure/sql-database/sql-database-elastic-scale-introduction/).</span></span>

<span data-ttu-id="50188-241">**Pont időponthoz kötött visszaállítás segítségével emberi tévedések helyreállíthatók.**</span><span class="sxs-lookup"><span data-stu-id="50188-241">**Use point-in-time restore to recover from human error.**</span></span>  <span data-ttu-id="50188-242">Pont időponthoz kötött visszaállítás adja vissza, az idő az adatbázis egy korábbi állapotba.</span><span class="sxs-lookup"><span data-stu-id="50188-242">Point-in-time restore returns your database to an earlier point in time.</span></span> <span data-ttu-id="50188-243">További információkért lásd: [használatával automatikus adatbázis biztonsági mentése Azure SQL-adatbázis helyreállítása][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="50188-243">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

<span data-ttu-id="50188-244">**Georedundáns helyreállítás használni a helyreállításhoz a szolgáltatáskimaradás.**</span><span class="sxs-lookup"><span data-stu-id="50188-244">**Use geo-restore to recover from a service outage.**</span></span> <span data-ttu-id="50188-245">Georedundáns helyreállítás egy adatbázisát állítja vissza a georedundáns biztonsági másolatból.</span><span class="sxs-lookup"><span data-stu-id="50188-245">Geo-restore restores a database from a geo-redundant backup.</span></span>  <span data-ttu-id="50188-246">További információkért lásd: [használatával automatikus adatbázis biztonsági mentése Azure SQL-adatbázis helyreállítása][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="50188-246">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

## <a name="sql-server-running-in-a-vm"></a><span data-ttu-id="50188-247">A virtuális gépen futó SQL Server</span><span class="sxs-lookup"><span data-stu-id="50188-247">SQL Server running in a VM</span></span>

<span data-ttu-id="50188-248">**Az adatbázis replikálása.**</span><span class="sxs-lookup"><span data-stu-id="50188-248">**Replicate the database.**</span></span> <span data-ttu-id="50188-249">SQL Server Always On rendelkezésre állási csoportok használja replikálja az adatbázist.</span><span class="sxs-lookup"><span data-stu-id="50188-249">Use SQL Server Always On Availability Groups to replicate the database.</span></span> <span data-ttu-id="50188-250">Magas rendelkezésre állást biztosít, ha egy SQL Server-példány sikertelen.</span><span class="sxs-lookup"><span data-stu-id="50188-250">Provides high availability if one SQL Server instance fails.</span></span> <span data-ttu-id="50188-251">További információkért lásd: [futtassa a Windows virtuális gépek N szintű alkalmazások](../reference-architectures/virtual-machines-windows/n-tier.md)</span><span class="sxs-lookup"><span data-stu-id="50188-251">For more information, see [Run Windows VMs for an N-tier application](../reference-architectures/virtual-machines-windows/n-tier.md)</span></span>

<span data-ttu-id="50188-252">**Az adatbázis biztonsági mentése**.</span><span class="sxs-lookup"><span data-stu-id="50188-252">**Back up the database**.</span></span> <span data-ttu-id="50188-253">Ha már használja a [Azure biztonsági mentés](https://azure.microsoft.com/documentation/services/backup/) biztonsági mentése a virtuális gépek, érdemes lehet [Azure biztonsági mentés az SQL Server számítási feladatait a DPM használatának](/azure/backup/backup-azure-backup-sql/).</span><span class="sxs-lookup"><span data-stu-id="50188-253">If you are already using [Azure Backup](https://azure.microsoft.com/documentation/services/backup/) to back up your VMs, consider using [Azure Backup for SQL Server workloads using DPM](/azure/backup/backup-azure-backup-sql/).</span></span> <span data-ttu-id="50188-254">Ezt a módszert van egy biztonsági mentési rendszergazda szerepkör a szervezet és a virtuális gépek és az SQL Server-egyesített helyreállítási folyamattal.</span><span class="sxs-lookup"><span data-stu-id="50188-254">With this approach, there is one backup administrator role for the organization and a unified recovery procedure for VMs and SQL Server.</span></span> <span data-ttu-id="50188-255">Ellenkező esetben használja [SQL Server felügyelt Microsoft Azure Backup](https://msdn.microsoft.com/library/dn449496.aspx).</span><span class="sxs-lookup"><span data-stu-id="50188-255">Otherwise, use [SQL Server Managed Backup to Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span></span>

## <a name="traffic-manager"></a><span data-ttu-id="50188-256">Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="50188-256">Traffic Manager</span></span>

<span data-ttu-id="50188-257">**Manuális feladat-visszavétel végrehajtására.**</span><span class="sxs-lookup"><span data-stu-id="50188-257">**Perform manual failback.**</span></span> <span data-ttu-id="50188-258">A Traffic Manager feladatátvételt követően végrehajtása manuális feladat-visszavétel ahelyett, hogy automatikusan sikertelen vissza.</span><span class="sxs-lookup"><span data-stu-id="50188-258">After a Traffic Manager failover, perform manual failback, rather than automatically failing back.</span></span> <span data-ttu-id="50188-259">Mielőtt ismét sikertelen, ellenőrizze, hogy minden alkalmazás alrendszer kifogástalan.</span><span class="sxs-lookup"><span data-stu-id="50188-259">Before failing back, verify that all application subsystems are healthy.</span></span>  <span data-ttu-id="50188-260">Ellenkező esetben hozhat létre olyan helyzet, amelyben az alkalmazás tükrözése oda-vissza adatközpontok között.</span><span class="sxs-lookup"><span data-stu-id="50188-260">Otherwise, you can create a situation where the application flips back and forth between data centers.</span></span> <span data-ttu-id="50188-261">További információkért lásd: [virtuális gépek futtatása a magas rendelkezésre állású több régióba](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span><span class="sxs-lookup"><span data-stu-id="50188-261">For more information, see [Run VMs in multiple regions for high availability](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span></span>

<span data-ttu-id="50188-262">**Állapot-mintavételi végpont létrehozása.**</span><span class="sxs-lookup"><span data-stu-id="50188-262">**Create a health probe endpoint.**</span></span> <span data-ttu-id="50188-263">Hozzon létre egy egyéni végpontot, amelyhez a jelentést az alkalmazás általános állapotát.</span><span class="sxs-lookup"><span data-stu-id="50188-263">Create a custom endpoint that reports on the overall health of the application.</span></span> <span data-ttu-id="50188-264">Ez lehetővé teszi, hogy áthelyezze a feladatokat, ha bármely kritikus elérési sikertelen, nem csak az előtér Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="50188-264">This enables Traffic Manager to fail over if any critical path fails, not just the front end.</span></span> <span data-ttu-id="50188-265">A végpont egy HTTP-hibakódot kell visszaadnia, ha bármely kritikus függőségi viszonyban a nem megfelelő vagy nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="50188-265">The endpoint should return an HTTP error code if any critical dependency is unhealthy or unreachable.</span></span> <span data-ttu-id="50188-266">Azonban jelentést nem a nem kritikus szolgáltatások által jelzett hibákat.</span><span class="sxs-lookup"><span data-stu-id="50188-266">Don't report errors for non-critical services, however.</span></span> <span data-ttu-id="50188-267">Ellenkező esetben a állapotmintáihoz feladatátvételt válthat nincs szükség esetén, a vakriasztások létrehozása.</span><span class="sxs-lookup"><span data-stu-id="50188-267">Otherwise, the health probe might trigger failover when it's not needed, creating false positives.</span></span> <span data-ttu-id="50188-268">További információkért lásd: [Traffic Manager-végpont figyelése és a feladatátvételi](/azure/traffic-manager/traffic-manager-monitoring/).</span><span class="sxs-lookup"><span data-stu-id="50188-268">For more information, see [Traffic Manager endpoint monitoring and failover](/azure/traffic-manager/traffic-manager-monitoring/).</span></span>

## <a name="virtual-machines"></a><span data-ttu-id="50188-269">Virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="50188-269">Virtual Machines</span></span>

<span data-ttu-id="50188-270">**Kerülje a termelési munkaterhelés futó egyetlen virtuális gép.**</span><span class="sxs-lookup"><span data-stu-id="50188-270">**Avoid running a production workload on a single VM.**</span></span> <span data-ttu-id="50188-271">Egyetlen Virtuálisgép-telepítéshez nem is lehetséges legyen tervezett vagy nem tervezett karbantartás.</span><span class="sxs-lookup"><span data-stu-id="50188-271">A single VM deployment is not resilient to planned or unplanned maintenance.</span></span> <span data-ttu-id="50188-272">Ehelyett több virtuális gép elhelyezése egy rendelkezésre állási csoportot vagy [Virtuálisgép-méretezési készlet](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), az előtérben terheléselosztót.</span><span class="sxs-lookup"><span data-stu-id="50188-272">Instead, put multiple VMs in an availability set or [VM scale set](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), with a load balancer in front.</span></span>

<span data-ttu-id="50188-273">**Adja meg a rendelkezésre állási készlet, amikor a virtuális Gépet.**</span><span class="sxs-lookup"><span data-stu-id="50188-273">**Specify an availability set when you provision the VM.**</span></span> <span data-ttu-id="50188-274">Jelenleg nincs semmilyen módon nem adja hozzá a virtuális gépek rendelkezésre állási készlet a virtuális gép kiépítése után.</span><span class="sxs-lookup"><span data-stu-id="50188-274">Currently, there is no way to add a VM to an availability set after the VM is provisioned.</span></span> <span data-ttu-id="50188-275">Hozzáadásakor egy új virtuális gép rendelkezésre állási állítsa, hozzon létre egy hálózati Adaptert a virtuális géphez, majd adja hozzá a hálózati adapter a háttér-címkészlet a terheléselosztón.</span><span class="sxs-lookup"><span data-stu-id="50188-275">When you add a new VM to an existing availability set, make sure to create a NIC for the VM, and add the NIC to the back-end address pool on the load balancer.</span></span> <span data-ttu-id="50188-276">Ellenkező esetben a load balancer nem irányítható a hálózati forgalom, hogy a virtuális géphez.</span><span class="sxs-lookup"><span data-stu-id="50188-276">Otherwise, the load balancer won't route network traffic to that VM.</span></span>

<span data-ttu-id="50188-277">**Minden alkalmazás réteg üzembe egy külön rendelkezésre állási csoportban.**</span><span class="sxs-lookup"><span data-stu-id="50188-277">**Put each application tier into a separate Availability Set.**</span></span> <span data-ttu-id="50188-278">Az N szintű alkalmazásban nem helyezték virtuális gépek a különböző rétegeket az azonos rendelkezésre állási csoportot.</span><span class="sxs-lookup"><span data-stu-id="50188-278">In an N-tier application, don't put VMs from different tiers into the same availability set.</span></span> <span data-ttu-id="50188-279">Virtuális gépek rendelkezésre állási csoportba kerülnek, (FDs) tartalék tartományokban, és frissítse a tartományok (UD).</span><span class="sxs-lookup"><span data-stu-id="50188-279">VMs in an availability set are placed across fault domains (FDs) and update domains (UD).</span></span> <span data-ttu-id="50188-280">Azonban ahhoz, hogy a redundancia előnye, hogy FDs és UDs, a rendelkezésre állási csoport minden virtuális gép képesnek kell lennie a azonos ügyfélkérelmet kezelni.</span><span class="sxs-lookup"><span data-stu-id="50188-280">However, to get the redundancy benefit of FDs and UDs, every VM in the availability set must be able to handle the same client requests.</span></span>

<span data-ttu-id="50188-281">**Válassza ki a megfelelő Virtuálisgép-méretet, a teljesítményre vonatkozó követelmények alapján.**</span><span class="sxs-lookup"><span data-stu-id="50188-281">**Choose the right VM size based on performance requirements.**</span></span> <span data-ttu-id="50188-282">Amikor egy meglévő alkalmazások és szolgáltatások Azure helyezi át, a Virtuálisgép-méretet, amely a leginkább megegyezik a helyszíni kiszolgálók kezdődik.</span><span class="sxs-lookup"><span data-stu-id="50188-282">When moving an existing workload to Azure, start with the VM size that's the closest match to your on-premises servers.</span></span> <span data-ttu-id="50188-283">Ezután a munkaterhelések tényleges Processzor, memória és IOPS lemez teljesítménye mérhető, és állítsa be a méretet, ha szükséges.</span><span class="sxs-lookup"><span data-stu-id="50188-283">Then measure the performance of your actual workload with respect to CPU, memory, and disk IOPS, and adjust the size if needed.</span></span> <span data-ttu-id="50188-284">Ezzel biztosíthatja az alkalmazások viselkedése a várt módon egy felhőalapú környezetben.</span><span class="sxs-lookup"><span data-stu-id="50188-284">This helps to ensure the application behaves as expected in a cloud environment.</span></span> <span data-ttu-id="50188-285">Is ha több hálózati adapter van szüksége, vegye figyelembe az egyes hálózati adapter határérték.</span><span class="sxs-lookup"><span data-stu-id="50188-285">Also, if you need multiple NICs, be aware of the NIC limit for each size.</span></span>

<span data-ttu-id="50188-286">**Használja a felügyelt lemezeit a VHD-k.**</span><span class="sxs-lookup"><span data-stu-id="50188-286">**Use Managed Disks for VHDs.**</span></span> <span data-ttu-id="50188-287">[Által kezelt lemezeken] [ managed-disks] megbízhatóságnak virtuális gépek rendelkezésre állási csoportba, mert a lemezek megfelelően különítve egymástól elkerülése érdekében a hibaérzékeny pontokat.</span><span class="sxs-lookup"><span data-stu-id="50188-287">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="50188-288">Felügyelt lemezek is, nem a VHD-k egy tárfiókot létre IOPS határértékeken.</span><span class="sxs-lookup"><span data-stu-id="50188-288">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="50188-289">További információkért lásd: [a Windows Azure virtuális gépek rendelkezésre állásának kezelése][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="50188-289">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="50188-290">**Alkalmazásokat telepít a adatlemezt, nem az operációsrendszer-lemezképet.**</span><span class="sxs-lookup"><span data-stu-id="50188-290">**Install applications on a data disk, not the OS disk.**</span></span> <span data-ttu-id="50188-291">Ellenkező esetben előfordulhat, hogy elérte a lemez méretének korlátját.</span><span class="sxs-lookup"><span data-stu-id="50188-291">Otherwise, you may reach the disk size limit.</span></span>

<span data-ttu-id="50188-292">**Azure Backup használatával biztonsági másolatot készíteni a virtuális gépek.**</span><span class="sxs-lookup"><span data-stu-id="50188-292">**Use Azure Backup to back up VMs.**</span></span> <span data-ttu-id="50188-293">Biztonsági mentés véletlen adatvesztést elleni védelem érdekében.</span><span class="sxs-lookup"><span data-stu-id="50188-293">Backups protect against accidental data loss.</span></span> <span data-ttu-id="50188-294">További információkért lásd: [Azure virtuális gépek védelme a recovery services-tároló](/azure/backup/backup-azure-vms-first-look-arm/).</span><span class="sxs-lookup"><span data-stu-id="50188-294">For more information, see [Protect Azure VMs with a recovery services vault](/azure/backup/backup-azure-vms-first-look-arm/).</span></span>

<span data-ttu-id="50188-295">**Diagnosztikai naplók engedélyezése**, többek között az alapszintű rendszerállapot metrika, infrastruktúra naplókat, és [rendszerindítási diagnosztika][boot-diagnostics].</span><span class="sxs-lookup"><span data-stu-id="50188-295">**Enable diagnostic logs**, including basic health metrics, infrastructure logs, and [boot diagnostics][boot-diagnostics].</span></span> <span data-ttu-id="50188-296">Rendszerindítási diagnosztika segíthetnek diagnosztizálni rendszerindítási hiba, ha a virtuális gép nem indítható állapotának beolvasása.</span><span class="sxs-lookup"><span data-stu-id="50188-296">Boot diagnostics can help you diagnose a boot failure if your VM gets into a non-bootable state.</span></span> <span data-ttu-id="50188-297">További információkért lásd: [áttekintés az Azure diagnosztikai naplók][diagnostics-logs].</span><span class="sxs-lookup"><span data-stu-id="50188-297">For more information, see [Overview of Azure Diagnostic Logs][diagnostics-logs].</span></span>

<span data-ttu-id="50188-298">**A AzureLogCollector a kiterjesztést használni.**</span><span class="sxs-lookup"><span data-stu-id="50188-298">**Use the AzureLogCollector extension.**</span></span> <span data-ttu-id="50188-299">(Windows virtuális gépek csak.) A bővítmény összesíti az Azure platformon naplókat, és feltölti az Azure storage az operátort, a virtuális Géphez való távoli bejelentkezés nélkül.</span><span class="sxs-lookup"><span data-stu-id="50188-299">(Windows VMs only.) This extension aggregates Azure platform logs and uploads them to Azure storage, without the operator remotely logging into the VM.</span></span> <span data-ttu-id="50188-300">További információkért lásd: [AzureLogCollector bővítmény](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="50188-300">For more information, see [AzureLogCollector Extension](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

## <a name="virtual-network"></a><span data-ttu-id="50188-301">Virtual Network</span><span class="sxs-lookup"><span data-stu-id="50188-301">Virtual Network</span></span>

<span data-ttu-id="50188-302">**Engedélyezési vagy tiltólista nyilvános IP-címek, vegye fel az NSG az alhálózatot.**</span><span class="sxs-lookup"><span data-stu-id="50188-302">**To whitelist or block public IP addresses, add an NSG to the subnet.**</span></span> <span data-ttu-id="50188-303">Engedélyezze a hozzáférést a rosszindulatú felhasználóktól, vagy a hozzáférés engedélyezése csak a felhasználók, akik jogosult az alkalmazás eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="50188-303">Block access from malicious users, or allow access only from users who have privilege to access the application.</span></span>  

<span data-ttu-id="50188-304">**Hozzon létre egy egyéni állapotmintáihoz.**</span><span class="sxs-lookup"><span data-stu-id="50188-304">**Create a custom health probe.**</span></span> <span data-ttu-id="50188-305">HTTP vagy TCP tesztelheti a Load Balancer állapot-mintavételi csomagjai.</span><span class="sxs-lookup"><span data-stu-id="50188-305">Load Balancer Health Probes can test either HTTP or TCP.</span></span> <span data-ttu-id="50188-306">Ha egy virtuális Gépet egy HTTP-kiszolgáló fut, a HTTP-vizsgálatot mint egy TCP-Hálózatfigyelővel a állapotadatainak jobb kijelző.</span><span class="sxs-lookup"><span data-stu-id="50188-306">If a VM runs an HTTP server, the HTTP probe is a better indicator of health status than a TCP probe.</span></span> <span data-ttu-id="50188-307">HTTP-vizsgálatot használjon egy egyéni végpontot, amelyhez a jelentések általános állapotát, az alkalmazásnak, beleértve az összes kritikus függőségeket.</span><span class="sxs-lookup"><span data-stu-id="50188-307">For an HTTP probe, use a custom endpoint that reports the overall health of the application, including all critical dependencies.</span></span> <span data-ttu-id="50188-308">További információkért lásd: [Azure Load Balancer áttekintése](/azure/load-balancer/load-balancer-overview/).</span><span class="sxs-lookup"><span data-stu-id="50188-308">For more information, see [Azure Load Balancer overview](/azure/load-balancer/load-balancer-overview/).</span></span>

<span data-ttu-id="50188-309">**A állapotmintáihoz nincs blokkolás.**</span><span class="sxs-lookup"><span data-stu-id="50188-309">**Don't block the health probe.**</span></span> <span data-ttu-id="50188-310">A Load Balancer állapotmintáihoz egy ismert IP-címet, 168.63.129.16 küldi.</span><span class="sxs-lookup"><span data-stu-id="50188-310">The Load Balancer Health probe is sent from a known IP address, 168.63.129.16.</span></span> <span data-ttu-id="50188-311">Bejövő és kimenő forgalmat az IP-bármely tűzfal házirendek és a hálózati biztonsági csoport (NSG) szabályok nincs blokkolás.</span><span class="sxs-lookup"><span data-stu-id="50188-311">Don't block traffic to or from this IP in any firewall policies or network security group (NSG) rules.</span></span> <span data-ttu-id="50188-312">Blokkolja a állapotmintáihoz okozna a terheléselosztóra, majd távolítsa el a virtuális gép elforgatás.</span><span class="sxs-lookup"><span data-stu-id="50188-312">Blocking the health probe would cause the load balancer to remove the VM from rotation.</span></span>

<span data-ttu-id="50188-313">**Terheléselosztó naplózását.**</span><span class="sxs-lookup"><span data-stu-id="50188-313">**Enable Load Balancer logging.**</span></span> <span data-ttu-id="50188-314">A naplók megjelenítése a háttér-hány virtuális gépek nem fordulnak elő a hálózati forgalom miatt sikertelen mintavételi válaszokat.</span><span class="sxs-lookup"><span data-stu-id="50188-314">The logs show how many VMs on the back-end are not receiving network traffic due to failed probe responses.</span></span> <span data-ttu-id="50188-315">További információkért lásd: [analytics keresse meg a Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/).</span><span class="sxs-lookup"><span data-stu-id="50188-315">For more information, see [Log analytics for Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/).</span></span>

<!-- links -->
[boot-diagnostics]: https://azure.microsoft.com/blog/boot-diagnostics-for-virtual-machines-v2/
[diagnostics-logs]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs/
[managed-disks]: /azure/storage/storage-managed-disks-overview
[search-optimization]: /azure/search/search-performance-optimization/
[sql-backup]: /azure/sql-database/sql-database-automated-backups/
[sql-restore]: /azure/sql-database/sql-database-recovery-using-backups/
[vm-manage-availability]: /azure/virtual-machines/windows/manage-availability#use-managed-disks-for-vms-in-an-availability-set
