---
title: Rugalmasságra vonatkozó ellenőrzőlista az Azure-szolgáltatásokhoz
description: Rugalmasságra vonatkozó útmutatás különböző Azure-szolgáltatásokat biztosító ellenőrzőlista.
author: petertaylor9999
ms.date: 03/02/2018
ms.custom: resiliency, checklist
ms.openlocfilehash: 50808a837132e905cc89c3c43d40852a04f4885c
ms.sourcegitcommit: dbbf914757b03cdee7a274204f9579fa63d7eed2
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 11/02/2018
ms.locfileid: "50916702"
---
# <a name="resiliency-checklist-for-specific-azure-services"></a><span data-ttu-id="226b5-103">Rugalmasságra vonatkozó ellenőrzőlista az adott Azure-szolgáltatásokhoz</span><span class="sxs-lookup"><span data-stu-id="226b5-103">Resiliency checklist for specific Azure services</span></span>

<span data-ttu-id="226b5-104">Rugalmasság rendszer azon képessége, hogy helyreálljon a hibák után, és továbbra is működnek, és az egyik a [szoftverminőség alappillérei](../guide/pillars.md).</span><span class="sxs-lookup"><span data-stu-id="226b5-104">Resiliency is the ability of a system to recover from failures and continue to function, and is one of the [pillars of software quality](../guide/pillars.md).</span></span> <span data-ttu-id="226b5-105">Minden technológiai rendelkezik a saját adott hibaállapot, amely, amikor figyelembe kell vennie, amelyek segítenek az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="226b5-105">Every technology has its own particular failure modes, which you must consider when designing and implementing your application.</span></span> <span data-ttu-id="226b5-106">Az alábbi ellenőrzőlista használatával tekintse át a rugalmassággal kapcsolatos szempontok az adott Azure-szolgáltatásokhoz.</span><span class="sxs-lookup"><span data-stu-id="226b5-106">Use this checklist to review the resiliency considerations for specific Azure services.</span></span> <span data-ttu-id="226b5-107">Emellett tekintse át a [általános rugalmasságra vonatkozó ellenőrzőlista](./resiliency.md).</span><span class="sxs-lookup"><span data-stu-id="226b5-107">Also review the [general resiliency checklist](./resiliency.md).</span></span>

## <a name="app-service"></a><span data-ttu-id="226b5-108">App Service</span><span class="sxs-lookup"><span data-stu-id="226b5-108">App Service</span></span>

<span data-ttu-id="226b5-109">**Használjon Standard vagy prémium csomagra.**</span><span class="sxs-lookup"><span data-stu-id="226b5-109">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="226b5-110">Ezek a csomagok támogatja az átmeneti tárhelyek és automatikus biztonsági mentéseket.</span><span class="sxs-lookup"><span data-stu-id="226b5-110">These tiers support staging slots and automated backups.</span></span> <span data-ttu-id="226b5-111">További információkért lásd: [Azure App Service díjcsomagjainak részletes áttekintése](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)</span><span class="sxs-lookup"><span data-stu-id="226b5-111">For more information, see [Azure App Service plans in-depth overview](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)</span></span>

<span data-ttu-id="226b5-112">**Kerülje a felfelé és lefelé skálázást.**</span><span class="sxs-lookup"><span data-stu-id="226b5-112">**Avoid scaling up or down.**</span></span> <span data-ttu-id="226b5-113">Ehelyett válasszon egy olyan szintet és a példányméret, amelyek megfelelnek a teljesítményigényeinek tipikus terhelés mellett, majd [horizontális felskálázása](/azure/app-service-web/web-sites-scale/) a példányokat a megváltozott forgalommennyiség adatforgalma.</span><span class="sxs-lookup"><span data-stu-id="226b5-113">Instead, select a tier and instance size that meet your performance requirements under typical load, and then [scale out](/azure/app-service-web/web-sites-scale/) the instances to handle changes in traffic volume.</span></span> <span data-ttu-id="226b5-114">Skálázás felfelé és lefelé indíthat újra kell indítani az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="226b5-114">Scaling up and down may trigger an application restart.</span></span>  

<span data-ttu-id="226b5-115">**Konfigurációs Store alkalmazásbeállításokként.**</span><span class="sxs-lookup"><span data-stu-id="226b5-115">**Store configuration as app settings.**</span></span> <span data-ttu-id="226b5-116">Alkalmazásbeállítások használata, amely a konfigurációs beállítások alkalmazásbeállításokként tárolja.</span><span class="sxs-lookup"><span data-stu-id="226b5-116">Use app settings to hold configuration settings as app settings.</span></span> <span data-ttu-id="226b5-117">Adja meg a beállításokat a Resource Manager-sablonokat, vagy a PowerShell-lel, így alkalmazza őket egy automatikus központi telepítésének részeként, / folyamat, amely több frissítése.</span><span class="sxs-lookup"><span data-stu-id="226b5-117">Define the settings in your Resource Manager templates, or using PowerShell, so that you can apply them as part of an automated deployment / update process, which is more reliable.</span></span> <span data-ttu-id="226b5-118">További információkért lásd: [webalkalmazások konfigurálása az Azure App Service](/azure/app-service-web/web-sites-configure/).</span><span class="sxs-lookup"><span data-stu-id="226b5-118">For more information, see [Configure web apps in Azure App Service](/azure/app-service-web/web-sites-configure/).</span></span>

<span data-ttu-id="226b5-119">**Hozzon létre külön App Service-csomagok az üzemi és tesztkörnyezetben.**</span><span class="sxs-lookup"><span data-stu-id="226b5-119">**Create separate App Service plans for production and test.**</span></span> <span data-ttu-id="226b5-120">Ne használjon tárhelyek az éles környezet teszteléséhez.</span><span class="sxs-lookup"><span data-stu-id="226b5-120">Don't use slots on your production deployment for testing.</span></span>  <span data-ttu-id="226b5-121">Az azonos App Service-csomagban található alkalmazások megosztása a VM-példányokon.</span><span class="sxs-lookup"><span data-stu-id="226b5-121">All apps within the same App Service plan share the same VM instances.</span></span> <span data-ttu-id="226b5-122">Ha termelési és tesztelési célú telepítések ugyanabban a csomagban helyezi, az éles üzembe helyezés negatív hatással lehet.</span><span class="sxs-lookup"><span data-stu-id="226b5-122">If you put production and test deployments in the same plan, it can negatively affect the production deployment.</span></span> <span data-ttu-id="226b5-123">Ha például terheléstesztek csökkentheti az éles helyet.</span><span class="sxs-lookup"><span data-stu-id="226b5-123">For example, load tests might degrade the live production site.</span></span> <span data-ttu-id="226b5-124">Egy külön tervbe tesztkörnyezetek helyezésével, elkülönítse azokat a változatát tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="226b5-124">By putting test deployments into a separate plan, you isolate them from the production version.</span></span>  

<span data-ttu-id="226b5-125">**A web API-k külön web Apps-alkalmazások.**</span><span class="sxs-lookup"><span data-stu-id="226b5-125">**Separate web apps from web APIs.**</span></span> <span data-ttu-id="226b5-126">Ha a megoldás is egy webes előtérrendszert és egy webes API-t, érdemes decomposing őket külön App Service-alkalmazásokba.</span><span class="sxs-lookup"><span data-stu-id="226b5-126">If your solution has both a web front-end and a web API, consider decomposing them into separate App Service apps.</span></span> <span data-ttu-id="226b5-127">Ez a kialakítás megkönnyíti a megoldás felbontás számítási feladat alapján.</span><span class="sxs-lookup"><span data-stu-id="226b5-127">This design makes it easier to decompose the solution by workload.</span></span> <span data-ttu-id="226b5-128">Futtathatja a web app és az API-t külön App Service-csomagok, így ezek egymástól függetlenül skálázhatók.</span><span class="sxs-lookup"><span data-stu-id="226b5-128">You can run the web app and the API in separate App Service plans, so they can be scaled independently.</span></span> <span data-ttu-id="226b5-129">Ha nincs szükség ilyen szintű méretezhetőségre, először telepítheti az alkalmazások ugyanabba a csomagba, és helyezze át őket szét később, ha szükséges.</span><span class="sxs-lookup"><span data-stu-id="226b5-129">If you don't need that level of scalability at first, you can deploy the apps into the same plan, and move them into separate plans later, if needed.</span></span>

<span data-ttu-id="226b5-130">**Kerülje az App Service biztonsági mentési szolgáltatás Azure SQL-adatbázisok biztonsági mentését.**</span><span class="sxs-lookup"><span data-stu-id="226b5-130">**Avoid using the App Service backup feature to back up Azure SQL databases.**</span></span> <span data-ttu-id="226b5-131">Ehelyett használjon [SQL-adatbázis automatikus biztonsági mentések][sql-backup].</span><span class="sxs-lookup"><span data-stu-id="226b5-131">Instead, use [SQL Database automated backups][sql-backup].</span></span> <span data-ttu-id="226b5-132">Az App Service biztonsági mentési exportálja az adatbázist egy SQL .bacpac fájlt, amely költségek a dtu-k.</span><span class="sxs-lookup"><span data-stu-id="226b5-132">App Service backup exports the database to a SQL .bacpac file, which costs DTUs.</span></span>  

<span data-ttu-id="226b5-133">**Az előkészítési pont telepítése.**</span><span class="sxs-lookup"><span data-stu-id="226b5-133">**Deploy to a staging slot.**</span></span> <span data-ttu-id="226b5-134">Az átmeneti üzembe helyezési tárhely létrehozása.</span><span class="sxs-lookup"><span data-stu-id="226b5-134">Create a deployment slot for staging.</span></span> <span data-ttu-id="226b5-135">Alkalmazás-frissítéseket telepítheti az előkészítési ponton, és a telepítés előtt sikeressége az éles környezetbe.</span><span class="sxs-lookup"><span data-stu-id="226b5-135">Deploy application updates to the staging slot, and verify the deployment before swapping it into production.</span></span> <span data-ttu-id="226b5-136">Ez csökkenti az esélyét, hogy egy rossz frissítés éles környezetben.</span><span class="sxs-lookup"><span data-stu-id="226b5-136">This reduces the chance of a bad update in production.</span></span> <span data-ttu-id="226b5-137">Emellett biztosítja, hogy a összes példányát, mielőtt éles környezetben a felcserélés folyamatban vannak bemelegíteni.</span><span class="sxs-lookup"><span data-stu-id="226b5-137">It also ensures that all instances are warmed up before being swapped into production.</span></span> <span data-ttu-id="226b5-138">Számos alkalmazás jelentős melegítési és hidegindítási idő van.</span><span class="sxs-lookup"><span data-stu-id="226b5-138">Many applications have a significant warmup and cold-start time.</span></span> <span data-ttu-id="226b5-139">További információkért lásd: [állítsa be átmeneti környezeteket az Azure App Service web apps](/azure/app-service-web/web-sites-staged-publishing/).</span><span class="sxs-lookup"><span data-stu-id="226b5-139">For more information, see [Set up staging environments for web apps in Azure App Service](/azure/app-service-web/web-sites-staged-publishing/).</span></span>

<span data-ttu-id="226b5-140">**Hozzon létre egy üzembe helyezési pont, amely tárolja a legutóbbi megfelelően működő (LKG) központi telepítés.**</span><span class="sxs-lookup"><span data-stu-id="226b5-140">**Create a deployment slot to hold the last-known-good (LKG) deployment.**</span></span> <span data-ttu-id="226b5-141">Ha éles környezetben telepít egy frissítést, a LKG tárolóhely helyezze át a korábbi éles környezetet.</span><span class="sxs-lookup"><span data-stu-id="226b5-141">When you deploy an update to production, move the previous production deployment into the LKG slot.</span></span> <span data-ttu-id="226b5-142">Ez megkönnyíti az visszavonásához működő üzemelő példányt.</span><span class="sxs-lookup"><span data-stu-id="226b5-142">This makes it easier to roll back a bad deployment.</span></span> <span data-ttu-id="226b5-143">Ha probléma merül fel újabb, gyorsan visszaállíthatja a LKG verzióra.</span><span class="sxs-lookup"><span data-stu-id="226b5-143">If you discover a problem later, you can quickly revert to the LKG version.</span></span> <span data-ttu-id="226b5-144">További információkért lásd: [alapszintű webalkalmazás](../reference-architectures/app-service-web-app/basic-web-app.md).</span><span class="sxs-lookup"><span data-stu-id="226b5-144">For more information, see [Basic web application](../reference-architectures/app-service-web-app/basic-web-app.md).</span></span>

<span data-ttu-id="226b5-145">**Diagnosztikai naplózás engedélyezése**, beleértve az alkalmazásnaplózást és a webkiszolgáló-naplózást.</span><span class="sxs-lookup"><span data-stu-id="226b5-145">**Enable diagnostics logging**, including application logging and web server logging.</span></span> <span data-ttu-id="226b5-146">A naplózás nem fontos a monitorozás és diagnosztika.</span><span class="sxs-lookup"><span data-stu-id="226b5-146">Logging is important for monitoring and diagnostics.</span></span> <span data-ttu-id="226b5-147">Lásd: [az Azure App Service web Apps-alkalmazások diagnosztikai célú naplózásának engedélyezése](/azure/app-service-web/web-sites-enable-diagnostic-log/)</span><span class="sxs-lookup"><span data-stu-id="226b5-147">See [Enable diagnostics logging for web apps in Azure App Service](/azure/app-service-web/web-sites-enable-diagnostic-log/)</span></span>

<span data-ttu-id="226b5-148">**Jelentkezzen be a blob storage-bA.**</span><span class="sxs-lookup"><span data-stu-id="226b5-148">**Log to blob storage.**</span></span> <span data-ttu-id="226b5-149">Ez megkönnyíti a összegyűjteni és elemezni az adatokat.</span><span class="sxs-lookup"><span data-stu-id="226b5-149">This makes it easier to collect and analyze the data.</span></span>

<span data-ttu-id="226b5-150">**Hozzon létre egy külön tárfiókot a naplók számára.**</span><span class="sxs-lookup"><span data-stu-id="226b5-150">**Create a separate storage account for logs.**</span></span> <span data-ttu-id="226b5-151">Ne használja ugyanazt a tárfiókot a naplók és alkalmazásadatok.</span><span class="sxs-lookup"><span data-stu-id="226b5-151">Don't use the same storage account for logs and application data.</span></span> <span data-ttu-id="226b5-152">Ez segít megakadályozni a naplózás az alkalmazások teljesítményét csökkenti.</span><span class="sxs-lookup"><span data-stu-id="226b5-152">This helps to prevent logging from reducing application performance.</span></span>

<span data-ttu-id="226b5-153">**Teljesítmény figyelése.**</span><span class="sxs-lookup"><span data-stu-id="226b5-153">**Monitor performance.**</span></span> <span data-ttu-id="226b5-154">A Teljesítményfigyelő szolgáltatás például [New relic-bővítménnyel](https://newrelic.com/) vagy [Application Insights](/azure/application-insights/app-insights-overview/) alkalmazások teljesítményének figyelése és a viselkedés terhelés alatt.</span><span class="sxs-lookup"><span data-stu-id="226b5-154">Use a performance monitoring service such as [New Relic](https://newrelic.com/) or [Application Insights](/azure/application-insights/app-insights-overview/) to monitor application performance and behavior under load.</span></span>  <span data-ttu-id="226b5-155">Alkalmazásteljesítmény-figyelő lehetővé teszi az alkalmazás valós idejű betekintést.</span><span class="sxs-lookup"><span data-stu-id="226b5-155">Performance monitoring gives you real-time insight into the application.</span></span> <span data-ttu-id="226b5-156">Lehetővé teszi, hogy diagnosztizálhatja a problémákat, és a hibák alapvető okok elemzését.</span><span class="sxs-lookup"><span data-stu-id="226b5-156">It enables you to diagnose issues and perform root-cause analysis of failures.</span></span>

## <a name="application-gateway"></a><span data-ttu-id="226b5-157">Application Gateway</span><span class="sxs-lookup"><span data-stu-id="226b5-157">Application Gateway</span></span>

<span data-ttu-id="226b5-158">**Legalább két példányt üzembe helyezhető.**</span><span class="sxs-lookup"><span data-stu-id="226b5-158">**Provision at least two instances.**</span></span> <span data-ttu-id="226b5-159">Helyezze üzembe az Application Gateway legalább két példánnyal.</span><span class="sxs-lookup"><span data-stu-id="226b5-159">Deploy Application Gateway with at least two instances.</span></span> <span data-ttu-id="226b5-160">Egyetlen példány egy meghibásodási pont.</span><span class="sxs-lookup"><span data-stu-id="226b5-160">A single instance is a single point of failure.</span></span> <span data-ttu-id="226b5-161">Két vagy több példány üzemeltetéséhez a redundancia és a méretezhetőség.</span><span class="sxs-lookup"><span data-stu-id="226b5-161">Use two or more instances for redundancy and scalability.</span></span> <span data-ttu-id="226b5-162">Ahhoz, hogy megfeleljen a [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway), legalább két közepes vagy nagy méretű példánnyal kell kiépítenie.</span><span class="sxs-lookup"><span data-stu-id="226b5-162">In order to qualify for the [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway), you must provision two or more medium or larger instances.</span></span>

## <a name="cosmos-db"></a><span data-ttu-id="226b5-163">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="226b5-163">Cosmos DB</span></span>

<span data-ttu-id="226b5-164">**Az adatbázis replikálása régiók között elosztva.**</span><span class="sxs-lookup"><span data-stu-id="226b5-164">**Replicate the database across regions.**</span></span> <span data-ttu-id="226b5-165">A cosmos DB segítségével tetszőleges számú Azure-régiók társítása egy Cosmos DB-adatbázisfiók.</span><span class="sxs-lookup"><span data-stu-id="226b5-165">Cosmos DB allows you to associate any number of Azure regions with a Cosmos DB database account.</span></span> <span data-ttu-id="226b5-166">Cosmos DB-adatbázis egy írási régiót és a több olvasási régióval is rendelkezhetnek.</span><span class="sxs-lookup"><span data-stu-id="226b5-166">A Cosmos DB database can have one write region and multiple read regions.</span></span> <span data-ttu-id="226b5-167">Ha hiba van az írási régió, egy másik replikára képes olvasni.</span><span class="sxs-lookup"><span data-stu-id="226b5-167">If there is a failure in the write region, you can read from another replica.</span></span> <span data-ttu-id="226b5-168">Az ügyfél-SDK ezt automatikusan megteszi.</span><span class="sxs-lookup"><span data-stu-id="226b5-168">The Client SDK handles this automatically.</span></span> <span data-ttu-id="226b5-169">Az írási régió egy másik régióban is feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="226b5-169">You can also fail over the write region to another region.</span></span> <span data-ttu-id="226b5-170">További információkért lásd: [hogyan globális adatterjesztés az Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span><span class="sxs-lookup"><span data-stu-id="226b5-170">For more information, see [How to distribute data globally with Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span></span>

## <a name="event-hubs"></a><span data-ttu-id="226b5-171">Event Hubs</span><span class="sxs-lookup"><span data-stu-id="226b5-171">Event Hubs</span></span>

<span data-ttu-id="226b5-172">**Az ellenőrzőpontok használata**.</span><span class="sxs-lookup"><span data-stu-id="226b5-172">**Use checkpoints**.</span></span>  <span data-ttu-id="226b5-173">Egy eseményközpontból, eseményfelhasználó kell írni az aktuális pozícióját adattárolásra néhány előre meghatározott időközönként.</span><span class="sxs-lookup"><span data-stu-id="226b5-173">An event consumer should write its current position to persistent storage at some predefined interval.</span></span> <span data-ttu-id="226b5-174">Így ha az ügyfél egy tartalék (például a fogyasztói szoftverleállások vagy a gazdagép nem), majd egy új példányt folytathatja a utolsó feljegyzett beosztás érkező adatfolyam olvasása.</span><span class="sxs-lookup"><span data-stu-id="226b5-174">That way, if the consumer experiences a fault (for example, the consumer crashes, or the host fails), then a new instance can resume reading the stream from the last recorded position.</span></span> <span data-ttu-id="226b5-175">További információkért lásd: [eseményfelhasználó](/azure/event-hubs/event-hubs-features#event-consumers).</span><span class="sxs-lookup"><span data-stu-id="226b5-175">For more information, see [Event consumers](/azure/event-hubs/event-hubs-features#event-consumers).</span></span>

<span data-ttu-id="226b5-176">**Ismétlődő üzenetek kezeléséhez.**</span><span class="sxs-lookup"><span data-stu-id="226b5-176">**Handle duplicate messages.**</span></span> <span data-ttu-id="226b5-177">Ha nem sikerül egy eseményközpontból, eseményfelhasználó, üzenetfeldolgozás rögzített az utolsó ellenőrzőponttól folytatja a működését.</span><span class="sxs-lookup"><span data-stu-id="226b5-177">If an event consumer fails, message processing is resumed from the last recorded checkpoint.</span></span> <span data-ttu-id="226b5-178">Az üzenetek, feldolgozása már megtörtént az utolsó ellenőrzőpont után újra lesz feldolgozva.</span><span class="sxs-lookup"><span data-stu-id="226b5-178">Any messages that were already processed after the last checkpoint will be processed again.</span></span> <span data-ttu-id="226b5-179">Ezért a feldolgozó logika üzenet idempotensnek kell lenniük, vagy az alkalmazás üzeneteket deduplikálása képesnek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="226b5-179">Therefore, your message processing logic must be idempotent, or the application must be able to deduplicate messages.</span></span>

<span data-ttu-id="226b5-180">**Kivételek kezelésére.** .</span><span class="sxs-lookup"><span data-stu-id="226b5-180">**Handle exceptions.**.</span></span> <span data-ttu-id="226b5-181">Egy eseményközpontból, eseményfelhasználó általában ismétlődő üzenetek kötegelt dolgozza fel.</span><span class="sxs-lookup"><span data-stu-id="226b5-181">An event consumer typically processes a batch of messages in a loop.</span></span> <span data-ttu-id="226b5-182">Kezelje a kivételeket, ha egy adott üzenet miatt a kivétel teljes üzenetköteget az adatvesztés elkerülése érdekében a feldolgozási ciklus belül.</span><span class="sxs-lookup"><span data-stu-id="226b5-182">You should handle exceptions within this processing loop to avoid losing an entire batch of messages if a single message causes an exception.</span></span>

<span data-ttu-id="226b5-183">**Használja a kézbesítetlen levelek várólistájára vonatkozik.**</span><span class="sxs-lookup"><span data-stu-id="226b5-183">**Use a dead-letter queue.**</span></span> <span data-ttu-id="226b5-184">Egy üzenet feldolgozása eredményeként nem átmeneti hibát, ha helyezze az üzenet a kézbesítetlen levelek várólistája alakzatot, így nyomon követheti az állapotát.</span><span class="sxs-lookup"><span data-stu-id="226b5-184">If processing a message results in a non-transient failure, put the message onto a dead-letter queue, so that you can track the status.</span></span> <span data-ttu-id="226b5-185">A forgatókönyvtől függően előfordulhat, hogy egy másik műveletet, a alkalmazni a kompenzáló tranzakció vagy próbálkozzon újra később az üzenet el.</span><span class="sxs-lookup"><span data-stu-id="226b5-185">Depending on the scenario, you might retry the message later, apply a compensating transaction, or take some other action.</span></span> <span data-ttu-id="226b5-186">Vegye figyelembe, hogy az Event Hubs nem rendelkezik olyan beépített kézbesítetlen levelek várólistájára funkciót.</span><span class="sxs-lookup"><span data-stu-id="226b5-186">Note that Event Hubs does not have any built-in dead-letter queue functionality.</span></span> <span data-ttu-id="226b5-187">Azure Queue Storage vagy a Service Bus használatával végrehajtja a kézbesítetlen levelek várólistájára vonatkozik, vagy használja az Azure Functions vagy valamilyen más eseménykezelési mechanizmus.</span><span class="sxs-lookup"><span data-stu-id="226b5-187">You can use Azure Queue Storage or Service Bus to implement a dead-letter queue, or use Azure Functions or some other eventing mechanism.</span></span>  

<span data-ttu-id="226b5-188">**Vész-helyreállítási a másodlagos Event Hubs-névtér-ba irányuló feladatátvétel végrehajtására.**</span><span class="sxs-lookup"><span data-stu-id="226b5-188">**Implement disaster recovery by failing over to a secondary Event Hubs namespace.**</span></span> <span data-ttu-id="226b5-189">További információkért lásd: [Azure Event Hubs Geo-disaster recovery](/azure/event-hubs/event-hubs-geo-dr).</span><span class="sxs-lookup"><span data-stu-id="226b5-189">For more information, see [Azure Event Hubs Geo-disaster recovery](/azure/event-hubs/event-hubs-geo-dr).</span></span>

## <a name="redis-cache"></a><span data-ttu-id="226b5-190">Redis Cache</span><span class="sxs-lookup"><span data-stu-id="226b5-190">Redis Cache</span></span>

<span data-ttu-id="226b5-191">**Georeplikáció konfigurálása**.</span><span class="sxs-lookup"><span data-stu-id="226b5-191">**Configure Geo-replication**.</span></span> <span data-ttu-id="226b5-192">A georeplikáció lehetővé teszi a két prémium szintű Azure Redis Cache-példány csatolása.</span><span class="sxs-lookup"><span data-stu-id="226b5-192">Geo-replication provides a mechanism for linking two Premium tier Azure Redis Cache instances.</span></span> <span data-ttu-id="226b5-193">Az elsődleges gyorsítótár írt adatok replikálódnak a másodlagos csak olvasható gyorsítótáraként.</span><span class="sxs-lookup"><span data-stu-id="226b5-193">Data written to the primary cache is replicated to a secondary read-only cache.</span></span> <span data-ttu-id="226b5-194">További információkért lásd: [georeplikáció konfigurálása az Azure Redis Cache-gyorsítótárhoz](/azure/redis-cache/cache-how-to-geo-replication)</span><span class="sxs-lookup"><span data-stu-id="226b5-194">For more information, see [How to configure Geo-replication for Azure Redis Cache](/azure/redis-cache/cache-how-to-geo-replication)</span></span>

<span data-ttu-id="226b5-195">**Adatmegőrzés konfigurálása.**</span><span class="sxs-lookup"><span data-stu-id="226b5-195">**Configure data persistence.**</span></span> <span data-ttu-id="226b5-196">A redis megőrzési funkciója segítségével megőrizheti a Redis-ban tárolt adatokkal.</span><span class="sxs-lookup"><span data-stu-id="226b5-196">Redis persistence allows you to persist data stored in Redis.</span></span> <span data-ttu-id="226b5-197">Pillanatfelvételt és biztonsági mentése az adatok betölthetők egy hardverhiba.</span><span class="sxs-lookup"><span data-stu-id="226b5-197">You can also take snapshots and back up the data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="226b5-198">További információkért lásd: [prémium szintű Azure Redis Cache-gyorsítótárhoz adatmegőrzés konfigurálása](/azure/redis-cache/cache-how-to-premium-persistence)</span><span class="sxs-lookup"><span data-stu-id="226b5-198">For more information, see [How to configure data persistence for a Premium Azure Redis Cache](/azure/redis-cache/cache-how-to-premium-persistence)</span></span>

<span data-ttu-id="226b5-199">Ha a Redis Cache ideiglenes gyorsítótárként, és nem állandó tárolóként használ, ezek a javaslatok nem alkalmazható.</span><span class="sxs-lookup"><span data-stu-id="226b5-199">If you are using Redis Cache as a temporary data cache and not as a persistent store, these recommendations may not apply.</span></span> 

## <a name="search"></a><span data-ttu-id="226b5-200">Keresés</span><span class="sxs-lookup"><span data-stu-id="226b5-200">Search</span></span>

<span data-ttu-id="226b5-201">**Több replika üzembe helyezhető.**</span><span class="sxs-lookup"><span data-stu-id="226b5-201">**Provision more than one replica.**</span></span> <span data-ttu-id="226b5-202">Legalább két replika használata olvasási magas rendelkezésre állású, vagy három az olvasási és írási magas rendelkezésre állású.</span><span class="sxs-lookup"><span data-stu-id="226b5-202">Use at least two replicas for read high-availability, or three for read-write high-availability.</span></span>

<span data-ttu-id="226b5-203">**Konfigurálhatja az indexelőket többrégiós üzemelő példányokhoz.**</span><span class="sxs-lookup"><span data-stu-id="226b5-203">**Configure indexers for multi-region deployments.**</span></span> <span data-ttu-id="226b5-204">Ha több régióból álló üzemelő, fontolja meg a beállításokat az indexelő folytonosságának.</span><span class="sxs-lookup"><span data-stu-id="226b5-204">If you have a multi-region deployment, consider your options for continuity in indexing.</span></span>

  * <span data-ttu-id="226b5-205">Ha az adatforrás georeplikált, általában kell mutatnia minden indexelő minden regionális Azure Search szolgáltatás a helyi adatok forrásreplikára.</span><span class="sxs-lookup"><span data-stu-id="226b5-205">If the data source is geo-replicated, you should generally point each indexer of each regional Azure Search service to its local data source replica.</span></span> <span data-ttu-id="226b5-206">Ezt a megközelítést az Azure SQL Database-ben tárolt nagyméretű adathalmazok azonban nem ajánlott.</span><span class="sxs-lookup"><span data-stu-id="226b5-206">However, that approach is not recommended for large datasets stored in Azure SQL Database.</span></span> <span data-ttu-id="226b5-207">A hiba oka, hogy az Azure Search nem hajtható végre a másodlagos SQL-adatbázis-replikákat, csak az elsődleges replika indexelő növekményes.</span><span class="sxs-lookup"><span data-stu-id="226b5-207">The reason is that Azure Search cannot perform incremental indexing from secondary SQL Database replicas, only from primary replicas.</span></span> <span data-ttu-id="226b5-208">Ehelyett minden indexelő mutasson az elsődleges replika.</span><span class="sxs-lookup"><span data-stu-id="226b5-208">Instead, point all indexers to the primary replica.</span></span> <span data-ttu-id="226b5-209">A feladatátvétel után az új elsődleges replika az Azure Search-indexelők mutassanak.</span><span class="sxs-lookup"><span data-stu-id="226b5-209">After a failover, point the Azure Search indexers at the new primary replica.</span></span>  
  * <span data-ttu-id="226b5-210">Ha az adatforrás nem áll, georeplikált, pont, ugyanazt az adatforrást több indexelő, hogy több régióban az Azure Search-szolgáltatás folyamatosan és egymástól függetlenül index az adatforrásból.</span><span class="sxs-lookup"><span data-stu-id="226b5-210">If the data source is not geo-replicated, point multiple indexers at the same data source, so that Azure Search services in multiple regions continuously and independently index from the data source.</span></span> <span data-ttu-id="226b5-211">További információkért lásd: [Azure Search-teljesítmény és optimalizálás szempontok][search-optimization].</span><span class="sxs-lookup"><span data-stu-id="226b5-211">For more information, see [Azure Search performance and optimization considerations][search-optimization].</span></span>

## <a name="service-bus"></a><span data-ttu-id="226b5-212">Service Bus</span><span class="sxs-lookup"><span data-stu-id="226b5-212">Service Bus</span></span>

<span data-ttu-id="226b5-213">**Prémium szintű használata a termelési számítási feladatokhoz**.</span><span class="sxs-lookup"><span data-stu-id="226b5-213">**Use Premium tier for production workloads**.</span></span> <span data-ttu-id="226b5-214">[Service Bus prémium szintű üzenetkezelés](/azure/service-bus-messaging/service-bus-premium-messaging) biztosít dedikált és fenntartott feldolgozási erőforrásokat, és memóriakapacitásának kiszámítható teljesítményt és az átviteli sebesség támogatására.</span><span class="sxs-lookup"><span data-stu-id="226b5-214">[Service Bus Premium Messaging](/azure/service-bus-messaging/service-bus-premium-messaging) provides dedicated and reserved processing resources, and memory capacity to support predictable performance and throughput.</span></span> <span data-ttu-id="226b5-215">Prémium szintű üzenetkezelés csomag is hozzáférést biztosít, amely csak a prémium szintű ügyfelek először számára elérhető új szolgáltatásokkal.</span><span class="sxs-lookup"><span data-stu-id="226b5-215">Premium Messaging tier also gives you access to new features that are available only to premium customers at first.</span></span> <span data-ttu-id="226b5-216">Eldöntheti, hogy a várható számítási feladatok alapján üzenetkezelési egységek száma.</span><span class="sxs-lookup"><span data-stu-id="226b5-216">You can decide the number of messaging units based on expected workloads.</span></span>

<span data-ttu-id="226b5-217">**Ismétlődő üzenetek kezeléséhez**.</span><span class="sxs-lookup"><span data-stu-id="226b5-217">**Handle duplicate messages**.</span></span> <span data-ttu-id="226b5-218">Ha a kiadó üzenet elküldése után azonnal meghiúsul, vagy hálózati vagy a rendszer meghibásodik, hibásan előfordulhat, hogy jegyezze fel, hogy az üzenet lett kézbesítve, és előfordulhat, hogy az azonos üzenetet küld a rendszer kétszer.</span><span class="sxs-lookup"><span data-stu-id="226b5-218">If a publisher fails immediately after sending a message, or experiences network or system issues, it may erroneously fail to record that the message was delivered, and may send the same message to the system twice.</span></span> <span data-ttu-id="226b5-219">A Service Bus duplikált elemek észlelésének engedélyezésével úgy tudja kezelni a probléma.</span><span class="sxs-lookup"><span data-stu-id="226b5-219">Service Bus can handle this issue by enabling duplicate detection.</span></span> <span data-ttu-id="226b5-220">További információkért lásd: [észlelési ismétlődő](/azure/service-bus-messaging/duplicate-detection).</span><span class="sxs-lookup"><span data-stu-id="226b5-220">For more information, see [Duplicate detection](/azure/service-bus-messaging/duplicate-detection).</span></span>

<span data-ttu-id="226b5-221">**Kivételek kezelése**.</span><span class="sxs-lookup"><span data-stu-id="226b5-221">**Handle exceptions**.</span></span> <span data-ttu-id="226b5-222">Üzenetkezelési API-k készítése a kivételeket, ha egy felhasználói hiba, konfigurációs hiba vagy más hiba lép fel.</span><span class="sxs-lookup"><span data-stu-id="226b5-222">Messaging APIs generate exceptions when a user error, configuration error, or other error occurs.</span></span> <span data-ttu-id="226b5-223">Az Ügyfélkód (küldők és fogadók) kezelje ezeket a kivételeket a kódra összpontosítsanak.</span><span class="sxs-lookup"><span data-stu-id="226b5-223">The client code (senders and receivers) should handle these exceptions in their code.</span></span> <span data-ttu-id="226b5-224">Ez különösen fontos a kötegelt feldolgozás, ahol a kivételkezelés is használható, teljes üzenetköteget az adatvesztés elkerülése érdekében.</span><span class="sxs-lookup"><span data-stu-id="226b5-224">This is especially important in batch processing, where exception handling can be used to avoid losing an entire batch of messages.</span></span> <span data-ttu-id="226b5-225">További információkért lásd: [Service Bus-üzenetkezelés kivételei](/azure/service-bus-messaging/service-bus-messaging-exceptions).</span><span class="sxs-lookup"><span data-stu-id="226b5-225">For more information, see [Service Bus messaging exceptions](/azure/service-bus-messaging/service-bus-messaging-exceptions).</span></span>

<span data-ttu-id="226b5-226">**Újrapróbálkozási szabályzat**.</span><span class="sxs-lookup"><span data-stu-id="226b5-226">**Retry policy**.</span></span> <span data-ttu-id="226b5-227">A Service Bus lehetővé teszi az alkalmazások számára legjobb újrapróbálkozási szabályzat kiválasztása.</span><span class="sxs-lookup"><span data-stu-id="226b5-227">Service Bus allows you to pick the best retry policy for your applications.</span></span> <span data-ttu-id="226b5-228">Az alapértelmezett házirendet, hogy a 9 maximális újrapróbálkozások száma, és várjon 30 másodpercet, de ez további módosítható.</span><span class="sxs-lookup"><span data-stu-id="226b5-228">The default policy is to allow 9 maximum retry attempts, and wait for 30 seconds but this can be further adjusted.</span></span> <span data-ttu-id="226b5-229">További információkért lásd: [újrapróbálkozási szabályzat – a Service Bus](/azure/architecture/best-practices/retry-service-specific#service-bus).</span><span class="sxs-lookup"><span data-stu-id="226b5-229">For more information, see [Retry policy – Service Bus](/azure/architecture/best-practices/retry-service-specific#service-bus).</span></span>

<span data-ttu-id="226b5-230">**Használja a kézbesítetlen levelek várólistájára**.</span><span class="sxs-lookup"><span data-stu-id="226b5-230">**Use a dead-letter queue**.</span></span> <span data-ttu-id="226b5-231">Ha az üzenet nem lehet feldolgozni, vagy több próbálkozás után címzettnek sem lett elküldve, a kézbesítetlen levelek várólistája kerülnek.</span><span class="sxs-lookup"><span data-stu-id="226b5-231">If a message cannot be processed or delivered to any receiver after multiple retries, it is moved to a dead letter queue.</span></span> <span data-ttu-id="226b5-232">Állítson be egy folyamatot az üzenetek olvasásakor a feldolgozatlan üzenetek sorhoz, vizsgálja meg őket és háríthatja el a problémát.</span><span class="sxs-lookup"><span data-stu-id="226b5-232">Implement a process to read messages from the dead letter queue, inspect them, and remediate the problem.</span></span> <span data-ttu-id="226b5-233">A forgatókönyvtől függően előfordulhat, hogy ismételje meg az üzenetet,-, a módosításokat, és próbálkozzon újra, vagy vesse el az üzenetet.</span><span class="sxs-lookup"><span data-stu-id="226b5-233">Depending on the scenario, you might retry the message as-is, make changes and retry, or discard the message.</span></span> <span data-ttu-id="226b5-234">További információkért lásd: [a Service Bus – áttekintés kézbesíthetetlen levelek sorai](/azure/service-bus-messaging/service-bus-dead-letter-queues).</span><span class="sxs-lookup"><span data-stu-id="226b5-234">For more information, see [Overview of Service Bus dead-letter queues](/azure/service-bus-messaging/service-bus-dead-letter-queues).</span></span>

<span data-ttu-id="226b5-235">**Használja a Geo-Disaster Recovery**.</span><span class="sxs-lookup"><span data-stu-id="226b5-235">**Use Geo-Disaster Recovery**.</span></span> <span data-ttu-id="226b5-236">GEO-vészhelyreállítás biztosítja, hogy adatfeldolgozási továbbra is megfelelően működjenek, eltérő régióban vagy datacenter, ha egy teljes Azure-régiót vagy datacenter katasztrófa miatt elérhetetlenné válik.</span><span class="sxs-lookup"><span data-stu-id="226b5-236">Geo-disaster recovery ensures that data processing continues to operate in a different region or datacenter if an entire Azure region or datacenter becomes unavailable due to a disaster.</span></span> <span data-ttu-id="226b5-237">További információkért lásd: [Azure Service Bus Geo-disaster recovery](/azure/service-bus-messaging/service-bus-geo-dr).</span><span class="sxs-lookup"><span data-stu-id="226b5-237">For more information, see [Azure Service Bus Geo-disaster recovery](/azure/service-bus-messaging/service-bus-geo-dr).</span></span>


## <a name="storage"></a><span data-ttu-id="226b5-238">Storage</span><span class="sxs-lookup"><span data-stu-id="226b5-238">Storage</span></span>

<span data-ttu-id="226b5-239">**Az alkalmazásadatok esetében használja az írásvédett georedundáns tárolás (RA-GRS).**</span><span class="sxs-lookup"><span data-stu-id="226b5-239">**For application data, use read-access geo-redundant storage (RA-GRS).**</span></span> <span data-ttu-id="226b5-240">RA-GRS tároló egy másodlagos régióba replikálja az adatokat, és a másodlagos régióból a csak olvasási hozzáférést biztosít.</span><span class="sxs-lookup"><span data-stu-id="226b5-240">RA-GRS storage replicates the data to a secondary region, and provides read-only access from the secondary region.</span></span> <span data-ttu-id="226b5-241">Ha a társzolgáltatás kimaradása az elsődleges régióban, az alkalmazás olvashatja az adatokat a másodlagos régióból.</span><span class="sxs-lookup"><span data-stu-id="226b5-241">If there is a storage outage in the primary region, the application can read the data from the secondary region.</span></span> <span data-ttu-id="226b5-242">További információkért lásd: [Azure Storage replikáció](/azure/storage/storage-redundancy/).</span><span class="sxs-lookup"><span data-stu-id="226b5-242">For more information, see [Azure Storage replication](/azure/storage/storage-redundancy/).</span></span>

<span data-ttu-id="226b5-243">**Virtuálisgép-lemezek a Managed Disks használata.**</span><span class="sxs-lookup"><span data-stu-id="226b5-243">**For VM disks, use Managed Disks.**</span></span> <span data-ttu-id="226b5-244">[A Managed Disks] [ managed-disks] megbízhatóságnak-beli virtuális gépek rendelkezésre állási csoportban, mert a lemezei kellőképpen különítve egymástól a kritikus hibapontok elkerülése érdekében.</span><span class="sxs-lookup"><span data-stu-id="226b5-244">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="226b5-245">Felügyelt lemezek is, nem a storage-fiókban létrehozott virtuális merevlemezek, az IOPS-korlátok vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="226b5-245">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="226b5-246">További információkért lásd: [Azure-beli Windows virtuális gépek rendelkezésre állásának kezelése][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="226b5-246">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="226b5-247">**A Queue storage hozzon létre egy biztonsági várólistát egy másik régióban.**</span><span class="sxs-lookup"><span data-stu-id="226b5-247">**For Queue storage, create a backup queue in another region.**</span></span> <span data-ttu-id="226b5-248">A Queue storage, a csak olvasható replika korlátozott használja, mert nem lehet üzenetsor vagy elemek eltávolítása a sorból.</span><span class="sxs-lookup"><span data-stu-id="226b5-248">For Queue storage, a read-only replica has limited use, because you can't queue or dequeue items.</span></span> <span data-ttu-id="226b5-249">Ehelyett hozzon létre egy biztonsági várólistát a storage-fiókban egy másik régióban.</span><span class="sxs-lookup"><span data-stu-id="226b5-249">Instead, create a backup queue in a storage account in another region.</span></span> <span data-ttu-id="226b5-250">Ha a társzolgáltatás kimaradása, az alkalmazás a biztonsági várólistát használhatja, az elsődleges régió amíg elérhetővé nem válik újra.</span><span class="sxs-lookup"><span data-stu-id="226b5-250">If there is a storage outage, the application can use the backup queue, until the primary region becomes available again.</span></span> <span data-ttu-id="226b5-251">Ezzel a módszerrel az alkalmazás továbbra is az új kérelmek tud feldolgozni.</span><span class="sxs-lookup"><span data-stu-id="226b5-251">That way, the application can still process new requests.</span></span>  

## <a name="sql-database"></a><span data-ttu-id="226b5-252">SQL Database</span><span class="sxs-lookup"><span data-stu-id="226b5-252">SQL Database</span></span>

<span data-ttu-id="226b5-253">**Használjon Standard vagy prémium csomagra.**</span><span class="sxs-lookup"><span data-stu-id="226b5-253">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="226b5-254">Ezek a rétegek adjon meg egy már időponthoz visszaállítás ideje (35 nap).</span><span class="sxs-lookup"><span data-stu-id="226b5-254">These tiers provide a longer point-in-time restore period (35 days).</span></span> <span data-ttu-id="226b5-255">További információkért lásd: [SQL Database beállításai és teljesítménye](/azure/sql-database/sql-database-service-tiers/).</span><span class="sxs-lookup"><span data-stu-id="226b5-255">For more information, see [SQL Database options and performance](/azure/sql-database/sql-database-service-tiers/).</span></span>

<span data-ttu-id="226b5-256">**Az SQL Database naplózási funkciójának engedélyezése.**</span><span class="sxs-lookup"><span data-stu-id="226b5-256">**Enable SQL Database auditing.**</span></span> <span data-ttu-id="226b5-257">Naplózás rosszindulatú támadások vagy az emberi hibák diagnosztizálásához használható.</span><span class="sxs-lookup"><span data-stu-id="226b5-257">Auditing can be used to diagnose malicious attacks or human error.</span></span> <span data-ttu-id="226b5-258">További információkért lásd: [első lépései az SQL database naplózási szolgáltatásával](/azure/sql-database/sql-database-auditing-get-started/).</span><span class="sxs-lookup"><span data-stu-id="226b5-258">For more information, see [Get started with SQL database auditing](/azure/sql-database/sql-database-auditing-get-started/).</span></span>

<span data-ttu-id="226b5-259">**Aktív Georeplikáció használatához** használatát aktív Georeplikáció egy olvasható másodlagos létrehozásához egy másik régióban.</span><span class="sxs-lookup"><span data-stu-id="226b5-259">**Use Active Geo-Replication** Use Active Geo-Replication to create a readable secondary in a different region.</span></span>  <span data-ttu-id="226b5-260">Ha az elsődleges adatbázis meghibásodik, vagy egyszerűen csak meg kell offline állapotba kell, a másodlagos adatbázis manuális feladatátvételt hajt végre.</span><span class="sxs-lookup"><span data-stu-id="226b5-260">If your primary database fails, or simply needs to be taken offline, perform a manual failover to the secondary database.</span></span>  <span data-ttu-id="226b5-261">Amíg a rendszer átadja a feladatokat, a másodlagos adatbázis csak olvasható marad.</span><span class="sxs-lookup"><span data-stu-id="226b5-261">Until you fail over, the secondary database remains read-only.</span></span>  <span data-ttu-id="226b5-262">További információkért lásd: [SQL adatbázis aktív Georeplikációt](/azure/sql-database/sql-database-geo-replication-overview/).</span><span class="sxs-lookup"><span data-stu-id="226b5-262">For more information, see [SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/).</span></span>

<span data-ttu-id="226b5-263">**A horizontális skálázás használja.**</span><span class="sxs-lookup"><span data-stu-id="226b5-263">**Use sharding.**</span></span> <span data-ttu-id="226b5-264">Érdemes a horizontális skálázás az adatbázis horizontális particionálásához.</span><span class="sxs-lookup"><span data-stu-id="226b5-264">Consider using sharding to partition the database horizontally.</span></span> <span data-ttu-id="226b5-265">A horizontális skálázás is biztosítják a hibák elszigetelését.</span><span class="sxs-lookup"><span data-stu-id="226b5-265">Sharding can provide fault isolation.</span></span> <span data-ttu-id="226b5-266">További információkért lásd: [horizontális felskálázás az Azure SQL Database](/azure/sql-database/sql-database-elastic-scale-introduction/).</span><span class="sxs-lookup"><span data-stu-id="226b5-266">For more information, see [Scaling out with Azure SQL Database](/azure/sql-database/sql-database-elastic-scale-introduction/).</span></span>

<span data-ttu-id="226b5-267">**Időponthoz visszaállítás segítségével visszaállíthatja az emberi hibák.**</span><span class="sxs-lookup"><span data-stu-id="226b5-267">**Use point-in-time restore to recover from human error.**</span></span>  <span data-ttu-id="226b5-268">Időponthoz visszaállítási adja vissza az adatbázist egy korábbi időpontra idő.</span><span class="sxs-lookup"><span data-stu-id="226b5-268">Point-in-time restore returns your database to an earlier point in time.</span></span> <span data-ttu-id="226b5-269">További információkért lásd: [helyreállítani egy Azure SQL database automatikus biztonsági adatbázismentés használatával][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="226b5-269">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

<span data-ttu-id="226b5-270">**A geo-visszaállítás segítségével visszaállíthatja a szolgáltatás-meghibásodás után.**</span><span class="sxs-lookup"><span data-stu-id="226b5-270">**Use geo-restore to recover from a service outage.**</span></span> <span data-ttu-id="226b5-271">A GEO-visszaállítás visszaállít egy adatbázist egy georedundáns biztonsági másolatból.</span><span class="sxs-lookup"><span data-stu-id="226b5-271">Geo-restore restores a database from a geo-redundant backup.</span></span>  <span data-ttu-id="226b5-272">További információkért lásd: [helyreállítani egy Azure SQL database automatikus biztonsági adatbázismentés használatával][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="226b5-272">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

## <a name="sql-data-warehouse"></a><span data-ttu-id="226b5-273">SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="226b5-273">SQL Data Warehouse</span></span>

<span data-ttu-id="226b5-274">**Tiltsa le a georedundáns biztonsági másolat.**</span><span class="sxs-lookup"><span data-stu-id="226b5-274">**Do not disable geo-backup.**</span></span> <span data-ttu-id="226b5-275">Alapértelmezés szerint az SQL Data Warehouse egy teljes biztonsági másolatának elkészítése adatait vész-helyreállítási 24 óránként.</span><span class="sxs-lookup"><span data-stu-id="226b5-275">By default, SQL Data Warehouse takes a full backup of your data every 24 hours for disaster recovery.</span></span> <span data-ttu-id="226b5-276">Ez a funkció kikapcsolása nem ajánlott.</span><span class="sxs-lookup"><span data-stu-id="226b5-276">It is not recommended to turn this feature off.</span></span> <span data-ttu-id="226b5-277">További információkért lásd: [Geo-biztonsági mentések](/azure/sql-data-warehouse/backup-and-restore#geo-backups).</span><span class="sxs-lookup"><span data-stu-id="226b5-277">For more information, see [Geo-backups](/azure/sql-data-warehouse/backup-and-restore#geo-backups).</span></span>

## <a name="sql-server-running-in-a-vm"></a><span data-ttu-id="226b5-278">Egy virtuális Gépen futó SQL Server</span><span class="sxs-lookup"><span data-stu-id="226b5-278">SQL Server running in a VM</span></span>

<span data-ttu-id="226b5-279">**Az adatbázis replikálása.**</span><span class="sxs-lookup"><span data-stu-id="226b5-279">**Replicate the database.**</span></span> <span data-ttu-id="226b5-280">Az SQL Server Always On rendelkezésre állási csoportok használatával replikálja az adatbázist.</span><span class="sxs-lookup"><span data-stu-id="226b5-280">Use SQL Server Always On Availability Groups to replicate the database.</span></span> <span data-ttu-id="226b5-281">Magas rendelkezésre állást biztosít, ha egy SQL Server-példány sikertelen.</span><span class="sxs-lookup"><span data-stu-id="226b5-281">Provides high availability if one SQL Server instance fails.</span></span> <span data-ttu-id="226b5-282">További információkért lásd: [Windows rendszerű virtuális gépek futtatása N szintű alkalmazáshoz](../reference-architectures/virtual-machines-windows/n-tier.md)</span><span class="sxs-lookup"><span data-stu-id="226b5-282">For more information, see [Run Windows VMs for an N-tier application](../reference-architectures/virtual-machines-windows/n-tier.md)</span></span>

<span data-ttu-id="226b5-283">**Az adatbázis biztonsági mentése**.</span><span class="sxs-lookup"><span data-stu-id="226b5-283">**Back up the database**.</span></span> <span data-ttu-id="226b5-284">Ha már használja a [Azure Backup](https://azure.microsoft.com/documentation/services/backup/) érdemes használni a virtuális gépek biztonsági mentése, [Azure Backup az SQL Server-tevékenységprofilokhoz DPM használatával](/azure/backup/backup-azure-backup-sql/).</span><span class="sxs-lookup"><span data-stu-id="226b5-284">If you are already using [Azure Backup](https://azure.microsoft.com/documentation/services/backup/) to back up your VMs, consider using [Azure Backup for SQL Server workloads using DPM](/azure/backup/backup-azure-backup-sql/).</span></span> <span data-ttu-id="226b5-285">Ezzel a módszerrel nincs a szervezet egy biztonsági mentési rendszergazda szerepkört, és a egy egységes helyreállítási eljárás virtuális gépek és az SQL Server.</span><span class="sxs-lookup"><span data-stu-id="226b5-285">With this approach, there is one backup administrator role for the organization and a unified recovery procedure for VMs and SQL Server.</span></span> <span data-ttu-id="226b5-286">Ellenkező esetben használjon [SQL Server Managed Backup a Microsoft Azure-bA](https://msdn.microsoft.com/library/dn449496.aspx).</span><span class="sxs-lookup"><span data-stu-id="226b5-286">Otherwise, use [SQL Server Managed Backup to Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span></span>

## <a name="traffic-manager"></a><span data-ttu-id="226b5-287">Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="226b5-287">Traffic Manager</span></span>

<span data-ttu-id="226b5-288">**Manuális feladat-visszavételt végrehajtani.**</span><span class="sxs-lookup"><span data-stu-id="226b5-288">**Perform manual failback.**</span></span> <span data-ttu-id="226b5-289">A Traffic Manager feladatátvételt végrehajtani a manuális feladat-visszavételt, nem pedig automatikusan visszavétel.</span><span class="sxs-lookup"><span data-stu-id="226b5-289">After a Traffic Manager failover, perform manual failback, rather than automatically failing back.</span></span> <span data-ttu-id="226b5-290">Visszavétel előtt győződjön meg arról, hogy alkalmazás minden alrendszere megfelelő állapotú.</span><span class="sxs-lookup"><span data-stu-id="226b5-290">Before failing back, verify that all application subsystems are healthy.</span></span>  <span data-ttu-id="226b5-291">Ellenkező esetben létrehozhat egy olyan helyzetet, ahol az alkalmazás oda-vissza az adatközpontok között tükrözi.</span><span class="sxs-lookup"><span data-stu-id="226b5-291">Otherwise, you can create a situation where the application flips back and forth between data centers.</span></span> <span data-ttu-id="226b5-292">További információkért lásd: [virtuális gépek futtatása több régióban a magas rendelkezésre állású](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span><span class="sxs-lookup"><span data-stu-id="226b5-292">For more information, see [Run VMs in multiple regions for high availability](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span></span>

<span data-ttu-id="226b5-293">**Hozzon létre egy állapotminta-végpontot.**</span><span class="sxs-lookup"><span data-stu-id="226b5-293">**Create a health probe endpoint.**</span></span> <span data-ttu-id="226b5-294">Hozzon létre egy egyéni végpontot, hogy az alkalmazás általános állapotát.</span><span class="sxs-lookup"><span data-stu-id="226b5-294">Create a custom endpoint that reports on the overall health of the application.</span></span> <span data-ttu-id="226b5-295">Ez lehetővé teszi a Traffic Manager átadja a feladatokat, ha bármely kritikus útvonalat nem sikerül, nem csak a kezelőfelület segítségével.</span><span class="sxs-lookup"><span data-stu-id="226b5-295">This enables Traffic Manager to fail over if any critical path fails, not just the front end.</span></span> <span data-ttu-id="226b5-296">A végpont HTTP-hibakódot kell visszaadnia, ha bármely kritikus fontosságú függőség nem megfelelő vagy nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="226b5-296">The endpoint should return an HTTP error code if any critical dependency is unhealthy or unreachable.</span></span> <span data-ttu-id="226b5-297">Nem hibajelentés az üzleti szempontból nem létfontosságú szolgáltatások azonban.</span><span class="sxs-lookup"><span data-stu-id="226b5-297">Don't report errors for non-critical services, however.</span></span> <span data-ttu-id="226b5-298">Ellenkező esetben az állapotminta is kiválthatják feladatátvétel, ha nincs rá szükség, téves létrehozása.</span><span class="sxs-lookup"><span data-stu-id="226b5-298">Otherwise, the health probe might trigger failover when it's not needed, creating false positives.</span></span> <span data-ttu-id="226b5-299">További információkért lásd: [Traffic Manager végpont figyelése és feladatátvétele](/azure/traffic-manager/traffic-manager-monitoring/).</span><span class="sxs-lookup"><span data-stu-id="226b5-299">For more information, see [Traffic Manager endpoint monitoring and failover](/azure/traffic-manager/traffic-manager-monitoring/).</span></span>

## <a name="virtual-machines"></a><span data-ttu-id="226b5-300">Virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="226b5-300">Virtual Machines</span></span>

<span data-ttu-id="226b5-301">**Kerülje a egy éles számítási feladatok futtatása egyetlen virtuális Gépet.**</span><span class="sxs-lookup"><span data-stu-id="226b5-301">**Avoid running a production workload on a single VM.**</span></span> <span data-ttu-id="226b5-302">Egy egyetlen virtuális gép üzembe helyezésének nem képes legyen ellenállni a tervezett vagy nem tervezett karbantartás.</span><span class="sxs-lookup"><span data-stu-id="226b5-302">A single VM deployment is not resilient to planned or unplanned maintenance.</span></span> <span data-ttu-id="226b5-303">Ehelyett helyezzen több virtuális gépet egy rendelkezésre állási csoportban vagy [Virtuálisgép-méretezési csoportot](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), az a load balancerrel elöl.</span><span class="sxs-lookup"><span data-stu-id="226b5-303">Instead, put multiple VMs in an availability set or [VM scale set](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), with a load balancer in front.</span></span>

<span data-ttu-id="226b5-304">**Adjon meg egy rendelkezésre állási csoportot a virtuális gép üzembe helyezésekor.**</span><span class="sxs-lookup"><span data-stu-id="226b5-304">**Specify an availability set when you provision the VM.**</span></span> <span data-ttu-id="226b5-305">Jelenleg nincs lehetőség a virtuális gép hozzáadása egy rendelkezésre állási csoportot a virtuális gép kiépítése után.</span><span class="sxs-lookup"><span data-stu-id="226b5-305">Currently, there is no way to add a VM to an availability set after the VM is provisioned.</span></span> <span data-ttu-id="226b5-306">Hozzáadásakor egy új virtuális gép olyan meglévő rendelkezésre állási állítsa be, ügyeljen arra, hogy hozzon létre egy hálózati Adaptert a virtuális gép, és a hálózati adapter hozzáadása a háttér-címkészletet a terheléselosztón.</span><span class="sxs-lookup"><span data-stu-id="226b5-306">When you add a new VM to an existing availability set, make sure to create a NIC for the VM, and add the NIC to the back-end address pool on the load balancer.</span></span> <span data-ttu-id="226b5-307">Ellenkező esetben a terheléselosztó nem irányítható a hálózati forgalom a virtuális Gépre.</span><span class="sxs-lookup"><span data-stu-id="226b5-307">Otherwise, the load balancer won't route network traffic to that VM.</span></span>

<span data-ttu-id="226b5-308">**Mindössze az egyes alkalmazásrétegek külön rendelkezésre állási csoportban.**</span><span class="sxs-lookup"><span data-stu-id="226b5-308">**Put each application tier into a separate Availability Set.**</span></span> <span data-ttu-id="226b5-309">Az N szintű alkalmazáshoz ne helyezzen virtuális gépet a különböző szintek az azonos rendelkezésre állási csoportba.</span><span class="sxs-lookup"><span data-stu-id="226b5-309">In an N-tier application, don't put VMs from different tiers into the same availability set.</span></span> <span data-ttu-id="226b5-310">Virtuális gépet egy rendelkezésre állási csoportban vannak elhelyezve a tartalék tartományok között, és frissítési tartományok (UD).</span><span class="sxs-lookup"><span data-stu-id="226b5-310">VMs in an availability set are placed across fault domains (FDs) and update domains (UD).</span></span> <span data-ttu-id="226b5-311">Azonban a redundancia élvezheti a tartalék és frissítési tartománnyal, a rendelkezésre állási csoportban lévő összes virtuális Géphez kell tudni az azonos ügyfélkérelmek kezelését.</span><span class="sxs-lookup"><span data-stu-id="226b5-311">However, to get the redundancy benefit of FDs and UDs, every VM in the availability set must be able to handle the same client requests.</span></span>

<span data-ttu-id="226b5-312">**Válassza ki a megfelelő Virtuálisgép-méret, teljesítmény-követelmények alapján.**</span><span class="sxs-lookup"><span data-stu-id="226b5-312">**Choose the right VM size based on performance requirements.**</span></span> <span data-ttu-id="226b5-313">Amikor helyez át egy meglévő számítási feladatok Azure-ba, indítsa el a Virtuálisgép-méretet, amely a leginkább egyezik a helyszíni kiszolgálókhoz.</span><span class="sxs-lookup"><span data-stu-id="226b5-313">When moving an existing workload to Azure, start with the VM size that's the closest match to your on-premises servers.</span></span> <span data-ttu-id="226b5-314">Ezután mérheti a CPU, memória és a lemez iops-t a valós számítási feladat teljesítményét, és módosítsa a méretet, ha szükséges.</span><span class="sxs-lookup"><span data-stu-id="226b5-314">Then measure the performance of your actual workload with respect to CPU, memory, and disk IOPS, and adjust the size if needed.</span></span> <span data-ttu-id="226b5-315">Ezzel biztosíthatja az alkalmazás egy felhőalapú környezetben a várt módon viselkedik.</span><span class="sxs-lookup"><span data-stu-id="226b5-315">This helps to ensure the application behaves as expected in a cloud environment.</span></span> <span data-ttu-id="226b5-316">Is ha több hálózati adapter van szüksége, vegye figyelembe a hálózati adapter korlát méreteire vonatkoztatva.</span><span class="sxs-lookup"><span data-stu-id="226b5-316">Also, if you need multiple NICs, be aware of the NIC limit for each size.</span></span>

<span data-ttu-id="226b5-317">**A felügyelt lemezek használata a virtuális merevlemezeket.**</span><span class="sxs-lookup"><span data-stu-id="226b5-317">**Use Managed Disks for VHDs.**</span></span> <span data-ttu-id="226b5-318">[A Managed Disks] [ managed-disks] megbízhatóságnak-beli virtuális gépek rendelkezésre állási csoportban, mert a lemezei kellőképpen különítve egymástól a kritikus hibapontok elkerülése érdekében.</span><span class="sxs-lookup"><span data-stu-id="226b5-318">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="226b5-319">Felügyelt lemezek is, nem a storage-fiókban létrehozott virtuális merevlemezek, az IOPS-korlátok vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="226b5-319">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="226b5-320">További információkért lásd: [Azure-beli Windows virtuális gépek rendelkezésre állásának kezelése][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="226b5-320">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="226b5-321">**Alkalmazások telepítése az adatlemezt, nem az operációsrendszer-lemez.**</span><span class="sxs-lookup"><span data-stu-id="226b5-321">**Install applications on a data disk, not the OS disk.**</span></span> <span data-ttu-id="226b5-322">Ellenkező esetben előfordulhat, hogy eléri a lemez mérete korlátot.</span><span class="sxs-lookup"><span data-stu-id="226b5-322">Otherwise, you may reach the disk size limit.</span></span>

<span data-ttu-id="226b5-323">**Az Azure Backup használatával virtuális gépek biztonsági mentése.**</span><span class="sxs-lookup"><span data-stu-id="226b5-323">**Use Azure Backup to back up VMs.**</span></span> <span data-ttu-id="226b5-324">Biztonsági másolatok véletlen adatvesztés ellen.</span><span class="sxs-lookup"><span data-stu-id="226b5-324">Backups protect against accidental data loss.</span></span> <span data-ttu-id="226b5-325">További információkért lásd: [Azure virtuális gépek védelme recovery services-tároló](/azure/backup/backup-azure-vms-first-look-arm/).</span><span class="sxs-lookup"><span data-stu-id="226b5-325">For more information, see [Protect Azure VMs with a recovery services vault](/azure/backup/backup-azure-vms-first-look-arm/).</span></span>

<span data-ttu-id="226b5-326">**Diagnosztikai naplók engedélyezése**, beleértve az alapvető állapotmetrikákat, infrastruktúra naplófájljait és [rendszerindítási diagnosztika][boot-diagnostics].</span><span class="sxs-lookup"><span data-stu-id="226b5-326">**Enable diagnostic logs**, including basic health metrics, infrastructure logs, and [boot diagnostics][boot-diagnostics].</span></span> <span data-ttu-id="226b5-327">A rendszerindítási diagnosztika segít diagnosztizálni a rendszerindítási hibát, ha a virtuális gép rendszerindításra képtelen állapotba.</span><span class="sxs-lookup"><span data-stu-id="226b5-327">Boot diagnostics can help you diagnose a boot failure if your VM gets into a non-bootable state.</span></span> <span data-ttu-id="226b5-328">További információkért lásd: [áttekintése az Azure diagnosztikai naplók][diagnostics-logs].</span><span class="sxs-lookup"><span data-stu-id="226b5-328">For more information, see [Overview of Azure Diagnostic Logs][diagnostics-logs].</span></span>

<span data-ttu-id="226b5-329">**AzureLogCollector bővítményt használja.**</span><span class="sxs-lookup"><span data-stu-id="226b5-329">**Use the AzureLogCollector extension.**</span></span> <span data-ttu-id="226b5-330">(Windows virtuális gépek csak.) Ez a bővítmény az Azure platform naplók összesíti, és anélkül, hogy a virtuális gép távolról bejelentkezik az operátor feltölti azokat az Azure storage.</span><span class="sxs-lookup"><span data-stu-id="226b5-330">(Windows VMs only.) This extension aggregates Azure platform logs and uploads them to Azure storage, without the operator remotely logging into the VM.</span></span> <span data-ttu-id="226b5-331">További információkért lásd: [AzureLogCollector bővítmény](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="226b5-331">For more information, see [AzureLogCollector Extension](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

## <a name="virtual-network"></a><span data-ttu-id="226b5-332">Virtual Network</span><span class="sxs-lookup"><span data-stu-id="226b5-332">Virtual Network</span></span>

<span data-ttu-id="226b5-333">**Engedélyezési és blokkolási nyilvános IP-címeket adja hozzá egy NSG-t az alhálózathoz.**</span><span class="sxs-lookup"><span data-stu-id="226b5-333">**To whitelist or block public IP addresses, add an NSG to the subnet.**</span></span> <span data-ttu-id="226b5-334">Letiltja a hozzáférést a rosszindulatú felhasználóktól, vagy a hozzáférés engedélyezése csak a felhasználók, akik rendelkeznek jogosultsággal az alkalmazás eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="226b5-334">Block access from malicious users, or allow access only from users who have privilege to access the application.</span></span>  

<span data-ttu-id="226b5-335">**Hozzon létre egy egyéni állapotmintát.**</span><span class="sxs-lookup"><span data-stu-id="226b5-335">**Create a custom health probe.**</span></span> <span data-ttu-id="226b5-336">Load Balancer állapot-Mintavételei tesztelheti a HTTP vagy TCP.</span><span class="sxs-lookup"><span data-stu-id="226b5-336">Load Balancer Health Probes can test either HTTP or TCP.</span></span> <span data-ttu-id="226b5-337">Ha egy virtuális Gépet egy HTTP-kiszolgáló fut, a HTTP-mintavétel, mint a TCP-mintavételt állapotadatainak jobb kijelző.</span><span class="sxs-lookup"><span data-stu-id="226b5-337">If a VM runs an HTTP server, the HTTP probe is a better indicator of health status than a TCP probe.</span></span> <span data-ttu-id="226b5-338">HTTP-mintavétel használata egy egyéni végpontot, amely az alkalmazás általános állapotáról ad a, beleértve az összes kritikus fontosságú függőség jelentést.</span><span class="sxs-lookup"><span data-stu-id="226b5-338">For an HTTP probe, use a custom endpoint that reports the overall health of the application, including all critical dependencies.</span></span> <span data-ttu-id="226b5-339">További információkért lásd: [Azure Load Balancer áttekintése](/azure/load-balancer/load-balancer-overview/).</span><span class="sxs-lookup"><span data-stu-id="226b5-339">For more information, see [Azure Load Balancer overview](/azure/load-balancer/load-balancer-overview/).</span></span>

<span data-ttu-id="226b5-340">**Az állapotminta nem blokkolja.**</span><span class="sxs-lookup"><span data-stu-id="226b5-340">**Don't block the health probe.**</span></span> <span data-ttu-id="226b5-341">A Load Balancer állapot-mintavétel egy ismert IP-címet, a 168.63.129.16 címről érkezik.</span><span class="sxs-lookup"><span data-stu-id="226b5-341">The Load Balancer Health probe is sent from a known IP address, 168.63.129.16.</span></span> <span data-ttu-id="226b5-342">Nem blokkolja a bejövő és kimenő forgalmat lévő valamelyik tűzfalszabályzatban vagy a hálózati biztonsági csoport (NSG) szabályai ezen IP-címet.</span><span class="sxs-lookup"><span data-stu-id="226b5-342">Don't block traffic to or from this IP in any firewall policies or network security group (NSG) rules.</span></span> <span data-ttu-id="226b5-343">Az állapotminta blokkolja, távolítsa el a virtuális Gépet a rotációból, hogy a terheléselosztó okozna.</span><span class="sxs-lookup"><span data-stu-id="226b5-343">Blocking the health probe would cause the load balancer to remove the VM from rotation.</span></span>

<span data-ttu-id="226b5-344">**Load Balancer-naplózás engedélyezése.**</span><span class="sxs-lookup"><span data-stu-id="226b5-344">**Enable Load Balancer logging.**</span></span> <span data-ttu-id="226b5-345">A naplók megmutatják, hány virtuális gépet a háttér-a rendszer nem fogad hálózati forgalmat a meghiúsult mintavételi válaszok miatt.</span><span class="sxs-lookup"><span data-stu-id="226b5-345">The logs show how many VMs on the back-end are not receiving network traffic due to failed probe responses.</span></span> <span data-ttu-id="226b5-346">További információkért lásd: [Log analytics az Azure Load Balancerhez](/azure/load-balancer/load-balancer-monitor-log/).</span><span class="sxs-lookup"><span data-stu-id="226b5-346">For more information, see [Log analytics for Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/).</span></span>

<!-- links -->
[boot-diagnostics]: https://azure.microsoft.com/blog/boot-diagnostics-for-virtual-machines-v2/
[diagnostics-logs]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs/
[managed-disks]: /azure/storage/storage-managed-disks-overview
[search-optimization]: /azure/search/search-performance-optimization/
[sql-backup]: /azure/sql-database/sql-database-automated-backups/
[sql-restore]: /azure/sql-database/sql-database-recovery-using-backups/
[vm-manage-availability]: /azure/virtual-machines/windows/manage-availability#use-managed-disks-for-vms-in-an-availability-set
